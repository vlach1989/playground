/*! For license information please see 2.6042b60e.chunk.js.LICENSE.txt */
(this.webpackJsonpplayground=this.webpackJsonpplayground||[]).push([[2],[function(t,e,n){"use strict";t.exports=n(386)},function(t,e,n){t.exports=n(393)()},function(t,e,n){"use strict";t.exports=n(686)},function(t,e,n){"use strict";t.exports=n(518)},function(t,e,n){"use strict";n.d(e,"a",(function(){return ko})),n.d(e,"b",(function(){return Uo})),n.d(e,"c",(function(){return Ko})),n.d(e,"d",(function(){return Vo})),n.d(e,"e",(function(){return zo})),n.d(e,"f",(function(){return La})),n.d(e,"g",(function(){return ts}));var r=n(0),i=n.n(r),o=n(1),a=n.n(o),s=n(3),u=n.n(s),l=n(8),c=n.n(l),h=n(115),f=n(364),p=n.n(f),d=n(365),g=n.n(d),m=n(35),y=n.n(m),v=n(62),E=n.n(v),b=n(60),S=n.n(b),w=n(77),x=n.n(w),T=n(25),C=n.n(T),A=n(137),M=n.n(A),R=n(231),O=n.n(R),P=n(366),I=n.n(P),N=n(169),D=n(170),k=n.n(D),F=(n(230),n(97),n(367),n(34),n(29)),V=n(111),j=n.n(V),B=n(23),U=n.n(B),G=n(7),K=n.n(G),W=(n(368),n(239),n(369)),z=n.n(W),Y=n(70),H=n.n(Y);function q(t){return(q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){X(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}j()([function(t){return t},function(t,e){return e},function(t,e,n){return n}],(function(t,e,n){return J({},t,{},e,{},n=n||{})}))((function(t,e,n){return"".concat(t,"_").concat(e,"_").concat(n||"")}));var Q=function(t){return t.match(/^[0-9]{4}$/)?{start:K()(t),end:K()(t).endOf("year"),source:t,type:"year"}:t.match(/^[0-9]{4}-[0-9]{2}$/)?{start:K()(t),end:K()(t).endOf("month"),source:t,type:"month"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)?{start:K()(t),end:K()(t).endOf("day"),source:t,type:"day"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}$/)?{start:K()(t),end:K()(t).endOf("hour"),source:t,type:"hour"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}$/)?{start:K()(t),end:K()(t).endOf("minute"),source:t,type:"minute"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}$/)||t.match(/^[0-9]{4}[0-9]{2}[0-9]{2}T[0-9]{2}[0-9]{2}[0-9]{2}$/)?{start:K()(t),end:K()(t).endOf("second"),source:t,type:"second"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}/)?{start:K()(t),end:K()(t).endOf("second"),source:t,type:"full"}:void 0},$={parse:function(t){if(t.match(/\/P/))throw new Error("Durations not implemented");if(t.match(/\//)){var e=t.split("/");return{start:Q(e[0]).start,end:Q(e[1]).end,type:"interval"}}return Q(t)},toString:function(t){if(!(E()(t)&&t.start&&t.end&&t.type))throw new Error("Invalid period supplied to period.toString");switch(t.type){case"interval":return t.start.format("YYYY-MM-DD h:mm:ss")+" - "+t.end.format("YYYY-MM-DD h:mm:ss");case"second":case"full":return t.start.format("YYYY-MM-DD h:mm:ss");case"minute":return t.start.format("YYYY-MM-DD h:mm");case"hour":return t.start.format("YYYY-MM-DD h")+"h";default:return t.source}}};var tt={period:$,uuid:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))},randomString:function(t){return(Math.random()*Math.pow(36,t)>>0).toString(36)},getRemSize:function(){return parseFloat(getComputedStyle(document.documentElement).fontSize)},scrollTo:function(t,e,n){var r=document.getElementById(e),i=document.getElementById(t),o=i.offsetTop;i.offsetHeight,r.offsetHeight;document.getElementById(e).scrollTop=o},getStringFromJson:function(t){return t&&"object"===q(t)?JSON.stringify(t,null,2):t},deepKeyMirror:function(t,e){var n=this;return H()(t)?z()(t,(function(t,r){return n.deepKeyMirror(t,e?e+"."+r:r)})):e},stringToNumHash:function(t){if("string"!==typeof(t=""+t))throw new Error("stringToNumHash: argument must be a string");for(var e=1,n=0;n<t.length;n++)e=Math.imul(e+t.charCodeAt(n)|0,265443576107);return(e^e>>>17)>>>0},stringToColours:function(t,e,n){for(var r,i,o,a=this.stringToNumHash(t),s=[],u=(n=J({},{hue:[0,360],saturation:[35,65],lightness:[40,60]},{},n)).hue[1]-n.hue[0],l=n.saturation[1]-n.saturation[0],c=n.lightness[1]-n.lightness[0],h=0;h<(e||1);h++)r=a%u+n.hue[0],i=(a=(a^a>>>17)>>>0)%l+n.saturation[0],o=(a=(a^a>>>17)>>>0)%c+n.lightness[0],a=(a^a>>>17)>>>0,s.push("hsl("+r+","+i+"%,"+o+"%)");return s}};function et(t){return(et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function it(t,e,n){return e&&rt(t.prototype,e),n&&rt(t,n),t}function ot(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(Object(n),!0).forEach((function(e){ot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ut(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}function lt(t){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ht(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pt(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?ft(t):e}function dt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var gt=function(t,e){navigator.clipboard.writeText(t),e.stopPropagation()},mt=function(t){if(!t.value||"string"!==typeof t.value)return null;var e=t.value.substring(0,4);return u.a.createElement("span",{className:"option-id",title:t.value,onClick:gt.bind(null,t.value)},e)},yt=function(t){function e(t){var n;return nt(this,e),(n=pt(this,lt(e).call(this,t))).onClick=n.onClick.bind(ft(n)),n.onKeyPress=n.onKeyPress.bind(ft(n)),n}return ut(e,t),it(e,[{key:"blockEvent",value:function(t){t.stopPropagation()}},{key:"onKeyPress",value:function(t){13!==t.charCode&&32!==t.charCode||this.props.onOptionLabelClick(this.props.option)}},{key:"onClick",value:function(t){this.props.onOptionLabelClick(this.props.option,t)}},{key:"render",value:function(){var t=null;this.props.withKeyPrefix&&(t=u.a.createElement(mt,{value:this.props.option.value||this.props.option.key}));var e=u.a.createElement("span",{className:"label",key:"label"},t,this.props.option.label),n=[this.props.startItems?u.a.createElement("div",{className:"ptr-item-actions-start",key:"items-start"},this.props.startItems):null,e,this.props.endItems?u.a.createElement("div",{className:"ptr-item-actions-end",key:"items-end"},this.props.endItems):null];return"function"===typeof this.props.onOptionLabelClick?u.a.createElement("a",{className:c()("ptr-item",this.props.option.className,{disabled:this.props.disabled}),onMouseDown:this.blockEvent,onTouchEnd:this.onClick,onClick:this.onClick,onKeyPress:this.onKeyPress,style:this.props.option.style,tabIndex:this.props.unfocusable?-1:0,title:this.props.option.label},n):u.a.createElement("div",{className:c()("ptr-item ptr-icon-inline-wrap",this.props.option.className,{disabled:this.props.disabled}),style:{display:"flex"},title:this.props.option.label},n)}}]),e}(u.a.PureComponent);yt.propTypes={disabled:a.a.bool,onOptionLabelClick:a.a.func,endItems:a.a.arrayOf(a.a.element),startItems:a.a.arrayOf(a.a.element),option:a.a.object.isRequired,renderer:a.a.func,unfocusable:a.a.bool,withKeyPrefix:a.a.bool};var vt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M16,18.692c-0.192,0-0.361-0.073-0.509-0.221L5.17,8.149C5.022,8.003,4.948,7.833,4.948,7.641\r c0-0.191,0.074-0.362,0.222-0.509l1.107-1.107c0.148-0.147,0.316-0.222,0.509-0.222s0.362,0.074,0.51,0.222L16,14.729l8.704-8.704\r c0.147-0.147,0.317-0.222,0.51-0.222c0.191,0,0.361,0.074,0.509,0.222l1.107,1.107c0.147,0.146,0.222,0.317,0.222,0.509\r c0,0.192-0.074,0.362-0.222,0.509L16.51,18.472C16.361,18.619,16.192,18.692,16,18.692z M16,27.197\r c-0.192,0-0.361-0.073-0.509-0.222L5.17,16.654c-0.147-0.146-0.222-0.316-0.222-0.509c0-0.191,0.074-0.362,0.222-0.51l1.107-1.107\r c0.148-0.146,0.316-0.221,0.509-0.221s0.362,0.074,0.51,0.221L16,23.233l8.704-8.705c0.147-0.146,0.317-0.221,0.51-0.221\r c0.191,0,0.361,0.074,0.509,0.221l1.107,1.107c0.147,0.147,0.222,0.318,0.222,0.51c0,0.192-0.074,0.362-0.222,0.509L16.51,26.976\r C16.361,27.124,16.192,27.197,16,27.197z"}))},Et=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M13.308,16c0-0.192,0.073-0.361,0.221-0.509L23.851,5.17c0.146-0.147,0.316-0.222,0.509-0.222\r c0.191,0,0.362,0.074,0.509,0.222l1.107,1.107c0.147,0.148,0.222,0.316,0.222,0.509s-0.074,0.362-0.222,0.51L17.271,16l8.704,8.704\r c0.147,0.147,0.222,0.317,0.222,0.51c0,0.191-0.074,0.361-0.222,0.509l-1.107,1.107c-0.146,0.147-0.317,0.222-0.509,0.222\r c-0.192,0-0.362-0.074-0.509-0.222L13.528,16.51C13.381,16.361,13.308,16.192,13.308,16z M4.803,16c0-0.192,0.073-0.361,0.222-0.509\r L15.346,5.17c0.146-0.147,0.316-0.222,0.509-0.222c0.191,0,0.362,0.074,0.51,0.222l1.107,1.107c0.146,0.148,0.221,0.316,0.221,0.509\r s-0.074,0.362-0.221,0.51L8.767,16l8.705,8.704c0.146,0.147,0.221,0.317,0.221,0.51c0,0.191-0.074,0.361-0.221,0.509l-1.107,1.107\r c-0.147,0.147-0.318,0.222-0.51,0.222c-0.192,0-0.362-0.074-0.509-0.222L5.024,16.51C4.876,16.361,4.803,16.192,4.803,16z"}))},_t=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M18.692,16c0,0.192-0.073,0.361-0.221,0.509L8.15,26.83c-0.147,0.147-0.317,0.222-0.509,0.222\r c-0.191,0-0.362-0.074-0.509-0.222l-1.107-1.107c-0.147-0.148-0.222-0.316-0.222-0.509s0.074-0.362,0.222-0.51L14.729,16\r L6.024,7.296C5.877,7.148,5.803,6.979,5.803,6.787s0.074-0.362,0.222-0.509L7.132,5.17C7.279,5.022,7.45,4.948,7.641,4.948\r c0.192,0,0.362,0.074,0.509,0.222l10.322,10.32C18.619,15.639,18.692,15.808,18.692,16z M27.197,16c0,0.192-0.073,0.361-0.222,0.509\r L16.654,26.83c-0.146,0.147-0.316,0.222-0.509,0.222c-0.191,0-0.362-0.074-0.51-0.222l-1.107-1.107\r c-0.147-0.148-0.221-0.316-0.221-0.509s0.074-0.362,0.221-0.51L23.233,16l-8.705-8.704c-0.147-0.147-0.221-0.317-0.221-0.509\r s0.074-0.362,0.221-0.509l1.107-1.107c0.147-0.148,0.318-0.222,0.51-0.222c0.192,0,0.362,0.074,0.509,0.222l10.321,10.32\r C27.124,15.639,27.197,15.808,27.197,16z"}))},bt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M16,13.308c0.192,0,0.361,0.073,0.509,0.221L26.83,23.851c0.147,0.146,0.222,0.316,0.222,0.509\r c0,0.191-0.074,0.362-0.222,0.509l-1.107,1.107c-0.148,0.147-0.316,0.222-0.509,0.222s-0.362-0.074-0.51-0.222L16,17.271\r l-8.704,8.704c-0.147,0.147-0.317,0.222-0.509,0.222s-0.362-0.074-0.509-0.222L5.17,24.868c-0.148-0.146-0.222-0.317-0.222-0.509\r c0-0.192,0.074-0.362,0.222-0.509l10.32-10.322C15.639,13.381,15.808,13.308,16,13.308z M16,4.803c0.192,0,0.361,0.073,0.509,0.222\r L26.83,15.346c0.147,0.146,0.222,0.316,0.222,0.509c0,0.191-0.074,0.362-0.222,0.51l-1.107,1.107\r c-0.148,0.146-0.316,0.221-0.509,0.221s-0.362-0.074-0.51-0.221L16,8.767l-8.704,8.705c-0.147,0.146-0.317,0.221-0.509,0.221\r s-0.362-0.074-0.509-0.221L5.17,16.364c-0.148-0.147-0.222-0.318-0.222-0.51c0-0.192,0.074-0.362,0.222-0.509l10.32-10.321\r C15.639,4.876,15.808,4.803,16,4.803z"}))},St=function(t){return u.a.createElement("g",null,u.a.createElement("rect",{className:"line",x:"5.578",y:"15",width:"21.125",height:"2"}),u.a.createElement("polygon",{className:"line",points:"12.977,25.095 3.882,16 12.977,6.905 14.391,8.319 6.71,16 14.391,23.681"}))},wt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"m 19.203116,23.592532 q -1.800558,0 -3.293425,-0.273502 v -1.584035 h 2.529897 q 0.683756,0 0.957259,-0.136751 0.273502,-0.136751 0.273502,-0.490025 v -0.273502 q 0,-0.67236 -0.991446,-0.706548 l -2.051268,-0.09117 V 18.52134 l 1.9601,-0.125355 q 0.512817,-0.02279 0.740736,-0.159543 0.239315,-0.136751 0.239315,-0.444441 V 17.59827 q 0,-0.387462 -0.273503,-0.558401 -0.262106,-0.170939 -0.900278,-0.170939 h -2.336167 v -1.572638 q 1.777766,-0.296295 2.997131,-0.296295 1.185177,0 1.823349,0.535609 0.638172,0.524213 0.638172,1.584035 v 0.603984 q 0,1.219365 -1.002842,1.549847 0.512817,0.159543 0.820507,0.649568 0.30769,0.478629 0.30769,1.185177 v 0.376066 q 0,1.014238 -0.649568,1.561242 -0.638172,0.547005 -1.789161,0.547005 z m -7.79002,-6.7236 L 10,16.9601 v -1.253553 l 1.641014,-0.706548 h 1.743578 v 8.524158 H 11.413096 Z M 9.4765625,3.3515625 A 1.5001498,1.5001498 0 0 0 8,4.8730469 v 2.1484375 a 1.5001498,1.5001498 0 1 0 3,0 V 4.8730469 A 1.5001498,1.5001498 0 0 0 9.4765625,3.3515625 Z M 22.476562,3.4785156 A 1.50015,1.50015 0 0 0 21,5 v 2.1542969 a 1.50015,1.50015 0 1 0 3,0 V 5 A 1.50015,1.50015 0 0 0 22.476562,3.4785156 Z M 5,6.3515625 A 1.0001,1.1771578 0 0 0 4,7.5292969 V 11.822266 A 1.0001,1.1771578 0 0 0 5,13 h 22 a 1.0001,1.1771578 0 0 0 1,-1.177734 V 7.5292969 A 1.0001,1.1771578 0 0 0 27,6.3515625 h -2 v 0.8027344 a 2.50025,2.50025 0 1 1 -5,0 V 6.3515625 h -8 v 0.8164063 a 2.50025,2.50025 0 1 1 -5,0 V 6.3515625 Z M 5,10 a 1.0001,1.0001 0 0 0 -1,1 v 16 a 1.0001,1.0001 0 0 0 1,1 h 22 a 1.0001,1.0001 0 0 0 1,-1 V 11 a 1.0001,1.0001 0 0 0 -1,-1 z m 1,2 H 26 V 26 H 6 Z"}))},xt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M 26,16 A 10,10 0 0 1 16,26 10,10 0 0 1 6,16 10,10 0 0 1 16,6 10,10 0 0 1 26,16 Z"}))},Tt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M 21.292969,3.2929688 8.5859375,16 21.292969,28.707031 22.707031,27.292969 11.414062,16 22.707031,4.7070312 Z"}))},Lt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M 10,3.2929688 8.5859375,4.7070312 19.878906,16 8.5859375,27.292969 10,28.707031 22.707031,16 Z"}))},Ct=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M 29.009766 2.9902344 L 28.5 2.9960938 C 28.5 2.9960938 27.713516 3.0026237 26.796875 3.1367188 C 25.880234 3.2708164 24.818205 3.4747606 24.150391 4.1425781 C 23.482576 4.8103924 23.280583 5.8704688 23.146484 6.7871094 C 23.012386 7.7037499 23.003906 8.4902344 23.003906 8.4902344 L 23 9 L 23.509766 8.9960938 C 23.509766 8.9960938 24.29625 8.9876138 25.212891 8.8535156 C 26.129531 8.7194166 27.189607 8.5174204 27.857422 7.8496094 C 28.525236 7.1817989 28.729183 6.1197656 28.863281 5.203125 C 28.99738 4.2864844 29.003906 3.5 29.003906 3.5 L 29.009766 2.9902344 z M 18.990234 4 L 18.603516 4.3300781 C 18.603516 4.3300781 18.004663 4.8412729 17.388672 5.5332031 C 16.772681 6.2251333 16.090124 7.063066 16.007812 8.0039062 C 15.925503 8.9447444 16.452973 9.8893506 16.939453 10.677734 C 17.425933 11.466119 17.925781 12.072266 17.925781 12.072266 L 18.25 12.466797 L 18.636719 12.134766 C 18.636719 12.134766 19.235573 11.623571 19.851562 10.931641 C 20.467554 10.23971 21.148153 9.4017729 21.230469 8.4609375 C 21.312779 7.5200995 20.787261 6.5774467 20.300781 5.7890625 C 19.814301 5.0006783 19.314453 4.3925781 19.314453 4.3925781 L 18.990234 4 z M 13.990234 9 L 13.603516 9.3300781 C 13.603516 9.3300781 13.004663 9.841273 12.388672 10.533203 C 11.772681 11.225133 11.090124 12.063066 11.007812 13.003906 C 10.925503 13.944744 11.452973 14.88935 11.939453 15.677734 C 12.425933 16.466118 12.925781 17.072266 12.925781 17.072266 L 13.25 17.466797 L 13.636719 17.134766 C 13.636719 17.134766 14.235572 16.623571 14.851562 15.931641 C 15.467553 15.23971 16.148153 14.401772 16.230469 13.460938 C 16.312779 12.5201 15.787261 11.577448 15.300781 10.789062 C 14.814301 10.000678 14.314453 9.3925781 14.314453 9.3925781 L 13.990234 9 z M 23.892578 10.765625 C 23.775221 10.758183 23.656668 10.759242 23.539062 10.769531 C 22.598225 10.851841 21.76029 11.532446 21.068359 12.148438 C 20.376429 12.764428 19.865234 13.363281 19.865234 13.363281 L 19.533203 13.75 L 19.927734 14.074219 C 19.927734 14.074219 20.533881 14.574068 21.322266 15.060547 C 22.11065 15.547026 23.055257 16.074497 23.996094 15.992188 C 24.936932 15.909878 25.774866 15.227319 26.466797 14.611328 C 27.158727 13.995338 27.669922 13.396484 27.669922 13.396484 L 28 13.009766 L 27.607422 12.685547 C 27.607422 12.685547 26.999322 12.1857 26.210938 11.699219 C 25.521101 11.273548 24.714076 10.81772 23.892578 10.765625 z M 8.9902344 14 L 8.6035156 14.330078 C 8.6035156 14.330078 8.0046629 14.841273 7.3886719 15.533203 C 6.7726809 16.225133 6.0901237 17.063066 6.0078125 18.003906 C 5.9254995 18.944744 6.4529733 19.88935 6.9394531 20.677734 C 7.425933 21.466118 7.9257814 22.072266 7.9257812 22.072266 L 8.1914062 22.394531 L 2.9296875 27.65625 L 4.34375 29.070312 L 9.6054688 23.808594 L 9.9277344 24.074219 C 9.9277344 24.074219 10.533881 24.574068 11.322266 25.060547 C 12.11065 25.547026 13.055257 26.074497 13.996094 25.992188 C 14.936932 25.909878 15.774866 25.227319 16.466797 24.611328 C 17.158727 23.995338 17.669922 23.396484 17.669922 23.396484 L 18 23.009766 L 17.607422 22.685547 C 17.607422 22.685547 16.999322 22.1857 16.210938 21.699219 C 15.422553 21.212738 14.479903 20.687216 13.539062 20.769531 C 12.598225 20.851841 11.76029 21.532447 11.068359 22.148438 C 10.416896 22.728402 9.9595286 23.254283 9.9042969 23.318359 L 8.6816406 22.095703 C 8.7457168 22.040471 9.2715977 21.583104 9.8515625 20.931641 C 10.467553 20.23971 11.148153 19.401772 11.230469 18.460938 C 11.312781 17.5201 10.787261 16.577447 10.300781 15.789062 C 9.8143016 15.000679 9.3144531 14.392578 9.3144531 14.392578 L 8.9902344 14 z M 18.892578 15.765625 C 18.775221 15.758183 18.656668 15.759242 18.539062 15.769531 C 17.598225 15.851841 16.76029 16.532446 16.068359 17.148438 C 15.376429 17.764428 14.865234 18.363281 14.865234 18.363281 L 14.533203 18.75 L 14.927734 19.074219 C 14.927734 19.074219 15.533881 19.574068 16.322266 20.060547 C 17.11065 20.547026 18.055257 21.074497 18.996094 20.992188 C 19.936932 20.909878 20.774866 20.227319 21.466797 19.611328 C 22.158727 18.995338 22.669922 18.396484 22.669922 18.396484 L 23 18.009766 L 22.607422 17.685547 C 22.607422 17.685547 21.999322 17.1857 21.210938 16.699219 C 20.521101 16.273548 19.714076 15.81772 18.892578 15.765625 z"}))},At=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"polygon",d:"M8 8 l0 18 l16 0 l0 -18",strokeWidth:"2",stroke:"black",strokeLinejoin:"round",fill:"transparent"}),u.a.createElement("path",{className:"line",d:"M5 8 l22 0",strokeWidth:"2",stroke:"black",strokeLinecap:"round"}),u.a.createElement("path",{className:"line",d:"M14 12 l0 10",strokeWidth:"2",stroke:"black",strokeLinecap:"round"}),u.a.createElement("path",{className:"line",d:"M18 12 l0 10",strokeWidth:"2",stroke:"black",strokeLinecap:"round"}),u.a.createElement("path",{className:"polygon",d:"M10 8 l3 -4 l6 0 l3 4",strokeWidth:"2",stroke:"black",strokeLinejoin:"round",fill:"transparent"}))},Mt=function(t){return u.a.createElement("g",null,u.a.createElement("circle",{className:"line",cx:"16",cy:"8",r:"2.4"}),u.a.createElement("circle",{className:"line",cx:"16",cy:"16",r:"2.4"}),u.a.createElement("circle",{className:"line",cx:"16",cy:"24",r:"2.4"}))},Rt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M5 27 l22 0",strokeWidth:"2",stroke:"black"}),u.a.createElement("path",{className:"line",d:"M16 5 l0 18",strokeWidth:"2",stroke:"black"}),u.a.createElement("path",{className:"line",d:"M9 16 l8 8",strokeWidth:"2",stroke:"black"}),u.a.createElement("path",{className:"line",d:"M23 16 l-8 8",strokeWidth:"2",stroke:"black"}))},Ot=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M5.382,26.619l1.641-5.399l0.059-0.059l15.781-15.78l3.757,3.758L10.78,24.977L5.382,26.619z M7.597,21.562\r l-1.242,4.083l4.082-1.242L25.703,9.139l-2.841-2.842L7.597,21.562z"}),u.a.createElement("rect",{className:"line",x:"6.628",y:"22.713",transform:"matrix(-0.7071 -0.7071 0.7071 -0.7071 -0.9941 45.6625)",width:"4.664",height:"0.649"}),u.a.createElement("polygon",{className:"line",points:"7.99,25.49 5.968,26.031 6.509,24.009"}))},Pt=function(t){return u.a.createElement("g",{transform:"scale(0.015,-0.015) translate(300,-1636)"},u.a.createElement("path",{className:"line",d:"M755 480q0 -13 -10 -23l-332 -332l144 -144q19 -19 19 -45t-19 -45t-45 -19h-448q-26 0 -45 19t-19 45v448q0 26 19 45t45 19t45 -19l144 -144l332 332q10 10 23 10t23 -10l114 -114q10 -10 10 -23zM1536 1344v-448q0 -26 -19 -45t-45 -19t-45 19l-144 144l-332 -332\r\nq-10 -10 -23 -10t-23 10l-114 114q-10 10 -10 23t10 23l332 332l-144 144q-19 19 -19 45t19 45t45 19h448q26 0 45 -19t19 -45z"}))},It=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M26,12.832c0,0.174-0.066,0.327-0.2,0.461l-9.339,9.337c-0.134,0.134-0.287,0.201-0.461,0.201s-0.327-0.067-0.461-0.201\r L6.2,13.293C6.066,13.159,6,13.006,6,12.832s0.066-0.327,0.2-0.461l1.002-1.002c0.134-0.134,0.287-0.2,0.461-0.2\r s0.327,0.066,0.461,0.2L16,19.243l7.876-7.874c0.134-0.134,0.287-0.2,0.461-0.2s0.327,0.066,0.461,0.2l1.002,1.002\r C25.934,12.505,26,12.658,26,12.832z"}))},Nt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"m 9,1.5 c -2.198703,0 -4,1.8012974 -4,4 v 21 c 0,2.198703 1.801297,4 4,4 h 14 c 2.198703,0 4,-1.801297 4,-4 v -15 -1.324219 A 1.0001,1.0001 0 0 0 26.707031,9.46875 L 19.015625,1.7929688 A 1.0001,1.0001 0 0 0 18.310547,1.5 H 17.042969 A 1.0001,1.0001 0 0 0 17,1.5 Z m 0,2 h 6.953125 c -0.0097,0.2214834 -0.02148,0.2963688 -0.02148,0.4960938 V 8.5 c 0,2.198703 1.801297,4 4,4 H 24.5 25 v 14 c 0,1.125297 -0.874703,2 -2,2 H 9 c -1.1252976,0 -2,-0.874703 -2,-2 v -21 c 0,-1.1252972 0.8747024,-2 2,-2 z M 17.953125,3.5546875 24.908203,10.5 H 24.5 19.931641 c -1.125298,0 -2,-0.8747028 -2,-2 V 3.9960938 c 0,-0.1442488 0.01276,-0.2455428 0.02148,-0.4414063 z"}),u.a.createElement("path",{className:"line",d:"m 10.480661,24.00091 q -0.8341334,0 -1.3690667,-0.272 -0.5258667,-0.272 -0.816,-1.024533 -0.2901334,-0.752533 -0.2901334,-2.1488 0,-1.350933 0.2992,-2.0944 0.3082667,-0.752533 0.8432,-1.0336 0.5349334,-0.281067 1.3328001,-0.281067 0.752533,0 1.3056,0.1088 0.562133,0.1088 0.906667,0.253867 v 1.369067 q -0.2992,-0.06347 -0.779734,-0.1088 -0.480533,-0.04533 -1.042666,-0.04533 -0.444267,0 -0.670934,0.136 -0.2266664,0.126934 -0.3354664,0.5168 -0.099733,0.389867 -0.099733,1.1968 0,0.770667 0.0816,1.151467 0.090667,0.3808 0.3263997,0.544 0.235734,0.154133 0.716267,0.154133 1.187733,0 1.804267,-0.0816 v 1.369067 q -0.725334,0.290133 -2.212267,0.290133 z"}),u.a.createElement("path",{className:"line",d:"m 15.638178,24.00091 q -1.160534,0 -2.166934,-0.262933 V 22.34171 q 0.906667,0.0816 2.076267,0.0816 0.4624,0 0.68,-0.09973 0.2176,-0.1088 0.2176,-0.362667 v -0.1088 q 0,-0.1904 -0.136,-0.290133 -0.136,-0.1088 -0.335467,-0.1088 h -0.480533 q -1.078933,0 -1.613867,-0.471467 -0.525866,-0.480533 -0.525866,-1.541333 v -0.2992 q 0,-0.988267 0.589333,-1.486933 0.589333,-0.498667 1.731733,-0.498667 0.997334,0 2.103467,0.262933 v 1.396267 q -1.015467,-0.0816 -1.885867,-0.0816 -0.4352,0 -0.6528,0.1088 -0.2176,0.09973 -0.2176,0.389867 v 0.09067 q 0,0.4624 0.589334,0.4624 h 0.5984 q 0.915733,0 1.405333,0.507734 0.498667,0.507733 0.498667,1.323733 v 0.2992 q 0,0.834133 -0.290134,1.296533 -0.290133,0.453334 -0.825066,0.6256 -0.525867,0.1632 -1.36,0.1632 z"}),u.a.createElement("path",{className:"line",d:"m 18.40252,17.209977 h 1.8224 l 1.2784,4.823467 1.2784,-4.823467 h 1.804266 L 22.59132,23.94651 h -2.194134 z"}))},Dt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M 6,2 C 3.8012972,2 2,3.8012973 2,6 v 21 c 0,2.198703 1.8012972,4 4,4 h 14 c 2.198703,0 4,-1.801297 4,-4 v -4 h -2 v 4 c 0,1.125297 -0.874703,2 -2,2 H 6 C 4.8747028,29 4,28.125297 4,27 V 6 C 4,4.8747029 4.8747028,4 6,4 h 6.953125 c -0.0097,0.2214834 -0.02148,0.2963688 -0.02148,0.4960938 V 9 c 0,2.198703 1.801297,4 4,4 H 21.5 22 v 4 h 2 V 12 10.675781 A 1.0001,1.0001 0 0 0 23.707031,9.96875 L 16.015625,2.2929688 A 1.0001,1.0001 0 0 0 15.310547,2 H 14.042969 A 1.0001,1.0001 0 0 0 14,2 Z M 14.953125,4.0546875 21.908203,11 H 21.5 16.931641 c -1.125298,0 -2,-0.874703 -2,-2 V 4.4960938 c 0,-0.1442488 0.01276,-0.2455428 0.02148,-0.4414063 z"}),u.a.createElement("path",{className:"line",d:"m 26.990234,15.990234 a 1.0001,1.0001 0 0 0 -0.697265,1.716797 L 27.585938,19 H 15 a 1.0001,1.0001 0 1 0 0,2 h 12.585938 l -1.292969,1.292969 a 1.0001,1.0001 0 1 0 1.414062,1.414062 l 2.91211,-2.912109 a 1.0001,1.0001 0 0 0 0.0039,-1.587891 1.0001,1.0001 0 0 0 -0.0059,-0.0039 l -2.910157,-2.910156 a 1.0001,1.0001 0 0 0 -0.716797,-0.302735 z"}))},kt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"m 9,1.5 c -2.198703,0 -4,1.8012974 -4,4 v 21 c 0,2.198703 1.801297,4 4,4 h 14 c 2.198703,0 4,-1.801297 4,-4 v -15 -1.324219 A 1.0001,1.0001 0 0 0 26.707031,9.46875 L 19.015625,1.7929688 A 1.0001,1.0001 0 0 0 18.310547,1.5 H 17.042969 A 1.0001,1.0001 0 0 0 17,1.5 Z m 0,2 h 6.953125 c -0.0097,0.2214834 -0.02148,0.2963688 -0.02148,0.4960938 V 8.5 c 0,2.198703 1.801297,4 4,4 H 24.5 25 v 14 c 0,1.125297 -0.874703,2 -2,2 H 9 c -1.1252976,0 -2,-0.874703 -2,-2 v -21 c 0,-1.1252972 0.8747024,-2 2,-2 z M 17.953125,3.5546875 24.908203,10.5 H 24.5 19.931641 c -1.125298,0 -2,-0.8747028 -2,-2 V 3.9960938 c 0,-0.1442488 0.01276,-0.2455428 0.02148,-0.4414063 z"}),u.a.createElement("path",{className:"line",d:"m 23.058594,19.001953 c 0,0 -0.700885,-0.04464 -1.50586,0.08203 -0.804974,0.126674 -1.913068,0.374916 -2.451172,1.478516 -0.45985,0.943111 -0.255741,1.87634 -0.09961,2.394531 0.07807,0.259096 0.12878,0.441691 0.136719,0.511719 0.0079,0.07003 0.01564,-0.0037 0.0098,0.0059 0.08047,-0.130195 -0.27278,0.18517 -0.650391,0.328125 -0.377612,0.142956 -0.720703,0.222657 -0.720703,0.222657 a 1.0001,1.0001 0 1 0 0.445312,1.949218 c 0,0 0.459952,-0.102246 0.984375,-0.300781 0.524424,-0.198535 1.17221,-0.384205 1.644531,-1.148437 0.256988,-0.415814 0.317228,-0.914151 0.275391,-1.283203 -0.04184,-0.369053 -0.144037,-0.63929 -0.210937,-0.861329 -0.133801,-0.444077 -0.191728,-0.586196 -0.01758,-0.943359 0.01949,-0.03996 0.411168,-0.291471 0.966796,-0.378906 0.555629,-0.08744 1.076172,-0.06055 1.076172,-0.06055 a 1.0001,1.0001 0 1 0 0.117188,-1.996094 z m -5.134766,-5.003906 a 1.0001,1.0001 0 0 0 -0.146484,1.976562 c 0,0 0.343091,0.0797 0.720703,0.222657 0.377611,0.142955 0.730856,0.45832 0.650391,0.328125 0.0059,0.0095 -0.0018,-0.06417 -0.0098,0.0059 -0.0079,0.07003 -0.05865,0.252623 -0.136719,0.511719 -0.156132,0.518191 -0.360241,1.45142 0.09961,2.394531 0.538104,1.1036 1.646198,1.351842 2.451172,1.478516 0.804975,0.126673 1.50586,0.08203 1.50586,0.08203 a 1.0001,1.0001 0 1 0 -0.117188,-1.996094 c 0,0 -0.520543,0.02689 -1.076172,-0.06055 -0.555628,-0.08743 -0.94731,-0.338941 -0.966796,-0.378906 -0.17415,-0.357163 -0.116223,-0.499282 0.01758,-0.943359 0.0669,-0.222039 0.1691,-0.492276 0.210937,-0.861329 0.04184,-0.369052 -0.0184,-0.867389 -0.275391,-1.283203 C 20.37921,14.710414 19.731424,14.524744 19.207,14.326209 18.682577,14.127674 18.222625,14.025428 18.222625,14.025428 a 1.0001,1.0001 0 0 0 -0.298828,-0.02734 z m -8.9824218,5.003906 a 1.0001,1.0001 0 1 0 0.1171876,1.996094 c 0,0 0.5205436,-0.02689 1.0761722,0.06055 0.555628,0.08743 0.94731,0.338941 0.966796,0.378906 0.17415,0.357163 0.116223,0.499282 -0.01758,0.943359 -0.0669,0.222039 -0.1691,0.492276 -0.210937,0.861329 -0.04184,0.369052 0.0184,0.867389 0.275391,1.283203 0.472321,0.764232 1.120107,0.949902 1.644531,1.148437 0.524424,0.198535 0.984375,0.300781 0.984375,0.300781 a 1.0001,1.0001 0 1 0 0.445312,-1.949218 c 0,0 -0.343091,-0.0797 -0.720703,-0.222657 -0.377612,-0.142955 -0.730855,-0.458319 -0.650391,-0.328125 -0.0059,-0.0095 0.0018,0.06417 0.0098,-0.0059 0.0079,-0.07003 0.05865,-0.252623 0.136719,-0.511719 0.156132,-0.518191 0.360241,-1.45142 -0.09961,-2.394531 -0.538104,-1.1036 -1.646198,-1.351842 -2.451172,-1.478516 -0.8049746,-0.126673 -1.5058597,-0.08203 -1.5058598,-0.08203 z m 5.1035158,-5.003906 a 1.0001,1.0001 0 0 0 -0.267578,0.02734 c 0,0 -0.459951,0.102246 -0.984375,0.300781 -0.524424,0.198535 -1.17221,0.384205 -1.644531,1.148437 -0.256988,0.415814 -0.317228,0.914151 -0.275391,1.283203 0.04184,0.369053 0.144037,0.63929 0.210937,0.861329 0.133801,0.444077 0.191728,0.586196 0.01758,0.943359 -0.01949,0.03996 -0.411168,0.291471 -0.966796,0.378906 -0.5556286,0.08744 -1.0761722,0.06055 -1.0761722,0.06055 a 1.0001,1.0001 0 1 0 -0.1171876,1.996094 c 0,0 0.7008852,0.04464 1.5058598,-0.08203 0.804974,-0.126674 1.913068,-0.374916 2.451172,-1.478516 0.45985,-0.943111 0.255741,-1.87634 0.09961,-2.394531 -0.07807,-0.259096 -0.12878,-0.441691 -0.136719,-0.511719 -0.0079,-0.07003 -0.01564,0.0037 -0.0098,-0.0059 -0.08046,0.130194 0.272779,-0.18517 0.650391,-0.328125 0.377612,-0.142956 0.720703,-0.222657 0.720703,-0.222657 a 1.0001,1.0001 0 0 0 -0.177734,-1.976562 z"}))},Ft=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"m 9,1.5 c -2.198703,0 -4,1.8012974 -4,4 v 21 c 0,2.198703 1.801297,4 4,4 h 14 c 2.198703,0 4,-1.801297 4,-4 v -15 -1.324219 A 1.0001,1.0001 0 0 0 26.707031,9.46875 L 19.015625,1.7929688 A 1.0001,1.0001 0 0 0 18.310547,1.5 H 17.042969 A 1.0001,1.0001 0 0 0 17,1.5 Z m 0,2 h 6.953125 c -0.0097,0.2214834 -0.02148,0.2963688 -0.02148,0.4960938 V 8.5 c 0,2.198703 1.801297,4 4,4 H 24.5 25 v 14 c 0,1.125297 -0.874703,2 -2,2 H 9 c -1.1252976,0 -2,-0.874703 -2,-2 v -21 c 0,-1.1252972 0.8747024,-2 2,-2 z M 17.953125,3.5546875 24.908203,10.5 H 24.5 19.931641 c -1.125298,0 -2,-0.8747028 -2,-2 V 3.9960938 c 0,-0.1442488 0.01276,-0.2455428 0.02148,-0.4414063 z"}),u.a.createElement("path",{className:"line",d:"m 17.596711,20.583751 3.329625,5.362759 H 17.773505 L 15.858234,22.867344 14.178689,25.94651 H 11.025858 L 14.355483,20.451156 10.981659,15 H 14.13449 L 16.108693,18.197029 17.847169,15 H 21 Z"}))},Vt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M 5,4 H 28 L 18.535874,15 18.453432,25 13,27 V 15 L 4,4 h 1"}))},jt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M20.653,25.472h-1.695V13.243c0-0.423-0.343-0.766-0.766-0.766h-3.207h-1.179h-2.46c-0.423,0-0.766,0.343-0.766,0.766v0.563\r c0,0.424,0.343,0.766,0.766,0.766h1.694v10.899h-1.695c-0.423,0-0.766,0.343-0.766,0.766v0.563c0,0.424,0.343,0.766,0.766,0.766\r h2.456c0.002,0,0.003,0.001,0.005,0.001h4.386c0.002,0,0.003-0.001,0.005-0.001h2.456c0.423,0,0.766-0.342,0.766-0.766v-0.563\r C21.419,25.814,21.076,25.472,20.653,25.472z"}),u.a.createElement("circle",{className:"line",cx:"16",cy:"7.583",r:"3.151"}))},Bt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{d:"M5 5 l0 17 l5 0 l0 -12 l12 0 l0 -5",strokeWidth:"2",className:"polygonFilled"}),u.a.createElement("path",{d:"M10 22 l0 5 l17 0 l0 -17 l-5 0 l0 12 l-12 0",strokeWidth:"2",className:"polygon"}),u.a.createElement("path",{d:"M10 10 L22 22",strokeWidth:"2",className:"line"}),u.a.createElement("path",{d:"M16 10 L22 16",strokeWidth:"2",className:"line"}),u.a.createElement("path",{d:"M10 16 L16 22",strokeWidth:"2",className:"line"}))},Ut=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M 16,2.8828125 1.7636719,10 3.5527344,10.894531 16,17.117188 30.236328,10 Z M 16,5.1171875 25.763672,10 16,14.882812 6.2363281,10 Z"}),u.a.createElement("path",{className:"line",d:"M 9.5527344,12.105469 1.7636719,16 16,23.117188 30.236328,16 22.447266,12.105469 21.552734,13.894531 25.763672,16 16,20.882812 6.2363281,16 10.447266,13.894531 Z"}),u.a.createElement("path",{className:"line",d:"M 9.5527344,18.105469 1.7636719,22 16,29.117188 30.236328,22 22.447266,18.105469 21.552734,19.894531 25.763672,22 16,26.882812 6.2363281,22 10.447266,19.894531 Z"}))},Gt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M 10,25 A 3.5,3.5 0 0 1 6.5,28.5 3.5,3.5 0 0 1 3,25 3.5,3.5 0 0 1 6.5,21.5 3.5,3.5 0 0 1 10,25 Z"}),u.a.createElement("path",{className:"line",d:"m 4,12.5 h 5 c 0.554,0 1,0.446 1,1 v 5 c 0,0.554 -0.446,1 -1,1 H 4 c -0.554,0 -1,-0.446 -1,-1 v -5 c 0,-0.554 0.446,-1 1,-1 z"}),u.a.createElement("path",{className:"line",d:"M 6.5488281,4.0214844 C 6.3688189,4.0168495 6.200219,4.1093556 6.1074219,4.2636719 l -3,4.9785156 C 2.9071078,9.5751818 3.1465554,9.9994087 3.5351562,10 h 6 C 9.9237571,9.9994087 10.163205,9.5751818 9.9628906,9.2421875 l -3,-4.9785156 C 6.8751262,4.1176904 6.7190891,4.0264234 6.5488281,4.0214844 Z M 8.6503906,9 V 9 H 4.4199219 Z"}),u.a.createElement("path",{className:"line",d:"m 14.080078,6 a 1.0001,1.0001 0 1 0 0,2 h 13.853516 a 1.0001,1.0001 0 1 0 0,-2 z"}),u.a.createElement("path",{className:"line",d:"m 14.080078,15 a 1.0001,1.0001 0 1 0 0,2 h 13.853516 a 1.0001,1.0001 0 1 0 0,-2 z"}),u.a.createElement("path",{className:"line",d:"m 14.080078,24 a 1.0001,1.0001 0 1 0 0,2 h 13.853516 a 1.0001,1.0001 0 1 0 0,-2 z"}))},Kt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"m 19.703125,14.544922 -3.705078,5.810547 -3.697266,-5.78125 -4.2128904,2.693359 7.9140624,12.376953 7.916016,-12.410156 z M 16,2.5 c -5.217094,0 -9.5,4.2829065 -9.5,9.5 0,5.217094 4.282906,9.5 9.5,9.5 5.217094,0 9.5,-4.282906 9.5,-9.5 0,-5.2170935 -4.282906,-9.5 -9.5,-9.5 z m 0,5 c 2.514893,0 4.5,1.985107 4.5,4.5 0,2.514893 -1.985107,4.5 -4.5,4.5 -2.514893,0 -4.5,-1.985107 -4.5,-4.5 0,-2.514893 1.985107,-4.5 4.5,-4.5 z"}))},Wt=function(t){return u.a.createElement("g",null,u.a.createElement("rect",{className:"line",x:"4",y:"15.2",width:"24",height:"1.6"}))},zt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M27.088,17.484c0,0.423-0.343,0.766-0.766,0.766H5.677c-0.423,0-0.766-0.343-0.766-0.766v-2.969\r c0-0.423,0.343-0.766,0.766-0.766h20.646c0.423,0,0.766,0.343,0.766,0.766V17.484z"}))},Yt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"m 11,27 a 1.0001,1.0001 0 1 0 0,2 h 10 a 1.0001,1.0001 0 1 0 0,-2 z m 3,-5 -1,6 h 6 L 18,22 M 4,4 A 1.0001,1.0001 0 0 0 3,5 v 17 a 1.0001,1.0001 0 0 0 1,1 h 24 a 1.0001,1.0001 0 0 0 1,-1 V 5 A 1.0001,1.0001 0 0 0 28,4 Z M 5,6 H 27 V 21 H 5 Z"}))},Ht=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M 4 4 A 1.0001 1.0001 0 0 0 3 5 L 3 22 A 1.0001 1.0001 0 0 0 4 23 L 13.833984 23 L 13.166016 27 L 11 27 A 1.0001 1.0001 0 1 0 11 29 L 21 29 A 1.0001 1.0001 0 1 0 21 27 L 18.833984 27 L 18.166016 23 L 28 23 A 1.0001 1.0001 0 0 0 29 22 L 29 5 A 1.0001 1.0001 0 0 0 28 4 L 4 4 z M 5 6 L 27 6 L 27 21 L 5 21 L 5 6 z M 18.9375 7.5957031 L 14.888672 15.099609 L 11.439453 10.1875 L 8.1503906 15.470703 L 9.8496094 16.529297 L 11.539062 13.8125 L 15.111328 18.898438 L 19.0625 11.576172 L 22.152344 16.529297 L 23.847656 15.470703 L 18.9375 7.5957031 z"}))},qt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M16.983,3.272l7.351,22.055c0.139,0.398,0.055,0.75-0.252,1.057c-0.037,0.038-0.104,0.089-0.193,0.148\r c-0.209,0.13-0.431,0.182-0.667,0.149c-0.237-0.029-0.44-0.131-0.609-0.298l-6.617-6.616l-6.617,6.616\r c-0.168,0.167-0.371,0.269-0.609,0.298c-0.237,0.032-0.459-0.02-0.666-0.149c-0.207-0.13-0.352-0.306-0.437-0.528\r c-0.084-0.222-0.087-0.446-0.011-0.677l7.352-22.055c0.045-0.153,0.131-0.292,0.253-0.414c0.207-0.206,0.452-0.306,0.735-0.298\r c0.223-0.008,0.425,0.054,0.609,0.184C16.788,2.874,16.915,3.05,16.983,3.272z"}))},Xt=function(t){return u.a.createElement("g",null,u.a.createElement("rect",{className:"line",x:"15.2",y:"4",width:"1.6",height:"24"}),u.a.createElement("rect",{className:"line",x:"4",y:"15.2",width:"24",height:"1.6"}))},Zt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M27.088,17.484c0,0.423-0.343,0.766-0.766,0.766H5.677c-0.423,0-0.766-0.343-0.766-0.766v-2.969\r c0-0.423,0.343-0.766,0.766-0.766h20.646c0.423,0,0.766,0.343,0.766,0.766V17.484z"}),u.a.createElement("path",{className:"line",d:"M17.484,4.912c0.423,0,0.766,0.343,0.766,0.766v20.646c0,0.423-0.343,0.766-0.766,0.766h-2.969\r c-0.423,0-0.766-0.343-0.766-0.766V5.677c0-0.423,0.343-0.766,0.766-0.766H17.484z"}))},Jt=function(t){return u.a.createElement("g",{transform:"scale(0.016,-0.016) translate(450,-1636)"},u.a.createElement("path",{className:"line",d:"M480 672v448q0 14 -9 23t-23 9t-23 -9t-9 -23v-448q0 -14 9 -23t23 -9t23 9t9 23zM1152 320q0 -26 -19 -45t-45 -19h-429l-51 -483q-2 -12 -10.5 -20.5t-20.5 -8.5h-1q-27 0 -32 27l-76 485h-404q-26 0 -45 19t-19 45q0 123 78.5 221.5t177.5 98.5v512q-52 0 -90 38\r\nt-38 90t38 90t90 38h640q52 0 90 -38t38 -90t-38 -90t-90 -38v-512q99 0 177.5 -98.5t78.5 -221.5z"}))},Qt=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"polygon",d:"M11 11 L11 5 L27 5 L27 21 L21 21",strokeWidth:"3"}),u.a.createElement("rect",{className:"polygon",x:"5",y:"11",width:"16",height:"16",strokeWidth:"3"}),u.a.createElement("rect",{className:"line",x:"5",y:"11",width:"16",height:"4"}))},$t=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M27,16c0,1.489-0.292,2.913-0.874,4.269c-0.581,1.354-1.366,2.526-2.349,3.509s-2.154,1.768-3.509,2.349\r C18.913,26.708,17.489,27,16,27c-1.642,0-3.204-0.346-4.684-1.038c-1.48-0.693-2.741-1.669-3.781-2.93\r c-0.067-0.095-0.098-0.202-0.093-0.322s0.045-0.216,0.122-0.293l1.962-1.977c0.096-0.086,0.215-0.129,0.358-0.129\r c0.152,0.02,0.263,0.077,0.329,0.172c0.697,0.907,1.552,1.609,2.564,2.105c1.012,0.495,2.086,0.744,3.223,0.744\r c0.994,0,1.94-0.193,2.843-0.58s1.684-0.909,2.342-1.568c0.659-0.658,1.182-1.439,1.568-2.342s0.58-1.849,0.58-2.843\r c0-0.993-0.193-1.941-0.58-2.843s-0.909-1.683-1.568-2.342c-0.658-0.659-1.439-1.182-2.342-1.568S16.994,8.667,16,8.667\r c-0.936,0-1.833,0.17-2.693,0.509s-1.623,0.823-2.292,1.454l1.962,1.977c0.296,0.287,0.363,0.616,0.2,0.988\r c-0.162,0.382-0.444,0.573-0.845,0.573H5.917c-0.248,0-0.463-0.091-0.645-0.272C5.091,13.713,5,13.499,5,13.25V6.833\r c0-0.401,0.191-0.683,0.573-0.845c0.373-0.163,0.702-0.095,0.988,0.201l1.862,1.848c1.021-0.965,2.189-1.712,3.502-2.242\r C13.238,5.265,14.596,5,16,5c1.489,0,2.913,0.292,4.269,0.874c1.354,0.583,2.526,1.366,3.509,2.349s1.768,2.153,2.349,3.509\r C26.708,13.087,27,14.51,27,16z"}))},te=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M5.874,11.732c0.581-1.356,1.366-2.526,2.349-3.509s2.154-1.767,3.509-2.349C13.087,5.292,14.511,5,16,5\r c1.403,0,2.762,0.265,4.074,0.795c1.313,0.53,2.48,1.277,3.502,2.242l1.862-1.848c0.286-0.296,0.616-0.363,0.988-0.201\r C26.809,6.151,27,6.432,27,6.833v6.417c0,0.249-0.091,0.463-0.272,0.645s-0.396,0.272-0.645,0.272h-6.417\r c-0.4,0-0.683-0.191-0.845-0.573c-0.162-0.373-0.096-0.702,0.2-0.988l1.963-1.977c-0.669-0.63-1.433-1.115-2.292-1.454\r S16.936,8.667,16,8.667c-0.994,0-1.94,0.193-2.843,0.58s-1.684,0.91-2.342,1.568c-0.659,0.659-1.182,1.439-1.568,2.342\r s-0.58,1.85-0.58,2.843c0,0.994,0.193,1.94,0.58,2.843s0.909,1.684,1.568,2.342c0.658,0.659,1.439,1.182,2.342,1.568\r s1.849,0.58,2.843,0.58c1.136,0,2.21-0.249,3.223-0.744c1.012-0.496,1.866-1.198,2.563-2.105c0.066-0.095,0.177-0.152,0.329-0.172\r c0.144,0,0.263,0.043,0.358,0.129l1.962,1.977c0.077,0.077,0.117,0.173,0.122,0.293s-0.026,0.228-0.093,0.322\r c-1.041,1.261-2.302,2.236-3.781,2.93C19.203,26.654,17.642,27,16,27c-1.489,0-2.913-0.292-4.269-0.874\r c-1.354-0.581-2.526-1.366-3.509-2.349s-1.768-2.154-2.349-3.509C5.292,18.913,5,17.489,5,16C5,14.51,5.292,13.087,5.874,11.732z"}))},ee=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M 13,3 C 7.4889972,3 3,7.4889972 3,13 3,18.511003 7.4889972,23 13,23 18.511003,23 23,18.511003 23,13 23,7.4889972 18.511003,3 13,3 Z m 0,2 c 4.430123,0 8,3.5698773 8,8 0,4.430123 -3.569877,8 -8,8 C 8.5698773,21 5,17.430123 5,13 5,8.5698773 8.5698773,5 13,5 Z"}),u.a.createElement("path",{className:"line",d:"m 20.707031,19.292969 -1.414062,1.414062 9,9 1.414062,-1.414062 z"}))},ne=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"m 9,1.5 c -2.198703,0 -4,1.8012974 -4,4 v 21 c 0,2.198703 1.801297,4 4,4 h 14 c 2.198703,0 4,-1.801297 4,-4 v -15 -1.324219 A 1.0001,1.0001 0 0 0 26.707031,9.46875 L 19.015625,1.7929688 A 1.0001,1.0001 0 0 0 18.310547,1.5 H 17.042969 A 1.0001,1.0001 0 0 0 17,1.5 Z m 0,2 h 6.953125 c -0.0097,0.2214834 -0.02148,0.2963688 -0.02148,0.4960938 V 8.5 c 0,2.198703 1.801297,4 4,4 H 24.5 25 v 14 c 0,1.125297 -0.874703,2 -2,2 H 9 c -1.1252976,0 -2,-0.874703 -2,-2 v -21 c 0,-1.1252972 0.8747024,-2 2,-2 z M 17.953125,3.5546875 24.908203,10.5 H 24.5 19.931641 c -1.125298,0 -2,-0.8747028 -2,-2 V 3.9960938 c 0,-0.1442488 0.01276,-0.2455428 0.02148,-0.4414063 z"}),u.a.createElement("path",{className:"line",d:"M 11.5 11 A 2.4999993 2.4999993 0 0 0 9 13.5 A 2.4999993 2.4999993 0 0 0 10.923828 15.929688 L 11.494141 22.214844 A 2.4999993 2.4999993 0 0 0 10 24.5 A 2.4999993 2.4999993 0 0 0 12.5 27 A 2.4999993 2.4999993 0 0 0 14.955078 24.962891 L 17.753906 24.59375 A 2.4999993 2.4999993 0 0 0 20 26 A 2.4999993 2.4999993 0 0 0 22.5 23.5 A 2.4999993 2.4999993 0 0 0 21.107422 21.261719 L 21.388672 19.417969 A 2.4999993 2.4999993 0 0 0 23.5 16.949219 A 2.4999993 2.4999993 0 0 0 21 14.449219 A 2.4999993 2.4999993 0 0 0 18.988281 15.470703 L 13.992188 13.654297 A 2.4999993 2.4999993 0 0 0 14 13.5 A 2.4999993 2.4999993 0 0 0 11.5 11 z M 13.455078 15.052734 L 18.501953 16.888672 A 2.4999993 2.4999993 0 0 0 18.5 16.949219 A 2.4999993 2.4999993 0 0 0 19.90625 19.195312 L 19.625 21.03125 A 2.4999993 2.4999993 0 0 0 17.533203 23.109375 L 14.777344 23.474609 A 2.4999993 2.4999993 0 0 0 12.986328 22.048828 L 12.421875 15.822266 A 2.4999993 2.4999993 0 0 0 13.455078 15.052734 z "}))},re=function(t){return u.a.createElement("g",null,u.a.createElement("circle",{className:"line",cx:"6.998",cy:"16",r:"3.15"}),u.a.createElement("circle",{className:"line",cx:"24.005",cy:"8.513",r:"3.149"}),u.a.createElement("circle",{className:"line",cx:"24.005",cy:"23.484",r:"3.149"}),u.a.createElement("path",{className:"line",d:"M19.623,10.034c-0.003-0.005-0.002-0.012-0.004-0.018c-0.003-0.005-0.008-0.009-0.012-0.014\r c-0.042-0.082-0.111-0.149-0.206-0.184l0,0l-0.264-0.096L16.36,8.711c-0.199-0.072-0.418,0.03-0.492,0.229l-0.095,0.265\r c-0.073,0.2,0.029,0.418,0.229,0.49l1.724,0.627l-6.156,2.87c-0.192,0.089-0.275,0.317-0.185,0.509l0.119,0.255\r c0.09,0.192,0.317,0.275,0.509,0.185l6.155-2.87l-0.627,1.722c-0.072,0.199,0.029,0.418,0.229,0.491l0.264,0.096\r c0.199,0.072,0.418-0.03,0.492-0.229l1.01-2.778l0.097-0.263V10.31C19.665,10.216,19.658,10.119,19.623,10.034z"}),u.a.createElement("path",{className:"line",d:"M19.623,21.83c-0.003,0.006-0.002,0.013-0.004,0.018c-0.003,0.006-0.008,0.01-0.012,0.015\r c-0.042,0.081-0.111,0.149-0.206,0.185l0,0l-0.264,0.096l-2.777,1.012c-0.199,0.071-0.418-0.031-0.492-0.229l-0.095-0.265\r c-0.073-0.199,0.029-0.418,0.229-0.49l1.724-0.627l-6.156-2.871c-0.192-0.089-0.275-0.316-0.185-0.508l0.119-0.256\r c0.09-0.191,0.317-0.274,0.509-0.185l6.155,2.87l-0.627-1.723c-0.072-0.199,0.029-0.418,0.229-0.49l0.264-0.097\r c0.199-0.071,0.418,0.03,0.492,0.229l1.01,2.777l0.097,0.264l0,0C19.665,21.648,19.658,21.746,19.623,21.83z"}))},ie=function(t){return u.a.createElement("g",{transform:"matrix(0.05117622,0,0,0.05117622,2.9443694,-1.5263058)"},u.a.createElement("path",{className:"line",d:"m 224.595,201.822 h -93.576 c -6.879,0 -13.674,3.236 -15.211,7.307 l -24.902,66.025 c -2.188,5.797 2.867,10.61 11.34,10.61 h 115.271 c 8.477,0 15.584,-4.813 15.873,-10.611 l 3.295,-66.024 c 0.203,-4.072 -5.211,-7.307 -12.09,-7.307 z"}),u.a.createElement("path",{className:"line",d:"m 379.204,201.821 -93.574,0.001 c -6.879,0 -12.293,3.236 -12.092,7.307 l 3.293,66.024 c 0.291,5.798 7.4,10.611 15.873,10.611 h 115.275 c 8.473,0 13.525,-4.813 11.338,-10.611 l -24.902,-66.024 c -1.536,-4.072 -8.334,-7.308 -15.211,-7.308 z"}),u.a.createElement("path",{className:"line",d:"M 419.61,319.696 H 295.565 c -9.117,0 -16.227,5.703 -15.865,12.927 l 6.236,125.035 c 0.586,11.742 10.93,21.594 23.078,21.594 h 165.289 c 12.148,0 18.283,-9.852 13.855,-21.594 L 440.994,332.623 c -2.722,-7.225 -12.267,-12.927 -21.384,-12.927 z"}),u.a.createElement("path",{className:"line",d:"m 214.657,319.696 -124.043,10e-4 c -9.121,0 -18.662,5.702 -21.387,12.926 L 22.065,457.657 c -4.428,11.742 1.703,21.594 13.855,21.594 h 165.285 c 12.152,0 22.492,-9.852 23.076,-21.594 l 6.24,-125.035 c 0.363,-7.223 -6.745,-12.926 -15.864,-12.926 z"}))},oe=function(t){return u.a.createElement("g",{transform:"matrix(0.05016772,0,0,0.05016772,3.2140793,3.141888)"},u.a.createElement("path",{className:"line",d:"M 210.81,37.038 H 55.599 c -11.047,0 -20,8.954 -20,20 v 155.211 c 0,11.046 8.953,20 20,20 H 210.81 c 11.045,0 20,-8.954 20,-20 V 57.038 c 0,-11.046 -8.956,-20 -20,-20 z"}),u.a.createElement("path",{className:"line",d:"m 454.127,37.038 h -155.21 c -11.047,0 -20,8.954 -20,20 v 155.211 c 0,11.046 8.953,20 20,20 h 155.211 c 11.045,0 20,-8.954 20,-20 V 57.038 c -10e-4,-11.046 -8.956,-20 -20.001,-20 z"}),u.a.createElement("path",{className:"line",d:"m 454.127,280.369 h -155.21 c -11.047,0 -20,8.954 -20,20 V 455.58 c 0,11.046 8.953,20 20,20 h 155.211 c 11.045,0 20,-8.954 20,-20 V 300.369 c -10e-4,-11.046 -8.956,-20 -20.001,-20 z"}),u.a.createElement("path",{className:"line",d:"M 210.81,280.369 H 55.599 c -11.047,0 -20,8.954 -20,20 V 455.58 c 0,11.046 8.953,20 20,20 H 210.81 c 11.045,0 20,-8.954 20,-20 V 300.369 c 0,-11.046 -8.956,-20 -20,-20 z"}))},ae=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M 7.7070312,6.2929688 6.2929688,7.7070312 24.292969,25.707031 25.707031,24.292969 Z"}),u.a.createElement("path",{className:"line",d:"M 24.292969,6.2929688 6.2929688,24.292969 7.7070312,25.707031 25.707031,7.7070312 Z"}))},se=function(t){return u.a.createElement("g",null,u.a.createElement("polygon",{className:"line",points:"23.313,10.729 16.001,23.396 8.688,10.729"}))},ue=function(t){return u.a.createElement("g",null,u.a.createElement("path",{className:"line",d:"M4 27 l24 0",strokeWidth:"2"}),u.a.createElement("path",{className:"line",d:"M4 28 l0 -6",strokeWidth:"2"}),u.a.createElement("path",{className:"line",d:"M28 28 l0 -6",strokeWidth:"2"}),u.a.createElement("path",{className:"line",d:"M16 5 l0 18",strokeWidth:"2"}),u.a.createElement("path",{className:"line",d:"M16 5 l7 7",strokeWidth:"2"}),u.a.createElement("path",{className:"line",d:"M16 5 l-7 7",strokeWidth:"2"}))},le=function(t){return u.a.createElement("svg",{style:t.style,version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"32px",height:"32px",viewBox:"0 0 32 32",xmlSpace:"preserve",className:"ptr-icon ".concat(t.className||"")},"function"===typeof t.icon?t.icon():function(t){switch(t){case"angle-double-right":return u.a.createElement(_t,null);case"angle-double-left":return u.a.createElement(Et,null);case"angle-double-up":return u.a.createElement(bt,null);case"angle-double-down":return u.a.createElement(vt,null);case"arrow-left":case"back":return u.a.createElement(St,null);case"calendar":return u.a.createElement(wt,null);case"circle":return u.a.createElement(xt,null);case"chevron-left":return u.a.createElement(Tt,null);case"chevron-right":return u.a.createElement(Lt,null);case"crop":return u.a.createElement(Ct,null);case"delete":return u.a.createElement(At,null);case"dots":return u.a.createElement(Mt,null);case"download":return u.a.createElement(Rt,null);case"edit":return u.a.createElement(Ot,null);case"expand":return u.a.createElement(Pt,null);case"expand-row":return u.a.createElement(It,null);case"filter":return u.a.createElement(Vt,null);case"file-export":return u.a.createElement(Dt,null);case"file-csv":case"csv":return u.a.createElement(Nt,null);case"file-json":case"json":return u.a.createElement(kt,null);case"file-xls":case"xls":case"excel":return u.a.createElement(Ft,null);case"info":return u.a.createElement(jt,null);case"layers":return u.a.createElement(Ut,null);case"legend":return u.a.createElement(Gt,null);case"map-pin":return u.a.createElement(Kt,null);case"minus":return u.a.createElement(Wt,null);case"minus-thick":return u.a.createElement(zt,null);case"monitor":case"display":return u.a.createElement(Yt,null);case"monitoring":return u.a.createElement(Ht,null);case"north-arrow":return u.a.createElement(qt,null);case"opacity":return u.a.createElement(Bt,null);case"plus":return u.a.createElement(Xt,null);case"plus-thick":return u.a.createElement(Zt,null);case"pushpin":return u.a.createElement(Jt,null);case"restore":return u.a.createElement(Qt,null);case"rotate-left":return u.a.createElement($t,null);case"rotate-right":return u.a.createElement(te,null);case"search":return u.a.createElement(ee,null);case"shapefile":return u.a.createElement(ne,null);case"share":return u.a.createElement(re,null);case"tilt-less":return u.a.createElement(oe,null);case"tilt-more":return u.a.createElement(ie,null);case"times":case"close":return u.a.createElement(ae,null);case"triangle-down":return u.a.createElement(se,null);case"upload":return u.a.createElement(ue,null);default:return u.a.createElement("g",null,u.a.createElement("rect",{x:"4.844",y:"4.844",fill:"none",stroke:"#FF3333",strokeMiterlimit:"10",width:"22.313",height:"22.313"}),u.a.createElement("line",{fill:"none",stroke:"#FF3333",strokeMiterlimit:"10",x1:"27.156",y1:"4.844",x2:"4.844",y2:"27.156"}),u.a.createElement("line",{fill:"none",stroke:"#FF3333",strokeMiterlimit:"10",x1:"4.844",y1:"4.844",x2:"27.156",y2:"27.156"}))}}(t.icon))},ce=function(t){function e(){return nt(this,e),pt(this,lt(e).apply(this,arguments))}return ut(e,t),it(e,[{key:"render",value:function(){var t=[u.a.createElement("span",{className:"ptr-icon-inline-wrap",key:"double-angle"},u.a.createElement(le,{icon:"plus",height:"32",width:"32",className:"ptr-inline-icon"}))],e=[u.a.createElement("span",{className:"ptr-icon-inline-wrap",key:"double-angle"},u.a.createElement(le,{icon:"angle-double-right",height:"16",width:"16",className:"ptr-inline-icon"}))],n=this.props.option&&this.props.option.className,r={label:this.props.option&&this.props.option.label||"Add item",className:"".concat(n," ptr-option-add"),value:this.props.option&&this.props.option.value||"itemAdd"};return u.a.createElement(yt,{unfocusable:this.props.unfocusable,option:r,endItems:e,startItems:t,onOptionLabelClick:this.props.onOptionLabelClick})}}]),e}(u.a.PureComponent);ce.propTypes={option:a.a.object,onOptionLabelClick:a.a.func};var he=function(t){function e(){return nt(this,e),pt(this,lt(e).apply(this,arguments))}return ut(e,t),it(e,[{key:"render",value:function(){return u.a.createElement("div",{className:c()("ptr-menu",this.props.className,{open:this.props.open,bottom:this.props.bottom,top:this.props.top,left:this.props.left,right:this.props.right}),style:{height:this.props.open?2*u.a.Children.toArray(this.props.children).filter((function(t){return u.a.isValidElement(t)})).length+"rem":0},onClick:function(t){t.preventDefault()}},this.props.children)}}]),e}(u.a.PureComponent),fe=function(t){function e(t){var n;return nt(this,e),(n=pt(this,lt(e).call(this,t))).node=u.a.createRef(),n.state={focused:!1,menuOpen:!1,held:!1},n.onBlur=n.onBlur.bind(ft(n)),n.onClick=n.onClick.bind(ft(n)),n.onKeyPress=n.onKeyPress.bind(ft(n)),n.onMouseOut=n.onMouseOut.bind(ft(n)),n.onMouseDown=n.onMouseDown.bind(ft(n)),n.onTouchStart=n.onTouchStart.bind(ft(n)),n.onTouchEnd=n.onTouchEnd.bind(ft(n)),n}return ut(e,t),it(e,[{key:"componentDidMount",value:function(){this.props.onHold&&this.addTouchListeners()}},{key:"componentWillUnmount",value:function(){this.props.onHold&&this.removeTouchListeners()}},{key:"componentDidUpdate",value:function(t,e,n){!t.onHold&&this.props.onHold?this.addTouchListeners():t.onHold&&!this.props.onHold&&this.removeTouchListeners(),this.props.disabled&&this.state.held&&this.clearHoldTimeout()}},{key:"addTouchListeners",value:function(){this.node.current.addEventListener("touchstart",this.onTouchStart),this.node.current.addEventListener("touchend",this.onTouchEnd)}},{key:"removeTouchListeners",value:function(){this.node.current.removeEventListener("touchstart",this.onTouchStart),this.node.current.removeEventListener("touchend",this.onTouchEnd)}},{key:"onTouchStart",value:function(t){t.stopPropagation(),t.preventDefault(),this.onMouseDown(t)}},{key:"onTouchEnd",value:function(t){t.stopPropagation(),t.preventDefault(),this.onMouseOut(t)}},{key:"onMouseDown",value:function(){this.props.onHold&&!this.props.disabled&&(this.clearHoldTimeout(),this.holdTimeout=setTimeout(this.holdStart.bind(this),this.props.holdStart))}},{key:"onMouseOut",value:function(){this.props.onHold&&(this.clearHoldTimeout(),this.state.held&&this.setState({held:!1}))}},{key:"clearHoldTimeout",value:function(){clearTimeout(this.holdTimeout),clearInterval(this.onHoldCallInterval)}},{key:"holdStart",value:function(){this.props.onHold(),this.onHoldCallInterval=setInterval(this.props.onHold,this.props.holdStep),this.setState({held:!0})}},{key:"onClick",value:function(t){this.props.disabled||(this.props.onClick&&this.props.onClick(t),this.setState({menuOpen:!this.state.menuOpen}))}},{key:"onBlur",value:function(){this.setState({menuOpen:!1})}},{key:"onKeyPress",value:function(t){(32===t.charCode||13===t.charCode)&&this.onClick(t)}},{key:"render",value:function(){var t=this,e=null;this.props.icon&&(e=u.a.createElement(le,{icon:this.props.icon}));var n=!1,r=u.a.Children.map(this.props.children,(function(e){if(e){if("string"===typeof e)return n=!0,u.a.createElement("div",{className:"ptr-button-caption"},e);if("object"===et(e)&&e.type===u.a.Fragment)return n=!0,u.a.createElement("div",{className:"ptr-button-content"},e);if("object"===et(e)&&e.type===he){var r=st({},e.props,{open:!!t.state.menuOpen,className:c()(e.props.className,"ptr-button-menu")});return u.a.cloneElement(e,r,e.props.children)}return n=!0,e}})),i=c()("ptr-button",{circular:!!this.props.circular,disabled:this.props.disabled,ghost:!!this.props.ghost,icon:!!e&&!n,invisible:!!this.props.invisible,inverted:!!this.props.inverted,large:!!this.props.large,primary:!!this.props.primary,secondary:!!this.props.secondary,side:!!this.props.side,"side-left":"left"===this.props.side,"side-right":"right"===this.props.side,"side-top":"top"===this.props.side,"side-bottom":"bottom"===this.props.side,small:this.props.small},this.props.className);return u.a.createElement("div",{className:i,id:this.props.id,onBlur:this.onBlur,onClick:this.onClick,onKeyPress:this.onKeyPress,tabIndex:this.props.disabled||this.props.unfocusable?"-1":"0",title:this.props.title,ref:this.node,onMouseLeave:this.onMouseOut,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseOut},e,r)}}]),e}(u.a.PureComponent);fe.propTypes={circular:a.a.bool,className:a.a.string,disabled:a.a.bool,ghost:a.a.bool,icon:a.a.string,inverted:a.a.bool,invisible:a.a.bool,large:a.a.bool,onClick:a.a.func.isRequired,onHold:a.a.func,primary:a.a.bool,secondary:a.a.bool,side:a.a.string,small:a.a.bool,title:a.a.string,unfocusable:a.a.bool},fe.defaultProps={disabled:!1,holdStart:300,holdStep:50};var pe=function(t){var e=t.vertical,n=t.className,r=t.children;return u.a.createElement("div",{className:c()("ptr-button-group",n,{vertical:e})},r)},de=function(t){function e(t){var n;return nt(this,e),(n=pt(this,lt(e).call(this,t))).state={focused:!1},n.onBlur=n.onBlur.bind(ft(n)),n.onClick=n.onClick.bind(ft(n)),n.onKeyPress=n.onKeyPress.bind(ft(n)),n}return ut(e,t),it(e,[{key:"onClick",value:function(t,e){this.props.disabled||this.props.onClick&&this.props.onClick(t,e)}},{key:"onBlur",value:function(){}},{key:"onKeyPress",value:function(t){(32===t.charCode||13===t.charCode)&&this.onClick(t)}},{key:"render",value:function(){var t=this,e=this.props,n=(e.onClick,ht(e,["onClick"])),r=u.a.Children.map(this.props.children,(function(e){var r=e.props,i=r.active,o=r.value,a=ht(r,["active","value"]);return a=st({},n,{},a,{active:i,onClick:t.onClick.bind(t,o)}),u.a.cloneElement(e,a,e.props.children)})),i=c()("ptr-button-switch",{disabled:this.props.disabled,ghost:!!this.props.ghost,invisible:!!this.props.invisible,inverted:!!this.props.inverted,large:!!this.props.large,small:this.props.small},this.props.className);return u.a.createElement(pe,{className:i,onBlur:this.onBlur,onClick:this.onClick,onKeyPress:this.onKeyPress,tabIndex:this.props.disabled||this.props.unfocusable?"-1":"0",title:this.props.title},r)}}]),e}(u.a.PureComponent);de.propTypes={disabled:a.a.bool,ghost:a.a.bool,inverted:a.a.bool,invisible:a.a.bool,large:a.a.bool,onClick:a.a.func.isRequired,small:a.a.bool,title:a.a.string,unfocusable:a.a.bool},de.defaultProps={disabled:!1};var ge=function(t){return u.a.createElement("div",{className:c()("ptr-center",{horizontally:t.horizontally,vertically:t.vertically})},t.children)},me=function(t){function e(t){var n;return nt(this,e),(n=pt(this,lt(e).call(this,t))).state={height:36},n.ref=n.ref.bind(ft(n)),n.onFocus=n.onFocus.bind(ft(n)),n.onBlur=n.onBlur.bind(ft(n)),n.onChange=n.onChange.bind(ft(n)),n}return ut(e,t),it(e,[{key:"ref",value:function(t){this.el=t}},{key:"componentDidMount",value:function(){this.resize()}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentDidUpdate",value:function(){this.resize()}},{key:"resize",value:function(){this.el&&"undefined"!=typeof this.el.scrollHeight&&(Math.abs(this.el.scrollHeight-this.state.height)>2&&this.el.scrollHeight>36&&this.setState({height:this.el.scrollHeight}))}},{key:"onFocus",value:function(){this.setState({focused:!0}),console.log("#####",this.props.onFocus),this.props.onFocus&&this.props.onFocus()}},{key:"onBlur",value:function(){this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur()}},{key:"onChange",value:function(t){this.props.hasOwnProperty("value")&&this.props.onChange?(console.log("#######",t.target.value),this.props.onChange(t.target.value)):this.setState({value:t.target.value})}},{key:"render",value:function(){var t=c()("ptr-editable-text",{disabled:this.props.disabled,empty:!(this.props.value||this.state&&this.state.value),large:this.props.large,editing:this.props.editing,required:this.props.required,inverted:this.props.inverted,invisible:this.props.invisible}),e=this.props.value||this.state&&this.state.value||"",n={height:e.length?this.state.height:36};if(this.props.disabled)return u.a.createElement("div",{className:t},this.props.value||this.state&&this.state.value||"");var r=this.renderMessage();return u.a.createElement("div",null,u.a.createElement("textarea",{tabIndex:this.props.unfocusable?-1:0,className:t,style:n,ref:this.ref,value:e,placeholder:this.props.placeholder,onFocus:this.onFocus,onBlur:this.onBlur,spellCheck:this.state.focused,onChange:this.onChange}),r)}},{key:"renderMessage",value:function(){return this.props.required&&!(this.props.value||this.state&&this.state.value)?u.a.createElement("div",{className:"ptr-editable-text-message"},"Required field"):null}}]),e}(u.a.PureComponent);me.propTypes={disabled:a.a.bool,required:a.a.bool,unfocusable:a.a.bool};var ye=function(t){var e=t.children,n=t.centered,r=u.a.createElement("div",{style:{background:"#f00",padding:"0 .5rem"}},e);return n?u.a.createElement(ge,{horizontally:!0,vertically:!0},r):r},ve=function(t){function e(t){var n;return nt(this,e),(n=pt(this,lt(e).call(this,t))).state={opacity:0},n}return ut(e,t),it(e,[{key:"componentDidMount",value:function(){var t=this;setTimeout((function(){t.setState({opacity:1})}),1)}},{key:"render",value:function(){var t=this,e=c()("ptr-fade-in-container",{vertical:this.props.vertical});return u.a.createElement("div",{className:e},u.a.Children.map(this.props.children,(function(e,n){if(e){var r=st({},e.props.style?e.props.style:{},{transition:"opacity ".concat(t.props.duration,"ms ease-in-out ").concat(n*t.props.delay,"ms"),opacity:t.state.opacity});return u.a.cloneElement(e,{style:r})}return null})))}}]),e}(u.a.PureComponent);ve.propTypes={delay:a.a.number,duration:a.a.number,vertical:a.a.bool},ve.defaultProps={duration:1e3,delay:100};var Ee=function(t){function e(t){var n;return nt(this,e),(n=pt(this,lt(e).call(this,t))).state={value:n.props.value},n.onBlur=n.onBlur.bind(ft(n)),n.onChange=n.onChange.bind(ft(n)),n.onChangeMultiline=n.onChangeMultiline.bind(ft(n)),n.onFocus=n.onFocus.bind(ft(n)),n}return ut(e,t),it(e,[{key:"componentWillReceiveProps",value:function(t){this.setState({value:t.value})}},{key:"onChange",value:function(t){this.props.hasOwnProperty("value")&&this.props.onChange?this.props.onChange(t.target.value):this.setState({value:t.target.value})}},{key:"onChangeMultiline",value:function(t){this.props.hasOwnProperty("value")&&this.props.onChange?(""===t&&(t=null),this.props.onChange(t)):this.setState({value:t})}},{key:"onBlur",value:function(){this.setState({focus:!1})}},{key:"onFocus",value:function(){this.setState({focus:!0})}},{key:"render",value:function(){var t=c()("ptr-input-text",{empty:!this.state.value,focus:this.state.focus,input:!this.props.multiline,inverted:!!this.props.inverted,multiline:this.props.multiline,disabled:this.props.disabled});return u.a.createElement("div",{className:t},this.props.multiline?this.renderMultiline():this.renderInput(),this.props.children)}},{key:"renderInput",value:function(){var t="text";return this.props.password?t="password":this.props.email?t="email":this.props.date?t="date":this.props.number&&(t="number"),u.a.createElement("input",{type:t,disabled:this.props.disabled,tabIndex:this.props.unfocusable?-1:0,placeholder:this.state.focus?null:this.props.placeholder,value:this.state.value||"",name:this.props.name,onChange:this.onChange,autoFocus:this.state.focus,onBlur:this.onBlur,onFocus:this.onFocus})}},{key:"renderMultiline",value:function(){return u.a.createElement(me,{invisible:!0,disabled:this.props.disabled,unfocusable:this.props.unfocusable,value:this.state.value||"",name:this.props.name,onChange:this.onChangeMultiline,onFocus:this.onFocus,onBlur:this.onBlur})}}]),e}(u.a.PureComponent);Ee.propTypes={disabled:a.a.bool,focus:a.a.bool,inverted:a.a.bool,name:a.a.string,onChange:a.a.func,placeholder:a.a.string,unfocusable:a.a.bool,value:a.a.string};var _e={requiredFieldLabel:"Povinn\xe9"},be={requiredFieldLabel:"Required"};h.a.addI18nResources("Atoms#InputWrapper",{cz:_e,en:be});var Se=function(t){function e(){return nt(this,e),pt(this,lt(e).apply(this,arguments))}return ut(e,t),it(e,[{key:"render",value:function(){var t=this.props.t,e=c()("ptr-input-wrapper",this.props.className,{disabled:this.props.disabled}),n=this.props.info?u.a.createElement("div",{className:"ptr-input-wrapper-info"},this.props.info):null,r=u.a.Children.map(this.props.children,(function(t){return"object"===et(t)&&t.type===we?(n=t,null):t})),i=this.props.required?u.a.createElement("div",{className:"ptr-input-wrapper-required"},t("requiredFieldLabel")):null;return this.props.divInsteadOfLabel?u.a.createElement("div",{className:e},u.a.createElement("div",null,i,this.props.label?u.a.createElement("span",{className:"ptr-input-label"},this.props.label):null,r),n):u.a.createElement("div",{className:e},u.a.createElement("label",null,i,u.a.createElement("span",{className:"ptr-input-label"},this.props.label),r),n)}}]),e}(u.a.PureComponent);Se.propTypes={divInsteadOfLabel:a.a.bool,disabled:a.a.bool,label:a.a.string,required:a.a.bool};Object(h.b)(["Atoms#InputWrapper"])(Se);var we=function(t){return u.a.createElement("div",{className:"ptr-input-wrapper-info"},t.children)},xe=function(t){function e(t){var n;return nt(this,e),(n=pt(this,lt(e).call(this,t))).getLabel=n.getLabel.bind(ft(n)),n.onChange=n.onChange.bind(ft(n)),n.onCreate=n.onCreate.bind(ft(n)),n}return ut(e,t),it(e,[{key:"getFormattedOptions",value:function(){var t=this;return this.props.options.map((function(e){var n=e,r=e;return t.props.optionValue&&(r=y()(e,t.props.optionValue)),t.props.optionLabel&&(n=y()(e,t.props.optionLabel)),{value:r,label:n,isDisabled:e.isDisabled}}))}},{key:"onChange",value:function(t){var e=this;if(C()(t))if(I()(t))this.props.onChange(null);else if(this.props.optionValue){var n=[];O()(t,(function(t){var r=S()(e.props.options,(function(n){return(t&&t.value)===y()(n,e.props.optionValue)}));r&&n.push(r)})),this.props.onChange(n)}else{var r=t.map((function(t){return t.value}));this.props.onChange(r)}else if(this.props.optionValue){var i=S()(this.props.options,(function(n){return y()(n,e.props.optionValue)===(t&&t.value)}));i?this.props.onChange(i):this.props.onChange(null)}else this.props.onChange(t?t.value:null)}},{key:"onCreate",value:function(t){var e=tt.uuid();if(this.props.optionValue&&this.props.optionLabel){var n={};M()(n,this.props.optionValue,e),M()(n,this.props.optionLabel,t),this.props.onCreate(n)}else this.props.onCreate(t)}},{key:"render",value:function(){var t=st({},this.props);t.options?t.options=this.getFormattedOptions():t.options=[],t.value&&"string"===typeof t.value?t.value=S()(t.options,{value:t.value}):t.value&&t.optionValue&&!C()(t.value)?t.value=S()(t.options,{value:y()(t.value,t.optionValue)}):C()(t.value)&&(t.value=x()(t.options,(function(e){return!!S()(t.value,(function(n){return"string"===typeof n?n===e.value:y()(n,t.optionValue)===e.value}))})));var e=c()("ptr-select-container ".concat(this.props.className?this.props.className:""),{"value-is-title":!!this.props.valueIsTitle,disabled:this.props.disabled,clearable:this.props.clearable,multi:this.props.multi});switch(this.props.type){case"creatable":return this.renderCreatable(t,e);default:return this.renderBase(t,e)}}},{key:"renderBase",value:function(t,e){return u.a.createElement(N.a,{className:e,classNamePrefix:"ptr-select",clearable:this.props.clearable,components:t.components,formatOptionLabel:this.getLabel,hideSelectedOptions:t.hideSelectedOptions,isClearable:this.props.clearable,isDisabled:this.props.disabled,isOptionDisabled:function(t){return t.isDisabled},isMulti:this.props.multi,onChange:this.onChange,options:t.options,tabIndex:t.unfocusable?-1:0,value:t.value,title:t.value,styles:{menuPortal:function(t){t.zIndex;return st({},ht(t,["zIndex"]),{zIndex:9999})}},menuPortalTarget:document.getElementById(this.props.menuPortalTarget||"ptr-app")})}},{key:"renderCreatable",value:function(t,e){return u.a.createElement(k.a,{className:e,classNamePrefix:"ptr-select",components:t.components,formatOptionLabel:this.getLabel,hideSelectedOptions:t.hideSelectedOptions,isClearable:this.props.clearable,isDisabled:this.props.disabled,isOptionDisabled:function(t){return t.isDisabled},isMulti:this.props.multi,onChange:this.onChange,onCreateOption:this.onCreate,options:t.options,tabIndex:t.unfocusable?-1:0,value:t.value,title:t.value,styles:{menuPortal:function(t){t.zIndex;return st({},ht(t,["zIndex"]),{zIndex:9999})}},menuPortalTarget:document.getElementById(this.props.menuPortalTarget||"ptr-app")})}},{key:"getLabel",value:function(t){var e=this;if(this.props.formatOptionLabel){if(this.props.optionValue){var n=S()(this.props.options,(function(n){return y()(n,e.props.optionValue)===t.value}));if(n)return this.props.formatOptionLabel(n);throw new Error("Select#Selected option was not found in original options.")}return this.props.formatOptionLabel(t.label)}var r=null,i=t.label;return this.props.withKeyPrefix&&(r=u.a.createElement(mt,{value:t.value})),u.a.createElement("div",{className:"label",key:"label"},r,i)}}]),e}(u.a.PureComponent);xe.propTypes={className:a.a.string,clearable:a.a.bool,components:a.a.object,disabled:a.a.bool,formatOptionLabel:a.a.func,multi:a.a.bool,onChange:a.a.func,options:a.a.array,optionLabel:a.a.string,optionValue:a.a.string,type:a.a.string,unfocusable:a.a.bool,value:a.a.oneOfType([a.a.object,a.a.string]),valueIsTitle:a.a.bool,withKeyPrefix:a.a.bool,onCreate:a.a.func,menuPortalTarget:a.a.string};var Te=function(t){function e(t){var n;return nt(this,e),(n=pt(this,lt(e).call(this,t))).onChange=n.onChange.bind(ft(n)),n.onOptionLabelClick=n.onOptionLabelClick.bind(ft(n)),n}return ut(e,t),it(e,[{key:"getFormattedOptions",value:function(t){var e=this;return C()(t)||(t=[t]),t.map((function(t){return t?{value:e.getOptionValue(t),label:e.getOptionLabel(t)}:[]}))}},{key:"getSelectedOptions",value:function(){var t=this,e=this.props.selectedValues;return e&&this.props.options?(C()(e)||(e=[e]),this.props.optionValue?x()(this.props.options,(function(n){var r=t.getOptionValue(n);return!!S()(e,(function(e){return r===t.getOptionValue(e)}))})):e):[]}},{key:"getOptionValue",value:function(t){return this.props.optionValue&&E()(t)?y()(t,this.props.optionValue):t}},{key:"getOptionLabel",value:function(t){return this.props.optionLabel?y()(t,this.props.optionLabel):t}},{key:"onChange",value:function(t){var e=this.getSelectedOptions();this.props.onChange([].concat(dt(e),[t]))}},{key:"onOptionLabelClick",value:function(t,e){var n=this;if(this.props.onOptionLabelClick){e.stopPropagation(),e.preventDefault();var r=S()(this.props.options,(function(e){return n.getOptionValue(e)===t.value}));this.props.onOptionLabelClick(r)}}},{key:"onRemoveOptionClick",value:function(t,e){var n=this;e.stopPropagation(),e.preventDefault();var r=this.getSelectedOptions(),i=x()(r,(function(e){return n.getOptionValue(e)!==t.value}));this.props.onChange(i)}},{key:"blockEvent",value:function(t){t.stopPropagation()}},{key:"getRemoveIcon",value:function(t){return u.a.createElement("span",{className:" ptr-icon-inline-wrap",key:"remove",onMouseDown:this.blockEvent,onClick:this.onRemoveOptionClick.bind(this,t),onTouchEnd:this.onRemoveOptionClick.bind(this,t)},u.a.createElement(le,{icon:"times",height:"16",width:"16",className:"ptr-inline-icon hover"}))}},{key:"getSelectedItem",value:function(t,e){t.findIndex((function(t){return t===e.value})),t.length;var n=[];this.props.disabled||n.push(this.getRemoveIcon(e));var r=[u.a.createElement("span",{className:"ptr-icon-inline-wrap",key:"double-angle"},u.a.createElement(le,{icon:"angle-double-right",height:"16",width:"16",className:"ptr-inline-icon"}))];return u.a.createElement(yt,{key:e.value,option:e,onOptionLabelClick:this.onOptionLabelClick,unfocusable:this.props.unfocusable,withKeyPrefix:this.props.withKeyPrefix,endItems:r,startItems:n})}},{key:"getSelectedItems",value:function(t,e){return e&&e.length>0?e.reduce((function(e,n){var r=t.find((function(t){return t.value===n.value}));return r?[].concat(dt(e),[r]):e}),[]).map(this.getSelectedItem.bind(this,e)):null}},{key:"getRestOptions",value:function(t,e){var n=this;return g()(t,(function(t){var r=n.getOptionValue(t);return p()(e.map((function(t){return n.getOptionValue(t)})),r)}))}},{key:"render",value:function(){var t=this.props.options?this.props.options:[],e=[];this.props.selectedValues&&(e=C()(this.props.selectedValues)?this.props.selectedValues:[this.props.selectedValues]);var n=this.getFormattedOptions(t),r=this.getFormattedOptions(e),i=this.getSelectedItems(n,r),o=this.getRestOptions(t,e),a=null;return this.props.singleValue&&1===e.length||(a=this.renderSelect(o)),u.a.createElement("div",null,i?u.a.createElement("div",{className:"items"},i):null,a)}},{key:"renderSelect",value:function(t){return this.props.creatable?u.a.createElement(xe,{type:"creatable",disabled:this.props.disabled,onChange:this.onChange,onCreate:this.props.onAdd,options:t,optionLabel:this.props.optionLabel,optionValue:this.props.optionValue,unfocusable:this.props.unfocusable,value:null,withKeyPrefix:this.props.withKeyPrefix}):u.a.createElement(xe,{disabled:this.props.disabled,onChange:this.onChange,options:t,optionLabel:this.props.optionLabel,optionValue:this.props.optionValue,unfocusable:this.props.unfocusable,value:null,withKeyPrefix:this.props.withKeyPrefix})}}]),e}(u.a.PureComponent);Te.propTypes={creatable:a.a.bool,disabled:a.a.bool,optionLabel:a.a.string,optionValue:a.a.string,onAdd:a.a.func,onChange:a.a.func,onOptionLabelClick:a.a.func,options:a.a.array,selectedValues:a.a.oneOfType([a.a.array,a.a.string]),singleValue:a.a.bool,unfocusable:a.a.bool,withKeyPrefix:a.a.bool};var Le=function(t){function e(){return nt(this,e),pt(this,lt(e).apply(this,arguments))}return ut(e,t),it(e,[{key:"render",value:function(){var t=c()("loading-screen",{transparent:this.props.transparent,"fade-out":this.props.fadeOut}),e=c()("a-loader-container",{blackandwhite:this.props.blackandwhite,small:this.props.small}),n=null;return this.props.background&&(n={background:this.props.background}),u.a.createElement("div",{className:t,style:n},u.a.createElement("div",{className:"loading-screen-content-wrap"},u.a.createElement("div",{className:"loading-screen-content"},u.a.createElement("div",{className:e},u.a.createElement("i",{className:"i1"}),u.a.createElement("i",{className:"i2"}),u.a.createElement("i",{className:"i3"}),u.a.createElement("i",{className:"i4"}),this.props.progress?u.a.createElement("div",{className:"a-loader-progress"},this.props.progress," %"):null))))}}]),e}(u.a.PureComponent);Le.propTypes={background:a.a.string,fadeOut:a.a.bool,progress:a.a.number,transparent:a.a.bool,blackandwhite:a.a.bool,small:a.a.bool};var Ce=u.a.createContext(null),Ae=function(t){function e(t){var n;return nt(this,e),(n=pt(this,lt(e).call(this,t))).onBlur=n.onBlur.bind(ft(n)),n.onClick=n.onClick.bind(ft(n)),n.onKeyPress=n.onKeyPress.bind(ft(n)),n}return ut(e,t),it(e,[{key:"onClick",value:function(t){this.props.disabled||this.context.onSelect&&this.context.onSelect(this.props.itemKey)}},{key:"onBlur",value:function(){}},{key:"onKeyPress",value:function(t){(32===t.charCode||13===t.charCode)&&this.onClick(t)}},{key:"render",value:function(){var t=c()("ptr-panther-select-item",{selected:!!this.props.selected,disabled:this.props.disabled},this.props.className);return u.a.createElement("div",{className:t,style:this.props.style,onMouseDown:this.onClick},this.props.children)}}]),e}(u.a.PureComponent);Ae.propTypes={disabled:a.a.bool,selected:a.a.bool,onSelect:a.a.func},Ae.defaultProps={disabled:!1},Ae.contextType=Ce;var Me=function(t){function e(t){var n;return nt(this,e),(n=pt(this,lt(e).call(this,t))).onBlur=n.onBlur.bind(ft(n)),n.onClick=n.onClick.bind(ft(n)),n.onKeyPress=n.onKeyPress.bind(ft(n)),n.onSelect=n.onSelect.bind(ft(n)),n}return ut(e,t),it(e,[{key:"onClick",value:function(t){this.props.disabled||this.props.currentDisabled||this.props.onSelectClick&&this.props.onSelectClick(t)}},{key:"onBlur",value:function(t){var e=this;this.props.onBlur&&setTimeout((function(){e.props.onBlur()}),100)}},{key:"onKeyPress",value:function(t){(32===t.charCode||13===t.charCode)&&this.onClick(t)}},{key:"onSelect",value:function(t){this.props.disabled||this.props.onSelect&&this.props.onSelect(t)}},{key:"render",value:function(){var t=c()("ptr-panther-select",{open:!!this.props.open,disabled:!!this.props.disabled,currentDisabled:!!this.props.currentDisabled},this.props.className);return u.a.createElement("div",{className:t,onBlur:this.onBlur},u.a.createElement("div",{className:c()("ptr-panther-select-current",this.props.currentClasses,{disabled:!!this.props.disabled}),tabIndex:this.props.disabled||this.props.currentDisabled?"-1":"0",onClick:this.onClick,style:this.props.currentStyle},u.a.createElement("div",null,this.props.renderCurrent(this.props)),u.a.createElement("div",{className:"ptr-panther-select-current-icon"},u.a.createElement(le,{icon:"triangle-down"}))),u.a.createElement("div",{className:c()("ptr-panther-select-list",this.props.listClasses)},u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement(Ce.Provider,{value:{onSelect:this.onSelect}},this.props.children)))))}}]),e}(u.a.PureComponent);Me.propTypes={disabled:a.a.bool,currentDisabled:a.a.bool,open:a.a.bool,onBlur:a.a.func,onSelectClick:a.a.func,onSelect:a.a.func,renderCurrent:a.a.func,renderList:a.a.func,currentClasses:a.a.string,currentStyle:a.a.object,listClasses:a.a.string},Me.defaultProps={disabled:!1,currentDisabled:!1,currentStyle:null};var Re=n(12),Oe=n(10),Pe=n.n(Oe),Ie=n(88),Ne=n.n(Ie),De=n(167),ke=n.n(De),Fe=n(168),Ve=n.n(Fe),je=n(9),Be=n.n(je),Ue=n(18),Ge=n.n(Ue),Ke=n(90),We=n.n(Ke),ze=n(26),Ye=n.n(ze),He=n(11),qe=n.n(He),Xe=n(22),Ze=n.n(Xe),Je=n(14),Qe=n.n(Je),$e=n(58),tn=n.n($e),en=n(114),nn=n.n(en),rn=n(91),on=n.n(rn),an=n(39),sn=n.n(an);function un(t){return(un="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hn(t,e,n){return e&&cn(t.prototype,e),n&&cn(t,n),t}function fn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pn(Object(n),!0).forEach((function(e){fn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gn(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||vn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yn(t){return function(t){if(Array.isArray(t))return En(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||vn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(t,e){if(t){if("string"===typeof t)return En(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?En(t,e):void 0}}function En(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _n(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=vn(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function bn(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}var Sn=function(){function t(e){ln(this,t),this.data=[],this.maxSize=e||100}return hn(t,[{key:"add",value:function(t){this.data.push(t),this.size()>this.maxSize&&this.remove()}},{key:"remove",value:function(){this.data.shift()}},{key:"addOrUpdate",value:function(t){var e=this.findIndexByKey(t.cacheKey);-1!==e?this.data[e]=t:this.add(t)}},{key:"first",value:function(){return this.data[0]}},{key:"last",value:function(){return this.data[this.data.length-1]}},{key:"size",value:function(){return this.data.length}},{key:"findIndexByKey",value:function(t){return Ne()(this.data,{cacheKey:t})}},{key:"findByKey",value:function(t){return Pe()(this.data,{cacheKey:t})}}]),t}(),wn=function(){function t(e,n){var r=this;ln(this,t);this.wwd=e,this.cb=n,this.mouseDown=!1,this.timeout=null,this.highlightedRenderables=null,this.eventListener=this.eventListener.bind(this,e,n),["mousemove","mousedown","mouseup","touchstart","touchend"].forEach((function(t){e.addEventListener(t,r.eventListener)}))}return hn(t,[{key:"eventListener",value:function(t,e,n){switch(n.type){case"mousemove":return void this.stopClick();case"touchstart":case"mousedown":return void this.startClick(n);case"touchend":case"mouseup":return void this.onClickEnd(n)}}},{key:"stopClick",value:function(){this.timeout=null}},{key:"startClick",value:function(t){this.timeout=new Date;var e=t.touches&&t.touches[0]&&t.touches[0].clientX||t.clientX,n=t.touches&&t.touches[0]&&t.touches[0].clientY||t.clientY,r=this.wwd.pick(this.wwd.canvasCoordinates(e,n));this.highlightedRenderables=this.setNextHighlightStage(r.objects)}},{key:"onClickEnd",value:function(t){this.timeout&&(new Date-this.timeout>50?(this.stopClick(),this.cb(this.highlightedRenderables,t)):this.stopClick())}},{key:"setNextHighlightStage",value:function(t){var e,n=0,r=(t=t.filter((function(t){return!t.isTerrain})).reverse()).length,i=[];if(0===r)return i;if(1===r)return t[0].userObject.highlighted=!0,i.push(t[0]),i;for(var o=0;o<r;o++)t[o].userObject.highlighted&&(n++,e=o,t[o].userObject.highlighted=!1);if(n===r)return t[0].userObject.highlighted=!0,i.push(t[0]),i;if(e===r-1||0===n){for(var a=0;a<r;a++)t[a].userObject.highlighted=!0;return t}return t[e+1].userObject.highlighted=!0,i.push(t[e+1]),i}}]),t}(),xn=function(){function t(e,n,r,i){var o=this;ln(this,t),this.mouseDown=!1,this.enableClick=i,this.eventListener=this.eventListener.bind(this,e,r),n.forEach((function(t){e.addEventListener(t,o.eventListener)}))}return hn(t,[{key:"eventListener",value:function(t,e,n){switch(n.type){case"touchmove":return void this.onTouchMove(e,n);case"mousemove":return void this.onMouseMove(t,e,n,!0);case"touchstart":return this.onTouchStart(),void this.onMouseMove(t,e,n,!1);case"mousedown":return void this.onMouseDown(t,e,n);case"touchend":return void this.onTouchEnd();case"mouseup":return void this.onMouseUp();case"mouseout":return void this.onMouseOut(t,e,n)}}},{key:"onMouseMove",value:function(t,e,n,r){if(!this.mouseDown){var i=n.touches&&n.touches[0]&&n.touches[0].clientX||n.clientX,o=n.touches&&n.touches[0]&&n.touches[0].clientY||n.clientY,a=t.pick(t.canvasCoordinates(i,o)),s=this.setNextHighlightStage(a.objects);e&&e(s,n,r)}}},{key:"onMouseOut",value:function(t,e,n){this.mouseDown=!1,e([])}},{key:"onTouchStart",value:function(){this.mouseDown=!1}},{key:"onTouchEnd",value:function(){this.mouseDown=!1}},{key:"onTouchMove",value:function(t,e){this.mouseDown=!0,t&&t([],e)}},{key:"onMouseDown",value:function(t,e,n){this.enableClick?this.onMouseMove(t,e,n,!1):this.mouseDown=!0}},{key:"onMouseUp",value:function(){this.mouseDown=!1}},{key:"setNextHighlightStage",value:function(t){var e,n=0,r=(t=t.filter((function(t){return!t.isTerrain})).reverse()).length,i=[];if(0===r)return i;if(1===r)return t[0].userObject.highlighted=!0,i.push(t[0]),i;for(var o=0;o<r;o++)t[o].userObject.highlighted&&(n++,e=o,t[o].userObject.highlighted=!1);if(n===r)return t[0].userObject.highlighted=!0,i.push(t[0]),i;if(e===r-1||0===n){for(var a=0;a<r;a++)t[a].userObject.highlighted=!0;return t}return t[e+1].userObject.highlighted=!0,i.push(t[e+1]),i}}]),t}();var Tn={forceSetPassiveEvents:function(){var t=["touchstart","touchmove","touchend","touchcancel","wheel"],e=function(e,n){return t.includes(e)?{boolean:{capture:n,passive:!1},object:dn(dn({},n),{},{passive:!1})}[un(n)]:null},n=document.addEventListener.bind();document.addEventListener=function(t,r,i,o){return n(t,r,e(t,i)||i,o)};var r=document.removeEventListener.bind();document.removeEventListener=function(t,n,i){return r(t,n,e(t,i)||i)}}};function Ln(t){return!t&&0!==t}function Cn(t,e,n){return Ge()(t,(function(t){return Be()(e)?!(n?Ve.a:ke.a)(e,(function(e){return Ln(Ye()(t,e))})):!Ln(Ye()(t,e))}))}var An={filterDataWithNullValue:function(t,e,n,r){if(n){var i=qe()(t,(function(t){var r=Cn(Ye()(t,n),e);return We()(dn({},t),n,r)}));return Ge()(i,(function(t){var e=Ye()(t,n);return e&&0!==e.length}))}return Cn(t,e,r)}},Mn=function(t){function e(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",t)},Rn={initialize:function(t){!function(t,e){var n=document.createElement("script");n.type="text/javascript",n.setAttribute("async","true"),n.setAttribute("src","https://www.googletagmanager.com/gtag/js?id=".concat(t)),n.onload=function(){return e(t)};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r),document.documentElement.firstChild.appendChild(n)}(t,Mn)}},On=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.entries(t),n=e.reduce((function(t,e){var n=mn(e,2),r=(n[0],n[1]),i=Pn(r);return[].concat(yn(t),yn(i))}),[]);return n},Pn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=function t(e){return e.reduce((function(e,n){switch(n.type){case"folder":return[].concat(yn(e),yn(t(n.items)));case"layerTemplate":return[].concat(yn(e),[n]);default:return e}}),[])};return yn(e(t).reverse())},In={forAllTreeItems:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return e.reduce((function(e,r){if("folder"===r.type)return t(r.items,n);var i=n(r);return i?[].concat(yn(e),[i]):e}),[])},getFlattenLayers:Pn,getFlattenLayerTree:On,getFolderByKey:function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,i=_n(n);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(o&&"folder"===o.type&&o.key===r)return o;if("folder"===o.type){var a=t(o.items,r);if(a)return a}}}catch(s){i.e(s)}finally{i.f()}},getFolderByLayerKey:function t(e,n){if(Be()(e)){var r,i=_n(e);try{for(i.s();!(r=i.n()).done;){var o=t(r.value,n);if(o)return o}}catch(c){i.e(c)}finally{i.f()}}if(Ze()(e)){if(!e||"folder"!==e.type)return null;if(e.items.some((function(t){return t.key===n})))return e;var a,s=_n(e.items);try{for(s.s();!(a=s.n()).done;){var u=a.value;if("folder"===u.type){var l=t(u,n);if(l)return l}}}catch(c){s.e(c)}finally{s.f()}}},getLayerZindex:function(t,e){var n=On(t).findIndex((function(t){return t.key===e}));return-1===n?null:n}},Nn=function(t){return t%1?t.toString().split(".")[1].length:0},Dn=function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n},kn={countDecimals:Nn,round:Dn,roundHigher:function(t,e){var n=Dn(t,e),r=Nn(n)||1,i=Math.pow(10,r+1),o=Math.round(10)/i;return Dn(n+o,e)}},Fn={getIntervalTitle:function(t,e){var n=e?kn.round(t[0],2).toLocaleString():kn.roundHigher(t[0],2).toLocaleString();return t[1]===t[0]?round(t[0],2).toLocaleString():"".concat(n," - ").concat(kn.round(t[1],2).toLocaleString())}};function Vn(t,e,n){return jn((t-1)/Kn(e,n))}function jn(t){for(var e=Re.f.pixelSizeInLevels,n=0;t<=e[n+1]&&n<e.length;)n++;return n}function Bn(t,e){var n=Math.abs(t.maxLat-t.minLat),r=Math.abs(t.maxLon-t.minLon),i=125e3*Math.max(n,r);return e&&(i/=Math.cos(e*Math.PI/180)),i>1e3?i:1e3}function Un(t,e,n){return Kn(e,n)*Gn(t)-1}function Gn(t){return Re.f.pixelSizeInLevels[t]}function Kn(t,e){return t&&t>-1&&e&&e>-1?Math.min(e,t):null}var Wn={view:{ensureViewIntegrity:function(t){return t&&(t.heading&&t.heading>360&&(t.heading=t.heading%360),t.heading&&t.heading<0&&(t.heading=360- -t.heading%360),t.tilt&&t.tilt<0&&(t.tilt=0),t.tilt&&t.tilt>90&&(t.tilt=90),t.range&&t.range<.01&&(t.range=.01),t.center&&(t.center.lat&&(t.center.lat>90?t.center.lat=90:t.center.lat<-90&&(t.center.lat=-90)),t.center.lon&&((t.center.lon>360||t.center.lon<-360)&&(t.center.lon%=360),t.center.lon>180?t.center.lon=t.center.lon-180-180:t.center.lon<-180?t.center.lon=180+(t.center.lon+180):-180===t.center.lon&&(t.center.lon=180)))),t},mergeViews:j()([function(t){return t},function(t,e){return e},function(t,e,n){return n}],(function(t,e,n){return n=n||{},dn(dn(dn({},t),e),n)}))((function(t,e,n){return"".concat(t,"_").concat(e,"_").concat(n||"")})),getBoxRangeFromZoomLevel:Un,getNearestZoomLevelBoxRange:function(t,e,n){return Un(Vn(n,t,e),t,e)},getMapViewportRange:Kn,getPixelSizeFromZoomLevel:Gn,getViewFromBoundingBox:function(t,e){Be()(t)&&(t={minLat:t[1],minLon:t[0],maxLat:t[3],maxLon:t[2]});var n={lat:(t.maxLat+t.minLat)/2,lon:(t.maxLon+t.minLon)/2};return{center:n,boxRange:Bn(t,e?n.lat:null)}},getViewFromGeometry:function(t,e){var n=Object(F.center)(t),r=Object(F.bbox)(t),i=Bn({minLat:r[1],minLon:r[0],maxLat:r[3],maxLon:r[2]},e?n.geometry.coordinates[1]:null);return{center:{lat:n.geometry.coordinates[1],lon:n.geometry.coordinates[0]},boxRange:i}},getZoomLevelFromBoxRange:Vn,getZoomLevelFromPixelSize:jn},getLocationFromPlaceString:function(t){var e,n=1e5,r=null;if(t.length){var i=Number(t[0]);if(isNaN(i))return fetch("https://open.mapquestapi.com/nominatim/v1/search.php?key=2qc94oOJwV6p7KaClJVSoLyevmPsLqlS&format=json&q="+t+"&limit=1",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(i){var o=i.headers.get("Content-type");if(i.ok&&o&&-1!==o.indexOf("application/json"))return i.json().then((function(i){if(i.length){var o=i[0];if(e=Number(o.lat),r=Number(o.lon),o.boundingbox){var a=o.boundingbox;n=getBoxRangeFromBoundingBox({minLat:a[0],maxLat:a[1],minLon:a[2],maxLon:a[3]})}if((e||0===e)&&(r||0===r))return{boxRange:n,center:{lat:e,lon:r}}}else console.warn("utils/map#getLocationFromPlaceString: No location found for input: ",t)}));console.warn("utils/map#getLocationFromPlaceString: No location found for input: ",t)}),(function(t){throw t}));var o=t.split(/[,; ]/);if(o.length&&(e=Number(o[0]),r=o[1]?Number(o[1]):0),(e||0===e)&&(r||0===r))return Promise.resolve({boxRange:n,center:{lat:e,lon:r}});console.warn("utils/map#getLocationFromPlaceString: No location found for input: ",t)}else console.warn("utils/map#getLocationFromPlaceString: Empty input string!")},mergeLayers:function(t,e){return t&&e?[].concat(yn(t),yn(e)):t||e||null},resetHeading:function t(e,n,r){(e%=360)<0&&(e+=360),r||(r=3,e>120&&e<240?r=5:e>60&&e<300&&(r=8),(e>0&&e<180||e<0&&e<-180)&&(r=-r)),setTimeout((function(){Math.abs(e)>Math.abs(r)?(n(e+=r),t(e,n,r)):n(e=0)}),20)}};function zn(t,e,n){return!(!t&&0!==t)&&(n?t>=e:t>e)}function Yn(t,e){return Qe()(t,(function(t){"abs"===t?e=Math.abs(e):"sign"===t&&(e=Math.sign(e))})),e}var Hn={getStyleObject:function(t,e){var n={};return e&&e.rules&&Qe()(e.rules,(function(e){e.filter,e.styles&&Qe()(e.styles,(function(e){var r=null;r=e.attributeKey?function(t,e){if(e.hasOwnProperty(t.attributeKey)){var n=e[t.attributeKey];return t.attributeClasses?function(t,e){var n={};return Qe()(t,(function(t){var r=t.interval,i=t.intervalBounds,o=gn(t,["interval","intervalBounds"]);i||(i=[!0,!1]),zn(e,r[0],i[0])&&zn(r[1],e,i[1])&&(n=dn(dn({},n),o))})),n}(t.attributeClasses,n):t.attributeScale?function(t,e){var n=Object.keys(t)[0],r=t[n];r.inputTransformation&&(e=Yn(r.inputTransformation,e));switch(n){case"outlineWidth":case"diagramOutlineWidth":case"outlineOpacity":case"diagramOpacity":case"fillOpacity":case"diagramFillOpacity":case"size":case"diagramSize":case"volume":case"diagramVolume":case"arrowLength":return fn({},n,function(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return(a-o)/(i-r)*(n-r)+o}(r.inputInterval,r.outputInterval,e));case"outlineColor":case"diagramOutlineColor":case"fill":case"diagramFill":var i=U.a.scale(r.outputInterval).domain(r.inputInterval);return fn({},n,U()(i(e)).hex());default:return{}}}(t.attributeScale,n):t.attributeTransformation?function(t,e){var n=Object.keys(t)[0],r=t[n];r.inputTransformation&&(e=Yn(r.inputTransformation,e));return"arrowDirection"===n?{arrowDirection:e}:{}}(t.attributeTransformation,n):t.attributeValues?function(t,e){return t[e]||{}}(t.attributeValues,n):{}}return{}}(e,t):e,n=dn(dn({},n),r)}))})),n},hexToRgb:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},DEFAULT_SIZE:15},qn=function(t){return t.match(/^[0-9]{4}$/)?{start:K()({year:t}),end:K()({year:t}).endOf("year"),source:t,type:"year"}:t.match(/^[0-9]{4}-[0-9]{2}$/)?{start:K()(t),end:K()(t).endOf("month"),source:t,type:"month"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)?{start:K()(t),end:K()(t).endOf("day"),source:t,type:"day"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}$/)?{start:K()(t),end:K()(t).endOf("hour"),source:t,type:"hour"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}$/)?{start:K()(t),end:K()(t).endOf("minute"),source:t,type:"minute"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}$/)||t.match(/^[0-9]{4}[0-9]{2}[0-9]{2}T[0-9]{2}[0-9]{2}[0-9]{2}$/)?{start:K()(t),end:K()(t).endOf("second"),source:t,type:"second"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}/)?{start:K()(t),end:K()(t).endOf("second"),source:t,type:"full"}:void 0},Xn={parse:function(t){if(t.match(/\/P/))throw new Error("Durations not implemented");if(t.match(/\//)){var e=t.split("/");return{start:qn(e[0]).start,end:qn(e[1]).end,type:"interval"}}return qn(t)},toString:function(t){if(!(Ze()(t)&&t.start&&t.end&&t.type))throw new Error("Invalid period supplied to period.toString");switch(t.type){case"interval":return t.start.format("YYYY-MM-DD h:mm:ss")+" - "+t.end.format("YYYY-MM-DD h:mm:ss");case"second":case"full":return t.start.format("YYYY-MM-DD h:mm:ss");case"minute":return t.start.format("YYYY-MM-DD h:mm");case"hour":return t.start.format("YYYY-MM-DD h")+"h";default:return t.source}}};var Zn={period:Xn,uuid:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))},randomString:function(t){return(Math.random()*Math.pow(36,t)>>0).toString(36)},getRemSize:function(){return parseFloat(getComputedStyle(document.documentElement).fontSize)},scrollTo:function(t,e,n){var r=document.getElementById(e),i=document.getElementById(t),o=i.offsetTop;i.offsetHeight,r.offsetHeight;document.getElementById(e).scrollTop=o},getStringFromJson:function(t){return t&&"object"===un(t)?JSON.stringify(t,null,2):t},deepKeyMirror:function(t,e){var n=this;return sn()(t)?on()(t,(function(t,r){return n.deepKeyMirror(t,e?e+"."+r:r)})):e},stringToNumHash:function(t){if("string"!==typeof(t=""+t))throw new Error("stringToNumHash: argument must be a string");for(var e=1,n=0;n<t.length;n++)e=Math.imul(e+t.charCodeAt(n)|0,265443576107);return(e^e>>>17)>>>0},stringToColours:function(t,e,n){for(var r,i,o,a=this.stringToNumHash(t),s=[],u=(n=dn(dn({},{hue:[0,360],saturation:[35,65],lightness:[40,60]}),n)).hue[1]-n.hue[0],l=n.saturation[1]-n.saturation[0],c=n.lightness[1]-n.lightness[0],h=0;h<(e||1);h++)r=a%u+n.hue[0],i=(a=(a^a>>>17)>>>0)%l+n.saturation[0],o=(a=(a^a>>>17)>>>0)%c+n.lightness[0],a=(a^a>>>17)>>>0,s.push("hsl("+r+","+i+"%,"+o+"%)");return s}},Jn={CacheFifo:Sn,ClickPickController:wn,CyclicPickController:xn,events:Tn,filter:An,gTag:Rn,layerTree:In,legend:Fn,map:Wn,mapStyle:Hn,math:kn,models:{filterScopesByUrl:function(t,e){return t?Ge()(t,(function(t){return t.urls&&t.urls.includes(e)})):[]}},period:Xn,sort:{sortByOrder:function(t,e){var n=e.map((function(t){return t[0]})),r=e.map((function(t){return t[1]}));return tn()(t,n,r)}},stateManagement:{addItem:function(t,e){return[].concat(yn(t),[e])},addItemToIndex:function(t,e,n){return[].concat(yn(t.slice(0,e)),[n],yn(t.slice(e)))},removeItemByIndex:function(t,e){return[].concat(yn(t.slice(0,e)),yn(t.slice(e+1)))},removeItemByKey:function(t,e){t[e];return gn(t,[e].map(bn))},replaceItemOnIndex:function(t,e,n){return[].concat(yn(t.slice(0,e)),[n],yn(t.slice(e+1)))}},statistics:{getClassByValue:function(t,e){return t[0]===e?0:t.findIndex((function(t){return e<=t}))-1},getClassCount:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Math.max(0,t.length-1)},getClassesIntervals:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=yn(new Set(t));if(1!==e.length){var n=e.reduce((function(t,e,n,r){return n>0&&t.push([r[n-1],r[n]]),t}),[]);return n}return[[e[0],e[0]]]},getMiddleClassValues:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce((function(t,e,n,r){return n>0?(t.push((r[n-1]+r[n])/2),t):t}),[])},getValueClassesByStatistics:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Number.parseFloat(t.min),r=Number.parseFloat(t.max),i=(r-n)/e,o=[],a=0;a<e+1;a++)o[a]=n+a*i;return o},mergeAttributeStatistics:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={min:null,max:null,percentile:[]},r=_n(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;i&&i.attributeStatistic&&(n.min=n.min||0===n.min?Math.min(n.min,i.attributeStatistic.min):i.attributeStatistic.min,n.max=n.max||0===n.max?Math.max(n.max,i.attributeStatistic.max):i.attributeStatistic.max)}}catch(d){r.e(d)}finally{r.f()}for(var o=e[0]&&e[0].attributeStatistic&&e[0].attributeStatistic.percentile.length,a=e.length,s=0;s<o;s++){var u,l=0,c=_n(e);try{for(c.s();!(u=c.n()).done;){var h=u.value;h&&h.attributeStatistic&&(l+=h.attributeStatistic.percentile[s])}}catch(d){c.e(d)}finally{c.f()}n.percentile[s]=l/a}n.percentile[0]=n.min,n.percentile[n.percentile.length-1]=n.max;var f=nn()(n.min),p=nn()(n.max);return f&&p?n:null},quartilePercentiles:[0,.166,.333,.5,.666,.833,1],rangeMap:function(t,e){return function(n){var r=mn(t,2),i=r[0],o=r[1],a=mn(e,2),s=a[0];return((a[1]-s)*(n-i)/(o-i)*10+10*s)/10}},setClassesMinMaxFromStatistics:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=yn(t);return n[0]=e.min,n[t.length-1]=e.max,n}},utils:Zn},Qn=n(6),$n=n.n(Qn),tr=n(75),er=n.n(tr),nr=n(32),rr=n.n(nr),ir=n(33),or=n.n(ir),ar=n(21),sr=n(19),ur=n.n(sr),lr=n(17),cr=n(374),hr=n.n(cr),fr=Object(r.createContext)({}),pr=fr.Consumer,dr=fr.Provider,gr=function(t){var e=function(e,n){return i.a.createElement(pr,null,(function(r){return i.a.createElement(t,Object(lr.a)({},e,{leaflet:r,ref:n}))}))},n=t.displayName||t.name||"Component";e.displayName="Leaflet("+n+")";var o=Object(r.forwardRef)(e);return hr()(o,t),o},mr=n(171),yr=n.n(mr),vr=n(54),Er=n(20),_r=n(30),br=/^on(.+)$/i,Sr=function(t){function e(e){var n;return n=t.call(this,e)||this,Object(_r.a)(Object(Er.a)(n),"_leafletEvents",void 0),Object(_r.a)(Object(Er.a)(n),"leafletElement",void 0),n._leafletEvents=n.extractLeafletEvents(e),n}Object(ar.a)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.bindLeafletEvents(this._leafletEvents)},n.componentDidUpdate=function(t){this._leafletEvents=this.bindLeafletEvents(this.extractLeafletEvents(this.props),this._leafletEvents)},n.componentWillUnmount=function(){var t=this,e=this.leafletElement;e&&Object.keys(this._leafletEvents).forEach((function(n){e.off(n,t._leafletEvents[n])}))},n.extractLeafletEvents=function(t){return Object.keys(t).reduce((function(e,n){br.test(n)&&(null!=t[n]&&(e[n.replace(br,(function(t,e){return e.toLowerCase()}))]=t[n]));return e}),{})},n.bindLeafletEvents=function(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n=this.leafletElement;if(null==n||null==n.on)return{};var r=Object(lr.a)({},e);return Object.keys(e).forEach((function(i){null!=t[i]&&e[i]===t[i]||(delete r[i],n.off(i,e[i]))})),Object.keys(t).forEach((function(i){null!=e[i]&&t[i]===e[i]||(r[i]=t[i],n.on(i,t[i]))})),r},n.fireLeafletEvent=function(t,e){var n=this.leafletElement;n&&n.fire(t,e)},e}(r.Component),wr=function(t){function e(e){var n;return n=t.call(this,e)||this,Object(_r.a)(Object(Er.a)(n),"contextValue",void 0),Object(_r.a)(Object(Er.a)(n),"leafletElement",void 0),n.leafletElement=n.createLeafletElement(e),n}Object(ar.a)(e,t);var n=e.prototype;return n.createLeafletElement=function(t){throw new Error("createLeafletElement() must be implemented")},n.updateLeafletElement=function(t,e){},n.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.layerContainer.addLayer(this.leafletElement)},n.componentDidUpdate=function(e){if(t.prototype.componentDidUpdate.call(this,e),this.props.attribution!==e.attribution){var n=this.props.leaflet.map;null!=n&&null!=n.attributionControl&&(n.attributionControl.removeAttribution(e.attribution),n.attributionControl.addAttribution(this.props.attribution))}this.updateLeafletElement(e,this.props)},n.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.layerContainer.removeLayer(this.leafletElement)},n.render=function(){var t=this.props.children;return null==t?null:null==this.contextValue?i.a.createElement(r.Fragment,null,t):i.a.createElement(dr,{value:this.contextValue},t)},Object(vr.a)(e,[{key:"layerContainer",get:function(){return this.props.leaflet.layerContainer||this.props.leaflet.map}}]),e}(function(t){function e(){return t.apply(this,arguments)||this}return Object(ar.a)(e,t),e.prototype.getOptions=function(t){return null!=t.pane?t:null!=t.leaflet&&null!=t.leaflet.pane?Object(lr.a)(Object(lr.a)({},t),{},{pane:t.leaflet.pane}):t},e}(Sr));var xr=["stroke","color","weight","opacity","lineCap","lineJoin","dashArray","dashOffset","fill","fillColor","fillOpacity","fillRule","bubblingMouseEvents","renderer","className","interactive","pane","attribution"],Tr=function(t){function e(e){var n;return null==(n=t.call(this,e)||this).contextValue&&(n.contextValue=Object(lr.a)(Object(lr.a)({},e.leaflet),{},{popupContainer:n.leafletElement})),n}Object(ar.a)(e,t);var n=e.prototype;return n.componentDidUpdate=function(e){t.prototype.componentDidUpdate.call(this,e),this.setStyleIfChanged(e,this.props)},n.getPathOptions=function(t){return e=t,xr.reduce((function(t,n){return"undefined"!==typeof e[n]&&(t[n]=e[n]),t}),{});var e},n.setStyle=function(t){void 0===t&&(t={}),this.leafletElement.setStyle(t)},n.setStyleIfChanged=function(t,e){var n=this.getPathOptions(e);yr()(n,this.getPathOptions(t))||this.setStyle(n)},e}(wr),Lr=gr(function(t){function e(){return t.apply(this,arguments)||this}Object(ar.a)(e,t);var n=e.prototype;return n.createLeafletElement=function(t){return new sr.Polygon(t.positions,this.getOptions(t))},n.updateLeafletElement=function(t,e){e.positions!==t.positions&&this.leafletElement.setLatLngs(e.positions),this.setStyleIfChanged(t,e)},e}(Tr)),Cr=gr(function(t){function e(){return t.apply(this,arguments)||this}Object(ar.a)(e,t);var n=e.prototype;return n.createLeafletElement=function(t){return new sr.Polyline(t.positions,this.getOptions(t))},n.updateLeafletElement=function(t,e){e.positions!==t.positions&&this.leafletElement.setLatLngs(e.positions),this.setStyleIfChanged(t,e)},e}(Tr)),Ar=n(63),Mr=gr(function(t){function e(){return t.apply(this,arguments)||this}Object(ar.a)(e,t);var n=e.prototype;return n.createLeafletElement=function(t){var e=t.center,n=t.radius,r=Object(Ar.a)(t,["center","radius"]);return new sr.Circle(e,n,this.getOptions(r))},n.updateLeafletElement=function(t,e){e.center!==t.center&&this.leafletElement.setLatLng(e.center),e.radius!==t.radius&&this.leafletElement.setRadius(e.radius)},e}(Tr)),Rr=gr(function(t){function e(){return t.apply(this,arguments)||this}Object(ar.a)(e,t);var n=e.prototype;return n.createLeafletElement=function(t){var e=new sr.Marker(t.position,this.getOptions(t));return this.contextValue=Object(lr.a)(Object(lr.a)({},t.leaflet),{},{popupContainer:e}),e},n.updateLeafletElement=function(t,e){e.position!==t.position&&this.leafletElement.setLatLng(e.position),e.icon!==t.icon&&this.leafletElement.setIcon(e.icon),e.zIndexOffset!==t.zIndexOffset&&this.leafletElement.setZIndexOffset(e.zIndexOffset),e.opacity!==t.opacity&&this.leafletElement.setOpacity(e.opacity),e.draggable!==t.draggable&&(!0===e.draggable?this.leafletElement.dragging.enable():this.leafletElement.dragging.disable())},n.render=function(){var t=this.props.children;return null==t||null==this.contextValue?null:i.a.createElement(dr,{value:this.contextValue},t)},e}(wr)),Or=gr(function(t){function e(){return t.apply(this,arguments)||this}Object(ar.a)(e,t);var n=e.prototype;return n.createLeafletElement=function(t){return new sr.GeoJSON(t.data,this.getOptions(t))},n.updateLeafletElement=function(t,e){"function"===typeof e.style?this.leafletElement.setStyle(e.style):this.setStyleIfChanged(t,e)},e}(Tr)),Pr=(n(680),function(t){return void 0===t&&(t=""),t.split(" ").filter(Boolean)}),Ir=function(t,e){Pr(e).forEach((function(e){sr.DomUtil.addClass(t,e)}))},Nr=function(t,e){Pr(e).forEach((function(e){sr.DomUtil.removeClass(t,e)}))};function Dr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Object.keys(t).reduce((function(e,r){return-1===n.indexOf(r)&&(e[r]=t[r]),e}),{})}var kr=0,Fr=["tile","shadow","overlay","map","marker","tooltip","popup"],Vr=/-*pane/gi,jr={position:"absolute",top:0,right:0,bottom:0,left:0},Br=gr(function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,Object(_r.a)(Object(Er.a)(e),"state",{name:void 0,context:void 0}),Object(_r.a)(Object(Er.a)(e),"setStyle",(function(t){var n=void 0===t?e.props:t,r=n.style,i=n.className,o=e.getPane(e.state.name);o&&(i&&Ir(o,i),r&&Object.keys(r).forEach((function(t){o.style[t]=r[t]})))})),e}Object(ar.a)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.createPane(this.props)},n.componentDidUpdate=function(t){if(this.state.name)if(this.props.name!==t.name)this.removePane(),this.createPane(this.props);else{if(t.className&&this.props.className!==t.className){var e=this.getPane(this.state.name);null!=e&&null!=t.className&&Nr(e,t.className)}this.setStyle(this.props)}},n.componentWillUnmount=function(){this.removePane()},n.createPane=function(t){var e=t.leaflet.map,n=t.name||"pane-"+ ++kr;if(null!=e&&null!=e.createPane){var r=function(t){return-1!==Fr.indexOf(t.replace(Vr,""))}(n);if(null==(r||this.getPane(n)))e.createPane(n,this.getParentPane());else;this.setState({name:n,context:Object(lr.a)(Object(lr.a)({},t.leaflet),{},{pane:n})},this.setStyle)}},n.removePane=function(){var t=this.state.name;if(null!=t){var e=this.getPane(t);null!=e&&e.remove&&e.remove();var n=this.props.leaflet.map;null!=n&&null!=n._panes&&(n._panes=Dr(n._panes,t),n._paneRenderers=Dr(n._paneRenderers,t))}},n.getParentPane=function(){return this.getPane(this.props.pane||this.props.leaflet.pane)},n.getPane=function(t){if(null!=t&&null!=this.props.leaflet.map)return this.props.leaflet.map.getPane(t)},n.render=function(){var t=this.state.context;return t?i.a.createElement(dr,{value:t},i.a.createElement("div",{style:jr},this.props.children)):null},e}(r.Component)),Ur=["children","className","id","style","useFlyTo","whenReady"],Gr=function(t){return Array.isArray(t)?[t[0],t[1]]:[t.lat,t.lon?t.lon:t.lng]},Kr=function(t){function e(e){var n;return n=t.call(this,e)||this,Object(_r.a)(Object(Er.a)(n),"className",void 0),Object(_r.a)(Object(Er.a)(n),"contextValue",void 0),Object(_r.a)(Object(Er.a)(n),"container",void 0),Object(_r.a)(Object(Er.a)(n),"viewport",{center:void 0,zoom:void 0}),Object(_r.a)(Object(Er.a)(n),"_ready",!1),Object(_r.a)(Object(Er.a)(n),"_updating",!1),Object(_r.a)(Object(Er.a)(n),"onViewportChange",(function(){var t=n.leafletElement.getCenter();n.viewport={center:t?[t.lat,t.lng]:void 0,zoom:n.leafletElement.getZoom()},n.props.onViewportChange&&!n._updating&&n.props.onViewportChange(n.viewport)})),Object(_r.a)(Object(Er.a)(n),"onViewportChanged",(function(){n.props.onViewportChanged&&!n._updating&&n.props.onViewportChanged(n.viewport)})),Object(_r.a)(Object(Er.a)(n),"bindContainer",(function(t){n.container=t})),n.className=e.className,n}Object(ar.a)(e,t);var n=e.prototype;return n.createLeafletElement=function(t){var e=t.viewport,n=Object(Ar.a)(t,["viewport"]);return e&&(e.center&&(n.center=e.center),"number"===typeof e.zoom&&(n.zoom=e.zoom)),new sr.Map(this.container,n)},n.updateLeafletElement=function(t,e){this._updating=!0;var n,r,i,o=e.bounds,a=e.boundsOptions,s=e.boxZoom,u=e.center,l=e.className,c=e.doubleClickZoom,h=e.dragging,f=e.keyboard,p=e.maxBounds,d=e.scrollWheelZoom,g=e.tap,m=e.touchZoom,y=e.useFlyTo,v=e.viewport,E=e.zoom;if(n=this.container,r=t.className,i=l,null!=n&&i!==r&&(null!=r&&r.length>0&&Nr(n,r),null!=i&&i.length>0&&Ir(n,i)),v&&v!==t.viewport){var _=v.center?v.center:u,b=null==v.zoom?E:v.zoom;!0===y?this.leafletElement.flyTo(_,b,this.getZoomPanOptions(e)):this.leafletElement.setView(_,b,this.getZoomPanOptions(e))}else u&&this.shouldUpdateCenter(u,t.center)?!0===y?this.leafletElement.flyTo(u,E,this.getZoomPanOptions(e)):this.leafletElement.setView(u,E,this.getZoomPanOptions(e)):"number"===typeof E&&E!==t.zoom&&(null==t.zoom?this.leafletElement.setView(u,E,this.getZoomPanOptions(e)):this.leafletElement.setZoom(E,this.getZoomPanOptions(e)));p&&this.shouldUpdateBounds(p,t.maxBounds)&&this.leafletElement.setMaxBounds(p),o&&(this.shouldUpdateBounds(o,t.bounds)||a!==t.boundsOptions)&&(!0===y?this.leafletElement.flyToBounds(o,this.getFitBoundsOptions(e)):this.leafletElement.fitBounds(o,this.getFitBoundsOptions(e))),s!==t.boxZoom&&(!0===s?this.leafletElement.boxZoom.enable():this.leafletElement.boxZoom.disable()),c!==t.doubleClickZoom&&(!0===c||"string"===typeof c?(this.leafletElement.options.doubleClickZoom=c,this.leafletElement.doubleClickZoom.enable()):this.leafletElement.doubleClickZoom.disable()),h!==t.dragging&&(!0===h?this.leafletElement.dragging.enable():this.leafletElement.dragging.disable()),f!==t.keyboard&&(!0===f?this.leafletElement.keyboard.enable():this.leafletElement.keyboard.disable()),d!==t.scrollWheelZoom&&(!0===d||"string"===typeof d?(this.leafletElement.options.scrollWheelZoom=d,this.leafletElement.scrollWheelZoom.enable()):this.leafletElement.scrollWheelZoom.disable()),g!==t.tap&&(!0===g?this.leafletElement.tap.enable():this.leafletElement.tap.disable()),m!==t.touchZoom&&(!0===m||"string"===typeof m?(this.leafletElement.options.touchZoom=m,this.leafletElement.touchZoom.enable()):this.leafletElement.touchZoom.disable()),this._updating=!1},n.getZoomPanOptions=function(t){return{animate:t.animate,duration:t.duration,easeLinearity:t.easeLinearity,noMoveStart:t.noMoveStart}},n.getFitBoundsOptions=function(t){var e=this.getZoomPanOptions(t);return Object(lr.a)(Object(lr.a)({},e),t.boundsOptions)},n.componentDidMount=function(){var e=Dr.apply(void 0,[this.props].concat(Ur));this.leafletElement=this.createLeafletElement(e),this.leafletElement.on("move",this.onViewportChange),this.leafletElement.on("moveend",this.onViewportChanged),null!=e.bounds&&this.leafletElement.fitBounds(e.bounds,this.getFitBoundsOptions(e)),this.contextValue={layerContainer:this.leafletElement,map:this.leafletElement},t.prototype.componentDidMount.call(this),this.forceUpdate()},n.componentDidUpdate=function(e){!1===this._ready&&(this._ready=!0,this.props.whenReady&&this.leafletElement.whenReady(this.props.whenReady)),t.prototype.componentDidUpdate.call(this,e),this.updateLeafletElement(e,this.props)},n.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.leafletElement.off("move",this.onViewportChange),this.leafletElement.off("moveend",this.onViewportChanged),!0===this.props.preferCanvas?(this.leafletElement._initEvents(!0),this.leafletElement._stop()):this.leafletElement.remove()},n.shouldUpdateCenter=function(t,e){return!e||(t=Gr(t),e=Gr(e),t[0]!==e[0]||t[1]!==e[1])},n.shouldUpdateBounds=function(t,e){return!e||!Object(sr.latLngBounds)(t).equals(Object(sr.latLngBounds)(e))},n.render=function(){return i.a.createElement("div",{className:this.className,id:this.props.id,ref:this.bindContainer,style:this.props.style},this.contextValue?i.a.createElement(dr,{value:this.contextValue},this.props.children):null)},e}(Sr),Wr=gr(function(t){function e(){return t.apply(this,arguments)||this}Object(ar.a)(e,t);var n=e.prototype;return n.createLeafletElement=function(t){return new sr.TileLayer(t.url,this.getOptions(t))},n.updateLeafletElement=function(e,n){t.prototype.updateLeafletElement.call(this,e,n),n.url!==e.url&&this.leafletElement.setUrl(n.url)},e}(function(t){function e(){return t.apply(this,arguments)||this}Object(ar.a)(e,t);var n=e.prototype;return n.createLeafletElement=function(t){return new sr.GridLayer(this.getOptions(t))},n.updateLeafletElement=function(t,e){var n=e.opacity,r=e.zIndex;n!==t.opacity&&this.leafletElement.setOpacity(n),r!==t.zIndex&&this.leafletElement.setZIndex(r)},n.getOptions=function(e){var n=Object(lr.a)({},t.prototype.getOptions.call(this,e)),r=e.leaflet.map;return null!=r&&(null==n.maxZoom&&null!=r.options.maxZoom&&(n.maxZoom=r.options.maxZoom),null==n.minZoom&&null!=r.options.minZoom&&(n.minZoom=r.options.minZoom)),n},n.render=function(){return null},e}(wr))),zr=n(371),Yr=n.n(zr),Hr=n(57),qr=n(375),Xr=function(t){var e=[],n=null,r=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];e=i,n||(n=requestAnimationFrame((function(){n=null,t.apply(void 0,e)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};var Zr=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Jr=n(376),Qr="object"==typeof self&&self&&self.Object===Object&&self,$r=Jr.a||Qr||Function("return this")(),ti=function(){return $r.Date.now()},ei=$r.Symbol,ni=Object.prototype,ri=ni.hasOwnProperty,ii=ni.toString,oi=ei?ei.toStringTag:void 0;var ai=function(t){var e=ri.call(t,oi),n=t[oi];try{t[oi]=void 0;var r=!0}catch(o){}var i=ii.call(t);return r&&(e?t[oi]=n:delete t[oi]),i},si=Object.prototype.toString;var ui=function(t){return si.call(t)},li=ei?ei.toStringTag:void 0;var ci=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":li&&li in Object(t)?ai(t):ui(t)};var hi=function(t){return null!=t&&"object"==typeof t};var fi=function(t){return"symbol"==typeof t||hi(t)&&"[object Symbol]"==ci(t)},pi=/^\s+|\s+$/g,di=/^[-+]0x[0-9a-f]+$/i,gi=/^0b[01]+$/i,mi=/^0o[0-7]+$/i,yi=parseInt;var vi=function(t){if("number"==typeof t)return t;if(fi(t))return NaN;if(Zr(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Zr(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(pi,"");var n=gi.test(t);return n||mi.test(t)?yi(t.slice(2),n?2:8):di.test(t)?NaN:+t},Ei=Math.max,_i=Math.min;var bi=function(t,e,n){var r,i,o,a,s,u,l=0,c=!1,h=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=r,o=i;return r=i=void 0,l=e,a=t.apply(o,n)}function d(t){return l=t,s=setTimeout(m,e),c?p(t):a}function g(t){var n=t-u;return void 0===u||n>=e||n<0||h&&t-l>=o}function m(){var t=ti();if(g(t))return y(t);s=setTimeout(m,function(t){var n=e-(t-u);return h?_i(n,o-(t-l)):n}(t))}function y(t){return s=void 0,f&&r?p(t):(r=i=void 0,a)}function v(){var t=ti(),n=g(t);if(r=arguments,i=this,u=t,n){if(void 0===s)return d(u);if(h)return clearTimeout(s),s=setTimeout(m,e),p(u)}return void 0===s&&(s=setTimeout(m,e)),a}return e=vi(e)||0,Zr(n)&&(c=!!n.leading,o=(h="maxWait"in n)?Ei(vi(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f),v.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},v.flush=function(){return void 0===s?a:y(ti())},v};var Si=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return Zr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),bi(t,e,{leading:r,maxWait:e,trailing:i})},wi={debounce:bi,throttle:Si},xi=function(t){return"function"===typeof t},Ti=function(){return"undefined"===typeof window};function Li(t){return(Li="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ci(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ai(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mi(t,e){return(Mi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ri(t,e){return!e||"object"!==Li(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Pi(t){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ii=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mi(t,e)}(a,t);var e,n,r,i,o=(e=a,function(){var t,n=Pi(e);if(Oi()){var r=Pi(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Ri(this,t)});function a(){return Ci(this,a),o.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){return this.props.children}}])&&Ai(n.prototype,r),i&&Ai(n,i),a}(r.PureComponent);function Ni(t){return(Ni="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Di(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ki(t,e){return(ki=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fi(t,e){return!e||"object"!==Ni(e)&&"function"!==typeof e?Vi(t):e}function Vi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ji(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Bi(t){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ui(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gi=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ki(t,e)}(u,t);var e,n,o,a,s=(e=u,function(){var t,n=Bi(e);if(ji()){var r=Bi(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Fi(this,t)});function u(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Ui(Vi(e=s.call(this,t)),"cancelHandler",(function(){e.resizeHandler&&e.resizeHandler.cancel&&(e.resizeHandler.cancel(),e.resizeHandler=null)})),Ui(Vi(e),"rafClean",(function(){e.raf&&e.raf.cancel&&(e.raf.cancel(),e.raf=null)})),Ui(Vi(e),"toggleObserver",(function(t){var n=e.getElement();n&&e.resizeObserver[t]&&e.resizeObserver[t](n)})),Ui(Vi(e),"getElement",(function(){var t=e.props,n=t.querySelector,r=t.targetDomEl;if(!Ti()){if(n)return document.querySelector(n);if(r&&((i=r)instanceof Element||i instanceof HTMLDocument))return r;var i,o=e.element&&Object(Hr.findDOMNode)(e.element);if(o)return o.parentElement}})),Ui(Vi(e),"createUpdater",(function(){return e.rafClean(),e.raf=Xr((function(t){var n=t.width,r=t.height,i=e.props.onResize;xi(i)&&i(n,r),e.setState({width:n,height:r})})),e.raf})),Ui(Vi(e),"createResizeHandler",(function(t){var n=e.state,r=n.width,i=n.height,o=e.props,a=o.handleWidth,s=o.handleHeight;if(a||s){var u=e.createUpdater();t.forEach((function(t){var n=t&&t.contentRect||{},o=n.width,l=n.height,c=a&&r!==o||s&&i!==l;!e.skipOnMount&&c&&!Ti()&&u({width:o,height:l}),e.skipOnMount=!1}))}})),Ui(Vi(e),"onRef",(function(t){e.element=t})),Ui(Vi(e),"getRenderType",(function(){var t=e.props,n=t.render,i=t.children;return xi(n)?"renderProp":xi(i)?"childFunction":Object(r.isValidElement)(i)?"child":Array.isArray(i)?"childArray":"parent"})),Ui(Vi(e),"getTargetComponent",(function(){var t=e.props,n=t.render,i=t.children,o=t.nodeType,a=e.state,s={width:a.width,height:a.height};switch(e.getRenderType()){case"renderProp":return Object(r.cloneElement)(n(s),{key:"resize-detector"});case"childFunction":return Object(r.cloneElement)(i(s));case"child":return Object(r.cloneElement)(i,s);case"childArray":return i.map((function(t){return!!t&&Object(r.cloneElement)(t,s)}));default:return Object(r.createElement)(o)}}));var n=t.skipOnMount,i=t.refreshMode,o=t.refreshRate,a=t.refreshOptions;e.state={width:void 0,height:void 0},e.skipOnMount=n,e.raf=null,e.element=null,e.unmounted=!1;var l=wi[i];return e.resizeHandler=l?l(e.createResizeHandler,o,a):e.createResizeHandler,e.resizeObserver=new qr.a(e.resizeHandler),e}return n=u,(o=[{key:"componentDidMount",value:function(){this.toggleObserver("observe")}},{key:"componentWillUnmount",value:function(){this.toggleObserver("unobserve"),this.rafClean(),this.cancelHandler(),this.unmounted=!0}},{key:"render",value:function(){return i.a.createElement(Ii,{ref:this.onRef},this.getTargetComponent())}}])&&Di(n.prototype,o),a&&Di(n,a),u}(r.PureComponent);Gi.propTypes={handleWidth:o.bool,handleHeight:o.bool,skipOnMount:o.bool,refreshRate:o.number,refreshMode:o.string,refreshOptions:Object(o.shape)({leading:o.bool,trailing:o.bool}),querySelector:o.string,targetDomEl:o.any,onResize:o.func,render:o.func,children:o.any,nodeType:o.node},Gi.defaultProps={handleWidth:!1,handleHeight:!1,skipOnMount:!1,refreshRate:1e3,refreshMode:void 0,refreshOptions:void 0,querySelector:null,targetDomEl:null,onResize:null,render:void 0,children:null,nodeType:"div"};var Ki=Gi,Wi=n(27),zi=n.n(Wi),Yi=n(28),Hi=n.n(Yi),qi=n(59);var Xi=n(372),Zi=n.n(Xi),Ji=n(135),Qi=n(240),$i=n.n(Qi),to=n(241),eo=n.n(to),no=(n(676),n(93)),ro=n.n(no),io=n(24),oo=n.n(io),ao=n(373),so=n.n(ao),uo=n(134),lo=n.n(uo),co=n(81),ho=n(140),fo=n.n(ho);function po(t){return(po="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function go(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yo(t,e,n){return e&&mo(t.prototype,e),n&&mo(t,n),t}function vo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eo(){return(Eo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function _o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_o(Object(n),!0).forEach((function(e){vo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function So(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xo(t,e)}function wo(t){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xo(t,e){return(xo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function To(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Lo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Co(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?Lo(t):e}function Ao(t,e,n){return(Ao="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wo(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Mo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ro={fill:"#ffffff",fillOpacity:.8,outlineColor:"#000000",outlineWidth:2,outlineOpacity:1},Oo={diagramFill:"#87c7ff",diagramFillOpacity:1,diagramOutlineColor:"#3b80ff",diagramOutlineWidth:1,diagramOutlineOpacity:1},Po=bo({maxFeaturesAsReactElement:100,defaultLeafletPaneZindex:400,projDefinitions:{epsg5514:"+proj=krovak +lat_0=49.5 +lon_0=24.83333333333333 +alpha=30.28813972222222 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=589,76,480,0,0,0,0 +units=m +no_defs"}},{diagramStyle:{default:Oo,defaultFull:{rules:{styles:[Oo]}},hovered:{diagramOutlineWidth:2,diagramOutlineColor:"#00ffff",diagramOutlineOpacity:1},selected:{diagramOutlineWidth:2,diagramOutlineColor:"#ff00ff",diagramOutlineOpacity:1},selectedHovered:{diagramOutlineWidth:2,diagramOutlineColor:"#8800ff",diagramOutlineOpacity:1}},vectorFeatureStyle:{default:Ro,defaultFull:{rules:[{styles:[Ro]}]},hovered:{outlineWidth:3,outlineColor:"#00ffff",outlineOpacity:1},selected:{outlineWidth:3,outlineColor:"#ff00ff",outlineOpacity:1},selectedHovered:{outlineWidth:3,outlineColor:"#8800ff",outlineOpacity:1}},vectorLayerHighlightedFeatureStyle:{strokeColor:"#00FFFF",strokeWidth:2},vectorLayerDefaultFeatureStyle:{fillColor:null,fillOpacity:0,strokeColor:"#444",strokeWidth:2}});var Io={getBoxRangeFromWorldWindRange:function(t,e,n){return e&&e>=n?t*n/e:t},getWorldWindRangeFromBoxRange:function(t,e,n){return e&&e>=n?t*e/n:t}},No=function(t){function e(t){var n;return go(this,e),(n=Co(this,wo(e).call(this,t))).state={text:null,previousSearching:null},n.search=n.search.bind(Lo(n)),n.onTextChange=n.onTextChange.bind(Lo(n)),n}return So(e,t),yo(e,[{key:"onTextChange",value:function(t){this.setState({text:t})}},{key:"search",value:function(t){13===t.charCode&&this.props.goToPlace&&this.state.text!==this.state.previousSearching&&(this.props.goToPlace(this.state.text),this.state.previousSearching=this.state.text)}},{key:"render",value:function(){return i.a.createElement("div",{className:"ptr-go-to-place-box",onKeyPress:this.search},i.a.createElement(Ee,{placeholder:"Zoom to",onChange:this.onTextChange,value:this.state.text},i.a.createElement(le,{icon:"search"})))}}]),e}(i.a.PureComponent);No.propTypes={goToPlace:a.a.func};var Do=function(t){function e(t){var n;return go(this,e),(n=Co(this,wo(e).call(this,t))).ref=i.a.createRef(),n.state={width:null,height:null},n}return So(e,t),yo(e,[{key:"componentDidMount",value:function(){this.resize(),window&&window.addEventListener("resize",this.resize.bind(this),{passive:!0})}},{key:"resize",value:function(){if(this.ref&&this.ref.current){var t=this.ref.current.clientWidth,e=this.ref.current.clientHeight;this.setState({width:t,height:e})}}},{key:"render",value:function(){return i.a.createElement("div",{className:"ptr-map-grid",ref:this.ref},this.renderMaps())}},{key:"renderMaps",value:function(){var t=this.state.width,e=this.state.height;if(this.props.children.length&&t&&e){var n=t/e,r=1,o=1;switch(this.props.children.length){case 1:break;case 2:n>1?o=2:r=2;break;case 3:n>2?o=3:n<.6666?r=3:(o=2,r=2);break;case 4:n>3?o=4:n<.5?r=4:(o=2,r=2);break;case 5:case 6:n>1?(o=3,r=2):(o=2,r=3);break;case 7:case 8:n>2?(o=4,r=2):n<.6666?(o=2,r=4):(o=3,r=3);break;case 9:n>2.5?(o=5,r=2):n<.5?(o=2,r=5):(o=3,r=3);break;default:n>1?(o=4,r=3):(o=3,r=4)}var a={width:+(100/o).toFixed(4)+"%",height:+(100/r).toFixed(4)+"%"};return this.props.children.map((function(t,e){e++;var n=Math.ceil(e/o),r=e%o||o,s=c()("ptr-map-grid-cell","row"+n,"col"+r,t.props.wrapperClasses);return i.a.createElement("div",{key:"map-grid-cell-"+e,className:s,style:a},t)}))}return null}}]),e}(i.a.PureComponent),ko=function(t){function e(){var t;return go(this,e),(t=Co(this,wo(e).call(this))).tiltIncrement=5,t.headingIncrement=1,t.zoomIncrement=.04,t.exaggerationIncrement=1,t.state={resetHeadingDisabled:!1},t}return So(e,t),yo(e,[{key:"componentDidUpdate",value:function(t,e,n){!this.state.resetHeadingDisabled||this.props.view.heading&&"360"!==this.props.heading||this.setState({resetHeadingDisabled:!1})}},{key:"handleTiltUp",value:function(){var t={tilt:this.props.view.tilt-this.tiltIncrement};this.props.updateView(t,this.props.mapKey)}},{key:"handleTiltDown",value:function(){var t={tilt:this.props.view.tilt+this.tiltIncrement};this.props.updateView(t,this.props.mapKey)}},{key:"handleHeadingRight",value:function(){var t={heading:this.props.view.heading-this.headingIncrement};this.props.updateView(t,this.props.mapKey)}},{key:"handleHeadingLeft",value:function(){var t={heading:this.props.view.heading+this.headingIncrement};this.props.updateView(t,this.props.mapKey)}},{key:"handleZoomIn",value:function(){var t=null;t=this.props.levelsBased&&this.props.view&&this.props.view.boxRange?{boxRange:(this.props.view.boxRange-1)/2}:{boxRange:this.props.view.boxRange*(1-this.zoomIncrement)},this.props.updateView(t,this.props.mapKey)}},{key:"handleZoomOut",value:function(){var t;t=this.props.levelsBased&&this.props.view&&this.props.view.boxRange?{boxRange:2*this.props.view.boxRange+1}:{boxRange:this.props.view.boxRange*(1+this.zoomIncrement)},this.props.updateView(t,this.props.mapKey)}},{key:"handleResetHeading",value:function(){this.props.resetHeading(this.props.mapKey),this.setState({resetHeadingDisabled:!0})}},{key:"handleExaggeratePlus",value:function(){}},{key:"handleExaggerateMinus",value:function(){}},{key:"isZoomButtonActive",value:function(t){var e=this.props.viewLimits&&this.props.viewLimits.boxRangeRange,n=this.props.view&&this.props.view.boxRange;if(this.props.levelsBased){var r=Wn.view.getZoomLevelFromBoxRange(n,this.props.mapWidth,this.props.mapHeight);if("in"===t){var i=Re.f.defaultLevelsRange[1];if(e&&e[0]){var o=Wn.view.getZoomLevelFromBoxRange(e[0],this.props.mapWidth,this.props.mapHeight);o<i&&(i=o)}return r<i}var a=Re.f.defaultLevelsRange[0];if(e&&e[1]){var s=Wn.view.getZoomLevelFromBoxRange(e[1],this.props.mapWidth,this.props.mapHeight);s>a&&(a=s)}return r>a}if("in"===t){var u=e&&e[0]||Re.f.minBoxRange;return n*(1-this.zoomIncrement)>=u}var l=e&&e[1]||Re.f.maxBoxRange;return n*(1+this.zoomIncrement)<=l}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"ptr-map-controls"},i.a.createElement("div",{className:"zoom-control control"},i.a.createElement(fe,{onHold:function(){t.handleZoomIn()},onClick:function(){t.handleZoomIn()},disabled:!this.isZoomButtonActive("in")},i.a.createElement(le,{icon:"plus-thick"})),i.a.createElement(fe,{onHold:function(){t.handleZoomOut()},onClick:function(){t.handleZoomOut()},disabled:!this.isZoomButtonActive("out")},i.a.createElement(le,{icon:"minus-thick"}))),this.props.zoomOnly?null:i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"rotate-control control"},i.a.createElement(fe,{onHold:function(){t.handleHeadingRight()},onClick:function(){t.handleHeadingRight()}},i.a.createElement(le,{icon:"rotate-right"})),i.a.createElement(fe,{onClick:function(){t.handleResetHeading()},disabled:this.state.resetHeadingDisabled},i.a.createElement(le,{style:{transform:"rotate(".concat(this.props.view?-this.props.view.heading:0,"deg)")},icon:"north-arrow"})),i.a.createElement(fe,{onHold:function(){t.handleHeadingLeft()},onClick:function(){t.handleHeadingLeft()}},i.a.createElement(le,{icon:"rotate-left"}))),i.a.createElement("div",{className:"tilt-control control"},i.a.createElement(fe,{className:"tilt-more-control",onHold:function(){t.handleTiltDown()},onClick:function(){t.handleTiltDown()}},i.a.createElement(le,{icon:"tilt-more"})),i.a.createElement(fe,{className:"tilt-more-control",onHold:function(){t.handleTiltUp()},onClick:function(){t.handleTiltUp()}},i.a.createElement(le,{icon:"tilt-less"})))))}}]),e}(i.a.PureComponent);ko.propTypes={view:a.a.object,viewLimits:a.a.object,updateView:a.a.func,resetHeading:a.a.func,mapKey:a.a.string,zoomOnly:a.a.bool,levelsBased:a.a.oneOfType([a.a.bool,a.a.array]),mapHeight:a.a.number,mapWidth:a.a.number};var Fo=Object.freeze({__proto__:null,default:ko}),Vo=function(t){function e(){return go(this,e),Co(this,wo(e).apply(this,arguments))}return So(e,t),yo(e,[{key:"render",value:function(){var t=this.props,e=c()("ptr-map-wrapper",{active:this.props.active});return i.a.createElement("div",{className:e},i.a.createElement("div",{className:"ptr-map-wrapper-header"},t.onMapRemove?this.renderCloseButton():null,t.title?this.renderTitle():null),this.props.children)}},{key:"renderTitle",value:function(){var t=this.props.title;return!0===t&&(t=this.props.name||this.props.mapKey||"Map"),i.a.createElement("div",{className:"ptr-map-wrapper-title",title:t},t)}},{key:"renderCloseButton",value:function(){var t=this.props.stateMapKey||this.props.mapKey;return i.a.createElement("div",{className:"ptr-map-wrapper-close-button"},i.a.createElement(fe,{icon:"times",inverted:!0,invisible:!0,onClick:this.props.onMapRemove.bind(this,t)}))}}]),e}(i.a.PureComponent);Vo.propTypes={active:a.a.bool,title:a.a.oneOfType([a.a.bool,a.a.string]),onMapRemove:a.a.func},Vo.defaultProps={title:!1};var jo=function(t){function e(){return go(this,e),Co(this,wo(e).apply(this,arguments))}return So(e,t),yo(e,[{key:"render",value:function(){return null}}]),e}(i.a.PureComponent),Bo=function(t){function e(){return go(this,e),Co(this,wo(e).apply(this,arguments))}return So(e,t),yo(e,[{key:"render",value:function(){return null}}]),e}(i.a.PureComponent),Uo=function(t){function e(t){var n;return go(this,e),n=Co(this,wo(e).call(this,t)),t.stateMapSetKey?n.state={mapsDimensions:{}}:(n.state={view:Wn.view.mergeViews(Re.f.defaultMapView,t.view),activeMapKey:t.activeMapKey,mapViews:{},mapsDimensions:{}},rr()(n.props.children,(function(e){!e||"object"!==po(e)||e.type!==jo&&e.type!==n.props.connectedMapComponent&&e.type!==Bo||e.props.mapKey!==t.activeMapKey||(n.state.mapViews[e.props.mapKey]=Wn.view.mergeViews(Re.f.defaultMapView,t.view,e.props.view))}))),n}return So(e,t),yo(e,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount&&this.props.onUnmount()}},{key:"componentDidUpdate",value:function(t,e,n){var r=this.props;if(!r.stateMapSetKey){if(t.view!==r.view){var i=on()(this.state.mapViews,(function(t){return bo({},t,{},r.view)}));this.setState({view:bo({},this.state.view,{},r.view),mapViews:i})}(r.layers&&r.layers!==t.layers||r.backgroundLayer&&r.backgroundLayer!==t.backgroundLayer)&&r.refreshUse}}},{key:"onViewChange",value:function(t,e){var n,r=this;e=Wn.view.ensureViewIntegrity(e),t=t||this.state.activeMapKey,this.props.sync&&(n=er()(e,(function(t,e){return r.props.sync[e]})),n=Wn.view.ensureViewIntegrity(n));var i=on()(this.state.mapViews,(function(t){return Wn.view.mergeViews(t,n)}));if(i[t]=Wn.view.mergeViews(this.state.mapViews[t],e),n&&!$n()(n)){var o=Wn.view.mergeViews(this.state.view,n);this.setState({view:o,mapViews:i}),this.props.onViewChange&&this.props.onViewChange(o)}else this.setState({mapViews:i})}},{key:"onResetHeading",value:function(){var t=this;Wn.resetHeading(this.state.mapViews[this.state.activeMapKey].heading,(function(e){return t.onViewChange(t.state.activeMapKey,{heading:e})}))}},{key:"onMapClick",value:function(t,e){if(this.state.mapViews[t])this.setState({activeMapKey:t});else{var n=bo({},this.state.mapViews);n[t]=e,this.setState({activeMapKey:t,mapViews:n})}}},{key:"onMapResize",value:function(t,e,n){var r=bo({},this.state.mapsDimensions,vo({},t,{width:e,height:n}));this.setState({mapsDimensions:r})}},{key:"render",value:function(){return i.a.createElement("div",{className:"ptr-map-set"},i.a.createElement("div",{className:"ptr-map-set-maps"},this.renderMaps()),i.a.createElement("div",{className:"ptr-map-set-controls"},this.renderControls()))}},{key:"renderControls",value:function(){var t,e,n,r,o;return this.props.stateMapSetKey?(t=this.props.updateView,e=this.props.resetHeading,n=this.props.activeMapView||this.props.view,r=this.props.activeMapKey,o=this.props.activeMapViewport):(t=this.onViewChange.bind(this,null),e=this.onResetHeading.bind(this),n=Wn.view.mergeViews(this.state.view,this.state.mapViews[this.state.activeMapKey]),r=this.state.activeMapKey,o=this.state.mapsDimensions&&this.state.mapsDimensions[this.state.activeMapKey]),i.a.Children.map(this.props.children,(function(a){if("object"!==po(a)||a.type!==jo)return i.a.cloneElement(a,bo({},a.props,{view:n,updateView:t,resetHeading:e,mapKey:r,mapWidth:o&&o.width,mapHeight:o&&o.height}))}))}},{key:"renderMaps",value:function(){var t=this,e=[];return this.props.stateMapSetKey?this.props.maps&&this.props.maps.length&&this.props.maps.map((function(n){var r={key:n,stateMapKey:n,onResize:t.onMapResize.bind(t,n)};e.push(t.renderMap(t.props.connectedMapComponent,bo({},r,{mapComponent:t.props.mapComponent}),null,n===t.props.activeMapKey))})):i.a.Children.map(this.props.children,(function(n,r){var i=n.props,o=i.view,a=i.layers,s=i.backgroundLayer,u=i.mapKey,l=bo({},To(i,["view","layers","backgroundLayer","mapKey"]),{key:r,view:Wn.view.mergeViews(t.state.view,o,t.state.mapViews[u]),backgroundLayer:s||t.props.backgroundLayer,layers:Wn.mergeLayers(t.props.layers,a),onViewChange:t.onViewChange.bind(t,u),onClick:t.onMapClick.bind(t,u),onResize:t.onMapResize.bind(t,u),mapKey:u});"object"!==po(n)||n.type!==jo&&n.type!==t.props.connectedMapComponent?"object"===po(n)&&n.type===Bo&&e.push(t.renderMap(t.props.mapComponent||n.props.mapComponent,l,n.props.children,u===t.state.activeMapKey,!0)):e.push(t.renderMap(t.props.connectedMapComponent,bo({},l,{mapComponent:t.props.mapComponent}),null,u===t.state.activeMapKey))})),i.a.createElement(Do,null,e)}},{key:"renderMap",value:function(t,e,n,r,o){if(this.props.wrapper){var a=this.props.wrapperProps;this.props.onMapRemove&&!this.props.disableMapRemoval&&(a=bo({},this.props.wrapperProps,{onMapRemove:this.props.onMapRemove}));var s=bo({},e,{},a,{wrapper:this.props.wrapper,active:r});if(o){var u=this.props.wrapper.prototype&&this.props.wrapper.prototype.isReactComponent||"function"===typeof this.props.wrapper?this.props.wrapper:Vo;return i.a.createElement(u,s,i.a.createElement(t,e,n))}return i.a.createElement(t,s,n)}return i.a.createElement(t,e,n)}}]),e}(i.a.PureComponent);Uo.defaultProps={disableMapRemoval:!1},Uo.propTypes={activeMapKey:a.a.string,activeMapView:a.a.object,activeMapViewport:a.a.object,disableMapRemoval:a.a.bool,mapSetKey:a.a.string,maps:a.a.array,mapComponent:a.a.func,view:a.a.object,stateMapSetKey:a.a.string,sync:a.a.object,wrapper:a.a.oneOfType([a.a.elementType,a.a.element,a.a.bool]),wrapperProps:a.a.object};var Go=jo,Ko=Bo,Wo=Object.freeze({__proto__:null,MapSetMap:Go,MapSetPresentationMap:Ko,default:Uo}),zo=function(t){function e(t){var n;return go(this,e),(n=Co(this,wo(e).call(this,t))).state={width:null,height:null},t.stateMapKey||(n.state.view=bo({},Re.f.defaultMapView,{},t.view)),n.onViewChange=n.onViewChange.bind(Lo(n)),n.onPropViewChange=n.onPropViewChange.bind(Lo(n)),n.resetHeading=n.resetHeading.bind(Lo(n)),n.onResize=n.onResize.bind(Lo(n)),n}return So(e,t),yo(e,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this.state.width,this.state.height)}},{key:"componentDidUpdate",value:function(t){var e=this.props;if(e.view){var n=this.getValidView(e.view);t&&t.view?or()(e.view,t.view)||(this.props.stateMapKey?this.onPropViewChange(n):this.saveViewChange(n,!1)):this.props.stateMapKey?this.onPropViewChange(n):this.saveViewChange(n,!0)}e.layers&&e.layers!==t.layers||e.backgroundLayer&&(e.backgroundLayer,t.backgroundLayer)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount&&this.props.onUnmount()}},{key:"onViewChangeDecorator",value:function(t){var e=this;return function(n){t(n,e.state.width,e.state.height)}}},{key:"getValidView",value:function(t){var e=bo({},Re.f.defaultMapView,{},e);return this.state.view&&!$n()(this.state.view)&&(e=bo({},this.state.view,{},t)),e=Wn.view.ensureViewIntegrity(e)}},{key:"saveViewChange",value:function(t,e){e&&!or()(t,this.state.view)&&(this.props.stateMapKey||this.setState({view:t}))}},{key:"onViewChange",value:function(t){var e=this.getValidView(t);this.saveViewChange(e,!0),or()(e,this.state.view)||this.props.onViewChange&&!this.props.stateMapKey&&this.onViewChangeDecorator(this.props.onViewChange)(e)}},{key:"onPropViewChange",value:function(t){this.props.stateMapKey&&this.props.onPropViewChange&&this.onViewChangeDecorator(this.props.onPropViewChange)(t)}},{key:"resetHeading",value:function(){var t=this;Wn.resetHeading(this.state.view.heading,(function(e){return t.setState({view:bo({},t.state.view,{heading:e})})}))}},{key:"onResize",value:function(t,e){this.props.onResize&&this.props.onResize(t,e),this.setState({width:t,height:e})}},{key:"render",value:function(){var t=this.props,e=t.children,n=t.mapComponent,r=t.wrapper,o=t.wrapperProps,a=To(t,["children","mapComponent","wrapper","wrapperProps"]);if(n){if(a.onResize=this.onResize,a.stateMapKey||(a.view=this.state.view||a.view,a.onViewChange=this.onViewChange),r){var s=this.props.wrapper.prototype&&this.props.wrapper.prototype.isReactComponent||"function"===typeof this.props.wrapper?this.props.wrapper:Vo;return i.a.createElement(s,bo({},a,{},o),this.renderContent(n,a,e))}return this.renderContent(n,a,e)}return i.a.createElement(ye,{centered:!0},"mapComponent not supplied to Map")}},{key:"renderContent",value:function(t,e,n){var r=this,o=i.a.createElement(t,e);return n?i.a.createElement("div",{className:"ptr-map-controls-wrapper"},o,i.a.Children.map(n,(function(t){var n,o;return i.a.cloneElement(t,bo({},t.props,{view:e.view,viewLimits:r.props.viewLimits,updateView:e.onViewChange,resetHeading:r.props.stateMapKey?r.props.resetHeading:r.resetHeading,mapWidth:r.props.stateMapKey?null===(n=r.props.viewport)||void 0===n?void 0:n.width:r.state.width,mapHeight:r.props.stateMapKey?null===(o=r.props.viewport)||void 0===o?void 0:o.height:r.state.height}))}))):o}}]),e}(i.a.PureComponent);zo.propTypes={backgroundLayer:a.a.oneOfType([a.a.array,a.a.object]),children:a.a.element,layers:a.a.array,mapComponent:a.a.oneOfType([a.a.element,a.a.func]),onMount:a.a.func,onPropViewChange:a.a.func,onResize:a.a.func,onViewChange:a.a.func,resetHeading:a.a.func,stateMapKey:a.a.string,view:a.a.object,viewport:a.a.object,viewLimits:a.a.object,wrapper:a.a.oneOfType([a.a.elementType,a.a.element,a.a.bool]),wrapperProps:a.a.object};var Yo=Object.freeze({__proto__:null,default:zo});function Ho(t,e,n){var r=bo({},Re.f.defaultMapView,{},t);return{zoom:Wn.view.getZoomLevelFromBoxRange(r.boxRange,e,n),center:{lat:r.center.lat,lng:r.center.lon}}}var qo={getLeafletViewportFromViewParams:function(t,e,n){var r=Ho(t,e,n);return{zoom:r.zoom,center:[r.center.lat,r.center.lng]}},update:function(t,e,n,r){var i=t.getCenter(),o=t.getZoom(),a=Ho(e,n,r);i.lat===a.center.lat&&i.lng===a.center.lng&&o===a.zoom||t.setView(a.center||i,a.zoom||o)}};function Xo(t,e){return Hn.getStyleObject(t.properties,e||Po.vectorFeatureStyle.defaultFull)}function Zo(t,e){return Qo(t,e)}function Jo(t,e,n){return Qo(t,bo({},e,{},n))}function Qo(t,e){var n={};return n.color=e.outlineColor?e.outlineColor:null,n.weight=e.outlineWidth?e.outlineWidth:0,n.opacity=e.outlineOpacity?e.outlineOpacity:1,n.fillOpacity=e.fillOpacity?e.fillOpacity:1,n.fillColor=e.fill,e.fill||(n.fillColor=null,n.fillOpacity=0),e.outlineColor&&e.outlineWidth||(n.color=null,n.opacity=0,n.weight=0),"Point"===t.geometry.type&&(e.size?n.radius=e.size:e.volume&&(n.radius=Math.sqrt(e.volume/Math.PI))),e.shape&&(n.shape=e.shape),n}var $o=Object(qi.default)((function(t){var e=Object(F.flip)(t);return e&&e.geometry&&e.geometry.coordinates})),ta=function(t,e,n,r,i,o){var a=Xo(t,e),s=Zo(t,a),u=null;n&&(u=Jo(t,a,"default"===n?Po.vectorFeatureStyle.hovered:n));var l=null,c=null;if(r){i&&(l=Jo(t,a,"default"===i?Po.vectorFeatureStyle.selected:i)),o&&(c=Jo(t,a,"default"===o?Po.vectorFeatureStyle.selectedHovered:o))}return{default:s,hovered:u,selected:l,selectedHovered:c}},ea={calculateStyle:ta,calculateStylesMemo:Object(qi.default)(ta),convertCoordinatesMemo:$o,getDefaultStyle:function(t,e){return Zo(t,Xo(t,e))},getDefaultStyleObject:Xo,getFeatureAccentedStyle:Jo,getFeatureDefaultStyle:Zo,getFeatureLeafletStyle:Qo},na=Ji.a.getContext("HoverContext");var ra=function(t){function e(t,n,r){var i;return go(this,e),(i=Co(this,wo(e).call(this,r))).id=t,i.style=n,i.iconAnchor=r.iconAnchor,i.onMouseMove=r.onMouseMove,i.onMouseOver=r.onMouseOver,i.onMouseOut=r.onMouseOut,i.onClick=r.onClick,i}return So(e,t),yo(e,[{key:"createIcon",value:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.getIconHtml();return n instanceof Element?e.appendChild(n):e.innerHTML=!1!==n?n:"",this._setIconStyles(e,"icon"),e}},{key:"getIconHtml",value:function(){var t=this.getStyle(this.style),e=document.createElement("div");return e.className="ptr-leaflet-map-icon",e.id=this.id,Hi()(t,(function(t,n){e.style[n]=t})),this.onMouseMove&&e.addEventListener("mousemove",this.onMouseMove),this.onMouseOver&&e.addEventListener("mouseover",this.onMouseOver),this.onMouseOut&&e.addEventListener("mouseout",this.onMouseOut),this.onClick&&e.addEventListener("click",this.onClick),e}},{key:"getStyle",value:function(t){switch(t.shape){case"square":return this.getSquareStyle(t);case"diamond":return this.getSquareStyle(t,45);case"circle":default:return this.getCircleStyle(t)}}},{key:"getCircleStyle",value:function(t){return this.getSquareStyle(t,null,t.radius)}},{key:"getSquareStyle",value:function(t,e,n){var r={};if(t.radius&&(r.width=2*t.radius+"px",r.height=2*t.radius+"px"),t.fillColor)if(t.fillOpacity&&1!==t.fillOpacity){var i=Hn.hexToRgb(t.fillColor);r["background-color"]="rgba(".concat(i.r,",").concat(i.g,",").concat(i.b,",").concat(t.fillOpacity,")")}else r["background-color"]=t.fillColor;if(t.color)if(t.opacity&&1!==t.opacity){var o=Hn.hexToRgb(t.color);r["border-color"]="rgba(".concat(o.r,",").concat(o.g,",").concat(o.b,",").concat(t.opacity,")")}else r["border-color"]=t.color;return t.weight&&(r["border-style"]="solid",r["border-width"]=t.weight+"px"),n&&(r["border-radius"]=n+"px"),e&&(r.transform="rotate("+e+"deg)"),r}},{key:"setStyle",value:function(t){var e=this.getStyle(t),n=document.getElementById(this.id);n&&Hi()(e,(function(t,e){n.style[e]=t}))}}]),e}(ur.a.DivIcon),ia=function(t){function e(t){var n;return go(this,e),(n=Co(this,wo(e).call(this,t))).onClick=n.onClick.bind(Lo(n)),n.onMouseMove=n.onMouseMove.bind(Lo(n)),n.onMouseOut=n.onMouseOut.bind(Lo(n)),n.onAdd=n.onAdd.bind(Lo(n)),n.fid=t.fid,"Point"===t.type&&t.pointAsMarker&&(n.iconId=n.props.fid?"".concat(n.props.fid,"_icon"):Zn.uuid()),n.state={hovered:!1},n.calculateStyles=ea.calculateStylesMemo,n.convertCoordinates=ea.convertCoordinatesMemo,n}return So(e,t),yo(e,[{key:"componentDidUpdate",value:function(t,e,n){this.props.hasOwnProperty("hoveredFromContext")&&(this.props.hoveredFromContext&&!this.state.hovered?(this.showOnTop(),this.setState({hovered:!0})):!this.props.hoveredFromContext&&this.state.hovered&&(this.props.selected||this.showOnBottom(),this.setState({hovered:!1})))}},{key:"componentWillUnmount",value:function(){this.props.changeContext&&this.props.changeContext(null)}},{key:"onAdd",value:function(t){t.target&&(this.leafletFeature=t.target)}},{key:"onClick",value:function(){this.props.selectable&&(this.showOnTop(),this.props.onClick&&this.fid&&this.props.onClick(this.fid))}},{key:"onMouseMove",value:function(t){this.props.hoverable&&(this.showOnTop(),this.fid&&this.props.changeContext&&this.props.changeContext([this.fid],{popup:{x:t.originalEvent?t.originalEvent.pageX:t.pageX,y:t.originalEvent?t.originalEvent.pageY:t.pageY,fidColumnName:this.props.fidColumnName,data:this.props.feature.properties}}),this.state.hovered||this.setState({hovered:!0}))}},{key:"onMouseOut",value:function(){this.props.hoverable&&(this.props.selected||this.showOnBottom(),this.props.changeContext&&this.props.changeContext(null),this.setState({hovered:!1}))}},{key:"showOnTop",value:function(){this.leafletFeature&&"Point"!==this.props.type&&this.leafletFeature.bringToFront()}},{key:"showOnBottom",value:function(){!this.leafletFeature||"Polygon"!==this.props.type&&"MultiPolygon"!==this.props.type||this.leafletFeature.bringToBack()}},{key:"render",value:function(){var t=this.props,e=this.convertCoordinates(t.feature),n=this.calculateStyles(t.feature,t.styleDefinition,t.hoveredStyleDefinition,t.selected,t.selectedStyleDefinition,t.selectedHoveredStyleDefinition),r=n.default;switch(t.selected&&this.state.hovered&&n.selectedHovered?r=n.selectedHovered:this.state.hovered&&n.hovered?r=n.hovered:t.selected&&n.selected&&(r=n.selected),this.props.type){case"Polygon":case"MultiPolygon":return this.renderPolygon(e,r);case"Point":case"MultiPoint":return this.renderPoint(e,r);case"LineString":case"MultiLineString":return this.renderLine(e,r);default:return null}}},{key:"renderPolygon",value:function(t,e){return i.a.createElement(Lr,Eo({interactive:this.props.hoverable||this.props.selectable,onAdd:this.onAdd,onClick:this.onClick,onMouseMove:this.onMouseMove,onMouseOut:this.onMouseOut,positions:t},e))}},{key:"renderLine",value:function(t,e){return i.a.createElement(Cr,Eo({interactive:this.props.hoverable||this.props.selectable,onAdd:this.onAdd,onClick:this.onClick,onMouseOver:this.onMouseMove,onMouseMove:this.onMouseMove,onMouseOut:this.onMouseOut,positions:t},e))}},{key:"renderPoint",value:function(t,e){return this.props.pointAsMarker?this.renderShape(t,e):i.a.createElement(Mr,Eo({interactive:this.props.hoverable||this.props.selectable,onAdd:this.onAdd,onClick:this.onClick,onMouseMove:this.onMouseMove,onMouseOver:this.onMouseMove,onMouseOut:this.onMouseOut,center:t},e))}},{key:"renderShape",value:function(t,e){return this.icon||(this.icon=new ra(this.iconId,e,{iconAnchor:e.radius?[e.radius,e.radius]:null,onMouseMove:this.onMouseMove,onMouseOut:this.onMouseOut,onMouseOver:this.onMouseMove,onClick:this.onClick}),this.icon.setStyle(e)),function(t,e){if(t===e)return!0;if(!t||!e)return!1;var n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(var o=0;o<i;o++){var a=n[o];if(t[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}(this.style,e)||(this.style=e,this.icon.setStyle(e)),i.a.createElement(Rr,{interactive:this.props.hoverable||this.props.selectable,position:t,icon:this.icon,onAdd:this.onAdd})}}]),e}(i.a.PureComponent);ia.propTypes={feature:a.a.object,fid:a.a.oneOfType([a.a.string,a.a.number]),fidColumnName:a.a.string,hoverable:a.a.bool,hoveredFromContext:a.a.bool,hoveredStyleDefinition:a.a.oneOfType([a.a.string,a.a.object]),selectable:a.a.bool,selected:a.a.bool,selectedStyleDefinition:a.a.oneOfType([a.a.string,a.a.object]),selectedHoveredStyleDefinition:a.a.oneOfType([a.a.string,a.a.object]),changeContext:a.a.func,interactive:a.a.bool,styleDefinition:a.a.object};var oa=function(t){var e,n;return n=e=function(e){function n(t){var e;return go(this,n),(e=Co(this,wo(n).call(this,t))).hoveredFromContext=!1,e.changeContext=e.changeContext.bind(Lo(e)),e}return So(n,e),yo(n,[{key:"changeContext",value:function(t,e){t&&this.context&&this.context.onHover?this.context.onHover(t,e):!t&&this.context&&this.context.onHoverOut&&this.context.onHoverOut()}},{key:"render",value:function(){return this.props.fid&&this.context&&this.context.hoveredItems&&(this.hoveredFromContext=-1!==Zi()(this.context.hoveredItems,this.props.fid)),this.context&&this.props.hoverable?i.a.createElement(t,Eo({},this.props,{changeContext:this.changeContext,hoveredFromContext:this.hoveredFromContext})):i.a.createElement(t,this.props)}}]),n}(i.a.PureComponent),e.contextType=na,n}(ia),aa=function(t){function e(t){var n;return go(this,e),(n=Co(this,wo(e).call(this,t))).state={layerKey:Zn.uuid()},n.getStyle=n.getStyle.bind(Lo(n)),n.filter=n.filter.bind(Lo(n)),n.onEachFeature=n.onEachFeature.bind(Lo(n)),n.pointToLayer=n.pointToLayer.bind(Lo(n)),n}return So(e,t),yo(e,[{key:"componentDidUpdate",value:function(t,e,n){this.props.features!==t.features&&this.setState({layerKey:Zn.uuid()})}},{key:"getStyle",value:function(t){var e=ea.calculateStyle(t.feature,this.props.styleDefinition,this.props.hoveredStyleDefinition,t.selected,t.selectedStyleDefinition,t.selectedHoveredStyleDefinition);return t.selected?e.selected:e.default}},{key:"onEachFeature",value:function(t,e){var n=this,r=t.properties[this.props.fidColumnName]||t.id,i=t.geometry.type,o="Polygon"===i||"MultiPolygon"===i,a="Line"===i||"LineString"===i,s=ea.calculateStyle(t.feature,this.props.styleDefinition,this.props.hoveredStyleDefinition,t.selected,t.selectedStyleDefinition,t.selectedHoveredStyleDefinition);e.on({click:function(t){n.props.onFeatureClick&&n.props.selectable&&n.props.onFeatureClick(r)},mousemove:function(r){n.props.hoverable&&(t.selected&&s.selectedHovered?r.target.setStyle(s.selectedHovered):r.target.setStyle(s.hovered),(o||a)&&e.bringToFront())},mouseout:function(r){n.props.hoverable&&(t.selected&&s.selected?r.target.setStyle(s.selected):r.target.setStyle(s.default),!a&&!o||t.selected||e.bringToBack())}})}},{key:"pointToLayer",value:function(t,e){return this.props.pointAsMarker?ur.a.circleMarker(e,{pane:this.props.paneName}):ur.a.circle(e)}},{key:"filter",value:function(t){if(this.props.omittedFeatureKeys){var e=t.id||t.properties[this.props.fidColumnName];return!(e&&_.includes(this.props.omittedFeatureKeys,e))}return!0}},{key:"render",value:function(){var t=this.props.features.map((function(t){return bo({},t.feature,{},t)}));return i.a.createElement(Or,{key:this.state.layerKey,data:t,style:this.getStyle,onEachFeature:this.onEachFeature,pointToLayer:this.pointToLayer,filter:this.filter})}}]),e}(i.a.PureComponent);aa.propTypes={omittedFeatureKeys:a.a.array};var sa=gr(aa),ua=function(t){function e(t){var n;return go(this,e),(n=Co(this,wo(e).call(this,t))).pointsPaneName=Zn.uuid(),n.linesPaneName=Zn.uuid(),n.polygonsPaneName=Zn.uuid(),n.onFeatureClick=n.onFeatureClick.bind(Lo(n)),n}return So(e,t),yo(e,[{key:"onFeatureClick",value:function(t){this.props.onClick&&this.props.onClick(this.props.layerKey,[t])}},{key:"prepareData",value:function(t){var e=this;if(t){var n=[],r=[],i=[],o=null,a=null;return rr()(t,(function(t){var o=t&&t.geometry&&t.geometry.type;if(o){var a,s,u=e.props.fidColumnName&&t.properties[e.props.fidColumnName],l=null,c=null;e.props.selected&&u&&Hi()(e.props.selected,(function(t,e){t.keys&&zi()(t.keys,u)&&(l=t)})),"Point"!==o&&"MultiPoint"!==o||(c=ea.getDefaultStyle(t,e.props.style));var h={feature:t,fid:u,defaultStyle:c,selected:!!l,selectedStyleDefinition:null===(a=l)||void 0===a?void 0:a.style,selectedHoveredStyleDefinition:null===(s=l)||void 0===s?void 0:s.hoveredStyle};switch(o){case"Point":case"MultiPoint":n.push(h);break;case"Polygon":case"MultiPolygon":r.push(h);break;case"LineString":case"MultiLineString":i.push(h)}}})),n.length&&(o=tn()(n,["defaultStyle.radius","fid"],["desc","asc"])),r.length&&(a=this.props.selected?tn()(r,["selected"],["asc"]):r),{polygons:a,points:o||n,lines:i}}return null}},{key:"render",value:function(){var t,e,n,r=this.prepareData(this.props.features),o=this.props.opacity?{opacity:this.props.opacity}:null;return r?i.a.createElement(i.a.Fragment,null,(null===(t=r.polygons)||void 0===t?void 0:t.length)?i.a.createElement(Br,{style:o,name:this.polygonsPaneName},this.renderFeatures(r.polygons)):null,(null===(e=r.lines)||void 0===e?void 0:e.length)?i.a.createElement(Br,{style:o,name:this.linesPaneName},this.renderFeatures(r.lines)):null,(null===(n=r.points)||void 0===n?void 0:n.length)?i.a.createElement(Br,{style:o,name:this.pointsPaneName},this.renderFeatures(r.points)):null):null}},{key:"renderFeatures",value:function(t){var e=this;return this.props.renderAsGeoJson||t.length>Po.maxFeaturesAsReactElement?this.renderGeoJson(t):t.map((function(t,n){return e.renderFeature(t,n)}))}},{key:"renderGeoJson",value:function(t){return i.a.createElement(sa,{layerKey:this.props.layerKey,uniqueLayerKey:this.props.uniqueLayerKey,paneName:this.pointsPaneName,features:t,onFeatureClick:this.onFeatureClick,omittedFeatureKeys:this.props.omittedFeatureKeys,fidColumnName:this.props.fidColumnName,pointAsMarker:this.props.pointAsMarker,selectable:this.props.selectable,hoverable:this.props.hoverable,styleDefinition:this.props.style,hoveredStyleDefinition:this.props.hovered&&this.props.hovered.style})}},{key:"renderFeature",value:function(t,e){var n="".concat(this.props.uniqueLayerKey,"_").concat(t.fid||e);return i.a.createElement(oa,{key:n,onClick:this.onFeatureClick,fid:t.fid,fidColumnName:this.props.fidColumnName,feature:t.feature,type:t.feature.geometry.type,pointAsMarker:this.props.pointAsMarker,selectable:this.props.selectable,selected:t.selected,selectedStyleDefinition:t.selectedStyleDefinition,selectedHoveredStyleDefinition:t.selectedStyleDefinition,hoverable:this.props.hoverable,styleDefinition:this.props.style,hoveredStyleDefinition:this.props.hovered&&this.props.hovered.style})}}]),e}(i.a.PureComponent);ua.propTypes={layerKey:a.a.string,uniqueLayerKey:a.a.string,renderAsGeoJson:a.a.bool,features:a.a.array,fidColumnName:a.a.string,omittedFeatureKeys:a.a.array,selectable:a.a.bool,selected:a.a.object,hoverable:a.a.bool,hovered:a.a.object,style:a.a.object,pointAsMarker:a.a.bool,onClick:a.a.func};var la=function(t){function e(t){return go(this,e),Co(this,wo(e).call(this,t))}return So(e,t),yo(e,[{key:"getDiagramDefaultStyle",value:function(t,e){return this.getDiagramLeafletStyle(t,e)}},{key:"getDiagramAccentedStyle",value:function(t,e,n){var r=bo({},e,{},n);return this.getDiagramLeafletStyle(t,r)}},{key:"getDiagramLeafletStyle",value:function(t,e){var n={};return n.color=e.diagramOutlineColor?e.diagramOutlineColor:null,n.weight=e.diagramOutlineWidth?e.diagramOutlineWidth:0,n.opacity=e.diagramOutlineOpacity?e.diagramOutlineOpacity:1,n.fillOpacity=e.diagramFillOpacity?e.diagramFillOpacity:1,n.fillColor=e.diagramFill,e.diagramFill||(n.fillColor=null,n.fillOpacity=0),e.diagramOutlineColor&&e.diagramOutlineWidth||(n.color=null,n.opacity=0,n.weight=0),e.diagramSize?n.radius=e.diagramSize:e.diagramVolume&&(n.radius=Math.sqrt(e.diagramVolume/Math.PI)),n}},{key:"prepareData",value:function(t){var e=this;if(t){var n=[];return rr()(t,(function(t){var r,i=e.props.fidColumnName&&t.properties[e.props.fidColumnName],o=Object(F.centerOfMass)(t.geometry),a=null,s=null,u=null,l=null,c=null;e.props.selected&&i&&Hi()(e.props.selected,(function(t,e){t.keys&&zi()(t.keys,i)&&(a=t)}));var h=Object(F.flip)(t),f=Object(F.flip)(o),p=f&&f.geometry&&f.geometry.coordinates,d=h&&h.geometry&&h.geometry.coordinates,g=e.getDefaultStyleObject(t),m=e.getFeatureDefaultStyle(t,g),y=e.getDiagramDefaultStyle(t,g),v=null,E=null,_=null;if((null===(r=e.props.hovered)||void 0===r?void 0:r.style)&&(v="default"===e.props.hovered.style?bo({},Po.vectorFeatureStyle.hovered,{},Po.diagramStyle.hovered):e.props.hovered.style,E=e.getFeatureAccentedStyle(t,g,v),_=e.getDiagramAccentedStyle(t,g,v)),a){var b,S=null;a.style&&(b="default"===a.style?bo({},Po.vectorFeatureStyle.selected,{},Po.diagramStyle.selected):a.style,s=e.getFeatureAccentedStyle(t,g,b),u=e.getDiagramAccentedStyle(t,g,b)),a.hoveredStyle&&(S="default"===a.hoveredStyle?bo({},Po.vectorFeatureStyle.selectedHovered,{},Po.diagramStyle.selectedHovered):a.hoveredStyle,l=e.getFeatureAccentedStyle(t,g,S),c=e.getDiagramAccentedStyle(t,g,S))}n.push({feature:t,fid:i,selected:!!a,hoverable:e.props.hoverable,selectable:e.props.selectable,areaDefaultStyle:m,areaHoveredStyle:E,areaSelectedStyle:s,areaSelectedHoveredStyle:l,areaLeafletCoordinates:d,diagramDefaultStyle:y,diagramHoveredStyle:_,diagramSelectedStyle:u,diagramSelectedHoveredStyle:c,diagramLeafletCoordinates:p})})),tn()(n,["diagramDefaultStyle.radius"],["desc"])}return null}},{key:"render",value:function(){var t=this,e=this.prepareData(this.props.features),n=e;this.props.selected&&(n=tn()(e,["selected"],["asc"]));var r=this.props.opacity?{opacity:this.props.opacity}:null;return e?i.a.createElement(Br,{style:r},i.a.createElement(Br,null,n.map((function(e,n){return t.renderArea(e,n)}))),i.a.createElement(Br,null,e.map((function(e,n){return t.renderDiagram(e,n)})))):null}},{key:"renderArea",value:function(t,e){return i.a.createElement(oa,{key:t.fid||e,fid:t.fid,onClick:this.onFeatureClick,fidColumnName:this.props.fidColumnName,type:t.feature.geometry.type,selectable:t.selectable,hoverable:t.hoverable,defaultStyle:t.areaDefaultStyle,hoveredStyle:t.areaHoveredStyle,selectedStyle:t.areaSelectedStyle,selectedHoveredStyle:t.areaSelectedHoveredStyle,selected:t.selected,leafletCoordinates:t.areaLeafletCoordinates,feature:t.feature})}},{key:"renderDiagram",value:function(t,e){return i.a.createElement(oa,{key:t.fid||e,fid:t.fid,onClick:this.onFeatureClick,fidColumnName:this.props.fidColumnName,type:"Point",selectable:t.selectable,hoverable:t.hoverable,defaultStyle:t.diagramDefaultStyle,hoveredStyle:t.diagramHoveredStyle,selectedStyle:t.diagramSelectedStyle,selectedHoveredStyle:t.diagramSelectedHoveredStyle,selected:t.selected,leafletCoordinates:t.diagramLeafletCoordinates,feature:t.feature})}}]),e}(ua),ca=n(681).default;var ha=function(t){function e(t){var n;return go(this,e),(n=Co(this,wo(e).call(this,t))).state={rerender:null},n.indexTree=ca(),n.repopulateIndexTreeIfNeeded=Object(qi.default)((function(t){t&&(n.indexTree.clear(),n.indexTree.load(t))})),n}return So(e,t),yo(e,[{key:"componentDidUpdate",value:function(t,e,n){var r;this.props.zoom!==t.zoom&&this.props.zoom!==(null===(r=this.props.leaflet)||void 0===r?void 0:r.map._zoom)&&this.setState({reredner:Zn.uuid()})}},{key:"boxRangeFitsLimits",value:function(){var t=this.props;if(!t.boxRangeRange)return!0;var e=t.boxRangeRange[0],n=t.boxRangeRange[1];return e&&n?e<=t.view.boxRange&&n>=t.view.boxRange:e?e<=t.view.boxRange:n?n>=t.view.boxRange:void 0}},{key:"render",value:function(){if(this.props.features&&this.boxRangeFitsLimits()){this.repopulateIndexTreeIfNeeded(this.props.features);var t={type:"Feature",bbox:function(t){var e=t.getBounds(),n=e._northEast,r=e._southWest,i=t.latLngToLayerPoint(n),o=t.latLngToLayerPoint(r),a=[t.layerPointToLatLng([i.x,i.y]),t.layerPointToLatLng([i.x,o.y]),t.layerPointToLatLng([o.x,i.y]),t.layerPointToLatLng([o.x,o.y])];return[eo()(a,"lng").lng,eo()(a,"lat").lat,$i()(a,"lng").lng,$i()(a,"lat").lat]}(this.props.leaflet.map)},e=this.indexTree.search(t),n=e&&e.features||[],r=bo({},this.props,{features:n});return i.a.createElement(this.props.component,r)}return null}}]),e}(i.a.PureComponent);ha.propTypes={boxRangeRange:a.a.array,component:a.a.func,omittedFeatureKeys:a.a.array};var fa=gr(ha),pa={};"keys"in Object||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),pa.Source=L.Layer.extend({options:{untiled:!0,identify:!0},initialize:function(t,e){L.setOptions(this,e),this.options.tiled&&(this.options.untiled=!1),this._url=t,this._subLayers={},this._overlay=this.createOverlay(this.options.untiled)},createOverlay:function(t){var e={};for(var n in this.options)"untiled"!=n&&"identify"!=n&&(e[n]=this.options[n]);return t?pa.overlay(this._url,e):pa.tileLayer(this._url,e)},onAdd:function(){this.refreshOverlay()},setParams:function(t){this._overlay.setParams(t)},onRemove:function(){var t=Object.keys(this._subLayers).join(",");this._map&&t&&this._overlay.remove()},getEvents:function(){return this.options.identify?{click:this.identify}:{}},setOpacity:function(t){this.options.opacity=t,this._overlay&&this._overlay.setOpacity(t)},bringToBack:function(){this.options.isBack=!0,this._overlay&&this._overlay.bringToBack()},bringToFront:function(){this.options.isBack=!1,this._overlay&&this._overlay.bringToFront()},getLayer:function(t){return pa.layer(this,t)},addSubLayer:function(t){this._subLayers[t]=!0,this.refreshOverlay()},removeSubLayer:function(t){delete this._subLayers[t],this.refreshOverlay()},refreshOverlay:function(){var t=Object.keys(this._subLayers).join(",");this._map&&(t?(this._overlay.setParams({layers:t}),this._overlay.addTo(this._map)):this._overlay.remove())},identify:function(t){var e=this.getIdentifyLayers();e.length&&this.getFeatureInfo(t.containerPoint,t.latlng,e,this.showFeatureInfo)},getFeatureInfo:function(t,e,n,r){var i=this.getFeatureInfoParams(t,n),o=this._url+L.Util.getParamString(i,this._url);this.showWaiting(),this.ajax(o,(function(t){this.hideWaiting();var n=this.parseFeatureInfo(t,o);r.call(this,e,n)}))},ajax:function(t,e){ga.call(this,t,e)},getIdentifyLayers:function(){return this.options.identifyLayers?this.options.identifyLayers:Object.keys(this._subLayers)},getFeatureInfoParams:function(t,e){var n,r;this.options.untiled?n=this._overlay.wmsParams:((r=this.createOverlay(!0)).updateWmsParams(this._map),(n=r.wmsParams).layers=e.join(","));var i={request:"GetFeatureInfo",query_layers:e.join(","),X:Math.round(t.x),Y:Math.round(t.y)};return L.extend({},n,i)},parseFeatureInfo:function(t,e){return"error"==t&&(t="<iframe src='"+e+"' style='border:none'>"),t},showFeatureInfo:function(t,e){this._map&&this._map.openPopup(e,t)},showWaiting:function(){this._map&&(this._map._container.style.cursor="progress")},hideWaiting:function(){this._map&&(this._map._container.style.cursor="default")}}),pa.source=function(t,e){return new pa.Source(t,e)},pa.Layer=L.Layer.extend({initialize:function(t,e,n){L.setOptions(this,{pane:t.options.pane}),t.addSubLayer||(t=pa.getSourceForUrl(t,n)),this._source=t,this._name=e},onAdd:function(){this._source._map||this._source.addTo(this._map),this._source.addSubLayer(this._name)},onRemove:function(){this._source.removeSubLayer(this._name)},setOpacity:function(t){this._source.setOpacity(t)},setParams:function(t){this._source.setParams(t)},bringToBack:function(){this._source.bringToBack()},bringToFront:function(){this._source.bringToFront()}}),pa.layer=function(t,e){return new pa.Layer(t,e)};var da={};function ga(t,e){var n=this,r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?e.call(n,r.responseText):e.call(n,"error"))},r.open("GET",t),r.send()}pa.getSourceForUrl=function(t,e){return da[t]||(da[t]=pa.source(t,e)),da[t]},pa.TileLayer=L.TileLayer.WMS,pa.tileLayer=L.tileLayer.wms,pa.Overlay=L.Layer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1,attribution:"",opacity:1,isBack:!1,minZoom:0,maxZoom:18},initialize:function(t,e){this._url=t;var n={},r={};for(var i in e)i in this.options?r[i]=e[i]:n[i]=e[i];L.setOptions(this,r),this.wmsParams=L.extend({},this.defaultWmsParams,n)},setParams:function(t){L.extend(this.wmsParams,t),this.update()},getAttribution:function(){return this.options.attribution},onAdd:function(){this.update()},onRemove:function(t){this._currentOverlay&&(t.removeLayer(this._currentOverlay),delete this._currentOverlay),this._currentUrl&&delete this._currentUrl},getEvents:function(){return{moveend:this.update}},update:function(){if(this._map){this.updateWmsParams();var t=this.getImageUrl();if(this._currentUrl!=t){this._currentUrl=t;var e=this._map.getBounds(),n=L.imageOverlay(t,e,{opacity:0,pane:this.options.pane});n.addTo(this._map),n.once("load",(function(){if(!this._map)return;if(n._url!=this._currentUrl)return void this._map.removeLayer(n);this._currentOverlay&&this._map.removeLayer(this._currentOverlay);this._currentOverlay=n,n.setOpacity(this.options.opacity?this.options.opacity:1),!0===this.options.isBack&&n.bringToBack();!1===this.options.isBack&&n.bringToFront()}),this),(this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom)&&this._map.removeLayer(n)}}},setOpacity:function(t){this.options.opacity=t,this._currentOverlay&&this._currentOverlay.setOpacity(t)},bringToBack:function(){this.options.isBack=!0,this._currentOverlay&&this._currentOverlay.bringToBack()},bringToFront:function(){this.options.isBack=!1,this._currentOverlay&&this._currentOverlay.bringToFront()},updateWmsParams:function(t){t||(t=this._map);var e=t.getBounds(),n=t.getSize(),r=parseFloat(this.wmsParams.version),i=this.options.crs||t.options.crs,o=r>=1.3?"crs":"srs",a=i.project(e.getNorthWest()),s=i.project(e.getSouthEast()),u={width:n.x,height:n.y};u[o]=i.code,u.bbox=(r>=1.3&&i===L.CRS.EPSG4326?[s.y,a.x,a.y,s.x]:[a.x,s.y,s.x,a.y]).join(","),L.extend(this.wmsParams,u)},getImageUrl:function(){var t=this.options.uppercase||!1,e=L.Util.getParamString(this.wmsParams,this._url,t);return this._url+e}}),pa.overlay=function(t,e){return new pa.Overlay(t,e)};var ma=/^on(.+)$/i,ya=gr(function(t){function e(){return go(this,e),Co(this,wo(e).apply(this,arguments))}return So(e,t),yo(e,[{key:"createLeafletElement",value:function(t){var e=t.url,n=t.params,r=t.singleTile,i=To(t,["url","params","singleTile"]),o=this.getOptions(bo({},i,{},n)),a=o.leaflet,s=To(o,["leaflet"]);if(r){var u=new pa.source(e,bo({},s,{pane:a.pane,tiled:!1,identify:!1})).getLayer(s.layers);return u.options.pane=a.pane,u}return new sr.TileLayer.WMS(e,s)}},{key:"updateLeafletElement",value:function(t,n){Ao(wo(e.prototype),"updateLeafletElement",this).call(this,t,n);var r=t.url,i=n.url;i!==r&&this.leafletElement.setUrl(i),yr()(t.params,n.params)||this.leafletElement.setParams(bo({},n.params,{pane:n.leaflet.pane}))}},{key:"getOptions",value:function(t){var n=Ao(wo(e.prototype),"getOptions",this).call(this,t);return Object.keys(n).reduce((function(t,e){return ma.test(e)||(t[e]=n[e]),t}),{})}}]),e}(wr));function va(t,e,n,r){var i=Ne()(t,(function(t){return t.tileKey===e})),o=0;if(!(i>0))return null;var a=function(){for(var e=[],a=new Set;o<i;){var s=t[o];rr()(s.featureKeys,(function(t){a.add(t)})),o++}return rr()(n,(function(t){var n=t.id||t.properties[r];n&&a.has(n)&&e.push(n)})),{v:e.length?e:null}}();return"object"===po(a)?a.v:void 0}function Ea(t,e){var n=t[0],r=e[0];return!n&&!r||!(!n||!r)&&or()(n.sort(),r.sort())}var _a=function(t){function e(t){var n;return go(this,e),(n=Co(this,wo(e).call(this,t))).getFeatureKeysToOmit=Object(qi.default)(va),n.checkIdentity=Object(qi.default)((function(t){return t}),Ea),n}return So(e,t),yo(e,[{key:"render",value:function(){var t=this.props,e=t.tileKey,n=t.featureKeysGroupedByTileKey,r=To(t,["tileKey","featureKeysGroupedByTileKey"]),o=this.getFeatureKeysToOmit(n,e,r.features,r.fidColumnName);return i.a.createElement(fa,Eo({},r,{component:ua,key:e,uniqueLayerKey:e,omittedFeatureKeys:this.checkIdentity(o)}))}}]),e}(i.a.PureComponent);_a.propTypes={tileKey:a.a.string,features:a.a.array,fidColumnName:a.a.string,level:a.a.number,tile:a.a.array,featureKeysGroupedByTileKey:a.a.array};var ba=gr(_a);function Sa(t,e){return"".concat(t,"_").concat(e.level,"_").concat(JSON.stringify(e.tile))}function wa(t,e,n){var r=[];return rr()(e,(function(e){r.push({tileKey:Sa(t,e),featureKeys:e.features.map((function(t){return t.id||t.properties[n]}))})})),r}var xa=function(t){function e(t){var n;return go(this,e),(n=Co(this,wo(e).call(this,t))).getFeatureKeysGroupedByTileKey=Object(qi.default)(wa),n}return So(e,t),yo(e,[{key:"render",value:function(){var t=this.props,e=t.tiles,n=To(t,["tiles"]),r=this.getFeatureKeysGroupedByTileKey(n.uniqueLayerKey,e,n.fidColumnName);return(null===e||void 0===e?void 0:e.length)?e.map((function(t){var e=Sa(n.uniqueLayerKey,t);return i.a.createElement(ba,Eo({},n,{key:e,tileKey:e,features:t.features,level:t.level,tile:t.tile,featureKeysGroupedByTileKey:r}))})):null}}]),e}(i.a.PureComponent);xa.propTypes={fidColumnName:a.a.string,tiles:a.a.array,layerKey:a.a.string,uniqueLayerKey:a.a.string};var Ta=gr(xa),La=function(t){function e(t){var n;return go(this,e),(n=Co(this,wo(e).call(this,t))).state={view:null,crs:n.getCRS(t.crs)},n.onClick=n.onClick.bind(Lo(n)),n.onLayerClick=n.onLayerClick.bind(Lo(n)),n.onViewportChanged=n.onViewportChanged.bind(Lo(n)),n.onResize=n.onResize.bind(Lo(n)),n}return So(e,t),yo(e,null,[{key:"getDerivedStateFromProps",value:function(t,e){return e.width&&e.height?{leafletView:qo.getLeafletViewportFromViewParams(t.view,e.width,e.height)}:null}}]),yo(e,[{key:"componentDidMount",value:function(){var t=ur.a.GridLayer.prototype._initTile;ur.a.GridLayer.include({_initTile:function(e){t.call(this,e);var n=this.getTileSize();e.style.width=n.x+1+"px",e.style.height=n.y+1+"px"}})}},{key:"getCRS",value:function(t){switch(t){case"EPSG:4326":return ur.a.CRS.EPSG4326;case"EPSG:5514":return new Yr.a.CRS("EPSG:5514",Po.projDefinitions.epsg5514,{resolutions:[102400,51200,25600,12800,6400,3200,1600,800,400,200,100,50,25,12.5,6.25,3.125,1.5625,.78125,.390625]});default:return ur.a.CRS.EPSG3857}}},{key:"setZoomLevelsBounds",value:function(t,e){var n=this.props;this.minZoom=Re.f.defaultLevelsRange[0],this.maxZoom=Re.f.defaultLevelsRange[1],n.viewLimits&&n.viewLimits.boxRangeRange&&(n.viewLimits.boxRangeRange[1]&&(this.minZoom=Wn.view.getZoomLevelFromBoxRange(n.viewLimits.boxRangeRange[1],t,e)),n.viewLimits.boxRangeRange[0]&&(this.maxZoom=Wn.view.getZoomLevelFromBoxRange(n.viewLimits.boxRangeRange[0],t,e)))}},{key:"onViewportChanged",value:function(t){if(t){var e={};!t.center||t.center[0]===this.state.leafletView.center[0]&&t.center[1]===this.state.leafletView.center[1]||(e.center={lat:t.center[0],lon:t.center[1]}),t.hasOwnProperty("zoom")&&Number.isFinite(t.zoom)&&t.zoom!==this.state.leafletView.zoom&&(e.boxRange=Wn.view.getBoxRangeFromZoomLevel(t.zoom,this.state.width,this.state.height)),$n()(e)||!this.props.onViewChange||this.hasResized()||(e=Wn.view.ensureViewIntegrity(e),this.props.onViewChange(e))}}},{key:"hasResized",value:function(){var t=this.leafletMap._size,e=t.x,n=t.y,r=Math.abs(e-this.state.width)>5,i=Math.abs(n-this.state.height)>5;return r||i}},{key:"onResize",value:function(t,e){this.leafletMap&&this.leafletMap.invalidateSize(),this.maxZoom||this.minZoom||this.setZoomLevelsBounds(t,e),this.setState({width:t,height:e,leafletView:qo.getLeafletViewportFromViewParams(this.props.view,this.state.width,this.state.height)}),this.props.onResize&&this.props.onResize(t,e)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ki,{handleHeight:!0,handleWidth:!0,onResize:this.onResize,refreshMode:"debounce",refreshRate:500}),this.state.width&&this.state.height?this.renderMap():null)}},{key:"renderMap",value:function(){var t=this,e=Be()(this.props.backgroundLayer)?this.props.backgroundLayer:[this.props.backgroundLayer],n=Po.defaultLeafletPaneZindex+1,r=e&&e.map((function(e,n){return t.getLayerByType(e,n)})),o=Po.defaultLeafletPaneZindex+100,a=this.props.layers&&this.props.layers.map((function(e,n){return i.a.createElement(Br,{key:e.key||n,style:{zIndex:o+n}},t.getLayerByType(e,n))}));return i.a.createElement(Kr,{id:this.props.mapKey,ref:function(e){t.leafletMap=e&&e.leafletElement},className:"ptr-map ptr-leaflet-map",onViewportChanged:this.onViewportChanged,onClick:this.onClick,center:this.state.leafletView.center,zoom:this.state.leafletView.zoom,zoomControl:!1,minZoom:this.minZoom,maxZoom:this.maxZoom,attributionControl:!1,crs:this.state.crs,animate:!1},i.a.createElement(Br,{style:{zIndex:n}},r),a,this.props.children)}},{key:"getLayerByType",value:function(t,e){if(!t||!t.type)return null;switch(t.type){case"wmts":return this.getTileLayer(t,e);case"wms":return this.getWmsTileLayer(t,e);case"vector":return this.getIndexedVectorLayer(t,e);case"tiled-vector":return this.getTiledVectorLayer(t,e);case"diagram":default:return null}}},{key:"getTileLayer",value:function(t,e){var n=t.options,r=n.url,o=To(n,["url"]);return t.options.urls&&(r=t.options.urls[0]),i.a.createElement(Wr,Eo({key:t.key||e,url:r},o))}},{key:"getWmsTileLayer",value:function(t,e){var n=t.options,r=n.params&&n.params.layers||"",o=n.params&&n.params.crs&&this.getCRS(n.params.crs)||null,a=n.params&&n.params.imageFormat||"image/png",s=["layers","crs","imageFormat","pane","maxZoom","styles"],u=n.params&&Object.entries(n.params).reduce((function(t,e){var n=Mo(e,2),r=n[0],i=n[1];return s.includes(r)||(t[r]=i),t}),{})||{};return i.a.createElement(ya,{key:t.key||e,url:n.url,crs:o,singleTile:!0===n.singleTile,params:bo({layers:r,opacity:t.opacity||1,transparent:!0,format:a},u)})}},{key:"getIndexedVectorLayer",value:function(t,e,n){return i.a.createElement(fa,Eo({component:n?la:ua,key:t.key||e,type:t.type,layerKey:t.layerKey||t.key,uniqueLayerKey:t.key||e,opacity:t.opacity||1,view:this.state.view||this.props.view,zoom:this.state.leafletView.zoom,onClick:this.onLayerClick},t.options))}},{key:"getTiledVectorLayer",value:function(t,e){return i.a.createElement(Ta,Eo({key:t.key||e,type:t.type,layerKey:t.layerKey||t.key,uniqueLayerKey:t.key||e,opacity:t.opacity||1,zoom:this.state.leafletView.zoom,view:this.state.view||this.props.view,onClick:this.onLayerClick,renderAsGeoJson:!0},t.options))}},{key:"onLayerClick",value:function(t,e){this.props.onLayerClick&&this.props.onLayerClick(this.props.mapKey,t,e)}},{key:"onClick",value:function(){this.props.onClick&&this.props.onClick(this.props.view)}}]),e}(i.a.PureComponent);La.propTypes={backgroundLayer:a.a.oneOfType([a.a.object,a.a.array]),name:a.a.string,crs:a.a.string,layers:a.a.array,mapKey:a.a.string.isRequired,onClick:a.a.func,onLayerClick:a.a.func,onViewChange:a.a.func,view:a.a.object};var Ca=Object.freeze({__proto__:null,default:La}),Aa=function(t){function e(t){var n;return go(this,e),(n=Co(this,wo(e).call(this,t))).ref=i.a.createRef(),n.state={open:!1},n.onControlButtonClick=n.onControlButtonClick.bind(Lo(n)),n.onBlur=n.onBlur.bind(Lo(n)),n}return So(e,t),yo(e,[{key:"onBlur",value:function(t){var e=this;setTimeout((function(){e.setState({open:!1})}),50)}},{key:"onControlButtonClick",value:function(){this.setState({open:!this.state.open})}},{key:"onLayerTileClick",value:function(t){this.props.onSelect&&this.props.onSelect(t)}},{key:"render",value:function(){var t=c()("ptr-simple-layers-control control",{open:this.state.open});return i.a.createElement("div",{className:t,onBlur:this.onBlur,ref:this.ref},i.a.createElement(fe,{onClick:this.onControlButtonClick},i.a.createElement(le,{icon:"layers"})),this.renderMenu())}},{key:"renderMenu",value:function(){var t=this,e=this.props.layers;if(e){var n=this.getGrid(e.length),r=c()("ptr-simple-layers-control-menu",{open:this.state.open,right:this.props.right,left:!this.props.right}),o={width:this.state.open?"".concat(7.5*n.width+2,"rem"):0,height:this.state.open?"".concat(5.5*n.height+2,"rem"):"2rem"},a={margin:"".concat(1,"rem"),width:"calc(100% - ".concat(2,"rem)"),height:"calc(100% - ".concat(2,"rem)")};return i.a.createElement("div",{className:r,style:o},i.a.createElement("div",{className:"ptr-simple-layers-control-menu-content",style:a},e.map((function(e){return t.renderTile(e,7,5,.25)}))))}return null}},{key:"renderTile",value:function(t,e,n,r){var o=t.key===this.props.activeLayer.key,a=c()("ptr-simple-layers-control-tile",{active:o}),s={width:"".concat(e,"rem"),height:"".concat(n,"rem"),margin:"".concat(r,"rem")};return t.thumbnail,i.a.createElement("div",{key:t.key,style:s,className:a,onClick:this.onLayerTileClick.bind(this,t.key)},i.a.createElement("div",{className:"ptr-simple-layers-control-tile-name"},t.name))}},{key:"getGrid",value:function(t){var e=1,n=1;return t>=7?(e=3,n=3):t>=5?(e=2,n=3):4===t?(e=2,n=2):3===t?n=3:2===t&&(n=2),{width:e,height:n}}}]),e}(i.a.PureComponent);Aa.propTypes={activeLayer:a.a.object,layers:a.a.array,onSelect:a.a.func,right:a.a.bool};var Ma=oo.a.Angle,Ra=oo.a.WWMath;var Oa=function(t){function e(t,n){var r;go(this,e);var i=t.name||"";return(r=Co(this,wo(e).call(this,i))).opacity=t.opacity||1,r.pantherProps={features:n.features||[],fidColumnName:n.fidColumnName,hoverable:n.hoverable,selectable:n.selectable,hovered:bo({},n.hovered),selected:bo({},n.selected),key:t.key,layerKey:n.layerKey,onHover:n.onHover,onClick:n.onClick,style:n.style},r.addFeatures(r.pantherProps.features),r}return So(e,t),yo(e,[{key:"addFeatures",value:function(t){var e=this,n={type:"FeatureCollection",features:t};new oo.a.GeoJSONParser(n).load((function(t){t.renderables.forEach((function(t){e.applyStyles(t)}))}),(function(t,n){var r,i,o,a=Jn.mapStyle.getStyleObject(n,e.pantherProps.style||Po.vectorFeatureStyle.defaultFull),s=e.getStyleDefinition(a);return(null===(r=e.pantherProps.hovered)||void 0===r?void 0:r.style)&&(i="default"===e.pantherProps.hovered.style?Po.vectorFeatureStyle.hovered:e.pantherProps.hovered.style,o=e.getStyleDefinition(bo({},a,{},i))),{userProperties:bo({},n,{defaultStyleObject:a,defaultStyle:s,hoveredStyleObject:i,hoveredStyle:o})}}),this)}},{key:"updateHoveredFeatures",value:function(t){var e=this;this.renderables.forEach((function(n){var r=n.userProperties[e.pantherProps.fidColumnName];if(zi()(t,r)){var i=e.getSelection(n);if(null===i||void 0===i?void 0:i.hoveredStyle){var o="default"===i.hoveredStyle?Po.vectorFeatureStyle.selectedHovered:i.hoveredStyle,a=e.getStyleDefinition(bo({},n.userProperties.defaultStyleObject,{},o));e.applyWorldWindStyles(n,a)}else n.userProperties.hoveredStyle&&e.applyWorldWindStyles(n,n.userProperties.hoveredStyle)}else e.applyStyles(n)}))}},{key:"getStyleDefinition",value:function(t){var e={};if(t.fill){var n=Jn.mapStyle.hexToRgb(t.fill);e.interiorColor=new oo.a.Color(n.r/255,n.g/256,n.b/256,t.fillOpacity||1)}else e.interiorColor=oo.a.Color.TRANSPARENT;if(t.outlineColor&&t.outlineWidth){var r=Jn.mapStyle.hexToRgb(t.outlineColor);e.outlineColor=new oo.a.Color(r.r/255,r.g/256,r.b/256,t.outlineOpacity||1),e.outlineWidth=t.outlineWidth}else e.outlineColor=oo.a.Color.TRANSPARENT;return e}},{key:"getSelection",value:function(t){if(this.pantherProps.selected){var e=t.userProperties[this.pantherProps.fidColumnName],n=null;return Hi()(this.pantherProps.selected,(function(t,r){t.keys&&zi()(t.keys,e)&&(n=t)})),n}return null}},{key:"applyStyles",value:function(t){var e=t.userProperties.defaultStyleObject,n=this.getSelection(t);if(null===n||void 0===n?void 0:n.style){var r="default"===n.style?Po.vectorFeatureStyle.selected:n.style,i=this.getStyleDefinition(bo({},e,{},r));this.applyWorldWindStyles(t,i)}else this.applyWorldWindStyles(t,t.userProperties.defaultStyle)}},{key:"applyWorldWindStyles",value:function(t,e){t.attributes.outlineWidth=e.outlineWidth,t.attributes.outlineColor=e.outlineColor,t.attributes.interiorColor=e.interiorColor}}]),e}(oo.a.RenderableLayer),Pa=oo.a.Location,Ia=oo.a.Sector,Na=oo.a.MercatorTiledImageLayer,Da=function(t){function e(t){var n;return go(this,e),t=t||"Open Street Map",(n=Co(this,wo(e).call(this,new Ia(-85.05,85.05,-180,180),new Pa(85.05,180),19,"image/png",t,256,256))).displayName=t,n.pickEnabled=!1,n.destCanvas=document.createElement("canvas"),n.destContext=n.destCanvas.getContext("2d"),n.urlBuilder={urlForTile:function(t,e){return"https://otile1.mqcdn.com/tiles/1.0.0/osm/"+(t.level.levelNumber+1)+"/"+t.column+"/"+t.row+".png"}},n.doRender=n.doRender.bind(Lo(n)),n}return So(e,t),yo(e,[{key:"doRender",value:function(t){Na.prototype.doRender.call(this,t)}},{key:"createTopLevelTiles",value:function(t){this.topLevelTiles=[],this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),0,0)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),0,1)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),1,0)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),1,1))}},{key:"mapSizeForLevel",value:function(t){return 256<<t+1}}]),e}(Na),ka=oo.a.ArgumentError,Fa=oo.a.Logger,Va=function(t){function e(t){var n;if(go(this,e),(n=Co(this,wo(e).call(this,""))).imageSize=256,!t.source&&!t.sourceObject)throw new ka(Fa.logMessage(Fa.LEVEL_SEVERE,"MyOsmLayer","constructor","missingSource"));n._source=t.sourceObject?n.buildSourceUrl(t.sourceObject):t.source,n._attribution=t.attribution,n._imageType=t.imageType?t.imageType:"png",n.cachePath=n._source,n.detailControl=t.detailControl?t.detailControl:1,n.levels.numLevels=18;var r=Lo(n);return n.urlBuilder={urlForTile:function(t,e){return r._source+(t.level.levelNumber+1)+"/"+t.column+"/"+t.row+"."+r._imageType}},n}return So(e,t),yo(e,[{key:"buildSourceUrl",value:function(t){var e=this.buildPrefix(t.prefixes);return(t.protocol?t.protocol+"://":"http://")+e+(t.host+"/")+(t.path?t.path+"/":"")}},{key:"buildPrefix",value:function(t){var e="";t&&(e=t[Math.floor(Math.random()*t.length)]+".");return e}}]),e}(Da),ja=function(t){function e(t){var n;go(this,e);var r=t.key,i=t.options,o=t.opacity,a=i.params,s=a.imageFormat,u=a.layers,l=a.name,c=a.styles,h=a.version,f=To(a,["imageFormat","layers","name","styles","version"]),p={key:r,format:s||"image/png",layerNames:u,levelZeroDelta:new oo.a.Location(45,45),name:l,numLevels:18,opacity:o||1,params:$n()(f)?null:f,sector:new oo.a.Sector(-90,90,-180,180),service:i.url,size:256,styleNames:c,version:h||"1.3.0"};return(n=Co(this,wo(e).call(this,p))).key=r,n.attributions=i.attributions,n.layerNames=u,n.service=i.url,n.styleNames=c||"",n.customParams=f,n.numLevels=p.numLevels,n.cachePath="".concat(n.service,"/").concat(n.layerNames),n.styleNames&&(n.cachePath+="/".concat(n.styleNames)),n.customParams&&n.customParams.time&&(n.cachePath+="/".concat(n.customParams.time)),n.opacity=p.opacity,n}return So(e,t),yo(e,[{key:"doRender",value:function(t){oo.a.WmsLayer.prototype.doRender.call(this,t),t.screenCreditController.clear()}}]),e}(oo.a.WmsLayer),Ba=function(t){function e(t){var n;return go(this,e),(n=Co(this,wo(e).call(this,""))).imageSize=256,n.detailControl=1,n.levels.numLevels=18,n.cachePath=t.options.url,n.urlBuilder=bo({},n.urlBuilder,{urlForTile:n.urlForTile.bind(Lo(n),t.options.url)}),n}return So(e,t),yo(e,[{key:"urlForTile",value:function(t,e,n){var r=so()(t);if(r&&r.varNames&&r.varNames.length){var i=["a","b","c"],o=i.length,a=e.row%o;return r.fill({s:i[a],z:e.level.levelNumber+1,x:e.column,y:e.row})}return"".concat(t,"/").concat(e.level.levelNumber+1,"/").concat(e.column,"/").concat(e.row,".").concat(oo.a.WWUtil.suffixForMimeType(n))}}]),e}(Da);function Ua(t,e){t.restore(),t.fillStyle=e.fill,t.lineWidth=e.outlineWidth,t.strokeStyle=e.outlineColor,t.globalAlpha=e.fillOpacity||e.outlineOpacity,t.fill(),t.stroke()}var Ga={arrow:function(t,e,n,r,i,o,a){t.beginPath(),t.moveTo(e,n),t.lineTo(r,i),t.strokeStyle=o,t.lineWidth=a,t.stroke()},ellipse:function(t,e,n,r,i,o){t.save(),t.beginPath(),t.translate(e-r,n-i),t.scale(r,i),t.arc(1,1,1,0,2*Math.PI,!1),Ua(t,o)},path:function(t,e,n){t.save(),t.beginPath(),e.forEach((function(e,n){0===n?t.moveTo(e[0],e[1]):t.lineTo(e[0],e[1])})),Ua(t,n)},rectangle:function(t,e,n,r,i,o){t.save(),t.beginPath(),t.rect(e,n,r,i),Ua(t,o)}},Ka=function(){function t(e,n,r,i,o,a){if(go(this,t),this._data=e,this._style=r,this._fidColumnName=i,this._hovered=a,this._hovered&&this._hovered.keys&&(this._hoveredStyle=Hn.getStyleObject(null,this._hovered.style,!0)),o&&!$n()(o)){var s=[];Hi()(o,(function(t){t&&!$n()(t)&&s.push({keys:t.keys,style:Hn.getStyleObject(null,t.style,!0)})})),this._selected=s.length?s:null}this._sector=n.sector,this._canvas=this.createCanvas(n.width,n.height),this._width=n.width,this._height=n.height;var u=(this._sector.maxLatitude+this._sector.minLatitude)*(Math.PI/180)/2;this._latitudeFactor=1/Math.cos(Math.abs(u))}return yo(t,[{key:"url",value:function(){return this.draw().toDataURL()}},{key:"canvas",value:function(){return this.draw()}},{key:"draw",value:function(){for(var t=this,e=this._canvas.getContext("2d"),n=[],r=[],i=0;i<this._data.length;i++){var o=this._data[i],a=o.data,s=this.isHovered(a);this.isSelected(a)?r.push(o):s?n.push(o):this.shape(e,o)}return n.forEach((function(n){t.shape(e,n,!0)})),r.forEach((function(n){t.shape(e,n,!1,!0)})),this._canvas}},{key:"isHovered",value:function(t){if(this._hovered&&this._hovered.keys)return-1!==this._hovered.keys.indexOf(t[this._fidColumnName])}},{key:"isSelected",value:function(t){var e=this,n=!1;return this._selected&&this._selected.forEach((function(r){-1!==r.keys.indexOf(t[e._fidColumnName])&&(n=!0)})),n}},{key:"shape",value:function(t,e,n,r){var i=this,o=e.data,a=Hn.getStyleObject(o,this._style);n&&(a=bo({},a,{},this._hoveredStyle)),r&&this._selected.forEach((function(t){-1!==t.keys.indexOf(o[i._fidColumnName])&&(a=bo({},a,{},t.style))})),a.shape?"circle-with-arrow"===a.shape?this.circleWithArrow(t,e,a):"circle"===a.shape?this.point(t,e,a):"square"===a.shape?this.square(t,e,a):"diamond"===a.shape?this.diamond(t,e,a):"triangle"===a.shape?this.triangle(t,e,a):this.point(t,e,a):this.point(t,e,a)}},{key:"point",value:function(t,e,n){var r=this.getSize(n)/2,i=this.getCenterCoordinates(e),o=r,a=r*this._latitudeFactor;Ga.ellipse(t,i[0],i[1],a,o,n)}},{key:"square",value:function(t,e,n){var r=this.getSize(n),i=this.getCenterCoordinates(e),o=r*this._latitudeFactor;Ga.rectangle(t,i[0]-o/2,i[1]-r/2,o,r,n)}},{key:"diamond",value:function(t,e,n){var r=this.getSize(n),i=Math.sqrt(2)*r,o=this.getCenterCoordinates(e),a=i*this._latitudeFactor,s=[[o[0]-a/2,o[1]],[o[0],o[1]-i/2],[o[0]+a/2,o[1]],[o[0],o[1]+i/2],[o[0]-a/2,o[1]]];Ga.path(t,s,n)}},{key:"triangle",value:function(t,e,n){var r=this.getSize(n),i=Math.sqrt(Math.pow(r,2)-Math.pow(r/2,2)),o=this.getCenterCoordinates(e),a=r*this._latitudeFactor,s=[[o[0]-a/2,o[1]+i/3],[o[0],o[1]-2*i/3],[o[0]+a/2,o[1]+i/3],[o[0]-a/2,o[1]+i/3]];Ga.path(t,s,n)}},{key:"circleWithArrow",value:function(t,e,n){var r=this.getSize(n)/2,i=n.arrowDirection||1,o=this.getCenterCoordinates(e),a=r,s=r*this._latitudeFactor;Ga.ellipse(t,o[0],o[1],s,a,n);var u=o[0]+i*s,l=o[1],c=u+i*n.arrowLength,h=l;Ga.arrow(t,u,l,c,h,n.arrowColor,n.arrowWidth)}},{key:"getSize",value:function(t){return t.size?t.size:t.volume?"triangle"===t.shape?Math.sqrt(t.volume/2):"square"===t.shape||"diamond"===t.shape?Math.sqrt(t.volume):Math.sqrt(t.volume/Math.PI):Hn.DEFAULT_SIZE}},{key:"getCenterCoordinates",value:function(t){return[this.longitudeInSector(t,this._sector,this._width),this._height-this.latitudeInSector(t,this._sector,this._height)]}},{key:"createCanvas",value:function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n}},{key:"latitudeInSector",value:function(t,e,n){var r=e.maxLatitude-e.minLatitude,i=t.y-90-e.minLatitude;return Math.ceil(i/r*n)}},{key:"longitudeInSector",value:function(t,e,n){var r=e.maxLongitude-e.minLongitude,i=t.x-180-e.minLongitude;return Math.ceil(i/r*n)}}]),t}(),Wa=oo.a.Location,za=oo.a.REDRAW_EVENT_TYPE,Ya=oo.a.Sector,Ha=(oo.a.SurfaceCircle,function(t){function e(t,n,r){var i;return go(this,e),(i=Co(this,wo(e).call(this,new Ya(-90,90,-180,180),new Wa(45,45),18,"image/png",r.key,256,256))).tileWidth=256,i.tileHeight=256,i.detailControl=1,i.wwd=t,i.processedTiles={},i.quadTree=new co.QuadTree(new co.Box(0,0,360,180)),i.pantherProps={features:n.features,fidColumnName:n.fidColumnName,hovered:bo({},n.hovered),selected:bo({},n.selected),key:r.key,layerKey:r.layerKey,onHover:n.onHover,onClick:n.onClick,pointHoverBuffer:n.pointHoverBuffer||Hn.DEFAULT_SIZE,style:n.style,wwd:t},i.pantherProps.features?i.addFeatures(i.pantherProps.features):i.loadData(n.url),i.onClick=i.onClick.bind(Lo(i),t),i.onMouseMove=i.onMouseMove.bind(Lo(i),t),t.addEventListener("click",i.onClick),t.addEventListener("mousemove",i.onMouseMove),i}return So(e,t),yo(e,[{key:"removeListeners",value:function(){this.pantherProps.wwd.removeEventListener("click",this.onClick),this.pantherProps.wwd.removeEventListener("mousemove",this.onMouseMove)}},{key:"loadData",value:function(t){var e=this;fetch(t).then((function(t){return t.json()})).then((function(t){if(t.features.length>1e6)throw new Error("Too many features.");e.addFeatures(t.features)}))}},{key:"addFeatures",value:function(t){var e=this;t.forEach((function(t){var n=t.geometry&&t.geometry.type,r=null,i=bo({},t.properties);if("Point"===n)i.centroid=t.geometry.coordinates,r=new co.Point(t.geometry.coordinates[0]+180,t.geometry.coordinates[1]+90,i);else if("MultiPoint"===n){var o=t.geometry.coordinates[0];i.centroid=o,r=new co.Point(o[0]+180,o[1]+90,i)}else if("MultiPolygon"===n){var a=Object(F.centroid)(t.geometry);i.centroid=a.geometry.coordinates,r=new co.Point(a.geometry.coordinates[0]+180,a.geometry.coordinates[1]+90,i)}r&&e.quadTree.insert(r)})),this.refresh()}},{key:"handleEvent",value:function(t,e){var n=e.touches&&e.touches[0]&&e.touches[0].clientX||e.clientX,r=e.touches&&e.touches[0]&&e.touches[0].clientY||e.clientY,i=e.touches&&e.touches[0]&&e.touches[0].pageX||e.pageX,o=e.touches&&e.touches[0]&&e.touches[0].pageY||e.pageY,a=t.pickTerrain(t.canvasCoordinates(n,r)).terrainObject(),s=this.getPointHoverBuffer(t);if(a){var u=a.position,l=this.quadTree.query(new co.Circle(u.longitude+180,u.latitude+90,s));if(l.length>1){var c=Object(F.point)([u.longitude,u.latitude]),h=l.map((function(t){return Object(F.point)([t.data.centroid[0],t.data.centroid[1]],bo({},t))})),f=Object(F.featureCollection)(h);l=[Object(F.nearestPoint)(c,f).properties]}return{points:l,x:i,y:o}}return{points:[],x:i,y:o}}},{key:"onMouseMove",value:function(t,e){this.onMouseMoveResult(this.handleEvent(t,e))}},{key:"onClick",value:function(t,e){this.onClickResult(this.handleEvent(t,e))}},{key:"onClickResult",value:function(t){var e=this;if(this.pantherProps.onClick){var n=t.points.map((function(t){return t.data[e.pantherProps.fidColumnName]}));n&&n.length&&this.pantherProps.onClick(this.pantherProps.layerKey,n)}}},{key:"onMouseMoveResult",value:function(t){var e=this;if(this.pantherProps.onHover){var n=lo()(t.points.map((function(t){return t.data[e.pantherProps.fidColumnName]})));this.pantherProps.onHover(this.pantherProps.layerKey,n,t.x,t.y,null,t.points,this.pantherProps.fidColumnName)}}},{key:"retrieveTileImage",value:function(t,e,n){this.processedTiles[e.imagePath]=!0;var r=e.sector,i=this.calculateExtendedSector(r,.2,.2),o=this.filterGeographically(i.sector);if(o){var a=e.imagePath,s=t.gpuResourceCache,u=this.createPointTile(o,{sector:r,width:this.tileWidth,height:this.tileHeight}).canvas(),l=this.createTexture(t,e,u);if(this.removeFromCurrentRetrievals(a),l&&(s.putResource(a,l,l.size),this.currentTilesInvalid=!0,this.absentResourceList.unmarkResourceAbsent(a),!n)){var c=document.createEvent("Event");c.initEvent(za,!0,!0),window.dispatchEvent(c)}}}},{key:"filterGeographically",value:function(t){var e=t.maxLongitude-t.minLongitude,n=t.maxLatitude-t.minLatitude;return this.quadTree.query(new co.Box(t.minLongitude+180,t.minLatitude+90,e,n))}},{key:"calculateExtendedSector",value:function(t,e,n){var r=(t.maxLatitude-t.minLatitude)*n,i=(t.maxLongitude-t.minLongitude)*e;return{sector:new Ya(t.minLatitude-r,t.maxLatitude+r,t.minLongitude-i,t.maxLongitude+i),extensionFactorHeight:n,extensionFactorWidth:e}}},{key:"createPointTile",value:function(t,e){return new Ka(t,e,this.pantherProps.style,this.pantherProps.fidColumnName,this.pantherProps.selected,this.pantherProps.hovered)}},{key:"updateHoveredKeys",value:function(t,e,n){var r=this;this.pantherProps.hovered.keys=t;var i=this.wwd.pickTerrain(this.wwd.canvasCoordinates(e,n)).terrainObject();if(i){var o=i.position.latitude,a=i.position.longitude;Qe()(this.currentTiles,(function(t){var e=t.sector,n=r.previousHoveredCoordinates,i=Math.abs(e.maxLatitude-e.minLatitude)/10,s=Math.abs(e.maxLongitude-e.minLongitude)/10,u=o<=e.maxLatitude+i&&o>=e.minLatitude-i&&a<=e.maxLongitude+s&&a>=e.minLongitude-s,l=n&&n.lat<=e.maxLatitude+i&&n.lat>=e.minLatitude-i&&n.lon<=e.maxLongitude+s&&n.lon>=e.minLongitude-s;(u||l)&&r.retrieveTileImage(r.wwd.drawContext,t,!0)})),this.previousHoveredCoordinates={lat:o,lon:a}}}},{key:"getPointHoverBuffer",value:function(t){var e=t.canvas.clientWidth;return 1e-5*(t.navigator.range/e*this.pantherProps.pointHoverBuffer)}}]),e}(oo.a.TiledImageLayer));function qa(t,e,n,r,i){if(!t.type)return null;switch(t.type){case"worldwind":switch(t.options.layer){case"bingAerial":return new oo.a.BingAerialLayer(null);case"bluemarble":return new oo.a.BMNGLayer;case"wikimedia":return new Va({attribution:"Wikimedia maps - Map data \xa9 OpenStreetMap contributors",sourceObject:{host:"maps.wikimedia.org",path:"osm-intl",protocol:"https"}});default:return null}case"wmts":return new Ba(t);case"wms":return new ja(t);case"vector":return function(t,e,n,r,i){var o=t.options&&t.options.url,a=(t.options&&t.options.features&&t.options.features.length,t.key||"Vector layer"),s=t.layerKey||a,u=bo({},t.options,{key:a,layerKey:s,onHover:n,onClick:r});return o||i?(u.pointHoverBuffer=Hn.DEFAULT_SIZE,new Ha(e,u,t)):new Oa(t,u)}(t,e,n,r,i);default:return null}}var Xa={getLayerByType:qa,updateVectorLayer:function(t,e,n,r){var i=null,o=t.layerKey,a=Pe()(e.layers,(function(t){return t.pantherProps&&t.pantherProps.layerKey&&t.pantherProps.layerKey===o}));return a?a.pantherProps.features===t.options.features?i=a:(a.removeListeners(),i=qa(t,e,n,r)):i=qa(t,e,n,r),i}};var Za={getChangedViewParams:function(t,e){var n={};return t.boxRange!==e.boxRange&&Math.abs(t.boxRange-e.boxRange)>1&&(n.boxRange=e.boxRange),t.heading!==e.heading&&(n.heading=e.heading),t.tilt!==e.tilt&&(n.tilt=e.tilt),t.roll!==e.roll&&(n.roll=e.roll),t.center.lat===e.center.lat&&t.center.lon===e.center.lon||(n.center={lat:e.center.lat,lon:e.center.lon}),n},getViewParamsFromWorldWindNavigator:function(t,e,n){var r={},i=t.lookAtLocation,o=t.range;return o&&(r.boxRange=Io.getBoxRangeFromWorldWindRange(o,e,n)),i&&(r.center={},i.latitude&&(r.center.lat=i.latitude),i.longitude&&(r.center.lon=i.longitude)),(t.heading||0===t.heading)&&(r.heading=t.heading),(t.tilt||0===t.tilt)&&(r.tilt=t.tilt),(t.roll||0===t.roll)&&(r.roll=t.roll),r},update:function(t,e,n,r){var i=t.navigator,o=function(t,e,n){var r=t.center,i=t.boxRange,o=To(t,["center","boxRange"]);i&&(o.range=Io.getWorldWindRangeFromBoxRange(i,e,n));r&&(o.lookAtLocation={},(r.lat||0===r.lat)&&(o.lookAtLocation.latitude=r.lat),(r.lon||0===r.lon)&&(o.lookAtLocation.longitude=r.lon));return o}(e,n,r),a=!1;o.range&&i.range!==o.range&&(i.range=o.range,a=!0),!o.tilt&&0!==o.tilt||i.tilt===o.tilt||(i.tilt=o.tilt,a=!0),!o.roll&&0!==o.roll||i.roll===o.roll||(i.roll=o.roll,a=!0),!o.heading&&0!==o.heading||i.heading===o.heading||(i.heading=o.heading,a=!0),o.lookAtLocation&&(o.lookAtLocation.latitude||0===o.lookAtLocation.latitude)&&i.lookAtLocation.latitude!==o.lookAtLocation.latitude&&(i.lookAtLocation.latitude=o.lookAtLocation.latitude,a=!0),o.lookAtLocation&&(o.lookAtLocation.longitude||0===o.lookAtLocation.longitude)&&i.lookAtLocation.longitude!==o.lookAtLocation.longitude&&(i.lookAtLocation.longitude=o.lookAtLocation.longitude,a=!0),a&&t.redraw()}},Ja=Ji.a.getContext("HoverContext"),Qa=oo.a.WorldWindow,$a=oo.a.ElevationModel,ts=function(t){function e(t){var n;return go(this,e),(n=Co(this,wo(e).call(this,t))).canvasId=Zn.uuid(),n.state={width:null,height:null},n.onClick=n.onClick.bind(Lo(n)),n.onLayerHover=n.onLayerHover.bind(Lo(n)),n.onWorldWindHover=n.onWorldWindHover.bind(Lo(n)),n.onLayerClick=n.onLayerClick.bind(Lo(n)),n.onMouseOut=n.onMouseOut.bind(Lo(n)),n.onResize=n.onResize.bind(Lo(n)),n.onZoomLevelsBased=n.onZoomLevelsBased.bind(Lo(n)),n.onZoomLevelsBasedTimeout=null,n.onZoomLevelsBasedStep=0,n}return So(e,t),yo(e,[{key:"componentDidMount",value:function(){var t,e,n;this.wwd=new Qa(this.canvasId,this.getElevationModel()),t=this.wwd.worldWindowController,e=this.props.viewLimits,n=this.props.levelsBased,t.applyLimits=function(){var r=t.wwd.navigator,i=t.wwd.viewport,o=i.width,a=i.height;if(!n){var s=e&&e.boxRangeRange&&e.boxRangeRange[0]||Re.f.minBoxRange,u=e&&e.boxRangeRange&&e.boxRangeRange[1]||Re.f.maxBoxRange,l=Io.getBoxRangeFromWorldWindRange(r.range,o,a);l<s?r.range=Io.getWorldWindRangeFromBoxRange(s,o,a):l>u&&(r.range=Io.getWorldWindRangeFromBoxRange(u,o,a))}if(r.lookAtLocation.latitude=Ra.clamp(r.lookAtLocation.latitude,-90,90),r.lookAtLocation.longitude=Ma.normalizedDegreesLongitude(r.lookAtLocation.longitude),r.heading=Ma.normalizedDegrees(r.heading),r.tilt=Ra.clamp(r.tilt,0,90),r.roll=Ma.normalizedDegrees(r.roll),t.wwd.globe.is2D()&&r.enable2DLimits){var c=2*Math.PI*t.wwd.globe.equatorialRadius;r.range=Ra.clamp(r.range,1,c),r.tilt=0}"function"===typeof t.onNavigatorChanged&&t.onNavigatorChanged(r)},t.onNavigatorChanged=null,this.wwd.worldWindowController.onNavigatorChanged=this.onNavigatorChange.bind(this),this.props.levelsBased&&(this.wwd.eventListeners.wheel.listeners=[this.onZoomLevelsBased.bind(this)]),new xn(this.wwd,["mousemove","mousedown","mouseup","mouseout","touchstart","touchmove","touchend"],this.onWorldWindHover,!0),this.updateNavigator(Re.f.defaultMapView),this.updateLayers()}},{key:"onZoomLevelsBased",value:function(t){var e=this;t.preventDefault(),t.wheelDelta&&(this.onZoomLevelsBasedStep+=t.wheelDelta,this.onZoomLevelsBasedTimeout&&clearTimeout(this.onZoomLevelsBasedTimeout),this.onZoomLevelsBasedTimeout=setTimeout((function(){var t=Wn.view.getZoomLevelFromBoxRange(e.props.view.boxRange,e.state.width,e.state.height);e.onZoomLevelsBasedStep>300?t+=3:e.onZoomLevelsBasedStep>150?t+=2:e.onZoomLevelsBasedStep>0?t++:e.onZoomLevelsBasedStep<-300?t-=3:e.onZoomLevelsBasedStep<-150?t-=2:t--;var n=Re.f.defaultLevelsRange,r=e.props.viewLimits&&e.props.viewLimits.boxRangeRange,i=r&&r[0]?Wn.view.getZoomLevelFromBoxRange(r[0],e.state.width,e.state.height):n[1],o=t;o>(n=[r&&r[1]?Wn.view.getZoomLevelFromBoxRange(r[1],e.state.width,e.state.height):n[0],i])[1]?o=n[1]:o<n[0]&&(o=n[0]);var a=Wn.view.getBoxRangeFromZoomLevel(o,e.state.width,e.state.height);e.props.onViewChange&&e.props.onViewChange({boxRange:a}),e.onZoomLevelsBasedTimeout=null,e.onZoomLevelsBasedStep=0}),50))}},{key:"componentDidUpdate",value:function(t){t&&(this.props.view&&t.view!==this.props.view&&this.updateNavigator(),t.layers===this.props.layers&&t.backgroundLayer===this.props.backgroundLayer||this.updateLayers(),this.context&&this.context.hoveredItems&&JSON.stringify(ro()(this.context.hoveredItems))!==this.previousHoveredItemsString&&this.updateHoveredFeatures())}},{key:"updateLayers",value:function(){var t=this,e=[];this.props.backgroundLayer&&(Be()(this.props.backgroundLayer)?this.props.backgroundLayer:[this.props.backgroundLayer]).forEach((function(n){e.push(Xa.getLayerByType(n,t.wwd))}));this.props.layers&&this.props.layers.forEach((function(n){var r=Xa.getLayerByType(n,t.wwd,t.onLayerHover,t.onLayerClick,t.props.pointAsMarker);e.push(r)})),this.invalidateLayers(this.wwd.layers),this.wwd.layers=e,this.wwd.redraw()}},{key:"invalidateLayers",value:function(t){t.forEach((function(t){t instanceof Ha&&t.removeListeners()}))}},{key:"updateHoveredFeatures",value:function(){var t=this;this.wwd.layers.forEach((function(e){e instanceof Ha?e.updateHoveredKeys(t.context.hoveredItems,t.context.x,t.context.y):e instanceof Oa&&e.updateHoveredFeatures(t.context.hoveredItems)})),this.wwd.redraw(),this.previousHoveredItemsString=JSON.stringify(ro()(this.context.hoveredItems))}},{key:"updateNavigator",value:function(t){var e=this.wwd.viewport,n=this.state.width||e.width,r=this.state.height||e.height,i=bo({},t||Za.getViewParamsFromWorldWindNavigator(this.wwd.navigator,n,r),{},this.props.view);Za.update(this.wwd,i,n,r)}},{key:"getElevationModel",value:function(){switch(this.props.elevationModel){case"default":return null;case null:var t=new $a;return t.removeAllCoverages(),t}}},{key:"onNavigatorChange",value:function(t){var e=this;if(t){var n=Za.getViewParamsFromWorldWindNavigator(t,this.state.width,this.state.height),r=Za.getChangedViewParams(bo({},Re.f.defaultMapView,{},this.props.view),n);this.props.onViewChange&&($n()(r)||(this.props.delayedWorldWindNavigatorSync?(this.changedNavigatorTimeout&&clearTimeout(this.changedNavigatorTimeout),this.changedNavigatorTimeout=setTimeout((function(){e.props.onViewChange(r)}),this.props.delayedWorldWindNavigatorSync)):this.props.onViewChange(r)))}}},{key:"onClick",value:function(){if(this.props.onClick){var t=this.wwd.viewport,e=t.width,n=t.height,r=Za.getViewParamsFromWorldWindNavigator(this.wwd.navigator,e,n);this.props.onClick(r)}}},{key:"onMouseOut",value:function(){this.context&&this.context.onHoverOut&&this.context.onHoverOut()}},{key:"onLayerHover",value:function(t,e,n,r,i,o,a){this.context&&this.context.onHover&&e.length&&this.context.onHover(e,{popup:{x:n,y:r,content:i,data:o,fidColumnName:a}})}},{key:"onLayerClick",value:function(t,e){this.props.onLayerClick&&this.props.onLayerClick(this.props.mapKey,t,e)}},{key:"onWorldWindHover",value:function(t,e){if(t.length&&1===t.length){var n=t[0].parentLayer.pantherProps,r=t[0].userObject.userProperties,o=[r[n.fidColumnName]];"mousedown"===e.type&&n.selectable?this.onLayerClick(n.layerKey,o):n.hoverable&&this.onLayerHover(n.layerKey,o,e.pageX,e.pageY,i.a.createElement("div",null,o.join(",")),r,n.fidColumnName)}else this.context&&this.context.onHoverOut&&this.context.onHoverOut()}},{key:"onResize",value:function(t,e){this.setState({width:t,height:e}),this.updateNavigator(),this.props.onResize&&this.props.onResize(t,e)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ki,{handleHeight:!0,handleWidth:!0,onResize:this.onResize}),i.a.createElement("div",{className:"ptr-map ptr-world-wind-map",onClick:this.onClick,onMouseOut:this.onMouseOut},i.a.createElement("canvas",{className:"ptr-world-wind-map-canvas",id:this.canvasId},"Your browser does not support HTML5 Canvas.")))}}]),e}(i.a.PureComponent);ts.contextType=Ja,ts.defaultProps={elevationModel:null},ts.propTypes={backgroundLayer:a.a.oneOfType([a.a.object,a.a.array]),layers:a.a.array,name:a.a.string,view:a.a.object,viewLimits:a.a.object,onClick:a.a.func,onLayerClick:a.a.func,onViewChange:a.a.func,elevationModel:a.a.string};var es=function(){return React.createElement("p",null,"render only on server")},ns=Object.freeze({__proto__:null,default:es}),rs=(fo()({loader:function(){return Re.e?Promise.resolve().then((function(){return ns})):Promise.resolve().then((function(){return Fo}))},render:function(t,e){var n=t.default;return i.a.createElement(n,e)},loading:function(t){return t.error?i.a.createElement("div",null,"Error!"):i.a.createElement("div",null,"Loading...")}}),function(){return null}),is=Object.freeze({__proto__:null,default:rs});fo()({loader:function(){return Re.e?Promise.resolve().then((function(){return is})):Promise.resolve().then((function(){return Wo}))},render:function(t,e){var n=t.default;return i.a.createElement(n,e)},loading:function(t){return t.error?i.a.createElement("span",null,"Error!"):i.a.createElement("span",null,"Loading...")}}),fo()({loader:function(){return Re.e?Promise.resolve().then((function(){return is})):Promise.resolve().then((function(){return Ca}))},render:function(t,e){var n=t.default;return i.a.createElement(n,e)},loading:function(t){return t.error?i.a.createElement("div",null,"Error!"):i.a.createElement("div",null,"Loading...")}}),fo()({loader:function(){return Re.e?Promise.resolve().then((function(){return is})):Promise.resolve().then((function(){return Yo}))},render:function(t,e){var n=t.default;return i.a.createElement(n,e)},loading:function(t){return t.error?i.a.createElement("span",null,"Error!"):i.a.createElement("span",null,"Loading...")}})},function(t,e,n){"use strict";function r(t,e){return t===e}function i(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var r=e.length,i=0;i<r;i++)if(!t(e[i],n[i]))return!1;return!0}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,o=null;return function(){return i(e,n,arguments)||(o=t.apply(null,arguments)),n=arguments,o}}function a(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every((function(t){return"function"===typeof t}))){var n=e.map((function(t){return typeof t})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return e}function s(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=0,s=r.pop(),u=a(r),l=t.apply(void 0,[function(){return o++,s.apply(null,arguments)}].concat(n)),c=t((function(){for(var t=[],e=u.length,n=0;n<e;n++)t.push(u[n].apply(null,arguments));return l.apply(null,t)}));return c.resultFunc=s,c.dependencies=u,c.recomputations=function(){return o},c.resetRecomputations=function(){return o=0},c}}n.r(e),n.d(e,"defaultMemoize",(function(){return o})),n.d(e,"createSelectorCreator",(function(){return s})),n.d(e,"createSelector",(function(){return u})),n.d(e,"createStructuredSelector",(function(){return l}));var u=s(o);function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;if("object"!==typeof t)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof t);var n=Object.keys(t);return e(n.map((function(e){return t[e]})),(function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce((function(t,e,r){return t[n[r]]=e,t}),{})}))}},function(t,e,n){var r=n(257),i=n(123),o=n(119),a=n(9),s=n(66),u=n(121),l=n(149),c=n(148),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||c(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(l(t))return!r(t).length;for(var n in t)if(h.call(t,n))return!1;return!0}},function(t,e,n){(function(t){t.exports=function(){"use strict";var e,n;function r(){return e.apply(null,arguments)}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function a(t){return void 0===t}function s(t){return"number"===typeof t||"[object Number]"===Object.prototype.toString.call(t)}function u(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function l(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h(t,e){for(var n in e)c(e,n)&&(t[n]=e[n]);return c(e,"toString")&&(t.toString=e.toString),c(e,"valueOf")&&(t.valueOf=e.valueOf),t}function f(t,e,n,r){return we(t,e,n,r,!0).utc()}function p(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function d(t){if(null==t._isValid){var e=p(t),r=n.call(e.parsedDateParts,(function(t){return null!=t})),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function g(t){var e=f(NaN);return null!=t?h(p(e),t):p(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var m=r.momentProperties=[];function y(t,e){var n,r,i;if(a(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),a(e._i)||(t._i=e._i),a(e._f)||(t._f=e._f),a(e._l)||(t._l=e._l),a(e._strict)||(t._strict=e._strict),a(e._tzm)||(t._tzm=e._tzm),a(e._isUTC)||(t._isUTC=e._isUTC),a(e._offset)||(t._offset=e._offset),a(e._pf)||(t._pf=p(e)),a(e._locale)||(t._locale=e._locale),m.length>0)for(n=0;n<m.length;n++)a(i=e[r=m[n]])||(t[r]=i);return t}var v=!1;function E(t){y(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,r.updateOffset(this),v=!1)}function _(t){return t instanceof E||null!=t&&null!=t._isAMomentObject}function b(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function S(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=b(e)),n}function w(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&S(t[r])!==S(e[r]))&&a++;return a+o}function x(t){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function T(t,e){var n=!0;return h((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"===typeof arguments[a]){for(var s in i+="\n["+a+"] ",arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}x(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var L,C={};function A(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),C[t]||(x(e),C[t]=!0)}function M(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function R(t,e){var n,r=h({},t);for(n in e)c(e,n)&&(o(t[n])&&o(e[n])?(r[n]={},h(r[n],t[n]),h(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)c(t,n)&&!c(e,n)&&o(t[n])&&(r[n]=h({},r[n]));return r}function O(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,L=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)c(t,e)&&n.push(e);return n};var P={};function I(t,e){var n=t.toLowerCase();P[n]=P[n+"s"]=P[e]=t}function N(t){return"string"===typeof t?P[t]||P[t.toLowerCase()]:void 0}function D(t){var e,n,r={};for(n in t)c(t,n)&&(e=N(n))&&(r[e]=t[n]);return r}var k={};function F(t,e){k[t]=e}function V(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var j=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},G={};function K(t,e,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),t&&(G[t]=i),e&&(G[e[0]]=function(){return V(i.apply(this,arguments),e[1],e[2])}),n&&(G[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function W(t,e){return t.isValid()?(e=z(e,t.localeData()),U[e]=U[e]||function(t){var e,n,r,i=t.match(j);for(e=0,n=i.length;e<n;e++)G[i[e]]?i[e]=G[i[e]]:i[e]=(r=i[e]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(e){var r,o="";for(r=0;r<n;r++)o+=M(i[r])?i[r].call(e,t):i[r];return o}}(e),U[e](t)):t.localeData().invalidDate()}function z(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(B.lastIndex=0;n>=0&&B.test(t);)t=t.replace(B,r),B.lastIndex=0,n-=1;return t}var Y=/\d/,H=/\d\d/,q=/\d{3}/,X=/\d{4}/,Z=/[+-]?\d{6}/,J=/\d\d?/,Q=/\d\d\d\d?/,$=/\d\d\d\d\d\d?/,tt=/\d{1,3}/,et=/\d{1,4}/,nt=/[+-]?\d{1,6}/,rt=/\d+/,it=/[+-]?\d+/,ot=/Z|[+-]\d\d:?\d\d/gi,at=/Z|[+-]\d\d(?::?\d\d)?/gi,st=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ut={};function lt(t,e,n){ut[t]=M(e)?e:function(t,r){return t&&n?n:e}}function ct(t,e){return c(ut,t)?ut[t](e._strict,e._locale):new RegExp(ht(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i}))))}function ht(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ft={};function pt(t,e){var n,r=e;for("string"===typeof t&&(t=[t]),s(e)&&(r=function(t,n){n[e]=S(t)}),n=0;n<t.length;n++)ft[t[n]]=r}function dt(t,e){pt(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}function gt(t,e,n){null!=e&&c(ft,t)&&ft[t](e,n._a,n,t)}function mt(t){return yt(t)?366:365}function yt(t){return t%4===0&&t%100!==0||t%400===0}K("Y",0,0,(function(){var t=this.year();return t<=9999?""+t:"+"+t})),K(0,["YY",2],0,(function(){return this.year()%100})),K(0,["YYYY",4],0,"year"),K(0,["YYYYY",5],0,"year"),K(0,["YYYYYY",6,!0],0,"year"),I("year","y"),F("year",1),lt("Y",it),lt("YY",J,H),lt("YYYY",et,X),lt("YYYYY",nt,Z),lt("YYYYYY",nt,Z),pt(["YYYYY","YYYYYY"],0),pt("YYYY",(function(t,e){e[0]=2===t.length?r.parseTwoDigitYear(t):S(t)})),pt("YY",(function(t,e){e[0]=r.parseTwoDigitYear(t)})),pt("Y",(function(t,e){e[0]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return S(t)+(S(t)>68?1900:2e3)};var vt,Et=_t("FullYear",!0);function _t(t,e){return function(n){return null!=n?(St(this,t,n),r.updateOffset(this,e),this):bt(this,t)}}function bt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function St(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&yt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),wt(n,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function wt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n,r=(e%(n=12)+n)%n;return t+=(e-r)/12,1===r?yt(t)?29:28:31-r%7%2}vt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},K("M",["MM",2],"Mo",(function(){return this.month()+1})),K("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),K("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),I("month","M"),F("month",8),lt("M",J),lt("MM",J,H),lt("MMM",(function(t,e){return e.monthsShortRegex(t)})),lt("MMMM",(function(t,e){return e.monthsRegex(t)})),pt(["M","MM"],(function(t,e){e[1]=S(t)-1})),pt(["MMM","MMMM"],(function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[1]=i:p(n).invalidMonth=t}));var xt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Tt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Lt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ct(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=f([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=vt.call(this._shortMonthsParse,a))?i:null:-1!==(i=vt.call(this._longMonthsParse,a))?i:null:"MMM"===e?-1!==(i=vt.call(this._shortMonthsParse,a))||-1!==(i=vt.call(this._longMonthsParse,a))?i:null:-1!==(i=vt.call(this._longMonthsParse,a))||-1!==(i=vt.call(this._shortMonthsParse,a))?i:null}function At(t,e){var n;if(!t.isValid())return t;if("string"===typeof e)if(/^\d+$/.test(e))e=S(e);else if(!s(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),wt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Mt(t){return null!=t?(At(this,t),r.updateOffset(this,!0),this):bt(this,"Month")}var Rt=st,Ot=st;function Pt(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],o=[];for(e=0;e<12;e++)n=f([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),o.sort(t),e=0;e<12;e++)r[e]=ht(r[e]),i[e]=ht(i[e]);for(e=0;e<24;e++)o[e]=ht(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function It(t,e,n,r,i,o,a){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,r,i,o,a),s}function Nt(t){var e;if(t<100&&t>=0){var n=Array.prototype.slice.call(arguments);n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function Dt(t,e,n){var r=7+e-n;return-(7+Nt(t,0,r).getUTCDay()-e)%7+r-1}function kt(t,e,n,r,i){var o,a,s=1+7*(e-1)+(7+n-r)%7+Dt(t,r,i);return s<=0?a=mt(o=t-1)+s:s>mt(t)?(o=t+1,a=s-mt(t)):(o=t,a=s),{year:o,dayOfYear:a}}function Ft(t,e,n){var r,i,o=Dt(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?r=a+Vt(i=t.year()-1,e,n):a>Vt(t.year(),e,n)?(r=a-Vt(t.year(),e,n),i=t.year()+1):(i=t.year(),r=a),{week:r,year:i}}function Vt(t,e,n){var r=Dt(t,e,n),i=Dt(t+1,e,n);return(mt(t)-r+i)/7}function jt(t,e){return t.slice(e,7).concat(t.slice(0,e))}K("w",["ww",2],"wo","week"),K("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),F("week",5),F("isoWeek",5),lt("w",J),lt("ww",J,H),lt("W",J),lt("WW",J,H),dt(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=S(t)})),K("d",0,"do","day"),K("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),K("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),K("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),K("e",0,0,"weekday"),K("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),lt("d",J),lt("e",J),lt("E",J),lt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),lt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),lt("dddd",(function(t,e){return e.weekdaysRegex(t)})),dt(["dd","ddd","dddd"],(function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:p(n).invalidWeekday=t})),dt(["d","e","E"],(function(t,e,n,r){e[r]=S(t)}));var Bt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ut="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Gt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Kt(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=f([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=vt.call(this._weekdaysParse,a))?i:null:"ddd"===e?-1!==(i=vt.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=vt.call(this._minWeekdaysParse,a))?i:null:"dddd"===e?-1!==(i=vt.call(this._weekdaysParse,a))||-1!==(i=vt.call(this._shortWeekdaysParse,a))||-1!==(i=vt.call(this._minWeekdaysParse,a))?i:null:"ddd"===e?-1!==(i=vt.call(this._shortWeekdaysParse,a))||-1!==(i=vt.call(this._weekdaysParse,a))||-1!==(i=vt.call(this._minWeekdaysParse,a))?i:null:-1!==(i=vt.call(this._minWeekdaysParse,a))||-1!==(i=vt.call(this._weekdaysParse,a))||-1!==(i=vt.call(this._shortWeekdaysParse,a))?i:null}var Wt=st,zt=st,Yt=st;function Ht(){function t(t,e){return e.length-t.length}var e,n,r,i,o,a=[],s=[],u=[],l=[];for(e=0;e<7;e++)n=f([2e3,1]).day(e),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),u.push(o),l.push(r),l.push(i),l.push(o);for(a.sort(t),s.sort(t),u.sort(t),l.sort(t),e=0;e<7;e++)s[e]=ht(s[e]),u[e]=ht(u[e]),l[e]=ht(l[e]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function qt(){return this.hours()%12||12}function Xt(t,e){K(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function Zt(t,e){return e._meridiemParse}K("H",["HH",2],0,"hour"),K("h",["hh",2],0,qt),K("k",["kk",2],0,(function(){return this.hours()||24})),K("hmm",0,0,(function(){return""+qt.apply(this)+V(this.minutes(),2)})),K("hmmss",0,0,(function(){return""+qt.apply(this)+V(this.minutes(),2)+V(this.seconds(),2)})),K("Hmm",0,0,(function(){return""+this.hours()+V(this.minutes(),2)})),K("Hmmss",0,0,(function(){return""+this.hours()+V(this.minutes(),2)+V(this.seconds(),2)})),Xt("a",!0),Xt("A",!1),I("hour","h"),F("hour",13),lt("a",Zt),lt("A",Zt),lt("H",J),lt("h",J),lt("k",J),lt("HH",J,H),lt("hh",J,H),lt("kk",J,H),lt("hmm",Q),lt("hmmss",$),lt("Hmm",Q),lt("Hmmss",$),pt(["H","HH"],3),pt(["k","kk"],(function(t,e,n){var r=S(t);e[3]=24===r?0:r})),pt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),pt(["h","hh"],(function(t,e,n){e[3]=S(t),p(n).bigHour=!0})),pt("hmm",(function(t,e,n){var r=t.length-2;e[3]=S(t.substr(0,r)),e[4]=S(t.substr(r)),p(n).bigHour=!0})),pt("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=S(t.substr(0,r)),e[4]=S(t.substr(r,2)),e[5]=S(t.substr(i)),p(n).bigHour=!0})),pt("Hmm",(function(t,e,n){var r=t.length-2;e[3]=S(t.substr(0,r)),e[4]=S(t.substr(r))})),pt("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=S(t.substr(0,r)),e[4]=S(t.substr(r,2)),e[5]=S(t.substr(i))}));var Jt,Qt=_t("Hours",!0),$t={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Tt,monthsShort:Lt,week:{dow:0,doy:6},weekdays:Bt,weekdaysMin:Gt,weekdaysShort:Ut,meridiemParse:/[ap]\.?m?\.?/i},te={},ee={};function ne(t){return t?t.toLowerCase().replace("_","-"):t}function re(e){var n=null;if(!te[e]&&"undefined"!==typeof t&&t&&t.exports)try{n=Jt._abbr,!function(){var t=new Error("Cannot find module 'undefined'");throw t.code="MODULE_NOT_FOUND",t}(),ie(n)}catch(r){}return te[e]}function ie(t,e){var n;return t&&((n=a(e)?ae(t):oe(t,e))?Jt=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Jt._abbr}function oe(t,e){if(null!==e){var n,r=$t;if(e.abbr=t,null!=te[t])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=te[t]._config;else if(null!=e.parentLocale)if(null!=te[e.parentLocale])r=te[e.parentLocale]._config;else{if(null==(n=re(e.parentLocale)))return ee[e.parentLocale]||(ee[e.parentLocale]=[]),ee[e.parentLocale].push({name:t,config:e}),null;r=n._config}return te[t]=new O(R(r,e)),ee[t]&&ee[t].forEach((function(t){oe(t.name,t.config)})),ie(t),te[t]}return delete te[t],null}function ae(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Jt;if(!i(t)){if(e=re(t))return e;t=[t]}return function(t){for(var e,n,r,i,o=0;o<t.length;){for(e=(i=ne(t[o]).split("-")).length,n=(n=ne(t[o+1]))?n.split("-"):null;e>0;){if(r=re(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&w(i,n,!0)>=e-1)break;e--}o++}return Jt}(t)}function se(t){var e,n=t._a;return n&&-2===p(t).overflow&&(e=n[1]<0||n[1]>11?1:n[2]<1||n[2]>wt(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,p(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),p(t)._overflowWeeks&&-1===e&&(e=7),p(t)._overflowWeekday&&-1===e&&(e=8),p(t).overflow=e),t}function ue(t,e,n){return null!=t?t:null!=e?e:n}function le(t){var e,n,i,o,a,s=[];if(!t._d){for(i=function(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,r,i,o,a,s,u;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)o=1,a=4,n=ue(e.GG,t._a[0],Ft(xe(),1,4).year),r=ue(e.W,1),((i=ue(e.E,1))<1||i>7)&&(u=!0);else{o=t._locale._week.dow,a=t._locale._week.doy;var l=Ft(xe(),o,a);n=ue(e.gg,t._a[0],l.year),r=ue(e.w,l.week),null!=e.d?((i=e.d)<0||i>6)&&(u=!0):null!=e.e?(i=e.e+o,(e.e<0||e.e>6)&&(u=!0)):i=o}r<1||r>Vt(n,o,a)?p(t)._overflowWeeks=!0:null!=u?p(t)._overflowWeekday=!0:(s=kt(n,r,i,o,a),t._a[0]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(a=ue(t._a[0],i[0]),(t._dayOfYear>mt(a)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),n=Nt(a,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?Nt:It).apply(null,s),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&"undefined"!==typeof t._w.d&&t._w.d!==o&&(p(t).weekdayMismatch=!0)}}var ce=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,he=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,fe=/Z|[+-]\d\d(?::?\d\d)?/,pe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],de=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ge=/^\/?Date\((\-?\d+)/i;function me(t){var e,n,r,i,o,a,s=t._i,u=ce.exec(s)||he.exec(s);if(u){for(p(t).iso=!0,e=0,n=pe.length;e<n;e++)if(pe[e][1].exec(u[1])){i=pe[e][0],r=!1!==pe[e][2];break}if(null==i)return void(t._isValid=!1);if(u[3]){for(e=0,n=de.length;e<n;e++)if(de[e][1].exec(u[3])){o=(u[2]||" ")+de[e][0];break}if(null==o)return void(t._isValid=!1)}if(!r&&null!=o)return void(t._isValid=!1);if(u[4]){if(!fe.exec(u[4]))return void(t._isValid=!1);a="Z"}t._f=i+(o||"")+(a||""),be(t)}else t._isValid=!1}var ye=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function ve(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}var Ee={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function _e(t){var e=ye.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(e){var n=function(t,e,n,r,i,o){var a=[ve(t),Lt.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&a.push(parseInt(o,10)),a}(e[4],e[3],e[2],e[5],e[6],e[7]);if(!function(t,e,n){return!t||Ut.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(p(n).weekdayMismatch=!0,n._isValid=!1,!1)}(e[1],n,t))return;t._a=n,t._tzm=function(t,e,n){if(t)return Ee[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(e[8],e[9],e[10]),t._d=Nt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0}else t._isValid=!1}function be(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],p(t).empty=!0;var e,n,i,o,a,s=""+t._i,u=s.length,l=0;for(i=z(t._f,t._locale).match(j)||[],e=0;e<i.length;e++)o=i[e],(n=(s.match(ct(o,t))||[])[0])&&((a=s.substr(0,s.indexOf(n))).length>0&&p(t).unusedInput.push(a),s=s.slice(s.indexOf(n)+n.length),l+=n.length),G[o]?(n?p(t).empty=!1:p(t).unusedTokens.push(o),gt(o,n,t)):t._strict&&!n&&p(t).unusedTokens.push(o);p(t).charsLeftOver=u-l,s.length>0&&p(t).unusedInput.push(s),t._a[3]<=12&&!0===p(t).bigHour&&t._a[3]>0&&(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[3]=function(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),le(t),se(t)}else _e(t);else me(t)}function Se(t){var e=t._i,n=t._f;return t._locale=t._locale||ae(t._l),null===e||void 0===n&&""===e?g({nullInput:!0}):("string"===typeof e&&(t._i=e=t._locale.preparse(e)),_(e)?new E(se(e)):(u(e)?t._d=e:i(n)?function(t){var e,n,r,i,o;if(0===t._f.length)return p(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)o=0,e=y({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],be(e),d(e)&&(o+=p(e).charsLeftOver,o+=10*p(e).unusedTokens.length,p(e).score=o,(null==r||o<r)&&(r=o,n=e));h(t,n||e)}(t):n?be(t):function(t){var e=t._i;a(e)?t._d=new Date(r.now()):u(e)?t._d=new Date(e.valueOf()):"string"===typeof e?function(t){var e=ge.exec(t._i);null===e?(me(t),!1===t._isValid&&(delete t._isValid,_e(t),!1===t._isValid&&(delete t._isValid,r.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):i(e)?(t._a=l(e.slice(0),(function(t){return parseInt(t,10)})),le(t)):o(e)?function(t){if(!t._d){var e=D(t._i);t._a=l([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),le(t)}}(t):s(e)?t._d=new Date(e):r.createFromInputFallback(t)}(t),d(t)||(t._d=null),t))}function we(t,e,n,r,a){var s={};return!0!==n&&!1!==n||(r=n,n=void 0),(o(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||i(t)&&0===t.length)&&(t=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=a,s._l=n,s._i=t,s._f=e,s._strict=r,function(t){var e=new E(se(Se(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}(s)}function xe(t,e,n,r){return we(t,e,n,r,!1)}r.createFromInputFallback=T("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Te=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=xe.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:g()})),Le=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=xe.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:g()}));function Ce(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return xe();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}var Ae=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Me(t){var e=D(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||e.isoWeek||0,a=e.day||0,s=e.hour||0,u=e.minute||0,l=e.second||0,c=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===vt.call(Ae,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,r=0;r<Ae.length;++r)if(t[Ae[r]]){if(n)return!1;parseFloat(t[Ae[r]])!==S(t[Ae[r]])&&(n=!0)}return!0}(e),this._milliseconds=+c+1e3*l+6e4*u+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=ae(),this._bubble()}function Re(t){return t instanceof Me}function Oe(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Pe(t,e){K(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+V(~~(t/60),2)+e+V(~~t%60,2)}))}Pe("Z",":"),Pe("ZZ",""),lt("Z",at),lt("ZZ",at),pt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=Ne(at,t)}));var Ie=/([\+\-]|\d\d)/gi;function Ne(t,e){var n=(e||"").match(t);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(Ie)||["-",0,0],i=60*r[1]+S(r[2]);return 0===i?0:"+"===r[0]?i:-i}function De(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(_(t)||u(t)?t.valueOf():xe(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):xe(t).local()}function ke(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Fe(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Ve=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,je=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Be(t,e){var n,r,i,o=t,a=null;return Re(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:s(t)?(o={},e?o[e]=t:o.milliseconds=t):(a=Ve.exec(t))?(n="-"===a[1]?-1:1,o={y:0,d:S(a[2])*n,h:S(a[3])*n,m:S(a[4])*n,s:S(a[5])*n,ms:S(Oe(1e3*a[6]))*n}):(a=je.exec(t))?(n="-"===a[1]?-1:1,o={y:Ue(a[2],n),M:Ue(a[3],n),w:Ue(a[4],n),d:Ue(a[5],n),h:Ue(a[6],n),m:Ue(a[7],n),s:Ue(a[8],n)}):null==o?o={}:"object"===typeof o&&("from"in o||"to"in o)&&(i=function(t,e){var n;return t.isValid()&&e.isValid()?(e=De(e,t),t.isBefore(e)?n=Ge(t,e):((n=Ge(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(xe(o.from),xe(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),r=new Me(o),Re(t)&&c(t,"_locale")&&(r._locale=t._locale),r}function Ue(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ge(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ke(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(A(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),We(this,Be(n="string"===typeof n?+n:n,r),t),this}}function We(t,e,n,i){var o=e._milliseconds,a=Oe(e._days),s=Oe(e._months);t.isValid()&&(i=null==i||i,s&&At(t,bt(t,"Month")+s*n),a&&St(t,"Date",bt(t,"Date")+a*n),o&&t._d.setTime(t._d.valueOf()+o*n),i&&r.updateOffset(t,a||s))}Be.fn=Me.prototype,Be.invalid=function(){return Be(NaN)};var ze=Ke(1,"add"),Ye=Ke(-1,"subtract");function He(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function qe(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ae(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xe=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function Ze(){return this._locale}function Je(t,e){return(t%e+e)%e}function Qe(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-126227808e5:new Date(t,e,n).valueOf()}function $e(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-126227808e5:Date.UTC(t,e,n)}function tn(t,e){K(0,[t,t.length],0,e)}function en(t,e,n,r,i){var o;return null==t?Ft(this,r,i).year:(e>(o=Vt(t,r,i))&&(e=o),nn.call(this,t,e,n,r,i))}function nn(t,e,n,r,i){var o=kt(t,e,n,r,i),a=Nt(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}K(0,["gg",2],0,(function(){return this.weekYear()%100})),K(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),tn("gggg","weekYear"),tn("ggggg","weekYear"),tn("GGGG","isoWeekYear"),tn("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),lt("G",it),lt("g",it),lt("GG",J,H),lt("gg",J,H),lt("GGGG",et,X),lt("gggg",et,X),lt("GGGGG",nt,Z),lt("ggggg",nt,Z),dt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=S(t)})),dt(["gg","GG"],(function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)})),K("Q",0,"Qo","quarter"),I("quarter","Q"),F("quarter",7),lt("Q",Y),pt("Q",(function(t,e){e[1]=3*(S(t)-1)})),K("D",["DD",2],"Do","date"),I("date","D"),F("date",9),lt("D",J),lt("DD",J,H),lt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),pt(["D","DD"],2),pt("Do",(function(t,e){e[2]=S(t.match(J)[0])}));var rn=_t("Date",!0);K("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),F("dayOfYear",4),lt("DDD",tt),lt("DDDD",q),pt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=S(t)})),K("m",["mm",2],0,"minute"),I("minute","m"),F("minute",14),lt("m",J),lt("mm",J,H),pt(["m","mm"],4);var on=_t("Minutes",!1);K("s",["ss",2],0,"second"),I("second","s"),F("second",15),lt("s",J),lt("ss",J,H),pt(["s","ss"],5);var an,sn=_t("Seconds",!1);for(K("S",0,0,(function(){return~~(this.millisecond()/100)})),K(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),K(0,["SSS",3],0,"millisecond"),K(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),K(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),K(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),K(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),K(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),K(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),I("millisecond","ms"),F("millisecond",16),lt("S",tt,Y),lt("SS",tt,H),lt("SSS",tt,q),an="SSSS";an.length<=9;an+="S")lt(an,rt);function un(t,e){e[6]=S(1e3*("0."+t))}for(an="S";an.length<=9;an+="S")pt(an,un);var ln=_t("Milliseconds",!1);K("z",0,0,"zoneAbbr"),K("zz",0,0,"zoneName");var cn=E.prototype;function hn(t){return t}cn.add=ze,cn.calendar=function(t,e){var n=t||xe(),i=De(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",a=e&&(M(e[o])?e[o].call(this,n):e[o]);return this.format(a||this.localeData().calendar(o,this,xe(n)))},cn.clone=function(){return new E(this)},cn.diff=function(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=De(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=N(e)){case"year":o=He(this,r)/12;break;case"month":o=He(this,r);break;case"quarter":o=He(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:b(o)},cn.endOf=function(t){var e;if(void 0===(t=N(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?$e:Qe;switch(t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-Je(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-Je(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-Je(e,1e3)-1}return this._d.setTime(e),r.updateOffset(this,!0),this},cn.format=function(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=W(this,t);return this.localeData().postformat(e)},cn.from=function(t,e){return this.isValid()&&(_(t)&&t.isValid()||xe(t).isValid())?Be({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},cn.fromNow=function(t){return this.from(xe(),t)},cn.to=function(t,e){return this.isValid()&&(_(t)&&t.isValid()||xe(t).isValid())?Be({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},cn.toNow=function(t){return this.to(xe(),t)},cn.get=function(t){return M(this[t=N(t)])?this[t]():this},cn.invalidAt=function(){return p(this).overflow},cn.isAfter=function(t,e){var n=_(t)?t:xe(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=N(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},cn.isBefore=function(t,e){var n=_(t)?t:xe(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=N(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},cn.isBetween=function(t,e,n,r){var i=_(t)?t:xe(t),o=_(e)?e:xe(e);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))},cn.isSame=function(t,e){var n,r=_(t)?t:xe(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=N(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},cn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},cn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},cn.isValid=function(){return d(this)},cn.lang=Xe,cn.locale=qe,cn.localeData=Ze,cn.max=Le,cn.min=Te,cn.parsingFlags=function(){return h({},p(this))},cn.set=function(t,e){if("object"===typeof t)for(var n=function(t){var e=[];for(var n in t)e.push({unit:n,priority:k[n]});return e.sort((function(t,e){return t.priority-e.priority})),e}(t=D(t)),r=0;r<n.length;r++)this[n[r].unit](t[n[r].unit]);else if(M(this[t=N(t)]))return this[t](e);return this},cn.startOf=function(t){var e;if(void 0===(t=N(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?$e:Qe;switch(t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Je(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=Je(e,6e4);break;case"second":e=this._d.valueOf(),e-=Je(e,1e3)}return this._d.setTime(e),r.updateOffset(this,!0),this},cn.subtract=Ye,cn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},cn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},cn.toDate=function(){return new Date(this.valueOf())},cn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?W(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):M(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",W(n,"Z")):W(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},cn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=e+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)},cn.toJSON=function(){return this.isValid()?this.toISOString():null},cn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},cn.unix=function(){return Math.floor(this.valueOf()/1e3)},cn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},cn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},cn.year=Et,cn.isLeapYear=function(){return yt(this.year())},cn.weekYear=function(t){return en.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},cn.isoWeekYear=function(t){return en.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},cn.quarter=cn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},cn.month=Mt,cn.daysInMonth=function(){return wt(this.year(),this.month())},cn.week=cn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},cn.isoWeek=cn.isoWeeks=function(t){var e=Ft(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},cn.weeksInYear=function(){var t=this.localeData()._week;return Vt(this.year(),t.dow,t.doy)},cn.isoWeeksInYear=function(){return Vt(this.year(),1,4)},cn.date=rn,cn.day=cn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!==typeof t?t:isNaN(t)?"number"===typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},cn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},cn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"===typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},cn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},cn.hour=cn.hours=Qt,cn.minute=cn.minutes=on,cn.second=cn.seconds=sn,cn.millisecond=cn.milliseconds=ln,cn.utcOffset=function(t,e,n){var i,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"===typeof t){if(null===(t=Ne(at,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=ke(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!e||this._changeInProgress?We(this,Be(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:ke(this)},cn.utc=function(t){return this.utcOffset(0,t)},cn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(ke(this),"m")),this},cn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var t=Ne(ot,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},cn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?xe(t).utcOffset():0,(this.utcOffset()-t)%60===0)},cn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},cn.isLocal=function(){return!!this.isValid()&&!this._isUTC},cn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},cn.isUtc=Fe,cn.isUTC=Fe,cn.zoneAbbr=function(){return this._isUTC?"UTC":""},cn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},cn.dates=T("dates accessor is deprecated. Use date instead.",rn),cn.months=T("months accessor is deprecated. Use month instead",Mt),cn.years=T("years accessor is deprecated. Use year instead",Et),cn.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!==typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),cn.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var t={};if(y(t,this),(t=Se(t))._a){var e=t._isUTC?f(t._a):xe(t._a);this._isDSTShifted=this.isValid()&&w(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var fn=O.prototype;function pn(t,e,n,r){var i=ae(),o=f().set(r,e);return i[n](o,t)}function dn(t,e,n){if(s(t)&&(e=t,t=void 0),t=t||"",null!=e)return pn(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=pn(t,r,n,"month");return i}function gn(t,e,n,r){"boolean"===typeof t?(s(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,s(e)&&(n=e,e=void 0),e=e||"");var i,o=ae(),a=t?o._week.dow:0;if(null!=n)return pn(e,(n+a)%7,r,"day");var u=[];for(i=0;i<7;i++)u[i]=pn(e,(i+a)%7,r,"day");return u}fn.calendar=function(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return M(r)?r.call(e,n):r},fn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,(function(t){return t.slice(1)})),this._longDateFormat[t])},fn.invalidDate=function(){return this._invalidDate},fn.ordinal=function(t){return this._ordinal.replace("%d",t)},fn.preparse=hn,fn.postformat=hn,fn.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return M(i)?i(t,e,n,r):i.replace(/%d/i,t)},fn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return M(n)?n(e):n.replace(/%s/i,e)},fn.set=function(t){var e,n;for(n in t)M(e=t[n])?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},fn.months=function(t,e){return t?i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||xt).test(e)?"format":"standalone"][t.month()]:i(this._months)?this._months:this._months.standalone},fn.monthsShort=function(t,e){return t?i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[xt.test(e)?"format":"standalone"][t.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},fn.monthsParse=function(t,e,n){var r,i,o;if(this._monthsParseExact)return Ct.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},fn.monthsRegex=function(t){return this._monthsParseExact?(c(this,"_monthsRegex")||Pt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Ot),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},fn.monthsShortRegex=function(t){return this._monthsParseExact?(c(this,"_monthsRegex")||Pt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=Rt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},fn.week=function(t){return Ft(t,this._week.dow,this._week.doy).week},fn.firstDayOfYear=function(){return this._week.doy},fn.firstDayOfWeek=function(){return this._week.dow},fn.weekdays=function(t,e){var n=i(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?jt(n,this._week.dow):t?n[t.day()]:n},fn.weekdaysMin=function(t){return!0===t?jt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},fn.weekdaysShort=function(t){return!0===t?jt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},fn.weekdaysParse=function(t,e,n){var r,i,o;if(this._weekdaysParseExact)return Kt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=f([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}},fn.weekdaysRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ht.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Wt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},fn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ht.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=zt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},fn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ht.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Yt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},fn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},fn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},ie("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===S(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=T("moment.lang is deprecated. Use moment.locale instead.",ie),r.langData=T("moment.langData is deprecated. Use moment.localeData instead.",ae);var mn=Math.abs;function yn(t,e,n,r){var i=Be(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function vn(t){return t<0?Math.floor(t):Math.ceil(t)}function En(t){return 4800*t/146097}function _n(t){return 146097*t/4800}function bn(t){return function(){return this.as(t)}}var Sn=bn("ms"),wn=bn("s"),xn=bn("m"),Tn=bn("h"),Ln=bn("d"),Cn=bn("w"),An=bn("M"),Mn=bn("Q"),Rn=bn("y");function On(t){return function(){return this.isValid()?this._data[t]:NaN}}var Pn=On("milliseconds"),In=On("seconds"),Nn=On("minutes"),Dn=On("hours"),kn=On("days"),Fn=On("months"),Vn=On("years"),jn=Math.round,Bn={ss:44,s:45,m:45,h:22,d:26,M:11};function Un(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}var Gn=Math.abs;function Kn(t){return(t>0)-(t<0)||+t}function Wn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n=Gn(this._milliseconds)/1e3,r=Gn(this._days),i=Gn(this._months);t=b(n/60),e=b(t/60),n%=60,t%=60;var o=b(i/12),a=i%=12,s=r,u=e,l=t,c=n?n.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var f=h<0?"-":"",p=Kn(this._months)!==Kn(h)?"-":"",d=Kn(this._days)!==Kn(h)?"-":"",g=Kn(this._milliseconds)!==Kn(h)?"-":"";return f+"P"+(o?p+o+"Y":"")+(a?p+a+"M":"")+(s?d+s+"D":"")+(u||l||c?"T":"")+(u?g+u+"H":"")+(l?g+l+"M":"")+(c?g+c+"S":"")}var zn=Me.prototype;return zn.isValid=function(){return this._isValid},zn.abs=function(){var t=this._data;return this._milliseconds=mn(this._milliseconds),this._days=mn(this._days),this._months=mn(this._months),t.milliseconds=mn(t.milliseconds),t.seconds=mn(t.seconds),t.minutes=mn(t.minutes),t.hours=mn(t.hours),t.months=mn(t.months),t.years=mn(t.years),this},zn.add=function(t,e){return yn(this,t,e,1)},zn.subtract=function(t,e){return yn(this,t,e,-1)},zn.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=N(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+En(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(_n(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},zn.asMilliseconds=Sn,zn.asSeconds=wn,zn.asMinutes=xn,zn.asHours=Tn,zn.asDays=Ln,zn.asWeeks=Cn,zn.asMonths=An,zn.asQuarters=Mn,zn.asYears=Rn,zn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*S(this._months/12):NaN},zn._bubble=function(){var t,e,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*vn(_n(s)+a),a=0,s=0),u.milliseconds=o%1e3,t=b(o/1e3),u.seconds=t%60,e=b(t/60),u.minutes=e%60,n=b(e/60),u.hours=n%24,a+=b(n/24),i=b(En(a)),s+=i,a-=vn(_n(i)),r=b(s/12),s%=12,u.days=a,u.months=s,u.years=r,this},zn.clone=function(){return Be(this)},zn.get=function(t){return t=N(t),this.isValid()?this[t+"s"]():NaN},zn.milliseconds=Pn,zn.seconds=In,zn.minutes=Nn,zn.hours=Dn,zn.days=kn,zn.weeks=function(){return b(this.days()/7)},zn.months=Fn,zn.years=Vn,zn.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),n=function(t,e,n){var r=Be(t).abs(),i=jn(r.as("s")),o=jn(r.as("m")),a=jn(r.as("h")),s=jn(r.as("d")),u=jn(r.as("M")),l=jn(r.as("y")),c=i<=Bn.ss&&["s",i]||i<Bn.s&&["ss",i]||o<=1&&["m"]||o<Bn.m&&["mm",o]||a<=1&&["h"]||a<Bn.h&&["hh",a]||s<=1&&["d"]||s<Bn.d&&["dd",s]||u<=1&&["M"]||u<Bn.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=e,c[3]=+t>0,c[4]=n,Un.apply(null,c)}(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)},zn.toISOString=Wn,zn.toString=Wn,zn.toJSON=Wn,zn.locale=qe,zn.localeData=Ze,zn.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Wn),zn.lang=Xe,K("X",0,0,"unix"),K("x",0,0,"valueOf"),lt("x",it),lt("X",/[+-]?\d+(\.\d{1,3})?/),pt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))})),pt("x",(function(t,e,n){n._d=new Date(S(t))})),r.version="2.24.0",e=xe,r.fn=cn,r.min=function(){var t=[].slice.call(arguments,0);return Ce("isBefore",t)},r.max=function(){var t=[].slice.call(arguments,0);return Ce("isAfter",t)},r.now=function(){return Date.now?Date.now():+new Date},r.utc=f,r.unix=function(t){return xe(1e3*t)},r.months=function(t,e){return dn(t,e,"months")},r.isDate=u,r.locale=ie,r.invalid=g,r.duration=Be,r.isMoment=_,r.weekdays=function(t,e,n){return gn(t,e,n,"weekdays")},r.parseZone=function(){return xe.apply(null,arguments).parseZone()},r.localeData=ae,r.isDuration=Re,r.monthsShort=function(t,e){return dn(t,e,"monthsShort")},r.weekdaysMin=function(t,e,n){return gn(t,e,n,"weekdaysMin")},r.defineLocale=oe,r.updateLocale=function(t,e){if(null!=e){var n,r,i=$t;null!=(r=re(t))&&(i=r._config),e=R(i,e),(n=new O(e)).parentLocale=te[t],te[t]=n,ie(t)}else null!=te[t]&&(null!=te[t].parentLocale?te[t]=te[t].parentLocale:null!=te[t]&&delete te[t]);return te[t]},r.locales=function(){return L(te)},r.weekdaysShort=function(t,e,n){return gn(t,e,n,"weekdaysShort")},r.normalizeUnits=N,r.relativeTimeRounding=function(t){return void 0===t?jn:"function"===typeof t&&(jn=t,!0)},r.relativeTimeThreshold=function(t,e){return void 0!==Bn[t]&&(void 0===e?Bn[t]:(Bn[t]=e,"s"===t&&(Bn.ss=e-1),!0))},r.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=cn,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}).call(this,n(56)(t))},function(t,e,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)&&r.length){var a=i.apply(null,r);a&&t.push(a)}else if("object"===o)for(var s in r)n.call(r,s)&&r[s]&&t.push(s)}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(462)(n(88));t.exports=r},function(t,e,n){var r=n(65),i=n(37),o=n(264),a=n(9);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return R})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return F})),n.d(e,"d",(function(){return k})),n.d(e,"e",(function(){return N})),n.d(e,"f",(function(){return I}));var r=n(6),i=n.n(r),o=n(48),a=n.n(o),s=n(1),u=n.n(s),l=n(8),c=n.n(l),h=n(135),f=(n(353),n(354),{apiGeoserverWFSProtocol:"http",apiGeoserverWFSHost:"localhost",apiGeoserverWFSPath:"geoserver/wfs",apiGeoserverWMSProtocol:"http",apiGeoserverWMSHost:"localhost",apiGeoserverWMSPath:"geoserver/wms",apiGeoserverOWSPath:"backend/geoserver/ows",apiBackendProtocol:"http",apiBackendHost:"localhost",apiBackendPath:"",apiBackendAoiLayerPeriodsPath:"backend/rest/imagemosaic/getDates",apiBackendSzifPath:"backend/rest/szif/case",devHostnames:[],requestPageSize:100});function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function m(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?E(t):e}function b(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);if(e){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function S(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||w(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){if(t){if("string"===typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var T=function(t){var e=t.getBoundingClientRect(),n=document.documentElement;return{top:e.top+window.pageYOffset-n.clientTop,left:e.left+window.pageXOffset-n.clientLeft}},L=function(t,e,n){var r=t[0]-e>=n[0],i=t[1]+e<=n[1],o=t[2]+e<=n[2],a=t[3]-e>=n[3];return!(r&&i&&o&&a)},C=function(t,e,n,r){var i=function(e,i,o,a,s,u){var l=null;switch(e){case"top":var c=function(t,e,n,r,i,o,a,s){var u,l,c=(i?i.getBoundingClientRect().top:e)-o-r,h=(i?T(i).top:e)-o-r;switch(s){case"center":l=-n/2;break;case"corner":l=0}var f=t+l+n+o>a[1],p=t+l-o<a[3],d=[h,(u=f?a[1]-o-n:p?a[3]+o:t+l)+n,h+r,u];return{position:{posX:u-a[3],posY:c},boundingRect:d}}(i,o,a,s,u,r,n,t);l={position:c,conflict:L(c.boundingRect,r,n)};break;case"bottom":var h=function(t,e,n,r,i,o,a,s){var u,l,c=(i?i.getBoundingClientRect().top+i.offsetHeight:e)+o,h=(i?T(i).top+i.offsetHeight:e)+o;switch(s){case"center":l=-n/2;break;case"corner":l=0}var f=t+l+n+o>a[1],p=t+l-o<a[3],d=[h,(u=f?a[1]-o-n:p?a[3]+o:t+l)+n,h+r,u];return{position:{posX:u-a[3],posY:c},boundingRect:d}}(i,o,a,s,u,r,n,t);l={position:h,conflict:L(h.boundingRect,r,n)};break;case"left":var f=function(t,e,n,r,i,o,a,s){var u,l,c=(i?T(i).left:t)-o-n;switch(s){case"center":l=-r/2;break;case"corner":l=0}var h=e+l-o<a[0],f=e+l+r+o>a[2],p=[(u=h?a[0]+o:f?a[2]-o-r:e+l)+r,c+n,u,c];return{position:{posX:c-a[3],posY:u-a[0]},boundingRect:p}}(i,o,a,s,u,r,n,t);l={position:f,conflict:L(f.boundingRect,r,n)};break;case"right":var p=function(t,e,n,r,i,o,a,s){var u,l,c=(i?T(i).left+i.offsetWidth:t)+o;switch(s){case"center":l=-r/2;break;case"corner":l=0}var h=e+l-o<a[0],f=e+l+r+o>a[2],p=[(u=h?a[0]+o:f?a[2]-o-r:e+l)+r,c+n,u,c];return{position:{posX:c-a[3],posY:u-a[0]},boundingRect:p}}(i,o,a,s,u,r,n,t);l={position:p,conflict:L(p.boundingRect,r,n)}}return l};return function(t,n,r,o,a){var s,u=null,l=function(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=w(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(l.s();!(s=l.n()).done;){var c=s.value,h=i(c,t,n,r,o,a);if(!h.conflict){u={top:h.position.position.posY,left:h.position.position.posX,width:r};break}}}catch(p){l.e(p)}finally{l.f()}if(!u){var f=i(e[0],t,n,r,o,a);u={top:f.position.position.posY,left:f.position.position.posX,width:r}}return u}},A=function(t){m(n,t);var e=b(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).ref=a.a.createRef(),r}return g(n,[{key:"getStyle",value:function(){var t=this.props.x,e=this.props.y,n=window.innerWidth-20,r=window.innerHeight+window.pageYOffset-window.pageYOffset-20,i=this.ref.current&&this.ref.current.children[0],o=i&&i.offsetWidth?i.offsetWidth:250,a=i&&i.offsetHeight?i.offsetHeight:50,s=null;return s="function"===typeof this.props.getStyle&&this.props.hoveredElemen?this.props.getStyle()(t,e,o,a,this.props.hoveredElemen):function(){var t=window.document.documentElement.scrollTop,e=window.document.documentElement.scrollLeft,n=window.document.documentElement.clientHeight,r=window.document.documentElement.clientWidth;return C("corner",["right","left","top","bottom"],[t,e+r,t+n,e],15)}()(t,e,o,a),(this.props.compressed||a>r)&&(o=500),o>n&&(o=n),s}},{key:"componentDidMount",value:function(){if(this.ref&&this.ref.current){var t=this.getStyle();this.ref.current.style=t}}},{key:"render",value:function(){var t=this.getStyle(),e=c()("ptr-popup",{compressed:this.props.compressed});return this.ref&&!this.ref.current&&(t.display="none"),a.a.createElement("div",{ref:this.ref},a.a.createElement("div",{style:t,className:e},this.props.content?a.a.cloneElement(this.props.content):this.props.children))}}]),n}(a.a.PureComponent);A.propTypes={x:u.a.number,y:u.a.number,maxX:u.a.number,content:u.a.element,getStyle:u.a.func,hoveredElemen:u.a.oneOfType([u.a.element,u.a.object]),compressed:u.a.bool};var M=h.a.getContext("HoverContext"),R=function(t){m(n,t);var e=b(n);function n(t){var r;return p(this,n),(r=e.call(this,t)).state={hoveredItems:[],popupContent:null,x:null,y:null,data:null},r.onHover=r.onHover.bind(E(r)),r.onHoverOut=r.onHoverOut.bind(E(r)),r}return g(n,[{key:"onHover",value:function(t,e){var n={},r=!1;e&&e.popup&&e.popup.content&&(n.popupContent=e.popup.content),e&&e.popup&&e.popup.x&&e.popup.y&&(this.state.x===e.popup.x&&this.state.y===e.popup.y||(r=!0,n.x=e.popup.x,n.y=e.popup.y)),r?(n.hoveredItems=t,n.data=e.popup.data,n.fidColumnName=e.popup.fidColumnName):(n.hoveredItems=[].concat(S(this.state.hoveredItems),S(t)),e&&e.popup&&e.popup.data&&e.popup.data.length&&(n.data=[].concat(S(this.state.data),S(e.popup.data)),n.fidColumnName=e.popup.fidColumnName)),i()(n)||(n.hoveredItems&&n.hoveredItems.length?this.setState(n):this.onHoverOut())}},{key:"onHoverOut",value:function(){this.setState({hoveredItems:[],popupContent:null,data:null,fidColumnName:null})}},{key:"render",value:function(){return a.a.createElement(M.Provider,{value:{hoveredItems:this.state.hoveredItems,selectedItems:this.props.selectedItems,onHover:this.onHover,onHoverOut:this.onHoverOut,x:this.state.x,y:this.state.y}},this.props.children,this.state.popupContent||this.state.data?this.renderPopup():null)}},{key:"renderPopup",value:function(){return a.a.createElement(A,{x:this.state.x,y:this.state.y,content:this.props.popupContentComponent?this.renderPopupContent():this.state.popupContent,compressed:this.props.compressedPopups})}},{key:"renderPopupContent",value:function(){var t=this.props.popupContentComponent;return a.a.isValidElement(t)?a.a.cloneElement(t,{data:this.state.data,featureKeys:this.state.hoveredItems,fidColumnName:this.state.fidColumnName}):a.a.createElement(t,{data:this.state.data,featureKeys:this.state.hoveredItems,fidColumnName:this.state.fidColumnName})}}]),n}(a.a.PureComponent);R.propTypes={selectedItems:u.a.array,compressedPopups:u.a.bool,popupContentComponent:u.a.oneOfType([u.a.element,u.a.func])};var O=function(t,e){return t.map((function(t){return t*Math.cos(Math.PI*e/180)}))},P=O([156543.033928041,78271.51696402048,39135.75848201023,19567.87924100512,9783.93962050256,4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.7481131407048,152.8740565703525,76.43702828517624,38.21851414258813,19.10925707129406,9.554628535647032,4.777314267823516,2.388657133911758,1.194328566955879,.5971642834779395,.2985821417389697,.1492910708694849,.07464553543474244,.03732276771737122,.01866138385868561,.009330691929342804],50),I={averageLatitude:50,defaultLevelsRange:[0,19],defaultMapView:{center:{lat:50.099577,lon:14.42596},boxRange:1e7,tilt:0,roll:0,heading:0},getPixelSizeInLevelsForLatitude:O,maxBoxRange:5e7,minBoxRange:1,numberOfLevels:20,pixelSizeInLevels:P,zoomCoefficient:250},N=t&&t.release&&"node"===t.release.name,D={timeout:1e4};function k(t){var e=Object.assign({},D,t).timeout,n=0,r=null,i=function(){},o=function(){},a=function(t){0===(n+=t)&&(r=null,i())};return{onRequest:function(){a(1)},onResponse:function(){a(-1)},pendingRequests:function(){return n},createReadyP:function(){if(null!=r)return r;if(0===n)return Promise.resolve();r=new Promise((function(t,e){i=t,o=e}));var t=o;return setTimeout((function(){return t()}),e),r}}}function F(t){return function(e){return function(e){return function(n){var r=e(n);return r instanceof Promise&&(t.onRequest(),r.finally((function(){return t.onResponse()}))),r}}}}}).call(this,n(127))},function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"flush",(function(){return a})),n.d(e,"hydrate",(function(){return s})),n.d(e,"cx",(function(){return u})),n.d(e,"merge",(function(){return l})),n.d(e,"getRegisteredStyles",(function(){return c})),n.d(e,"injectGlobal",(function(){return h})),n.d(e,"keyframes",(function(){return f})),n.d(e,"css",(function(){return p})),n.d(e,"sheet",(function(){return d})),n.d(e,"caches",(function(){return g}));var r=n(383),i="undefined"!==typeof t?t:{},o=Object(r.a)(i),a=o.flush,s=o.hydrate,u=o.cx,l=o.merge,c=o.getRegisteredStyles,h=o.injectGlobal,f=o.keyframes,p=o.css,d=o.sheet,g=o.caches}.call(this,n(49))},function(t,e,n){t.exports=n(32)},function(t,e,n){!function(t,e){"use strict";function n(t){return"string"===typeof t||"number"===typeof t}var r=function(){function t(){this._cache={}}var e=t.prototype;return e.set=function(t,e){this._cache[t]=e},e.get=function(t){return this._cache[t]},e.remove=function(t){delete this._cache[t]},e.clear=function(){this._cache={}},e.isValidCacheKey=function(t){return n(t)},t}();function i(t){if(void 0===t)throw new Error('Missing the required property "cacheSize".');if(!Number.isInteger(t)||t<=0)throw new Error('The "cacheSize" property must be a positive integer value.')}var o=function(){function t(t){var e=(void 0===t?{}:t).cacheSize;i(e),this._cache={},this._cacheOrdering=[],this._cacheSize=e}var e=t.prototype;return e.set=function(t,e){if(this._cache[t]=e,this._cacheOrdering.push(t),this._cacheOrdering.length>this._cacheSize){var n=this._cacheOrdering[0];this.remove(n)}},e.get=function(t){return this._cache[t]},e.remove=function(t){var e=this._cacheOrdering.indexOf(t);e>-1&&this._cacheOrdering.splice(e,1),delete this._cache[t]},e.clear=function(){this._cache={},this._cacheOrdering=[]},e.isValidCacheKey=function(t){return n(t)},t}(),a=function(){function t(t){var e=(void 0===t?{}:t).cacheSize;i(e),this._cache={},this._cacheOrdering=[],this._cacheSize=e}var e=t.prototype;return e.set=function(t,e){if(this._cache[t]=e,this._registerCacheHit(t),this._cacheOrdering.length>this._cacheSize){var n=this._cacheOrdering[0];this.remove(n)}},e.get=function(t){return this._registerCacheHit(t),this._cache[t]},e.remove=function(t){this._deleteCacheHit(t),delete this._cache[t]},e.clear=function(){this._cache={},this._cacheOrdering=[]},e._registerCacheHit=function(t){this._deleteCacheHit(t),this._cacheOrdering.push(t)},e._deleteCacheHit=function(t){var e=this._cacheOrdering.indexOf(t);e>-1&&this._cacheOrdering.splice(e,1)},e.isValidCacheKey=function(t){return n(t)},t}(),s=function(){function t(){this._cache=new Map}var e=t.prototype;return e.set=function(t,e){this._cache.set(t,e)},e.get=function(t){return this._cache.get(t)},e.remove=function(t){this._cache.delete(t)},e.clear=function(){this._cache.clear()},t}(),u=function(){function t(t){var e=(void 0===t?{}:t).cacheSize;i(e),this._cache=new Map,this._cacheSize=e}var e=t.prototype;return e.set=function(t,e){if(this._cache.set(t,e),this._cache.size>this._cacheSize){var n=this._cache.keys().next().value;this.remove(n)}},e.get=function(t){return this._cache.get(t)},e.remove=function(t){this._cache.delete(t)},e.clear=function(){this._cache.clear()},t}(),l=function(){function t(t){var e=(void 0===t?{}:t).cacheSize;i(e),this._cache=new Map,this._cacheSize=e}var e=t.prototype;return e.set=function(t,e){if(this._cache.set(t,e),this._cache.size>this._cacheSize){var n=this._cache.keys().next().value;this.remove(n)}},e.get=function(t){var e=this._cache.get(t);return this._cache.has(t)&&(this.remove(t),this._cache.set(t,e)),e},e.remove=function(t){this._cache.delete(t)},e.clear=function(){this._cache.clear()},t}(),c=r,h=function(){return!0};t.default=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(t,r){if(void 0===r&&(r={}),"function"===typeof r)throw new Error('[re-reselect] Second argument "options" must be an object. Please use "options.selectorCreator" to provide a custom selectorCreator.');var i=0,o=n.pop(),a=Array.isArray(n[0])?n[0]:[].concat(n);n.push((function(){return i++,o.apply(void 0,arguments)}));var s=r.cacheObject||new c,u=r.selectorCreator||e.createSelector,l=s.isValidCacheKey||h,f=function(){var e=t.apply(void 0,arguments);if(l(e)){var r=s.get(e);return void 0===r&&(r=u.apply(void 0,n),s.set(e,r)),r.apply(void 0,arguments)}console.warn('[re-reselect] Invalid cache key "'+e+'" has been returned by resolver function.')};return f.getMatchingSelector=function(){var e=t.apply(void 0,arguments);return s.get(e)},f.removeMatchingSelector=function(){var e=t.apply(void 0,arguments);s.remove(e)},f.clearCache=function(){s.clear()},f.resultFunc=o,f.dependencies=a,f.cache=s,f.recomputations=function(){return i},f.resetRecomputations=function(){return i=0},f}},t.FlatObjectCache=r,t.FlatCacheObject=r,t.FifoObjectCache=o,t.LruObjectCache=a,t.FlatMapCache=s,t.FifoMapCache=u,t.LruMapCache=l,t.FifoCacheObject=o,t.LruCacheObject=l,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(5))},function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return p})),n.d(e,"i",(function(){return s})),n.d(e,"k",(function(){return y})),n.d(e,"j",(function(){return v.reduxBatch})),n.d(e,"b",(function(){return L})),n.d(e,"g",(function(){return Z})),n.d(e,"a",(function(){return id})),n.d(e,"d",(function(){return Ym})),n.d(e,"h",(function(){return od}));var r=n(235),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function a(t){if("object"!==typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function s(t,e,n){var i;if("function"===typeof e&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"===typeof e&&"undefined"===typeof n&&(n=e,e=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error("Expected the enhancer to be a function.");return n(s)(t,e)}if("function"!==typeof t)throw new Error("Expected the reducer to be a function.");var u=t,l=e,c=[],h=c,f=!1;function p(){h===c&&(h=c.slice())}function d(){if(f)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return l}function g(t){if("function"!==typeof t)throw new Error("Expected the listener to be a function.");if(f)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var e=!0;return p(),h.push(t),function(){if(e){if(f)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");e=!1,p();var n=h.indexOf(t);h.splice(n,1)}}}function m(t){if(!a(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,l=u(l,t)}finally{f=!1}for(var e=c=h,n=0;n<e.length;n++){(0,e[n])()}return t}function y(t){if("function"!==typeof t)throw new Error("Expected the nextReducer to be a function.");u=t,m({type:o.REPLACE})}function v(){var t,e=g;return(t={subscribe:function(t){if("object"!==typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(d())}return n(),{unsubscribe:e(n)}}})[r.a]=function(){return this},t}return m({type:o.INIT}),(i={dispatch:m,subscribe:g,getState:d,replaceReducer:y})[r.a]=v,i}function u(t,e){var n=e&&e.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function l(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];0,"function"===typeof t[i]&&(n[i]=t[i])}var a,s=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if("undefined"===typeof n(void 0,{type:o.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof n(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(l){a=l}return function(t,e){if(void 0===t&&(t={}),a)throw a;for(var r=!1,i={},o=0;o<s.length;o++){var l=s[o],c=n[l],h=t[l],f=c(h,e);if("undefined"===typeof f){var p=u(l,e);throw new Error(p)}i[l]=f,r=r||f!==h}return r?i:t}}function c(t,e){return function(){return e(t.apply(this,arguments))}}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){h(t,e,n[e])}))}return t}function p(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function d(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=e.map((function(t){return t(i)}));return f({},n,{dispatch:r=p.apply(void 0,o)(n.dispatch)})}}}function g(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"===typeof i?i(n,r,t):e(i)}}}}var m=g();m.withExtraArgument=g;var y=m,v=(n(176),n(110)),E=n(21),_=n(0),b=n.n(_),S=n(1),w=n.n(S),x=b.a.createContext(null),T=function(t){function e(e){var n;n=t.call(this,e)||this;var r=e.store;return n.state={storeState:r.getState(),store:r},n}Object(E.a)(e,t);var n=e.prototype;return n.componentDidMount=function(){this._isMounted=!0,this.subscribe()},n.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe(),this._isMounted=!1},n.componentDidUpdate=function(t){this.props.store!==t.store&&(this.unsubscribe&&this.unsubscribe(),this.subscribe())},n.subscribe=function(){var t=this,e=this.props.store;this.unsubscribe=e.subscribe((function(){var n=e.getState();t._isMounted&&t.setState((function(t){return t.storeState===n?null:{storeState:n}}))}));var n=e.getState();n!==this.state.storeState&&this.setState({storeState:n})},n.render=function(){var t=this.props.context||x;return b.a.createElement(t.Provider,{value:this.state},this.props.children)},e}(_.Component);T.propTypes={store:w.a.shape({subscribe:w.a.func.isRequired,dispatch:w.a.func.isRequired,getState:w.a.func.isRequired}),context:w.a.object,children:w.a.any};var L=T,C=n(20),A=n(17),M=n(63),R=n(89),O=n.n(R),P=n(116),I=n.n(P);n(177);function N(t,e){void 0===e&&(e={});var n=e,r=n.getDisplayName,i=void 0===r?function(t){return"ConnectAdvanced("+t+")"}:r,o=n.methodName,a=void 0===o?"connectAdvanced":o,s=n.renderCountProp,u=void 0===s?void 0:s,l=n.shouldHandleStateChanges,c=void 0===l||l,h=n.storeKey,f=void 0===h?"store":h,p=n.withRef,d=void 0!==p&&p,g=n.forwardRef,m=void 0!==g&&g,y=n.context,v=void 0===y?x:y,S=Object(M.a)(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);I()(void 0===u,"renderCountProp is removed. render counting is built into the latest React dev tools profiling extension"),I()(!d,"withRef is removed. To access the wrapped instance, use a ref on the connected component");var w="To use a custom Redux store for specific components,  create a custom React context with React.createContext(), and pass the context object to React-Redux's Provider and specific components like:  <Provider context={MyContext}><ConnectedComponent context={MyContext} /></Provider>. You may also pass a {context : MyContext} option to connect";I()("store"===f,"storeKey has been removed and does not do anything. "+w);var T=v;return function(e){var n=e.displayName||e.name||"Component",r=i(n),o=Object(A.a)({},S,{getDisplayName:i,methodName:a,renderCountProp:u,shouldHandleStateChanges:c,storeKey:f,displayName:r,wrappedComponentName:n,WrappedComponent:e}),s=S.pure,l=_.Component,h=e;s&&(l=_.PureComponent);var p=function(e){function n(n){var r;return r=e.call(this,n)||this,I()(m?!n.wrapperProps[f]:!n[f],"Passing redux store in props has been removed and does not do anything. "+w),r.selectDerivedProps=function(){var e,n,r,i,a;return function(u,l,c){if(s&&e===l&&n===u)return r;c!==i&&(i=c,a=t(c.dispatch,o)),e=l,n=u;var h=a(u,l);return r===h?r:r=h}}(),r.selectChildElement=function(){var t,e,n;return function(r,i){return r===t&&i===e||(t=r,e=i,n=b.a.createElement(h,Object(A.a)({},r,{ref:i}))),n}}(),r.renderWrappedComponent=r.renderWrappedComponent.bind(Object(C.a)(Object(C.a)(r))),r}Object(E.a)(n,e);var i=n.prototype;return i.renderWrappedComponent=function(t){I()(t,'Could not find "store" in the context of "'+r+'". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to '+r+" in connect options.");var e,n=t.storeState,i=t.store,o=this.props;m&&(o=this.props.wrapperProps,e=this.props.forwardedRef);var a=this.selectDerivedProps(n,o,i);return this.selectChildElement(a,e)},i.render=function(){var t=this.props.context||T;return b.a.createElement(t.Consumer,null,this.renderWrappedComponent)},n}(l);if(p.WrappedComponent=e,p.displayName=r,m){var d=b.a.forwardRef((function(t,e){return b.a.createElement(p,{wrapperProps:t,forwardedRef:e})}));return d.displayName=r,d.WrappedComponent=e,O()(d,e)}return O()(p,e)}}var D=Object.prototype.hasOwnProperty;function k(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function F(t,e){if(k(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!D.call(e,n[i])||!k(t[n[i]],e[n[i]]))return!1;return!0}function V(t){return function(e,n){var r=t(e,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function j(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function B(t,e){return function(e,n){n.displayName;var r=function(t,e){return r.dependsOnOwnProps?r.mapToProps(t,e):r.mapToProps(t)};return r.dependsOnOwnProps=!0,r.mapToProps=function(e,n){r.mapToProps=t,r.dependsOnOwnProps=j(t);var i=r(e,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=j(i),i=r(e,n)),i},r}}var U=[function(t){return"function"===typeof t?B(t):void 0},function(t){return t?void 0:V((function(t){return{dispatch:t}}))},function(t){return t&&"object"===typeof t?V((function(e){return function(t,e){if("function"===typeof t)return c(t,e);if("object"!==typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var o=n[i],a=t[o];"function"===typeof a&&(r[o]=c(a,e))}return r}(t,e)})):void 0}];var G=[function(t){return"function"===typeof t?B(t):void 0},function(t){return t?void 0:V((function(){return{}}))}];function K(t,e,n){return Object(A.a)({},n,t,e)}var W=[function(t){return"function"===typeof t?function(t){return function(e,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(e,n,s){var u=t(e,n,s);return a?i&&o(u,r)||(r=u):(a=!0,r=u),r}}}(t):void 0},function(t){return t?void 0:function(){return K}}];function z(t,e,n,r){return function(i,o){return n(t(i,o),e(r,o),o)}}function Y(t,e,n,r,i){var o,a,s,u,l,c=i.areStatesEqual,h=i.areOwnPropsEqual,f=i.areStatePropsEqual,p=!1;function d(i,p){var d=!h(p,a),g=!c(i,o);return o=i,a=p,d&&g?(s=t(o,a),e.dependsOnOwnProps&&(u=e(r,a)),l=n(s,u,a)):d?(t.dependsOnOwnProps&&(s=t(o,a)),e.dependsOnOwnProps&&(u=e(r,a)),l=n(s,u,a)):g?function(){var e=t(o,a),r=!f(e,s);return s=e,r&&(l=n(s,u,a)),l}():l}return function(i,c){return p?d(i,c):(s=t(o=i,a=c),u=e(r,a),l=n(s,u,a),p=!0,l)}}function H(t,e){var n=e.initMapStateToProps,r=e.initMapDispatchToProps,i=e.initMergeProps,o=Object(M.a)(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(t,o),s=r(t,o),u=i(t,o);return(o.pure?Y:z)(a,s,u,t,o)}function q(t,e,n){for(var r=e.length-1;r>=0;r--){var i=e[r](t);if(i)return i}return function(e,r){throw new Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function X(t,e){return t===e}var Z=function(t){var e=void 0===t?{}:t,n=e.connectHOC,r=void 0===n?N:n,i=e.mapStateToPropsFactories,o=void 0===i?G:i,a=e.mapDispatchToPropsFactories,s=void 0===a?U:a,u=e.mergePropsFactories,l=void 0===u?W:u,c=e.selectorFactory,h=void 0===c?H:c;return function(t,e,n,i){void 0===i&&(i={});var a=i,u=a.pure,c=void 0===u||u,f=a.areStatesEqual,p=void 0===f?X:f,d=a.areOwnPropsEqual,g=void 0===d?F:d,m=a.areStatePropsEqual,y=void 0===m?F:m,v=a.areMergedPropsEqual,E=void 0===v?F:v,_=Object(M.a)(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),b=q(t,o,"mapStateToProps"),S=q(e,s,"mapDispatchToProps"),w=q(n,l,"mergeProps");return r(h,Object(A.a)({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:b,initMapDispatchToProps:S,initMergeProps:w,pure:c,areStatesEqual:p,areOwnPropsEqual:g,areStatePropsEqual:y,areMergedPropsEqual:E},_))}}(),J=n(347),Q=n.n(J),$=n(348),tt=n.n($),et=n(93),nt=n.n(et),rt=n(349),it=n.n(rt),ot=n(11),at=n.n(ot),st=n(33),ut=n.n(st),lt=n(10),ct=n.n(lt),ht=n(112),ft=n.n(ht),pt=n(79),dt=n.n(pt),gt=n(14),mt=n.n(gt),yt=n(117),vt=n.n(yt),Et=n(6),_t=n.n(Et),bt=n(75),St=n.n(bt),wt=n(5),xt=n(15),Tt=n.n(xt),Lt=n(22),Ct=n.n(Lt),At=n(26),Mt=n.n(At),Rt=n(32),Ot=n.n(Rt),Pt=n(18),It=n.n(Pt),Nt=n(28),Dt=n.n(Nt),kt=n(113),Ft=n.n(kt),Vt=n(9),jt=n.n(Vt),Bt=n(27),Ut=n.n(Bt),Gt=n(96),Kt=n.n(Gt),Wt=n(134),zt=n.n(Wt),Yt=n(350),Ht=n.n(Yt),qt=n(138),Xt=n.n(qt),Zt=n(351),Jt=n.n(Zt),Qt=n(36),$t=n.n(Qt),te=n(88),ee=n.n(te),ne=(n(167),n(168),n(90),n(34)),re=n.n(ne),ie=n(29),oe=n(357),ae=n.n(oe),se=n(12),ue=(n(23),n(7)),le=n.n(ue),ce=n(58),he=n.n(ce),fe=n(114),pe=n.n(fe),de=n(91),ge=n.n(de),me=n(39),ye=n.n(me);function ve(t){return(ve="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function be(t,e,n){return e&&_e(t.prototype,e),n&&_e(t,n),t}function Se(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function we(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?we(Object(n),!0).forEach((function(e){Se(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Te(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Le(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||Ae(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(t){return function(t){if(Array.isArray(t))return Me(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Ae(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(t,e){if(t){if("string"===typeof t)return Me(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(t,e):void 0}}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Re(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Ae(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function Oe(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}var Pe=function(){function t(e){Ee(this,t),this.data=[],this.maxSize=e||100}return be(t,[{key:"add",value:function(t){this.data.push(t),this.size()>this.maxSize&&this.remove()}},{key:"remove",value:function(){this.data.shift()}},{key:"addOrUpdate",value:function(t){var e=this.findIndexByKey(t.cacheKey);-1!==e?this.data[e]=t:this.add(t)}},{key:"first",value:function(){return this.data[0]}},{key:"last",value:function(){return this.data[this.data.length-1]}},{key:"size",value:function(){return this.data.length}},{key:"findIndexByKey",value:function(t){return ee()(this.data,{cacheKey:t})}},{key:"findByKey",value:function(t){return ct()(this.data,{cacheKey:t})}}]),t}();var Ie=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.entries(t),n=e.reduce((function(t,e){var n=Le(e,2),r=(n[0],n[1]),i=Ne(r);return[].concat(Ce(t),Ce(i))}),[]);return n},Ne=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=function t(e){return e.reduce((function(e,n){switch(n.type){case"folder":return[].concat(Ce(e),Ce(t(n.items)));case"layerTemplate":return[].concat(Ce(e),[n]);default:return e}}),[])};return Ce(e(t).reverse())},De={forAllTreeItems:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return e.reduce((function(e,r){if("folder"===r.type)return t(r.items,n);var i=n(r);return i?[].concat(Ce(e),[i]):e}),[])},getFlattenLayers:Ne,getFlattenLayerTree:Ie,getFolderByKey:function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,i=Re(n);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(o&&"folder"===o.type&&o.key===r)return o;if("folder"===o.type){var a=t(o.items,r);if(a)return a}}}catch(s){i.e(s)}finally{i.f()}},getFolderByLayerKey:function t(e,n){if(jt()(e)){var r,i=Re(e);try{for(i.s();!(r=i.n()).done;){var o=t(r.value,n);if(o)return o}}catch(c){i.e(c)}finally{i.f()}}if(Ct()(e)){if(!e||"folder"!==e.type)return null;if(e.items.some((function(t){return t.key===n})))return e;var a,s=Re(e.items);try{for(s.s();!(a=s.n()).done;){var u=a.value;if("folder"===u.type){var l=t(u,n);if(l)return l}}}catch(c){s.e(c)}finally{s.f()}}},getLayerZindex:function(t,e){var n=Ie(t).findIndex((function(t){return t.key===e}));return-1===n?null:n}};function ke(t,e,n){return Fe((t-1)/Ue(e,n))}function Fe(t){for(var e=se.f.pixelSizeInLevels,n=0;t<=e[n+1]&&n<e.length;)n++;return n}function Ve(t,e){var n=Math.abs(t.maxLat-t.minLat),r=Math.abs(t.maxLon-t.minLon),i=125e3*Math.max(n,r);return e&&(i/=Math.cos(e*Math.PI/180)),i>1e3?i:1e3}function je(t,e,n){return Ue(e,n)*Be(t)-1}function Be(t){return se.f.pixelSizeInLevels[t]}function Ue(t,e){return t&&t>-1&&e&&e>-1?Math.min(e,t):null}var Ge={view:{ensureViewIntegrity:function(t){return t&&(t.heading&&t.heading>360&&(t.heading=t.heading%360),t.heading&&t.heading<0&&(t.heading=360- -t.heading%360),t.tilt&&t.tilt<0&&(t.tilt=0),t.tilt&&t.tilt>90&&(t.tilt=90),t.range&&t.range<.01&&(t.range=.01),t.center&&(t.center.lat&&(t.center.lat>90?t.center.lat=90:t.center.lat<-90&&(t.center.lat=-90)),t.center.lon&&((t.center.lon>360||t.center.lon<-360)&&(t.center.lon%=360),t.center.lon>180?t.center.lon=t.center.lon-180-180:t.center.lon<-180?t.center.lon=180+(t.center.lon+180):-180===t.center.lon&&(t.center.lon=180)))),t},mergeViews:ae()([function(t){return t},function(t,e){return e},function(t,e,n){return n}],(function(t,e,n){return n=n||{},xe(xe(xe({},t),e),n)}))((function(t,e,n){return"".concat(t,"_").concat(e,"_").concat(n||"")})),getBoxRangeFromZoomLevel:je,getNearestZoomLevelBoxRange:function(t,e,n){return je(ke(n,t,e),t,e)},getMapViewportRange:Ue,getPixelSizeFromZoomLevel:Be,getViewFromBoundingBox:function(t,e){jt()(t)&&(t={minLat:t[1],minLon:t[0],maxLat:t[3],maxLon:t[2]});var n={lat:(t.maxLat+t.minLat)/2,lon:(t.maxLon+t.minLon)/2};return{center:n,boxRange:Ve(t,e?n.lat:null)}},getViewFromGeometry:function(t,e){var n=Object(ie.center)(t),r=Object(ie.bbox)(t),i=Ve({minLat:r[1],minLon:r[0],maxLat:r[3],maxLon:r[2]},e?n.geometry.coordinates[1]:null);return{center:{lat:n.geometry.coordinates[1],lon:n.geometry.coordinates[0]},boxRange:i}},getZoomLevelFromBoxRange:ke,getZoomLevelFromPixelSize:Fe},getLocationFromPlaceString:function(t){var e,n=1e5,r=null;if(t.length){var i=Number(t[0]);if(isNaN(i))return fetch("https://open.mapquestapi.com/nominatim/v1/search.php?key=2qc94oOJwV6p7KaClJVSoLyevmPsLqlS&format=json&q="+t+"&limit=1",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(i){var o=i.headers.get("Content-type");if(i.ok&&o&&-1!==o.indexOf("application/json"))return i.json().then((function(i){if(i.length){var o=i[0];if(e=Number(o.lat),r=Number(o.lon),o.boundingbox){var a=o.boundingbox;n=getBoxRangeFromBoundingBox({minLat:a[0],maxLat:a[1],minLon:a[2],maxLon:a[3]})}if((e||0===e)&&(r||0===r))return{boxRange:n,center:{lat:e,lon:r}}}else console.warn("utils/map#getLocationFromPlaceString: No location found for input: ",t)}));console.warn("utils/map#getLocationFromPlaceString: No location found for input: ",t)}),(function(t){throw t}));var o=t.split(/[,; ]/);if(o.length&&(e=Number(o[0]),r=o[1]?Number(o[1]):0),(e||0===e)&&(r||0===r))return Promise.resolve({boxRange:n,center:{lat:e,lon:r}});console.warn("utils/map#getLocationFromPlaceString: No location found for input: ",t)}else console.warn("utils/map#getLocationFromPlaceString: Empty input string!")},mergeLayers:function(t,e){return t&&e?[].concat(Ce(t),Ce(e)):t||e||null},resetHeading:function t(e,n,r){(e%=360)<0&&(e+=360),r||(r=3,e>120&&e<240?r=5:e>60&&e<300&&(r=8),(e>0&&e<180||e<0&&e<-180)&&(r=-r)),setTimeout((function(){Math.abs(e)>Math.abs(r)?(n(e+=r),t(e,n,r)):n(e=0)}),20)}};var Ke=function(t){return t.match(/^[0-9]{4}$/)?{start:le()({year:t}),end:le()({year:t}).endOf("year"),source:t,type:"year"}:t.match(/^[0-9]{4}-[0-9]{2}$/)?{start:le()(t),end:le()(t).endOf("month"),source:t,type:"month"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)?{start:le()(t),end:le()(t).endOf("day"),source:t,type:"day"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}$/)?{start:le()(t),end:le()(t).endOf("hour"),source:t,type:"hour"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}$/)?{start:le()(t),end:le()(t).endOf("minute"),source:t,type:"minute"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}$/)||t.match(/^[0-9]{4}[0-9]{2}[0-9]{2}T[0-9]{2}[0-9]{2}[0-9]{2}$/)?{start:le()(t),end:le()(t).endOf("second"),source:t,type:"second"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}/)?{start:le()(t),end:le()(t).endOf("second"),source:t,type:"full"}:void 0},We={parse:function(t){if(t.match(/\/P/))throw new Error("Durations not implemented");if(t.match(/\//)){var e=t.split("/");return{start:Ke(e[0]).start,end:Ke(e[1]).end,type:"interval"}}return Ke(t)},toString:function(t){if(!(Ct()(t)&&t.start&&t.end&&t.type))throw new Error("Invalid period supplied to period.toString");switch(t.type){case"interval":return t.start.format("YYYY-MM-DD h:mm:ss")+" - "+t.end.format("YYYY-MM-DD h:mm:ss");case"second":case"full":return t.start.format("YYYY-MM-DD h:mm:ss");case"minute":return t.start.format("YYYY-MM-DD h:mm");case"hour":return t.start.format("YYYY-MM-DD h")+"h";default:return t.source}}};var ze={addItem:function(t,e){return[].concat(Ce(t),[e])},addItemToIndex:function(t,e,n){return[].concat(Ce(t.slice(0,e)),[n],Ce(t.slice(e)))},removeItemByIndex:function(t,e){return[].concat(Ce(t.slice(0,e)),Ce(t.slice(e+1)))},removeItemByKey:function(t,e){t[e];return Te(t,[e].map(Oe))},replaceItemOnIndex:function(t,e,n){return[].concat(Ce(t.slice(0,e)),[n],Ce(t.slice(e+1)))}},Ye={getClassByValue:function(t,e){return t[0]===e?0:t.findIndex((function(t){return e<=t}))-1},getClassCount:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Math.max(0,t.length-1)},getClassesIntervals:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=Ce(new Set(t));if(1!==e.length){var n=e.reduce((function(t,e,n,r){return n>0&&t.push([r[n-1],r[n]]),t}),[]);return n}return[[e[0],e[0]]]},getMiddleClassValues:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce((function(t,e,n,r){return n>0?(t.push((r[n-1]+r[n])/2),t):t}),[])},getValueClassesByStatistics:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Number.parseFloat(t.min),r=Number.parseFloat(t.max),i=(r-n)/e,o=[],a=0;a<e+1;a++)o[a]=n+a*i;return o},mergeAttributeStatistics:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={min:null,max:null,percentile:[]},r=Re(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;i&&i.attributeStatistic&&(n.min=n.min||0===n.min?Math.min(n.min,i.attributeStatistic.min):i.attributeStatistic.min,n.max=n.max||0===n.max?Math.max(n.max,i.attributeStatistic.max):i.attributeStatistic.max)}}catch(d){r.e(d)}finally{r.f()}for(var o=e[0]&&e[0].attributeStatistic&&e[0].attributeStatistic.percentile.length,a=e.length,s=0;s<o;s++){var u,l=0,c=Re(e);try{for(c.s();!(u=c.n()).done;){var h=u.value;h&&h.attributeStatistic&&(l+=h.attributeStatistic.percentile[s])}}catch(d){c.e(d)}finally{c.f()}n.percentile[s]=l/a}n.percentile[0]=n.min,n.percentile[n.percentile.length-1]=n.max;var f=pe()(n.min),p=pe()(n.max);return f&&p?n:null},quartilePercentiles:[0,.166,.333,.5,.666,.833,1],rangeMap:function(t,e){return function(n){var r=Le(t,2),i=r[0],o=r[1],a=Le(e,2),s=a[0];return((a[1]-s)*(n-i)/(o-i)*10+10*s)/10}},setClassesMinMaxFromStatistics:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=Ce(t);return n[0]=e.min,n[t.length-1]=e.max,n}},He={period:We,uuid:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))},randomString:function(t){return(Math.random()*Math.pow(36,t)>>0).toString(36)},getRemSize:function(){return parseFloat(getComputedStyle(document.documentElement).fontSize)},scrollTo:function(t,e,n){var r=document.getElementById(e),i=document.getElementById(t),o=i.offsetTop;i.offsetHeight,r.offsetHeight;document.getElementById(e).scrollTop=o},getStringFromJson:function(t){return t&&"object"===ve(t)?JSON.stringify(t,null,2):t},deepKeyMirror:function(t,e){var n=this;return ye()(t)?ge()(t,(function(t,r){return n.deepKeyMirror(t,e?e+"."+r:r)})):e},stringToNumHash:function(t){if("string"!==typeof(t=""+t))throw new Error("stringToNumHash: argument must be a string");for(var e=1,n=0;n<t.length;n++)e=Math.imul(e+t.charCodeAt(n)|0,265443576107);return(e^e>>>17)>>>0},stringToColours:function(t,e,n){for(var r,i,o,a=this.stringToNumHash(t),s=[],u=(n=xe(xe({},{hue:[0,360],saturation:[35,65],lightness:[40,60]}),n)).hue[1]-n.hue[0],l=n.saturation[1]-n.saturation[0],c=n.lightness[1]-n.lightness[0],h=0;h<(e||1);h++)r=a%u+n.hue[0],i=(a=(a^a>>>17)>>>0)%l+n.saturation[0],o=(a=(a^a>>>17)>>>0)%c+n.lightness[0],a=(a^a>>>17)>>>0,s.push("hsl("+r+","+i+"%,"+o+"%)");return s}},qe=n(43),Xe=n.n(qe),Ze=n(358),Je=n.n(Ze),Qe=n(236),$e=n.n(Qe),tn=n(359),en=n.n(tn),nn=n(237),rn=n.n(nn),on=n(64),an=n.n(on),sn=n(238),un=n.n(sn),ln=n(139),cn=n.n(ln),hn=n(55),fn=n.n(hn),pn=n(360),dn=n.n(pn),gn=n(80),mn=n.n(gn),yn=n(136),vn=n.n(yn);function En(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_n(Object(n),!0).forEach((function(e){En(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Sn(t,e){return(Sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function xn(t,e,n){return(xn=wn()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Sn(i,n.prototype),i}).apply(null,arguments)}function Tn(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ln(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Cn(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function An(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}function Mn(t,e,n){return ut()(t.filter,e)&&ut()(t.order,n)}var Rn={getIndex:function(t,e,n){if(t){var r=ct()(t,(function(t){return Mn(t,e,n)}));return r||null}return null},getUniqueIndexes:function(t){return _t()(t)?null:t.reduce((function(t,e){return ct()(t,(function(t){return t&&Mn(e,t.filter,t.order)}))?t:[].concat(Cn(t),[e])}),[])},mergeFilters:function(t,e,n){if(t&&e){var r=bn({},n);return e.application&&t.activeApplicationKey&&(r.applicationKey=t.activeApplicationKey),e.case&&t.activeCaseKey&&(r.caseKey=t.activeCaseKey),e.scope&&t.activeScopeKey&&(r.scopeKey=t.activeScopeKey),e.place&&(t.activePlaceKey?r.placeKey=t.activePlaceKey:t.activePlaceKeys&&(r.placeKey={in:t.activePlaceKeys})),e.period&&(t.activePeriodKey?r.periodKey=t.activePeriodKey:t.activePeriodKeys&&(r.periodKey={in:t.activePeriodKeys})),e.attribute&&t.activeAttributeKey&&(r.attributeKey=t.activeAttributeKey),e.layerTemplate&&t.activeLayerTemplateKey&&(r.layerTemplateKey=t.activeLayerTemplateKey),_t()(r)?null:r}return n},isCorrespondingIndex:Mn,itemFitFilter:function(t,e){return null===t||Object.entries(t).every((function(t){var n=Ln(t,2),r=n[0],i=n[1],o=e.data&&e.data.hasOwnProperty(r),a=e.data&&e.data.hasOwnProperty("".concat(r,"Key"));if(o){if(e.data&&e.data[r]===i)return!0;if(Ct()(i)&&i.like)return!0;if(Ct()(i)&&i.in)return i.in.includes(e.data[r]);if(Ct()(i)&&i.notin)return!i.notin.includes(e.data[r])}return!(!a||!e.data||e.data["".concat(r,"Key")]!==i)}))}},On=function(t){return t.scopes.activeKey},Pn=function(t){return function(e){return t(e).byKey}},In=function(t){return Object(wt.createSelector)([Pn(t)],(function(t){return St()(t,(function(t){return!t.hasOwnProperty("removed")}))}))};function Nn(t,e){if(!e||!e.index)return null;for(var n=[],r=1;r<=e.count;r++){var i=e.index[r];if(i){var o=t[i];o?n.push(o):n.push({key:i})}else n.push(null)}return Wn(n)}var Dn=function(t){return function(e){return t(e).activeKey}},kn=function(t){return function(e){return t(e).activeKeys}},Fn=function(t){return Tt()([In(t),function(t,e){return e}],(function(t,e){return e&&t&&!_t()(t)&&t[e]?t[e]:null}))((function(t,e){return e}))},Vn=function(t){return function(e){var n=t(e).editedByKey;return n?Object.values(n):null}},jn=function(t){return function(e){return t(e).editedByKey}},Bn=function(t){return function(e,n){var r=jn(t)(e);return n&&r&&!_t()(r)&&r[n]?r[n]:null}},Un=function(t){return function(e){return t(e).indexes}},Gn=function(t){return Object(wt.createSelector)([Un(t),function(t,e){return e},function(t,e,n){return n}],(function(t,e,n){return Rn.getIndex(t,e,n)}))},Kn=function(t){return Object(wt.createSelector)([Gn(t),function(t,e,n,r){return r},function(t,e,n,r,i){return i}],(function(t,e,n){if(t&&t.index){for(var r={},i=e;i<e+n&&i<=t.count;i++){var o=t.index[i];r[i]=o||null}return r}return null}))};function Wn(t){return t.length?t:null}var zn=function(t){return function(e){return t(e)&&t(e).inUse?t(e).inUse.indexes:null}},Yn=Object(wt.createSelector)([function(t){return t.scopes&&t.scopes.activeKey},function(t){return t.cases&&t.cases.activeKey},function(t){return t.scenarios&&t.scenarios.activeKey},function(t){return t.places&&t.places.activeKey},function(t){return t.places&&t.places.activeKeys},function(t){return t.periods&&t.periods.activeKey},function(t){return t.periods&&t.periods.activeKeys},function(t){return t.attributes&&t.attributes.activeKey},function(t){return t.layerTemplates&&t.layerTemplates.activeKey},function(t){return t.areaTreeLevelKeys&&t.areaTreeLevelKeys.activeKey},function(t){return t.specific&&t.specific.apps},function(t){return t.app&&t.app.key}],(function(t,e,n,r,i,o,a,s,u,l,c,h){var f={activeScopeKey:t,activeCaseKey:e,activeScenarioKey:n,activePlaceKey:r,activePlaceKeys:i,activePeriodKey:o,activePeriodKeys:a,activeAttributeKey:s,activeLayerTemplateKey:u,activeAreaTreeLevelKey:l};return c?f.activeApplicationKey=c.activeKey:h&&(f.activeApplicationKey=h),f}));function Hn(t){return t&&t.start&&t.length}var qn=function(t){var e=t.filter(Hn),n=nt()(e,["start","length"]);return 0===n.length?null:tt()(n).reduce((function(t,e){var n,r=t.pop();if(n=r,e.start<=n.start+n.length){var i=Math.max(r.start+r.length,e.start+e.length);return[].concat(Cn(t),[{start:r.start,length:i-r.start}])}return[].concat(Cn(t),[r,e])}),[Q()(n)])},Xn={getActive:function(t){return Object(wt.createSelector)([In(t),Dn(t)],(function(t,e){return t&&t[e]?t[e]:null}))},getActiveModels:function(t){return Object(wt.createSelector)([In(t),kn(t)],(function(t,e){var n=[];return t&&!_t()(t)&&e&&!_t()(e)&&e.map((function(e){var r=t[e];r&&n.push(r)})),Wn(n)}))},getActiveKey:Dn,getActiveKeys:kn,getAll:function(t){return Object(wt.createSelector)([In(t)],(function(t){return t?Object.values(t):null}))},getAllActiveKeys:Yn,getAllAsObject:In,getAllForActiveScope:function(t){return Object(wt.createSelector)([In(t),Un(t),On,function(t,e){return e}],(function(t,e,n,r){if(t&&e&&n){var i={scopeKey:n};return Nn(t,Rn.getIndex(e,i,r))}return null}))},getByFilterOrder:function(t){return Object(wt.createSelector)([In(t),Un(t),function(t,e){return e},function(t,e,n){return n}],(function(t,e,n,r){return t&&e?Nn(t,Rn.getIndex(e,n,r)):null}))},getBatchByFilterOrder:function(t){return Object(wt.createSelector)([In(t),Un(t),function(t,e){return e},function(t,e,n){return n}],(function(t,e,n,r){return t&&e?function(t,e){if(!e||!e.index)return null;for(var n=[],r=0,i=Object.entries(e.index);r<i.length;r++){var o=Ln(i[r],2),a=(o[0],o[1]);if(a){var s=t[a];s?n.push(s):n.push(null)}else n.push(null)}return Wn(n)}(t,Rn.getIndex(e,n,r)):null}))},getByKey:Fn,getByKeysAsObject:function(t){return Tt()([In(t),function(t,e){return e}],(function(t,e){if(e&&e.length&&t&&!_t()(t)){var n=vt()(t,e);return _t()(n)?null:n}return null}))((function(t,e){return"".concat(e)}))},getByKeys:function(t){return Tt()([In(t),function(t,e){return e}],(function(t,e){if(e&&e.length&&t&&!_t()(t)){var n=[];return mt()(e,(function(e){t[e]&&n.push(t[e])})),Wn(n)}return null}))((function(t,e){return"".concat(e)}))},getDataByKey:function(t){return Object(wt.createSelector)([Fn(t)],(function(t){return t&&t.data?t.data:null}))},getDeletePermissionByKey:function(t){return Object(wt.createSelector)([Fn(t)],(function(t){return!(!t||!t.permissions)&&(t.permissions.activeUser&&t.permissions.activeUser.delete||t.permissions.guest&&t.permissions.guest.delete)}))},getEditedActive:function(t){return Object(wt.createSelector)([jn(t),Dn(t)],(function(t,e){return t&&t[e]?t[e]:null}))},getEditedAll:Vn,getEditedAllAsObject:jn,getEditedByKey:Bn,getEditedDataByKey:function(t){return Object(wt.createSelector)([Bn(t)],(function(t){return t&&t.data?t.data:null}))},getEditedKeys:function(t){return Object(wt.createSelector)([Vn(t)],(function(t){return t&&!_t()(t)?t.map((function(t){return t.key})):null}))},getIndex:Gn,getIndexed:function(t){return Tt()([In(t),Un(t),Yn,function(t,e){return e},function(t,e,n){return n},function(t,e,n,r){return r},function(t,e,n,r,i){return i},function(t,e,n,r,i,o){return o}],(function(t,e,n,r,i,o,a,s){if(t&&e){var u=Rn.mergeFilters(n,r,i),l=Rn.getIndex(e,u,o);if(l&&l.index){for(var c=[],h=Math.min(a+s-1,l.count),f=a;f<=h;f++){var p=l.index[f];if(p){var d=t[p];d?c.push(d):c.push({key:p})}else c.push(null)}return c.length?c:null}return null}return null}))((function(t,e,n,r,i,o){return"".concat(JSON.stringify(e),":").concat(JSON.stringify(n),":").concat(JSON.stringify(r),":").concat(i,":").concat(o)}))},getIndexes:Un,getIndexChangedOn:function(t){return Object(wt.createSelector)([Gn(t)],(function(t){return t&&t.changedOn?t.changedOn:null}))},getIndexPage:Kn,getIndexedPage:function(t){return Object(wt.createSelector)([Kn(t),In(t)],(function(t,e){return t&&t.length&&t.map((function(t){return e[t]||null}))||null}))},getIndexTotal:function(t){return Object(wt.createSelector)([Gn(t)],(function(t){return t&&(t.count||0===t.count)?t.count:null}))},getIndexesByFilteredItem:function(t){return Object(wt.createSelector)([Un(t),function(t,e){return e}],(function(t,e){return _t()(t)?null:t.filter((function(t){return Rn.itemFitFilter(t.filter,e)}))}))},getKeysToLoad:function(t){return Object(wt.createSelector)([In(t),function(t,e){return e}],(function(t,e){return e&&e.length?t?Wn(e.filter((function(e){return!t[e]||t[e].outdated}))):e:null}))},getStateToSave:function(t){return function(e){var n=t(e).activeKey;if(n)return{activeKey:n};var r=t(e).activeKeys;return r?{activeKeys:r}:{}}},getUpdatePermissionByKey:function(t){return Object(wt.createSelector)([Fn(t)],(function(t){return!(!t||!t.permissions)&&(t.permissions.activeUser&&t.permissions.activeUser.update||t.permissions.guest&&t.permissions.guest.update)}))},getUsesForIndex:function(t){return Tt()(zn(t),(function(t,e){return e}),(function(t,e,n){return n}),Yn,(function(t,e,n,r){var i=null;return _t()(t)||mt()(t,(function(t){mt()(t,(function(t){var o=Rn.mergeFilters(r,t.filterByActive,t.filter);ut()(e,o)&&ut()(n,t.order)&&(i?i.inUse.push({start:t.start,length:t.length}):i={filter:e,order:t.order,inUse:[{start:t.start,length:t.length}]})}))})),i?{filter:i.filter,order:i.order,uses:qn(Object.values(i.inUse))}:null}))((function(t,e,n){var r=JSON.stringify(n),i=JSON.stringify(at()(e,(function(t,e){return"".concat(e,":").concat(t)})).sort());return"".concat(r,":").concat(i)}))},getUsedIndexPages:function(t){return Object(wt.createSelector)([zn(t),Yn],(function(t,e){var n=[],r=[];return _t()(t)||mt()(t,(function(t){t.forEach((function(t){var r=Rn.mergeFilters(e,t.filterByActive,t.filter),i=ct()(n,(function(e){return ut()(e.filter,r)&&ut()(e.order,t.order)}));i?i.inUse.push({start:t.start,length:t.length}):n.push({filter:r,order:t.order,inUse:[{start:t.start,length:t.length}]})}))})),mt()(n,(function(t){t.inUse&&Object.keys(t.inUse).length&&r.push({filter:t.filter,order:t.order,uses:qn(Object.values(t.inUse))})})),r.length?r:null}))},getUsedKeys:function(t){return function(e){var n=t(e).inUse.keys;if(n){var r=dt()(ft()(Object.values(n)));return r.length?r:null}return null}},getUsesWithActiveDependency:function(t){return Object(wt.createSelector)([zn(t),Yn,function(t,e){return e}],(function(t,e,n){var r=[],i=[];return n&&!_t()(t)?(at()(t,(function(t){at()(t,(function(t){if(it()(n,(function(e,n,r){return e&&n&&t.filterByActive&&t.filterByActive[r]}),!0)){var i=Rn.mergeFilters(e,t.filterByActive,t.filter),o=ct()(r,(function(e){return ut()(e.filter,i)&&ut()(e.order,t.order)}));o?o.inUse.push({start:t.start,length:t.length}):r.push({filter:i,order:t.order,inUse:[{start:t.start,length:t.length}]})}}))})),at()(r,(function(t){t.inUse&&Object.keys(t.inUse).length&&i.push({filter:t.filter,order:t.order,uses:qn(Object.values(t.inUse))})})),i.length?i:null):null}))},_mergeIntervals:qn},Zn=function(t){return t._deprecatedSelections},Jn={getActive:Xn.getActive(Zn),getActiveKey:Xn.getActiveKey(Zn),getSubstate:Zn},Qn=function(t){return t.app.configuration},$n=function(t){return t.app.localConfiguration},tr={getKey:function(t){return t.app.key},getConfiguration:Object(wt.createSelector)([Qn,function(t,e){return e}],(function(t,e){return Mt()(t,e,null)})),getCompleteConfiguration:Qn,getLocalConfiguration:Object(wt.createSelector)([$n,function(t,e){return e}],(function(t,e){return Mt()(t,e,null)})),getCompleteLocalConfiguration:$n},er=function(t){return t.areas.areaTreeLevels},nr=function(t){return t.areas.areaTrees},rr={areaTreeLevels:{getAll:Xn.getAll(er),getAllAsObject:Xn.getAllAsObject(er),getAllForActiveScope:Xn.getAllForActiveScope(er),getActiveKey:Xn.getActiveKey(er),getActive:Xn.getActive(er),getSubstate:er},areaTrees:{getAll:Xn.getAll(nr),getAllAsObject:Xn.getAllAsObject(nr),getAllForActiveScope:Xn.getAllForActiveScope(nr),getActiveKey:Xn.getActiveKey(nr),getActive:Xn.getActive(nr),getByKeys:Xn.getByKeys(nr),getByKeysAsObject:Xn.getByKeysAsObject(nr),getSubstate:nr}},ir=function(t){return t.areaRelations},or=Xn.getAll(ir),ar=Object(wt.createSelector)([or],(function(t){return t?at()(t,(function(t){return t.data})):null})),sr={getSubstate:ir,getFilteredData:Object(wt.createSelector)([ar,function(t,e){return e}],(function(t,e){return t&&t.length>0&&e&&!_t()(e)?It()(t,e):null})),getFilteredDataSourceKeysGroupedByLayerKey:Tt()([or,function(t,e){return e}],(function(t,e){if(t&&t.length){var n={};return Ot()(e,(function(e){var r=It()(t,{data:e.filter});r.length&&(n[e.key]=r.map((function(t){return{spatialDataSourceKey:t.data.spatialDataSourceKey,fidColumnName:t.data.fidColumnName}})))})),_t()(n)?null:n}return null}))((function(t,e){return JSON.stringify(e)}))},ur=function(t){return t.attributes},lr={getAttributes:Xn.getAll(ur),getActive:Xn.getActive(ur),getActiveKey:Xn.getActiveKey(ur),getAllAsObject:Xn.getAllAsObject(ur),getByKey:Xn.getByKey(ur),getByKeys:Xn.getByKeys(ur),getDataByKey:Xn.getDataByKey(ur),getDeletePermissionByKey:Xn.getDeletePermissionByKey(ur),getEditedDataByKey:Xn.getEditedDataByKey(ur),getUpdatePermissionByKey:Xn.getUpdatePermissionByKey(ur),getStateToSave:Xn.getStateToSave(ur),getSubstate:ur},cr=function(t){return t.attributeRelations},hr=Xn.getAll(cr),fr=Xn.getIndexed(cr),pr=Tt()([hr,function(t,e){return e}],(function(t,e){if(t&&t.length){var n=e.attributeKey.in||[e.attributeKey],r=Kt()(e,"attributeKey"),i=It()(t,{data:r}),o=It()(i,(function(t){return!t.data.attributeKey||!!Ut()(n,t.data.attributeKey)}));return o.length?o.map((function(t){return{attributeDataSourceKey:t.data.attributeDataSourceKey,attributeKey:t.data.attributeKey,periodKey:t.data.periodKey,fidColumnName:t.data.fidColumnName}})):null}return null}))((function(t,e){return JSON.stringify(e)})),dr=Tt()([hr,function(t,e){return e},function(t,e,n){return n}],(function(t,e,n){if(t&&t.length){var r={};return Ot()(e,(function(e){var i=ct()(n,{key:e.key}).attributeKeys;if(!i)return null;var o=It()(t,{data:e.attributeFilter}),a=It()(o,(function(t){return!t.data.attributeKey||!!Ut()(i,t.data.attributeKey)}));a.length&&(r[e.key]=a.map((function(t){return{attributeDataSourceKey:t.data.attributeDataSourceKey,attributeKey:t.data.attributeKey,fidColumnName:t.data.fidColumnName}})))})),_t()(r)?null:r}return null}))((function(t,e,n,r){return r})),gr=Object(wt.createSelector)([hr],(function(t){return t?at()(t,(function(t){return t.data})):null})),mr=Object(wt.createSelector)([gr,function(t,e){return e}],(function(t,e){return t&&t.length>0&&e&&!_t()(e)?It()(t,e):null})),yr=Tt()([gr,function(t,e){return e}],(function(t,e){return t&&t.length>0&&e&&!_t()(e)?It()(t,(function(t){var n=!0;return Dt()(e,(function(e,r){t.hasOwnProperty(r)&&(Ct()(e)&&e.in&&jt()(e.in)?Ut()(e.in,t[r])||(n=!1):t[r]!==e&&(n=!1))})),n})):null}))((function(t,e,n){return n?JSON.stringify(e)+":"+JSON.stringify(n):JSON.stringify(e)})),vr=Tt()([yr],(function(t){return t?t.map((function(t){return{attributeDataSourceKey:t.attributeDataSourceKey,fidColumnName:t.fidColumnName}})):null}))((function(t,e,n){return"".concat(JSON.stringify(e),":").concat(JSON.stringify(n))})),Er=Object(wt.createSelector)([mr],(function(t){return t&&!_t()(t)?t[0].dataSourceKey:null})),_r=Object(wt.createSelector)([gr,function(t,e){return e}],(function(t,e){if(e&&!_t()(e)){var n={};return e.forEach((function(e){if(e.data&&e.data.key)if(t){var r=It()(t,e.filter);_t()(r)?n[e.data.key]=[null]:n[e.data.key]=r}else n[e.data.key]=[null]})),_t()(n)?null:n}return null})),br=Object(wt.createSelector)([_r],(function(t){if(t){var e={};return Dt()(t,(function(t,n){e[n]=t})),_t()(e)?null:e}return null})),Sr={getFilteredDataSourceKeysWithFidColumn:pr,getFilteredDataSourceKeysWithFidColumnGroupedByLayerKey:dr,getIndexed:fr,getAllData:gr,getDataSourceKeyFiltered:Er,getFiltered:mr,getFilteredRelations:yr,getFilteredDataGroupedByLayerKey:_r,getDataSourceRelationsGroupedByLayerKey:br,getDataSourceKeysGroupedByLayerKey:Object(wt.createSelector)([br],(function(t){if(t){for(var e={},n=0,r=Object.entries(t);n<r.length;n++){var i=Ln(r[n],2),o=i[0],a=i[1];e[o]=a.map((function(t){return t?t.attributeDataSourceKey:null}))}return e}return null})),getDataSourcesFromFilteredRelations:vr,getSubstate:cr},wr=function(t){return t.attributeData},xr=Xn.getAllAsObject(wr),Tr=Xn.getBatchByFilterOrder(wr),Lr=Xn.getByKey(wr),Cr=Object(wt.createSelector)([xr,Sr.getDataSourceKeyFiltered],(function(t,e){return e&&t&&!_t()(t)&&t[e]?t[e]:null})),Ar=Tt()([xr,Sr.getDataSourcesFromFilteredRelations],(function(t,e){if(t&&!_t()(t)&&e){var n={};return at()(e,(function(e){var r=t[e.attributeDataSourceKey],i=e.fidColumnName,o=e.fidColumnName;if(r&&r.attributeData&&r.attributeData.features){var a=r.attributeData.features;at()(a,(function(t){var e=t.properties[i],r=t.properties,a=(r[i],Tn(r,[i].map(An))),s=[],u=n[e];at()(a,(function(t,e){u?u.data.values.push({key:e,value:t}):s.push({key:e,value:t})})),u||(n[e]={key:e,data:{name:t.properties[o],values:s}})}))}})),Ft()(n)}return null}))((function(t,e){return"".concat(JSON.stringify(e))})),Mr=Tt()([xr,Sr.getDataSourcesFromFilteredRelations],(function(t,e){if(t&&!_t()(t)&&e){var n={};if(1===e.length){var r=e[0],i=t[r.attributeDataSourceKey],o=r.fidColumnName;if(i&&i.attributeData&&i.attributeData.features){var a=i.attributeData.features;at()(a,(function(t){var e=t.properties[o],r=t.properties,i=(r[o],Tn(r,[o].map(An)));n[e]={key:e,data:{name:Ft()(i)[0]}}}))}return Ft()(n)}return null}return null}))((function(t,e,n){return"".concat(JSON.stringify(e),":").concat(JSON.stringify(n))})),Rr={getSubstate:wr,getAllAsObject:xr,getByKey:Lr,getFiltered:Cr,getBatchByFilterOrder:Tr,getFilteredGroupedByLayerKey:Object(wt.createSelector)([xr,Sr.getDataSourceKeysGroupedByLayerKey,Sr.getDataSourceRelationsGroupedByLayerKey],(function(t,e,n){if(e){var r={};return Dt()(e,(function(e,i){var o=[];at()(e,(function(e){e&&t&&!_t()(t)&&t[e]&&!_t()(n)&&n[i]?o.push(bn({},t[e],{attributeRelationData:ct()(n[i],(function(t){return t.attributeDataSourceKey===e}))||null})):o.push(null)})),r[i]=o})),r}return null})),getFilteredGroupedByFid:Ar,getNamesByFid:Mr},Or=function(t){return t.attributeDataSources},Pr=Xn.getAllAsObject(Or),Ir=Xn.getBatchByFilterOrder(Or),Nr=Xn.getByKey(Or),Dr=Xn.getByKeys(Or),kr={getSubstate:Or,getFilteredDataSources:Tt()([Pr,Sr.getFilteredDataSourceKeysWithFidColumn,Rr.getAllAsObject,function(t,e){return e}],(function(t,e,n,r){if(!_t()(e)&&n&&t){var i=[];return Ot()(e,(function(e){var r=e.attributeDataSourceKey,o=bn({},t[r]),a=n[r];a&&a.attributeData&&a.attributeData.features&&(o.data.features=a.attributeData.features.map((function(t){var n;return{properties:(n={},En(n,e.attributeKey,t.properties[o.data.columnName]),En(n,e.fidColumnName,t.properties[e.fidColumnName]),n)}}))),i.push({dataSource:o,attributeKey:e.attributeKey,periodKey:e.periodKey,fidColumnName:e.fidColumnName})})),i.length?i:null}return null}))((function(t,e){return JSON.stringify(e)})),getFilteredDataSourcesGroupedByLayerKey:Tt()([Sr.getFilteredDataSourceKeysWithFidColumnGroupedByLayerKey,Pr,Rr.getAllAsObject,function(t,e,n){return n}],(function(t,e,n,r){if(t&&!_t()(e)){var i={};return Dt()(t,(function(t,r){i[r]=[],Ot()(t,(function(t){if(e[t.attributeDataSourceKey]){var o=bn({},e[t.attributeDataSourceKey]),a=n[t.attributeDataSourceKey];a&&a.attributeData&&a.attributeData.features&&(o.data.features=a.attributeData.features.map((function(e){var n;return{properties:(n={},En(n,t.attributeKey,e.properties[o.data.columnName]),En(n,t.fidColumnName,e.properties[t.fidColumnName]),n)}}))),i[r].push({dataSource:o,attributeKey:t.attributeKey,fidColumnName:t.fidColumnName})}}))})),i}return null}))((function(t,e,n,r){return r})),getFiltered:Object(wt.createSelector)([Pr,Sr.getDataSourceKeyFiltered],(function(t,e){return e&&t&&!_t()(t)&&t[e]?t[e]:null})),getBatchByFilterOrder:Ir,getFilteredGroupedByLayerKey:Object(wt.createSelector)([Pr,Sr.getDataSourceKeysGroupedByLayerKey,Sr.getDataSourceRelationsGroupedByLayerKey],(function(t,e,n){if(e){var r={};return Dt()(e,(function(e,i){var o=[];at()(e,(function(e){e&&t&&!_t()(t)&&t[e]&&!_t()(n)&&n[i]?o.push(bn({},t[e],{attributeRelationData:ct()(n[i],(function(t){return t.attributeDataSourceKey===e}))||null})):o.push(null)})),r[i]=o})),r}return null})),getByKey:Nr,getByKeys:Dr},Fr=function(t){return t.attributeSets},Vr=Xn.getAll(Fr),jr=Xn.getActiveKeys(Fr),Br=Xn.getActive(Fr),Ur=Xn.getStateToSave(Fr),Gr=Object(wt.createSelector)([Vr,function(t,e){return e}],(function(t,e){if(t&&e){jt()(e)||(e=[e]);var n=It()(t,(function(t){return Ut()(e,t.data.topic)}));return n.length?n:null}return null})),Kr={getActive:Br,getActiveKeys:jr,getAttributeSets:Vr,getByTopics:Gr,getStateToSave:Ur,getUniqueAttributeKeysForTopics:Object(wt.createSelector)([Gr],(function(t){if(t&&t.length){var e=t.map((function(t){return t.data.attributes})),n=zt()(dt()(ft()(e)));return n.length?n:null}return null}))},Wr=function(t){return t.attributeStatistics},zr=Xn.getAllAsObject(Wr),Yr={getByKey:Xn.getByKey(Wr),getSubstate:Wr,getAllAsObject:zr,getBatchByFilterOrder:Xn.getBatchByFilterOrder(Wr)},Hr=function(t){return t.cases},qr=Xn.getAll(Hr),Xr=Xn.getAllAsObject(Hr),Zr=Xn.getAllForActiveScope(Hr),Jr={getActive:Xn.getActive(Hr),getActiveKey:Xn.getActiveKey(Hr),getActiveKeys:Xn.getActiveKeys(Hr),getActiveModels:Xn.getActiveModels(Hr),getAll:qr,getAllAsObject:Xr,getAllForActiveScope:Zr,getByKeys:Xn.getByKeys(Hr),getDataByKey:Xn.getDataByKey(Hr),getDeletePermissionByKey:Xn.getDeletePermissionByKey(Hr),getEditedDataByKey:Xn.getEditedDataByKey(Hr),getIndexed:Xn.getIndexed(Hr),getUpdatePermissionByKey:Xn.getUpdatePermissionByKey(Hr),getSubstate:Hr},Qr=function(t,e){return t.charts.sets[e]},$r=Object(wt.createSelector)([Qr,function(t){return t.charts.charts}],(function(t,e){if(t&&t.charts&&t.charts.length){var n={};return mt()(t.charts,(function(t){n[t]=e[t]})),n}return null}));var ti={getChartConfiguration:Tt()([function(t,e){return t.charts.charts[e]},function(t){return{activeScopeKey:t.scopes.activeKey,activePeriodKey:t.periods.activeKey,activePeriodKeys:t.periods.activeKeys,activeAttributeKey:t.attributes.activeKey}},function(t,e,n){return n}],(function(t,e,n){if(t&&e){var r=function(t,e,n){var r={},i={},o={};t&&t.hasOwnProperty("scope")?r.scopeKey=t.scope:n&&n.scope&&(i.scope=!0,e&&e.activeScopeKey&&(o.scopeKey=e.activeScopeKey));t&&t.hasOwnProperty("periods")?t.periods.length>1?r.periodKey={in:t.periods}:r.periodKey=t.periods[0]:n&&n.period&&(i.period=!0,e&&e.activePeriodKey?o.periodKey=e.activePeriodKey:e&&e.activePeriodKeys&&(o.periodKey={in:e.activePeriodKeys}));t&&t.hasOwnProperty("attributes")?t.attributes.length>1?r.attributeKey={in:t.attributes}:r.attributeKey=t.attributes[0]:n&&n.attribute&&(i.attribute=!0,e&&e.activeAttributeKey?o.attributeKey=e.activeAttributeKey:e&&e.activeAttributeKeys&&(o.attributeKey={in:e.activeAttributeKeys}));t&&t.hasOwnProperty("layerTemplate")&&(r.layerTemplateKey=t.layerTemplate);return o=bn({},r,{},o),{filter:r,filterByActive:i,mergedFilter:o}}(t.data,e,n);return bn({},t,{},r)}return null}))((function(t,e){return"".concat(e&&e.key)})),getChartsBySetKeyAsObject:$r,getDataForChart:Tt()([Rr.getFilteredGroupedByFid,function(t,e,n){return n}],(function(t,e){return e&&t?t:null}))((function(t,e,n){return"".concat(JSON.stringify(e),":").concat(n)})),getNamesForChart:Tt()([Rr.getNamesByFid,function(t,e,n){return n}],(function(t,e){return e&&t?t:null}))((function(t,e,n){return"".concat(JSON.stringify(e),":").concat(n)})),getSetByKey:Qr},ei=function(t){return t.components},ni=Object(wt.createSelector)([ei,function(t,e){return e}],(function(t,e){return t&&e&&t[e]?t[e]:null})),ri={get:Object(wt.createSelector)([ni,function(t,e,n){return n}],(function(t,e){return Mt()(t,e,null)})),getDataByComponentKey:ni,getStateToSave:ei},ii={getActiveAoiData:Object(wt.createSelector)([function(t){return t.layerPeriods.byAoiKey},function(t){return t.aoi.activeKey}],(function(t,e){return t[e]})),getActivePlaceData:Object(wt.createSelector)([function(t){return t.layerPeriods.byPlaceKey},function(t){return t.places.activeKey}],(function(t,e){return t[e]})),getForActiveLpisCase:Object(wt.createSelector)([function(t){return t.layerPeriods.byKey},function(t){return t.specific.lpisChangeReviewCases.activeCaseKey}],(function(t,e){return t["lpisCase"+e]}))},oi=function(t){return t.layerTemplates},ai=Xn.getActiveKey(oi),si=Xn.getAll(oi),ui=Xn.getAllAsObject(oi),li=Xn.getByKey(oi),ci=Xn.getDataByKey(oi),hi=Xn.getDeletePermissionByKey(oi),fi=Xn.getEditedDataByKey(oi),pi=Xn.getUpdatePermissionByKey(oi),di=Tt()([ui,function(t,e){return e}],(function(t,e){if(t&&!_t()(t)&&e){var n={};return e.forEach((function(e){e.filter.layerTemplateKey&&(n[e.key]=t[e.filter.layerTemplateKey])})),n}return null}))((function(t,e){return e.map((function(t){return t.filter&&t.filter.layerTemplateKey})).join(",")})),gi=Tt()([ui,function(t,e){return e}],(function(t,e){if(t&&!_t()(t)&&e){var n={};return e.forEach((function(e){e.filter.layerTemplateKey&&(n[e.filter.layerTemplateKey]=t[e.filter.layerTemplateKey])})),n}return null}))((function(t,e){return e.map((function(t){return t.filter&&t.filter.layerTemplateKey})).join(",")})),mi={getActiveKey:ai,getAll:si,getAllAsObject:ui,getByKey:li,getDataByKey:ci,getDeletePermissionByKey:hi,getEditedDataByKey:fi,getIndexed:Xn.getIndexed(oi),getUpdatePermissionByKey:pi,getFilteredTemplatesGroupedByLayerKey:di,getFilteredTemplatesGroupedByLayerTemplateKey:gi,getSubstate:oi},yi=function(t){return t.layerTrees},vi={getAll:Xn.getAll(yi),getAllAsObject:Xn.getAllAsObject(yi),getAllForActiveScope:Xn.getAllForActiveScope(yi),getByFilterOrder:Xn.getByFilterOrder(yi),getDataByKey:Xn.getDataByKey(yi),getDeletePermissionByKey:Xn.getDeletePermissionByKey(yi),getEditedDataByKey:Xn.getEditedDataByKey(yi),getUpdatePermissionByKey:Xn.getUpdatePermissionByKey(yi),getSubstate:yi},Ei=new Pe(20),_i=Tt()([function(t){return t},function(t,e){return e},function(t,e,n){return n}],(function(t,e,n){var r=bn({},t[n]);t.layerTemplateKey&&(r.layerTemplateKey=t.layerTemplateKey),t.areaTreeLevelKey&&(r.areaTreeLevelKey=t.areaTreeLevelKey);var i={};if(t.filterByActive){var o=t.filterByActive;o.attribute&&e.activeAttributeKey&&(i.attributeKey=e.activeAttributeKey),o.case&&e.activeCaseKey&&(i.caseKey=e.activeCaseKey),o.layerTemplate&&e.activeLayerTemplateKey&&(i.layerTemplateKey=e.activeLayerTemplateKey),o.areaTreeLevelKey&&e.areaTreeLevelKey&&(i.areaTreeLevelKey=e.areaTreeLevelKey),o.period&&e.activePeriodKey&&(i.periodKey=e.activePeriodKey),o.place&&e.activePlaceKey&&(i.placeKey=e.activePlaceKey),o.scenario&&e.activeScenarioKey&&(i.scenarioKey=e.activeScenarioKey),o.scope&&e.activeScopeKey&&(i.scopeKey=e.activeScopeKey)}return bn({},r,{},i)}))((function(t,e){return"".concat(t,"_").concat(e)}));function bi(t,e){var n={};return Dt()(e,(function(e,r){var i=null===t||void 0===t?void 0:t[r].data;if(i){var o=i.style,a=i.color,s=i.hoveredColor;i.featureKeysFilter&&(n[r]={keys:i.featureKeysFilter.keys},o?(n[r].style=o,n[r].hoveredStyle=o):(n[r].style={outlineColor:a,outlineWidth:2},n[r].hoveredStyle={outlineColor:s,outlineWidth:2}))}})),n}var Si={getBackgroundLayersWithFilter:Tt()([Xn.getAllActiveKeys,function(t,e){return e},function(t,e,n){return n}],(function(t,e,n){return e=JSON.parse(e),[{key:n,filter:_i(e,t,"metadataModifiers")}]}))((function(t,e,n){return"".concat(e,":").concat(n)})),getLayersWithFilter:Tt()([Xn.getAllActiveKeys,function(t,e){return e}],(function(t,e){return(e=JSON.parse(e))&&e.length?at()(e,(function(e){return{key:e.key,filter:_i(e,t,"metadataModifiers"),attributeFilter:_i(e,t,"attributeMetadataModifiers")}})):null}))((function(t,e){return e})),getLayersStateWithoutFeatures:function(t){var e=[];return mt()(t,(function(t){var n;(null===t||void 0===t||null===(n=t.options)||void 0===n?void 0:n.features)?e.push(bn({},t,{options:bn({},t.options,{features:null})})):e.push(t)})),e},prepareLayerByDataSourceType:function(t,e,n,r,i,o,a,s,u,l){var c,h,f=i&&i.options,p=e.data,d=(p.attribution,p.nameInternal,p.type),g=(p.tableName,p.layerName,p.features),m=p.selected,y=Tn(p,["attribution","nameInternal","type","tableName","layerName","features","selected"]);if("wmts"===d)y.url=y.urls[0];else if("wms"===d){var v=y,E=v.url,_=v.params,b=v.configuration,S=Tn(v,["url","params","configuration"]),w=!(!b||!b.hasOwnProperty("singleTile"))&&b.singleTile;y={params:bn({},_,{layers:S.layers,styles:S.styles}),singleTile:w,url:E}}else"vector"===d&&g&&(a&&(g=function(t,e,n,r){var i=JSON.stringify(t),o=Ei.findByKey(i),a={};o&&o.features===e?a=o.finalFeaturesObject:e.forEach((function(t){var e=t.properties[r];a[e]=bn({},t)}));return n.forEach((function(t){var e=t.dataSource.data.features;e&&e.forEach((function(t){var e=t.properties[r];Dt()(t.properties,(function(t,n){a[e].properties[n]=t}))}))})),Ei.addOrUpdate({cacheKey:i,features:e,finalFeaturesObject:a}),Object.values(a)}(t,g,a,n)),s&&(null===f||void 0===f?void 0:f.selected)&&(m=bi(s,f.selected)),y=bn({},f,{features:g,selected:m,fidColumnName:n}),o&&o.data&&"definition"===o.data.source&&(y.style=o.data.definition));return l&&(y.period=l),{key:t+"_"+r,name:(null===i||void 0===i?void 0:i.name)||(null===u||void 0===u||null===(c=u.data)||void 0===c?void 0:c.nameDisplay),description:null===u||void 0===u||null===(h=u.data)||void 0===h?void 0:h.description,layerKey:t,opacity:i&&i.opacity||1,type:d,options:y}},prepareSelection:bi},wi=function(t){return t.spatialVectorDataSources},xi=Xn.getAll(wi),Ti=Xn.getAllAsObject(wi),Li=Xn.getByKey(wi),Ci=Xn.getBatchByFilterOrder(wi),Ai=Xn.getDataByKey(wi),Mi=function(t,e){return t.spatialDataSources.vector.featuresBySourceKey[e.dataSourceKey]},Ri={noMemoGetFeaturesBySourceKey:Mi,noMemoGetEditedFeaturesBySourceKey:function(t,e){return t.spatialDataSources.vector.editedFeaturesBySourceKey[e.dataSourceKey]},noMemoGetSelectedFeaturesBySourceKey:function(t,e){return It()(Mi(t,e),(function(n){return Ut()(function(t,e){return t.spatialDataSources.vector.selectedFeaturesKeysBySourceKey[e.dataSourceKey]}(t,e),n.key)}))},getBatchByFilterOrder:Ci,getSubstate:wi,getEditedFeatures:function(t){return t.spatialDataSources.vector.editedFeaturesBySourceKey},getAll:xi,getAllAsObject:Ti,getByKey:Li,getDataByKey:Ai},Oi=function(t){return t.spatialRelations},Pi=Xn.getAll(Oi),Ii=Xn.getByKey(Oi),Ni=Xn.getByKeys(Oi),Di=Object(wt.createSelector)([Pi],(function(t){return t?at()(t,(function(t){return t.data})):null})),ki=Object(wt.createSelector)([Di,function(t,e){return e}],(function(t,e){return t&&t.length>0&&e&&!_t()(e)?It()(t,e):null})),Fi=Tt()([Pi,function(t,e){return e}],(function(t,e){if(t&&t.length){var n={};return Ot()(e,(function(e){var r=It()(t,{data:e.filter});r.length&&(n[e.key]=r.map((function(t){return{spatialDataSourceKey:t.data.spatialDataSourceKey,fidColumnName:t.data.fidColumnName}})))})),_t()(n)?null:n}return null}))((function(t,e){return JSON.stringify(e)})),Vi=Tt()([Pi,function(t,e){return e}],(function(t,e){if(t&&t.length){var n={};return Ot()(e,(function(e){var r=It()(t,{data:e.filter}),i=e.filter.layerTemplateKey;i&&r.length&&(n[i]=r)})),_t()(n)?null:n}return null}))((function(t,e){return e.map((function(t){return t.filter&&t.filter.layerTemplateKey})).join(",")})),ji=Object(wt.createSelector)([Di,function(t,e){return e}],(function(t,e){if(e&&!_t()(e)){var n={};return e.forEach((function(e){var r=e.key||e.data&&e.data.key;if(r)if(t&&t.length){var i=Xe()(e.filter);delete i.attributeKey;var o=It()(t,i);_t()(o)?n[r]=[null]:n[r]=o}else n[r]=[null]})),_t()(n)?null:n}return null})),Bi=Object(wt.createSelector)([ki],(function(t){return t&&t.length?at()(t,(function(t){return t.spatialDataSourceKey})):null})),Ui=Object(wt.createSelector)([Di,function(t,e){return e}],(function(t,e){if(t&&!_t()(t)&&e&&!_t()(e)){var n=t.filter((function(t){return e.includes(t.layerTemplateKey)}));return _t()(n)?null:n}return null})),Gi=Object(wt.createSelector)([ji],(function(t){if(t){var e={};return Dt()(t,(function(t,n){e[n]=t})),_t()(e)?null:e}return null})),Ki={getSubstate:Oi,getByKey:Ii,getByKeys:Ni,getAllData:Di,getFilteredData:ki,getFilteredDataSourceKeysGroupedByLayerKey:Fi,getFilteredDataGroupedByLayerTemplateKey:Vi,getDataSourceKeysFiltered:Bi,getDataSourceKeysGroupedByLayerKey:Object(wt.createSelector)([Gi],(function(t){if(t){for(var e={},n=0,r=Object.entries(t);n<r.length;n++){var i=Ln(r[n],2),o=i[0],a=i[1];e[o]=a.map((function(t){return t?t.spatialDataSourceKey:null}))}return e}return null})),getDataSourceRelationsGroupedByLayerKey:ji,getDataSourceRelationsByLayerTemplateKeys:Ui,getDataSourceRelationsForLayerKey:Object(wt.createSelector)([Gi,function(t,e){return e},function(t,e){return e}],(function(t,e){return t&&t[e]||null})),getFilteredDataGroupedByLayerKey:ji},Wi=function(t){return t.spatialData},zi={getAllAsObject:Xn.getAllAsObject(Wi),getByKey:Xn.getByKey(Wi),getSubstate:Wi},Yi=function(t){return t.spatialDataSources},Hi=Xn.getAllAsObject(Yi),qi=Xn.getByKeys(Yi),Xi={getSubstate:Yi,getByKey:Xn.getByKey(Yi),getByKeys:qi,getFilteredSourcesGroupedByLayerKey:Tt()([Hi,Ki.getFilteredDataSourceKeysGroupedByLayerKey,sr.getFilteredDataSourceKeysGroupedByLayerKey,zi.getAllAsObject],(function(t,e,n,r){var i={};if(n&&(i=bn({},i,{},n)),e&&(i=bn({},i,{},e)),i&&!_t()(t)){var o={};return Dt()(i,(function(e,n){o[n]=[],Ot()(e,(function(e){if(t[e.spatialDataSourceKey]){var i=bn({},t[e.spatialDataSourceKey]),a=r[e.spatialDataSourceKey];a&&a.spatialData&&a.spatialData.features&&(i.data.features=a.spatialData.features),o[n].push({dataSource:i,fidColumnName:e.fidColumnName})}}))})),o}return null}))((function(t,e){return JSON.stringify(e)})),getFilteredGroupedByLayerKey:Object(wt.createSelector)([Hi,Ki.getDataSourceKeysGroupedByLayerKey,Ki.getDataSourceRelationsGroupedByLayerKey],(function(t,e,n){if(e&&Object.keys(t).length){var r={};return Dt()(e,(function(e,i){var o=[];e.forEach((function(e){e&&t&&!_t()(t)&&t[e]&&!_t()(n)&&n[i]?o.push(bn({},t[e],{spatialRelationData:ct()(n[i],(function(t){return t.spatialDataSourceKey===e}))||null})):o.push(null)})),r[i]=o})),r}return null})),getFilteredData:Object(wt.createSelector)([Hi,function(t,e){return e}],(function(t,e){return t&&t.length>0&&e&&!_t()(e)?It()(t,e):null})),vector:Ri},Zi=function(t){return t.styles},Ji=Xn.getAll(Zi),Qi=Xn.getAllAsObject(Zi),$i=Tt()([Qi,function(t,e){return e}],(function(t,e){if(t&&!_t()(t)&&e){var n={};return e.forEach((function(e){e.styleKey&&(n[e.key]=t[e.styleKey])})),n}return null}))((function(t,e,n){return n})),to={getAll:Ji,getAllAsObject:Qi,getByKey:Xn.getByKey(Zi),getGroupedByLayerKey:$i,getSubstate:Zi},eo=function(t){return t.selections},no=Xn.getActive(eo),ro=Xn.getActiveKey(eo),io=Xn.getAllAsObject(eo),oo={getActiveKey:ro,getActive:no,getAllAsObject:io,getAllAsObjectWithStyles:Object(wt.createSelector)([io,to.getAllAsObject],(function(t,e){if(t){if(e){var n={};return Dt()(t,(function(t,r){var i,o=null===(i=t.data)||void 0===i?void 0:i.styleKey;if(o&&e[o]){var a,s,u,l,c=null===(a=e[o].data)||void 0===a||null===(s=a.definition)||void 0===s||null===(u=s.rules)||void 0===u||null===(l=u[0].styles)||void 0===l?void 0:l[0];n[r]=c?bn({},t,{data:bn({},t.data,{style:c})}):t}else n[r]=t})),n}return t}return null}))},ao=function(t){return t.periods},so=Xn.getAll(ao),uo=Xn.getAllAsObject(ao),lo=Xn.getAllForActiveScope(ao),co=Xn.getActive(ao),ho=Xn.getActiveKey(ao),fo=Xn.getActiveKeys(ao),po=Xn.getActiveModels(ao),go=Xn.getByKey(ao),mo=Xn.getByKeys(ao),yo=Xn.getDataByKey(ao),vo=Xn.getDeletePermissionByKey(ao),Eo=Xn.getEditedDataByKey(ao),_o=Xn.getIndexed(ao),bo=Xn.getUpdatePermissionByKey(ao),So=Tt()([Sr.getFilteredRelations],(function(t){return t?at()(t,(function(t){return t.periodKey})):null}))((function(t,e,n){return JSON.stringify(e)+":"+JSON.stringify(n)})),wo={getActive:co,getActiveKey:ho,getActiveKeys:fo,getActiveModels:po,getAll:so,getAllAsObject:uo,getAllForActiveScope:lo,getByKey:go,getByKeys:mo,getByFullPeriodAsObject:Tt()([uo,function(t,e){return e},function(t,e,n){return n}],(function(t,e,n){return t&&e&&n?St()(t,(function(t){var r,i,o=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.start;if(o&&!le()(o).isBetween(e,n,null,"[]"))return!1;var a=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.end;return!(a&&!le()(a).isBetween(e,n,null,"[]"))})):t}))((function(t,e,n){return"".concat(e,"_").concat(n)})),getDataByKey:yo,getDeletePermissionByKey:vo,getEditedDataByKey:Eo,getFilteredGroupedByLayerTemplateKey:Tt()([uo,Ki.getFilteredDataGroupedByLayerTemplateKey,function(t,e){return e}],(function(t,e,n){if(t&&!_t()(t)&&e&&!_t()(e)&&n){for(var r={},i=0,o=Object.entries(e);i<o.length;i++){var a=Ln(o[i],2),s=a[0],u=a[1];r[s]=u.map((function(e){if(t[e.data.periodKey])return t[e.data.periodKey]})),r[s].filter((function(t){return t}))}return r}return null}))((function(t,e){return e.map((function(t){return t.filter&&t.filter.layerTemplateKey})).join(",")})),getFilteredGroupedByLayerKey:Tt()([uo,Ki.getFilteredDataGroupedByLayerKey,function(t,e){return e}],(function(t,e,n){if(t&&!_t()(t)&&e&&!_t()(e)&&n){for(var r={},i=0,o=Object.entries(e);i<o.length;i++){var a=Ln(o[i],2),s=a[0],u=a[1];r[s]=u.map((function(e){if(e&&t[e.periodKey])return t[e.periodKey]})),r[s].filter((function(t){return t}))}return r}return null}))((function(t,e){return e.map((function(t){return t.key})).join(",")})),getIndexed:_o,getKeysByAttributeRelations:So,getUpdatePermissionByKey:bo,getSubstate:ao,getActivePeriod:co,getPeriods:so},xo={center:{lat:50.099577,lon:14.42596},boxRange:1e7,tilt:0,roll:0,heading:0},To=new Pe(10),Lo=new Pe(10),Co=function(t){return t.maps.maps},Ao=function(t){return t.maps.sets},Mo=function(t){return t.maps.activeMapKey},Ro=Object(wt.createSelector)([Co,Mo],(function(t,e){return t&&!_t()(t)&&e&&t[e]?t[e]:null})),Oo=Object(wt.createSelector)([Co],(function(t){return t&&!_t()(t)?Object.values(t):null})),Po=Object(wt.createSelector)([Ao],(function(t){return t&&!_t()(t)?Object.values(t):null})),Io=Tt()([Co,function(t,e){return e}],(function(t,e){return t&&!_t()(t)&&e&&t[e]?t[e]:null}))((function(t,e){return e})),No=Object(wt.createSelector)([Io],(function(t){return t&&t.data&&t.data.layers||null})),Do=Object(wt.createSelector)([Ao,function(t,e){return e}],(function(t,e){return t&&!_t()(t)&&e&&t[e]?t[e]:null})),ko=Object(wt.createSelector)([Po,function(t,e){return e}],(function(t,e){if(t&&!_t()(t)&&e){var n=null;return t.forEach((function(t){t.maps&&Ut()(t.maps,e)&&(n=t)})),n}return null})),Fo=Object(wt.createSelector)([Do],(function(t){return t&&t.maps&&t.maps.length?t.maps:null})),Vo=Object(wt.createSelector)([Io],(function(t){return t&&t.data&&t.data.backgroundLayer?t.data.backgroundLayer:null})),jo=Object(wt.createSelector)([Io],(function(t){return t&&t.data&&t.data.layers?t.data.layers:null})),Bo=Object(wt.createSelector)([Io],(function(t){return t&&t.data&&t.data.metadataModifiers?t.data.metadataModifiers:null})),Uo=Object(wt.createSelector)([Io],(function(t){return t&&t.data&&t.data.filterByActive?t.data.filterByActive:null})),Go=Object(wt.createSelector)([ko],(function(t){return t&&t.data&&t.data.backgroundLayer?t.data.backgroundLayer:null})),Ko=Object(wt.createSelector)([ko],(function(t){return t&&t.data&&t.data.layers?t.data.layers:null})),Wo=Object(wt.createSelector)([ko],(function(t){return t&&t.data&&t.data.metadataModifiers?t.data.metadataModifiers:null})),zo=Object(wt.createSelector)([ko],(function(t){return t&&t.data&&t.data.filterByActive?t.data.filterByActive:null})),Yo=Object(wt.createSelector)([Do],(function(t){return t&&t.data&&t.data.layers?t.data.layers:null})),Ho=Object(wt.createSelector)([jo,function(t,e,n){return n}],(function(t,e){return t&&e?t.find((function(t){return t.key===e})):null})),qo=Tt()([Uo,zo],(function(t,e){return(e||t)&&bn({},e,{},t)}))((function(t,e){return e})),Xo=Tt()([Vo,Go],(function(t,e){return t||e}))((function(t,e){return"".concat(e)})),Zo=Tt()([jo,Ko,Bo,Wo,qo],(function(t,e,n,r,i){if(t||e){var o=[].concat(Cn(e||[]),Cn(t||[])),a={};return r&&(a=r),a=bn({},a,{},n),o=o.map((function(t){var e=t.metadataModifiers?bn({},a,{},t.metadataModifiers):a,n=t.filterByActive?bn({},i,{},t.filterByActive):i;return bn({},t,{metadataModifiers:e,filterByActive:n})})),Jt()(o,"key")}return null}))((function(t,e){return e})),Jo=Object(wt.createSelector)([Xo,Zo],(function(t,e){return e||t?(e=e||[],t?[t=bn({},t,{key:"pantherBackgroundLayer"})].concat(Cn(e)):e):null})),Qo=Object(wt.createSelector)([Mo,Do],(function(t,e){if(e){var n=Ut()(e.maps,t);return e.activeMapKey||n&&t||null}return null})),$o=Tt()([Io,ko],(function(t,e){if(t){if(e){var n=t.data&&t.data.view;e.sync&&!_t()(e.sync)&&(n=Xt()(n,(function(t,n){return e.sync[n]})));var r=e.data&&e.data.view,i=Ge.view.mergeViews(xo,r,n);return _t()(i)?null:i}var o=t.data&&t.data.view;return Ge.view.mergeViews(xo,o)}return null}))((function(t,e){return e})),ta=Tt()([Io,ko],(function(t,e){if(t){if(e){var n,r,i=null===(n=t.data)||void 0===n?void 0:n.viewLimits,o=null===(r=e.data)||void 0===r?void 0:r.viewLimits,a=Ge.view.mergeViews(o,i);return _t()(a)?null:a}var s;return null===(s=t.data)||void 0===s?void 0:s.viewLimits}return null}))((function(t,e){return e})),ea=Object(wt.createSelector)([Do],(function(t){if(t){var e=t.data&&t.data.view;return Ge.view.mergeViews(xo,e)}return null})),na=Object(wt.createSelector)([Do],(function(t){var e;return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.viewLimits)||null})),ra=Object(wt.createSelector)([Qo,Do,Co],(function(t,e,n){var r=n[t];if(r){if(e){var i=r.data&&r.data.view;e.sync&&!_t()(e.sync)&&(i=Xt()(i,(function(t,n){return e.sync[n]})));var o=e.data&&e.data.view,a=Ge.view.mergeViews(xo,o,i);return _t()(a)?null:a}var s=r.data&&r.data.view;return Ge.view.mergeViews(xo,s)}return null})),ia=function(t,e){if(e){if(e.type)return e;var n="pantherBackgroundLayer",r=Si.getBackgroundLayersWithFilter(t,JSON.stringify(e),n),i=Xi.getFilteredSourcesGroupedByLayerKey(t,r);if(i&&i[n]){var o=JSON.stringify(r),a=To.findByKey(o),s=i[n];if(a&&a.layersWithFilter===r&&a.layerDataSources===s)return a.mapLayers;var u=at()(i[n],(function(t,e){return Si.prepareLayerByDataSourceType(n,t.dataSource,t.fidColumnName,e)}));return To.addOrUpdate({cacheKey:o,layersWithFilter:r,layerDataSources:s,mapLayers:u}),u}return null}return null},oa=function(t,e){var n=JSON.stringify(Si.getLayersStateWithoutFeatures(e)),r=Si.getLayersWithFilter(t,n);if(r&&r.length){var i=Xi.getFilteredSourcesGroupedByLayerKey(t,r),o=mi.getFilteredTemplatesGroupedByLayerKey(t,r),a=kr.getFilteredDataSourcesGroupedByLayerKey(t,r,e,n),s=to.getGroupedByLayerKey(t,e,n),u=oo.getAllAsObjectWithStyles(t),l=wo.getFilteredGroupedByLayerKey(t,r),c=JSON.stringify(r),h=Lo.findByKey(c);if(h&&h.layersWithFilter===r&&h.dataSourcesByLayerKey===i&&h.layerTemplatesByLayerKey===o&&h.stylesByLayerKey===s&&h.attributeDataSourcesByLayerKey===a&&h.selections===u&&h.periodsByLayerKey===l)return h.mapLayers;var f=[];return e.forEach((function(e){if(e.layerTemplateKey&&i&&!_t()(i)){var n=function(t,e,n,r,i,o,a,s){var u=e.key,l=n[u],c=r&&r[u],h=i&&i[u],f=a&&a[u],p=s&&s[u],d=null;return l&&l.length&&l.forEach((function(n,r){var i=n&&n.dataSource,a=n&&n.fidColumnName;if("tacrGeoinvaze"===tr.getKey(t)){var s=tr.getLocalConfiguration(t,"apiGeoserverWMSProtocol"),l=tr.getLocalConfiguration(t,"apiGeoserverWMSHost"),g=tr.getLocalConfiguration(t,"apiGeoserverWMSPath");d=i&&i.data&&i.data.layerName&&("vector"===i.data.type||"raster"===i.data.type)?{key:u+"_"+i.key,layerKey:u,type:"wms",options:{url:s+"://"+Object(Qt.join)(l,g),params:{layers:i.data.layerName}}}:Si.prepareLayerByDataSourceType(u,i,a,r)}else i&&i.data&&(d=Si.prepareLayerByDataSourceType(u,i,a,r,e,h,c,o,f,p))})),d}(t,e,i,a,s,u,o,l);n&&f.push(n)}else if(e.type){var r,c=(null===(r=e.options)||void 0===r?void 0:r.selected)?bn({},e,{options:bn({},e.options,{selected:Si.prepareSelection(u,e.options.selected)})}):e;f.push(c)}})),Lo.addOrUpdate({cacheKey:c,layersWithFilter:r,dataSourcesByLayerKey:i,layerTemplatesByLayerKey:o,attributeDataSourcesByLayerKey:a,mapLayers:f,stylesByLayerKey:s,selections:u,periodsByLayerKey:l}),f}return null},aa=Object(wt.createSelector)([Oo,function(t,e){return e}],(function(t,e){if(t&&e){var n=It()(t,(function(t){return!(!t.data||!t.data.metadataModifiers)&&Ht()(t.data.metadataModifiers,e)}));return n&&n.length?n[0]:null}return null})),sa=Object(wt.createSelector)([Io,ko],(function(t,e){if(t){if(e){var n=t.data&&t.data.worldWindNavigator,r=bn({},e.data&&e.data.worldWindNavigator,{},n);return _t()(r)?null:r}var i=t.data&&t.data.worldWindNavigator;return i&&!_t()(i)?i:null}return null})),ua=Object(wt.createSelector)([Do],(function(t){return t?t.data&&t.data.worldWindNavigator&&t.data.worldWindNavigator.range:null})),la=Object(wt.createSelector)([Xi.getFilteredGroupedByLayerKey,Rr.getFilteredGroupedByLayerKey,tr.getCompleteLocalConfiguration,function(t,e){return e}],(function(t,e,n,r){return t&&e&&r?r.map((function(r){return ma(n,r,t[r.data.key],e[r.data.key])})):null})),ca=Object(wt.createSelector)([Io,ko,Xn.getAllActiveKeys],(function(t,e,n){var r=null;return t&&t.data&&t.data.backgroundLayer?r=t.data.backgroundLayer:e&&e.data&&e.data.backgroundLayer&&(r=e.data.backgroundLayer),r?ya(bn({},{place:null,period:null,case:null,scenario:null},{layerTemplate:r.layerTemplate,key:r.key}),n):null})),ha=Object(wt.createSelector)([Io,ko,Xn.getAllActiveKeys,function(t,e,n){return n}],(function(t,e,n,r){var i=e&&e.data&&e.data.layers||null,o=t&&t.data&&t.data.layers||null;if(t&&(o||i)){var a=[].concat(Cn(i||[]),Cn(o||[])),s={};return e&&(s=bn({},s,{},e.data.metadataModifiers)),s=bn({},s,{},t.data.metadataModifiers),a=a.map((function(t){return ya(bn({},s,{},t),n,r)}))}return null})),fa=Object(wt.createSelector)([ha,ca],(function(t,e){var n=e?[ga(e)]:[],r=t?t.map(ga):[];return xn(Array,Cn(r).concat(n))})),pa=Object(wt.createSelector)([Co,Fo],(function(t,e){return t&&!_t()(t)&&e&&!_t()(e)?e.map((function(e){return t[e]})):null})),da=Object(wt.createSelector)([Do,pa,Xn.getAllActiveKeys],(function(t,e,n){var r={},i=t&&t.data&&t.data.layers||null;return e&&e.forEach((function(e){var o=e&&e.data&&e.data.layers||null;if(e&&(o||i)){var a=[].concat(Cn(i||[]),Cn(o||[])),s={};if(t){t.data.metadataModifiers;s=bn({},s,{},t.data.metadataModifiers)}s=bn({},s,{},e.data.metadataModifiers);var u={scope:!0,attribute:!0,period:!0};a=a.map((function(t){return ya(bn({},s,{},t),n,u)})),r[e.key]=a}})),r})),ga=function(t){return{filter:t.mergedFilter,data:t.layer}},ma=function(t,e,n,r){var i=null;return n&&[n[0]].forEach((function(n){var r="".concat(e.data.key),o={wmsMapServerUrl:"".concat(t.apiGeoserverWMSProtocol,"://").concat(t.apiGeoserverWMSHost,"/").concat(t.apiGeoserverWMSPath),wfsMapServerUrl:"".concat(t.apiGeoserverWFSProtocol,"://").concat(t.apiGeoserverWFSHost,"/").concat(t.apiGeoserverWFSPath)};n?(r+="-".concat(n.key),i=bn({},n.data,{spatialDataSourceKey:n.key,spatialRelationsData:n.spatialRelationData,key:r,mapServerConfig:o})):i={key:r,mapServerConfig:o}})),r&&i&&r.forEach((function(t){t&&(t.attributeRelationData&&t.attributeRelationData.layerTemplateKey&&(i.attributeRelationsData=t.attributeRelationData))})),i};function ya(t,e,n){var r={},i={},o={};return t&&t.hasOwnProperty("scope")?r.scopeKey=t.scope:(!n||n&&n.scope)&&(i.scope=!0,e&&e.activeScopeKey&&(o.scopeKey=e.activeScopeKey)),t&&t.hasOwnProperty("place")?r.placeKey=t.place:(!n||n&&n.place)&&(i.place=!0,e&&e.activePlaceKey&&(o.placeKey=e.activePlaceKey)),t&&t.hasOwnProperty("period")?r.periodKey=t.period:(!n||n&&n.period)&&(i.period=!0,e&&e.activePeriodKey&&(o.periodKey=e.activePeriodKey)),t&&t.hasOwnProperty("case")?r.caseKey=t.case:(!n||n&&n.case)&&(i.case=!0,e&&e.activeCaseKey&&(o.caseKey=e.activeCaseKey)),t&&t.hasOwnProperty("scenario")?r.scenarioKey=t.scenario:(!n||n&&n.scenario)&&(i.scenario=!0,e&&e.activeScenarioKey&&(o.scenarioKey=e.activeScenarioKey)),t&&t.hasOwnProperty("layerTemplate")&&(r.layerTemplateKey=t.layerTemplate),t&&t.hasOwnProperty("attribute")?r.attributeKey=t.attribute:(!n||n&&n.attribute)&&(i.attribute=!0,e&&e.activeAttributeKey&&(o.attributeKey=e.activeAttributeKey)),{layer:t||null,filter:r,filterByActive:i,mergedFilter:o=bn({},r,{},o)}}var va={getActiveMap:Ro,getActiveMapKey:Mo,getActiveSetKey:function(t){return t.maps.activeSetKey},getAllLayersStateByMapKey:Jo,getBackgroundLayer:ia,getMapBackgroundLayer:function(t,e){var n=Xo(t,e);return ia(t,n)},getBackgroundLayerStateByMapKey:Xo,getFilterByActiveByMapKey:qo,getLayers:oa,getMapLayers:function(t,e){var n=Zo(t,e);return oa(t,n)},getLayersStateByMapKey:Zo,getMapByKey:Io,getMapLayerByMapKeyAndLayerKey:Ho,getMapLayersByMapKey:No,getMapsAsObject:Co,getMapSetActiveMapKey:Qo,getMapSetActiveMapView:ra,getMapSetByKey:Do,getMapSetByMapKey:ko,getMapSetLayersStateBySetKey:Yo,getMapSetMapKeys:Fo,getMapSetView:ea,getMapSetViewLimits:na,getMapSets:Po,getMapSetsAsObject:Ao,getSubstate:function(t){return t.maps},getView:$o,getViewLimits:ta,getAllLayersStateByMapKey_deprecated:fa,getBackgroundLayerStateByMapKey_deprecated:ca,getFiltersForUse_deprecated:ya,getLayers_deprecated:la,getLayersStateByMapKey_deprecated:ha,getLayersStateByMapSetKey_deprecated:da,getMapByMetadata_deprecated:aa,getMapSetNavigatorRange_deprecated:ua,getNavigator_deprecated:sa},Ea=function(t){return t.scopes},_a=Xn.getAll(Ea),ba=Xn.getAllAsObject(Ea),Sa=Xn.getActive(Ea),wa=Xn.getActiveKey(Ea),xa=Xn.getByKey(Ea),Ta=Xn.getByKeys(Ea),La=Xn.getByFilterOrder(Ea),Ca=Xn.getDataByKey(Ea),Aa=Xn.getEditedDataByKey(Ea),Ma=Xn.getDeletePermissionByKey(Ea),Ra=Xn.getUpdatePermissionByKey(Ea),Oa=Xn.getIndexed(Ea),Pa=Xn.getStateToSave(Ea),Ia={getActive:Sa,getActiveKey:wa,getActiveScopeConfiguration:Object(wt.createSelector)([Sa],(function(t){return t&&t.data&&t.data.configuration?t.data.configuration:null})),getAll:_a,getAllAsObject:ba,getByFilterOrder:La,getDataByKey:Ca,getByKeys:Ta,getDeletePermissionByKey:Ma,getEditedDataByKey:Aa,getIndexed:Oa,getUpdatePermissionByKey:Ra,getStateToSave:Pa,getSubstate:Ea,getActiveScopeData:Sa,getActiveScopeKey:wa,getScopes:_a,getScopeData:xa},Na=function(t){return t.places},Da=Xn.getAll(Na),ka=Xn.getAllAsObject(Na),Fa=Xn.getAllForActiveScope(Na),Va=Xn.getActiveKey(Na),ja=Xn.getActiveKeys(Na),Ba=Xn.getActive(Na),Ua=Xn.getActiveModels(Na),Ga=Xn.getDataByKey(Na),Ka=Xn.getDeletePermissionByKey(Na),Wa=Xn.getEditedDataByKey(Na),za=Xn.getUpdatePermissionByKey(Na),Ya=Object(wt.createSelector)([Da,Ia.getActiveScopeKey],(function(t,e){return It()(t,(function(t){return t.data&&t.data.dataset===e}))})),Ha={getPlaces:Da,getAll:Da,getAllAsObject:ka,getAllForActiveScope:Fa,getActiveKey:Va,getActiveKeys:ja,getActive:Ba,getActivePlaces:Ua,getActiveView:Object(wt.createSelector)([Ba],(function(t){return t&&t.data&&t.data.bbox?Ge.view.getViewFromBoundingBox(t.data.bbox,!0):null})),getByKey:Xn.getByKey(Na),getDataByKey:Ga,getDeletePermissionByKey:Ka,getEditedDataByKey:Wa,getIndexed:Xn.getIndexed(Na),getPlacesForActiveScope:Ya,getUpdatePermissionByKey:za,getSubstate:Na},qa=function(t){return t.scenarios.scenarios},Xa=Xn.getAll(qa),Za=Xn.getAllAsObject(qa),Ja=Xn.getActiveKey(qa),Qa=Xn.getActiveKeys(qa),$a={getActive:Xn.getActive(qa),getActiveKey:Ja,getActiveKeys:Qa,getActiveScenarios:Xn.getActiveModels(qa),getAll:Xa,getAllAsObject:Za,getByKey:Xn.getByKey(qa),getEditedAll:Xn.getEditedAll(qa),getEditedAllAsObject:Xn.getEditedAllAsObject(qa),getEditedByKey:Xn.getEditedByKey(qa),getEditedKeys:Xn.getEditedKeys(qa),getSubstate:qa,isDefaultSituationActive:function(t){return t.scenarios.scenarios.defaultSituationActive},getPucsScenariosVectorSource:Object(wt.createSelector)([function(t,e,n){return{scenarioKey:e,defaultSituation:n}}],(function(t,e){var n=null;return t.scenarioKey&&e.length?n=ct()(e,{scenarioKey:t.scenarioKey}):t.defaultSituation&&e.length&&(n=ct()(e,{scenarioKey:null})),n||null}))},ts=function(t){return t.scenarios.cases},es=Xn.getAll(ts),ns=Xn.getActiveKey(ts),rs=Xn.getActive(ts),is=Xn.getByKey(ts),os=Xn.getEditedAll(ts),as=Xn.getEditedActive(ts),ss=Object(wt.createSelector)([rs],(function(t){return!!(t&&t.data&&t.data.scenariosLoaded)&&t.data.scenariosLoaded})),us=Object(wt.createSelector)([rs],(function(t){return t&&t.data&&t.data.scenarios?t.data.scenarios:null})),ls=Object(wt.createSelector)([as],(function(t){return t&&t.data&&t.data.scenarios?t.data.scenarios:null})),cs=Object(wt.createSelector)([$a.getAllAsObject,us],(function(t,e){if(t&&!_t()(t)&&e){var n=vt()(t,e);return n&&!_t()(n)?Object.values(n):null}return null})),hs=Object(wt.createSelector)([rs,$a.getEditedKeys],(function(t,e){if(t&&t.data&&t.data.scenarios&&e){var n=Je()(t.data.scenarios,e);return n&&n.length?n:null}return null})),fs=Object(wt.createSelector)([$a.getEditedAllAsObject,us,ls],(function(t,e,n){if(t&&!_t()(t)){var r=[];e&&n?r=[].concat(Cn(e),Cn(n)):e&&!n?r=e:!e&&n&&(r=n);var i=vt()(t,r);return i&&!_t()(i)?Object.values(i):null}return null})),ps={cases:{getActive:rs,getActiveKey:ns,getAll:es,getByKey:is,getEditedAll:os,activeCaseScenariosLoaded:ss,getActiveCaseEdited:as,getActiveCaseEditedScenarioKeys:ls,getActiveCaseScenarioKeys:us,getActiveCaseScenarioEdited:Object(wt.createSelector)([fs],(function(t){return t&&1===t.length?t[0]:null})),getActiveCaseScenarios:cs,getActiveCaseScenariosEdited:fs,getActiveCaseScenariosEditedKeys:hs,getActivePlaceCases:Object(wt.createSelector)([es,Ha.getActiveKey],(function(t,e){return t&&t.length&&e?It()(t,(function(t){return Ut()(t.data.place_ids,e)})):[]})),getSubstate:ts},scenarios:$a},ds=function(t){return t.screens.screens},gs=function(t){return t.screens.sets},ms=Object(wt.createSelector)([gs,function(t,e){return e}],(function(t,e){return t&&!_t()(t)&&e&&t[e]?t[e]:null})),ys=Object(wt.createSelector)([ms,ds],(function(t,e){return t?vt()(e,t.orderBySpace):null})),vs=Object(wt.createSelector)([gs,function(t,e){return e}],(function(t,e){var n=null;return Dt()(t,(function(t,r){Ut()(t.orderByHistory,e)&&(n=r)})),n})),Es={getScreenByLineage:Object(wt.createSelector)([ds,function(t,e){return e}],(function(t,e){return t&&!_t()(t)&&e&&t[e]?t[e]:null})),getScreensBySetKey:ys,getSetByKey:ms,getSetKeyByScreenLineage:vs},_s={getAll:Xn.getAll((function(t){return t.snapshots}))},bs=function(t){return t.tags},Ss=Xn.getAll(bs),ws=Xn.getAllAsObject(bs),xs=Xn.getByKey(bs),Ts=Xn.getByKeys(bs),Ls=Xn.getDataByKey(bs),Cs=Xn.getEditedDataByKey(bs),As=Xn.getIndexed(bs),Ms={getAll:Ss,getAllAsObject:ws,getByKey:xs,getByKeys:Ts,getDataByKey:Ls,getDeletePermissionByKey:Xn.getDeletePermissionByKey(bs),getEditedDataByKey:Cs,getIndexed:As,getUpdatePermissionByKey:Xn.getUpdatePermissionByKey(bs),getSubstate:bs},Rs=function(t){return t.users},Os=function(t){return t.users.groups},Ps=Xn.getAll(Rs),Is=Xn.getAll(Os),Ns=Xn.getActiveKey(Rs),Ds=Xn.getActive(Rs),ks=Xn.getByKey(Rs),Fs=function(t){return t.users.isAdmin},Vs=Object(wt.createSelector)([Ps,function(t,e){return e}],(function(t,e){return!!e&&t.find((function(t){return t.id===e}))})),js=Object(wt.createSelector)([Ds],(function(t){return!!t&&Ut()(t.groups,1)})),Bs=Object(wt.createSelector)([Ds],(function(t){return t&&t.permissions?t.permissions:null})),Us=Object(wt.createSelector)([Fs,js],(function(t,e){return t||e})),Gs=Object(wt.createSelector)([Ds],(function(t){return t&&t.groups?t.groups:[]})),Ks={getAll:Ps,getActive:Ds,getByKey:ks,getById:Vs,getActiveKey:Ns,getActiveUser:Ds,getGroupKeysForActiveUser:Gs,getGroupsForActiveUser:Gs,getUsers:Ps,getGroups:Is,getSubstate:Rs,getGroupsSubstate:Os,hasActiveUserPermissionToCreate:Object(wt.createSelector)([Bs,function(t,e){return e},function(t,e,n){return n}],(function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"metadata";return e&&t&&t[n]&&t[n][e]&&t[n][e].create})),isAdmin:Fs,isAdminGroupMember:js,isAdminOrAdminGroupMember:Us,isLoggedIn:function(t){return!!t.users.activeKey},isDromasAdmin:function(t){var e=!1;if(t.users&&t.users.data&&t.users.data.length){var n=t.users.data.filter((function(e){return e.key===t.users.activeKey}));n.length>0&&n[0].groups.forEach((function(t){"Aktualizace LPIS Gisat admin"===t.name&&(e=!0)}))}return e||t.users.isAdmin},getActiveUserDromasLpisChangeReviewGroup:Object(wt.createSelector)([Gs,Ia.getActiveScopeConfiguration],(function(t,e){return Ut()(t,e.dromasLpisChangeReview.groups.gisatAdmins)?"gisatAdmins":Ut()(t,e.dromasLpisChangeReview.groups.szifAdmins)?"szifAdmins":Ut()(t,e.dromasLpisChangeReview.groups.gisatUsers)?"gisatUsers":Ut()(t,e.dromasLpisChangeReview.groups.szifUsers)?"szifUsers":null}))},Ws=function(t){return t.views},zs=Xn.getActiveKey(Ws),Ys=Xn.getActiveKeys(Ws),Hs=Xn.getAll(Ws),qs=Xn.getAllAsObject(Ws),Xs=Xn.getByKey(Ws),Zs={getActiveKey:zs,getActiveKeys:Ys,getByKeys:Xn.getByKeys(Ws),getDataByKey:Xn.getDataByKey(Ws),getEditedDataByKey:Xn.getEditedDataByKey(Ws),getViewsData:Xs,getAll:Hs,getAllAsObject:qs,getDeletePermissionByKey:Xn.getDeletePermissionByKey(Ws),getUpdatePermissionByKey:Xn.getUpdatePermissionByKey(Ws),getStateToSave:Object(wt.createSelector)([lr.getStateToSave,Kr.getStateToSave,ri.getStateToSave,Ia.getStateToSave],(function(t,e,n,r){return{attributes:t,attributeSets:e,components:n,scopes:r}})),getSubstate:Ws},Js=function(t){return t.windows.windows};var Qs=Object(wt.createSelector)([function(t){return t.windows.sets},function(t,e){return e}],(function(t,e){return t&&t[e]})),$s=Object(wt.createSelector)([Js,function(t,e){return e}],(function(t,e){return t&&t[e]})),tu=Object(wt.createSelector)([Qs,Js],(function(t,e){return n=vt()(e,null===t||void 0===t?void 0:t.orderByHistory),_t()(n)?null:n;var n})),eu=Object(wt.createSelector)([$s],(function(t){var e;return"open"===(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.state)})),nu={_deprecatedSelections:Jn,app:tr,areas:rr,areaRelations:sr,attributes:lr,attributeData:Rr,attributeDataSources:kr,attributeStatistics:Yr,attributeRelations:Sr,attributeSets:Kr,cases:Jr,charts:ti,components:ri,layerPeriods:ii,layerTemplates:mi,layerTrees:vi,maps:va,periods:wo,places:Ha,scenarios:ps,scopes:Ia,screens:Es,selections:oo,snapshots:_s,spatialData:zi,spatialDataSources:Xi,spatialRelations:Ki,styles:to,tags:Ms,users:Ks,views:Zs,windows:{getSetByKey:Qs,getWindow:$s,getWindowsBySetKeyAsObject:tu,isOpen:eu}},ru=re.a;function iu(t,e,n,r,i,o){an()(o)&&(o=5);var a=t.apiBackendProtocol+"://"+$t.a.join(t.apiBackendHost,t.apiBackendPath,e);return r&&(a+="?"+un.a.stringify(r)),ru(a,{method:n,credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:i?JSON.stringify(i):null}).then((function(t){var e=t.headers.get("Content-type");if(t.ok&&e&&-1!==e.indexOf("application/json"))return t.json().then((function(t){if(t.data)return t;throw new Error("no data returned")}));throw new Error("response error")}),(function(a){if(!(o-1))throw a;iu(t,e,n,r,i,o-1)}))}var ou=He.deepKeyMirror({INITIALIZE:"INITIALIZE",AOI_ADD:"AOI_ADD",AOI_SET_ACTIVE:"AOI_SET_ACTIVE",AOI_REQUEST:"AOI_REQUEST",AOI_RECEIVE:"AOI_RECEIVE",AOI_REQUEST_ERROR:"AOI_REQUEST_ERROR",AOI_GEOMETRY_RECEIVE:"AOI_GEOMETRY_RECEIVE",AOI_GEOMETRY_REQUEST_ERROR:"AOI_GEOMETRY_REQUEST_ERROR",APP:{SET_KEY:null,SET_BASE_URL:null,SET_LOCAL_CONFIGURATION:null,UPDATE_LOCAL_CONFIGURATION:null,RECEIVE_CONFIGURATION:null},AREAS:{AREA_TREE_LEVELS:{ADD:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_ALL:null},LOAD:{ERROR:null,REQUEST:null},SET_ACTIVE_KEY:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},AREA_TREES:{ADD:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_ALL:null},LOAD:{ERROR:null,REQUEST:null},SET_ACTIVE_KEY:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}}},AREA_RELATIONS:{ADD:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_ALL:null},USE:{INDEXED:{CLEAR:null,CLEAR_ALL:null,REGISTER:null}}},AREAS_SELECTIONS_SET_ACTIVE_MULTIPLE:"AREAS_SELECTIONS_SET_ACTIVE_MULTIPLE",AREAS_SELECTIONS_UPDATE:"AREAS_SELECTIONS_UPDATE",ATTRIBUTES:{ADD:null,ADD_UNRECEIVED:null,DELETE:null,MARK_DELETED:null,EDITED:{REMOVE:null,REMOVE_PROPERTY:null,UPDATE:null},ENSURE:{ERROR:null},INDEX:{ADD:null,ADD_BATCH:null,CLEAR_ALL:null,CLEAR_INDEX:null},LOAD:{ERROR:null,REQUEST:null},SET_ACTIVE_KEY:null,SET_ACTIVE_KEYS:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null},INDEXED_BATCH:{REGISTER:null}}},ATTRIBUTE_SETS:{ADD:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},INDEX:{ADD:null},LOAD:{ERROR:null,REQUEST:null},SET_ACTIVE_KEY:null,SET_ACTIVE_KEYS:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},CASES:{ADD:null,ADD_UNRECEIVED:null,DELETE:null,MARK_DELETED:null,EDITED:{REMOVE:null,REMOVE_PROPERTY:null,UPDATE:null},ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_ALL:null,CLEAR_INDEX:null},LOAD:{ERROR:null,REQUEST:null},SET_ACTIVE_KEY:null,SET_ACTIVE_KEYS:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},CHOROPLETHS_SET_ACTIVE_KEYS:"CHOROPLETHS_SET_ACTIVE_KEYS",CHOROPLETHS_UPDATE:"CHOROPLETHS_UPDATE",COMMON:{DATA:{CLEANUP_ON_LOGOUT:null,SET_OUTDATED:null},EDITED:{REMOVE_PROPERTY_VALUES:null}},COMPONENTS:{UPDATE:null,SET:null},CHARTS:{UPDATE:null,SET_INITIAL:null},DATAVIEWS_REMOVE:"DATAVIEWS_REMOVE",DATAVIEWS_DELETE_RECEIVE:"DATAVIEWS_DELETE_RECEIVE",DATAVIEWS_DELETE_REQUEST:"DATAVIEWS_DELETE_REQUEST",DATAVIEWS_DELETE_REQUEST_ERROR:"DATAVIEWS_DELETE_REQUEST_ERROR",DATAVIEWS:{ADD:null,ADD_UNRECEIVED:null,INDEX:{ADD:null,CLEAR_ALL:null},SET_ACTIVE_KEY:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},INDICATORS:{ADD:null,ADD_UNRECEIVED:null,DELETE:null,MARK_DELETED:null,EDITED:{REMOVE:null,REMOVE_PROPERTY:null,UPDATE:null},ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_INDEX:null,CLEAR_ALL:null},LOAD:{ERROR:null,REQUEST:null},SET_ACTIVE_KEY:null,SET_ACTIVE_KEYS:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},LAYER_PERIODS_AOI_LAYER_REQUEST:"LAYER_PERIODS_AOI_LAYER_REQUEST",LAYER_PERIODS_AOI_LAYER_REQUEST_ERROR:"LAYER_PERIODS_AOI_LAYER_REQUEST_ERROR",LAYER_PERIODS_AOI_LAYER_RECEIVE:"LAYER_PERIODS_AOI_LAYER_RECEIVE",LAYER_PERIODS_PLACE_LAYER_REQUEST:"LAYER_PERIODS_PLACE_LAYER_REQUEST",LAYER_PERIODS_PLACE_LAYER_REQUEST_ERROR:"LAYER_PERIODS_PLACE_LAYER_REQUEST_ERROR",LAYER_PERIODS_PLACE_LAYER_RECEIVE:"LAYER_PERIODS_PLACE_LAYER_RECEIVE",LAYER_PERIODS_KEY_LAYER_REQUEST:"LAYER_PERIODS_KEY_LAYER_REQUEST",LAYER_PERIODS_KEY_LAYER_REQUEST_ERROR:"LAYER_PERIODS_KEY_LAYER_REQUEST_ERROR",LAYER_PERIODS_KEY_LAYER_RECEIVE:"LAYER_PERIODS_KEY_LAYER_RECEIVE",LAYER_TEMPLATES:{ADD:null,ADD_UNRECEIVED:null,DELETE:null,MARK_DELETED:null,EDITED:{REMOVE:null,REMOVE_PROPERTY:null,UPDATE:null},ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_INDEX:null,CLEAR_ALL:null},LOAD:{ERROR:null,REQUEST:null},SET_ACTIVE_KEY:null,SET_ACTIVE_KEYS:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},MAPS_ADD:"MAPS_ADD",MAPS_REMOVE:"MAPS_REMOVE",MAPS_UPDATE:"MAPS_UPDATE",MAPS_UPDATE_DEFAULTS:"MAPS_UPDATE_DEFAULTS",MAPS_SET_ACTIVE:"MAPS_SET_ACTIVE",MAPS_SET_INDEPENDENT_OF_PERIOD:"MAPS_SET_INDEPENDENT_OF_PERIOD",MAPS:{SET_INITIAL:null,SET_ACTIVE_MAP_KEY:null,SET_ACTIVE_SET_KEY:null,SET_SCOPE:null,SET_SCENARIO:null,SET_PERIOD:null,SET_PLACE:null,SET_CASE:null,SET_BACKGROUND_LAYER:null,SET:{ADD:null,SET_BACKGROUND_LAYER:null,SET_LAYERS:null,REMOVE:null,ADD_MAP:null,SET_MAPS:null,REMOVE_MAP:null,WORLD_WIND_NAVIGATOR:{SET:null,UPDATE:null},VIEW:{SET:null,UPDATE:null},SET_ACTIVE_MAP_KEY:null,SET_SYNC:null},MAP:{ADD:null,LAYERS:{SET:{HOVERED_FEATURE_KEYS:null,SELECTION:null,STYLE:null},CLEAR:{SELECTION:null}},REMOVE:null,SET_NAME:null,SET_DATA:null,WORLD_WIND_NAVIGATOR:{SET:null,UPDATE:null},VIEW:{SET:null,UPDATE:null}},UPDATE:null,LAYERS:{ADD_LAYERS:null,REMOVE_LAYERS:null,LAYER:{ADD:null,ADD_TO_SET:null,REMOVE:null,SET:null,UPDATE:null,SET_INDEX:null},SET:null}},PERIODS:{ADD:null,ADD_UNRECEIVED:null,DELETE:null,MARK_DELETED:null,EDITED:{REMOVE:null,REMOVE_PROPERTY:null,UPDATE:null},ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_ALL:null,CLEAR_INDEX:null},LOAD:{ERROR:null,REQUEST:null},SET_ACTIVE_KEY:null,SET_ACTIVE_KEYS:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},PLACES_ADD:"PLACES_ADD",PLACES_SET_ACTIVE_MULTI:"PLACES_SET_ACTIVE_MULTI",PLACES:{ADD:null,ADD_UNRECEIVED:null,DELETE:null,MARK_DELETED:null,EDITED:{REMOVE:null,REMOVE_PROPERTY:null,UPDATE:null},ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_INDEX:null,CLEAR_ALL:null},LOAD:{ERROR:null,REQUEST:null},SET_ACTIVE_KEY:null,SET_ACTIVE_KEYS:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},REDIRECT_TO_VIEW:"REDIRECT_TO_VIEW",SCENARIOS:{ADD:null,ADD_UNRECEIVED:null},SCENARIOS_ADD:"SCENARIOS_ADD",SCENARIOS_EDITED_UPDATE:"SCENARIOS_EDITED_UPDATE",SCENARIOS_EDITED_REMOVE:"SCENARIOS_EDITED_REMOVE",SCENARIOS_EDITED_REMOVE_PROPERTY:"SCENARIOS_EDITED_REMOVE_PROPERTY",SCENARIOS_SET_ACTIVE:"SCENARIOS_SET_ACTIVE",SCENARIOS_SET_ACTIVE_MULTI:"SCENARIOS_SET_ACTIVE_MULTI",SCENARIOS_SET_DEFAULT_SITUATION_ACTIVE:"SCENARIOS_SET_DEFAULT_SITUATION_ACTIVE",SCENARIOS_CASES_ADD:"SCENARIOS_CASES_ADD",SCENARIOS_CASES_REMOVE:"SCENARIOS_CASES_REMOVE",SCENARIOS_CASES_SET_ACTIVE:"SCENARIOS_CASES_SET_ACTIVE",SCENARIOS_UPDATE:"SCENARIOS_UPDATE",SCENARIOS_REQUEST:"SCENARIOS_REQUEST",SCENARIOS_RECEIVE:"SCENARIOS_RECEIVE",SCENARIOS_REQUEST_ERROR:"SCENARIOS_REQUEST_ERROR",SCENARIOS_CASES_REQUEST:"SCENARIOS_CASES_REQUEST",SCENARIOS_CASES_RECEIVE:"SCENARIOS_CASES_RECEIVE",SCENARIOS_CASES_REQUEST_ERROR:"SCENARIOS_CASES_REQUEST_ERROR",SCENARIOS_CASES_UPDATE:"SCENARIOS_CASES_UPDATE",SCENARIOS_CASES_EDITED_UPDATE:"SCENARIOS_CASES_EDITED_UPDATE",SCENARIOS_CASES_EDITED_REMOVE:"SCENARIOS_CASES_EDITED_REMOVE",SCENARIOS_CASES_EDITED_REMOVE_ACTIVE:"SCENARIOS_CASES_EDITED_REMOVE_ACTIVE",SCENARIOS_CASES_EDITED_REMOVE_PROPERTY:"SCENARIOS_CASE_EDITED_REMOVE_PROPERTY",SCENARIOS_API_PROCESSING_FILE_STARTED:"SCENARIOS_API_PROCESSING_FILE_STARTED",SCENARIOS_API_PROCESSING_FILE_SUCCESS:"SCENARIOS_API_PROCESSING_FILE_SUCCESS",SCENARIOS_API_PROCESSING_FILE_ERROR:"SCENARIOS_API_PROCESSING_FILE_ERROR",SCENARIOS_CASES_API_CREATE_REQUEST:"SCENARIOS_CASES_API_CREATE_REQUEST",SCENARIOS_CASES_API_CREATE_RECEIVE:"SCENARIOS_CASES_API_CREATE_RECEIVE",SCENARIOS_CASES_API_CREATE_ERROR:"SCENARIOS_CASES_API_CREATE_ERROR",SCENARIOS_CASES_API_DELETE_REQUEST:"SCENARIOS_CASES_API_DELETE_REQUEST",SCENARIOS_CASES_API_DELETE_RECEIVE:"SCENARIOS_CASES_API_DELETE_RECEIVE",SCENARIOS_CASES_API_DELETE_ERROR:"SCENARIOS_CASES_API_DELETE_ERROR",SCENARIOS_CASES_API_UPDATE_REQUEST:"SCENARIOS_CASES_API_UPDATE_REQUEST",SCENARIOS_CASES_API_UPDATE_RECEIVE:"SCENARIOS_CASES_API_UPDATE_RECEIVE",SCENARIOS_CASES_API_UPDATE_ERROR:"SCENARIOS_CASES_API_UPDATE_ERROR",SCOPES:{ADD:null,ADD_UNRECEIVED:null,DELETE:null,MARK_DELETED:null,EDITED:{REMOVE:null,REMOVE_PROPERTY:null,UPDATE:null},ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_INDEX:null,CLEAR_ALL:null},LOAD:{ERROR:null,REQUEST:null},SET_ACTIVE_KEY:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},SCREENS:{ADD:null,CLOSE:null,OPEN:null,REMOVE:null,REMOVE_ALL:null,RETRACT:null,SETS:{ADD:null,REMOVE:null},TOP_HISTORY:null,UPDATE:null},SELECTIONS:{ADD:null,ADD_UNRECEIVED:null,SET_ACTIVE_KEY:null,SET:{FEATURE_KEYS_FILTER:{KEYS:null}},CLEAR:{FEATURE_KEYS_FILTER:null}},_DEPRECATED_SELECTIONS:{ADD:null,REMOVE:null,SET_ACTIVE_KEY:null,UPDATE_FROM_VIEW:null},SPATIAL_RELATIONS:{ADD:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_ALL:null},USE:{INDEXED:{CLEAR:null,CLEAR_ALL:null,REGISTER:null}}},SPATIAL_DATA:{ADD:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_INDEX:null,CLEAR_ALL:null},USE:{ADD:null,ADD_UNRECEIVED:null,INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},SPATIAL_DATA_SOURCES:{ADD:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},USE:{ADD:null,ADD_UNRECEIVED:null,INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null},INDEXED_BATCH:{REGISTER:null}},VECTOR:{ADD:null,ADD_BATCH:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_INDEX:null,CLEAR_ALL:null,ADD_BATCH:null},LOAD:{ERROR:null,REQUEST:null},USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null},INDEXED_BATCH:{REGISTER:null}}}},ATTRIBUTE_DATA_SOURCES:{ADD:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},USE:{ADD:null,ADD_UNRECEIVED:null,INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null},INDEXED_BATCH:{REGISTER:null}}},ATTRIBUTE_DATA:{ADD:null,ADD_BATCH:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_ALL:null,ADD_BATCH:null},USE:{INDEXED:{CLEAR:null,REGISTER:null},INDEXED_BATCH:{REGISTER:null}}},ATTRIBUTE_STATISTICS:{ADD:null,ADD_BATCH:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_ALL:null,ADD_BATCH:null},USE:{INDEXED:{CLEAR:null,REGISTER:null},INDEXED_BATCH:{REGISTER:null}}},ATTRIBUTE_RELATIONS:{ADD:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_ALL:null},USE:{INDEXED:{CLEAR:null,CLEAR_ALL:null,REGISTER:null}}},SPATIAL_DATA_SOURCES_DOWNLOAD_FILE_ERROR:"SPATIAL_DATA_SOURCES_DOWNLOAD_FILE_ERROR",SPATIAL_DATA_SOURCES_DOWNLOAD_FILE_REQUEST:"SPATIAL_DATA_SOURCES_DOWNLOAD_FILE_REQUEST",SPATIAL_DATA_SOURCES_RECEIVE:"SPATIAL_DATA_SOURCES_RECEIVE",SPATIAL_DATA_SOURCES_REQUEST:"SPATIAL_DATA_SOURCES_REQUEST",SPATIAL_DATA_SOURCES_FILTERED_REQUEST:"SPATIAL_DATA_SOURCES_FILTERED_REQUEST",SPATIAL_DATA_SOURCES_REQUEST_ERROR:"SPATIAL_DATA_SOURCES_REQUEST_ERROR",SPATIAL_DATA_SOURCES_ADD:"SPATIAL_DATA_SOURCES_ADD",SPATIAL_DATA_SOURCES_VECTOR_FEATURES_RECEIVE:"SPATIAL_DATA_SOURCES_VECTOR_FEATURES_RECEIVE",SPATIAL_DATA_SOURCES_VECTOR_FEATURES_BBOX_REQUEST:"SPATIAL_DATA_SOURCES_VECTOR_FEATURES_BBOX_REQUEST",SPATIAL_DATA_SOURCES_VECTOR_FEATURES_BBOX_REQUEST_ERROR:"SPATIAL_DATA_SOURCES_VECTOR_FEATURES_BBOX_REQUEST_ERROR",SPATIAL_DATA_SOURCES_VECTOR_FEATURES_POINT_REQUEST:"SPATIAL_DATA_SOURCES_VECTOR_FEATURES_POINT_REQUEST",SPATIAL_DATA_SOURCES_VECTOR_FEATURES_POINT_REQUEST_ERROR:"SPATIAL_DATA_SOURCES_VECTOR_FEATURES_POINT_REQUEST_ERROR",SPATIAL_DATA_SOURCES_VECTOR_FEATURES_SELECT:"SPATIAL_DATA_SOURCES_VECTOR_FEATURES_SELECT",SPATIAL_DATA_SOURCES_VECTOR_FEATURES_EDITED_ADD:"SPATIAL_DATA_SOURCES_VECTOR_FEATURES_EDITED_ADD",STYLES:{ADD:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_ALL:null},USE:{INDEXED:{CLEAR:null,CLEAR_ALL:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},SNAPSHOTS_ADD:"SNAPSHOTS_ADD",SNAPSHOTS_REMOVE:"SNAPSHOTS_REMOVE",TAGS:{ADD:null,ADD_UNRECEIVED:null,DELETE:null,MARK_DELETED:null,EDITED:{REMOVE:null,REMOVE_PROPERTY:null,UPDATE:null},ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_INDEX:null,CLEAR_ALL:null},LOAD:{ERROR:null,REQUEST:null},USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},THEMES:{ADD:null,ADD_UNRECEIVED:null,ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_ALL:null},LOAD:{ERROR:null,REQUEST:null},SET_ACTIVE_KEY:null,SET_ACTIVE_KEYS:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},USERS:{ADD:null,ADD_UNRECEIVED:null,GROUPS:{ADD:null,ADD_UNRECEIVED:null,INDEX:{ADD:null,CLEAR_ALL:null},USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},SET_ACTIVE_KEY:null,CURRENT:{REQUEST:null},LOGIN:{REQUEST:null},INDEX:{ADD:null,CLEAR_ALL:null},USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},USER_GROUPS:{ADD:null,ADD_UNRECEIVED:null},USERS_ADD:"USERS_ADD",USERS_LOAD_REQUEST:"USERS_LOAD_REQUEST",USERS_LOAD_REQUEST_ERROR:"USERS_LOAD_REQUEST_ERROR",USERS_LOAD_CURRENT_REQUEST:"USERS_LOAD_CURRENT_REQUEST",USERS_LOAD_CURRENT_REQUEST_ERROR:"USERS_LOAD_CURRENT_REQUEST_ERROR",USERS_LOGIN_REQUEST:"USERS_LOGIN_REQUEST",USERS_LOGIN_REQUEST_ERROR:"USERS_LOGIN_REQUEST_ERROR",USERS_LOGOUT_REQUEST:"USERS_LOGOUT_REQUEST",USERS_LOGOUT_REQUEST_ERROR:"USERS_LOGOUT_REQUEST_ERROR",USERS_UPDATE:"USERS_UPDATE",LAYER_TREES:{ADD:null,ADD_UNRECEIVED:null,DELETE:null,MARK_DELETED:null,EDITED:{REMOVE:null,REMOVE_PROPERTY:null,UPDATE:null},ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_INDEX:null,CLEAR_ALL:null},LOAD:{ERROR:null,REQUEST:null},USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},VIEWS:{ADD:null,ADD_UNRECEIVED:null,DELETE:null,MARK_DELETED:null,EDITED:{REMOVE:null,REMOVE_PROPERTY:null,UPDATE:null},ENSURE:{ERROR:null},INDEX:{ADD:null,CLEAR_INDEX:null,CLEAR_ALL:null},LOAD:{ERROR:null,REQUEST:null},SET_ACTIVE_KEY:null,SET_ACTIVE_KEYS:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},VISUALIZATIONS:{ADD:null,ADD_UNRECEIVED:null,INDEX:{ADD:null,CLEAR_ALL:null},SET_ACTIVE_KEY:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},WMS_LAYERS:{ADD:null,ADD_UNRECEIVED:null,INDEX:{ADD:null,CLEAR_ALL:null},SET_ACTIVE_KEY:null,USE:{INDEXED:{CLEAR:null,REGISTER:null},KEYS:{CLEAR:null,REGISTER:null}}},WINDOWS:{ADD:null,OPEN:null,REMOVE:null,SETS:{ADD:null,REMOVE:null},TOP:null,UPDATE:null},LPIS_CASES_ADD:"LPIS_CASES_ADD",LPIS_CASE_CHANGES_ADD:"LPIS_CASE_CHANGES_ADD",LPIS_CASES_SEARCH_STRING_CHANGE:"LPIS_CASES_SEARCH_STRING_CHANGE",LPIS_CASES_SELECTED_STATUS_CHANGE:"LPIS_CASES_SELECTED_STATUS_CHANGE",LPIS_CASES_EDIT_ACTIVE_EDITED_CASE:"LPIS_CASES_EDIT_ACTIVE_EDITED_CASE",LPIS_CASES_CREATE_NEW_ACTIVE_EDITED_CASE:"LPIS_CASES_CREATE_NEW_ACTIVE_EDITED_CASE",LPIS_CASES_REMOVE_EDITED_CASES_BY_KEYS:"LPIS_CASES_REMOVE_EDITED_CASES_BY_KEYS",LPIS_CASES_SET_ACTIVE:"LPIS_CASES_SET_ACTIVE",LPIS_CASES_CLEAR_EDITED_CASE:"LPIS_CASES_CLEAR_EDITED_CASE",LPIS_CASE_EDIT_ACTIVE_CASE:"LPIS_CASE_EDIT_ACTIVE_CASE",LPIS_CASE_EDIT_ACTIVE_CASE_STATUS:"LPIS_CASE_EDIT_ACTIVE_CASE_STATUS",LPIS_CASE_EDIT_CASE_STATUS:"LPIS_CASE_EDIT_CASE_STATUS",LPIS_CASE_SET_NEXT_ACTIVE_CASE_KEY:"LPIS_CASE_SET_NEXT_ACTIVE_CASE_KEY",LPISCHECK_CASES_ADD:"LPISCHECK_CASES_ADD",LPISCHECK_UPDATE_CASE:"LPISCHECK_UPDATE_CASE",LPISCHECK_CASES_SET_ACTIVE:"LPISCHECK_CASES_SET_ACTIVE",LPIS_CHECK_CASES_SEARCH_PARAM_CHANGE:"LPIS_CHECK_CASES_SEARCH_PARAM_CHANGE"}),au=function(t,e,n){return function(r,i){return iu(nu.app.getCompleteLocalConfiguration(i()),"backend/rest/"+e,"DELETE",null,{data:En({},t,n)}).then((function(e){if(e.errors&&e.errors[t]||e.data&&!e.data[t])r(bu(e.errors[t]||new Error("no data")));else{if(e.data[t].length>0)return e;console.warn("No data updated for ".concat(t," metadata type"))}})).catch((function(t){r(bu(t))}))}},su=function(t,e,n,r,i){return function(o,a){return iu(nu.app.getCompleteLocalConfiguration(a()),"backend/rest/"+r,"PUT",null,{data:En({},e,i)}).then((function(i){i.errors&&i.errors[e]||i.data&&!i.data[e]?o(bu(i.errors[e]||new Error("no data"))):o(yu(t,n,i,e,r))})).catch((function(t){o(bu(t))}))}};function uu(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"metadata";return function(a,s){var u=s(),l=Xn.getUsesForIndex(t)(u,n,r);l&&mt()(l.uses,(function(n){a(fu(t,e,l.filter,l.order,n.start,n.length,i,o))}))}}function lu(t,e,n,r,i,o){return function(a){e.data[n].length&&a(xu(t,e.data[n],r)),a(function(t,e,n,r,i,o,a){return wu(t,"INDEX.ADD",{filter:e,order:n,count:r,start:i,data:o,changedOn:a})}(t,r,i,e.total,o,e.data[n],e.changes&&e.changes[n]))}}function cu(t,e,n,r,i,o){return function(a){e.data[n].length&&a(Tu(t,e.data[n],o)),a(Lu(t,r,i,e.data[n],o))}}function hu(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"metadata";return function(o,a){var s=a(),u=nu.app.getLocalConfiguration(s,"requestPageSize")||se.b.requestPageSize,l=Xn.getKeysToLoad(t)(s,r),c=[];return l&&(l=rn()(l,u),mt()(l,(function(t){c.push(o(du(e,n,t,i)))}))),Promise.all(c)}}function fu(t,e,n,r,i,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"metadata";return function(u,l){var c=l(),h=nu.app.getCompleteLocalConfiguration(c).requestPageSize||se.b.requestPageSize,f=Xn.getIndexTotal(t)(c,n,r),p=Xn.getIndexChangedOn(t)(c,n,r);if(null!=f){var d=Xn.getIndexPage(t)(c,n,r,i,o)||{},g=rn()(Object.values(d),h).map((function(o,l){var c=o.filter((function(t){return null!=t}));if(c.length!==o.length){var f=c.length?bn({},n,{key:{notin:c}}):n;return u(gu(e,f,r,i+l*h,p,a,s)).catch((function(i){"Index outdated"===i.message&&u(uu(t,e,n,r,a,s))}))}}));return Promise.all(g)}return u(gu(e,n,r,i,p,a,s)).then((function(l){if(l&&l.message&&!1===l.success);else if(o>h)return u(fu(t,e,n,r,i+h,o-h,a,s))})).catch((function(i){if("Index outdated"!==i.message)throw new Error("_common/actions#ensure: ".concat(i));u(uu(t,e,n,r,a,s))}))}}function pu(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"metadata",o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;return function(s){return s(mu(t,e,n,r,i,o,a)).then((function(t){})).catch((function(t){throw new Error("_common/actions#ensure: ".concat(t))}))}}function du(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"metadata";return function(i,o){return iu(nu.app.getCompleteLocalConfiguration(o()),ku(r,t),"POST",null,{filter:{key:{in:n}}}).then((function(r){if(r.errors&&r.errors[t]||r.data&&!r.data[t])throw new Error(r.errors[t]||"no data");i(vu(e,r,t,n))})).catch((function(t){return i(bu(t)),t}))}}function gu(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"metadata";return function(s,u){var l=nu.app.getCompleteLocalConfiguration(u()),c=l.requestPageSize||se.b.requestPageSize;return iu(l,ku(a,t),"POST",null,{filter:e&&bn({},e),offset:r-1,order:n,limit:c}).then((function(a){if(a.errors&&a.errors[t]||a.data&&!a.data[t])throw new Error(a.errors[t]||"no data");if(a.changes&&a.changes[t]&&le()(a.changes[t]).isAfter(i))throw new Error("Index outdated");s(lu(o,a,t,e,n,r))})).catch((function(t){return s(bu(t)),t}))}}function mu(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"metadata",o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;return function(s,u){var l=nu.app.getCompleteLocalConfiguration(u()),c=ku(i,t),h={filter:bn({},e),order:n};return a&&(h=bn({},h,{},a)),iu(l,c,"POST",null,h).then((function(i){if(i.errors&&i.errors[t]||i.data&&!i.data[t])throw new Error(i.errors[t]||"no data");s(cu(r,i,t,e,n,o))})).catch((function(t){return s(bu(t)),t}))}}function yu(t,e,n,r,i){return function(o,a){var s=n.data[r];if(s.length){var u=Xn.getAllAsObject(t)(a());o(xu(e,s));var l=Xn.getEditedAllAsObject(t)(a()),c=[];s.forEach((function(n){var r=u[n.key],i=l[n.key].data;Dt()(i,(function(t,r){(n.data[r]===t||Ct()(t)&&(JSON.stringify(t)===JSON.stringify(n.data[r])||jt()(t)&&_t()(t)&&(_t()(n.data[r])||n.data&&!n.data[r])))&&o(Pu(e,n.key,r))})),c=(c=c.concat(Xn.getIndexesByFilteredItem(t)(a()||[],n))).concat(Xn.getIndexesByFilteredItem(t)(a()||[],r))}));var h=Rn.getUniqueIndexes(c);_t()(h)||h.forEach((function(n){n&&(o(Cu(e,n.filter,n.order)),o(uu(t,r,n.filter,n.order,e,i)))}))}else console.warn("No data updated for ".concat(r," metadata type"))}}function vu(t,e,n,r){return function(i){e.data[n].length&&i(xu(t,e.data[n])),en()(r,(function(t){return ct()(e.data[n],{key:t})})),r.length&&i(function(t,e){jt()(e)||(e=[e]);return wu(t,"ADD_UNRECEIVED",{keys:e})}(t,r))}}function Eu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"metadata";return function(n){var r=En({},t,!0);at()(id,(function(t){t.hasOwnProperty("ensureIndexesWithFilterByActive")&&n(t.ensureIndexesWithFilterByActive(r,e))}))}}function _u(t,e){return{type:ou.COMMON.EDITED.REMOVE_PROPERTY_VALUES,dataType:t,keys:e}}function bu(t){return console.error("common/actions error",t),{type:"ERROR"}}var Su=function(t){return function(e){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return function(n){n(t.apply(void 0,[e].concat(r)))}}}};function wu(t,e,n){if(e=e.split("."),mt()(e,(function(r){if(!t.hasOwnProperty(r))throw console.error("common/actions#action: Action not in namespace",e,n),new Error("common/actions#action: Action not in namespace");t=t[r]})),"string"!==typeof t)throw new Error("common/actions#action: Action type not string");return bn({},n,{type:t})}function xu(t,e,n){return jt()(e)||(e=[e]),wu(t,"ADD",{data:e,filter:n})}function Tu(t,e,n){return jt()(e)||(e=[e]),wu(t,"ADD_BATCH",{data:e,key:n})}function Lu(t,e,n,r,i){return wu(t,"INDEX.ADD_BATCH",{filter:e,order:n,data:r,key:i})}function Cu(t,e,n){return wu(t,"INDEX.CLEAR_INDEX",{filter:e,order:n})}var Au=function(t,e,n){return wu(t,"MARK_DELETED",{key:e,date:n})};function Mu(t){return wu(t,"INDEX.CLEAR_ALL")}function Ru(t,e){return wu(t,"SET_ACTIVE_KEY",{key:e})}function Ou(t,e){return wu(t,"SET_ACTIVE_KEYS",{keys:e})}function Pu(t,e,n){return wu(t,"EDITED.REMOVE_PROPERTY",{key:e,property:n})}function Iu(t,e,n,r,i,o,a){return wu(t,"USE.INDEXED.REGISTER",{componentId:e,filterByActive:n,filter:r,order:i,start:o,length:a})}function Nu(t,e,n,r,i){return wu(t,"USE.INDEXED_BATCH.REGISTER",{componentId:e,filterByActive:n,filter:r,order:i})}function Du(t,e,n){return wu(t,"USE.KEYS.REGISTER",{componentId:e,keys:n})}var ku=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"metadata",e=arguments.length>1?arguments[1]:void 0;return $t.a.join("backend/rest",t,"filtered",e)},Fu=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He.uuid(),n=arguments.length>2?arguments[2]:void 0,r={data:{}},i={key:e,data:{}};return n&&(i.data={applicationKey:n}),r.data[t]=[i],r},Vu={add:Su(xu),addBatch:Su(Tu),addBatchIndex:Su(Lu),action:wu,actionAdd:xu,actionGeneralError:bu,apiUpdate:su,creator:Su,create:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"metadata";return function(i,o){return function(a,s){var u=s(),l=$t.a.join("backend/rest",r),c=nu.app.getCompleteLocalConfiguration(u),h=null;if(o)h=o;else{var f=nu.app.getKey(u);f&&(h=f)}return iu(c,l,"POST",null,Fu(e,i,h)).then((function(i){if(i.errors&&i.errors[e]||i.data&&!i.data[e])a(bu(i.errors[e]||new Error("no data")));else{var o=i.data[e];a(xu(n,o));var u=[];o.forEach((function(e){u=u.concat(Xn.getIndexesByFilteredItem(t)(s(),e))||[]}));var l=Rn.getUniqueIndexes(u);_t()(l)||l.forEach((function(i){i&&(a(Cu(n,i.filter,i.order)),a(uu(t,e,i.filter,i.order,n,r)))}))}})).catch((function(t){a(bu(t))}))}}},delete:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"metadata";return function(i){return function(o,a){return i?i.key?o(au(e,r,[{key:i.key}])).then((function(s){var u=s.data[e].map((function(t){return t.key}));if(!ut()(u,[i.key]))return o(bu("common/actions#deleteItem: Deleted key is not equal to key to delete!"));var l=le()((new Date).toISOString()).utc().format();u.forEach((function(t){o(Au(n,t,l))})),o(_u(e,u));var c=a(),h=Xn.getIndexesByFilteredItem(t)(c,i)||[];_t()(h)||h.forEach((function(i){i&&(o(Cu(n,i.filter,i.order)),o(uu(t,e,i.filter,i.order,n,r)))}))})):o(bu("common/actions#deleteItem: item key to delete is missing!")):o(bu("common/actions#deleteItem: item to delete is missing!"))}}},ensure:hu,ensureIndexed:fu,ensureIndexesWithFilterByActive:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"metadata";return function(i){return function(o,a){var s=a(),u=Xn.getUsesWithActiveDependency(t)(s,i),l=$e()(u,(function(i){at()(i.uses,(function(a){return o(fu(t,e,i.filter,i.order,a.start,a.length,n,r))}))}));return Promise.all(l)}}},ensureKeys:hu,loadAll:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"metadata";return function(r,i){var o=nu.app.getCompleteLocalConfiguration(i()),a=o.requestPageSize||se.b.requestPageSize,s=ku(n,t);return iu(o,s,"POST",null,{limit:a}).then((function(n){if(n.errors&&n.errors[t]||n.data&&!n.data[t])r(bu(n.errors[t]||new Error("no data")));else if(n.total<=a)r(xu(e,n.data[t]));else{for(var i=[],u=Math.ceil((n.total-a)/a),l=0;l<u;l++){var c={offset:(l+1)*a,limit:a};i.push(iu(o,s,"POST",null,c))}Promise.all(i).then((function(i){var o=ft()(i.map((function(e){return e.data[t]})));r(xu(e,[].concat(Cn(n.data[t]),Cn(o))))}))}})).catch((function(t){r(bu(t))}))}},loadFiltered:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"metadata";return function(i,o){var a=nu.app.getCompleteLocalConfiguration(o()),s=a.requestPageSize||se.b.requestPageSize,u=ku(r,t);return iu(a,u,"POST",null,{filter:n,limit:s}).then((function(r){if(!(r.errors&&r.errors[t]||r.data&&!r.data[t])){if(r.total<=s)return i(xu(e,r.data[t]));for(var o=[],l=Math.ceil((r.total-s)/s),c=0;c<l;c++){var h={filter:n,offset:(c+1)*s,limit:s};o.push(iu(a,u,"POST",null,h))}return Promise.all(o).then((function(n){var o=ft()(n.map((function(e){return e.data[t]})));i(xu(e,[].concat(Cn(r.data[t]),Cn(o))))}))}i(bu(r.errors[t]||new Error("no data")))})).catch((function(t){i(bu(t))}))}},useIndexedBatch:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"metadata";return function(r,i,o,a,s,u){return function(l,c){l(Nu(e,a,r,i,o));var h=c(),f=Rn.mergeFilters({activeApplicationKey:h.app.key,activeScopeKey:Xn.getActiveKey((function(t){return t.scopes}))(h),activePeriodKey:Xn.getActiveKey((function(t){return t.periods}))(h),activePeriodKeys:Xn.getActiveKeys((function(t){return t.periods}))(h),activePlaceKey:Xn.getActiveKey((function(t){return t.places}))(h),activePlaceKeys:Xn.getActiveKeys((function(t){return t.places}))(h)},r,i);return l(pu(t,f,o,e,n,s,u))}}},loadIndexedPage:gu,loadKeysPage:du,setActiveKey:Su(Ru),setActiveKeyAndEnsureDependencies:function(t,e){return function(n){return function(r){r(Ru(t,n)),r(Eu(e))}}},setActiveKeysAndEnsureDependencies:function(t,e){return function(n){return function(r){r(Ou(t,n)),r(Eu(e))}}},setActiveKeys:Su(Ou),receiveUpdated:yu,receiveIndexed:lu,receiveKeys:vu,refreshUses:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"metadata";return function(){return function(i,o){i(Mu(n));var a=o(),s=Xn.getUsedKeys(t)(a);i(hu(t,e,n,s,r));var u=Xn.getUsedIndexPages(t)(a),l=$e()(u,(function(o){at()(o.uses,(function(a){return i(fu(t,e,o.filter,o.order,a.start,a.length,n,r))}))}));return Promise.all(l)}}},removePropertyFromEdited:function(t){return function(e,n){return dispatch(Pu(t,e,n))}},request:function(t,e,n,r,i,o){return function(a,s){iu(nu.app.getCompleteLocalConfiguration(s()),t,e,n,r).then((function(t){a(i(t.data))})).catch((function(t){a(o(t))}))}},saveEdited:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"metadata";return function(i){return function(o,a){if(!t)return o(bu("common/actions#saveEdited: setSubstate parameter is missing!"));if(!e)return o(bu("common/actions#saveEdited: dataType parameter is missing!"));if(!n)return o(bu("common/actions#saveEdited: actionTypes parameter is missing!"));if(!i)return o(bu("common/actions#saveEdited: Model key is missing!"));var s=a(),u=Xn.getByKey(t)(s,i),l=Xn.getEditedByKey(t)(s,i);return u?o(su(t,e,n,r,[l])):void 0}}},updateSubstateFromView:function(t){return function(e){return function(n){e&&e.activeKey?n(Ru(t,e.activeKey)):e&&e.activeKeys&&n(Ou(t,e.activeKeys))}}},updateEdited:function(t,e){return function(n,r,i){return function(o,a){if(!t)return o(bu("common/actions#updateEdited: setSubstate parameter is missing!"));if(!e)return o(bu("common/actions#updateEdited: actionTypes parameter is missing!"));if(!n)return o(bu("common/actions#updateEdited: Model key is missing!"));if(!r)return o(bu("common/actions#updateEdited: Property key is missing!"));var s=Xn.getByKey(t)(a(),n);s&&(i===s.data[r]||ut()(s.data[r],i))?o(Pu(e,n,r)):o(function(t,e){return wu(t,"EDITED.UPDATE",{data:e})}(e,[{key:n,data:En({},r,i)}]))}}},useKeys:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"metadata";return function(i,o){return function(a){return a(Du(n,o,i)),a(hu(t,e,n,i,r))}}},useKeysClear:Su((function(t,e){return wu(t,"USE.KEYS.CLEAR",{componentId:e})})),useIndexed:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"metadata";return function(i,o,a,s,u,l){return function(c,h){c(Iu(n,l,i,o,a,s,u));var f=h(),p=Rn.mergeFilters({activeApplicationKey:f.app.key,activeAttributeKey:Xn.getActiveKey((function(t){return t.attributes}))(f),activeScopeKey:Xn.getActiveKey((function(t){return t.scopes}))(f),activePeriodKey:Xn.getActiveKey((function(t){return t.periods}))(f),activePeriodKeys:Xn.getActiveKeys((function(t){return t.periods}))(f),activePlaceKey:Xn.getActiveKey((function(t){return t.places}))(f),activePlaceKeys:Xn.getActiveKeys((function(t){return t.places}))(f)},i,o);return c(fu(t,e,p,a,s,u,n,r))}}},clearIndex:Su(Cu),useIndexedRegister:Iu,useIndexedClear:Su((function(t,e){return wu(t,"USE.INDEXED.CLEAR",{componentId:e})})),useIndexedClearAll:Su((function(t){return wu(t,"USE.INDEXED.CLEAR_ALL")})),setInitial:Su((function(t){return wu(t,"SET_INITIAL")})),actionDataSetOutdated:function(){return{type:ou.COMMON.DATA.SET_OUTDATED}},actionSetActiveKey:Ru},ju=Vu.add(ou._DEPRECATED_SELECTIONS),Bu=Vu.setActiveKey(ou._DEPRECATED_SELECTIONS);var Uu=function(t){return{type:ou._DEPRECATED_SELECTIONS.UPDATE_FROM_VIEW,data:t}},Gu={clearActiveSelection:function(){return function(t,e){var n,r=nu._deprecatedSelections.getActiveKey(e());r&&(t(Bu(null)),t((n=[r],{type:ou._DEPRECATED_SELECTIONS.REMOVE,keys:n})))}},updateActiveSelection:function(t,e,n){return function(r,i){var o=nu._deprecatedSelections.getActive(i()),a={name:t,values:e,areas:n};if(o){var s=bn({},o,{data:bn({},o.data,{},a)});r(ju(s))}else r(function(t){return function(e){var n={key:He.uuid(),data:t};e(ju([n])),e(Bu(n.key))}}(a))}},updateStateFromView:function(t){return function(e){t&&e(Uu(t))}}},Ku=function(t){return{type:ou.APP.RECEIVE_CONFIGURATION,configuration:t}},Wu={add:Ku,setKey:function(t){return{type:ou.APP.SET_KEY,key:t}},updateLocalConfiguration:function(t){return{type:ou.APP.UPDATE_LOCAL_CONFIGURATION,update:t}},setBaseUrl:function(t){return{type:ou.APP.SET_BASE_URL,url:t}},setLocalConfiguration:function(t,e){return{type:ou.APP.SET_LOCAL_CONFIGURATION,path:t,value:e}},loadConfiguration:function(){return function(t,e){return iu(nu.app.getCompleteLocalConfiguration(e()),"backend/rest/applications/filtered/configurations","POST",null,{filter:{applicationKey:tr.getKey(e())}}).then((function(e){e.errors&&e.errors.configurations||e.data&&!e.data.configurations?t(Vu.actionGeneralError(e.errors.configurations||new Error("no data"))):e.data.configurations.length&&e.data.configurations[0].data&&e.data.configurations[0].data.data?t(Ku(e.data.configurations[0].data.data)):t(Vu.actionGeneralError(new Error("empty configuration")))})).catch((function(e){t(Vu.actionGeneralError(e))}))}}},zu=Vu.setActiveKey(ou.AREAS.AREA_TREE_LEVELS),Yu=Vu.useIndexed(nu.areas.areaTreeLevels.getSubstate,"areaTreeLevels",ou.AREAS.AREA_TREE_LEVELS),Hu=Vu.useKeys(nu.areas.areaTreeLevels.getSubstate,"areaTreeLevels",ou.AREAS.AREA_TREE_LEVELS),qu=Vu.refreshUses(nu.areas.areaTreeLevels.getSubstate,"areaTreeLevels",ou.AREAS.AREA_TREE_LEVELS);var Xu={ensureIndexesWithFilterByActive:Vu.ensureIndexesWithFilterByActive(nu.areas.areaTrees.getSubstate,"areaTreeLevels",ou.AREAS.AREA_TREE_LEVELS),refreshUses:qu,setActiveKey:zu,useIndexed:Yu,useIndexedClear:function(t){return{type:ou.AREAS.AREA_TREE_LEVELS.USE.INDEXED.CLEAR,componentId:t}},useKeys:Hu},Zu=Vu.setActiveKey(ou.AREAS.AREA_TREES),Ju=Vu.useIndexed(nu.areas.areaTrees.getSubstate,"areaTrees",ou.AREAS.AREA_TREES),Qu=Vu.useKeys(nu.areas.areaTrees.getSubstate,"areaTrees",ou.AREAS.AREA_TREES),$u=Vu.refreshUses(nu.areas.areaTrees.getSubstate,"areaTrees",ou.AREAS.AREA_TREES);var tl={areaTreeLevels:Xu,areaTrees:{ensureIndexesWithFilterByActive:Vu.ensureIndexesWithFilterByActive(nu.areas.areaTrees.getSubstate,"areaTrees",ou.AREAS.AREA_TREES),refreshUses:$u,setActiveKey:Zu,useIndexed:Ju,useIndexedClear:function(t){return{type:ou.AREAS.AREA_TREES.USE.INDEXED.CLEAR,componentId:t}},useKeys:Qu,useKeysClear:Vu.useKeysClear(ou.AREAS.AREA_TREES)}},el={add:Vu.add(ou.AREA_RELATIONS),useIndexedRegister:function(t,e,n,r,i,o){return Vu.useIndexedRegister(ou.AREA_RELATIONS,t,e,n,r,i,o)},useIndexedClearAll:Vu.useIndexedClearAll(ou.AREA_RELATIONS),ensureIndexed:function(t,e,n,r){return Vu.ensureIndexed(nu.areaRelations.getSubstate,"area",t,e,n,r,ou.AREA_RELATIONS,"relations")}},nl=Vu.create(nu.attributes.getSubstate,"attributes",ou.ATTRIBUTES),rl=Vu.refreshUses(nu.attributes.getSubstate,"attributes",ou.ATTRIBUTES),il=Vu.delete(nu.attributes.getSubstate,"attributes",ou.ATTRIBUTES),ol=Vu.saveEdited(nu.attributes.getSubstate,"attributes",ou.ATTRIBUTES),al=Vu.updateEdited(nu.attributes.getSubstate,ou.ATTRIBUTES),sl=Vu.useIndexed(nu.attributes.getSubstate,"attributes",ou.ATTRIBUTES),ul=Vu.useIndexedClear(ou.ATTRIBUTES),ll=Vu.useKeys(nu.attributes.getSubstate,"attributes",ou.ATTRIBUTES),cl=Vu.useKeysClear(ou.ATTRIBUTES),hl=Vu.ensureIndexesWithFilterByActive(nu.attributes.getSubstate,"attributes",ou.ATTRIBUTES),fl=Vu.updateSubstateFromView(ou.ATTRIBUTES),pl=Vu.useIndexedBatch("attributes",ou.ATTRIBUTES,"data"),dl=Vu.setActiveKeyAndEnsureDependencies(ou.ATTRIBUTES,"attribute");var gl={create:nl,delete:il,ensureIndexesWithFilterByActive:hl,updateStateFromView:fl,refreshUses:rl,saveEdited:ol,setActiveKey:function(t){return function(e){e(dl(t))}},updateEdited:al,useIndexed:sl,useIndexedClear:ul,useKeys:ll,useKeysClear:cl,useIndexedBatch:pl,loadAttributeData:function(t,e){return function(n,r){return n(pl(null,t,null,e,"attributeDataSourceKey"))}}},ml=Vu.useIndexed(nu.attributeData.getSubstate,"attribute",ou.ATTRIBUTE_DATA,"data"),yl=Vu.useIndexedClear(ou.ATTRIBUTE_DATA),vl=Vu.useIndexedBatch("attribute",ou.ATTRIBUTE_DATA,"data");var El={useIndexed:ml,useIndexedClear:yl,loadFilteredData:function(t,e){return function(n){return n(vl(null,t,null,e,"attributeDataSourceKey"))}}},_l=Vu.useIndexedClear(ou.ATTRIBUTE_STATISTICS),bl=Vu.useIndexedBatch("attribute",ou.ATTRIBUTE_STATISTICS,"statistic");var Sl={useIndexedClear:_l,loadFilteredData:function(t,e){return function(n){return n(bl(null,t,null,e,"attributeDataSourceKey"))}}},wl={useKeys:Vu.useKeys(nu.attributeDataSources.getSubstate,"attribute",ou.ATTRIBUTE_DATA_SOURCES,"dataSources"),useKeysClear:Vu.useKeysClear(ou.ATTRIBUTE_DATA_SOURCES)};function xl(t,e,n,r,i,o){return function(a,s){a(Vu.ensureIndexed(nu.attributeRelations.getSubstate,"attribute",t,e,n,r,ou.ATTRIBUTE_RELATIONS,"relations")).then((function(){var e=nu.attributeRelations.getFilteredRelations(s(),t);if(e){var n=at()(e,(function(t){return t.attributeDataSourceKey})),r=at()(e,(function(t){return t.attributeKey})),u=null,l=[];e.map((function(t){u=t.fidColumnName,l.push(t.attributeDataSourceKey)}));var c=dt()(l),h={fidColumnName:u,attributeDataSourceKey:{in:c}},f={percentile:Ye.quartilePercentiles,attributeDataSourceKey:{in:c}};if(r&&r.length){var p=dt()(r);a(gl.useKeys(p,i))}a(wl.useKeys(n,i));var d=nu.attributeStatistics.getBatchByFilterOrder(s(),f,null);o||d||a(Sl.loadFilteredData(f,i)),nu.attributeData.getBatchByFilterOrder(s(),h,null)||a(El.loadFilteredData(h,i))}})).catch((function(t){a(Vu.actionGeneralError(t))}))}}var Tl={useIndexed:Vu.useIndexed(nu.attributeRelations.getSubstate,"attribute",ou.ATTRIBUTE_RELATIONS,"relations"),useIndexedClearAll:Vu.useIndexedClearAll(ou.ATTRIBUTE_RELATIONS),useIndexedRegister:function(t,e,n,r,i,o){return Vu.useIndexedRegister(ou.ATTRIBUTE_RELATIONS,t,e,n,r,i,o)},ensureIndexed:function(t,e,n,r){return Vu.ensureIndexed(nu.attributeRelations.getSubstate,"attribute",t,e,n,r,ou.ATTRIBUTE_RELATIONS,"relations")},ensureIndexesWithFilterByActive:function(t){return function(e,n){var r=n(),i=Xn.getUsesWithActiveDependency(nu.attributeRelations.getSubstate)(r,t);mt()(i,(function(t){mt()(t.uses,(function(n){e(xl(t.filter,t.order,n.start,n.length))}))}))}},ensureIndexedSpecific:xl},Ll={setActiveKeys:Vu.setActiveKeys(ou.ATTRIBUTE_SETS)},Cl=Vu.add(ou.CASES),Al=Vu.create(nu.cases.getSubstate,"cases",ou.CASES),Ml=Vu.delete(nu.cases.getSubstate,"cases",ou.CASES),Rl=Vu.saveEdited(nu.cases.getSubstate,"cases",ou.CASES),Ol=Vu.updateEdited(nu.cases.getSubstate,ou.CASES),Pl=Vu.updateSubstateFromView(ou.CASES),Il=Vu.useKeys(nu.cases.getSubstate,"cases",ou.CASES),Nl=Vu.useKeysClear(ou.CASES),Dl=Vu.useIndexed(nu.cases.getSubstate,"cases",ou.CASES),kl=Vu.useIndexedClear(ou.CASES),Fl=Vu.refreshUses(nu.cases.getSubstate,"cases",ou.CASES),Vl=Vu.setActiveKeyAndEnsureDependencies(ou.CASES,"case"),jl=Vu.setActiveKeysAndEnsureDependencies(ou.CASES,"case");var Bl={add:Cl,create:Al,delete:Ml,ensureIndexesWithFilterByActive:Vu.ensureIndexesWithFilterByActive(nu.cases.getSubstate,"cases",ou.CASES),refreshUses:Fl,saveEdited:Rl,setActiveKey:function(t){return function(e){e(Vl(t))}},setActiveKeys:function(t){return function(e){e(jl(t))}},updateEdited:Ol,updateStateFromView:Pl,useIndexed:Dl,useIndexedClear:kl,useKeys:Il,useKeysClear:Nl},Ul=Vu.setInitial(ou.CHARTS),Gl=function(t){return{type:ou.CHARTS.UPDATE,data:t}},Kl={updateStateFromView:function(t){return function(e){t&&e(Gl(t))}},use:function(t,e){return function(n,r){var i=nu.charts.getChartConfiguration(r(),t,e),o="chart-"+t;i&&(n(Tl.useIndexedRegister(o,i.filterByActive,i.mergedFilter,null,1,1e3)),n(Tl.ensureIndexedSpecific(i.mergedFilter,null,1,1e3,o)))}},useClear:function(t){return function(e){e(Vu.useIndexedClear(ou.ATTRIBUTE_RELATIONS)("chart_".concat(t)))}},setInitial:Ul};function Wl(t,e){return{type:ou.COMPONENTS.UPDATE,component:t,update:e}}var zl={update:function(t,e){return function(n){n(Wl(t,e))}},updateStateFromView:function(t){return function(e){t&&Dt()(t,(function(t,n){e(Wl(n,t))}))}},set:function(t,e,n){return{type:ou.COMPONENTS.SET,component:t,path:e,value:n}}};function Yl(t,e,n){return an()(n)&&(n=3),function(r,i){var o,a,s=i(),u=nu.app.getLocalConfiguration(s,"apiBackendProtocol"),l=nu.app.getLocalConfiguration(s,"apiBackendHost"),c=nu.app.getLocalConfiguration(s,"apiBackendPath"),h=nu.app.getLocalConfiguration(s,"apiBackendAoiLayerPeriodsPath");Ct()(t)||(t=ct()(nu.aoi.getAois(i()),{key:t})),Ct()(e)||(e=ct()(i().wmsLayers.data,{key:e})),r((o=t.key,a=e.key,{type:ou.LAYER_PERIODS_AOI_LAYER_REQUEST,aoiKey:o,layerKey:a}));var f=u+"://"+$t.a.join(l,c,h),p={data:{geometry:t.geometry,layerName:e.layerName}};return re()(f,{method:"POST",body:JSON.stringify(p),headers:{"content-type":"application/json"}}).then((function(i){console.log("#### LayerPeriods receive",i),i.ok?i.json().then((function(n){r(n?function(t,e,n){return{type:ou.LAYER_PERIODS_AOI_LAYER_RECEIVE,aoiKey:t,layerKey:e,periods:n}}(t.key,e.key,n.dates):Xl(t.key,e.key,"no data returned"))})).catch((function(r){n-1&&Yl(t,e,n-1)})):r(Xl(t.key,e.key,i))}))}}function Hl(t,e,n){return an()(n)&&(n=3),function(r,i){var o,a,s=i(),u=nu.app.getLocalConfiguration(s,"apiBackendProtocol"),l=nu.app.getLocalConfiguration(s,"apiBackendHost"),c=nu.app.getLocalConfiguration(s,"apiBackendPath"),h=nu.app.getLocalConfiguration(s,"apiBackendAoiLayerPeriodsPath");Ct()(t)||(t=ct()(nu.places.getPlaces(i()),{key:t})),Ct()(e)||(e=ct()(i().wmsLayers.data,{key:e})),r((o=t.key,a=e.key,{type:ou.LAYER_PERIODS_PLACE_LAYER_REQUEST,placeKey:o,layerKey:a}));var f=u+"://"+$t.a.join(l,c,h),p={data:{geometry:t.geometry,layerName:e.layerName}};return re()(f,{method:"POST",body:JSON.stringify(p),headers:{"content-type":"application/json"}}).then((function(i){console.log("#### LayerPeriods receive",i),i.ok?i.json().then((function(n){r(n?function(t,e,n){return{type:ou.LAYER_PERIODS_PLACE_LAYER_RECEIVE,placeKey:t,layerKey:e,periods:n}}(t.key,e.key,n.dates):Zl(t.key,e.key,"no data returned"))})).catch((function(r){n-1&&Hl(t,e,n-1)})):r(Zl(t.key,e.key,i))}))}}function ql(t,e,n,r){return an()(r)&&(r=3),function(i,o){var a=o(),s=nu.app.getCompleteLocalConfiguration(a);Ct()(n)||(n=ct()(a.wmsLayers.data,{key:n})),i(function(t,e,n){return{type:ou.LAYER_PERIODS_KEY_LAYER_REQUEST,key:t,geometry:e,layerKey:n}}(t,e,n.key));var u=s.apiBackendProtocol+"://"+$t.a.join(s.apiBackendHost,s.apiBackendPath,s.apiBackendAoiLayerPeriodsPath),l={data:{geometry:e,layerName:n.layerName}};return re()(u,{method:"POST",body:JSON.stringify(l),headers:{"content-type":"application/json"}}).then((function(o){console.log("#### LayerPeriods receive",o),o.ok?o.json().then((function(r){i(r?function(t,e,n,r){return{type:ou.LAYER_PERIODS_KEY_LAYER_RECEIVE,key:t,geometry:e,layerKey:n,periods:r}}(t,e,n.key,r.dates):Jl(t,e,n.key,"no data returned"))})).catch((function(i){r-1&&ql(t,e,n,r-1)})):i(Jl(t,e,n.key,o))}))}}function Xl(t,e,n){return{type:ou.LAYER_PERIODS_AOI_LAYER_REQUEST_ERROR,aoiKey:t,layerKey:e,error:n}}function Zl(t,e,n){return{type:ou.LAYER_PERIODS_PLACE_LAYER_REQUEST_ERROR,placeKey:t,layerKey:e,error:n}}function Jl(t,e,n,r){return{type:ou.LAYER_PERIODS_KEY_LAYER_REQUEST_ERROR,key:t,geometry:e,layerKey:n,error:r}}var Ql={loadForAoi:function(t){return function(e,n){var r=n(),i=ct()(nu.aoi.getAois(r),{key:t});mt()(r.wmsLayers.data,(function(t){t.getDates&&e(Yl(i,t))}))}},loadForPlace:function(t){return function(e,n){var r=n(),i=ct()(nu.places.getPlaces(r),{key:t});i&&i.geometry&&mt()(r.wmsLayers.data,(function(t){t.getDates&&e(Hl(i,t))}))}},loadForKey:function(t,e){return function(n,r){var i=r(),o=nu.wmsLayers.getLayersWithGetDate(i);mt()(o,(function(r){n(ql(t,e,r))}))}}},$l=Vu.add(ou.LAYER_TEMPLATES),tc=Vu.create(nu.layerTemplates.getSubstate,"layerTemplates",ou.LAYER_TEMPLATES),ec=Vu.delete(nu.layerTemplates.getSubstate,"layerTemplates",ou.LAYER_TEMPLATES),nc=Vu.saveEdited(nu.layerTemplates.getSubstate,"layerTemplates",ou.LAYER_TEMPLATES),rc=Vu.updateEdited(nu.layerTemplates.getSubstate,ou.LAYER_TEMPLATES),ic=Vu.useKeys(nu.layerTemplates.getSubstate,"layerTemplates",ou.LAYER_TEMPLATES),oc=Vu.useKeysClear(ou.LAYER_TEMPLATES),ac=Vu.useIndexed(nu.layerTemplates.getSubstate,"layerTemplates",ou.LAYER_TEMPLATES),sc=Vu.useIndexedClear(ou.LAYER_TEMPLATES),uc={add:$l,clearIndex:Vu.clearIndex(ou.LAYER_TEMPLATES),create:tc,delete:ec,ensureIndexesWithFilterByActive:Vu.ensureIndexesWithFilterByActive(nu.layerTemplates.getSubstate,"layerTemplates",ou.LAYER_TEMPLATES),saveEdited:nc,setActiveKey:Vu.setActiveKeyAndEnsureDependencies(ou.LAYER_TEMPLATES,"layerTemplate"),updateEdited:rc,useIndexed:ac,useIndexedClear:sc,useKeys:ic,useKeysClear:oc},lc=Vu.create(nu.layerTrees.getSubstate,"layerTrees",ou.LAYER_TREES,"applications"),cc=Vu.delete(nu.layerTrees.getSubstate,"layerTrees",ou.LAYER_TREES,"applications"),hc=Vu.saveEdited(nu.layerTrees.getSubstate,"layerTrees",ou.LAYER_TREES,"applications"),fc=Vu.updateEdited(nu.layerTrees.getSubstate,ou.LAYER_TREES),pc=Vu.useKeys(nu.layerTrees.getSubstate,"layerTrees",ou.LAYER_TREES,"applications"),dc=Vu.useKeysClear(ou.LAYER_TREES),gc=Vu.useIndexedClear(ou.LAYER_TREES),mc=Vu.useIndexed(nu.layerTrees.getSubstate,"layerTrees",ou.LAYER_TREES,"applications");var yc={create:lc,delete:cc,ensureData:function(t,e){return function(n){return n(mc(null,t,null,1,100,e)).then()}},refreshUses:Vu.refreshUses(nu.layerTrees.getSubstate,"layerTrees",ou.LAYER_TREES,"applications"),saveEdited:hc,updateEdited:fc,updateStateFromView:Vu.updateSubstateFromView(ou.LAYER_TREES),useIndexed:mc,useIndexedClear:gc,useKeys:pc,useKeysClear:dc},vc=Vu.add(ou.SELECTIONS),Ec=Vu.setActiveKey(ou.SELECTIONS),_c=Vu.updateSubstateFromView(ou.SELECTIONS);var bc={add:vc,clearFeatureKeysFilter:function(t){return{type:ou.SELECTIONS.CLEAR.FEATURE_KEYS_FILTER,key:t}},setActiveSelectionFeatureKeysFilterKeys:function(t){return function(e,n){var r,i,o=nu.selections.getActiveKey(n());o&&t&&e((r=o,i=t,{type:ou.SELECTIONS.SET.FEATURE_KEYS_FILTER.KEYS,key:r,featureKeys:i}))}},setActiveKey:Ec,updateStateFromView:_c,updateStateFromViewWithData:function(t){return function(e,n){e(_c(t)),t.data&&e(vc(t.data))}}},Sc=Vu.useKeys(nu.spatialDataSources.vector.getSubstate,"spatial",ou.SPATIAL_DATA_SOURCES.VECTOR,"data"),wc=Vu.useKeysClear(ou.SPATIAL_DATA_SOURCES.VECTOR),xc=Vu.useIndexed(nu.spatialDataSources.vector.getSubstate,"spatial",ou.SPATIAL_DATA_SOURCES.VECTOR,"data"),Tc=Vu.useIndexedBatch("spatial",ou.SPATIAL_DATA_SOURCES.VECTOR,"data"),Lc=Vu.useIndexedClear(ou.SPATIAL_DATA_SOURCES.VECTOR),Cc=Vu.clearIndex(ou.SPATIAL_DATA_SOURCES.VECTOR);var Ac={addBatch:Vu.addBatch(ou.SPATIAL_DATA_SOURCES.VECTOR),addBatchIndex:Vu.addBatchIndex(ou.SPATIAL_DATA_SOURCES.VECTOR),loadLayerData:function(t,e){return function(n,r){var i={},o=nu.app.getLocalConfiguration(r(),"geometriesAccuracy");return o&&(i.transformation={snapToGrid:{size:o},transform:4326}),n(Tc(null,t,null,e,"spatialDataSourceKey",i))}},useKeys:Sc,useKeysClear:wc,useIndexed:xc,useIndexedClear:Lc,clearIndex:Cc},Mc=Vu.useKeys(nu.spatialDataSources.getSubstate,"spatial",ou.SPATIAL_DATA_SOURCES,"dataSources"),Rc=Vu.useKeysClear(ou.SPATIAL_DATA_SOURCES),Oc={vector:Ac,add:Vu.add(ou.SPATIAL_DATA_SOURCES),useKeys:Mc,useKeysClear:Rc};var Pc={add:Vu.add(ou.SPATIAL_RELATIONS),useIndexedRegister:function(t,e,n,r,i,o){return Vu.useIndexedRegister(ou.SPATIAL_RELATIONS,t,e,n,r,i,o)},useIndexedClearAll:Vu.useIndexedClearAll(ou.SPATIAL_RELATIONS),ensureIndexed:function(t,e,n,r){return Vu.ensureIndexed(nu.spatialRelations.getSubstate,"spatial",t,e,n,r,ou.SPATIAL_RELATIONS,"relations")},ensureIndexesWithFilterByActive:function(t){return function(e,n){var r=n(),i=Xn.getUsesWithActiveDependency(nu.spatialRelations.getSubstate)(r,t);mt()(i,(function(t){mt()(t.uses,(function(n){var r,i,o,a,s;e((r=t.filter,i=t.order,o=n.start,a=n.length,function(t,e){t(Vu.ensureIndexed(nu.spatialRelations.getSubstate,"spatial",r,i,o,a,ou.SPATIAL_RELATIONS,"relations")).then((function(){var n=nu.spatialRelations.getFilteredData(e(),r);if(n){var i=at()(n,(function(t){return t.spatialDataSourceKey})),o=dt()(i);o&&t(Oc.useKeys(o,s)).then((function(){}))}})).catch((function(e){t(Vu.actionGeneralError(e))}))}))}))}))}}},Ic={useIndexed:Vu.useIndexed(nu.spatialData.getSubstate,"spatial",ou.SPATIAL_DATA,"data")},Nc=Vu.add(ou.STYLES),Dc=Vu.useKeys(nu.styles.getSubstate,"styles",ou.STYLES),kc=Vu.useKeysClear(ou.STYLES),Fc=Vu.updateSubstateFromView(ou.STYLES),Vc={add:Nc,useKeys:Dc,useKeysClear:kc,updateStateFromView:Fc,updateStateFromViewWithData:function(t){return function(e,n){e(Fc(t)),t.data&&e(Nc(t.data))}}},jc=Vu.actionGeneralError,Bc=Vu.setInitial(ou.MAPS),Uc=function(t){return function(e,n){var r=nu.maps.getMapSetByMapKey(n(),t);r&&e(ih(r.key,t))}},Gc=function(t){return function(e,n){var r=n();if(!nu.maps.getMapSetByKey(r,t))return e(jc("Can not set setKey ".concat(t," as active, because set with this key dont exists.")));var i=nu.maps.getActiveSetKey(r);return t!==i?e(oh(t)):void 0}},Kc=function(t,e,n,r){return function(i,o){var a=o(),s=De.getFlattenLayers(t[0][e]).filter((function(t){return t.visible})).map((function(t){return t.key}));n&&n.forEach((function(n){var o=nu.maps.getLayersStateByMapKey_deprecated(a,n,r);(o?s.filter((function(t){return!o.some((function(e){return e.layer&&e.layer.layerTemplate===t}))})):s).forEach((function(o){var a=De.getLayerZindex(t[0],o),s={layerTemplate:o};switch(e){case"backgroundLayers":return i(Jc(n,s));case"layers":default:return i(qc(n,s,a,r))}}))}))}},Wc=function(t,e){return function(n,r){var i=r(),o=nu.maps.getMapSetByKey(i,t);return o?o.maps&&o.maps.includes(e)?n(jc("Set ".concat(t," alredy contains map ").concat(e,"."))):(n(uh(t,e)),void(nu.maps.getMapSetActiveMapKey(i,t)||n(Uc(e)))):n(jc("No set found for setKey ".concat(t,".")))}},zc=function(t,e){return function(n,r){var i=r(),o=nu.maps.getMapSetByKey(i,t);if(!o)return n(jc("No set found for setKey ".concat(t,".")));if(!o.maps||!o.maps.includes(e))return n(jc("Set ".concat(t," do not contains map ").concat(e,".")));var a=nu.maps.getMapSetActiveMapKey(i,t);if(n(lh(t,e)),a===e){var s=nu.maps.getMapSetMapKeys(r(),t);s&&n(ih(t,s[0]))}}},Yc=function(t){return function(e,n){if(t&&!t.key)return e(jc("Undefined mapKey for map ".concat(t)));var r=n(),i=nu.maps.getMapByKey(r,t.key);return e(i?jc("Map with given mapKey (".concat(t.key,") already exists ").concat(i)):dh(t))}},Hc=function(t){return function(e,n){var r=n();if(!nu.maps.getMapByKey(r,t))return e(jc("No map found for mapKey ".concat(t,".")));var i=nu.maps.getMapSets(r);i&&mt()(i,(function(n){Ut()(n.maps,t)&&e(zc(n.key,t))})),e(gh(t))}},qc=function(t,e,n,r){return function(i,o){var a=o();if(e.key||(e.key=He.uuid()),!nu.maps.getMapByKey(a,t))return i(jc("No map found for mapKey ".concat(t,".")));i(_h(t,e,n)),i(Qc(t,r))}},Xc=function(t,e){return function(n,r){if(e){var i=r();return n(nu.maps.getMapByKey(i,t)?nu.maps.getMapLayerByMapKeyAndLayerKey(i,t,e)?bh(t,e):jc("No layer (".concat(e,") found in mapKey ").concat(t,".")):jc("No map found for mapKey ".concat(t,".")))}return n(jc("Undefined layer key."))}},Zc=function(t,e){return function(n,r){var i=nu.maps.getMapSetByMapKey(r(),t),o=null,a=null;i&&i.sync?(o=St()(e,(function(t,e){return i.sync[e]})),a=Xt()(e,(function(t,e){return i.sync[e]}))):a=e,o&&!_t()(o)&&(o=Ge.view.ensureViewIntegrity(o),n(hh(i.key,o))),a&&!_t()(a)&&(a=Ge.view.ensureViewIntegrity(a),n(Eh(t,a)))}},Jc=function(t,e){return function(n,r){var i=r();if(e&&!e.key&&(e.key=He.uuid()),!nu.maps.getMapByKey(i,t))return n(jc("No map found for mapKey ".concat(t,".")));n(Ch(t,e)),n(th(t))}};function Qc(t,e,n){return function(r,i){r($c(t));var o=i();e||n?e&&(e=bn({},e,{key:"pantherBackgroundLayer"}),n=[e].concat(Cn(n=n||[]))):n=nu.maps.getAllLayersStateByMapKey(o,t);var a=Xn.getAllActiveKeys(o);if(n){var s="map_".concat(t);n.forEach((function(t){var e=bn({},t.metadataModifiers);t.layerTemplateKey?(e.layerTemplateKey=t.layerTemplateKey,r(uc.useKeys([t.layerTemplateKey],s))):t.areaTreeLevelKey&&(e.areaTreeLevelKey=t.areaTreeLevelKey,r(tl.areaTreeLevels.useKeys([t.areaTreeLevelKey],s)));var n,o,u=t.filterByActive||null,l=Rn.mergeFilters(a,u,e);(t.layerTemplateKey||t.areaTreeLevelKey||l.layerTemplateKey)&&(t.layerTemplateKey||l.layerTemplateKey?(n=Pc,o=nu.spatialRelations):t.areaTreeLevelKey&&(n=el,o=nu.areaRelations),r(n.useIndexedRegister(s,u,e,null,1,1e3)),r(n.ensureIndexed(l,null,1,1e3)).then((function(){var t=o.getFilteredData(i(),l);if(t&&t.length){var e=t.map((function(t){return{spatialDataSourceKey:t.spatialDataSourceKey,fidColumnName:t.fidColumnName}})),n=dt()(e.map((function(t){return t.spatialDataSourceKey})));r(Oc.useKeys(n,s)).then((function(){var t=nu.spatialDataSources.getByKeys(i(),n);t&&t.forEach((function(t){if(t&&t.data&&"vector"===t.data.type){var n=ct()(e,{spatialDataSourceKey:t.key});r(Ic.useIndexed(null,n,null,1,1,s))}}))}))}})));if(t.attributeKeys){r(gl.useKeys(t.attributeKeys,s));var c=bn({},t.attributeMetadataModifiers,{attributeKey:{in:t.attributeKeys}});t.layerTemplateKey?c.layerTemplateKey=t.layerTemplateKey:t.areaTreeLevelKey&&(c.areaTreeLevelKey=t.areaTreeLevelKey);var h=t.attributeFilterByActive||null,f=Rn.mergeFilters(a,h,c);r(Tl.useIndexedRegister(s,h,c,null,1,2e3)),r(Tl.ensureIndexed(f,null,1,2e3)).then((function(){var t=nu.attributeRelations.getIndexed(i(),h,c,null,1,2e3);if(t&&t.length){var e=t.map((function(t){return{attributeDataSourceKey:t.data&&t.data.attributeDataSourceKey,fidColumnName:t.data&&t.data.fidColumnName}})).map((function(t){return t.attributeDataSourceKey}));r(wl.useKeys(e,s)).then((function(){var n=nu.attributeDataSources.getByKeys(i(),e);if(n){var o=[];n.forEach((function(t){o.push(t.key)}));var a={attributeDataSourceKey:{in:o},fidColumnName:t[0].data.fidColumnName};r(El.useIndexed(null,a,null,1,1,s))}}))}}))}t.styleKey&&r(Vc.useKeys([t.styleKey],s))}))}}}function $c(t){return function(e){e(Vu.useIndexedClear(ou.SPATIAL_RELATIONS)("map_".concat(t))),e(Vu.useKeysClear(ou.SPATIAL_DATA_SOURCES)("map_".concat(t))),e(Vu.useKeysClear(ou.LAYER_TEMPLATES)("map_".concat(t))),e(Vu.useKeysClear(ou.AREAS.AREA_TREE_LEVELS)("map_".concat(t))),e(Vu.useKeysClear(ou.STYLES)("map_".concat(t)))}}function th(t,e){return function(n,r){var i=r(),o=nu.maps.getLayersStateByMapKey_deprecated(i,t,e),a=nu.maps.getBackgroundLayerStateByMapKey_deprecated(i,t),s=[];if(a&&s.push(a),o&&(s=s.concat(o)),s.length){var u="map_".concat(t);s.forEach((function(t){var e=Xe()(t.mergedFilter),i=Xe()(t.filterByActive);e.periodKey&&delete e.periodKey,e.attributeKey&&delete e.attributeKey,i.attribute&&delete i.attribute,n(Pc.useIndexedRegister(u,i,e,null,1,1e3)),n(Pc.ensureIndexed(e,null,1,1e3)).then((function(){var i=nu.spatialRelations.getDataSourceKeysFiltered(r(),e);i&&i.length&&n(Oc.useKeys([i[0]],u)).then((function(){var o=nu.spatialDataSources.getByKeys(r(),i);if(o&&o[0]&&"vector"===o[0].data.type){var a=nu.spatialRelations.getFilteredData(r(),e),s={spatialDataSourceKey:o[0].key,fidColumnName:a[0].fidColumnName};nu.spatialDataSources.vector.getBatchByFilterOrder(r(),s,null)||n(Oc.vector.loadLayerData(s,u));var l=Xe()(t.mergedFilter);n(Tl.useIndexedRegister(u,t.filterByActive,l,null,1,1e3)),n(Tl.ensureIndexedSpecific(l,null,1,1e3,u))}}))})).catch((function(t){n(Vu.actionGeneralError(t))}))}))}}}var eh=function(t){return t.heading&&t.heading>360&&(t.heading=t.heading-360),t.heading&&t.heading<-360&&(t.heading=t.heading+360),t.tilt&&t.tilt<0&&(t.tilt=0),t.tilt&&t.tilt>90&&(t.tilt=90),t},nh=function(t,e){return function(n,r){var i=nu.maps.getMapSetByMapKey(r(),t),o={},a={};i&&i.sync?(o=St()(e,(function(t,e){return"lookAtLocation"===e?i.sync.location:i.sync[e]})),a=Xt()(e,(function(t,e){return"lookAtLocation"===e?i.sync.location:i.sync[e]}))):a=e,o&&!_t()(o)&&(o=eh(o),n(Vh(i.key,o))),a&&!_t()(a)&&(a=eh(a),n(Bh(t,a)))}},rh=function(t){return{type:ou.MAPS.SET_ACTIVE_MAP_KEY,mapKey:t}},ih=function(t,e){return{type:ou.MAPS.SET.SET_ACTIVE_MAP_KEY,mapKey:e,setKey:t}},oh=function(t){return{type:ou.MAPS.SET_ACTIVE_SET_KEY,setKey:t}},ah=function(t){return{type:ou.MAPS.SET.ADD,set:t}},sh=function(t){return{type:ou.MAPS.SET.REMOVE,setKey:t}},uh=function(t,e){return{type:ou.MAPS.SET.ADD_MAP,setKey:t,mapKey:e}},lh=function(t,e){return{type:ou.MAPS.SET.REMOVE_MAP,setKey:t,mapKey:e}},ch=function(t,e){return{type:ou.MAPS.SET.VIEW.SET,setKey:t,view:e}},hh=function(t,e){return{type:ou.MAPS.SET.VIEW.UPDATE,setKey:t,update:e}},fh=function(t,e){return{type:ou.MAPS.SET.SET_SYNC,setKey:t,sync:e}},ph=function(t,e){return{type:ou.MAPS.SET.SET_MAPS,setKey:t,maps:e}},dh=function(t){return{type:ou.MAPS.MAP.ADD,map:t}},gh=function(t){return{type:ou.MAPS.MAP.REMOVE,mapKey:t}},mh=function(t,e){return{type:ou.MAPS.MAP.SET_NAME,mapKey:t,name:e}},yh=function(t,e){return{type:ou.MAPS.MAP.SET_DATA,mapKey:t,data:e}},vh=function(t,e){return{type:ou.MAPS.MAP.VIEW.SET,mapKey:t,view:e}},Eh=function(t,e){return{type:ou.MAPS.MAP.VIEW.UPDATE,mapKey:t,update:e}},_h=function(t,e,n){return{type:ou.MAPS.LAYERS.LAYER.ADD,mapKey:t,layer:e,index:n}},bh=function(t,e){return{type:ou.MAPS.LAYERS.LAYER.REMOVE,mapKey:t,layerKey:e}},Sh=function(t,e,n){return{type:ou.MAPS.LAYERS.LAYER.SET_INDEX,mapKey:t,layerKey:e,index:n}},wh=function(t,e,n){return{type:ou.MAPS.LAYERS.LAYER.UPDATE,mapKey:t,layerKey:e,layer:n}},xh=function(t,e,n){return{type:ou.MAPS.LAYERS.LAYER.SET,mapKey:t,layerKey:e,layer:n}},Th=function(t,e,n){return{type:ou.MAPS.MAP.LAYERS.SET.STYLE,mapKey:t,layerKey:e,style:n}},Lh=function(t,e,n){return{type:ou.MAPS.MAP.LAYERS.SET.HOVERED_FEATURE_KEYS,mapKey:t,layerKey:e,hoveredFeatureKeys:n}},Ch=function(t,e){return{type:ou.MAPS.SET_BACKGROUND_LAYER,mapKey:t,backgroundLayer:e}},Ah=function(t,e){return{type:ou.MAPS.SET.SET_BACKGROUND_LAYER,setKey:t,backgroundLayer:e}},Mh=function(t,e){return{type:ou.MAPS.SET.SET_LAYERS,setKey:t,layers:e}},Rh=function(t,e){return{type:ou.MAPS.LAYERS.SET,mapKey:t,layers:e}},Oh=function(t,e){return{type:ou.MAPS.SET_CASE,mapKey:t,case:e}},Ph=function(t,e){return{type:ou.MAPS.SET_SCOPE,mapKey:t,scope:e}},Ih=function(t,e){return{type:ou.MAPS.SET_SCENARIO,mapKey:t,scenario:e}},Nh=function(t,e){return{type:ou.MAPS.SET_PLACE,mapKey:t,place:e}},Dh=function(t,e){return{type:ou.MAPS.SET_PERIOD,mapKey:t,period:e}},kh=function(t){return{type:ou.MAPS.UPDATE,data:t}},Fh=function(t,e){return{type:ou.MAPS.SET.WORLD_WIND_NAVIGATOR.SET,setKey:t,worldWindNavigator:e}},Vh=function(t,e){return{type:ou.MAPS.SET.WORLD_WIND_NAVIGATOR.UPDATE,setKey:t,worldWindNavigator:e}},jh=function(t,e){return{type:ou.MAPS.MAP.WORLD_WIND_NAVIGATOR.SET,mapKey:t,worldWindNavigator:e}},Bh=function(t,e){return{type:ou.MAPS.MAP.WORLD_WIND_NAVIGATOR.UPDATE,mapKey:t,worldWindNavigator:e}},Uh={addLayer:qc,addLayers:function(t,e){return function(n,r){var i=r();return nu.maps.getMapByKey(i,t)?e.map((function(e){return n(qc(t,e))})):n(jc("No map found for mapKey ".concat(t,".")))}},addLayersToMaps:function(t,e,n){return function(r,i){var o=i(),a=nu.layerTrees.getByFilterOrder(o,t,null);if(a){var s=a[a.length-1];if(s&&s.data&&s.data.structure&&s.data.structure.length>0){var u=s.data.structure;r(Kc(u,"layers",e,n)),r(Kc(u,"backgroundLayers",e,n))}}}},addMap:Yc,addMapForPeriod:function(t,e){return function(n,r){var i=r(),o=nu.maps.getMapByMetadata_deprecated(i,{period:t});if(!o){var a=He.uuid();n(Yc(o={key:a,data:{metadataModifiers:{period:t}}}))}n(Wc(e,o.key)),n(function(t){return function(e,n){var r=n(),i=nu.maps.getMapSetMapKeys(r,t),o=nu.maps.getMapsAsObject(r),a=nu.periods.getAllAsObject(r);if(i&&o&&a){var s=i.map((function(t){var e=Xe()(o[t]),n=e&&e.data&&e.data.metadataModifiers&&e.data.metadataModifiers.period;return n&&a[n]&&(e.data.metadataModifiers.period=a[n].data.period||a[n].data.nameDisplay),e}));if(s&&s.length){var u=he()(s,["data.metadataModifiers.period"],["asc"]).map((function(t){return t.key}));e(ph(t,u))}}}}(e))}},addMapToSet:Wc,addSet:function(t){return function(e,n){var r=n(),i=t.key;if(!i)return e(jc("Undefined setKey for set ".concat(t)));var o=nu.maps.getMapSetByKey(r,i);if(o)return e(jc("Set with given setKey (".concat(i,") already exists ").concat(o)));e(ah(t)),nu.maps.getActiveSetKey(r)||e(oh(i))}},goToPlace:function(t){return function(e,n){t&&t.length&&Ge.getLocationFromPlaceString(t).then((function(t){if(t){var r=nu.maps.getActiveMapKey(n());e(Zc(r,t));var i={range:t.boxRange,lookAtLocation:{latitude:t.center.lat,longitude:t.center.lon}};e(nh(r,i))}}))}},removeLayer:Xc,removeLayers:function(t,e){return function(n,r){var i=r();return nu.maps.getMapByKey(i,t)?e.map((function(e){return n(Xc(t,e))})):n(jc("No map found for mapKey ".concat(t,".")))}},removeMap:Hc,removeMapForPeriod:function(t,e){return function(e,n){var r=n(),i=nu.maps.getMapByMetadata_deprecated(r,{period:t});e(i?Hc(i.key):jc("No map found for period ".concat(t,".")))}},removeMapKeyFromSet:zc,removeSet:function(t){return function(e,n){var r=n();return e(nu.maps.getMapSetByKey(r,t)?sh(t):jc("No set found for setKey ".concat(t,".")))}},resetViewHeading:function(t){return function(e,n){var r=nu.maps.getView(n(),t);Ge.resetHeading(r.heading,(function(n){return e(Zc(t,{heading:n}))}))}},setActiveMapKey:function(t){return function(e,n){var r=n();if(!nu.maps.getMapByKey(r,t))return e(jc("Can not set mapKey ".concat(t," as active, because map with this key dont exists.")));var i=nu.maps.getActiveMapKey(r);if(t!==i){e(rh(t));var o=nu.maps.getMapSetByMapKey(r,t);o&&e(Gc(o.key))}}},setActiveSetKey:Gc,setLayerHoveredFeatureKeys:function(t,e,n){return function(r,i){var o=i(),a=nu.maps.getMapLayerByMapKeyAndLayerKey(o,t,e);if(a){var s=a&&a.options&&a.options.hovered&&a.options.hovered.keys;if(s)JSON.stringify(nt()(s))!==JSON.stringify(nt()(n))&&r(Lh(t,e,n));else r(Lh(t,e,n))}else nu.maps.getMapSetByMapKey(o,t)}},setLayerSelectedFeatureKeys:function(t,e,n){return function(r,i){var o=i(),a=(nu.maps.getMapLayerByMapKeyAndLayerKey(o,t,e),nu.selections.getActiveKey(o)),s=a||He.uuid();if(a)r(bc.setActiveSelectionFeatureKeysFilterKeys(n));else{var u={key:s,data:{colour:"#00ffff",featureKeysFilter:{keys:n}}};r(bc.add([u])),r(bc.setActiveKey(s))}}},setLayerIndex:function(t,e,n){return function(r,i){var o=i();if(!nu.maps.getMapByKey(o,t))return r(jc("No map found for mapKey ".concat(t,".")));r(Sh(t,e,n))}},setMapBackgroundLayer:Jc,setMapCase:function(t,e){return function(n,r){var i=r();if(!nu.maps.getMapByKey(i,t))return n(jc("No map found for mapKey ".concat(t,".")));n(Oh(t,e))}},setMapData:function(t,e){return function(n,r){var i=r();return n(nu.maps.getMapByKey(i,t)?yh(t,e):jc("No map found for mapKey ".concat(t,".")))}},setMapLayer:function(t,e,n){return function(r,i){var o=i();return nu.maps.getMapByKey(o,t)?nu.maps.getMapLayerByMapKeyAndLayerKey(o,t,e)?void r(xh(t,e,n)):r(jc("No layer (".concat(e,") found in mapKey ").concat(t,"."))):r(jc("No map found for mapKey ".concat(t,".")))}},setMapLayerStyle:function(t,e,n){return function(r,i){var o=i();return nu.maps.getMapByKey(o,t)?nu.maps.getMapLayerByMapKeyAndLayerKey(o,t,e)?void r(Th(t,e,n)):r(jc("No layer (".concat(e,") found in mapKey ").concat(t,"."))):r(jc("No map found for mapKey ".concat(t,".")))}},setMapLayers:function(t,e){return function(n,r){var i=r();if(!nu.maps.getMapByKey(i,t))return n(jc("No map found for mapKey ".concat(t,".")));n(Rh(t,e)),n(Qc(t))}},setMapName:function(t,e){return function(n,r){var i=r();return n(nu.maps.getMapByKey(i,t)?mh(t,e):jc("No map found for mapKey ".concat(t,".")))}},setMapPeriod:function(t,e){return function(n,r){var i=r();if(!nu.maps.getMapByKey(i,t))return n(jc("No map found for mapKey ".concat(t,".")));n(Dh(t,e))}},setMapPlace:function(t,e){return function(n,r){var i=r();if(!nu.maps.getMapByKey(i,t))return n(jc("No map found for mapKey ".concat(t,".")));n(Nh(t,e))}},setMapScenario:function(t,e){return function(n,r){var i=r();if(!nu.maps.getMapByKey(i,t))return n(jc("No map found for mapKey ".concat(t,".")));n(Ih(t,e))}},setMapScope:function(t,e){return function(n,r){var i=r();if(!nu.maps.getMapByKey(i,t))return n(jc("No map found for mapKey ".concat(t,".")));n(Ph(t,e))}},setMapView:function(t,e){return function(n,r){var i=r();return n(nu.maps.getMapByKey(i,t)?vh(t,e):jc("No map found for mapKey ".concat(t,".")))}},setMapSetActiveMapKey:Uc,setSetBackgroundLayer:function(t,e){return function(n,r){var i=r();if(!nu.maps.getMapSetByKey(i,t))return n(jc("No map set found for setKey ".concat(t,".")));n(Ah(t,e))}},setSetLayers:function(t,e){return function(n,r){var i=r();if(!nu.maps.getMapSetByKey(i,t))return n(jc("No map set found for setKey ".concat(t,".")));n(Mh(t,e))}},setSetSync:function(t,e){return function(n,r){var i=r();return n(nu.maps.getMapSetByKey(i,t)?fh(t,e):jc("No set found for setKey ".concat(t,".")))}},setSetView:function(t,e){return function(n,r){var i=r();return n(nu.maps.getMapSetByKey(i,t)?ch(t,e):jc("No set found for setKey ".concat(t,".")))}},setInitial:Bc,updateMapLayer:function(t,e,n){return function(r,i){var o=i();return nu.maps.getMapByKey(o,t)?nu.maps.getMapLayerByMapKeyAndLayerKey(o,t,e)?void r(wh(t,e,n)):r(jc("No layer (".concat(e,") found in mapKey ").concat(t,"."))):r(jc("No map found for mapKey ".concat(t,".")))}},updateStateFromView:function(t){return function(e){t&&e(kh(t))}},updateMapAndSetView:Zc,updateSetView:function(t,e){return function(n,r){var i=nu.maps.getMapSetActiveMapKey(r(),t);n(Zc(i,e))}},use:Qc,useClear:$c,deprecated_resetWorldWindNavigatorHeading:function t(e,n){return function(r,i){var o=nu.maps.getNavigator_deprecated(i(),e),a=1;Math.abs(o.heading)>60?a=2:Math.abs(o.heading)>120&&(a=3),(o.heading>0&&o.heading<180||o.heading<0&&o.heading<-180)&&(a=-a),a=n||a,setTimeout((function(){var n;Math.abs(o.heading)>Math.abs(a)?(n=o.heading+a,r(nh(e,{heading:n})),r(t(e,a))):r(nh(e,{heading:n=0}))}),20)}},deprecated_setMapWorldWindNavigator:function(t,e){return function(n,r){var i=r();return n(nu.maps.getMapByKey(i,t)?jh(t,e):jc("No map found for mapKey ".concat(t,".")))}},deprecated_setSetWorldWindNavigator:function(t,e){return function(n,r){var i=r();return n(nu.maps.getMapSetByKey(i,t)?Fh(t,e):jc("No set found for setKey ".concat(t,".")))}},deprecated_updateWorldWindNavigator:nh,deprecated_use:th,deprecated_useClear:function(t){return function(e){e(Vu.useIndexedClear(ou.SPATIAL_RELATIONS)("map_".concat(t)))}}},Gh=Vu.add(ou.PERIODS),Kh=Vu.create(nu.periods.getSubstate,"periods",ou.PERIODS),Wh=Vu.delete(nu.periods.getSubstate,"periods",ou.PERIODS),zh=Vu.saveEdited(nu.periods.getSubstate,"periods",ou.PERIODS),Yh=Vu.updateEdited(nu.periods.getSubstate,ou.PERIODS),Hh=Vu.updateSubstateFromView(ou.PERIODS),qh=Vu.useKeys(nu.periods.getSubstate,"periods",ou.PERIODS),Xh=Vu.useKeysClear(ou.PERIODS),Zh=Vu.useIndexed(nu.periods.getSubstate,"periods",ou.PERIODS),Jh=Vu.useIndexedClear(ou.PERIODS),Qh=Vu.refreshUses(nu.periods.getSubstate,"periods",ou.PERIODS),$h=Vu.setActiveKeyAndEnsureDependencies(ou.PERIODS,"period"),tf=Vu.setActiveKeysAndEnsureDependencies(ou.PERIODS,"period");var ef={add:Gh,create:Kh,delete:Wh,ensureIndexesWithFilterByActive:Vu.ensureIndexesWithFilterByActive(nu.periods.getSubstate,"periods",ou.PERIODS),refreshUses:Qh,saveEdited:zh,setActiveKey:function(t){return function(e){e($h(t))}},setActiveKeys:function(t){return function(e){e(tf(t))}},updateEdited:Yh,updateStateFromView:Hh,useIndexed:Zh,useIndexedClear:Jh,useKeys:qh,useKeysClear:Xh},nf=Vu.add(ou.PLACES),rf=Vu.create(nu.places.getSubstate,"places",ou.PLACES),of=Vu.delete(nu.places.getSubstate,"places",ou.PLACES),af=Vu.saveEdited(nu.places.getSubstate,"places",ou.PLACES),sf=Vu.setActiveKey(ou.PLACES),uf=Vu.setActiveKeys(ou.PLACES),lf=Vu.updateEdited(nu.places.getSubstate,ou.PLACES),cf=Vu.useIndexed(nu.places.getSubstate,"places",ou.PLACES),hf=Vu.useIndexedClear(ou.PLACES),ff=Vu.useKeys(nu.places.getSubstate,"places",ou.PLACES),pf=Vu.useKeysClear(ou.PLACES),df=Vu.refreshUses(nu.places.getSubstate,"places",ou.PLACES),gf={add:nf,create:rf,delete:of,ensureIndexesWithFilterByActive:Vu.ensureIndexesWithFilterByActive(nu.places.getSubstate,"places",ou.PLACES),refreshUses:df,saveEdited:af,setActiveKey:sf,setActiveKeys:uf,updateEdited:lf,useIndexed:cf,useIndexedClear:hf,useKeys:ff,useKeysClear:pf},mf={};function yf(){return function(t,e){var n=nu.scenarios.cases.getActiveCaseScenarioKeys(e()),r=nu.scenarios.cases.getActiveCaseEditedScenarioKeys(e()),i=[];n&&(i=[].concat(Cn(i),Cn(n))),r&&(i=[].concat(Cn(i),Cn(r))),t(function(t){return{type:ou.SCENARIOS_EDITED_REMOVE,keys:t}}(i))}}function vf(t,e){return function(n,r){var i,o,a=r(),s=nu.scenarios.cases.getActiveKey(a),u=nu.scenarios.cases.getActive(a),l=!1;if(u&&u.data){if(("geometry"===t||"scenarios"===t)&&u.data[t]){var c=Xe()(u.data[t]);l=JSON.stringify(e)===JSON.stringify(c)}l||e===u.data[t]||!u.data[t]&&0===e.length?n((i=s,o=t,{type:ou.SCENARIOS_CASES_EDITED_REMOVE_PROPERTY,caseKey:i,property:o})):n(jf([{key:s,data:En({},t,e)}]))}else n(jf([{key:s,data:En({},t,e)}]))}}function Ef(t){return function(e,n){var r=nu.scenarios.cases.getActiveKey(n());if(e(Df(t)),t){var i=nu.scenarios.cases.getActiveCaseScenarioKeys(n());t!==r&&e(Nf(i))}else e(Nf(null))}}function _f(t){return function(e,n){var r=nu.scenarios.scenarios.getActiveKeys(n());e(Nf(fn()(r,t)))}}function bf(t){return function(e){e(function(t){return{type:ou.SCENARIOS_CASES_UPDATE,data:t}}(t))}}function Sf(t){return function(e,n){e(function(t){return{type:ou.SCENARIOS_CASES_REMOVE,keys:t}}(t))}}function wf(t){return function(e,n){var r=n(),i=nu.app.getCompleteLocalConfiguration(r);if(r.scenarios.loading);else{e(function(t){return{type:ou.SCENARIOS_REQUEST,caseKey:t}}(t));var o={scenario_case_id:t};e(Vu.request(i,"backend/rest/metadata/scenarios","GET",o,null,xf,Ff))}}}function xf(t){return t=t.scenarios?t.scenarios:t,function(e){t?(e(function(t){return{type:ou.SCENARIOS_RECEIVE,data:t}}(t=at()(t,(function(t){var e=t.id;return bn({},Tn(t,["id"]),{key:e})})))),e((function(t,e){var n=nu.scenarios.cases.getActive(e());n&&(t(bf([bn({},n,{data:bn({},n.data,{scenariosLoaded:!0})})])),t(Uh.updateWithScenarios()))}))):console.error("Scenarios actions#loadReceive: No scenarios loaded")}}function Tf(t){return function(e){var n;t=at()(t,(function(t){var e=t.id,n=t.data,r=Tn(t,["id","data"]),i=n.scenario_ids,o=Tn(n,["scenario_ids"]);return bn({},r,{key:e,data:bn({},o,{geometry:JSON.parse(o.geometry),scenarios:i})})})),e((n=t,{type:ou.SCENARIOS_CASES_RECEIVE,data:n}))}}function Lf(t,e,n){return an()(n)&&(n=5),function(r,i){var o;r((o=at()(t,"key"),{type:ou.SCENARIOS_CASES_API_UPDATE_REQUEST,keys:o}));var a=i(),s=nu.app.getCompleteLocalConfiguration(a),u=s.apiBackendProtocol+"://"+$t.a.join(s.apiBackendHost,s.apiBackendPath,"backend/rest/metadata"),l={data:{scenario_cases:at()(t,(function(t){var e=bn({},t.data,{scenario_ids:t.data.scenarios});return delete e.scenarios,e.scenariosLoaded&&delete e.scenariosLoaded,{id:t.key,data:e}})),scenarios:at()(e,(function(t){var e={data:bn({},t.data)};return"number"===typeof t.key?e.id=t.key:e.uuid=t.key,delete e.data.file,e}))}};return re()(u,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(l)}).then((function(t){var n=t.headers.get("Content-type");if(t.ok&&n&&-1!==n.indexOf("application/json"))return t.json().then((function(t){if(t.data){r(function(t){return function(e){var n=t.scenario_cases,r=t.scenarios;r.length&&(e(yf()),e(xf(r))),e(Tf(n)),e(Uf())}}(t.data));var n=[],o=[];mt()(t.data.scenarios,(function(t){var r=ct()(e,{key:t.uuid||t.id});if(r&&r.data.file)n.push({key:t.id,data:r.data});else if(r&&r.dataSourceCloneKey){var a=nu.spatialDataSources.getDataSource(i(),r.dataSourceCloneKey);o.push({key:t.id,layerName:a.data.layer_name,data:r.data})}})),n.length&&r(Af(n)),o.length&&r((s=at()(o,(function(t){return{scenario_id:t.key,scope_id:nu.scopes.getActiveScopeKey(a),place_id:nu.places.getActiveKey(a),localLayer:t.layerName}})),function(t,e){var n=nu.app.getCompleteLocalConfiguration(e());(s=jt()(s)?s:[s]).forEach((function(e){e.scenario_id&&t(Rf(e.scenario_id))})),function(t){return Promise.resolve().then((function(){return{data:at()(t,(function(t){return{uuid:He.uuid(),data:t}}))}}))}(s).then((function(e){!function r(){(function(t,e){return re()(e.apiBackendProtocol+"://"+$t.a.join(e.apiBackendHost,e.apiBackendPath,"backend/rest/pucs/publish"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)}).then((function(t){if(200===t.status)return t.json();throw new Error("wrong status")}))})(e,n).then((function(e){return function(t,e){return Promise.resolve().then((function(){var n=!1;if(t.data.forEach((function(t){"running"===t.status&&(n=!0)})),n)return n;var r=[];t.data.forEach((function(t){"done"===t.status&&t.spatial_relations&&(mt()(t.spatial_relations,(function(t){r.push(t.data.data_source_id)})),e(Pc.loadRelationsReceive(t.spatial_relations)),e(Pf(t.data.scenario_id)))})),e(Oc.loadFiltered({id:r}))}))}(e,t)})).then((function(t){t&&setTimeout((function(){r()}),2e3)})).catch((function(t){console.log("apiExecuteMultipleMatlabProcessAndPublisResults#error",t)}))}()}))}))}else r(Kf("no data returned"));var s}));r(Kf(t))}),(function(i){console.log("#### update scenario case error",i),r(n-1?Lf(t,e,n-1):Kf("scenarios#actions load cases: cases weren't loaded!"))}))}}function Cf(t){return function(e){var n;e((n=t,{type:ou.SCENARIOS_CASES_API_DELETE_REQUEST,error:n}))}}function Af(t){return function(e,n){var r=nu.app.getCompleteLocalConfiguration(n()),i=r.apiBackendProtocol+"://"+$t.a.join(r.apiBackendHost,r.apiBackendPath,"backend/rest/importer/upload"),o=[],a=[];if(t.forEach((function(t){if(t&&t.data&&t.data.file){e(Rf(t.key)),a.push(t.key);var n=new FormData;n.append("file",t.data.file),o.push(re()(i,{method:"POST",credentials:"include",body:n}).then((function(t){return t.json()}),(function(n){e(If(t.key,n))})).then((function(e){return{scenarioKey:t.key,uploadKey:e.data.uploadKey}})).catch((function(n){e(If(t.key,n))})))}})),o.length)return Promise.all(o).then((function(t){var n;e((n=t,function(t,e){var r=nu.app.getCompleteLocalConfiguration(e()),i=r.apiBackendProtocol+"://"+$t.a.join(r.apiBackendHost,r.apiBackendPath,"backend/rest/pucs/execute_matlab"),o=e(),a=[];n.forEach((function(e){a.push(e.scenarioKey);var n=He.uuid(),r=function(){re()(i,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({data:{uploadKey:e.uploadKey,placeId:nu.places.getActiveKey(o),scopeId:nu.scopes.getActiveScopeKey(o)}})}).then((function(r){return r.json().then((function(i){var o;!r.ok||i.hasOwnProperty("success")&&!i.success?(Mf(n),t(Of(a,r.statusText))):i.result&&(Mf(n),t((o=[{scenarioKey:e.scenarioKey,processResults:JSON.parse(i.result)}],function(t,e){var n,r,i,a=nu.app.getCompleteLocalConfiguration(e()),s=a.apiBackendProtocol+"://"+$t.a.join(a.apiBackendHost,a.apiBackendPath,"backend/rest/relations"),u=nu.places.getActive(e()),l=u?u.key:null,c=nu.scopes.getActiveScopeConfiguration(e());if(c.pucsLandUseScenarios&&c.pucsLandUseScenarios.templates){var h=c.pucsLandUseScenarios.templates;n=h.sourceVector,r=h.hwd,i=h.uhi}else console.error("Scenarios actions#apiCreateRelationsForScenarioProcessResults: pucsLandUseScenarios configuration is missing!");var f=[],p=[];if(o.forEach((function(t){if(l&&t.scenarioKey){p.push(t.scenarioKey);var e=t.processResults[0].inputVectors,o=t.processResults[0].outputRasters,a=e[0],s=ct()(o,{indicator:"hwd"}),u=ct()(o,{indicator:"uhi"});a&&s&&u&&(f.push({data:{place_id:Number(l),scenario_id:Number(t.scenarioKey),layer_template_id:n,data_source_id:a.spatialDataSourceId}}),f.push({data:{place_id:Number(l),scenario_id:Number(t.scenarioKey),layer_template_id:r,data_source_id:s.spatialDataSourceId}}),f.push({data:{place_id:Number(l),scenario_id:Number(t.scenarioKey),layer_template_id:i,data_source_id:u.spatialDataSourceId}}))}})),f.length)return re()(s,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({data:{spatial:f}})}).then((function(t){return t.json()})).then((function(e){if(e.data.spatial){var n=zt()(at()(e.data.spatial,(function(t){return t.data.data_source_id})));t(Pc.loadRelationsReceive(e.data.spatial)),t(Oc.loadFiltered({id:n})),t(function(t){return function(e,n){t.forEach((function(t){e(Pf(t))}))}}(p))}else t(Of(p,"Relations were not loaded"))})).catch((function(e){t(Of(p,e))}))})))})).catch((function(e){Mf(n),t(Of(a,e))}))})).catch((function(e){Mf(n),t(Of(a,e))}))};r(),mf[n]=setInterval((function(){r()}),5e3)}))}))})).catch((function(t){e(Of(a,t))}))}}function Mf(t){mf.hasOwnProperty(t)&&clearInterval(mf[t])}function Rf(t){return function(e,n){var r,i=nu.scenarios.scenarios.getByKey(n(),t);if(i){var o=bn({},i,{fileProcessing:{started:!0}});e((r=[o],{type:ou.SCENARIOS_API_PROCESSING_FILE_STARTED,data:r}))}}}function Of(t,e){return function(n,r){t.forEach((function(t){n(If(t,e))}))}}function Pf(t){return function(e,n){var r,i=nu.scenarios.scenarios.getByKey(n(),t);if(i){var o=bn({},i,{fileProcessing:{started:!0,finished:!0}});e((r=[o],{type:ou.SCENARIOS_API_PROCESSING_FILE_SUCCESS,data:r}))}}}function If(t,e){return function(n,r){var i,o=nu.scenarios.scenarios.getByKey(r(),t);if(o){var a=bn({},o,{fileProcessing:{started:!0,finished:!0,error:!0,message:e}});n((i=[a],{type:ou.SCENARIOS_API_PROCESSING_FILE_ERROR,data:i})),console.error("Scenarios/actions#apiProcessingScenarioFileError",e)}}}function Nf(t){return{type:ou.SCENARIOS_SET_ACTIVE_MULTI,keys:t}}function Df(t){return{type:ou.SCENARIOS_CASES_SET_ACTIVE,key:t}}function kf(t){return{type:ou.SCENARIOS_SET_DEFAULT_SITUATION_ACTIVE,active:t}}function Ff(t){return{type:ou.SCENARIOS_REQUEST_ERROR,error:t}}function Vf(t){return{type:ou.SCENARIOS_CASES_REQUEST_ERROR,error:t}}function jf(t){return{type:ou.SCENARIOS_CASES_EDITED_UPDATE,data:t}}function Bf(t){return{type:ou.SCENARIOS_EDITED_UPDATE,data:t}}function Uf(){return{type:ou.SCENARIOS_CASES_EDITED_REMOVE_ACTIVE}}function Gf(t){return{type:ou.SCENARIOS_CASES_API_CREATE_ERROR,error:t}}function Kf(t){return{type:ou.SCENARIOS_CASES_API_UPDATE_ERROR,keys:t}}var Wf={add:Vu.add(ou.SCENARIOS),setActive:function(t){return{type:ou.SCENARIOS_SET_ACTIVE,data:t}},removeEditedActiveCase:Uf,applyDataviewSettings:function(t){return function(e,n){e(Ef(t.cases.activeKey)),e(wf(t.cases.activeKey)),e(Nf(t.scenarios.activeKeys)),e(kf(t.scenarios.defaultSituationActive))}},setDefaultSituationActive:kf,addActiveScenario:function(t){return function(e,n){var r=nu.scenarios.scenarios.getActiveKeys(n());e(Nf(cn()(r,[t])))}},removeActiveScenario:_f,deleteActiveCase:function(){return function(t,e){var n=e(),r=nu.scenarios.cases.getActive(n);r&&t(function t(e,n){an()(n)&&(n=5);return function(r,i){var o;r((o=at()(e,"key"),{type:ou.SCENARIOS_CASES_API_DELETE_REQUEST,keys:o}));var a=nu.app.getCompleteLocalConfiguration(i()),s=a.apiBackendProtocol+"://"+$t.a.join(a.apiBackendHost,a.apiBackendPath,"backend/rest/metadata"),u={data:{scenario_cases:at()(e,(function(t){return{id:t.key}}))}};return re()(s,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(u)}).then((function(t){console.log("#### delete scenario case response",t);var e=t.headers.get("Content-type");if(t.ok&&e&&-1!==e.indexOf("application/json"))return t.json().then((function(t){if(t&&t.data&&t.data.scenario_cases){var e=[];t.data.scenario_cases.map((function(t){t.deleted&&e.push(t.id)})),r(Sf(e))}else r(Cf("no data about scenario cases returned"))}));r(Cf(t))}),(function(i){console.log("#### delete scenario case error",i),r(n-1?t(e,n-1):Cf("scenarios#actions load cases: cases weren't loaded!"))}))}}([r]))}},saveActiveCase:function(){return function(t,e){var n=e(),r=nu.scenarios.cases.getActive(n),i=nu.scenarios.cases.getActiveCaseEdited(n),o=It()(nu.scenarios.scenarios.getEditedAll(n),(function(t){var e=i&&i.data&&i.data.scenarios?i.data.scenarios:r.data.scenarios;return Ut()(e,t.key)})),a=nu.places.getActiveKey(n);t(r?Lf(i?[i]:[],o):function t(e,n,r,i){an()(i)&&(i=5);return function(o,a){var s;o((s=at()(e,"key"),{type:ou.SCENARIOS_CASES_API_CREATE_REQUEST,keys:s}));var u=nu.app.getCompleteLocalConfiguration(a()),l=u.apiBackendProtocol+"://"+$t.a.join(u.apiBackendHost,u.apiBackendPath,"backend/rest/metadata"),c={data:{scenario_cases:at()(e,(function(t){var e=bn({},t.data,{scenario_ids:t.data.scenarios});return delete e.scenarios,{uuid:t.key,data:bn({},e,{place_ids:[r]})}})),scenarios:at()(n,(function(t){var e=bn({},t.data);return delete e.file,{uuid:t.key,data:bn({},e)}}))}};return re()(l,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(c)}).then((function(t){console.log("#### create scenario cases response",t);var e=t.headers.get("Content-type");if(t.ok&&e&&-1!==e.indexOf("application/json"))return t.json().then((function(t){if(t.data){o(function(t){return function(e,n){var r=t.scenario_cases,i=t.scenarios;e(Tf(r)),e(function(t){return function(e,n){e(xf(t));var r=nu.scenarios.cases.getEditedAll(n()),i=[];mt()(r,(function(e){var n,r=at()(e.data.scenarios,(function(e){var r=ct()(t,{uuid:e});return r?(n=!0,r.id):e}));n&&i.push({key:e.key,data:{scenarios:r}})})),i.length&&e(jf(i)),e(yf())}}(i));var o,a=nu.scenarios.cases.getActiveKey(n());if(a){var s=ct()(r,{uuid:a});s&&e(Df(s.id))}e((o=at()(r,"uuid"),{type:ou.SCENARIOS_CASES_EDITED_REMOVE,keys:o}))}}(t.data));var e=[];mt()(t.data.scenarios,(function(t){var r=ct()(n,{key:t.uuid});r&&e.push({key:t.id,data:r.data})})),o(Af(e))}else o(Gf("no data returned"))}));o(Gf(t))}),(function(a){console.log("#### create scenario case error",a),o(i-1?t(e,n,r,i-1):Gf("scenarios#actions create cases: cases weren't created!"))}))}}(i?[i]:[],o,a))}},setActiveCase:Ef,load:wf,loadCases:function t(e){return an()(e)&&(e=5),function(n,r){var i=r(),o=nu.app.getCompleteLocalConfiguration(i);if(i.scenarios.loading);else{n({type:ou.SCENARIOS_CASES_REQUEST});var a=nu.places.getActiveKey(i);if(a){var s=o.apiBackendProtocol+"://"+$t.a.join(o.apiBackendHost,o.apiBackendPath,"backend/rest/metadata/scenario_cases"),u=un.a.stringify({place_id:a});return u&&(s+="?"+u),re()(s,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){console.log("#### load scenarios cases response",t);var e=t.headers.get("Content-type");if(t.ok&&e&&-1!==e.indexOf("application/json"))return t.json().then((function(t){t.data&&t.data.scenario_cases?n(Tf(t.data.scenario_cases)):n(Vf("no data returned"))}));n(Vf(t))}),(function(r){console.log("#### load scenario cases error",r),n(e-1?t(e-1):Vf("scenarios#actions load cases: cases weren't loaded!"))}))}n(Vf("scenarios#actions load cases: no active place"))}}},addEditedScenario:function(t,e){return function(n,r){var i=nu.scenarios.cases.getActiveCaseScenarioKeys(r()),o=nu.scenarios.cases.getActiveCaseEditedScenarioKeys(r()),a=o?[].concat(Cn(o),[t]):i?[].concat(Cn(i),[t]):[t];n(Bf([bn({key:t},e)])),n(vf("scenarios",a))}},removeActiveCaseEditedScenarios:yf,removeScenarioFromActiveCase:function(t){return function(e,n){var r=nu.scenarios.cases.getActive(n());if(r&&r.data&&r.data.scenarios){var i=fn()(r.data.scenarios,t),o=bn({},r,{data:bn({},r.data,{scenarios:i})});e(_f(t)),e(Lf([o],[]))}}},removeScenarioFromActiveCaseEdited:function(t){return function(e,n){var r=nu.scenarios.cases.getActiveCaseEdited(n());r&&r.data&&r.data.scenarios&&e(vf("scenarios",fn()(r.data.scenarios,t)))}},updateEditedActiveCase:vf,updateEditedScenario:function(t,e,n){return function(r,i){var o=i(),a=nu.scenarios.scenarios.getByKey(o,t),s=nu.scenarios.cases.getActiveKey(o),u=nu.scenarios.cases.getActiveCaseScenarioKeys(o),l=nu.scenarios.cases.getActiveCaseEditedScenarioKeys(o),c=[];u&&(c=cn()(c,u)),l&&(c=cn()(c,l)),a&&(n===a.data[e]||!a.data[e]&&0===n.length)?r(function(t,e){return{type:ou.SCENARIOS_EDITED_REMOVE_PROPERTY,scenarioKey:t,property:e}}(t,e)):(r(jf([{key:s,data:{scenarios:c}}])),r(Bf([{key:t,data:En({},e,n)}])))}}},zf=Vu.add(ou.SCOPES),Yf=Vu.create(nu.scopes.getSubstate,"scopes",ou.SCOPES),Hf=Vu.delete(nu.scopes.getSubstate,"scopes",ou.SCOPES),qf=Vu.saveEdited(nu.scopes.getSubstate,"scopes",ou.SCOPES),Xf=Vu.updateEdited(nu.scopes.getSubstate,ou.SCOPES),Zf=Vu.useKeys(nu.scopes.getSubstate,"scopes",ou.SCOPES),Jf=Vu.useKeysClear(ou.SCOPES),Qf=Vu.useIndexedClear(ou.SCOPES),$f=Vu.useIndexed(nu.scopes.getSubstate,"scopes",ou.SCOPES),tp=Vu.refreshUses(nu.scopes.getSubstate,"scopes",ou.SCOPES),ep=Vu.setActiveKeyAndEnsureDependencies(ou.SCOPES,"scope"),np=Vu.ensureIndexesWithFilterByActive(nu.scopes.getSubstate,"scopes",ou.SCOPES);function rp(t){return function(e,n){e(ep(t));var r=nu.scopes.getActive(n());r&&r.data&&r.data.configuration&&r.data.configuration.areaNameAttributeKey&&e(Tl.ensureIndexedSpecific({scopeKey:t,attributeKey:r.data.configuration.areaNameAttributeKey},null,1,10,"scopes.actions#setActiveScope",!0)),r&&r.data&&r.data.configuration&&r.data.configuration.countryCodeAttributeKey&&e(Tl.ensureIndexedSpecific({scopeKey:t,attributeKey:r.data.configuration.countryCodeAttributeKey},null,1,10,"scopes.actions#setActiveScope",!0))}}var ip={add:zf,create:Yf,delete:Hf,ensureIndexesWithFilterByActive:np,refreshUses:tp,saveEdited:qf,setActiveKey:rp,updateEdited:Xf,updateStateFromView:function(t){return function(e){t&&(t&&t.byKey&&e(zf(Ft()(t.byKey))),t&&t.activeKey&&e(rp(t.activeKey)))}},useIndexed:$f,useIndexedClear:Qf,useKeys:Zf,useKeysClear:Jf},op={};function ap(t,e){return function(n,r){"base"!==e&&n(lp(t,e)),n(dp(t,e))}}var sp=function(t,e,n){return{type:ou.SCREENS.ADD,setKey:t,lineage:e,data:n}},up=function(t){return{type:ou.SCREENS.SETS.ADD,setKey:t}},lp=function(t,e){return{type:ou.SCREENS.OPEN,setKey:t,lineage:e}},cp=function(t,e){return{type:ou.SCREENS.CLOSE,setKey:t,lineage:e}},hp=function(t,e){return{type:ou.SCREENS.REMOVE,setKey:t,lineage:e}},fp=function(t){return{type:ou.SCREENS.REMOVE_ALL,setKey:t}},pp=function(t,e){return{type:ou.SCREENS.RETRACT,setKey:t,lineage:e}},dp=function(t,e){return{type:ou.SCREENS.TOP_HISTORY,setKey:t,lineage:e}},gp=function(t,e,n){return{type:ou.SCREENS.UPDATE,setKey:t,lineage:e,data:n}},mp={addOrUpdate:function(t,e,n,r,i,o){return function(a,s){nu.screens.getScreenByLineage(s(),e)?(op[e]&&clearTimeout(op[e]),a(gp(t,e,{width:n,minActiveWidth:r,desiredState:"opening",component:i,props:o}))):a(sp(t,e,{width:n,minActiveWidth:r,desiredState:"opening",component:i,props:o})),setTimeout((function(){a(ap(t,e))}),1)}},addSet:up,close:function(t,e){return function(n,r){n(cp(t,e)),n(dp(t,e)),op[e]=setTimeout((function(){n(hp(t,e))}),550)}},open:ap,removeAllScreensFromSet:function(t){return function(e){e(fp(t))}},retract:function(t,e){return function(n,r){n(pp(t,e)),n(dp(t,e))}},topHistory:function(t,e){return function(n){n(function(t){return function(e,n){nu.screens.getSetByKey(n(),t)||e(up(t))}}(t)),n(dp(t,e))}}},yp=function(t){return function(e){jt()(t)||(t=[t]),e(function(t){return{type:ou.SNAPSHOTS_ADD,data:t}}(t))}};var vp={add:yp,remove:function(t){return function(e){jt()(t)||(t=[t]),e(function(t){return{type:ou.SNAPSHOTS_REMOVE,keys:t}}(t))}},createMapSnapshot:function(){return function(t){window.Stores.generateSnapshot().then((function(e){e.forEach((function(e){t(yp({key:e.uuid,data:{name:e.name,type:"map",source:e.source}}))}))}))}}},Ep=Vu.create(nu.tags.getSubstate,"tags",ou.TAGS),_p=Vu.delete(nu.tags.getSubstate,"tags",ou.TAGS),bp=Vu.saveEdited(nu.tags.getSubstate,"tags",ou.TAGS),Sp=Vu.updateEdited(nu.tags.getSubstate,ou.TAGS),wp=Vu.useKeys(nu.tags.getSubstate,"tags",ou.TAGS),xp=Vu.useKeysClear(ou.TAGS),Tp=Vu.useIndexedClear(ou.TAGS),Lp=Vu.useIndexed(nu.tags.getSubstate,"tags",ou.TAGS),Cp=Vu.refreshUses(nu.tags.getSubstate,"tags",ou.TAGS),Ap={create:Ep,delete:_p,ensureIndexesWithFilterByActive:Vu.ensureIndexesWithFilterByActive(nu.tags.getSubstate,"tags",ou.TAGS),saveEdited:bp,updateEdited:Sp,useKeys:wp,useKeysClear:xp,refreshUses:Cp,useIndexed:Lp,useIndexedClear:Tp},Mp=Vu.add(ou.USERS),Rp=Vu.setActiveKey(ou.USERS),Op=function(){return function(t){t(Vu.refreshUses(nu.users.getSubstate,"users",ou.USERS,"user")()),t(Vu.refreshUses(nu.users.getGroupsSubstate,"groups",ou.USERS.GROUPS,"user")())}},Pp=Vu.useKeys(nu.users.getSubstate,"users",ou.USERS,"user"),Ip=Vu.useKeysClear(ou.USERS),Np=Vu.useIndexed(nu.users.getSubstate,"users",ou.USERS,"user"),Dp=Vu.useIndexed(nu.users.getGroupsSubstate,"groups",ou.USERS.GROUPS,"user");function kp(){return function(t){t({type:ou.COMMON.DATA.CLEANUP_ON_LOGOUT}),t(Rp(null)),t(ip.refreshUses()),t(gf.refreshUses()),t(ef.refreshUses()),t(Op())}}function Fp(){return function(t,e){var n=nu.app.getCompleteLocalConfiguration(e());return t({type:ou.USERS.CURRENT.REQUEST}),iu(n,"backend/rest/user/current","GET",null,null).then((function(e){if(e.errors)throw new Error(e.errors);var n;0===e.key?t(jp(Vp(e.groups))):e.key&&(t(Rp(e.key)),t(Mp(bn({},n=e,{permissions:bn({},n.permissions,{guest:{get:!1}}),groups:at()(n.groups,"key")}))),t(jp(Vp(e.groups))))})).catch((function(e){return t(Vu.actionGeneralError(e)),e}))}}function Vp(t){return t.map((function(t){return bn({},t,{permissions:{guest:{get:!1}}})}))}function jp(t){return{type:ou.USERS.GROUPS.ADD,data:t}}function Bp(t){return{type:ou.USERS_LOGOUT_REQUEST_ERROR,error:t}}var Up={add:Mp,apiLoadCurrentUser:Fp,apiLoginUser:function(t,e){return function(n,r){var i=nu.app.getCompleteLocalConfiguration(r());return n({type:ou.USERS.LOGIN.REQUEST}),iu(i,"backend/api/login/login","POST",null,{username:t,password:e}).then((function(t){"ok"===t.data.status&&n((function(t){t(Vu.actionDataSetOutdated()),t(Fp()),t(ip.refreshUses()),t(gf.refreshUses()),t(ef.refreshUses()),t(Op())}))})).catch((function(t){return n(Vu.actionGeneralError(t)),t}))}},apiLogoutUser:function t(e){return an()(e)&&(e=5),function(n,r){var i=nu.app.getLocalConfiguration(r(),"apiBackendProtocol"),o=nu.app.getLocalConfiguration(r(),"apiBackendHost");n({type:ou.USERS_LOGOUT_REQUEST});var a=i+"://"+$t.a.join(o,"backend/api/login/logout");return re()(a,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){console.log("#### logout user response",t),t.ok?n(kp()):n(Bp("user#action logout Problem with logging out the User, please try later."))}),(function(r){console.log("#### logout user error",r),n(e-1?t(e-1):Bp("user#action logout Problem with logging out the User, please try later."))}))}},refreshUses:Op,useKeys:Pp,useKeysClear:Ip,useIndexedUsers:Np,useIndexedGroups:Dp,useIndexedUsersClear:function(t){return{type:ou.USERS.USE.INDEXED.CLEAR,componentId:t}},useIndexedGroupsClear:function(t){return{type:ou.USERS.GROUPS.USE.INDEXED.CLEAR,componentId:t}}},Gp=Vu.add(ou.VIEWS),Kp=Vu.setActiveKey(ou.VIEWS),Wp=Vu.setActiveKeys(ou.VIEWS),zp=Vu.create(nu.views.getSubstate,"views",ou.VIEWS,"views"),Yp=Vu.delete(nu.views.getSubstate,"views",ou.VIEWS,"views"),Hp=Vu.saveEdited(nu.views.getSubstate,"views",ou.VIEWS,"views"),qp=Vu.updateEdited(nu.views.getSubstate,ou.VIEWS,"views"),Xp=Vu.useKeys(nu.views.getSubstate,"views",ou.VIEWS,"views"),Zp=Vu.useKeysClear(ou.VIEWS),Jp=Vu.useIndexedClear(ou.VIEWS),Qp=Vu.useIndexed(nu.views.getSubstate,"views",ou.VIEWS,"views"),$p=Vu.refreshUses(nu.views.getSubstate,"views",ou.VIEWS,"views"),td=Vu.ensureIndexesWithFilterByActive(nu.views.getSubstate,"views",ou.VIEWS,"views");var ed=function(t,e,n,r,i,o){return{type:ou.WINDOWS.ADD,setKey:t,windowKey:e,state:n,settings:r,component:i,props:o}},nd=function(t,e){return{type:ou.WINDOWS.OPEN,setKey:t,windowKey:e}},rd=function(t,e){return{type:ou.WINDOWS.UPDATE,windowKey:t,data:e}},id={_deprecatedSelections:Gu,app:Wu,areas:tl,areaRelations:el,attributes:gl,attributeData:El,attributeDataSources:wl,attributeRelations:Tl,attributeStatistics:Sl,attributeSets:Ll,cases:Bl,charts:Kl,components:zl,layerPeriods:Ql,layerTemplates:uc,layerTrees:yc,maps:Uh,periods:ef,places:gf,scenarios:Wf,scopes:ip,screens:mp,selections:bc,snapshots:vp,spatialData:Ic,spatialDataSources:Oc,spatialRelations:Pc,styles:Vc,tags:Ap,users:Up,views:{add:Gp,apply:function(t,e){return function(n,r){return n(Vu.ensureKeys(nu.views.getSubstate,"views",ou.VIEWS,[t],"views")).then((function(){var i=nu.views.getDataByKey(r(),t);if(i&&i.state){var o=[];mt()(e,(function(t,e){t.hasOwnProperty("updateStateFromView")&&i.state[e]&&o.push(t.updateStateFromView(i.state[e]))})),e.specific&&mt()(e.specific,(function(t,e){t.hasOwnProperty("updateStateFromView")&&i.state[e]&&o.push(t.updateStateFromView(i.state[e]))})),n(o)}else n(Vu.actionGeneralError("Views#apply: View or state of view doesn't exist! View key: "+t))})).catch((function(t){n(Vu.actionGeneralError("Views#apply: "+t))}))}},setActiveKey:Kp,setActiveKeys:Wp,create:zp,delete:Yp,ensureIndexesWithFilterByActive:td,saveEdited:Hp,updateEdited:qp,useKeys:Xp,useKeysClear:Zp,refreshUses:$p,useIndexed:Qp,useIndexedClear:Jp},windows:{addOrOpen:function(t,e,n,r,i){return function(o,a){o(nu.windows.getWindow(a(),e)?nd(t,e):ed(t,e,"open",n,r,i))}},remove:function(t,e){return{type:ou.WINDOWS.REMOVE,setKey:t,windowKey:e}},topWindow:function(t,e){return{type:ou.WINDOWS.TOP,setKey:t,windowKey:e}},updateSettings:function(t,e){return function(n,r){var i=nu.windows.getWindow(r(),t),o=bn({},i.data,{settings:bn({},i.data.settings,{},e)});n(rd(t,o))}}}},od={AppContainer:Z((function(t,e){return{activeUser:nu.users.getActive(t),loginOverlayOpen:nu.components.get(t,"App_Container","loginOverlayOpen")}}),(function(t){return{onLogIn:function(e,n){t(id.users.apiLoginUser(e,n))},onLoginOverlayClose:function(){t(id.components.set("App_Container","loginOverlayOpen",!1))}}})),ChartSet:Z((function(t,e){return{set:nu.charts.getSetByKey(t,e.setKey),charts:nu.charts.getChartsBySetKeyAsObject(t,e.setKey)}}),(function(t,e){return{}})),GoToPlace:Z((function(t){return{}}),(function(t){return{goToPlace:function(e){t(id.maps.goToPlace(e))}}})),Map:Z((function(t,e){return e.stateMapKey?{backgroundLayer:nu.maps.getMapBackgroundLayer(t,e.stateMapKey),layers:nu.maps.getMapLayers(t,e.stateMapKey),view:nu.maps.getView(t,e.stateMapKey),viewLimits:nu.maps.getViewLimits(t,e.stateMapKey),mapKey:e.stateMapKey}:{backgroundLayer:nu.maps.getBackgroundLayer(t,e.backgroundLayer),layers:nu.maps.getLayers(t,e.layers)}}),(function(){var t="Map_"+He.randomString(6);return function(e,n){if(n.stateMapKey)return{onMount:function(){e(id.maps.use(n.stateMapKey))},onUnmount:function(){e(id.maps.useClear(n.stateMapKey))},refreshUse:function(){e(id.maps.use(n.stateMapKey))},onViewChange:function(t){e(id.maps.updateMapAndSetView(n.stateMapKey,t))},resetHeading:function(){e(id.maps.resetViewHeading(n.stateMapKey))},onClick:function(t){e(id.maps.setMapSetActiveMapKey(n.stateMapKey))},onLayerClick:function(t,r,i){e(id.maps.setLayerSelectedFeatureKeys(n.stateMapKey,r,i))}};var r=n.mapKey||t;return{onMount:function(){e(id.maps.use(r,n.backgroundLayer,n.layers))},onUnmount:function(){e(id.maps.useClear(r))},refreshUse:function(){e(id.maps.use(r,n.backgroundLayer,n.layers))},onViewChange:n.onViewChange||function(t){},onClick:n.onClick||function(t){}}}})),MapControls:Z((function(t,e){var n=nu.maps.getActiveMapKey(t);return{view:nu.maps.getView(t,n),mapKey:n}}),(function(t){return{updateView:function(e,n){t(id.maps.updateMapAndSetView(n,e))},resetHeading:function(e){t(id.maps.resetViewHeading(e))}}})),MapSet:Z((function(t,e){return e.stateMapSetKey?{activeMapKey:nu.maps.getMapSetActiveMapKey(t,e.stateMapSetKey),activeMapView:nu.maps.getMapSetActiveMapView(t,e.stateMapSetKey),maps:nu.maps.getMapSetMapKeys(t,e.stateMapSetKey),view:nu.maps.getMapSetView(t,e.stateMapSetKey),viewLimits:nu.maps.getMapSetViewLimits(t,e.stateMapSetKey)}:{backgroundLayer:nu.maps.getBackgroundLayer(t,e.backgroundLayer),layers:nu.maps.getLayers(t,e.layers)}}),(function(){var t="MapSet_"+He.randomString(6);return function(e,n){if(n.stateMapSetKey)return{updateView:function(t){e(id.maps.updateSetView(n.stateMapSetKey,t))},resetHeading:function(t){e(id.maps.resetViewHeading(t))},onMapRemove:function(t){e(id.maps.removeMap(t))}};var r=n.setKey||t;return{onMount:function(){e(id.maps.use(r,n.backgroundLayer,n.layers))},onUnmount:function(){e(id.maps.useClear(r))},refreshUse:function(){e(id.maps.use(r,n.backgroundLayer,n.layers))}}}})),Screens:Z((function(t,e){return{screens:nu.screens.getScreensBySetKey(t,e.setKey),set:nu.screens.getSetByKey(t,e.setKey)}}),(function(t,e){return{onFocusScreen:function(n){t(id.screens.topHistory(e.setKey,n))},onCloseScreen:function(n){t(id.screens.close(e.setKey,n))},onOpenScreen:function(n){t(id.screens.open(e.setKey,n))},onRetractScreen:function(n){t(id.screens.retract(e.setKey,n))}}})),User:Z((function(t,e){return{user:nu.users.getActiveUser(t)}}),(function(t){return{login:function(){t(id.components.set("App_Container","loginOverlayOpen",!0))},logout:function(){t(id.users.apiLogoutUser())}}})),WindowsContainer:Z((function(t,e){return{set:nu.windows.getSetByKey(t,e.setKey),windows:nu.windows.getWindowsBySetKeyAsObject(t,e.setKey)}}),(function(t,e){return{onWindowClick:function(n){t(id.windows.topWindow(e.setKey,n))},onWindowClose:function(n){t(id.windows.remove(e.setKey,n))},onWindowDragStart:function(n){t(id.windows.topWindow(e.setKey,n))},onWindowDragStop:function(e,n){t(id.windows.updateSettings(e,{position:n}))},onWindowResize:function(e,n,r,i){t(id.windows.updateSettings(e,{width:n,height:r,position:i}))}}}))},ad={activeKey:null,byKey:null,count:null,editedByKey:null,indexes:null,inUse:{indexes:null,keys:null},lastChangedOn:null,loading:!1,loadingKeys:null},sd={add:function(t,e){var n=bn({},t.byKey);return e.data&&e.data.length&&e.data.forEach((function(t){n[t.key]=bn({},n[t.key],{},t),delete n[t.key].outdated,delete n[t.key].unreceived})),bn({},t,{byKey:n})},addBatch:function(t,e){var n=bn({},t.byKey);return e.data&&e.data.length&&e.data.forEach((function(t){n[t[e.key]]=bn({},n[t[e.key]],{},t),delete n[t[e.key]].outdated,delete n[t[e.key]].unreceived})),bn({},t,{byKey:n})},addUnreceivedKeys:function(t,e){var n=bn({},t.byKey);return e.keys&&e.keys.length&&e.keys.forEach((function(t){n[t]={key:t,unreceived:!0}})),bn({},t,{byKey:n})},addIndex:function(t,e){var n,r=[],i={};return t.indexes&&t.indexes.forEach((function(t){ut()(t.filter,e.filter)&&ut()(t.order,e.order)?i=t:r.push(t)})),e.data.length&&(n=bn({},i.index),e.data.forEach((function(t,r){n[e.start+r]=t.key}))),i={filter:i.filter||e.filter,order:i.order||e.order,count:e.count,changedOn:e.changedOn,index:n||i.index},r.push(i),bn({},t,{indexes:r})},addBatchIndex:function(t,e){var n,r=[],i={};return t.indexes&&t.indexes.forEach((function(t){ut()(t.filter,e.filter)&&ut()(t.order,e.order)?i=t:r.push(t)})),e.data.length&&(n=bn({},i.index),e.data.forEach((function(t,r){n[r]=t[e.key]}))),i={filter:i.filter||e.filter,order:i.order||e.order,index:n||i.index},r.push(i),bn({},t,{indexes:r})},registerUseIndexed:function(t,e){var n={filterByActive:e.filterByActive,filter:e.filter,order:e.order,start:e.start,length:e.length},r=!1;return t.inUse.indexes&&t.inUse.indexes[e.componentId]&&(r=ct()(t.inUse.indexes[e.componentId],n)),r?t:bn({},t,{inUse:bn({},t.inUse,{indexes:bn({},t.inUse.indexes,En({},e.componentId,t.inUse.indexes&&t.inUse.indexes[e.componentId]?[].concat(Cn(t.inUse.indexes[e.componentId]),[n]):[n]))})})},registerBatchUseIndexed:function(t,e){var n={filterByActive:e.filterByActive,filter:e.filter,order:e.order},r=!1;return t.inUse.indexes&&t.inUse.indexes[e.componentId]&&(r=ct()(t.inUse.indexes[e.componentId],n)),r?t:bn({},t,{inUse:bn({},t.inUse,{indexes:bn({},t.inUse.indexes,En({},e.componentId,t.inUse.indexes&&t.inUse.indexes[e.componentId]?[].concat(Cn(t.inUse.indexes[e.componentId]),[n]):[n]))})})},useIndexedClear:function(t,e){if(t.inUse&&t.inUse.indexes&&t.inUse.indexes.hasOwnProperty(e.componentId)){var n=bn({},t.inUse.indexes);return delete n[e.componentId],bn({},t,{inUse:bn({},t.inUse,{indexes:_t()(n)?null:n})})}return t},useIndexedClearAll:function(t,e){return t.inUse&&t.inUse.indexes?bn({},t,{inUse:bn({},t.inUse,{indexes:null})}):t},useKeysRegister:function(t,e){return bn({},t,{inUse:bn({},t.inUse,{keys:bn({},t.inUse.keys,En({},e.componentId,t.inUse.keys&&t.inUse.keys[e.componentId]?cn()(t.inUse.keys[e.componentId],e.keys):e.keys))})})},useKeysClear:function(t,e){var n=bn({},t.inUse.keys);return delete n[e.componentId],bn({},t,{inUse:bn({},t.inUse,{keys:_t()(n)?null:n})})},markDeleted:function(t,e){if(t.byKey&&t.byKey[e.key]){var n=bn({},t.byKey);return n[e.key].removed=!0,bn({},t,{byKey:n})}return t},remove:function(t,e){return bn({},t,{byKey:t.byKey?Kt()(t.byKey,e.keys):null})},removeEdited:function(t,e){return bn({},t,{editedByKey:t.editedByKey?Kt()(t.editedByKey,e.keys):null})},removeEditedActive:function(t){return bn({},t,{editedByKey:t.editedByKey?Kt()(t.editedByKey,t.activeKey):null})},removeEditedProperty:function(t,e){var n=t.editedByKey&&t.editedByKey[e.key]&&t.editedByKey[e.key].data?Kt()(t.editedByKey[e.key].data,e.property):null;if(n&&!_t()(n))return bn({},t,{editedByKey:bn({},t.editedByKey,En({},e.key,bn({},t.editedByKey[e.key],{data:n})))});if(n&&_t()(n)){var r=bn({},t.editedByKey);return delete r[e.key],bn({},t,{editedByKey:r})}return t},removeEditedPropertyValues:function(t,e){var n=e.dataType.slice(0,-1),r=n+"Key",i=n+"Keys",o=bn({},t.editedByKey);if(_t()(o))return t;var a={},s=!1;return Dt()(o,(function(t,n){if(t.data&&t.data[r])Ut()(e.keys,t.data[r])?(a[n]=bn({},t,{data:bn({},t.data,En({},r,null))}),s=!0):a[n]=t;else if(t.data&&t.data[i]){var o=dn()(t.data[i],e.keys);o.length!==t.data[i]?(a[n]=bn({},t,{data:bn({},t.data,En({},i,o))}),s=!0):a[n]=t}else a[n]=t})),s?bn({},t,{editedByKey:a}):t},setActive:function(t,e){return bn({},t,{activeKey:e.key,activeKeys:null})},setActiveMultiple:function(t,e){return bn({},t,{activeKeys:e.keys,activeKey:null})},updateEdited:function(t,e){var n=bn({},t.editedByKey);return e.data&&e.data.length&&e.data.forEach((function(t){n[t.key]?n[t.key]=bn({},n[t.key],{data:bn({},n[t.key].data,{},t.data)}):n[t.key]=t})),bn({},t,{editedByKey:n})},clearIndexes:function(t,e){var n=at()(t.indexes,(function(t){return bn({},t,{index:null,count:null,changedOn:null,outdated:t.index,outdatedCount:t.count})}));return bn({},t,{indexes:n.length?n:null})},clearIndex:function(t,e){var n=t.indexes.map((function(t){return Rn.isCorrespondingIndex(t,e.filter,e.order)&&(t.outdated=t.index,t.outdatedCount=t.count,t.index=null,t.count=null,t.changedOn=null),t}));return bn({},t,{indexes:Cn(n)})},dataSetOutdated:function(t,e){if(t.byKey){var n={};return mt()(t.byKey,(function(t,e){n[e]=bn({},t,{outdated:!0})})),bn({},t,{byKey:n})}return t},cleanupOnLogout:function(t,e){if(t.byKey){var n={};return mt()(t.byKey,(function(t,e){t.permissions&&t.permissions.guest.get&&(n[e]=bn({},t,{permissions:{guest:t.permissions.guest}}))})),bn({},t,{byKey:n})}return t}},ud={key:null},ld=function(t,e){return bn({},t,{key:e.key})},cd=function(t,e){return bn({},t,{baseUrl:e.url})},hd=function(t,e){var n=e.path.split(".");return bn({},t,{localConfiguration:pd(t.localConfiguration,n,e.value)})},fd=function(t,e){return bn({},t,{localConfiguration:t.localConfiguration?bn({},t.localConfiguration,{},e.update):e.update})};function pd(t,e,n){var r=Cn(e),i=r.shift();return r.length?bn({},t,En({},i,pd(t[i],r,n))):bn({},t,En({},i,n))}var dd=function(t,e){return bn({},t,{configuration:e.configuration})},gd=bn({},ad),md=bn({},ad),yd=l({areaTreeLevels:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gd,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.AREAS.AREA_TREE_LEVELS.ADD:return sd.add(t,e);case ou.AREAS.AREA_TREE_LEVELS.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.AREAS.AREA_TREE_LEVELS.INDEX.ADD:return sd.addIndex(t,e);case ou.AREAS.AREA_TREE_LEVELS.SET_ACTIVE_KEY:return sd.setActive(t,e);case ou.AREAS.AREA_TREE_LEVELS.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.AREAS.AREA_TREE_LEVELS.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.AREAS.AREA_TREE_LEVELS.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.AREAS.AREA_TREE_LEVELS.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.AREAS.AREA_TREE_LEVELS.INDEX.CLEAR_ALL:return sd.clearIndexes(t,e);case ou.COMMON.DATA.SET_OUTDATED:return sd.dataSetOutdated(t,e);case ou.COMMON.DATA.CLEANUP_ON_LOGOUT:return sd.cleanupOnLogout(t,e);default:return t}},areaTrees:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:md,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.AREAS.AREA_TREES.ADD:return sd.add(t,e);case ou.AREAS.AREA_TREES.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.AREAS.AREA_TREES.INDEX.ADD:return sd.addIndex(t,e);case ou.AREAS.AREA_TREES.SET_ACTIVE_KEY:return sd.setActive(t,e);case ou.AREAS.AREA_TREES.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.AREAS.AREA_TREES.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.AREAS.AREA_TREES.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.AREAS.AREA_TREES.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.AREAS.AREA_TREES.INDEX.CLEAR_ALL:return sd.clearIndexes(t,e);case ou.COMMON.DATA.SET_OUTDATED:return sd.dataSetOutdated(t,e);case ou.COMMON.DATA.CLEANUP_ON_LOGOUT:return sd.cleanupOnLogout(t,e);default:return t}}}),vd=bn({},ad),Ed=bn({},ad),_d=function(t,e){return e&&e.data&&e.data.length&&e.data.forEach((function(t){t.data.color||(t.data.color="#008000")})),sd.add(t,e)},bd=bn({},ad),Sd=function(t,e){var n=bn({},t.byKey);return e.data&&e.data.length&&e.data.forEach((function(t){var r=n[t.attributeDataSourceKey];if(r){var i=e.filter.fidColumnName,o=r.attributeData.features,a=t.attributeData.features,s={};Ot()(o,(function(t){s[t.properties[i]]=t})),Ot()(a,(function(t){var e=t.properties[i];s[e]=t})),n[t.attributeDataSourceKey]=bn({},n[t.attributeDataSourceKey],{attributeData:bn({},n[t.attributeDataSourceKey].attributeData,{features:Object.values(s)})})}else n[t.attributeDataSourceKey]=t})),bn({},t,{byKey:n})},wd=bn({},ad),xd=bn({},ad),Td=bn({},ad,{activeKeys:null}),Ld=bn({},ad),Cd={};function Ad(t,e){return bn({},t,En({},e.component,t[e.component]?bn({},t[e.component],{},e.update):e.update))}function Md(t,e){var n=e.path.split(".");return bn({},t,En({},e.component,function t(e,n,r){var i=Cn(n),o=i.shift();return i.length?bn({},e,En({},o,t(e[o],i,r))):bn({},e,En({},o,r))}(t[e.component],n,e.value)))}var Rd={charts:{},sets:{}};function Od(){return bn({},Rd)}function Pd(t,e){return bn({},t,{},e.data)}var Id={byAoiKey:{},byPlaceKey:{},byKey:{}};function Nd(t,e){var n=bn({},Wd(t,e.aoiKey,e.layerKey),{data:e.periods,loading:!0}),r=bn({},Kd(t,e.aoiKey),En({},e.layerKey,n)),i=bn({},t.byAoiKey[e.aoiKey],{byLayerKey:r}),o=bn({},t.byAoiKey,En({},e.aoiKey,i));return bn({},t,{byAoiKey:o})}function Dd(t,e){var n=bn({},Wd(t,e.aoiKey,e.layerKey),{loading:!1}),r=bn({},Kd(t,e.aoiKey),En({},e.layerKey,n)),i=bn({},t.byAoiKey[e.aoiKey],{byLayerKey:r}),o=bn({},t.byAoiKey,En({},e.aoiKey,i));return bn({},t,{byAoiKey:o})}function kd(t,e){var n=bn({},Wd(t,e.aoiKey,e.layerKey),{data:e.periods,loading:!1}),r=bn({},Kd(t,e.aoiKey),En({},e.layerKey,n)),i=bn({},t.byAoiKey[e.aoiKey],{byLayerKey:r}),o=bn({},t.byAoiKey,En({},e.aoiKey,i));return bn({},t,{byAoiKey:o})}function Fd(t,e){var n=bn({},Yd(t,e.placeKey,e.layerKey),{data:e.periods,loading:!0}),r=bn({},zd(t,e.placeKey),En({},e.layerKey,n)),i=bn({},t.byPlaceKey[e.placeKey],{byLayerKey:r}),o=bn({},t.byPlaceKey,En({},e.placeKey,i));return bn({},t,{byPlaceKey:o})}function Vd(t,e){var n=bn({},Yd(t,e.placeKey,e.layerKey),{loading:!1}),r=bn({},zd(t,e.placeKey),En({},e.layerKey,n)),i=bn({},t.byPlaceKey[e.placeKey],{byLayerKey:r}),o=bn({},t.byPlaceKey,En({},e.placeKey,i));return bn({},t,{byPlaceKey:o})}function jd(t,e){var n=bn({},Yd(t,e.placeKey,e.layerKey),{data:e.periods,loading:!1}),r=bn({},zd(t,e.placeKey),En({},e.layerKey,n)),i=bn({},t.byPlaceKey[e.placeKey],{byLayerKey:r}),o=bn({},t.byPlaceKey,En({},e.placeKey,i));return bn({},t,{byPlaceKey:o})}function Bd(t,e){var n=bn({},qd(t,e.key,e.layerKey),{data:e.periods,loading:!0}),r=bn({},Hd(t,e.key),En({},e.layerKey,n)),i=bn({},t.byKey[e.key],{byLayerKey:r}),o=bn({},t.byKey,En({},e.key,i));return bn({},t,{byKey:o})}function Ud(t,e){var n=bn({},qd(t,e.key,e.layerKey),{loading:!1}),r=bn({},Hd(t,e.key),En({},e.layerKey,n)),i=bn({},t.byKey[e.key],{byLayerKey:r}),o=bn({},t.byKey,En({},e.key,i));return bn({},t,{byKey:o})}function Gd(t,e){var n=bn({},qd(t,e.key,e.layerKey),{data:e.periods,loading:!1}),r=bn({},Hd(t,e.key),En({},e.layerKey,n)),i=bn({},t.byKey[e.key],{byLayerKey:r}),o=bn({},t.byKey,En({},e.key,i));return bn({},t,{byKey:o})}function Kd(t,e){return t&&t.byAoiKey&&t.byAoiKey[e]&&t.byAoiKey[e].byLayerKey}function Wd(t,e,n){return Kd(t,e)&&t.byAoiKey[e].byLayerKey[n]}function zd(t,e){return t&&t.byPlaceKey&&t.byPlaceKey[e]&&t.byPlaceKey[e].byLayerKey}function Yd(t,e,n){return zd(t,e)&&t.byPlaceKey[e].byLayerKey[n]}function Hd(t,e){return t&&t.byKey&&t.byKey[e]&&t.byKey[e].byLayerKey}function qd(t,e,n){return Hd(t,e)&&t.byKey[e].byLayerKey[n]}var Xd=bn({},ad),Zd=bn({},ad),Jd={center:{lat:50.1,lon:14.5},boxRange:1e5,roll:0,tilt:0,heading:0,elevationExaggeration:0},Qd={key:null,layerTemplate:null,style:null,opacity:100},$d={key:null,name:null,data:{backgroundLayer:null,layers:null,metadataModifiers:null,worldWindNavigator:null,view:null,filterByActive:null}},tg={key:null,maps:[],sync:{location:!1,center:!1,roll:!1,range:!1,tilt:!1,heading:!1,elevation:!1},data:{backgroundLayer:null,layers:null,metadataModifiers:null,worldWindNavigator:null,view:null,filterByActive:null}},eg={activeSetKey:null,activeMapKey:null,maps:{},sets:{}},ng=function(t,e){return t.sets[e]},rg=function(t,e){return t.maps[e]},ig=function(){return bn({},eg)},og=function(t,e){return bn({},t,{activeMapKey:e})},ag=function(t,e,n){var r=ng(t,e);return bn({},t,{sets:bn({},t.sets,En({},e,bn({},r,{activeMapKey:n})))})},sg=function(t,e){return bn({},t,{activeSetKey:e})},ug=function(t,e){var n=mn()(Xe()(tg),e),r=bn({},t.sets);return r[n.key]=n,bn({},t,{sets:bn({},r)})},lg=function(t,e){return bn({},t,{sets:ze.removeItemByKey(t.sets,e)})},cg=function(t,e,n){var r=ng(t,e);return bn({},t,{sets:bn({},t.sets,En({},e,bn({},r,{sync:bn({},r.sync,{},n)})))})},hg=function(t,e,n){var r=ng(t,e);return bn({},t,{sets:bn({},t.sets,En({},e,bn({},r,{maps:n})))})},fg=function(t,e,n){var r=ng(t,e);return bn({},t,{sets:bn({},t.sets,En({},e,bn({},r,{maps:[].concat(Cn(r.maps),[n])})))})},pg=function(t,e,n){var r=ng(t,e),i=r.maps.indexOf(n);return bn({},t,{sets:bn({},t.sets,En({},e,bn({},r,{maps:ze.removeItemByIndex(r.maps,i)})))})},dg=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jd,r=bn({},Jd,{},n),i=ng(t,e);return bn({},t,{sets:bn({},t.sets,En({},e,bn({},i,{data:bn({},i.data,{view:r})})))})},gg=function(t,e,n){return n&&!_t()(n)?bn({},t,{sets:bn({},t.sets,En({},e,bn({},t.sets[e],{data:bn({},t.sets[e].data,{view:t.sets[e].data.view?bn({},t.sets[e].data.view,{},n):n})})))}):t},mg=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$d,n=mn()(Xe()($d),e);return bn({},t,{maps:bn({},t.maps,En({},n.key,n))})},yg=function(t,e){for(var n=bn({},t,{maps:ze.removeItemByKey(t.maps,e)}),r=0,i=Object.entries(t.sets);r<i.length;r++){var o=Ln(i[r],2),a=(o[0],o[1]);a.maps.includes(e)&&(n=bn({},pg(n,a.key,e)))}return n},vg=function(t,e,n){return bn({},t,{maps:En({},e,bn({},rg(t,e),{name:n}))})},Eg=function(t,e,n,r){var i=rg(t,e),o=i.data.layers.findIndex((function(t){return t.key===n})),a=ct()(i.data.layers,(function(t){return t.key===n}));if(a){var s=bn({},a,{options:bn({},a.options,{hovered:a.options.hovered?bn({},a.options.hovered,{keys:r}):{keys:r}})}),u=ze.replaceItemOnIndex(i.data.layers,o,s);return wg(t,bn({},i,{data:bn({},i.data,{layers:u})}))}return t},_g=function(t,e,n,r){var i,o=rg(t,e),a=ct()(null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.layers,(function(t){return t.key===n}));if(a){var s=o.data.layers.map((function(t){return t.key===n?bn({},a,{options:bn({},a.options,{selected:a.options.selected?bn({},a.options.selected,En({},r,{})):En({},r,{})})}):t}));return bn({},t,{maps:bn({},t.maps,En({},e,bn({},t.maps[e],{data:bn({},t.maps[e].data,{layers:s})})))})}return t},bg=function(t,e,n,r){var i,o=rg(t,e),a=ct()(null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.layers,(function(t){return t.key===n}));if(a){var s=o.data.layers.map((function(t){return t.key===n?bn({},a,{options:bn({},a.options,{style:r})}):t}));return bn({},t,{maps:bn({},t.maps,En({},e,bn({},t.maps[e],{data:bn({},t.maps[e].data,{layers:s})})))})}return t},Sg=function(t,e,n){var r=rg(t,e),i=at()(Cn(r.data.layers),(function(t){var e,r;return(null===(e=t.options)||void 0===e||null===(r=e.selected)||void 0===r?void 0:r[n])&&delete t.options.selected[n],t}));return wg(t,bn({},r,{data:bn({},r.data,{layers:i})}))},wg=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$d,n=mn()(Xe()($d),e);return bn({},t,{maps:bn({},t.maps,En({},n.key,bn({},n)))})},xg=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return bn({},t,{maps:bn({},t.maps,En({},e,bn({},t.maps[e],{data:n})))})},Tg=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jd,r=bn({},Jd,{},n);return bn({},t,{maps:bn({},t.maps,En({},e,bn({},t.maps[e],{data:bn({},t.maps[e].data,{view:r})})))})},Lg=function(t,e,n){var r=bn({},t.maps[e].data.view,{},n);return bn({},t,{maps:bn({},t.maps,En({},e,bn({},t.maps[e],{data:bn({},t.maps[e].data,{view:r})})))})},Cg=function(t,e,n,r){var i,o,a,s,u=null===(i=t.maps)||void 0===i||null===(o=i[e])||void 0===o||null===(a=o.data)||void 0===a?void 0:a.layers;return u&&(r>=-1?(s=u.slice()).splice(r,0,n):s=[].concat(Cn(u),[n])),bn({},t,{maps:bn({},t.maps,En({},e,bn({},t.maps[e],{data:bn({},t.maps[e].data,{layers:u?s:[n]})})))})},Ag=function(t,e,n){var r,i,o=rg(t,e),a=null===o||void 0===o||null===(r=o.data)||void 0===r||null===(i=r.layers)||void 0===i?void 0:i.findIndex((function(t){return t.key===n}));if(a>=0){var s=o.data.layers.filter((function(t,e){return e!==a}));return bn({},t,{maps:bn({},t.maps,En({},e,bn({},t.maps[e],{data:bn({},t.maps[e].data,{layers:s})})))})}return t},Mg=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=bn({},t),i=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=Ag(r,e,l);r=bn({},r,{maps:bn({},r.maps,En({},e,bn({},r.maps[e],{data:bn({},r.maps[e].data,{layers:Cn(c.maps[e].data.layers)})})))})}}catch(h){o=!0,a=h}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r},Rg=function(t,e,n,r){var i=rg(t,e),o=i.data.layers.findIndex((function(t){return t.key===n})),a=bn({},i.data.layers[o]),s=ze.removeItemByIndex(i.data.layers,o),u=ze.addItemToIndex(s,r,a);return wg(t,bn({},i,{data:bn({},i.data,{layers:u})}))},Og=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qd,r=arguments.length>3?arguments[3]:void 0,i=mn()(Xe()(Qd),n),o=ze.removeItemByKey(i,"key");o.key=r;var a=rg(t,e),s=a.data.layers.findIndex((function(t){return t.key===r}));if(s>-1){var u=ze.replaceItemOnIndex(a.data.layers,s,o);return wg(t,bn({},a,{data:bn({},a.data,{layers:u})}))}return t},Pg=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qd,r=arguments.length>3?arguments[3]:void 0,i=rg(t,e),o=i.data.layers.findIndex((function(t){return t.key===r}));if(o>-1){n.key=r;var a=mn()(Xe()(bn({},i.data.layers[o])),n),s=ze.replaceItemOnIndex(i.data.layers,o,a);return wg(t,bn({},i,{data:bn({},i.data,{layers:s})}))}return t},Ig=function(t,e,n){var r=rg(t,e);return wg(t,bn({},r,{scope:n}))},Ng=function(t,e,n){var r=rg(t,e);return wg(t,bn({},r,{place:n}))},Dg=function(t,e,n){var r=rg(t,e);return wg(t,bn({},r,{scenario:n}))},kg=function(t,e,n){var r=rg(t,e);return wg(t,bn({},r,{case:n}))},Fg=function(t,e,n){var r=rg(t,e);return wg(t,bn({},r,{period:n}))},Vg=function(t,e,n){var r=rg(t,e);return wg(t,bn({},r,{data:bn({},r.data,{backgroundLayer:n})}))},jg=function(t,e,n){var r=rg(t,e);return bn({},t,{maps:bn({},t.maps,En({},e,bn({},r,{data:bn({},r.data,{layers:n})})))})},Bg=function(t,e,n){return bn({},t,{sets:bn({},t.sets,En({},e,bn({},t.sets[e],{data:bn({},t.sets[e].data,{backgroundLayer:n})})))})},Ug=function(t,e,n){return bn({},t,{sets:bn({},t.sets,En({},e,bn({},t.sets[e],{data:bn({},t.sets[e].data,{layers:n})})))})},Gg=function(t,e){return bn({},t,{},e)},Kg={lookAtLocation:{latitude:50.1,longitude:14.5},range:1e5,roll:0,tilt:0,heading:0,elevation:0},Wg=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kg,r=mn()(Xe()(Kg),n),i=ng(t,e);return bn({},t,{sets:bn({},t.sets,En({},e,bn({},i,{data:bn({},i.data,{worldWindNavigator:r})})))})},zg=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kg,r=mn()(Xe()(Kg),n),i=rg(t,e);return wg(t,bn({},i,{data:bn({},i.data,{worldWindNavigator:r})}))},Yg=function(t,e,n){var r=rg(t,e);return wg(t,bn({},r,{data:bn({},r.data,{worldWindNavigator:r.data.worldWindNavigator?bn({},r.data.worldWindNavigator,{},n):n})}))},Hg=function(t,e,n){return bn({},t,{sets:bn({},t.sets,En({},e,bn({},t.sets[e],{data:bn({},t.sets[e].data,{worldWindNavigator:t.sets[e].data.worldWindNavigator?bn({},t.sets[e].data.worldWindNavigator,{},n):n})})))})};var qg=bn({},ad),Xg=bn({},ad,{activeKeys:null}),Zg=bn({},ad),Jg=bn({},ad,{activeKeys:null,defaultSituationActive:!0}),Qg=function(t){return bn({},t,{loading:!0})},$g=function(t){return bn({},t,{loading:!1})},tm=function(t,e){return bn({},t,{defaultSituationActive:e.active})},em=l({cases:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zg,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.SCENARIOS_CASES_ADD:return sd.add(t,e);case ou.SCENARIOS_CASES_SET_ACTIVE:return sd.setActive(t,e);case ou.SCENARIOS_CASES_EDITED_UPDATE:return sd.updateEdited(t,e);case ou.SCENARIOS_CASES_EDITED_REMOVE:return sd.removeEdited(t,e);case ou.SCENARIOS_CASES_EDITED_REMOVE_ACTIVE:return sd.removeEditedActive(t,e);case ou.SCENARIOS_CASES_EDITED_REMOVE_PROPERTY:return sd.removeEditedProperty(t,e);case ou.SCENARIOS_CASES_RECEIVE:return sd.add(t,e);case ou.SCENARIOS_CASES_REMOVE:return sd.remove(t,e);case ou.SCENARIOS_CASES_UPDATE:return sd.add(t,e);default:return t}},scenarios:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jg,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.SCENARIOS.ADD:return sd.add(t,e);case ou.SCENARIOS.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.SCENARIOS_EDITED_UPDATE:return sd.updateEdited(t,e);case ou.SCENARIOS_EDITED_REMOVE:return sd.removeEdited(t,e);case ou.SCENARIOS_EDITED_REMOVE_PROPERTY:return sd.removeEditedProperty(t,e);case ou.SCENARIOS_RECEIVE:return sd.add(t,e);case ou.SCENARIOS_REQUEST:return Qg(t);case ou.SCENARIOS_REQUEST_ERROR:return $g(t);case ou.SCENARIOS_SET_ACTIVE:return sd.setActive(t,e);case ou.SCENARIOS_SET_ACTIVE_MULTI:return sd.setActiveMultiple(t,e);case ou.SCENARIOS_SET_DEFAULT_SITUATION_ACTIVE:return tm(t,e);case ou.SCENARIOS_API_PROCESSING_FILE_ERROR:case ou.SCENARIOS_API_PROCESSING_FILE_STARTED:case ou.SCENARIOS_API_PROCESSING_FILE_SUCCESS:return sd.add(t,e);default:return t}}}),nm=bn({},ad),rm={screens:{},sets:{}},im={orderByHistory:[],orderBySpace:[]},om={width:null,minActiveWidth:null,desiredState:"open"},am=function(t,e){var n=bn({},t.screens);n[e.lineage]={lineage:e.lineage,data:bn({},om,{},e.data)};var r=bn({},t.sets);return r[e.setKey]=bn({},im,{},r[e.setKey]),r[e.setKey].orderBySpace=[].concat(Cn(r[e.setKey].orderBySpace),[e.lineage]),r[e.setKey].orderByHistory=[].concat(Cn(r[e.setKey].orderByHistory),[e.lineage]),bn({},t,{screens:n,sets:r})},sm=function(t,e){var n=bn({},t.sets);return n[e.setKey]=bn({},im),bn({},t,{sets:n})},um=function(t,e){var n=bn({},t.screens);return n[e.lineage]={lineage:e.lineage,data:bn({},n[e.lineage].data,{desiredState:"closing"})},bn({},t,{screens:n})},lm=function(t,e){var n=bn({},t.screens);return n[e.lineage]={lineage:e.lineage,data:bn({},n[e.lineage].data,{desiredState:"open"})},bn({},t,{screens:n})},cm=function(t,e){var n=bn({},t.sets),r=fn()(Cn(n[e.setKey].orderByHistory),e.lineage),i=fn()(Cn(n[e.setKey].orderBySpace),e.lineage);return bn({},t,{sets:bn({},n,En({},e.setKey,{orderByHistory:r,orderBySpace:i}))})},hm=function(t,e){var n=bn({},t.sets);return bn({},t,{sets:bn({},n,En({},e.setKey,{orderByHistory:[],orderBySpace:[]}))})},fm=function(t,e){var n=bn({},t.screens);return n[e.lineage]={lineage:e.lineage,data:bn({},n[e.lineage].data,{desiredState:"retracted"})},bn({},t,{screens:n})},pm=function(t,e){var n=bn({},t.sets),r=fn()(Cn(n[e.setKey].orderByHistory),e.lineage);return r.push(e.lineage),bn({},t,{sets:bn({},n,En({},e.setKey,bn({},n[e.setKey],{orderByHistory:r})))})},dm=function(t,e){var n=bn({},t.screens);n[e.lineage]=bn({},n[e.lineage],{data:bn({},n[e.lineage].data,{},e.data)});var r=bn({},t.sets);r[e.setKey]=bn({},im,{},r[e.setKey]);var i=fn()(r[e.setKey].orderByHistory,e.lineage);if(i.push(e.lineage),r[e.setKey].orderByHistory=i,!ct()(r[e.setKey].orderBySpace,(function(t){return t===e.lineage}))){var o=fn()(r[e.setKey].orderBySpace,e.lineage);o.push(e.lineage),r[e.setKey].orderBySpace=o}return bn({},t,{screens:n,sets:r})},gm=bn({},ad),mm=function(t,e){var n=bn({},t.byKey,En({},e,bn({},t.byKey[e],{data:bn({},t.byKey[e].data,{featureKeysFilter:null})})));return bn({},t,{byKey:n})},ym=function(t,e,n){var r=bn({},t.byKey,En({},e,bn({},t.byKey[e],{data:bn({},t.byKey[e].data,{featureKeysFilter:bn({},t.byKey[e].data.featureKeysFilter,{keys:n})})})));return bn({},t,{byKey:r})},vm={byKey:null},Em=function(t,e){var n,r=bn({},t.byKey);return(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.length)&&e.data.forEach((function(t){r[t.key]=bn({},r[t.key],{},t)})),bn({},t,{byKey:r})},_m=function(t,e){return bn({},t,{byKey:t.byKey?Kt()(t.byKey,e.keys):null})},bm=bn({},ad),Sm=function(t,e){var n=bn({},t.byKey);return e.data&&e.data.length&&e.data.forEach((function(t){n[t.spatialDataSourceKey]=bn({},n[t.spatialDataSourceKey],{},t)})),bn({},t,{byKey:n})},wm=function(t,e){return t},xm=bn({},ad),Tm=bn({featuresBySourceKey:{},editedFeaturesBySourceKey:{},selectedFeaturesKeysBySourceKey:{},loading:!1},ad);function Lm(t,e){var n;if(t.featuresBySourceKey.hasOwnProperty(e.dataSourceKey)&&t.featuresBySourceKey[e.dataSourceKey].length){var r=vn()(t.featuresBySourceKey[e.dataSourceKey],(function(t){return ct()(e.data,{key:t.key})}));n=[].concat(Cn(r),Cn(e.data))}else n=Cn(e.data);return bn({},t,{loading:!1,featuresBySourceKey:bn({},t.featuresBySourceKey,En({},e.dataSourceKey,n))})}function Cm(t,e){var n=t.selectedFeaturesKeysBySourceKey[e.dataSourceKey]||[];switch(e.selectionMode){case"replace":n=e.featureKeys;break;case"add":n=dt()([].concat(Cn(n),Cn(e.featureKeys)));break;case"remove":n=fn()(n,e.featureKeys)}return bn({},t,{selectedFeaturesKeysBySourceKey:bn({},t.selectedFeaturesKeysBySourceKey,En({},e.dataSourceKey,n))})}function Am(t,e){var n=vn()(t.editedFeaturesBySourceKey[e.dataSourceKey],(function(t){return ct()(e.features,{key:t.key})})),r=[].concat(Cn(n),Cn(e.features));return bn({},t,{editedFeaturesBySourceKey:bn({},t.editedFeaturesBySourceKey,En({},e.dataSourceKey,r))})}var Mm=bn({},ad),Rm=bn({},ad),Om=bn({},ad),Pm=bn({},ad),Im=bn({},ad,{groups:bn({},ad)});function Nm(t,e){var n=e.data,r=(n.userId,Tn(n,["userId"]));return r.activeKey=e.data.userId,bn({},t,{},r)}function Dm(t,e){return bn({},t,{loading:!0})}function km(t,e){return bn({},t,{loading:!1})}var Fm=bn({},ad),Vm={windows:{},sets:{}},jm={orderByHistory:[]},Bm={minWidth:100,minHeight:200,maxWidth:500,maxHeight:500,width:200,height:300,position:{top:50,left:50}},Um=function(t,e){var n=bn({},t.windows);n[e.windowKey]={key:e.windowKey,data:{state:e.state?e.state:null,settings:bn({},Bm,{},e.settings),component:e.component,props:e.props}};var r=bn({},t.sets);return r[e.setKey]=bn({},jm,{},r[e.setKey]),r[e.setKey].orderByHistory=[].concat(Cn(r[e.setKey].orderByHistory),[e.windowKey]),bn({},t,{windows:n,sets:r})},Gm=function(t,e){var n=bn({},t.windows);n[e.windowKey]={key:e.windowKey,data:bn({},n[e.windowKey].data,{state:"open"})};var r=bn({},t.sets);return r[e.setKey]=bn({},jm,{},r[e.setKey]),r[e.setKey].orderByHistory=[].concat(Cn(r[e.setKey].orderByHistory),[e.windowKey]),bn({},t,{windows:n,sets:r})},Km=function(t,e){var n=bn({},t.sets);if(_t()(n)||_t()(n[e.setKey])||!e.windowKey)return t;var r=fn()(Cn(n[e.setKey].orderByHistory),e.windowKey),i=bn({},t.windows);return i[e.windowKey]&&(i[e.windowKey]={key:e.windowKey,data:bn({},i[e.windowKey].data,{state:"close"})}),bn({},t,{windows:i,sets:bn({},n,En({},e.setKey,{orderByHistory:r}))})},Wm=function(t,e){var n=bn({},t.sets),r=fn()(Cn(n[e.setKey].orderByHistory),e.windowKey);return r.push(e.windowKey),bn({},t,{sets:bn({},n,En({},e.setKey,bn({},n[e.setKey],{orderByHistory:r})))})},zm=function(t,e){var n=bn({},t.windows);return n[e.windowKey]={key:e.windowKey,data:bn({},n[e.windowKey].data,{},e.data)},bn({},t,{windows:n})},Ym={app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ud,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.APP.SET_BASE_URL:return cd(t,e);case ou.APP.SET_KEY:return ld(t,e);case ou.APP.SET_LOCAL_CONFIGURATION:return hd(t,e);case ou.APP.UPDATE_LOCAL_CONFIGURATION:return fd(t,e);case ou.APP.RECEIVE_CONFIGURATION:return dd(t,e);default:return t}},areas:yd,areaRelations:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vd,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.AREA_RELATIONS.ADD:return sd.add(t,e);case ou.AREA_RELATIONS.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.AREA_RELATIONS.INDEX.ADD:return sd.addIndex(t,e);case ou.AREA_RELATIONS.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.AREA_RELATIONS.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.AREA_RELATIONS.USE.INDEXED.CLEAR_ALL:return sd.useIndexedClearAll(t,e);default:return t}},attributes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ed,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.ATTRIBUTES.ADD:return _d(t,e);case ou.ATTRIBUTES.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.ATTRIBUTES.DELETE:return sd.remove(t,e);case ou.ATTRIBUTES.EDITED.REMOVE:return sd.removeEdited(t,e);case ou.ATTRIBUTES.EDITED.REMOVE_PROPERTY:return sd.removeEditedProperty(t,e);case ou.ATTRIBUTES.EDITED.UPDATE:return sd.updateEdited(t,e);case ou.ATTRIBUTES.INDEX.ADD:return sd.addIndex(t,e);case ou.ATTRIBUTES.INDEX.CLEAR_ALL:return sd.clearIndexes(t,e);case ou.ATTRIBUTES.INDEX.CLEAR_INDEX:return sd.clearIndex(t,e);case ou.ATTRIBUTES.MARK_DELETED:return sd.markDeleted(t,e);case ou.ATTRIBUTES.SET_ACTIVE_KEY:return sd.setActive(t,e);case ou.ATTRIBUTES.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.ATTRIBUTES.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.ATTRIBUTES.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.ATTRIBUTES.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.COMMON.DATA.SET_OUTDATED:return sd.dataSetOutdated(t,e);case ou.COMMON.DATA.CLEANUP_ON_LOGOUT:return sd.cleanupOnLogout(t,e);case ou.COMMON.EDITED.REMOVE_PROPERTY_VALUES:return sd.removeEditedPropertyValues(t,e);default:return t}},attributeRelations:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xd,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.ATTRIBUTE_RELATIONS.ADD:return sd.add(t,e);case ou.ATTRIBUTE_RELATIONS.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.ATTRIBUTE_RELATIONS.INDEX.ADD:return sd.addIndex(t,e);case ou.ATTRIBUTE_RELATIONS.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.ATTRIBUTE_RELATIONS.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.ATTRIBUTE_RELATIONS.USE.INDEXED.CLEAR_ALL:return sd.useIndexedClearAll(t,e);default:return t}},attributeStatistics:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Om,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.ATTRIBUTE_STATISTICS.ADD:return sd.add(t,e);case ou.ATTRIBUTE_STATISTICS.ADD_BATCH:return sd.addBatch(t,e);case ou.ATTRIBUTE_STATISTICS.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.ATTRIBUTE_STATISTICS.INDEX.ADD:return sd.addIndex(t,e);case ou.ATTRIBUTE_STATISTICS.INDEX.ADD_BATCH:return sd.addBatchIndex(t,e);case ou.ATTRIBUTE_STATISTICS.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.ATTRIBUTE_STATISTICS.USE.INDEXED_BATCH.REGISTER:return sd.registerBatchUseIndexed(t,e);case ou.ATTRIBUTE_DATA_SOURCES.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);default:return t}},attributeSets:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Td,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.ATTRIBUTE_SETS.ADD:return sd.add(t,e);case ou.ATTRIBUTE_SETS.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.ATTRIBUTE_SETS.SET_ACTIVE_KEYS:return sd.setActiveMultiple(t,e);default:return t}},attributeData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bd,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.ATTRIBUTE_DATA.ADD:return Sd(t,e);case ou.ATTRIBUTE_DATA.ADD_BATCH:return sd.addBatch(t,e);case ou.ATTRIBUTE_DATA.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.ATTRIBUTE_DATA.INDEX.ADD:return sd.addIndex(t,e);case ou.ATTRIBUTE_DATA.INDEX.ADD_BATCH:return sd.addBatchIndex(t,e);case ou.ATTRIBUTE_DATA.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.ATTRIBUTE_DATA.USE.INDEXED_BATCH.REGISTER:return sd.registerBatchUseIndexed(t,e);case ou.ATTRIBUTE_DATA.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);default:return t}},attributeDataSources:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wd,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.ATTRIBUTE_DATA_SOURCES.ADD:return sd.add(t,e);case ou.ATTRIBUTE_DATA_SOURCES.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.ATTRIBUTE_DATA_SOURCES.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.ATTRIBUTE_DATA_SOURCES.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);default:return t}},cases:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ld,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.CASES.ADD:return sd.add(t,e);case ou.CASES.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.CASES.DELETE:return sd.remove(t,e);case ou.CASES.EDITED.REMOVE:return sd.removeEdited(t,e);case ou.CASES.EDITED.REMOVE_PROPERTY:return sd.removeEditedProperty(t,e);case ou.CASES.EDITED.UPDATE:return sd.updateEdited(t,e);case ou.CASES.INDEX.ADD:return sd.addIndex(t,e);case ou.CASES.INDEX.CLEAR_ALL:return sd.clearIndexes(t,e);case ou.CASES.INDEX.CLEAR_INDEX:return sd.clearIndex(t,e);case ou.CASES.MARK_DELETED:return sd.markDeleted(t,e);case ou.CASES.SET_ACTIVE_KEY:return sd.setActive(t,e);case ou.CASES.SET_ACTIVE_KEYS:return sd.setActiveMultiple(t,e);case ou.CASES.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.CASES.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.CASES.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.CASES.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.COMMON.DATA.SET_OUTDATED:return sd.dataSetOutdated(t,e);case ou.COMMON.DATA.CLEANUP_ON_LOGOUT:return sd.cleanupOnLogout(t,e);default:return t}},charts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rd,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.CHARTS.UPDATE:return Pd(t,e);case ou.CHARTS.SET_INITIAL:return Od();default:return t}},components:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cd,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.COMPONENTS.UPDATE:return Ad(t,e);case ou.COMPONENTS.SET:return Md(t,e);default:return t}},layerPeriods:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Id,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.LAYER_PERIODS_AOI_LAYER_REQUEST:return Nd(t,e);case ou.LAYER_PERIODS_AOI_LAYER_RECEIVE:return kd(t,e);case ou.LAYER_PERIODS_AOI_LAYER_REQUEST_ERROR:return Dd(t,e);case ou.LAYER_PERIODS_PLACE_LAYER_REQUEST:return Fd(t,e);case ou.LAYER_PERIODS_PLACE_LAYER_RECEIVE:return jd(t,e);case ou.LAYER_PERIODS_PLACE_LAYER_REQUEST_ERROR:return Vd(t,e);case ou.LAYER_PERIODS_KEY_LAYER_REQUEST:return Bd(t,e);case ou.LAYER_PERIODS_KEY_LAYER_RECEIVE:return Gd(t,e);case ou.LAYER_PERIODS_KEY_LAYER_REQUEST_ERROR:return Ud(t,e);default:return t}},layerTemplates:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xd,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.LAYER_TEMPLATES.ADD:return sd.add(t,e);case ou.LAYER_TEMPLATES.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.LAYER_TEMPLATES.DELETE:return sd.remove(t,e);case ou.LAYER_TEMPLATES.EDITED.REMOVE:return sd.removeEdited(t,e);case ou.LAYER_TEMPLATES.EDITED.REMOVE_PROPERTY:return sd.removeEditedProperty(t,e);case ou.LAYER_TEMPLATES.EDITED.UPDATE:return sd.updateEdited(t,e);case ou.LAYER_TEMPLATES.INDEX.ADD:return sd.addIndex(t,e);case ou.LAYER_TEMPLATES.INDEX.CLEAR_ALL:return sd.clearIndexes(t,e);case ou.LAYER_TEMPLATES.INDEX.CLEAR_INDEX:return sd.clearIndex(t,e);case ou.LAYER_TEMPLATES.MARK_DELETED:return sd.markDeleted(t,e);case ou.LAYER_TEMPLATES.SET_ACTIVE_KEY:return sd.setActive(t,e);case ou.LAYER_TEMPLATES.SET_ACTIVE_KEYS:return sd.setActiveMultiple(t,e);case ou.LAYER_TEMPLATES.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.LAYER_TEMPLATES.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.LAYER_TEMPLATES.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.LAYER_TEMPLATES.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.COMMON.DATA.SET_OUTDATED:return sd.dataSetOutdated(t,e);case ou.COMMON.DATA.CLEANUP_ON_LOGOUT:return sd.cleanupOnLogout(t,e);default:return t}},layerTrees:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zd,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.LAYER_TREES.ADD:return sd.add(t,e);case ou.LAYER_TREES.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.LAYER_TREES.DELETE:return sd.remove(t,e);case ou.LAYER_TREES.EDITED.REMOVE:return sd.removeEdited(t,e);case ou.LAYER_TREES.EDITED.REMOVE_PROPERTY:return sd.removeEditedProperty(t,e);case ou.LAYER_TREES.EDITED.UPDATE:return sd.updateEdited(t,e);case ou.LAYER_TREES.INDEX.ADD:return sd.addIndex(t,e);case ou.LAYER_TREES.INDEX.CLEAR_ALL:return sd.clearIndexes(t,e);case ou.LAYER_TREES.INDEX.CLEAR_INDEX:return sd.clearIndex(t,e);case ou.LAYER_TREES.MARK_DELETED:return sd.markDeleted(t,e);case ou.LAYER_TREES.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.LAYER_TREES.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.LAYER_TREES.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.LAYER_TREES.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.COMMON.DATA.SET_OUTDATED:return sd.dataSetOutdated(t,e);case ou.COMMON.DATA.CLEANUP_ON_LOGOUT:return sd.cleanupOnLogout(t,e);default:return t}},maps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eg,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.MAPS.SET_INITIAL:return ig();case ou.MAPS.SET_ACTIVE_MAP_KEY:return og(t,e.mapKey);case ou.MAPS.SET_ACTIVE_SET_KEY:return sg(t,e.setKey);case ou.MAPS.SET.ADD:return ug(t,e.set);case ou.MAPS.SET.REMOVE:return lg(t,e.setKey);case ou.MAPS.SET.ADD_MAP:return fg(t,e.setKey,e.mapKey);case ou.MAPS.SET.REMOVE_MAP:return pg(t,e.setKey,e.mapKey);case ou.MAPS.SET.SET_BACKGROUND_LAYER:return Bg(t,e.setKey,e.backgroundLayer);case ou.MAPS.SET.SET_LAYERS:return Ug(t,e.setKey,e.layers);case ou.MAPS.SET.VIEW.SET:return dg(t,e.setKey,e.view);case ou.MAPS.SET.VIEW.UPDATE:return gg(t,e.setKey,e.update);case ou.MAPS.SET.SET_ACTIVE_MAP_KEY:return ag(t,e.setKey,e.mapKey);case ou.MAPS.SET.SET_MAPS:return hg(t,e.setKey,e.maps);case ou.MAPS.SET.SET_SYNC:return cg(t,e.setKey,e.sync);case ou.MAPS.MAP.ADD:return mg(t,e.map);case ou.MAPS.MAP.LAYERS.SET.HOVERED_FEATURE_KEYS:return Eg(t,e.mapKey,e.layerKey,e.hoveredFeatureKeys);case ou.MAPS.MAP.LAYERS.SET.SELECTION:return _g(t,e.mapKey,e.layerKey,e.selectionKey);case ou.MAPS.MAP.LAYERS.SET.STYLE:return bg(t,e.mapKey,e.layerKey,e.style);case ou.MAPS.MAP.LAYERS.CLEAR.SELECTION:return Sg(t,e.mapKey,e.selectionKey);case ou.MAPS.MAP.REMOVE:return yg(t,e.mapKey);case ou.MAPS.MAP.SET_NAME:return vg(t,e.mapKey,e.name);case ou.MAPS.MAP.SET_DATA:return xg(t,e.mapKey,e.data);case ou.MAPS.MAP.VIEW.SET:return Tg(t,e.mapKey,e.view);case ou.MAPS.MAP.VIEW.UPDATE:return Lg(t,e.mapKey,e.update);case ou.MAPS.LAYERS.LAYER.ADD:return Cg(t,e.mapKey,e.layer,e.index);case ou.MAPS.LAYERS.LAYER.REMOVE:return Ag(t,e.mapKey,e.layerKey);case ou.MAPS.LAYERS.REMOVE_LAYERS:return Mg(t,e.mapKey,e.layersKeys);case ou.MAPS.LAYERS.LAYER.SET_INDEX:return Rg(t,e.mapKey,e.layerKey,e.index);case ou.MAPS.LAYERS.LAYER.UPDATE:return Pg(t,e.mapKey,e.layer,e.layerKey);case ou.MAPS.LAYERS.LAYER.SET:return Og(t,e.mapKey,e.layer,e.layerKey);case ou.MAPS.LAYERS.SET:return jg(t,e.mapKey,e.layers);case ou.MAPS.SET_SCOPE:return Ig(t,e.mapKey,e.scope);case ou.MAPS.SET_SCENARIO:return Dg(t,e.mapKey,e.scenario);case ou.MAPS.SET_PERIOD:return Fg(t,e.mapKey,e.period);case ou.MAPS.SET_PLACE:return Ng(t,e.mapKey,e.place);case ou.MAPS.SET_CASE:return kg(t,e.mapKey,e.case);case ou.MAPS.SET_BACKGROUND_LAYER:return Vg(t,e.mapKey,e.backgroundLayer);case ou.MAPS.UPDATE:return Gg(t,e.data);case ou.MAPS.SET.WORLD_WIND_NAVIGATOR.SET:return Wg(t,e.setKey,e.worldWindNavigator);case ou.MAPS.SET.WORLD_WIND_NAVIGATOR.UPDATE:return Hg(t,e.setKey,e.worldWindNavigator);case ou.MAPS.MAP.WORLD_WIND_NAVIGATOR.SET:return zg(t,e.mapKey,e.worldWindNavigator);case ou.MAPS.MAP.WORLD_WIND_NAVIGATOR.UPDATE:return Yg(t,e.mapKey,e.worldWindNavigator);default:return t}},periods:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qg,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.PERIODS.ADD:return sd.add(t,e);case ou.PERIODS.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.PERIODS.DELETE:return sd.remove(t,e);case ou.PERIODS.EDITED.REMOVE:return sd.removeEdited(t,e);case ou.PERIODS.EDITED.REMOVE_PROPERTY:return sd.removeEditedProperty(t,e);case ou.PERIODS.EDITED.UPDATE:return sd.updateEdited(t,e);case ou.PERIODS.INDEX.ADD:return sd.addIndex(t,e);case ou.PERIODS.INDEX.CLEAR_ALL:return sd.clearIndexes(t,e);case ou.PERIODS.INDEX.CLEAR_INDEX:return sd.clearIndex(t,e);case ou.PERIODS.MARK_DELETED:return sd.markDeleted(t,e);case ou.PERIODS.SET_ACTIVE_KEY:return sd.setActive(t,e);case ou.PERIODS.SET_ACTIVE_KEYS:return sd.setActiveMultiple(t,e);case ou.PERIODS.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.PERIODS.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.PERIODS.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.PERIODS.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.COMMON.DATA.SET_OUTDATED:return sd.dataSetOutdated(t,e);case ou.COMMON.DATA.CLEANUP_ON_LOGOUT:return sd.cleanupOnLogout(t,e);default:return t}},places:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xg,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.PLACES.ADD:return sd.add(t,e);case ou.PLACES.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.PLACES.DELETE:return sd.remove(t,e);case ou.PLACES.EDITED.REMOVE:return sd.removeEdited(t,e);case ou.PLACES.EDITED.REMOVE_PROPERTY:return sd.removeEditedProperty(t,e);case ou.PLACES.EDITED.UPDATE:return sd.updateEdited(t,e);case ou.PLACES.INDEX.ADD:return sd.addIndex(t,e);case ou.PLACES.INDEX.CLEAR_ALL:return sd.clearIndexes(t,e);case ou.PLACES.INDEX.CLEAR_INDEX:return sd.clearIndex(t,e);case ou.PLACES.MARK_DELETED:return sd.markDeleted(t,e);case ou.PLACES.SET_ACTIVE_KEY:return sd.setActive(t,e);case ou.PLACES.SET_ACTIVE_KEYS:return sd.setActiveMultiple(t,e);case ou.PLACES.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.PLACES.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.PLACES.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.PLACES.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.COMMON.DATA.SET_OUTDATED:return sd.dataSetOutdated(t,e);case ou.COMMON.DATA.CLEANUP_ON_LOGOUT:return sd.cleanupOnLogout(t,e);default:return t}},scenarios:em,scopes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nm,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.SCOPES.ADD:return sd.add(t,e);case ou.SCOPES.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.SCOPES.DELETE:return sd.remove(t,e);case ou.SCOPES.EDITED.REMOVE:return sd.removeEdited(t,e);case ou.SCOPES.EDITED.REMOVE_PROPERTY:return sd.removeEditedProperty(t,e);case ou.SCOPES.EDITED.UPDATE:return sd.updateEdited(t,e);case ou.SCOPES.INDEX.ADD:return sd.addIndex(t,e);case ou.SCOPES.INDEX.CLEAR_ALL:return sd.clearIndexes(t,e);case ou.SCOPES.INDEX.CLEAR_INDEX:return sd.clearIndex(t,e);case ou.SCOPES.MARK_DELETED:return sd.markDeleted(t,e);case ou.SCOPES.SET_ACTIVE_KEY:return sd.setActive(t,e);case ou.SCOPES.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.SCOPES.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.SCOPES.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.SCOPES.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.COMMON.DATA.SET_OUTDATED:return sd.dataSetOutdated(t,e);case ou.COMMON.DATA.CLEANUP_ON_LOGOUT:return sd.cleanupOnLogout(t,e);default:return t}},screens:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rm,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.SCREENS.ADD:return am(t,e);case ou.SCREENS.CLOSE:return um(t,e);case ou.SCREENS.OPEN:return lm(t,e);case ou.SCREENS.REMOVE:return cm(t,e);case ou.SCREENS.REMOVE_ALL:return hm(t,e);case ou.SCREENS.RETRACT:return fm(t,e);case ou.SCREENS.SETS.ADD:return sm(t,e);case ou.SCREENS.TOP_HISTORY:return pm(t,e);case ou.SCREENS.UPDATE:return dm(t,e);default:return t}},selections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gm,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.SELECTIONS.ADD:return sd.add(t,e);case ou.SELECTIONS.CLEAR.FEATURE_KEYS_FILTER:return mm(t,e.key);case ou.SELECTIONS.SET_ACTIVE_KEY:return sd.setActive(t,e);case ou.SELECTIONS.SET.FEATURE_KEYS_FILTER.KEYS:return ym(t,e.key,e.featureKeys);default:return t}},snapshots:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vm,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.SNAPSHOTS_ADD:return Em(t,e);case ou.SNAPSHOTS_REMOVE:return _m(t,e);default:return t}},spatialData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bm,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.SPATIAL_DATA.ADD:return Sm(t,e);case ou.SPATIAL_DATA.INDEX.ADD:return wm(t);case ou.SPATIAL_DATA.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);default:return t}},spatialDataSources:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xm,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.SPATIAL_DATA_SOURCES.ADD:return sd.add(t,e);case ou.SPATIAL_DATA_SOURCES.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.SPATIAL_DATA_SOURCES.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.SPATIAL_DATA_SOURCES.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);default:return t}},spatialVectorDataSources:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tm,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.SPATIAL_DATA_SOURCES_VECTOR_FEATURES_RECEIVE:return Lm(t,e);case ou.SPATIAL_DATA_SOURCES_VECTOR_FEATURES_SELECT:return Cm(t,e);case ou.SPATIAL_DATA_SOURCES_VECTOR_FEATURES_EDITED_ADD:return Am(t,e);case ou.SPATIAL_DATA_SOURCES.VECTOR.ADD:return sd.add(t,e);case ou.SPATIAL_DATA_SOURCES.VECTOR.ADD_BATCH:return sd.addBatch(t,e);case ou.SPATIAL_DATA_SOURCES.VECTOR.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.SPATIAL_DATA_SOURCES.VECTOR.INDEX.ADD:return sd.addIndex(t,e);case ou.SPATIAL_DATA_SOURCES.VECTOR.INDEX.ADD_BATCH:return sd.addBatchIndex(t,e);case ou.SPATIAL_DATA_SOURCES.VECTOR.INDEX.CLEAR_ALL:return sd.clearIndexes(t,e);case ou.SPATIAL_DATA_SOURCES.VECTOR.INDEX.CLEAR_INDEX:return sd.clearIndex(t,e);case ou.SPATIAL_DATA_SOURCES.VECTOR.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.SPATIAL_DATA_SOURCES.VECTOR.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.SPATIAL_DATA_SOURCES.VECTOR.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.SPATIAL_DATA_SOURCES.VECTOR.USE.INDEXED_BATCH.REGISTER:return sd.registerBatchUseIndexed(t,e);case ou.SPATIAL_DATA_SOURCES.VECTOR.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.COMMON.DATA.SET_OUTDATED:return sd.dataSetOutdated(t,e);default:return t}},spatialRelations:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mm,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.SPATIAL_RELATIONS.ADD:return sd.add(t,e);case ou.SPATIAL_RELATIONS.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.SPATIAL_RELATIONS.INDEX.ADD:return sd.addIndex(t,e);case ou.SPATIAL_RELATIONS.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.SPATIAL_RELATIONS.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.SPATIAL_RELATIONS.USE.INDEXED.CLEAR_ALL:return sd.useIndexedClearAll(t,e);default:return t}},styles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rm,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.STYLES.ADD:return sd.add(t,e);case ou.STYLES.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.STYLES.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.STYLES.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.COMMON.DATA.SET_OUTDATED:return sd.dataSetOutdated(t,e);case ou.COMMON.DATA.CLEANUP_ON_LOGOUT:return sd.cleanupOnLogout(t,e);default:return t}},tags:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pm,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.TAGS.ADD:return sd.add(t,e);case ou.TAGS.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.TAGS.DELETE:return sd.remove(t,e);case ou.TAGS.EDITED.REMOVE:return sd.removeEdited(t,e);case ou.TAGS.EDITED.REMOVE_PROPERTY:return sd.removeEditedProperty(t,e);case ou.TAGS.EDITED.UPDATE:return sd.updateEdited(t,e);case ou.TAGS.INDEX.ADD:return sd.addIndex(t,e);case ou.TAGS.INDEX.CLEAR_ALL:return sd.clearIndexes(t,e);case ou.TAGS.INDEX.CLEAR_INDEX:return sd.clearIndex(t,e);case ou.TAGS.MARK_DELETED:return sd.markDeleted(t,e);case ou.TAGS.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.TAGS.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.TAGS.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.TAGS.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.COMMON.DATA.SET_OUTDATED:return sd.dataSetOutdated(t,e);case ou.COMMON.DATA.CLEANUP_ON_LOGOUT:return sd.cleanupOnLogout(t,e);default:return t}},users:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Im,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.USERS.ADD:return sd.add(t,e);case ou.USERS.INDEX.ADD:return sd.addIndex(t,e);case ou.USERS.INDEX.CLEAR_ALL:return sd.clearIndexes(t,e);case ou.USERS.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.USERS.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.USERS.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.USERS.SET_ACTIVE_KEY:return sd.setActive(t,e);case ou.USERS.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.USERS.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.COMMON.DATA.SET_OUTDATED:return bn({},sd.dataSetOutdated(t,e),{groups:sd.dataSetOutdated(t.groups,e)});case ou.COMMON.DATA.CLEANUP_ON_LOGOUT:return bn({},sd.cleanupOnLogout(t,e),{groups:sd.cleanupOnLogout(t.groups,e)});case ou.USERS_LOAD_REQUEST:return Dm(t);case ou.USERS_LOAD_REQUEST_ERROR:return km(t);case ou.USERS_UPDATE:return Nm(t,e);case ou.USERS.GROUPS.ADD:return bn({},t,{groups:sd.add(t.groups,e)});case ou.USERS.GROUPS.INDEX.ADD:return bn({},t,{groups:sd.addIndex(t.groups,e)});case ou.USERS.GROUPS.INDEX.CLEAR_ALL:return bn({},t,{groups:sd.clearIndexes(t.groups,e)});case ou.USERS.GROUPS.ADD_UNRECEIVED:return bn({},t,{groups:sd.addUnreceivedKeys(t.groups,e)});case ou.USERS.GROUPS.USE.INDEXED.CLEAR:return bn({},t,{groups:sd.useIndexedClear(t.groups,e)});case ou.USERS.GROUPS.USE.KEYS.CLEAR:return bn({},t,{groups:sd.useKeysClear(t.groups,e)});case ou.USERS.GROUPS.USE.INDEXED.REGISTER:return bn({},t,{groups:sd.registerUseIndexed(t.groups,e)});default:return t}},views:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fm,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.VIEWS.ADD:return sd.add(t,e);case ou.VIEWS.ADD_UNRECEIVED:return sd.addUnreceivedKeys(t,e);case ou.VIEWS.DELETE:return sd.remove(t,e);case ou.VIEWS.EDITED.REMOVE:return sd.removeEdited(t,e);case ou.VIEWS.EDITED.REMOVE_PROPERTY:return sd.removeEditedProperty(t,e);case ou.VIEWS.EDITED.UPDATE:return sd.updateEdited(t,e);case ou.VIEWS.INDEX.ADD:return sd.addIndex(t,e);case ou.VIEWS.SET_ACTIVE_KEY:return sd.setActive(t,e);case ou.VIEWS.SET_ACTIVE_KEYS:return sd.setActiveMultiple(t,e);case ou.VIEWS.USE.KEYS.REGISTER:return sd.useKeysRegister(t,e);case ou.VIEWS.USE.KEYS.CLEAR:return sd.useKeysClear(t,e);case ou.VIEWS.USE.INDEXED.REGISTER:return sd.registerUseIndexed(t,e);case ou.VIEWS.USE.INDEXED.CLEAR:return sd.useIndexedClear(t,e);case ou.VIEWS.INDEX.CLEAR_ALL:return sd.clearIndexes(t,e);case ou.VIEWS.INDEX.CLEAR_INDEX:return sd.clearIndex(t,e);case ou.VIEWS.MARK_DELETED:return sd.markDeleted(t,e);case ou.COMMON.DATA.SET_OUTDATED:return sd.dataSetOutdated(t,e);case ou.COMMON.DATA.CLEANUP_ON_LOGOUT:return sd.cleanupOnLogout(t,e);default:return t}},windows:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vm,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ou.WINDOWS.ADD:return Um(t,e);case ou.WINDOWS.OPEN:return Gm(t,e);case ou.WINDOWS.REMOVE:return Km(t,e);case ou.WINDOWS.SETS.ADD:case ou.WINDOWS.TOP:return Wm(t,e);case ou.WINDOWS.UPDATE:return zm(t,e);default:return t}}}},function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n.d(e,"a",(function(){return r}))},function(t,e,n){var r=n(186),i=n(276),o=n(37),a=n(9);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},function(t,e,n){!function(t){"use strict";function e(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function r(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var i=0;function o(t){return t._leaflet_id=t._leaflet_id||++i,t._leaflet_id}function a(t,e,n){var r,i,o,a;return a=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(a,e),r=!0)}}function s(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}function u(){return!1}function l(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function h(t){return c(t).split(/\s+/)}function f(t,e){for(var r in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[r]=e[r];return t.options}function p(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var d=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(d,(function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"===typeof r&&(r=r(e)),r}))}var m=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var v="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function E(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var _=0;function b(t){var e=+new Date,n=Math.max(0,16-(e-_));return _=e+n,window.setTimeout(t,n)}var S=window.requestAnimationFrame||E("RequestAnimationFrame")||b,w=window.cancelAnimationFrame||E("CancelAnimationFrame")||E("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function x(t,e,n){if(!n||S!==b)return S.call(window,r(t,e));t.call(e)}function T(t){t&&w.call(window,t)}var C={extend:e,create:n,bind:r,lastId:i,stamp:o,throttle:a,wrapNum:s,falseFn:u,formatNum:l,trim:c,splitWords:h,setOptions:f,getParamString:p,template:g,isArray:m,indexOf:y,emptyImageUrl:v,requestFn:S,cancelFn:w,requestAnimFrame:x,cancelAnimFrame:T};function A(){}A.extend=function(t){var r=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=r.__super__=this.prototype,o=n(i);for(var a in o.constructor=r,r.prototype=o,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(r[a]=this[a]);return t.statics&&(e(r,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!==typeof L&&L&&L.Mixin){t=m(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=e(n(o.options),t.options)),e(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},r},A.include=function(t){return e(this.prototype,t),this},A.mergeOptions=function(t){return e(this.prototype.options,t),this},A.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"===typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var M={on:function(t,e,n){if("object"===typeof t)for(var r in t)this._on(r,t[r],e);else for(var i=0,o=(t=h(t)).length;i<o;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(t)if("object"===typeof t)for(var r in t)this._off(r,t[r],e);else for(var i=0,o=(t=h(t)).length;i<o;i++)this._off(t[i],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=void 0);for(var i={fn:e,ctx:n},o=r,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(i)},_off:function(t,e,n){var r,i,o;if(this._events&&(r=this._events[t]))if(e){if(n===this&&(n=void 0),r)for(i=0,o=r.length;i<o;i++){var a=r[i];if(a.ctx===n&&a.fn===e)return a.fn=u,this._firingCount&&(this._events[t]=r=r.slice()),void r.splice(i,1)}}else{for(i=0,o=r.length;i<o;i++)r[i].fn=u;delete this._events[t]}},fire:function(t,n,r){if(!this.listens(t,r))return this;var i=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var u=o[a];u.fn.call(u.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"===typeof t){for(var i in t)this.once(i,t[i],e);return this}var o=r((function(){this.off(t,e,n).off(t,o,n)}),this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};M.addEventListener=M.on,M.removeEventListener=M.clearAllEventListeners=M.off,M.addOneTimeEventListener=M.once,M.fireEvent=M.fire,M.hasEventListeners=M.listens;var R=A.extend(M);function O(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var P=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function I(t,e,n){return t instanceof O?t:m(t)?new O(t[0],t[1]):void 0===t||null===t?t:"object"===typeof t&&"x"in t&&"y"in t?new O(t.x,t.y):new O(t,e,n)}function N(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function D(t,e){return!t||t instanceof N?t:new N(t,e)}function k(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function F(t,e){return t instanceof k?t:new k(t,e)}function V(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function j(t,e,n){return t instanceof V?t:m(t)&&"object"!==typeof t[0]?3===t.length?new V(t[0],t[1],t[2]):2===t.length?new V(t[0],t[1]):null:void 0===t||null===t?t:"object"===typeof t&&"lat"in t?new V(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new V(t,e,n)}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(t){return this.clone()._add(I(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(I(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new O(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new O(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=P(this.x),this.y=P(this.y),this},distanceTo:function(t){var e=(t=I(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=I(t)).x===this.x&&t.y===this.y},contains:function(t){return t=I(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+l(this.x)+", "+l(this.y)+")"}},N.prototype={extend:function(t){return t=I(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new O(this.min.x,this.max.y)},getTopRight:function(){return new O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"===typeof t[0]||t instanceof O?I(t):D(t))instanceof N?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=D(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>=e.x&&r.x<=n.x,a=i.y>=e.y&&r.y<=n.y;return o&&a},overlaps:function(t){t=D(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>e.x&&r.x<n.x,a=i.y>e.y&&r.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},k.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof V)e=t,n=t;else{if(!(t instanceof k))return t?this.extend(j(t)||F(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new V(e.lat,e.lng),this._northEast=new V(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new k(new V(e.lat-r,e.lng-i),new V(n.lat+r,n.lng+i))},getCenter:function(){return new V((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new V(this.getNorth(),this.getWest())},getSouthEast:function(){return new V(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"===typeof t[0]||t instanceof V||"lat"in t?j(t):F(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof k?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=F(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>=e.lat&&r.lat<=n.lat,a=i.lng>=e.lng&&r.lng<=n.lng;return o&&a},overlaps:function(t){t=F(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>e.lat&&r.lat<n.lat,a=i.lng>e.lng&&r.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=F(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},V.prototype={equals:function(t,e){return!!t&&(t=j(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+l(this.lat,t)+", "+l(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,j(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return F([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new V(this.lat,this.lng,this.alt)}};var B={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new N(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?s(t.lng,this.wrapLng,!0):t.lng;return new V(this.wrapLat?s(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new k(new V(o.lat-r,o.lng-i),new V(a.lat-r,a.lng-i))}},U=e({},B,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(r)*Math.cos(i)*a*a,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}}),G={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new O(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new V((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new N([-t,-t],[t,t])}()};function K(t,e,n,r){if(m(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=r}function W(t,e,n,r){return new K(t,e,n,r)}K.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new O((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var z=e({},U,{code:"EPSG:3857",projection:G,transformation:function(){var t=.5/(Math.PI*G.R);return W(t,.5,-t,.5)}()}),Y=e({},z,{code:"EPSG:900913"});function H(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t,e){var n,r,i,o,a,s,u="";for(n=0,i=t.length;n<i;n++){for(r=0,o=(a=t[n]).length;r<o;r++)u+=(r?"L":"M")+(s=a[r]).x+" "+s.y;u+=e?Lt?"z":"x":""}return u||"M0 0"}var X=document.documentElement.style,Z="ActiveXObject"in window,J=Z&&!document.addEventListener,Q="msLaunchUri"in navigator&&!("documentMode"in document),$=At("webkit"),tt=At("android"),et=At("android 2")||At("android 3"),nt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rt=tt&&At("Google")&&nt<537&&!("AudioNode"in window),it=!!window.opera,ot=!Q&&At("chrome"),at=At("gecko")&&!$&&!it&&!Z,st=!ot&&At("safari"),ut=At("phantom"),lt="OTransition"in X,ct=0===navigator.platform.indexOf("Win"),ht=Z&&"transition"in X,ft="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!et,pt="MozPerspective"in X,dt=!window.L_DISABLE_3D&&(ht||ft||pt)&&!lt&&!ut,gt="undefined"!==typeof orientation||At("mobile"),mt=gt&&$,yt=gt&&ft,vt=!window.PointerEvent&&window.MSPointerEvent,Et=!(!window.PointerEvent&&!vt),_t=!window.L_NO_TOUCH&&(Et||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),bt=gt&&it,St=gt&&at,wt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,xt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",u,e),window.removeEventListener("testPassiveEventSupport",u,e)}catch(n){}return t}(),Tt=!!document.createElement("canvas").getContext,Lt=!(!document.createElementNS||!H("svg").createSVGRect),Ct=!Lt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"===typeof e.adj}catch(n){return!1}}();function At(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Mt={ie:Z,ielt9:J,edge:Q,webkit:$,android:tt,android23:et,androidStock:rt,opera:it,chrome:ot,gecko:at,safari:st,phantom:ut,opera12:lt,win:ct,ie3d:ht,webkit3d:ft,gecko3d:pt,any3d:dt,mobile:gt,mobileWebkit:mt,mobileWebkit3d:yt,msPointer:vt,pointer:Et,touch:_t,mobileOpera:bt,mobileGecko:St,retina:wt,passiveEvents:xt,canvas:Tt,svg:Lt,vml:Ct},Rt=vt?"MSPointerDown":"pointerdown",Ot=vt?"MSPointerMove":"pointermove",Pt=vt?"MSPointerUp":"pointerup",It=vt?"MSPointerCancel":"pointercancel",Nt={},Dt=!1;function kt(t,e,n,i){return"touchstart"===e?function(t,e,n){var i=r((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Ie(t),Bt(t,e)}));t["_leaflet_touchstart"+n]=i,t.addEventListener(Rt,i,!1),Dt||(document.addEventListener(Rt,Ft,!0),document.addEventListener(Ot,Vt,!0),document.addEventListener(Pt,jt,!0),document.addEventListener(It,jt,!0),Dt=!0)}(t,n,i):"touchmove"===e?function(t,e,n){var r=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Bt(t,e)};t["_leaflet_touchmove"+n]=r,t.addEventListener(Ot,r,!1)}(t,n,i):"touchend"===e&&function(t,e,n){var r=function(t){Bt(t,e)};t["_leaflet_touchend"+n]=r,t.addEventListener(Pt,r,!1),t.addEventListener(It,r,!1)}(t,n,i),this}function Ft(t){Nt[t.pointerId]=t}function Vt(t){Nt[t.pointerId]&&(Nt[t.pointerId]=t)}function jt(t){delete Nt[t.pointerId]}function Bt(t,e){for(var n in t.touches=[],Nt)t.touches.push(Nt[n]);t.changedTouches=[t],e(t)}var Ut,Gt,Kt,Wt,zt,Yt=vt?"MSPointerDown":Et?"pointerdown":"touchstart",Ht=vt?"MSPointerUp":Et?"pointerup":"touchend",qt="_leaflet_",Xt=he(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Zt=he(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Jt="webkitTransition"===Zt||"OTransition"===Zt?Zt+"End":"transitionend";function Qt(t){return"string"===typeof t?document.getElementById(t):t}function $t(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function te(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function ee(t){var e=t.parentNode;e&&e.removeChild(t)}function ne(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function re(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ie(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function oe(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=le(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function ae(t,e){if(void 0!==t.classList)for(var n=h(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!oe(t,e)){var o=le(t);ue(t,(o?o+" ":"")+e)}}function se(t,e){void 0!==t.classList?t.classList.remove(e):ue(t,c((" "+le(t)+" ").replace(" "+e+" "," ")))}function ue(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function le(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function ce(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(i){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}(t,e)}function he(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function fe(t,e,n){var r=e||new O(0,0);t.style[Xt]=(ht?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function pe(t,e){t._leaflet_pos=e,dt?fe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function de(t){return t._leaflet_pos||new O(0,0)}if("onselectstart"in document)Ut=function(){we(window,"selectstart",Ie)},Gt=function(){Te(window,"selectstart",Ie)};else{var ge=he(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ut=function(){if(ge){var t=document.documentElement.style;Kt=t[ge],t[ge]="none"}},Gt=function(){ge&&(document.documentElement.style[ge]=Kt,Kt=void 0)}}function me(){we(window,"dragstart",Ie)}function ye(){Te(window,"dragstart",Ie)}function ve(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ee(),Wt=t,zt=t.style.outline,t.style.outline="none",we(window,"keydown",Ee))}function Ee(){Wt&&(Wt.style.outline=zt,Wt=void 0,zt=void 0,Te(window,"keydown",Ee))}function _e(t){do{t=t.parentNode}while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function be(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Se={TRANSFORM:Xt,TRANSITION:Zt,TRANSITION_END:Jt,get:Qt,getStyle:$t,create:te,remove:ee,empty:ne,toFront:re,toBack:ie,hasClass:oe,addClass:ae,removeClass:se,setClass:ue,getClass:le,setOpacity:ce,testProp:he,setTransform:fe,setPosition:pe,getPosition:de,disableTextSelection:Ut,enableTextSelection:Gt,disableImageDrag:me,enableImageDrag:ye,preventOutline:ve,restoreOutline:Ee,getSizedParentNode:_e,getScale:be};function we(t,e,n,r){if("object"===typeof e)for(var i in e)Ae(t,i,e[i],n);else for(var o=0,a=(e=h(e)).length;o<a;o++)Ae(t,e[o],n,r);return this}var xe="_leaflet_events";function Te(t,e,n,r){if("object"===typeof e)for(var i in e)Me(t,i,e[i],n);else if(e)for(var o=0,a=(e=h(e)).length;o<a;o++)Me(t,e[o],n,r);else{for(var s in t[xe])Me(t,s,t[xe][s]);delete t[xe]}return this}function Le(){if(Et)return!(Q||st)}var Ce={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ae(t,e,n,r){var i=e+o(n)+(r?"_"+o(r):"");if(t[xe]&&t[xe][i])return this;var a=function(e){return n.call(r||t,e||window.event)},s=a;Et&&0===e.indexOf("touch")?kt(t,e,a,i):_t&&"dblclick"===e&&!Le()?function(t,e,n){var r,i,o=!1;function a(t){if(Et){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),n=e-(r||e);i=t.touches?t.touches[0]:t,o=n>0&&n<=250,r=e}function s(t){if(o&&!i.cancelBubble){if(Et){if("mouse"===t.pointerType)return;var n,a,s={};for(a in i)n=i[a],s[a]=n&&n.bind?n.bind(i):n;i=s}i.type="dblclick",i.button=0,e(i),r=null}}t[qt+Yt+n]=a,t[qt+Ht+n]=s,t[qt+"dblclick"+n]=e,t.addEventListener(Yt,a,!!xt&&{passive:!1}),t.addEventListener(Ht,s,!!xt&&{passive:!1}),t.addEventListener("dblclick",e,!1)}(t,a,i):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Ce[e]||e,a,!!xt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(a=function(e){e=e||window.event,Ue(t,e)&&s(e)},t.addEventListener(Ce[e],a,!1)):t.addEventListener(e,s,!1):"attachEvent"in t&&t.attachEvent("on"+e,a),t[xe]=t[xe]||{},t[xe][i]=a}function Me(t,e,n,r){var i=e+o(n)+(r?"_"+o(r):""),a=t[xe]&&t[xe][i];if(!a)return this;Et&&0===e.indexOf("touch")?function(t,e,n){var r=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(Rt,r,!1):"touchmove"===e?t.removeEventListener(Ot,r,!1):"touchend"===e&&(t.removeEventListener(Pt,r,!1),t.removeEventListener(It,r,!1))}(t,e,i):_t&&"dblclick"===e&&!Le()?function(t,e){var n=t[qt+Yt+e],r=t[qt+Ht+e],i=t[qt+"dblclick"+e];t.removeEventListener(Yt,n,!!xt&&{passive:!1}),t.removeEventListener(Ht,r,!!xt&&{passive:!1}),t.removeEventListener("dblclick",i,!1)}(t,i):"removeEventListener"in t?t.removeEventListener(Ce[e]||e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[xe][i]=null}function Re(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Be(t),this}function Oe(t){return Ae(t,"wheel",Re),this}function Pe(t){return we(t,"mousedown touchstart dblclick",Re),Ae(t,"click",je),this}function Ie(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ne(t){return Ie(t),Re(t),this}function De(t,e){if(!e)return new O(t.clientX,t.clientY);var n=be(e),r=n.boundingClientRect;return new O((t.clientX-r.left)/n.x-e.clientLeft,(t.clientY-r.top)/n.y-e.clientTop)}var ke=ct&&ot?2*window.devicePixelRatio:at?window.devicePixelRatio:1;function Fe(t){return Q?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/ke:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ve={};function je(t){Ve[t.type]=!0}function Be(t){var e=Ve[t.type];return Ve[t.type]=!1,e}function Ue(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(r){return!1}return n!==t}var Ge={on:we,off:Te,stopPropagation:Re,disableScrollPropagation:Oe,disableClickPropagation:Pe,preventDefault:Ie,stop:Ne,getMousePosition:De,getWheelDelta:Fe,fakeStop:je,skipped:Be,isExternalTarget:Ue,addListener:we,removeListener:Te},Ke=R.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=de(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=x(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),pe(this._el,n),this.fire("step")},_complete:function(){T(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),We=R.extend({options:{crs:z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(j(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Zt&&dt&&!bt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),we(this._proxy,Jt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,r){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(j(t),n,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=e({animate:r.animate},r.zoom),r.pan=e({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,r.zoom):this._tryAnimatedPan(t,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(dt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(dt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),o=(t instanceof O?t:this.latLngToContainerPoint(t)).subtract(i).multiplyBy(1-1/r),a=this.containerPointToLatLng(i.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():F(t);var n=I(e.paddingTopLeft||e.padding||[0,0]),r=I(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));if((i="number"===typeof e.maxZoom?Math.min(e.maxZoom,i):i)===1/0)return{center:t.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i);return{center:this.unproject(a.add(s).divideBy(2).add(o),i),zoom:i}},fitBounds:function(t,e){if(!(t=F(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=I(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ke,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ae(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!dt)return this.setView(t,e,n);this._stop();var r=this.project(this.getCenter()),i=this.project(t),o=this.getSize(),a=this._zoom;t=j(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),u=s*this.getZoomScale(a,e),l=i.distanceTo(r)||1;function c(t){var e=(u*u-s*s+2.0164*(t?-1:1)*2.0164*l*l)/(2*(t?u:s)*2.0164*l),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function h(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var p=c(0);function d(t){return s*(f(p)*(h(e=p+1.42*t)/f(e))-h(p))/2.0164;var e}var g=Date.now(),m=(c(1)-p)/1.42,y=n.duration?1e3*n.duration:1e3*m*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-g)/y,u=function(t){return 1-Math.pow(1-t,1.5)}(o)*m;o<=1?(this._flyToFrame=x(n,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(d(u)/l)),a),this.getScaleZoom(s/function(t){return s*(f(p)/f(p+1.42*t))}(u),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=F(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,F(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=I((e=e||{}).paddingTopLeft||e.padding||[0,0]),r=I(e.paddingBottomRight||e.padding||[0,0]),i=this.getCenter(),o=this.project(i),a=this.project(t),s=this.getPixelBounds(),u=s.getSize().divideBy(2),l=D([s.min.add(n),s.max.subtract(r)]);if(!l.contains(a)){this._enforcingBounds=!0;var c=o.subtract(a),h=I(a.x+c.x,a.y+c.y);(a.x<l.min.x||a.x>l.max.x)&&(h.x=o.x-c.x,c.x>0?h.x+=u.x-n.x:h.x-=u.x-r.x),(a.y<l.min.y||a.y>l.max.y)&&(h.y=o.y-c.y,c.y>0?h.y+=u.y-n.y:h.y-=u.y-r.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=n.divideBy(2).round(),a=i.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,i,t):navigator.geolocation.getCurrentPosition(n,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new V(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(e,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"===typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ee(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(T(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ee(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=te("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new k(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=F(t),n=I(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),l=D(this.project(s,r),this.project(a,r)).getSize(),c=dt?this.options.zoomSnap:1,h=u.x/l.x,f=u.y/l.y,p=e?Math.max(h,f):Math.min(h,f);return r=this.getScaleZoom(p,r),c&&(r=Math.round(r/(c/100))*(c/100),r=e?Math.ceil(r/c)*c:Math.floor(r/c)*c),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new N(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"===typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(j(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(I(t),e)},layerPointToLatLng:function(t){var e=I(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(j(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(j(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(F(t))},distance:function(t,e){return this.options.crs.distance(j(t),j(e))},containerPointToLayerPoint:function(t){return I(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return I(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(I(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(t)))},mouseEventToContainerPoint:function(t){return De(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Qt(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");we(e,"scroll",this._onScroll,this),this._containerId=o(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&dt,ae(t,"leaflet-container"+(_t?" leaflet-touch":"")+(wt?" leaflet-retina":"")+(J?" leaflet-oldie":"")+(st?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=$t(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),pe(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ae(t.markerPane,"leaflet-zoom-hide"),ae(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){pe(this._mapPane,new O(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,!1)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return T(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){pe(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[o(this._container)]=this;var e=t?Te:we;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),dt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){T(this._resizeRequest),this._resizeRequest=x((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],i="mouseout"===e||"mouseover"===e,a=t.target||t.srcElement,s=!1;a;){if((n=this._targets[o(a)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(i&&!Ue(a,t))break;if(r.push(n),i)break}if(a===this._container)break;a=a.parentNode}return r.length||s||i||!Ue(a,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!Be(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||ve(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,r){if("click"===t.type){var i=e({},t);i.type="preclick",this._fireDOMEvent(i,i.type,r)}if(!t._stopped&&(r=(r||[]).concat(this._findEventTargets(t,n))).length){var o=r[0];"contextmenu"===n&&o.listens(n,!0)&&Ie(t);var a={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var u=0;u<r.length;u++)if(r[u].fire(n,a,!0),a.originalEvent._stopped||!1===r[u].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return de(this._mapPane)||new O(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return D([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),o=new N(r.subtract(i),r.add(i)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(r.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new N(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=D(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),o=r.max.subtract(t.max);return new O(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=dt?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){se(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=te("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=Xt,n=this._proxy.style[e];fe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ee(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();fe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i))&&(x((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),!0)},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ae(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&se(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),x((function(){this._moveEnd(!0)}),this))}}),ze=A.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return ae(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ee(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ye=function(t){return new ze(t)};We.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=te("div",e+"control-container",this._container);function r(r,i){var o=e+r+" "+e+i;t[r+i]=te("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ee(this._controlCorners[t]);ee(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var He=ze.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return ze.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(o(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ae(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ae(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):se(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return se(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=te("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Pe(e),Oe(e);var r=this._section=te("section",t+"-list");n&&(this._map.on("click",this.collapse,this),tt||we(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=te("a",t+"-toggle",e);i.href="#",i.title="Layers",_t?(we(i,"click",Ne),we(i,"click",this.expand,this)):we(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=te("div",t+"-base",r),this._separator=te("div",t+"-separator",r),this._overlaysList=te("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(r((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ne(this._baseLayersList),ne(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(o(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers_"+o(this),r),this._layerControlInputs.push(e),e.layerId=o(t.layer),we(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var a=document.createElement("div");return n.appendChild(a),a.appendChild(e),a.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||i.push(e);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),qe=ze.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=te("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var o=te("a",n,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Pe(o),we(o,"click",Ne),we(o,"click",i,this),we(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";se(this._zoomInButton,e),se(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&ae(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&ae(this._zoomInButton,e)}});We.mergeOptions({zoomControl:!0}),We.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new qe,this.addControl(this.zoomControl))}));var Xe=ze.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=te("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=te("div",e,n)),t.imperial&&(this._iScale=te("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Ze=ze.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=te("div","leaflet-control-attribution"),Pe(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});We.mergeOptions({attributionControl:!0}),We.addInitHook((function(){this.options.attributionControl&&(new Ze).addTo(this)})),ze.Layers=He,ze.Zoom=qe,ze.Scale=Xe,ze.Attribution=Ze,Ye.layers=function(t,e,n){return new He(t,e,n)},Ye.zoom=function(t){return new qe(t)},Ye.scale=function(t){return new Xe(t)},Ye.attribution=function(t){return new Ze(t)};var Je=A.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Je.addTo=function(t,e){return t.addHandler(e,this),this};var Qe,$e={Events:M},tn=_t?"touchstart mousedown":"mousedown",en={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},nn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},rn=R.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){f(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(we(this._dragStartTarget,tn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(rn._dragging===this&&this.finishDrag(),Te(this._dragStartTarget,tn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!oe(this._element,"leaflet-zoom-anim")&&!(rn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(rn._dragging=this,this._preventOutline&&ve(this._element),me(),Ut(),!this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t,n=_e(this._element);this._startPoint=new O(e.clientX,e.clientY),this._parentScale=be(n),we(document,nn[t.type],this._onMove,this),we(document,en[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new O(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Ie(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=de(this._element).subtract(n),ae(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ae(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,T(this._animRequest),this._lastEvent=t,this._animRequest=x(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),pe(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in se(document.body,"leaflet-dragging"),this._lastTarget&&(se(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),nn)Te(document,nn[t],this._onMove,this),Te(document,en[t],this._onUp,this);ye(),Gt(),this._moved&&this._moving&&(T(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,rn._dragging=!1}});function on(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,r=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,function t(e,n,r,i,o){var a,s,u,l=0;for(s=i+1;s<=o-1;s++)(u=hn(e[s],e[i],e[o],!0))>l&&(a=s,l=u);l>r&&(n[a]=1,t(e,n,r,i,a),t(e,n,r,a,o))}(t,r,e,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(t[i]);return o}(t=function(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;r<o;r++)cn(t[r],t[i])>e&&(n.push(t[r]),i=r);return i<o-1&&n.push(t[o-1]),n}(t,n),n)}function an(t,e,n){return Math.sqrt(hn(t,e,n,!0))}function sn(t,e,n,r,i){var o,a,s,u=r?Qe:ln(t,n),l=ln(e,n);for(Qe=l;;){if(!(u|l))return[t,e];if(u&l)return!1;s=ln(a=un(t,e,o=u||l,n,i),n),o===u?(t=a,u=s):(e=a,l=s)}}function un(t,e,n,r,i){var o,a,s=e.x-t.x,u=e.y-t.y,l=r.min,c=r.max;return 8&n?(o=t.x+s*(c.y-t.y)/u,a=c.y):4&n?(o=t.x+s*(l.y-t.y)/u,a=l.y):2&n?(o=c.x,a=t.y+u*(c.x-t.x)/s):1&n&&(o=l.x,a=t.y+u*(l.x-t.x)/s),new O(o,a,i)}function ln(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function cn(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function hn(t,e,n,r){var i,o=e.x,a=e.y,s=n.x-o,u=n.y-a,l=s*s+u*u;return l>0&&((i=((t.x-o)*s+(t.y-a)*u)/l)>1?(o=n.x,a=n.y):i>0&&(o+=s*i,a+=u*i)),s=t.x-o,u=t.y-a,r?s*s+u*u:new O(o,a)}function fn(t){return!m(t[0])||"object"!==typeof t[0][0]&&"undefined"!==typeof t[0][0]}function pn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),fn(t)}var dn={simplify:on,pointToSegmentDistance:an,closestPointOnSegment:function(t,e,n){return hn(t,e,n)},clipSegment:sn,_getEdgeIntersection:un,_getBitCode:ln,_sqClosestPointOnSegment:hn,isFlat:fn,_flat:pn};function gn(t,e,n){var r,i,o,a,s,u,l,c,h,f=[1,4,2,8];for(i=0,l=t.length;i<l;i++)t[i]._code=ln(t[i],e);for(a=0;a<4;a++){for(c=f[a],r=[],i=0,o=(l=t.length)-1;i<l;o=i++)s=t[i],u=t[o],s._code&c?u._code&c||((h=un(u,s,c,e,n))._code=ln(h,e),r.push(h)):(u._code&c&&((h=un(u,s,c,e,n))._code=ln(h,e),r.push(h)),r.push(s));t=r}return t}var mn={clipPolygon:gn},yn={project:function(t){return new O(t.lng,t.lat)},unproject:function(t){return new V(t.y,t.x)},bounds:new N([-180,-90],[180,90])},vn={R:6378137,R_MINOR:6356752.314245179,bounds:new N([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),a=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2);return r=-n*Math.log(Math.max(s,1e-10)),new O(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),a=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(a),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=l=Math.PI/2-2*Math.atan(a*e)-s;return new V(s*n,t.x*n/r)}},En={LonLat:yn,Mercator:vn,SphericalMercator:G},_n=e({},U,{code:"EPSG:3395",projection:vn,transformation:function(){var t=.5/(Math.PI*vn.R);return W(t,.5,-t,.5)}()}),bn=e({},U,{code:"EPSG:4326",projection:yn,transformation:W(1/180,1,-1/180,.5)}),Sn=e({},B,{projection:yn,transformation:W(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});B.Earth=U,B.EPSG3395=_n,B.EPSG3857=z,B.EPSG900913=Y,B.EPSG4326=bn,B.Simple=Sn;var wn=R.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});We.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=o(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=o(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&o(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?m(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xn=wn.extend({initialize:function(t,e){var n,r;if(f(this,e),this._layers={},t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"===typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o(t)}}),Tn=xn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),xn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),xn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new k;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Ln=A.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"===typeof r&&(r=[r,r]);var i=I(r),o=I("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return wt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Cn=Ln.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Cn.imagePath||(Cn.imagePath=this._detectIconPath()),(this.options.imagePath||Cn.imagePath)+Ln.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=te("div","leaflet-default-icon-path",document.body),e=$t(t,"background-image")||$t(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),An=Je.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new rn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ae(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&se(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=de(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),u=D(a.min._subtract(s).add(i),a.max._subtract(s).subtract(i));if(!u.contains(o)){var l=I((Math.max(u.max.x,o.x)-u.max.x)/(a.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(a.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(a.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(a.min.y-u.min.y)).multiplyBy(r);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),pe(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=x(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(T(this._panRequest),this._panRequest=x(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=de(e._icon),i=e._map.layerPointToLatLng(r);n&&pe(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){T(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Mn=wn.extend({options:{icon:new Cn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){f(this,e),this._latlng=j(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),ae(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(ae(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ee(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ee(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&pe(this._icon,t),this._shadow&&pe(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ae(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),An)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new An(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ce(this._icon,t),this._shadow&&ce(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Rn=wn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),On=Rn.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=j(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Rn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new N(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Pn=On.extend({initialize:function(t,n,r){if("number"===typeof n&&(n=e({},r,{radius:n})),f(this,n),this._latlng=j(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new k(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Rn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===U.distance){var i=Math.PI/180,o=this._mRadius/U.R/i,a=n.project([e+o,t]),s=n.project([e-o,t]),u=a.add(s).divideBy(2),l=n.unproject(u).lat,c=Math.acos((Math.cos(o*i)-Math.sin(e*i)*Math.sin(l*i))/(Math.cos(e*i)*Math.cos(l*i)))/i;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:u.x-n.project([l,t-c]).x,this._radiusY=u.y-a.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),In=Rn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,o=hn,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],l=1,c=u.length;l<c;l++){var h=o(t,e=u[l-1],n=u[l],!0);h<r&&(r=h,i=o(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s=this._rings[0],u=s.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,r=0;t<u-1;t++)if(i=s[t],o=s[t+1],(r+=n=i.distanceTo(o))>e)return a=(r-e)/n,this._map.layerPointToLatLng([o.x-a*(o.x-i.x),o.y-a*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=j(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new k,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return fn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=fn(t),r=0,i=t.length;r<i;r++)n?(e[r]=j(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new O(t,t);this._pxBounds=new N([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var r,i,o=t[0]instanceof V,a=t.length;if(o){for(i=[],r=0;r<a;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<a;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,r,i,o,a,s,u=this._parts;for(e=0,r=0,i=this._rings.length;e<i;e++)for(n=0,o=(s=this._rings[e]).length;n<o-1;n++)(a=sn(s[n],s[n+1],t,n,!0))&&(u[r]=u[r]||[],u[r].push(a[0]),a[1]===s[n+1]&&n!==o-2||(u[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=on(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,i,o,a,s,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(a=(s=this._parts[n]).length)-1;r<a;i=r++)if((e||0!==r)&&an(t,s[i],s[r])<=u)return!0;return!1}});In._flat=pn;var Nn=In.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s,u,l=this._rings[0],c=l.length;if(!c)return null;for(o=a=s=0,t=0,e=c-1;t<c;e=t++)n=l[t],r=l[e],i=n.y*r.x-r.y*n.x,a+=(n.x+r.x)*i,s+=(n.y+r.y)*i,o+=3*i;return u=0===o?l[0]:[a/o,s/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=In.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof V&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){In.prototype._setLatLngs.call(this,t),fn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return fn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new O(e,e);if(t=new N(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=gn(this._rings[i],t,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,r,i,o,a,s,u,l=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(o=0,a=(u=(e=this._parts[i]).length)-1;o<u;a=o++)n=e[o],r=e[a],n.y>t.y!==r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(l=!l);return l||In.prototype._containsPoint.call(this,t,!0)}}),Dn=Tn.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=m(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((r=i[e]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=kn(t,o);return a?(a.feature=Kn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"===typeof e&&(e=e(t.feature)),t.setStyle(e))}});function kn(t,e){var n,r,i,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],l=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Vn;if(!s&&!a)return null;switch(a.type){case"Point":return Fn(l,t,n=c(s),e);case"MultiPoint":for(i=0,o=s.length;i<o;i++)n=c(s[i]),u.push(Fn(l,t,n,e));return new Tn(u);case"LineString":case"MultiLineString":return r=jn(s,"LineString"===a.type?0:1,c),new In(r,e);case"Polygon":case"MultiPolygon":return r=jn(s,"Polygon"===a.type?1:2,c),new Nn(r,e);case"GeometryCollection":for(i=0,o=a.geometries.length;i<o;i++){var h=kn({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new Tn(u);default:throw new Error("Invalid GeoJSON object.")}}function Fn(t,e,n,r){return t?t(e,n):new Mn(n,r&&r.markersInheritOptions&&r)}function Vn(t){return new V(t[1],t[0],t[2])}function jn(t,e,n){for(var r,i=[],o=0,a=t.length;o<a;o++)r=e?jn(t[o],e-1,n):(n||Vn)(t[o]),i.push(r);return i}function Bn(t,e){return e="number"===typeof e?e:6,void 0!==t.alt?[l(t.lng,e),l(t.lat,e),l(t.alt,e)]:[l(t.lng,e),l(t.lat,e)]}function Un(t,e,n,r){for(var i=[],o=0,a=t.length;o<a;o++)i.push(e?Un(t[o],e-1,n,r):Bn(t[o],r));return!e&&n&&i.push(i[0]),i}function Gn(t,n){return t.feature?e({},t.feature,{geometry:n}):Kn(n)}function Kn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Wn={toGeoJSON:function(t){return Gn(this,{type:"Point",coordinates:Bn(this.getLatLng(),t)})}};function zn(t,e){return new Dn(t,e)}Mn.include(Wn),Pn.include(Wn),On.include(Wn),In.include({toGeoJSON:function(t){var e=!fn(this._latlngs);return Gn(this,{type:(e?"Multi":"")+"LineString",coordinates:Un(this._latlngs,e?1:0,!1,t)})}}),Nn.include({toGeoJSON:function(t){var e=!fn(this._latlngs),n=e&&!fn(this._latlngs[0]),r=Un(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),Gn(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),xn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Gn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,r=[];return this.eachLayer((function(e){if(e.toGeoJSON){var i=e.toGeoJSON(t);if(n)r.push(i.geometry);else{var o=Kn(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}})),n?Gn(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Yn=zn,Hn=wn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=F(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ae(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ee(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&re(this._image),this},bringToBack:function(){return this._map&&ie(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=F(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:te("img");ae(e,"leaflet-image-layer"),this._zoomAnimated&&ae(e,"leaflet-zoom-animated"),this.options.className&&ae(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;fe(this._image,n,e)},_reset:function(){var t=this._image,e=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();pe(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){ce(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),qn=Hn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:te("video");if(ae(e,"leaflet-image-layer"),this._zoomAnimated&&ae(e,"leaflet-zoom-animated"),this.options.className&&ae(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onloadeddata=r(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],o=0;o<n.length;o++)i.push(n[o].src);this._url=n.length>0?i:[e.src]}else{m(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var a=0;a<this._url.length;a++){var s=te("source");s.src=this._url[a],e.appendChild(s)}}}}),Xn=Hn.extend({_initImage:function(){var t=this._image=this._url;ae(t,"leaflet-image-layer"),this._zoomAnimated&&ae(t,"leaflet-zoom-animated"),this.options.className&&ae(t,this.options.className),t.onselectstart=u,t.onmousemove=u}}),Zn=wn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){f(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ce(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ce(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(ce(this._container,0),this._removeTimeout=setTimeout(r(ee,void 0,this._container),200)):ee(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=j(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&re(this._container),this},bringToBack:function(){return this._map&&ie(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof wn||(n=e,e=t),e instanceof Tn)for(var r in t._layers){e=t._layers[r];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=I(this.options.offset),n=this._getAnchor();this._zoomAnimated?pe(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),Jn=Zn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Zn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Rn||this._source.on("preclick",Re))},onRemove:function(t){Zn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Rn||this._source.off("preclick",Re))},getEvents:function(){var t=Zn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=te("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=te("div",t+"-content-wrapper",e);if(this._contentNode=te("div",t+"-content",n),Pe(e),Oe(this._contentNode),we(e,"contextmenu",Re),this._tipContainer=te("div",t+"-tip-container",e),this._tip=te("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=te("a",t+"-close-button",e);r.href="#close",r.innerHTML="&#215;",we(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight;i&&r>i?(e.height=i+"px",ae(t,"leaflet-popup-scrolled")):se(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();pe(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt($t(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,i=new O(this._containerLeft,-n-this._containerBottom);i._add(de(this._container));var o=t.layerPointToContainerPoint(i),a=I(this.options.autoPanPadding),s=I(this.options.autoPanPaddingTopLeft||a),u=I(this.options.autoPanPaddingBottomRight||a),l=t.getSize(),c=0,h=0;o.x+r+u.x>l.x&&(c=o.x+r-l.x+u.x),o.x-c-s.x<0&&(c=o.x-s.x),o.y+n+u.y>l.y&&(h=o.y+n-l.y+u.y),o.y-h-s.y<0&&(h=o.y-s.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),Ne(t)},_getAnchor:function(){return I(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});We.mergeOptions({closePopupOnClick:!0}),We.include({openPopup:function(t,e,n){return t instanceof Jn||(t=new Jn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),wn.include({bindPopup:function(t,e){return t instanceof Jn?(f(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Jn(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Ne(t),e instanceof Rn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Qn=Zn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Zn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Zn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Zn.prototype.getEvents.call(this);return _t&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=te("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,r=this._map,i=this._container,o=r.latLngToContainerPoint(r.getCenter()),a=r.layerPointToContainerPoint(t),s=this.options.direction,u=i.offsetWidth,l=i.offsetHeight,c=I(this.options.offset),h=this._getAnchor();"top"===s?(e=u/2,n=l):"bottom"===s?(e=u/2,n=0):"center"===s?(e=u/2,n=l/2):"right"===s?(e=0,n=l/2):"left"===s?(e=u,n=l/2):a.x<o.x?(s="right",e=0,n=l/2):(s="left",e=u+2*(c.x+h.x),n=l/2),t=t.subtract(I(e,n,!0)).add(c).add(h),se(i,"leaflet-tooltip-right"),se(i,"leaflet-tooltip-left"),se(i,"leaflet-tooltip-top"),se(i,"leaflet-tooltip-bottom"),ae(i,"leaflet-tooltip-"+s),pe(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ce(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return I(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});We.include({openTooltip:function(t,e,n){return t instanceof Qn||(t=new Qn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),wn.include({bindTooltip:function(t,e){return t instanceof Qn?(f(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Qn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),_t&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(ae(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(se(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var $n=Ln.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ne(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=I(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Ln.Default=Cn;var tr=wn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:gt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ee(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(re(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ie(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof O?t:new O(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-1/0,1/0),i=0,o=n.length;i<o;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!J){ce(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(t-i.loaded)/200);ce(i.el,o),o<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(T(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=te("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ee(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||((r=this._levels[t]={}).el=te("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ee(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new O(+i,+o);s.z=+a;var u=this._tileCoordsToKey(s),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),a>r&&this._retainParent(i,o,a,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var a=new O(i,o);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var i=Math.round(e);i=void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom?void 0:this._clampZoom(i);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();dt?fe(t.el,i,r):pe(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new N(i.subtract(o),i.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),o=i.getCenter(),a=[],s=this.options.keepBuffer,u=new N(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&u.contains(new O(c.x,c.y))||(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=i.min.y;h<=i.max.y;h++)for(var f=i.min.x;f<=i.max.x;f++){var p=new O(f,h);if(p.z=this._tileZoom,this._isValidTile(p)){var d=this._tiles[this._tileCoordsToKey(p)];d?d.current=!0:a.push(p)}}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var g=document.createDocumentFragment();for(f=0;f<a.length;f++)this._addTile(a[f],g);this._level.el.appendChild(g)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return F(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n);return[e.unproject(r,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new k(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new O(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ee(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ae(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=u,t.onmousemove=u,J&&this.options.opacity<1&&ce(t,this.options.opacity),tt&&!et&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&x(r(this._tileReady,this,t,null,o)),pe(o,n),this._tiles[i]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(ce(n.el,0),T(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(ae(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),J||!this._map._fadeAnimated?x(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new O(this._wrapX?s(t.x,this._wrapX):t.x,this._wrapY?s(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new N(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),er=tr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&wt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"===typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),tt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return we(n,"load",r(this._tileOnLoad,this,e,n)),we(n,"error",r(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n={r:wt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=r),n["-y"]=r}return g(this._url,e(n,this.options))},_tileOnLoad:function(t,e){J?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=u,e.onerror=u,e.complete||(e.src=v,ee(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return rt||e.el.setAttribute("src",v),tr.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==v))return tr.prototype._tileReady.call(this,t,e,n)}});function nr(t,e){return new er(t,e)}var rr=er.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var r=e({},this.defaultWmsParams);for(var i in n)i in this.options||(r[i]=n[i]);var o=(n=f(this,n)).detectRetina&&wt?2:1,a=this.getTileSize();r.width=a.x*o,r.height=a.y*o,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,er.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=D(n.project(e[0]),n.project(e[1])),i=r.min,o=r.max,a=(this._wmsVersion>=1.3&&this._crs===bn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),s=er.prototype.getTileUrl.call(this,t);return s+p(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});er.WMS=rr,nr.wms=function(t,e){return new rr(t,e)};var ir=wn.extend({options:{padding:.1,tolerance:0},initialize:function(t){f(this,t),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ae(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=de(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=i.multiplyBy(-n).add(r).add(i).subtract(a);dt?fe(this._container,s,n):pe(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new N(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),or=ir.extend({getEvents:function(){var t=ir.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ir.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");we(t,"mousemove",this._onMouseMove,this),we(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),we(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest),delete this._ctx,ee(this._container),Te(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ir.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=wt?2:1;pe(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",wt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ir.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[o(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[o(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"===typeof t.options.dashArray){var e,n,r=t.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(e=Number(r[n]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||x(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,o,a=t._parts,s=a.length,u=this._ctx;if(s){for(u.beginPath(),n=0;n<s;n++){for(r=0,i=a[n].length;r<i;r++)o=a[n][r],u[r?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(n=e);n&&(je(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(se(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,i,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(ae(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(r((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function ar(t){return Tt?new or(t):null}var sr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),ur={_initContainer:function(){this._container=te("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ir.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=sr("shape");ae(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=sr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ee(e),t.removeInteractiveTarget(e),delete this._layers[o(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e||(e=t._stroke=sr("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=m(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=sr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){re(t._container)},_bringToBack:function(t){ie(t._container)}},lr=Ct?sr:H,cr=ir.extend({getEvents:function(){var t=ir.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=lr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=lr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ee(this._container),Te(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ir.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),pe(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=lr("path");t.options.className&&ae(e,t.options.className),t.options.interactive&&ae(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ee(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,q(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){re(t._path)},_bringToBack:function(t){ie(t._path)}});function hr(t){return Lt||Ct?new cr(t):null}Ct&&cr.include(ur),We.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ar(t)||hr(t)}});var fr=Nn.extend({initialize:function(t,e){Nn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=F(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});cr.create=lr,cr.pointsToPath=q,Dn.geometryToLayer=kn,Dn.coordsToLatLng=Vn,Dn.coordsToLatLngs=jn,Dn.latLngToCoords=Bn,Dn.latLngsToCoords=Un,Dn.getFeature=Gn,Dn.asFeature=Kn,We.mergeOptions({boxZoom:!0});var pr=Je.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){we(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ee(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Ut(),me(),this._startPoint=this._map.mouseEventToContainerPoint(t),we(document,{contextmenu:Ne,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=te("div","leaflet-zoom-box",this._container),ae(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new N(this._point,this._startPoint),n=e.getSize();pe(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ee(this._box),se(this._container,"leaflet-crosshair")),Gt(),ye(),Te(document,{contextmenu:Ne,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var e=new k(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});We.addInitHook("addHandler","boxZoom",pr),We.mergeOptions({doubleClickZoom:!0});var dr=Je.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});We.addInitHook("addHandler","doubleClickZoom",dr),We.mergeOptions({dragging:!0,inertia:!et,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gr=Je.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new rn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ae(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){se(this._map._container,"leaflet-grab"),se(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=F(this._map.options.maxBounds);this._offsetLimit=D(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/o),u=s.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,u),c=s.multiplyBy(l/u),h=l/(n.inertiaDeceleration*a),f=c.multiplyBy(-h/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),x((function(){e.panBy(f,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});We.addInitHook("addHandler","dragging",gr),We.mergeOptions({keyboard:!0,keyboardPanDelta:80});var mr=Je.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),we(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Te(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){we(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys)r._panAnim&&r._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=I(e).multiplyBy(3)),r.panBy(e),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds));else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Ne(t)}}});We.addInitHook("addHandler","keyboard",mr),We.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var yr=Je.extend({addHooks:function(){we(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Te(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Fe(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),Ne(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});We.addInitHook("addHandler","scrollWheelZoom",yr),We.mergeOptions({tap:!0,tapTolerance:15});var vr=Je.extend({addHooks:function(){we(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Ie(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new O(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&ae(n,"leaflet-active"),this._holdTimeout=setTimeout(r((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),we(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Te(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&se(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new O(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});!_t||Et&&!st||We.addInitHook("addHandler","tap",vr),We.mergeOptions({touchZoom:_t&&!et,bounceAtZoomLimits:!0});var Er=Je.extend({addHooks:function(){ae(this._map._container,"leaflet-touch-zoom"),we(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){se(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),we(document,"touchmove",this._onTouchMove,this),we(document,"touchend",this._onTouchEnd,this),Ie(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),T(this._animRequest);var s=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=x(s,this,!0),Ie(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,T(this._animRequest),Te(document,"touchmove",this._onTouchMove,this),Te(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});We.addInitHook("addHandler","touchZoom",Er),We.BoxZoom=pr,We.DoubleClickZoom=dr,We.Drag=gr,We.Keyboard=mr,We.ScrollWheelZoom=yr,We.Tap=vr,We.TouchZoom=Er,t.version="1.7.1",t.Control=ze,t.control=Ye,t.Browser=Mt,t.Evented=R,t.Mixin=$e,t.Util=C,t.Class=A,t.Handler=Je,t.extend=e,t.bind=r,t.stamp=o,t.setOptions=f,t.DomEvent=Ge,t.DomUtil=Se,t.PosAnimation=Ke,t.Draggable=rn,t.LineUtil=dn,t.PolyUtil=mn,t.Point=O,t.point=I,t.Bounds=N,t.bounds=D,t.Transformation=K,t.transformation=W,t.Projection=En,t.LatLng=V,t.latLng=j,t.LatLngBounds=k,t.latLngBounds=F,t.CRS=B,t.GeoJSON=Dn,t.geoJSON=zn,t.geoJson=Yn,t.Layer=wn,t.LayerGroup=xn,t.layerGroup=function(t,e){return new xn(t,e)},t.FeatureGroup=Tn,t.featureGroup=function(t,e){return new Tn(t,e)},t.ImageOverlay=Hn,t.imageOverlay=function(t,e,n){return new Hn(t,e,n)},t.VideoOverlay=qn,t.videoOverlay=function(t,e,n){return new qn(t,e,n)},t.SVGOverlay=Xn,t.svgOverlay=function(t,e,n){return new Xn(t,e,n)},t.DivOverlay=Zn,t.Popup=Jn,t.popup=function(t,e){return new Jn(t,e)},t.Tooltip=Qn,t.tooltip=function(t,e){return new Qn(t,e)},t.Icon=Ln,t.icon=function(t){return new Ln(t)},t.DivIcon=$n,t.divIcon=function(t){return new $n(t)},t.Marker=Mn,t.marker=function(t,e){return new Mn(t,e)},t.TileLayer=er,t.tileLayer=nr,t.GridLayer=tr,t.gridLayer=function(t){return new tr(t)},t.SVG=cr,t.svg=hr,t.Renderer=ir,t.Canvas=or,t.canvas=ar,t.Path=Rn,t.CircleMarker=On,t.circleMarker=function(t,e){return new On(t,e)},t.Circle=Pn,t.circle=function(t,e,n){return new Pn(t,e,n)},t.Polyline=In,t.polyline=function(t,e){return new In(t,e)},t.Polygon=Nn,t.polygon=function(t,e){return new Nn(t,e)},t.Rectangle=fr,t.rectangle=function(t,e){return new fr(t,e)},t.Map=We,t.map=function(t,e){return new We(t,e)};var _r=window.L;t.noConflict=function(){return window.L=_r,this},window.L=t}(e)},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"a",(function(){return r}))},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){t.exports=function(){"use strict";for(var t=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t<e?e:t>n?n:t},e={},n=0,r=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];n<r.length;n+=1){var i=r[n];e["[object "+i+"]"]=i.toLowerCase()}var o=function(t){return e[Object.prototype.toString.call(t)]||"object"},a=Math.PI,s={clip_rgb:function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var n=0;n<=3;n++)n<3?((e[n]<0||e[n]>255)&&(e._clipped=!0),e[n]=t(e[n],0,255)):3===n&&(e[n]=t(e[n],0,1));return e},limit:t,type:o,unpack:function(t,e){return void 0===e&&(e=null),t.length>=3?Array.prototype.slice.call(t):"object"==o(t[0])&&e?e.split("").filter((function(e){return void 0!==t[0][e]})).map((function(e){return t[0][e]})):t[0]},last:function(t){if(t.length<2)return null;var e=t.length-1;return"string"==o(t[e])?t[e].toLowerCase():null},PI:a,TWOPI:2*a,PITHIRD:a/3,DEG2RAD:a/180,RAD2DEG:180/a},u={format:{},autodetect:[]},l=s.last,c=s.clip_rgb,h=s.type,f=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=this;if("object"===h(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var r=l(t),i=!1;if(!r){i=!0,u.sorted||(u.autodetect=u.autodetect.sort((function(t,e){return e.p-t.p})),u.sorted=!0);for(var o=0,a=u.autodetect;o<a.length;o+=1){var s=a[o];if(r=s.test.apply(s,t))break}}if(!u.format[r])throw new Error("unknown format: "+t);var f=u.format[r].apply(null,i?t:t.slice(0,-1));n._rgb=c(f),3===n._rgb.length&&n._rgb.push(1)};f.prototype.toString=function(){return"function"==h(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var p=f,d=function t(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return new(Function.prototype.bind.apply(t.Color,[null].concat(e)))};d.Color=p,d.version="2.1.0";var g=d,m=s.unpack,y=Math.max,v=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=m(t,"rgb"),r=n[0],i=n[1],o=n[2],a=1-y(r/=255,y(i/=255,o/=255)),s=a<1?1/(1-a):0,u=(1-r-a)*s,l=(1-i-a)*s,c=(1-o-a)*s;return[u,l,c,a]},E=s.unpack,_=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=E(t,"cmyk"))[0],r=t[1],i=t[2],o=t[3],a=t.length>4?t[4]:1;return 1===o?[0,0,0,a]:[n>=1?0:255*(1-n)*(1-o),r>=1?0:255*(1-r)*(1-o),i>=1?0:255*(1-i)*(1-o),a]},b=s.unpack,S=s.type;p.prototype.cmyk=function(){return v(this._rgb)},g.cmyk=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["cmyk"])))},u.format.cmyk=_,u.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=b(t,"cmyk"),"array"===S(t)&&4===t.length)return"cmyk"}});var w=s.unpack,x=s.last,T=function(t){return Math.round(100*t)/100},L=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=w(t,"hsla"),r=x(t)||"lsa";return n[0]=T(n[0]||0),n[1]=T(100*n[1])+"%",n[2]=T(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},C=s.unpack,A=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=C(t,"rgba"))[0],r=t[1],i=t[2];n/=255,r/=255,i/=255;var o,a,s=Math.min(n,r,i),u=Math.max(n,r,i),l=(u+s)/2;return u===s?(o=0,a=Number.NaN):o=l<.5?(u-s)/(u+s):(u-s)/(2-u-s),n==u?a=(r-i)/(u-s):r==u?a=2+(i-n)/(u-s):i==u&&(a=4+(n-r)/(u-s)),(a*=60)<0&&(a+=360),t.length>3&&void 0!==t[3]?[a,o,l,t[3]]:[a,o,l]},M=s.unpack,R=s.last,O=Math.round,P=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=M(t,"rgba"),r=R(t)||"rgb";return"hsl"==r.substr(0,3)?L(A(n),r):(n[0]=O(n[0]),n[1]=O(n[1]),n[2]=O(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")},I=s.unpack,N=Math.round,D=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];var r,i,o,a=(e=I(e,"hsl"))[0],s=e[1],u=e[2];if(0===s)r=i=o=255*u;else{var l=[0,0,0],c=[0,0,0],h=u<.5?u*(1+s):u+s-u*s,f=2*u-h,p=a/360;l[0]=p+1/3,l[1]=p,l[2]=p-1/3;for(var d=0;d<3;d++)l[d]<0&&(l[d]+=1),l[d]>1&&(l[d]-=1),6*l[d]<1?c[d]=f+6*(h-f)*l[d]:2*l[d]<1?c[d]=h:3*l[d]<2?c[d]=f+(h-f)*(2/3-l[d])*6:c[d]=f;r=(t=[N(255*c[0]),N(255*c[1]),N(255*c[2])])[0],i=t[1],o=t[2]}return e.length>3?[r,i,o,e[3]]:[r,i,o,1]},k=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,F=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,V=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,j=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,B=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,U=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,G=Math.round,K=function(t){var e;if(t=t.toLowerCase().trim(),u.format.named)try{return u.format.named(t)}catch(g){}if(e=t.match(k)){for(var n=e.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}if(e=t.match(F)){for(var i=e.slice(1,5),o=0;o<4;o++)i[o]=+i[o];return i}if(e=t.match(V)){for(var a=e.slice(1,4),s=0;s<3;s++)a[s]=G(2.55*a[s]);return a[3]=1,a}if(e=t.match(j)){for(var l=e.slice(1,5),c=0;c<3;c++)l[c]=G(2.55*l[c]);return l[3]=+l[3],l}if(e=t.match(B)){var h=e.slice(1,4);h[1]*=.01,h[2]*=.01;var f=D(h);return f[3]=1,f}if(e=t.match(U)){var p=e.slice(1,4);p[1]*=.01,p[2]*=.01;var d=D(p);return d[3]=+e[4],d}};K.test=function(t){return k.test(t)||F.test(t)||V.test(t)||j.test(t)||B.test(t)||U.test(t)};var W=K,z=s.type;p.prototype.css=function(t){return P(this._rgb,t)},g.css=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["css"])))},u.format.css=W,u.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===z(t)&&W.test(t))return"css"}});var Y=s.unpack;u.format.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Y(t,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},g.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["gl"])))},p.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var H=s.unpack,q=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=H(t,"rgb"),i=r[0],o=r[1],a=r[2],s=Math.min(i,o,a),u=Math.max(i,o,a),l=u-s,c=100*l/255,h=s/(255-l)*100;return 0===l?n=Number.NaN:(i===u&&(n=(o-a)/l),o===u&&(n=2+(a-i)/l),a===u&&(n=4+(i-o)/l),(n*=60)<0&&(n+=360)),[n,c,h]},X=s.unpack,Z=Math.floor,J=function(){for(var t,e,n,r,i,o,a=[],s=arguments.length;s--;)a[s]=arguments[s];var u,l,c,h=(a=X(a,"hcg"))[0],f=a[1],p=a[2];p*=255;var d=255*f;if(0===f)u=l=c=p;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var g=Z(h/=60),m=h-g,y=p*(1-f),v=y+d*(1-m),E=y+d*m,_=y+d;switch(g){case 0:u=(t=[_,E,y])[0],l=t[1],c=t[2];break;case 1:u=(e=[v,_,y])[0],l=e[1],c=e[2];break;case 2:u=(n=[y,_,E])[0],l=n[1],c=n[2];break;case 3:u=(r=[y,v,_])[0],l=r[1],c=r[2];break;case 4:u=(i=[E,y,_])[0],l=i[1],c=i[2];break;case 5:u=(o=[_,y,v])[0],l=o[1],c=o[2]}}return[u,l,c,a.length>3?a[3]:1]},Q=s.unpack,$=s.type;p.prototype.hcg=function(){return q(this._rgb)},g.hcg=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hcg"])))},u.format.hcg=J,u.autodetect.push({p:1,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Q(t,"hcg"),"array"===$(t)&&3===t.length)return"hcg"}});var tt=s.unpack,et=s.last,nt=Math.round,rt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=tt(t,"rgba"),r=n[0],i=n[1],o=n[2],a=n[3],s=et(t)||"auto";void 0===a&&(a=1),"auto"===s&&(s=a<1?"rgba":"rgb");var u=(r=nt(r))<<16|(i=nt(i))<<8|(o=nt(o)),l="000000"+u.toString(16);l=l.substr(l.length-6);var c="0"+nt(255*a).toString(16);switch(c=c.substr(c.length-2),s.toLowerCase()){case"rgba":return"#"+l+c;case"argb":return"#"+c+l;default:return"#"+l}},it=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,ot=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,at=function(t){if(t.match(it)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(ot)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var n=parseInt(t,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+t)},st=s.type;p.prototype.hex=function(t){return rt(this._rgb,t)},g.hex=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hex"])))},u.format.hex=at,u.autodetect.push({p:4,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===st(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var ut=s.unpack,lt=s.TWOPI,ct=Math.min,ht=Math.sqrt,ft=Math.acos,pt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=ut(t,"rgb"),i=r[0],o=r[1],a=r[2],s=ct(i/=255,o/=255,a/=255),u=(i+o+a)/3,l=u>0?1-s/u:0;return 0===l?n=NaN:(n=(i-o+(i-a))/2,n/=ht((i-o)*(i-o)+(i-a)*(o-a)),n=ft(n),a>o&&(n=lt-n),n/=lt),[360*n,l,u]},dt=s.unpack,gt=s.limit,mt=s.TWOPI,yt=s.PITHIRD,vt=Math.cos,Et=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,i,o=(t=dt(t,"hsi"))[0],a=t[1],s=t[2];return isNaN(o)&&(o=0),isNaN(a)&&(a=0),o>360&&(o-=360),o<0&&(o+=360),(o/=360)<1/3?r=1-((i=(1-a)/3)+(n=(1+a*vt(mt*o)/vt(yt-mt*o))/3)):o<2/3?i=1-((n=(1-a)/3)+(r=(1+a*vt(mt*(o-=1/3))/vt(yt-mt*o))/3)):n=1-((r=(1-a)/3)+(i=(1+a*vt(mt*(o-=2/3))/vt(yt-mt*o))/3)),[255*(n=gt(s*n*3)),255*(r=gt(s*r*3)),255*(i=gt(s*i*3)),t.length>3?t[3]:1]},_t=s.unpack,bt=s.type;p.prototype.hsi=function(){return pt(this._rgb)},g.hsi=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hsi"])))},u.format.hsi=Et,u.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=_t(t,"hsi"),"array"===bt(t)&&3===t.length)return"hsi"}});var St=s.unpack,wt=s.type;p.prototype.hsl=function(){return A(this._rgb)},g.hsl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hsl"])))},u.format.hsl=D,u.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=St(t,"hsl"),"array"===wt(t)&&3===t.length)return"hsl"}});var xt=s.unpack,Tt=Math.min,Lt=Math.max,Ct=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,i,o=(t=xt(t,"rgb"))[0],a=t[1],s=t[2],u=Tt(o,a,s),l=Lt(o,a,s),c=l-u;return i=l/255,0===l?(n=Number.NaN,r=0):(r=c/l,o===l&&(n=(a-s)/c),a===l&&(n=2+(s-o)/c),s===l&&(n=4+(o-a)/c),(n*=60)<0&&(n+=360)),[n,r,i]},At=s.unpack,Mt=Math.floor,Rt=function(){for(var t,e,n,r,i,o,a=[],s=arguments.length;s--;)a[s]=arguments[s];var u,l,c,h=(a=At(a,"hsv"))[0],f=a[1],p=a[2];if(p*=255,0===f)u=l=c=p;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var d=Mt(h/=60),g=h-d,m=p*(1-f),y=p*(1-f*g),v=p*(1-f*(1-g));switch(d){case 0:u=(t=[p,v,m])[0],l=t[1],c=t[2];break;case 1:u=(e=[y,p,m])[0],l=e[1],c=e[2];break;case 2:u=(n=[m,p,v])[0],l=n[1],c=n[2];break;case 3:u=(r=[m,y,p])[0],l=r[1],c=r[2];break;case 4:u=(i=[v,m,p])[0],l=i[1],c=i[2];break;case 5:u=(o=[p,m,y])[0],l=o[1],c=o[2]}}return[u,l,c,a.length>3?a[3]:1]},Ot=s.unpack,Pt=s.type;p.prototype.hsv=function(){return Ct(this._rgb)},g.hsv=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hsv"])))},u.format.hsv=Rt,u.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Ot(t,"hsv"),"array"===Pt(t)&&3===t.length)return"hsv"}});var It=18,Nt=.95047,Dt=1,kt=1.08883,Ft=.137931034,Vt=.206896552,jt=.12841855,Bt=.008856452,Ut=s.unpack,Gt=Math.pow,Kt=function(t){return(t/=255)<=.04045?t/12.92:Gt((t+.055)/1.055,2.4)},Wt=function(t){return t>Bt?Gt(t,1/3):t/jt+Ft},zt=function(t,e,n){return t=Kt(t),e=Kt(e),n=Kt(n),[Wt((.4124564*t+.3575761*e+.1804375*n)/Nt),Wt((.2126729*t+.7151522*e+.072175*n)/Dt),Wt((.0193339*t+.119192*e+.9503041*n)/kt)]},Yt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Ut(t,"rgb"),r=n[0],i=n[1],o=n[2],a=zt(r,i,o),s=a[0],u=a[1],l=a[2],c=116*u-16;return[c<0?0:c,500*(s-u),200*(u-l)]},Ht=s.unpack,qt=Math.pow,Xt=function(t){return 255*(t<=.00304?12.92*t:1.055*qt(t,1/2.4)-.055)},Zt=function(t){return t>Vt?t*t*t:jt*(t-Ft)},Jt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,i,o=(t=Ht(t,"lab"))[0],a=t[1],s=t[2];return r=(o+16)/116,n=isNaN(a)?r:r+a/500,i=isNaN(s)?r:r-s/200,r=Dt*Zt(r),n=Nt*Zt(n),i=kt*Zt(i),[Xt(3.2404542*n-1.5371385*r-.4985314*i),Xt(-.969266*n+1.8760108*r+.041556*i),Xt(.0556434*n-.2040259*r+1.0572252*i),t.length>3?t[3]:1]},Qt=s.unpack,$t=s.type;p.prototype.lab=function(){return Yt(this._rgb)},g.lab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["lab"])))},u.format.lab=Jt,u.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Qt(t,"lab"),"array"===$t(t)&&3===t.length)return"lab"}});var te=s.unpack,ee=s.RAD2DEG,ne=Math.sqrt,re=Math.atan2,ie=Math.round,oe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=te(t,"lab"),r=n[0],i=n[1],o=n[2],a=ne(i*i+o*o),s=(re(o,i)*ee+360)%360;return 0===ie(1e4*a)&&(s=Number.NaN),[r,a,s]},ae=s.unpack,se=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=ae(t,"rgb"),r=n[0],i=n[1],o=n[2],a=Yt(r,i,o),s=a[0],u=a[1],l=a[2];return oe(s,u,l)},ue=s.unpack,le=s.DEG2RAD,ce=Math.sin,he=Math.cos,fe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=ue(t,"lch"),r=n[0],i=n[1],o=n[2];return isNaN(o)&&(o=0),[r,he(o*=le)*i,ce(o)*i]},pe=s.unpack,de=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=pe(t,"lch"))[0],r=t[1],i=t[2],o=fe(n,r,i),a=o[0],s=o[1],u=o[2],l=Jt(a,s,u),c=l[0],h=l[1],f=l[2];return[c,h,f,t.length>3?t[3]:1]},ge=s.unpack,me=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=ge(t,"hcl").reverse();return de.apply(void 0,n)},ye=s.unpack,ve=s.type;p.prototype.lch=function(){return se(this._rgb)},p.prototype.hcl=function(){return se(this._rgb).reverse()},g.lch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["lch"])))},g.hcl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["hcl"])))},u.format.lch=de,u.format.hcl=me,["lch","hcl"].forEach((function(t){return u.autodetect.push({p:2,test:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(e=ye(e,t),"array"===ve(e)&&3===e.length)return t}})}));var Ee={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},_e=s.type;p.prototype.name=function(){for(var t=rt(this._rgb,"rgb"),e=0,n=Object.keys(Ee);e<n.length;e+=1){var r=n[e];if(Ee[r]===t)return r.toLowerCase()}return t},u.format.named=function(t){if(t=t.toLowerCase(),Ee[t])return at(Ee[t]);throw new Error("unknown color name: "+t)},u.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===_e(t)&&Ee[t.toLowerCase()])return"named"}});var be=s.unpack,Se=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=be(t,"rgb"),r=n[0],i=n[1],o=n[2];return(r<<16)+(i<<8)+o},we=s.type,xe=function(t){if("number"==we(t)&&t>=0&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw new Error("unknown num color: "+t)},Te=s.type;p.prototype.num=function(){return Se(this._rgb)},g.num=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["num"])))},u.format.num=xe,u.autodetect.push({p:5,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(1===t.length&&"number"===Te(t[0])&&t[0]>=0&&t[0]<=16777215)return"num"}});var Le=s.unpack,Ce=s.type,Ae=Math.round;p.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Ae)},p.prototype.rgba=function(t){return void 0===t&&(t=!0),this._rgb.slice(0,4).map((function(e,n){return n<3?!1===t?e:Ae(e):e}))},g.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["rgb"])))},u.format.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Le(t,"rgba");return void 0===n[3]&&(n[3]=1),n},u.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Le(t,"rgba"),"array"===Ce(t)&&(3===t.length||4===t.length&&"number"==Ce(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});var Me=Math.log,Re=function(t){var e,n,r,i=t/100;return i<66?(e=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*Me(n),r=i<20?0:.8274096064007395*(r=i-10)-254.76935184120902+115.67994401066147*Me(r)):(e=351.97690566805693+.114206453784165*(e=i-55)-40.25366309332127*Me(e),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*Me(n),r=255),[e,n,r,1]},Oe=s.unpack,Pe=Math.round,Ie=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n,r=Oe(t,"rgb"),i=r[0],o=r[2],a=1e3,s=4e4,u=.4;s-a>u;){var l=Re(n=.5*(s+a));l[2]/l[0]>=o/i?s=n:a=n}return Pe(n)};p.prototype.temp=p.prototype.kelvin=p.prototype.temperature=function(){return Ie(this._rgb)},g.temp=g.kelvin=g.temperature=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p,[null].concat(t,["temp"])))},u.format.temp=u.format.kelvin=u.format.temperature=Re;var Ne=s.type;p.prototype.alpha=function(t,e){return void 0===e&&(e=!1),void 0!==t&&"number"===Ne(t)?e?(this._rgb[3]=t,this):new p([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},p.prototype.clipped=function(){return this._rgb._clipped||!1},p.prototype.darken=function(t){void 0===t&&(t=1);var e=this.lab();return e[0]-=It*t,new p(e,"lab").alpha(this.alpha(),!0)},p.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},p.prototype.darker=p.prototype.darken,p.prototype.brighter=p.prototype.brighten,p.prototype.get=function(t){var e=t.split("."),n=e[0],r=e[1],i=this[n]();if(r){var o=n.indexOf(r);if(o>-1)return i[o];throw new Error("unknown channel "+r+" in mode "+n)}return i};var De=s.type,ke=Math.pow;p.prototype.luminance=function(t){if(void 0!==t&&"number"===De(t)){if(0===t)return new p([0,0,0,this._rgb[3]],"rgb");if(1===t)return new p([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),n=20,r=function e(r,i){var o=r.interpolate(i,.5,"rgb"),a=o.luminance();return Math.abs(t-a)<1e-7||!n--?o:a>t?e(r,o):e(o,i)},i=(e>t?r(new p([0,0,0]),this):r(this,new p([255,255,255]))).rgb();return new p(i.concat([this._rgb[3]]))}return Fe.apply(void 0,this._rgb.slice(0,3))};var Fe=function(t,e,n){return.2126*(t=Ve(t))+.7152*(e=Ve(e))+.0722*(n=Ve(n))},Ve=function(t){return(t/=255)<=.03928?t/12.92:ke((t+.055)/1.055,2.4)},je={},Be=s.type,Ue=function(t,e,n){void 0===n&&(n=.5);for(var r=[],i=arguments.length-3;i-- >0;)r[i]=arguments[i+3];var o=r[0]||"lrgb";if(je[o]||r.length||(o=Object.keys(je)[0]),!je[o])throw new Error("interpolation mode "+o+" is not defined");return"object"!==Be(t)&&(t=new p(t)),"object"!==Be(e)&&(e=new p(e)),je[o](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))};p.prototype.mix=p.prototype.interpolate=function(t,e){void 0===e&&(e=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return Ue.apply(void 0,[this,t,e].concat(n))},p.prototype.premultiply=function(t){void 0===t&&(t=!1);var e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new p([e[0]*n,e[1]*n,e[2]*n,n],"rgb")},p.prototype.saturate=function(t){void 0===t&&(t=1);var e=this.lch();return e[1]+=It*t,e[1]<0&&(e[1]=0),new p(e,"lch").alpha(this.alpha(),!0)},p.prototype.desaturate=function(t){return void 0===t&&(t=1),this.saturate(-t)};var Ge=s.type;p.prototype.set=function(t,e,n){void 0===n&&(n=!1);var r=t.split("."),i=r[0],o=r[1],a=this[i]();if(o){var s=i.indexOf(o);if(s>-1){if("string"==Ge(e))switch(e.charAt(0)){case"+":case"-":a[s]+=+e;break;case"*":a[s]*=+e.substr(1);break;case"/":a[s]/=+e.substr(1);break;default:a[s]=+e}else{if("number"!==Ge(e))throw new Error("unsupported value for Color.set");a[s]=e}var u=new p(a,i);return n?(this._rgb=u._rgb,this):u}throw new Error("unknown channel "+o+" in mode "+i)}return a},je.rgb=function(t,e,n){var r=t._rgb,i=e._rgb;return new p(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"rgb")};var Ke=Math.sqrt,We=Math.pow;je.lrgb=function(t,e,n){var r=t._rgb,i=r[0],o=r[1],a=r[2],s=e._rgb,u=s[0],l=s[1],c=s[2];return new p(Ke(We(i,2)*(1-n)+We(u,2)*n),Ke(We(o,2)*(1-n)+We(l,2)*n),Ke(We(a,2)*(1-n)+We(c,2)*n),"rgb")},je.lab=function(t,e,n){var r=t.lab(),i=e.lab();return new p(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"lab")};var ze=function(t,e,n,r){var i,o,a,s,u,l,c,h,f,d,g,m;return"hsl"===r?(a=t.hsl(),s=e.hsl()):"hsv"===r?(a=t.hsv(),s=e.hsv()):"hcg"===r?(a=t.hcg(),s=e.hcg()):"hsi"===r?(a=t.hsi(),s=e.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",a=t.hcl(),s=e.hcl()),"h"===r.substr(0,1)&&(u=(i=a)[0],c=i[1],f=i[2],l=(o=s)[0],h=o[1],d=o[2]),isNaN(u)||isNaN(l)?isNaN(u)?isNaN(l)?m=Number.NaN:(m=l,1!=f&&0!=f||"hsv"==r||(g=h)):(m=u,1!=d&&0!=d||"hsv"==r||(g=c)):m=u+n*(l>u&&l-u>180?l-(u+360):l<u&&u-l>180?l+360-u:l-u),void 0===g&&(g=c+n*(h-c)),new p([m,g,f+n*(d-f)],r)},Ye=function(t,e,n){return ze(t,e,n,"lch")};je.lch=Ye,je.hcl=Ye,je.num=function(t,e,n){var r=t.num(),i=e.num();return new p(r+n*(i-r),"num")},je.hcg=function(t,e,n){return ze(t,e,n,"hcg")},je.hsi=function(t,e,n){return ze(t,e,n,"hsi")},je.hsl=function(t,e,n){return ze(t,e,n,"hsl")},je.hsv=function(t,e,n){return ze(t,e,n,"hsv")};var He=s.clip_rgb,qe=Math.pow,Xe=Math.sqrt,Ze=Math.PI,Je=Math.cos,Qe=Math.sin,$e=Math.atan2,tn=function(t,e){for(var n=t.length,r=[0,0,0,0],i=0;i<t.length;i++){var o=t[i],a=e[i]/n,s=o._rgb;r[0]+=qe(s[0],2)*a,r[1]+=qe(s[1],2)*a,r[2]+=qe(s[2],2)*a,r[3]+=s[3]*a}return r[0]=Xe(r[0]),r[1]=Xe(r[1]),r[2]=Xe(r[2]),r[3]>.9999999&&(r[3]=1),new p(He(r))},en=s.type,nn=Math.pow,rn=function(t){var e="rgb",n=g("#ccc"),r=0,i=[0,1],o=[],a=[0,0],s=!1,u=[],l=!1,c=0,h=1,f=!1,p={},d=!0,m=1,y=function(t){if((t=t||["#fff","#000"])&&"string"===en(t)&&g.brewer&&g.brewer[t.toLowerCase()]&&(t=g.brewer[t.toLowerCase()]),"array"===en(t)){1===t.length&&(t=[t[0],t[0]]),t=t.slice(0);for(var e=0;e<t.length;e++)t[e]=g(t[e]);o.length=0;for(var n=0;n<t.length;n++)o.push(n/(t.length-1))}return b(),u=t},v=function(t){return t},E=function(t){return t},_=function(t,r){var i,l;if(null==r&&(r=!1),isNaN(t)||null===t)return n;l=r?t:s&&s.length>2?function(t){if(null!=s){for(var e=s.length-1,n=0;n<e&&t>=s[n];)n++;return n-1}return 0}(t)/(s.length-2):h!==c?(t-c)/(h-c):1,l=E(l),r||(l=v(l)),1!==m&&(l=nn(l,m)),l=a[0]+l*(1-a[0]-a[1]),l=Math.min(1,Math.max(0,l));var f=Math.floor(1e4*l);if(d&&p[f])i=p[f];else{if("array"===en(u))for(var y=0;y<o.length;y++){var _=o[y];if(l<=_){i=u[y];break}if(l>=_&&y===o.length-1){i=u[y];break}if(l>_&&l<o[y+1]){l=(l-_)/(o[y+1]-_),i=g.interpolate(u[y],u[y+1],l,e);break}}else"function"===en(u)&&(i=u(l));d&&(p[f]=i)}return i},b=function(){return p={}};y(t);var S=function(t){var e=g(_(t));return l&&e[l]?e[l]():e};return S.classes=function(t){if(null!=t){if("array"===en(t))s=t,i=[t[0],t[t.length-1]];else{var e=g.analyze(i);s=0===t?[e.min,e.max]:g.limits(e,"e",t)}return S}return s},S.domain=function(t){if(!arguments.length)return i;c=t[0],h=t[t.length-1],o=[];var e=u.length;if(t.length===e&&c!==h)for(var n=0,r=Array.from(t);n<r.length;n+=1){var a=r[n];o.push((a-c)/(h-c))}else{for(var s=0;s<e;s++)o.push(s/(e-1));if(t.length>2){var l=t.map((function(e,n){return n/(t.length-1)})),f=t.map((function(t){return(t-c)/(h-c)}));f.every((function(t,e){return l[e]===t}))||(E=function(t){if(t<=0||t>=1)return t;for(var e=0;t>=f[e+1];)e++;var n=(t-f[e])/(f[e+1]-f[e]);return l[e]+n*(l[e+1]-l[e])})}}return i=[c,h],S},S.mode=function(t){return arguments.length?(e=t,b(),S):e},S.range=function(t,e){return y(t),S},S.out=function(t){return l=t,S},S.spread=function(t){return arguments.length?(r=t,S):r},S.correctLightness=function(t){return null==t&&(t=!0),f=t,b(),v=f?function(t){for(var e=_(0,!0).lab()[0],n=_(1,!0).lab()[0],r=e>n,i=_(t,!0).lab()[0],o=e+(n-e)*t,a=i-o,s=0,u=1,l=20;Math.abs(a)>.01&&l-- >0;)r&&(a*=-1),a<0?(s=t,t+=.5*(u-t)):(u=t,t+=.5*(s-t)),i=_(t,!0).lab()[0],a=i-o;return t}:function(t){return t},S},S.padding=function(t){return null!=t?("number"===en(t)&&(t=[t,t]),a=t,S):a},S.colors=function(e,n){arguments.length<2&&(n="hex");var r=[];if(0===arguments.length)r=u.slice(0);else if(1===e)r=[S(.5)];else if(e>1){var o=i[0],a=i[1]-o;r=on(0,e,!1).map((function(t){return S(o+t/(e-1)*a)}))}else{t=[];var l=[];if(s&&s.length>2)for(var c=1,h=s.length,f=1<=h;f?c<h:c>h;f?c++:c--)l.push(.5*(s[c-1]+s[c]));else l=i;r=l.map((function(t){return S(t)}))}return g[n]&&(r=r.map((function(t){return t[n]()}))),r},S.cache=function(t){return null!=t?(d=t,S):d},S.gamma=function(t){return null!=t?(m=t,S):m},S.nodata=function(t){return null!=t?(n=g(t),S):n},S};function on(t,e,n){for(var r=[],i=t<e,o=n?i?e+1:e-1:e,a=t;i?a<o:a>o;i?a++:a--)r.push(a);return r}var an=function t(e){var n,r,i,o,a,s,u;if(2===(e=e.map((function(t){return new p(t)}))).length)n=e.map((function(t){return t.lab()})),a=n[0],s=n[1],o=function(t){var e=[0,1,2].map((function(e){return a[e]+t*(s[e]-a[e])}));return new p(e,"lab")};else if(3===e.length)r=e.map((function(t){return t.lab()})),a=r[0],s=r[1],u=r[2],o=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*a[e]+2*(1-t)*t*s[e]+t*t*u[e]}));return new p(e,"lab")};else if(4===e.length){var l;i=e.map((function(t){return t.lab()})),a=i[0],s=i[1],u=i[2],l=i[3],o=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*(1-t)*a[e]+3*(1-t)*(1-t)*t*s[e]+3*(1-t)*t*t*u[e]+t*t*t*l[e]}));return new p(e,"lab")}}else if(5===e.length){var c=t(e.slice(0,3)),h=t(e.slice(2,5));o=function(t){return t<.5?c(2*t):h(2*(t-.5))}}return o},sn=function t(e,n,r){if(!t[r])throw new Error("unknown blend mode "+r);return t[r](e,n)},un=function(t){return function(e,n){var r=g(n).rgb(),i=g(e).rgb();return g.rgb(t(r,i))}},ln=function(t){return function(e,n){var r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r}};sn.normal=un(ln((function(t){return t}))),sn.multiply=un(ln((function(t,e){return t*e/255}))),sn.screen=un(ln((function(t,e){return 255*(1-(1-t/255)*(1-e/255))}))),sn.overlay=un(ln((function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))}))),sn.darken=un(ln((function(t,e){return t>e?e:t}))),sn.lighten=un(ln((function(t,e){return t>e?t:e}))),sn.dodge=un(ln((function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t}))),sn.burn=un(ln((function(t,e){return 255*(1-(1-e/255)/(t/255))})));for(var cn=sn,hn=s.type,fn=s.clip_rgb,pn=s.TWOPI,dn=Math.pow,gn=Math.sin,mn=Math.cos,yn=Math.floor,vn=Math.random,En=Math.log,_n=Math.pow,bn=Math.floor,Sn=Math.abs,wn=function(t,e){void 0===e&&(e=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===o(t)&&(t=Object.values(t)),t.forEach((function(t){e&&"object"===o(t)&&(t=t[e]),void 0===t||null===t||isNaN(t)||(n.values.push(t),n.sum+=t,t<n.min&&(n.min=t),t>n.max&&(n.max=t),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(t,e){return xn(n,t,e)},n},xn=function(t,e,n){void 0===e&&(e="equal"),void 0===n&&(n=7),"array"==o(t)&&(t=wn(t));var r=t.min,i=t.max,a=t.values.sort((function(t,e){return t-e}));if(1===n)return[r,i];var s=[];if("c"===e.substr(0,1)&&(s.push(r),s.push(i)),"e"===e.substr(0,1)){s.push(r);for(var u=1;u<n;u++)s.push(r+u/n*(i-r));s.push(i)}else if("l"===e.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var l=Math.LOG10E*En(r),c=Math.LOG10E*En(i);s.push(r);for(var h=1;h<n;h++)s.push(_n(10,l+h/n*(c-l)));s.push(i)}else if("q"===e.substr(0,1)){s.push(r);for(var f=1;f<n;f++){var p=(a.length-1)*f/n,d=bn(p);if(d===p)s.push(a[d]);else{var g=p-d;s.push(a[d]*(1-g)+a[d+1]*g)}}s.push(i)}else if("k"===e.substr(0,1)){var m,y=a.length,v=new Array(y),E=new Array(n),_=!0,b=0,S=null;(S=[]).push(r);for(var w=1;w<n;w++)S.push(r+w/n*(i-r));for(S.push(i);_;){for(var x=0;x<n;x++)E[x]=0;for(var T=0;T<y;T++)for(var L=a[T],C=Number.MAX_VALUE,A=void 0,M=0;M<n;M++){var R=Sn(S[M]-L);R<C&&(C=R,A=M),E[A]++,v[T]=A}for(var O=new Array(n),P=0;P<n;P++)O[P]=null;for(var I=0;I<y;I++)null===O[m=v[I]]?O[m]=a[I]:O[m]+=a[I];for(var N=0;N<n;N++)O[N]*=1/E[N];_=!1;for(var D=0;D<n;D++)if(O[D]!==S[D]){_=!0;break}S=O,++b>200&&(_=!1)}for(var k={},F=0;F<n;F++)k[F]=[];for(var V=0;V<y;V++)k[m=v[V]].push(a[V]);for(var j=[],B=0;B<n;B++)j.push(k[B][0]),j.push(k[B][k[B].length-1]);j=j.sort((function(t,e){return t-e})),s.push(j[0]);for(var U=1;U<j.length;U+=2){var G=j[U];isNaN(G)||-1!==s.indexOf(G)||s.push(G)}}return s},Tn={analyze:wn,limits:xn},Ln=Math.sqrt,Cn=Math.atan2,An=Math.abs,Mn=Math.cos,Rn=Math.PI,On={cool:function(){return rn([g.hsl(180,1,.9),g.hsl(250,.7,.4)])},hot:function(){return rn(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Pn={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},In=0,Nn=Object.keys(Pn);In<Nn.length;In+=1){var Dn=Nn[In];Pn[Dn.toLowerCase()]=Pn[Dn]}var kn=Pn;return g.average=function(t,e,n){void 0===e&&(e="lrgb"),void 0===n&&(n=null);var r=t.length;n||(n=Array.from(new Array(r)).map((function(){return 1})));var i=r/n.reduce((function(t,e){return t+e}));if(n.forEach((function(t,e){n[e]*=i})),t=t.map((function(t){return new p(t)})),"lrgb"===e)return tn(t,n);for(var o=t.shift(),a=o.get(e),s=[],u=0,l=0,c=0;c<a.length;c++)if(a[c]=(a[c]||0)*n[0],s.push(isNaN(a[c])?0:n[0]),"h"===e.charAt(c)&&!isNaN(a[c])){var h=a[c]/180*Ze;u+=Je(h)*n[0],l+=Qe(h)*n[0]}var f=o.alpha()*n[0];t.forEach((function(t,r){var i=t.get(e);f+=t.alpha()*n[r+1];for(var o=0;o<a.length;o++)if(!isNaN(i[o]))if(s[o]+=n[r+1],"h"===e.charAt(o)){var c=i[o]/180*Ze;u+=Je(c)*n[r+1],l+=Qe(c)*n[r+1]}else a[o]+=i[o]*n[r+1]}));for(var d=0;d<a.length;d++)if("h"===e.charAt(d)){for(var g=$e(l/s[d],u/s[d])/Ze*180;g<0;)g+=360;for(;g>=360;)g-=360;a[d]=g}else a[d]=a[d]/s[d];return f/=r,new p(a,e).alpha(f>.99999?1:f,!0)},g.bezier=function(t){var e=an(t);return e.scale=function(){return rn(e)},e},g.blend=cn,g.cubehelix=function(t,e,n,r,i){void 0===t&&(t=300),void 0===e&&(e=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=[0,1]);var o,a=0;"array"===hn(i)?o=i[1]-i[0]:(o=0,i=[i,i]);var s=function(s){var u=pn*((t+120)/360+e*s),l=dn(i[0]+o*s,r),c=(0!==a?n[0]+s*a:n)*l*(1-l)/2,h=mn(u),f=gn(u);return g(fn([255*(l+c*(-.14861*h+1.78277*f)),255*(l+c*(-.29227*h-.90649*f)),255*(l+c*(1.97294*h)),1]))};return s.start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?r:(r=t,s)},s.hue=function(t){return null==t?n:("array"===hn(n=t)?0===(a=n[1]-n[0])&&(n=n[1]):a=0,s)},s.lightness=function(t){return null==t?i:("array"===hn(t)?(i=t,o=t[1]-t[0]):(i=[t,t],o=0),s)},s.scale=function(){return g.scale(s)},s.hue(n),s},g.mix=g.interpolate=Ue,g.random=function(){for(var t="#",e=0;e<6;e++)t+="0123456789abcdef".charAt(yn(16*vn()));return new p(t,"hex")},g.scale=rn,g.analyze=Tn.analyze,g.contrast=function(t,e){t=new p(t),e=new p(e);var n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},g.deltaE=function(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=1),t=new p(t),e=new p(e);for(var i=Array.from(t.lab()),o=i[0],a=i[1],s=i[2],u=Array.from(e.lab()),l=u[0],c=u[1],h=u[2],f=Ln(a*a+s*s),d=Ln(c*c+h*h),g=o<16?.511:.040975*o/(1+.01765*o),m=.0638*f/(1+.0131*f)+.638,y=f<1e-6?0:180*Cn(s,a)/Rn;y<0;)y+=360;for(;y>=360;)y-=360;var v=y>=164&&y<=345?.56+An(.2*Mn(Rn*(y+168)/180)):.36+An(.4*Mn(Rn*(y+35)/180)),E=f*f*f*f,_=Ln(E/(E+1900)),b=m*(_*v+1-_),S=f-d,w=a-c,x=s-h,T=(o-l)/(n*g),L=S/(r*m);return Ln(T*T+L*L+(w*w+x*x-S*S)/(b*b))},g.distance=function(t,e,n){void 0===n&&(n="lab"),t=new p(t),e=new p(e);var r=t.get(n),i=e.get(n),o=0;for(var a in r){var s=(r[a]||0)-(i[a]||0);o+=s*s}return Math.sqrt(o)},g.limits=Tn.limits,g.valid=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return new(Function.prototype.bind.apply(p,[null].concat(t))),!0}catch(n){return!1}},g.scales=On,g.colors=Ee,g.brewer=kn,g}()},function(t,e,n){(function(e){t.exports=function(){var n,r,i;!function(t){function e(t,e){return E.call(t,e)}function o(t,e){var n,r,i,o,a,s,u,l,c,h,f,p=e&&e.split("/"),d=y.map,g=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(p=p.slice(0,p.length-1),a=(t=t.split("/")).length-1,y.nodeIdCompat&&b.test(t[a])&&(t[a]=t[a].replace(b,"")),t=p.concat(t),c=0;c<t.length;c+=1)if("."===(f=t[c]))t.splice(c,1),c-=1;else if(".."===f){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||g)&&d){for(c=(n=t.split("/")).length;c>0;c-=1){if(r=n.slice(0,c).join("/"),p)for(h=p.length;h>0;h-=1)if((i=d[p.slice(0,h).join("/")])&&(i=i[r])){o=i,s=c;break}if(o)break;!u&&g&&g[r]&&(u=g[r],l=c)}!o&&u&&(o=u,s=l),o&&(n.splice(0,s,o),t=n.join("/"))}return t}function a(e,n){return function(){var r=_.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),f.apply(t,r.concat([e,n]))}}function s(t){return function(e){g[t]=e}}function u(n){if(e(m,n)){var r=m[n];delete m[n],v[n]=!0,h.apply(t,r)}if(!e(g,n)&&!e(v,n))throw new Error("No "+n);return g[n]}function l(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function c(t){return function(){return y&&y.config&&y.config[t]||{}}}var h,f,p,d,g={},m={},y={},v={},E=Object.prototype.hasOwnProperty,_=[].slice,b=/\.js$/;p=function(t,e){var n,r=l(t),i=r[0];return t=r[1],i&&(n=u(i=o(i,e))),i?t=n&&n.normalize?n.normalize(t,function(t){return function(e){return o(e,t)}}(e)):o(t,e):(i=(r=l(t=o(t,e)))[0],t=r[1],i&&(n=u(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:n}},d={require:function(t){return a(t)},exports:function(t){var e=g[t];return"undefined"!=typeof e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:c(t)}}},h=function(n,r,i,o){var l,c,h,f,y,E,_=[],b=typeof i;if(o=o||n,"undefined"===b||"function"===b){for(r=!r.length&&i.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(f=p(r[y],o),"require"===(c=f.f))_[y]=d.require(n);else if("exports"===c)_[y]=d.exports(n),E=!0;else if("module"===c)l=_[y]=d.module(n);else if(e(g,c)||e(m,c)||e(v,c))_[y]=u(c);else{if(!f.p)throw new Error(n+" missing "+c);f.p.load(f.n,a(o,!0),s(c),{}),_[y]=g[c]}h=i?i.apply(g[n],_):void 0,n&&(l&&l.exports!==t&&l.exports!==g[n]?g[n]=l.exports:h===t&&E||(g[n]=h))}else n&&(g[n]=i)},n=r=f=function(e,n,r,i,o){if("string"==typeof e)return d[e]?d[e](n):u(p(e,n).f);if(!e.splice){if((y=e).deps&&f(y.deps,y.callback),!n)return;n.splice?(e=n,n=r,r=null):e=t}return n=n||function(){},"function"==typeof r&&(r=i,i=o),i?h(t,e,n,r):setTimeout((function(){h(t,e,n,r)}),4),f},f.config=function(t){return f(t)},n._defined=g,(i=function(t,n,r){n.splice||(r=n,n=[]),e(g,t)||e(m,t)||(m[t]=[t,n,r])}).amd={jQuery:!0}}(),i("../tools/almond",(function(){})),i("formats/aaigrid/AAIGridConstants",[],(function(){"use strict";return{N_COLS:"ncols",N_ROWS:"nrows",X_LL_CORNER:"xllcorner",Y_LL_CORNER:"yllcorner",CELL_SIZE:"cellsize",NO_DATA_VALUE:"NODATA_value"}})),i("formats/aaigrid/AAIGridMetadata",[],(function(){"use strict";var t=function(){this._ncols=null,this._nrows=null,this._xllcorner=null,this._yllcorner=null,this._cellsize=null,this._NODATA_value=void 0};return Object.defineProperties(t.prototype,{ncols:{get:function(){return this._ncols},set:function(t){this._ncols=t}},nrows:{get:function(){return this._nrows},set:function(t){this._nrows=t}},xllcorner:{get:function(){return this._xllcorner},set:function(t){this._xllcorner=t}},yllcorner:{get:function(){return this._yllcorner},set:function(t){this._yllcorner=t}},cellsize:{get:function(){return this._cellsize},set:function(t){this._cellsize=t}},NODATA_value:{get:function(){return this._NODATA_value},set:function(t){this._NODATA_value=t}}}),t})),i("error/AbstractError",[],(function(){"use strict";var t=function(t,e){this.name=t,this.message=e};return t.prototype.toString=function(){var t=this.name+": "+this.message;return this.stack&&(t+="\n"+this.stack.toString()),t},t})),i("error/ArgumentError",["../error/AbstractError"],(function(t){"use strict";var e=function(e){var n;t.call(this,"ArgumentError",e);try{throw new Error}catch(t){n=t.stack}this.stack=n};return e.prototype=Object.create(t.prototype),e})),i("util/Logger",[],(function(){"use strict";var t={LEVEL_NONE:0,LEVEL_SEVERE:1,LEVEL_WARNING:2,LEVEL_INFO:3,setLoggingLevel:function(t){e=t},getLoggingLevel:function(){return e},log:function(n,r){r&&n>0&&n<=e&&(n===t.LEVEL_SEVERE?console.error(r):n===t.LEVEL_WARNING?console.warn(r):n===t.LEVEL_INFO?console.info(r):console.log(r))},makeMessage:function(t,e,n){return t+"."+e+": "+(this.messageTable[n]?this.messageTable[n]:n)},logMessage:function(t,e,n,r){var i=this.makeMessage(e,n,r);return this.log(t,i),i},messageTable:{abstractInvocation:"The function called is abstract and must be overridden in a subclass.",indexOutOfRange:"The specified index is out of range.",invalidColumn:"The specified column is out of range.",invalidHeight:"The specified height is zero or negative.",invalidWidth:"The specified width is zero or negative.",invalidRow:"The specified row is out of range.",invalidSize:"The specified size is zero or negative.",missingAltitudeMode:"The specified altitude mode is null or undefined.",missingArrayBuffer:"The specified array buffer is null or undefined",missingAttributeName:"The specified DBase attribute file name is null or undefined.",missingArray:"The specified array is null, undefined or of insufficient length.",missingBoundaries:"The specified boundaries array is null or undefined.",missingBuffer:"The specified buffer descriptor is null or undefined.",missingColor:"The specified color is null or undefined.",missingConfig:"The specified config is null or undefined.",missingDc:"The specified draw context is null or undefined.",missingDomElement:"The specified DOM element is null or undefined.",missingEntry:"The specified entry is null or undefined.",missingFont:"The specified font is null or undefined.",missingFrustum:"The specified frustum is null or undefined.",missingFunction:"The specified function is null or undefined.",missingGlContext:"The specified WebGL rendering context is null or undefined.",missingGlobe:"The specified globe is null or undefined.",missingId:"The specified id is null or undefined.",missingImage:"The specified image is null or undefined.",missingImageFormat:"The specified image format is null or undefined.",missingIndices:"The specified indices array is null or undefined.",missingKey:"The specified key is null or undefined.",missingLevel:"The specified level is null or undefined.",missingLine:"The specified line is null or undefined.",missingList:"The specified list is null or undefined.",missingListener:"The specified listener is null or undefined",missingLocation:"The specified location is null or undefined.",missingMatrix:"The specified matrix is null or undefined.",missingOffset:"The specified offset is null or undefined.",missingPath:"The specified path is null or undefined.",missingPlacename:"The specified place name is null or undefined.",missingPlane:"The specified plane is null or undefined.",missingPoint:"The specified point is null or undefined.",missingPoints:"The specified points array is null or undefined.",missingPosition:"The specified position is null or undefined.",missingPositions:"The specified positions array is null or undefined.",missingProgram:"The specified program is null or undefined.",missingProjection:"The specified projection is null or undefined.",missingRectangle:"The specified rectangle is null or undefined.",missingRenderable:"The specified renderable is null or undefined.",missingResolution:"The specified resolution is null, undefined, or zero.",missingResource:"The specified resource is null or undefined.",missingResult:"The specified result variable is null or undefined.",missingResults:"The specified results array is null or undefined.",missingSector:"The specified sector is null or undefined.",missingShapeType:"The specified shape type is null or undefined.",missingSize:"The specified size is null or undefined.",missingText:"The specified text is null or undefined.",missingTexture:"The specified texture is null or undefined.",missingTile:"The specified tile is null or undefined.",missingType:"The specified type is null or undefined.",missingUrl:"The specified URL is null or undefined",missingVector:"The specified vector is null or undefined.",missingVertex:"The specified vertex is null or undefined.",missingViewport:"The specified viewport is null or undefined.",missingWebCoverageService:"The specified WebCoverageService is null or undefined.",missingWorldWindow:"The specified WorldWindow is null or undefined.",notYetImplemented:"This function is not yet implemented",unsupportedVersion:"The specified version is not supported.",webglNotSupported:"The browser does not support WebGL, or WebGL is disabled."}},e=1;return t})),i("formats/aaigrid/AAIGridReader",["./AAIGridConstants","./AAIGridMetadata","../../error/ArgumentError","../../util/Logger"],(function(t,e,n,r){"use strict";var i=function(t){if(!t)throw new n(r.logMessage(r.LEVEL_SEVERE,"AAIGridReader","constructor","missingDataSource"));if("string"!=typeof t&&!(t instanceof ArrayBuffer))throw new n(r.logMessage(r.LEVEL_SEVERE,"AAIGridReader","constructor","invalidDataSource"));this._values=null,this._metadata=new e;var i=this.decodeData(t);this.parse(i)};return Object.defineProperties(i.prototype,{metadata:{get:function(){return this._metadata}}}),i.prototype.getImageData=function(){return this._values},i.prototype.decodeData=function(t){if("string"!=typeof t&&!(t instanceof ArrayBuffer))throw new n(r.logMessage(r.LEVEL_SEVERE,"AAIGridReader","decodeData","invalidDataSource"));if("string"==typeof t)return t;if("function"==typeof window.TextDecoder)return new TextDecoder("utf-8").decode(t);for(var e="",i=new Uint8Array(t),o=65535,a=0,s=i.length;a<s;a+=o)a+o>s&&(o=s-a),e+=String.fromCharCode.apply(null,i.subarray(a,a+o));return e},i.prototype.parse=function(e){if("string"!=typeof e)throw new n(r.logMessage(r.LEVEL_SEVERE,"AAIGridReader","parse","invalidDataString"));for(var i=e.replace(/\r?\n|\r/g,"\n").split("\n"),o=[],a=!0,s=0,u=i.length;s<u;s++){var l=i[s];if(l){var c=l.trim().split(" ").map((function(t){return t.trim()})).filter((function(t){return""!==t}));if(c[0]===t.N_COLS)this.metadata.ncols=+c[1];else if(c[0]===t.N_ROWS)this.metadata.nrows=+c[1];else if(c[0]===t.X_LL_CORNER)this.metadata.xllcorner=+c[1];else if(c[0]===t.Y_LL_CORNER)this.metadata.yllcorner=+c[1];else if(c[0]===t.CELL_SIZE)this.metadata.cellsize=+c[1];else if(c[0]===t.NO_DATA_VALUE)this.metadata.NODATA_value=+c[1];else if(isFinite(+c[0])){var h=c.map((function(t){var e=+t;return Math.floor(e)!==e&&(a=!1),e}));o=o.concat(h)}}}this._values=a?new Int16Array(o):new Float32Array(o)},i.retrieveFromUrl=function(t,e){if(!t)throw new n(r.logMessage(r.LEVEL_SEVERE,"AAIGridReader","retrieveFromUrl","missingUrl"));if(!e)throw new n(r.logMessage(r.LEVEL_SEVERE,"AAIGridReader","retrieveFromUrl","The specified callback is null or undefined."));var o=new XMLHttpRequest;o.onload=function(){this.status>=200&&this.status<300?e(new i(this.response),o):(r.log(r.LEVEL_WARNING,"AAIGrid retrieval failed ("+o.statusText+"): "+t),e(null,o))},o.onerror=function(){r.log(r.LEVEL_WARNING,"AAIGrid retrieval failed: "+t),e(null,o)},o.ontimeout=function(){r.log(r.LEVEL_WARNING,"AAIGrid retrieval timed out: "+t),e(null,o)},o.open("GET",t,!0),o.responseType="arraybuffer",o.send(null)},i})),i("geom/Angle",[],(function(){"use strict";return{DEGREES_TO_RADIANS:Math.PI/180,RADIANS_TO_DEGREES:180/Math.PI,TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,normalizedDegrees:function(t){var e=t%360;return e>180?e-360:e<-180?360+e:e},normalizedDegreesLatitude:function(t){var e=t%180;return e>90?180-e:e<-90?-180-e:e},normalizedDegreesLongitude:function(t){var e=t%360;return e>180?e-360:e<-180?360+e:e},normalizedRadians:function(t){var e=t%this.TWO_PI;return e>Math.PI?e-this.TWO_PI:e<-Math.PI?this.TWO_PI+e:e},normalizedRadiansLatitude:function(t){var e=t%Math.PI;return e>this.HALF_PI?Math.PI-e:e<-this.HALF_PI?-Math.PI-e:e},normalizedRadiansLongitude:function(t){var e=t%this.TWO_PI;return e>Math.PI?e-this.TWO_PI:e<-Math.PI?this.TWO_PI+e:e},isValidLatitude:function(t){return t>=-90&&t<=90},isValidLongitude:function(t){return t>=-180&&t<=180},toString:function(t){return t.toString()+"\xb0"},toDecimalDegreesString:function(t){return t.toString()+"\xb0"},toDMSString:function(t){var e,n,r,i,o;return n=60*((n=60*((n=(e=t<0?-1:1)*t)-(r=Math.floor(n))))-(i=Math.floor(n))),60==(o=Math.round(n))&&(i++,o=0),60==i&&(r++,i=0),(-1==e?"-":"")+r+"\xb0 "+i+"\u2019 "+o+"\u201d"},toDMString:function(t){var e,n,r,i,o;return n=60*((n=60*((n=(e=t<0?-1:1)*t)-(r=Math.floor(n))))-(i=Math.floor(n))),60==(o=Math.round(n))&&(i++,o=0),60==i&&(r++,i=0),(-1==e?"-":"")+r+"\xb0 "+(0==o?i:i+o/60)+"\u2019"}}})),i("util/Color",["../util/Logger"],(function(t){"use strict";var e=function(t,e,n,r){this.red=t,this.green=e,this.blue=n,this.alpha=r};return e.WHITE=new e(1,1,1,1),e.BLACK=new e(0,0,0,1),e.RED=new e(1,0,0,1),e.GREEN=new e(0,1,0,1),e.BLUE=new e(0,0,1,1),e.CYAN=new e(0,1,1,1),e.YELLOW=new e(1,1,0,1),e.MAGENTA=new e(1,0,1,1),e.LIGHT_GRAY=new e(.75,.75,.75,1),e.MEDIUM_GRAY=new e(.5,.5,.5,1),e.DARK_GRAY=new e(.25,.25,.25,1),e.TRANSPARENT=new e(0,0,0,0),e.prototype.set=function(t,e,n,r){return this.red=t,this.green=e,this.blue=n,this.alpha=r,this},e.prototype.copy=function(e){if(!e)throw new ArgumentError(t.logMessage(t.LEVEL_SEVERE,"Color","copy","missingColor"));return this.red=e.red,this.green=e.green,this.blue=e.blue,this.alpha=e.alpha,this},e.prototype.clone=function(){return new e(this.red,this.green,this.blue,this.alpha)},e.prototype.premultipliedComponents=function(t){var e=this.alpha;return t[0]=this.red*e,t[1]=this.green*e,t[2]=this.blue*e,t[3]=e,t},e.colorFromByteArray=function(t){return new e(t[0]/255,t[1]/255,t[2]/255,t[3]/255)},e.colorFromBytes=function(t,n,r,i){return new e(t/255,n/255,r/255,i/255)},e.colorFromHex=function(t){var n=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16),o=parseInt(t.substring(6,8),16);return e.colorFromBytes(n,r,i,o)},e.colorFromKmlHex=function(t){var n=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16),o=parseInt(t.substring(6,8),16);return e.colorFromBytes(o,i,r,n)},e.prototype.nextColor=function(){var t=Math.round(255*this.red),e=Math.round(255*this.green),n=Math.round(255*this.blue);return t<255?this.red=(t+1)/255:e<255?(this.red=0,this.green=(e+1)/255):n<255?(this.red=0,this.green=0,this.blue=(n+1)/255):(this.red=1/255,this.green=0,this.blue=0),this},e.prototype.equals=function(t){var e=Math.round(255*this.red),n=Math.round(255*this.green),r=Math.round(255*this.blue),i=Math.round(255*this.alpha),o=Math.round(255*t.red),a=Math.round(255*t.green),s=Math.round(255*t.blue),u=Math.round(255*t.alpha);return e===o&&n===a&&r===s&&i===u},e.prototype.equalsBytes=function(t){var e=Math.round(255*this.red),n=Math.round(255*this.green),r=Math.round(255*this.blue),i=Math.round(255*this.alpha);return e===t[0]&&n===t[1]&&r===t[2]&&i===t[3]},e.prototype.toByteString=function(){return"("+Math.round(255*this.red)+","+Math.round(255*this.green)+","+Math.round(255*this.blue)+","+Math.round(255*this.alpha)+")"},e.prototype.toHexString=function(t){var e=Math.ceil(255*this.red).toString(16),n=Math.ceil(255*this.green).toString(16),r=Math.ceil(255*this.blue).toString(16),i=Math.ceil(255*this.alpha).toString(16),o="#";return o+=e.length<2?"0"+e:e,o+=n.length<2?"0"+n:n,o+=r.length<2?"0"+r:r,t&&(o+=i.length<2?"0"+i:i),o},e.prototype.toCssColorString=function(){return"rgba("+Math.round(255*this.red)+", "+Math.round(255*this.green)+", "+Math.round(255*this.blue)+", "+this.alpha+")"},e})),i("util/Font",["../error/ArgumentError","../util/Color","../util/Logger"],(function(t,e,n){"use strict";var r=function(e,r,i,o,a,s){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Font","constructor","missingSize"));if(e<=0)throw new t(n.logMessage(n.LEVEL_SEVERE,"Font","constructor","invalidSize"));this._size=e,this.style=r||"normal",this.variant=i||"normal",this.weight=o||"normal",this.family=a||"sans-serif",this.horizontalAlignment=s||"center"};return Object.defineProperties(r.prototype,{size:{get:function(){return this._size},set:function(t){this._fontString=null,this._size=t}},style:{get:function(){return this._style},set:function(t){this._fontString=null,this._style=t}},variant:{get:function(){return this._variant},set:function(t){this._fontString=null,this._variant=t}},weight:{get:function(){return this._weight},set:function(t){this._fontString=null,this._weight=t}},family:{get:function(){return this._family},set:function(t){this._fontString=null,this._family=t}},horizontalAlignment:{get:function(){return this._horizontalAlignment},set:function(t){this._toString=null,this._horizontalAlignment=t}},fontString:{get:function(){return this._fontString||(this._fontString=this._style+" "+this.variant+" "+this._weight+" "+this._size.toString()+"px "+this._family),this._fontString}}}),r.prototype.toString=function(){return this._toString&&this._fontString||(this._toString=this.fontString+" "+this.horizontalAlignment),this._toString},r})),i("util/Insets",["../error/ArgumentError","../util/Logger"],(function(t,e){"use strict";var n=function(n,r,i,o){if(4!==arguments.length)throw new t(e.logMessage(e.LEVEL_SEVERE,"Insets","constructor","invalidArgumentCount"));this._top=n,this._left=r,this._bottom=i,this._right=o};return n.prototype.set=function(t,e,n,r){this._top=t,this._left=e,this._bottom=n,this._right=r},n.prototype.clone=function(){return new n(this._top,this._left,this._bottom,this._right)},n.prototype.toString=function(){return this._top+" "+this._left+" "+this._bottom+" "+this._right},Object.defineProperties(n.prototype,{top:{get:function(){return this._top},set:function(t){this._top=t}},left:{get:function(){return this._left},set:function(t){this._left=t}},bottom:{get:function(){return this._bottom},set:function(t){this._bottom=t}},right:{get:function(){return this._right},set:function(t){this._right=t}}}),n})),i("geom/Vec3",["../util/Logger","../error/ArgumentError"],(function(t,e){"use strict";var n=function(t,e,n){this[0]=t,this[1]=e,this[2]=n};return n.prototype=new Float64Array(3),n.ZERO=new n(0,0,0),n.average=function(n,r){if(!n||n.length<1)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","average","missingArray"));if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","average","missingResult"));var i,o=n.length;r[0]=0,r[1]=0,r[2]=0;for(var a=0,s=n.length;a<s;a++)i=n[a],r[0]+=i[0]/o,r[1]+=i[1]/o,r[2]+=i[2]/o;return r},n.averageOfBuffer=function(n,r){if(!n||n.length<1)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","averageBuffer","missingArray"));if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","averageBuffer","missingResult"));var i=n.length/3;r[0]=0,r[1]=0,r[2]=0;for(var o=0;o<i;o++)r[0]+=n[3*o]/i,r[1]+=n[3*o+1]/i,r[2]+=n[3*o+2]/i;return r},n.areColinear=function(r,i,o){if(!r||!i||!o)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","areColinear","missingVector"));var a=new n(r[0]-i[0],r[1]-i[1],r[2]-i[2]).normalize(),s=new n(o[0]-i[0],o[1]-i[1],o[2]-i[2]).normalize();return Math.abs(a.dot(s))>.999},n.computeTriangleNormal=function(r,i,o){if(!r||!i||!o)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","areColinear","missingVector"));var a=(i[1]-r[1])*(o[2]-r[2])-(i[2]-r[2])*(o[1]-r[1]),s=(i[2]-r[2])*(o[0]-r[0])-(i[0]-r[0])*(o[2]-r[2]),u=(i[0]-r[0])*(o[1]-r[1])-(i[1]-r[1])*(o[0]-r[0]),l=a*a+s*s+u*u;return 0===l?new n(a,s,u):(l=Math.sqrt(l),new n(a/l,s/l,u/l))},n.findThreeIndependentVertices=function(t,e){var r=e&&e>0?e:3;if(!t||t.length<3*r)return null;for(var i=new n(t[0],t[1],t[2]),o=null,a=null,s=r;s<t.length&&(o=new n(t[s],t[s+1],t[s+2]))[0]===i[0]&&o[1]===i[1]&&o[2]===i[2];s+=r)o=null;if(!o)return null;for(s+=r;s<t.length&&((a=new n(t[s],t[s+1],t[s+2]))[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]||a[0]===o[0]&&a[1]===o[1]&&a[2]===o[2]||n.areColinear(i,o,a));s+=r)a=null;return a?[i,o,a]:null},n.computeBufferNormal=function(t,e){var r=n.findThreeIndependentVertices(t,e);return r?n.computeTriangleNormal(r[0],r[1],r[2]):null},n.prototype.set=function(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this},n.prototype.copy=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","copy","missingVector"));return this[0]=n[0],this[1]=n[1],this[2]=n[2],this},n.prototype.equals=function(t){return this[0]===t[0]&&this[1]===t[1]&&this[2]===t[2]},n.prototype.add=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","add","missingVector"));return this[0]+=n[0],this[1]+=n[1],this[2]+=n[2],this},n.prototype.subtract=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","subtract","missingVector"));return this[0]-=n[0],this[1]-=n[1],this[2]-=n[2],this},n.prototype.multiply=function(t){return this[0]*=t,this[1]*=t,this[2]*=t,this},n.prototype.divide=function(t){return this[0]/=t,this[1]/=t,this[2]/=t,this},n.prototype.multiplyByMatrix=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","multiplyByMatrix","missingMatrix"));var r=n[0]*this[0]+n[1]*this[1]+n[2]*this[2]+n[3],i=n[4]*this[0]+n[5]*this[1]+n[6]*this[2]+n[7],o=n[8]*this[0]+n[9]*this[1]+n[10]*this[2]+n[11],a=n[12]*this[0]+n[13]*this[1]+n[14]*this[2]+n[15];return this[0]=r/a,this[1]=i/a,this[2]=o/a,this},n.prototype.mix=function(n,r){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","mix","missingVector"));var i=1-r,o=r;return this[0]=this[0]*i+n[0]*o,this[1]=this[1]*i+n[1]*o,this[2]=this[2]*i+n[2]*o,this},n.prototype.negate=function(){return this[0]=-this[0],this[1]=-this[1],this[2]=-this[2],this},n.prototype.dot=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","dot","missingVector"));return this[0]*n[0]+this[1]*n[1]+this[2]*n[2]},n.prototype.cross=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","cross","missingVector"));var r=this[1]*n[2]-this[2]*n[1],i=this[2]*n[0]-this[0]*n[2],o=this[0]*n[1]-this[1]*n[0];return this[0]=r,this[1]=i,this[2]=o,this},n.prototype.magnitudeSquared=function(){return this.dot(this)},n.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSquared())},n.prototype.normalize=function(){var t=1/this.magnitude();return this[0]*=t,this[1]*=t,this[2]*=t,this},n.prototype.distanceToSquared=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","distanceToSquared","missingVector"));var r=this[0]-n[0],i=this[1]-n[1],o=this[2]-n[2];return r*r+i*i+o*o},n.prototype.distanceTo=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec3","distanceTo","missingVector"));return Math.sqrt(this.distanceToSquared(n))},n.prototype.swap=function(t){var e=this[0];return this[0]=t[0],t[0]=e,e=this[1],this[1]=t[1],t[1]=e,e=this[2],this[2]=t[2],t[2]=e,this},n.prototype.toString=function(){return"("+this[0]+", "+this[1]+", "+this[2]+")"},n})),i("geom/Vec2",["../util/Logger","../error/ArgumentError","../geom/Vec3"],(function(t,e,n){"use strict";var r=function(t,e){this[0]=t,this[1]=e};return(r.prototype=new Float64Array(2)).set=function(t,e){return this[0]=t,this[1]=e,this},r.prototype.copy=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","copy","missingVector"));return this[0]=n[0],this[1]=n[1],this},r.prototype.equals=function(t){return this[0]===t[0]&&this[1]===t[1]},r.average=function(n,r){if(!n||n.length<1)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","average","missingArray"));if(!r)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","average","missingResult"));var i,o=n.length;r[0]=0,r[1]=0;for(var a=0,s=n.length;a<s;a++)i=n[a],r[0]+=i[0]/o,r[1]+=i[1]/o;return r},r.prototype.add=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","add","missingVector"));return this[0]+=n[0],this[1]+=n[1],this},r.prototype.subtract=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","subtract","missingVector"));return this[0]-=n[0],this[1]-=n[1],this},r.prototype.multiply=function(t){return this[0]*=t,this[1]*=t,this},r.prototype.divide=function(t){return this[0]/=t,this[1]/=t,this},r.prototype.mix=function(n,r){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","mix","missingVector"));var i=1-r,o=r;return this[0]=this[0]*i+n[0]*o,this[1]=this[1]*i+n[1]*o,this},r.prototype.negate=function(){return this[0]=-this[0],this[1]=-this[1],this},r.prototype.dot=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","dot","missingVector"));return this[0]*n[0]+this[1]*n[1]},r.prototype.magnitudeSquared=function(){return this.dot(this)},r.prototype.magnitude=function(){return Math.sqrt(this.magnitudeSquared())},r.prototype.normalize=function(){var t=1/this.magnitude();return this[0]*=t,this[1]*=t,this},r.prototype.distanceToSquared=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","distanceToSquared","missingVector"));var r=this[0]-n[0],i=this[1]-n[1];return r*r+i*i},r.prototype.distanceTo=function(n){if(!n)throw new e(t.logMessage(t.LEVEL_SEVERE,"Vec2","distanceTo","missingVector"));return Math.sqrt(this.distanceToSquared(n))},r.prototype.toVec3=function(){return new n(this[0],this[1],0)},r.prototype.swap=function(t){var e=this[0];return this[0]=t[0],t[0]=e,e=this[1],this[1]=t[1],t[1]=e,this},r.prototype.toString=function(){return"("+this[0]+", "+this[1]+")"},r})),i("util/Offset",["../geom/Vec2"],(function(t){"use strict";var e=function(t,e,n,r){this.x=e,this.y=r,this.xUnits=t,this.yUnits=n};return e.prototype.clone=function(){return new e(this.xUnits,this.x,this.yUnits,this.y)},e.prototype.offsetForSize=function(e,n){var r,i;return r=this.xUnits===WorldWind.OFFSET_FRACTION?e*this.x:this.xUnits===WorldWind.OFFSET_INSET_PIXELS?e-this.x:this.x,i=this.yUnits===WorldWind.OFFSET_FRACTION?n*this.y:this.yUnits===WorldWind.OFFSET_INSET_PIXELS?n-this.y:this.y,new t(r,i)},e.prototype.toString=function(){return this.xUnits+" "+this.x+" "+this.yUnits+" "+this.y},e})),i("shapes/TextAttributes",["../util/Color","../util/Font","../util/Offset"],(function(t,e,n){"use strict";var r=function(r){this._color=r?r._color.clone():t.WHITE.clone(),this._font=r?r._font:new e(14),this._offset=r?r._offset:new n(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,0),this._scale=r?r._scale:1,this._depthTest=!!r&&r._depthTest,this._enableOutline=!r||r._enableOutline,this._outlineWidth=r?r._outlineWidth:4,this._outlineColor=r?r._outlineColor:new t(0,0,0,.5),this.stateKeyInvalid=!0};return r.prototype.computeStateKey=function(){return"c "+this._color.toHexString(!0)+" f "+this._font.toString()+" o "+this._offset.toString()+" s "+this._scale+" dt "+this._depthTest+" eo "+this._enableOutline+" ow "+this._outlineWidth+" oc "+this._outlineColor.toHexString(!0)},Object.defineProperties(r.prototype,{stateKey:{get:function(){return this.stateKeyInvalid&&(this._stateKey=this.computeStateKey(),this.stateKeyInvalid=!1),this._stateKey}},color:{get:function(){return this._color},set:function(t){this._color=t,this.stateKeyInvalid=!0}},font:{get:function(){return this._font},set:function(t){this._font=t,this.stateKeyInvalid=!0}},offset:{get:function(){return this._offset},set:function(t){this._offset=t,this.stateKeyInvalid=!0}},scale:{get:function(){return this._scale},set:function(t){this._scale=t,this.stateKeyInvalid=!0}},depthTest:{get:function(){return this._depthTest},set:function(t){this._depthTest=t,this.stateKeyInvalid=!0}},enableOutline:{get:function(){return this._enableOutline},set:function(t){this._enableOutline=t,this.stateKeyInvalid=!0}},outlineWidth:{get:function(){return this._outlineWidth},set:function(t){this._outlineWidth=t,this.stateKeyInvalid=!0}},outlineColor:{get:function(){return this._outlineColor},set:function(t){this._outlineColor=t,this.stateKeyInvalid=!0}}}),r})),i("shapes/AnnotationAttributes",["../util/Color","../util/Font","../util/Insets","../shapes/TextAttributes"],(function(t,e,n,r){"use strict";var i=function(e){this._cornerRadius=e?e._cornerRadius:0,this._insets=e?e._insets:new n(0,0,0,0),this._backgroundColor=e?e._backgroundColor.clone():t.WHITE.clone(),this._leaderGapWidth=e?e._leaderGapWidth:40,this._leaderGapHeight=e?e._leaderGapHeight:30,this._opacity=e?e._opacity:1,this._scale=e?e._scale:1,this._drawLeader=!e||e._drawLeader,this._width=e?e._width:200,this._height=e?e._height:100,this._textAttributes=e?e._textAttributes:this.createDefaultTextAttributes(),this.stateKeyInvalid=!0};return i.prototype.computeStateKey=function(){return"wi "+this._width+" he "+this._height+" cr "+this._cornerRadius+" in "+this._insets.toString()+" bg "+this.backgroundColor.toHexString(!0)+" dl "+this.drawLeader+" lgw "+this.leaderGapWidth+" lgh "+this.leaderGapHeight+" op "+this.opacity+" ta "+this._textAttributes.stateKey+" sc "+this.scale},i.prototype.createDefaultTextAttributes=function(){var t=new r(null);return t.enableOutline=!1,t},Object.defineProperties(i.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t,this.stateKeyInvalid=!0}},height:{get:function(){return this._height},set:function(t){this._height=t,this.stateKeyInvalid=!0}},cornerRadius:{get:function(){return this._cornerRadius},set:function(t){this._cornerRadius=t,this.stateKeyInvalid=!0}},insets:{get:function(){return this._insets},set:function(t){this._insets=t,this.stateKeyInvalid=!0}},backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this.stateKeyInvalid=!0}},textAttributes:{get:function(){return this._textAttributes},set:function(t){this._textAttributes=t,this.stateKeyInvalid=!0}},drawLeader:{get:function(){return this._drawLeader},set:function(t){this._drawLeader=t,this.stateKeyInvalid=!0}},leaderGapWidth:{get:function(){return this._leaderGapWidth},set:function(t){this._leaderGapWidth=t,this.stateKeyInvalid=!0}},leaderGapHeight:{get:function(){return this._leaderGapHeight},set:function(t){this._leaderGapHeight=t,this.stateKeyInvalid=!0}},opacity:{get:function(){return this._opacity},set:function(t){this._opacity=t,this.stateKeyInvalid=!0}},scale:{get:function(){return this._scale},set:function(t){this._scale=t,this.stateKeyInvalid=!0}},stateKey:{get:function(){return this.stateKeyInvalid&&(this._stateKey=this.computeStateKey(),this.stateKeyInvalid=!1),this._stateKey}}}),i})),i("shaders/GpuShader",["../error/ArgumentError","../util/Logger"],(function(t,e){"use strict";var n=function(n,r,i){if(r!==n.VERTEX_SHADER&&r!==n.FRAGMENT_SHADER)throw new t(e.logMessage(e.LEVEL_SEVERE,"GpuShader","constructor","The specified shader type is unrecognized."));if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"GpuShader","constructor","The specified shader source is null or undefined."));var o=n.createShader(r);if(!o)throw new t(e.logMessage(e.LEVEL_SEVERE,"GpuShader","constructor","Unable to create shader of type "+(r==n.VERTEX_SHADER?"VERTEX_SHADER.":"FRAGMENT_SHADER.")));if(!this.compile(n,o,r,i)){var a=n.getShaderInfoLog(o);throw n.deleteShader(o),new t(e.logMessage(e.LEVEL_SEVERE,"GpuShader","constructor","Unable to compile shader: "+a))}this.shaderId=o};return n.prototype.compile=function(t,e,n,r){return t.shaderSource(e,r),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)},n.prototype.dispose=function(t){this.shaderId&&(t.deleteShader(this.shaderId),delete this.shaderId)},n})),i("shaders/GpuProgram",["../error/ArgumentError","../util/Color","../shaders/GpuShader","../util/Logger"],(function(t,e,n,r){"use strict";var i=function(e,i,o,a){if(!i||!o)throw new t(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","constructor","The specified shader source is null or undefined."));var s,u,l;try{u=new n(e,e.VERTEX_SHADER,i),l=new n(e,e.FRAGMENT_SHADER,o)}catch(t){throw u&&u.dispose(e),l&&l.dispose(e),t}if(!(s=e.createProgram()))throw new t(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","constructor","Unable to create shader program."));if(e.attachShader(s,u.shaderId),e.attachShader(s,l.shaderId),a)for(var c=0,h=a.length;c<h;c++)e.bindAttribLocation(s,c,a[c]);if(!this.link(e,s)){var f=e.getProgramInfoLog(s);throw e.detachShader(s,u.shaderId),e.detachShader(s,l.shaderId),e.deleteProgram(s),u.dispose(e),l.dispose(e),new t(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","constructor","Unable to link shader program: "+f))}this.programId=s,this.attributeLocations={},this.uniformLocations={},this.vertexShader=u,this.fragmentShader=l,this.size=i.length+o.length,this.scratchArray=new Float32Array(16)};return i.prototype.dispose=function(t){this.programId&&(this.vertexShader&&t.detachShader(this.programId,this.vertexShader.shaderId),this.fragmentShader&&t.detachShader(this.programId,this.fragmentShader.shaderId),t.deleteProgram(this.programId),delete this.programId),this.vertexShader&&(this.vertexShader.dispose(t),delete this.vertexShader),this.fragmentShader&&(this.fragmentShader.dispose(t),delete this.fragmentShader),this.attributeLocations={},this.uniformLocations={}},i.prototype.attributeLocation=function(e,n){if(!n||0==n.length)throw new t(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","attributeLocation","The specified attribute name is null, undefined or empty."));var i=this.attributeLocations[n];return i||(i=e.getAttribLocation(this.programId,n),this.attributeLocations[n]=i),i},i.prototype.uniformLocation=function(e,n){if(!n||0==n.length)throw new t(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","uniformLocation","The specified uniform name is null, undefined or empty."));var i=this.uniformLocations[n];return i||(i=e.getUniformLocation(this.programId,n),this.uniformLocations[n]=i),i},i.prototype.link=function(t,e){return t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS)},i.prototype.loadUniformMatrix=function(e,n,i){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","loadUniformMatrix","missingMatrix"));var o=n.columnMajorComponents(this.scratchArray);e.uniformMatrix4fv(i,!1,o)},i.prototype.loadUniformColor=function(e,n,i){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"GpuProgram","loadUniformColor","missingColor"));var o=n.premultipliedComponents(this.scratchArray);e.uniform4f(i,o[0],o[1],o[2],o[3])},i.prototype.loadUniformColorComponents=function(t,e,n,r,i,o){t.uniform4f(o,e*i,n*i,r*i,i)},i})),i("shaders/BasicTextureProgram",["../error/ArgumentError","../util/Color","../shaders/GpuProgram","../util/Logger"],(function(t,e,n,r){"use strict";var i=function(t){n.call(this,t,"attribute vec4 vertexPoint;\nattribute vec4 vertexTexCoord;\nattribute vec4 normalVector;\nuniform mat4 mvpMatrix;\nuniform mat4 mvInverseMatrix;\nuniform mat4 texCoordMatrix;\nuniform bool applyLighting;\nvarying vec2 texCoord;\nvarying vec4 normal;\nvoid main() {gl_Position = mvpMatrix * vertexPoint;\ntexCoord = (texCoordMatrix * vertexTexCoord).st;\nif (applyLighting) {normal = mvInverseMatrix * normalVector;}\n}","precision mediump float;\nuniform float opacity;\nuniform vec4 color;\nuniform bool enableTexture;\nuniform bool modulateColor;\nuniform sampler2D textureSampler;\nuniform bool applyLighting;\nvarying vec2 texCoord;\nvarying vec4 normal;\nvoid main() {\nvec4 textureColor = texture2D(textureSampler, texCoord);\nfloat ambient = 0.15; vec4 lightDirection = vec4(0, 0, 1, 0);\nif (enableTexture && !modulateColor)\n    gl_FragColor = textureColor * color * opacity;\nelse if (enableTexture && modulateColor)\n    gl_FragColor = color * floor(textureColor.a + 0.5);\nelse\n    gl_FragColor = color * opacity;\nif (gl_FragColor.a == 0.0) {discard;}\nif (applyLighting) {\n    vec4 n = normal * (gl_FrontFacing ? 1.0 : -1.0);\n    gl_FragColor.rgb *= clamp(ambient + dot(lightDirection, n), 0.0, 1.0);\n}\n}",["vertexPoint","normalVector","vertexTexCoord"]),this.vertexPointLocation=this.attributeLocation(t,"vertexPoint"),this.normalVectorLocation=this.attributeLocation(t,"normalVector"),this.vertexTexCoordLocation=this.attributeLocation(t,"vertexTexCoord"),this.mvpMatrixLocation=this.uniformLocation(t,"mvpMatrix"),this.mvInverseMatrixLocation=this.uniformLocation(t,"mvInverseMatrix"),this.colorLocation=this.uniformLocation(t,"color"),this.textureEnabledLocation=this.uniformLocation(t,"enableTexture"),this.modulateColorLocation=this.uniformLocation(t,"modulateColor"),this.textureUnitLocation=this.uniformLocation(t,"textureSampler"),this.textureMatrixLocation=this.uniformLocation(t,"texCoordMatrix"),this.opacityLocation=this.uniformLocation(t,"opacity"),this.applyLightingLocation=this.uniformLocation(t,"applyLighting")};return i.key="WorldWindGpuBasicTextureProgram",(i.prototype=Object.create(n.prototype)).loadModelviewInverse=function(e,n){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"BasicTextureProgram","loadModelviewInverse","missingMatrix"));this.loadUniformMatrix(e,n,this.mvInverseMatrixLocation)},i.prototype.loadModelviewProjection=function(e,n){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"BasicTextureProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(e,n,this.mvpMatrixLocation)},i.prototype.loadColor=function(e,n){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"BasicTextureProgram","loadColor","missingColor"));this.loadUniformColor(e,n,this.colorLocation)},i.prototype.loadTextureEnabled=function(t,e){t.uniform1i(this.textureEnabledLocation,e?1:0)},i.prototype.loadModulateColor=function(t,e){t.uniform1i(this.modulateColorLocation,e?1:0)},i.prototype.loadTextureUnit=function(t,e){t.uniform1i(this.textureUnitLocation,e-t.TEXTURE0)},i.prototype.loadTextureMatrix=function(t,e){this.loadUniformMatrix(t,e,this.textureMatrixLocation)},i.prototype.loadOpacity=function(t,e){t.uniform1f(this.opacityLocation,e)},i.prototype.loadApplyLighting=function(t,e){t.uniform1i(this.applyLightingLocation,e)},i})),i("geom/Line",["../error/ArgumentError","../util/Logger","../geom/Vec3"],(function(t,e,n){"use strict";var r=function(n,r){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Line","constructor","Origin is null or undefined."));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"Line","constructor","Direction is null or undefined."));this.origin=n,this.direction=r};return r.fromSegment=function(i,o){if(!i||!o)throw new t(e.logMessage(e.LEVEL_SEVERE,"Line","fromSegment","missingPoint"));var a=new n(i[0],i[1],i[2]),s=new n(o[0]-i[0],o[1]-i[1],o[2]-i[2]);return new r(a,s)},r.prototype.pointAt=function(n,r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"Line","pointAt","missingResult."));return r[0]=this.origin[0]+this.direction[0]*n,r[1]=this.origin[1]+this.direction[1]*n,r[2]=this.origin[2]+this.direction[2]*n,r},r.prototype.equals=function(t){return!!t&&this.origin.equals(t.origin)&&this.direction.equals(t.direction)},r.prototype.clone=function(){var t=new r(new n(0,0,0),new n(0,0,0));return t.copy(this),t},r.prototype.copy=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Line","copy","missingLine"));return this.origin.copy(n.origin),this.direction.copy(n.direction),this},r})),i("geom/Plane",["../error/ArgumentError","../geom/Line","../util/Logger","../geom/Vec3"],(function(t,e,n,r){"use strict";var i=function(t,e,n,i){this.normal=new r(t,e,n),this.distance=i};return i.fromPoints=function(e,o,a){if(!e||!o||!a)throw new t(n.logMessage(n.LEVEL_SEVERE,"Plane","fromPoints","missingVector"));var s=new r(o[0],o[1],o[2]);s.subtract(e);var u=new r(a[0],a[1],a[2]);u.subtract(e),s.cross(u),s.normalize();var l=-s.dot(e);return new i(s[0],s[1],s[2],l)},i.prototype.dot=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Plane","dot","missingVector"));return this.normal.dot(e)+this.distance},i.prototype.distanceToPoint=function(t){return this.dot(t)},i.prototype.transformByMatrix=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Plane","transformByMatrix","missingMatrix"));var r=e[0]*this.normal[0]+e[1]*this.normal[1]+e[2]*this.normal[2]+e[3]*this.distance,i=e[4]*this.normal[0]+e[5]*this.normal[1]+e[6]*this.normal[2]+e[7]*this.distance,o=e[8]*this.normal[0]+e[9]*this.normal[1]+e[10]*this.normal[2]+e[11]*this.distance,a=e[12]*this.normal[0]+e[13]*this.normal[1]+e[14]*this.normal[2]+e[15]*this.distance;return this.normal[0]=r,this.normal[1]=i,this.normal[2]=o,this.distance=a,this},i.prototype.normalize=function(){var t=this.normal.magnitude();return 0===t||(this.normal.divide(t),this.distance/=t),this},i.prototype.intersectsSegment=function(t,e){return this.dot(t)*this.dot(e)<=0},i.prototype.intersectsSegmentAt=function(t,e,n){var r=this.dot(t),i=this.dot(e);if(0===r&&0===i)return n[0]=t[0],n[1]=t[1],n[2]=t[2],!0;if(r===i)return!1;var o=-r/(i-r),a=1-o;return n[0]=o*t[0]+a*e[0],n[1]=o*t[1]+a*e[1],n[2]=o*t[2]+a*e[2],r*i<=0},i.prototype.onSameSide=function(e,r){if(!e||!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Plane","onSameSide","missingPoint"));var i=this.distanceToPoint(e),o=this.distanceToPoint(r);return i<0&&o<0?-1:i>0&&o>0?1:0},i.prototype.clip=function(i,o){if(!i||!o)throw new t(n.logMessage(n.LEVEL_SEVERE,"Plane","clip","missingPoint"));if(i.equals(o))return null;var a,s,u=e.fromSegment(i,o),l=this.normal.dot(u.direction);return 0===l?0===this.dot(u.origin)?[i,o]:null:(a=-this.dot(u.origin)/l)<0||a>1?null:(s=u.pointAt(a,new r(0,0,0)),l>0?[s,o]:[i,s])},i})),i("geom/Rectangle",["../util/Logger"],(function(t){"use strict";var e=function(t,e,n,r){this.x=t,this.y=e,this.width=n,this.height=r};return e.prototype.set=function(t,e,n,r){this.x=t,this.y=e,this.width=n,this.height=r},e.prototype.getMinX=function(){return this.x},e.prototype.getMinY=function(){return this.y},e.prototype.getMaxX=function(){return this.x+this.width},e.prototype.getMaxY=function(){return this.y+this.height},e.prototype.containsPoint=function(t){return t[0]>=this.x&&t[0]<=this.x+this.width&&t[1]>=this.y&&t[1]<=this.y+this.height},e.prototype.intersects=function(t){return!(t.x+t.width<this.x)&&!(t.x>this.x+this.width)&&!(t.y+t.height<this.y)&&!(t.y>this.y+this.height)},e.prototype.intersectsRectangles=function(t){if(t)for(var e=0;e<t.length;e++)if(this.intersects(t[e]))return!0;return!1},e.prototype.toString=function(){return this.x+", "+this.y+", "+this.width+", "+this.height},e})),i("util/WWMath",["../geom/Angle","../error/ArgumentError","../geom/Line","../util/Logger","../geom/Rectangle","../geom/Vec3"],(function(t,e,n,r,i,o){"use strict";var a={clamp:function(t,e,n){return t<e?e:t>n?n:t},interpolate:function(t,e,n){return(1-t)*e+t*n},cbrt:function(t){return"function"==typeof Math.cbrt?Math.cbrt(t):Math.pow(t,1/3)},computeEllipsoidalGlobeIntersection:function(t,n,i,o){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeEllipsoidalGlobeIntersection","missingLine"));if(!o)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeEllipsoidalGlobeIntersection","missingResult"));var a,s=t.direction[0],u=t.direction[1],l=t.direction[2],c=t.origin[0],h=t.origin[1],f=t.origin[2],p=n/i,d=p*p,g=s*s+d*u*u+l*l,m=2*(c*s+d*h*u+f*l),y=m*m-4*g*(c*c+d*h*h+f*f-n*n);return!(y<0)&&(a=(-m-Math.sqrt(y))/(2*g),o[0]=c+s*a,o[1]=h+u*a,o[2]=f+l*a,!0)},computeTriangleIntersection:function(t,n,i,o,a){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriangleIntersection","missingLine"));if(!n||!i||!o)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriangleIntersection","missingVertex"));if(!a)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriangleIntersection","missingResult"));var s=t.direction[0],u=t.direction[1],l=t.direction[2],c=t.origin[0],h=t.origin[1],f=t.origin[2],p=1e-5,d=i[0]-n[0],g=i[1]-n[1],m=i[2]-n[2],y=o[0]-n[0],v=o[1]-n[1],E=o[2]-n[2],_=u*E-l*v,b=l*y-s*E,S=s*v-u*y,w=d*_+g*b+m*S;if(w>-p&&w<p)return!1;var x=1/w,T=c-n[0],L=h-n[1],C=f-n[2],A=x*(T*_+L*b+C*S);if(A<-p||A>1+p)return!1;var M=L*m-C*g,R=C*d-T*m,O=T*g-L*d,P=x*(s*M+u*R+l*O);if(P<-p||A+P>1+p)return!1;var I=x*(y*M+v*R+E*O);return!(I<0)&&(a[0]=c+s*I,a[1]=h+u*I,a[2]=f+l*I,!0)},computeIndexedTrianglesIntersection:function(t,n,i,s){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeIndexedTrianglesIntersection","missingLine"));if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeIndexedTrianglesIntersection","missingPoints"));if(!i)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeIndexedTrianglesIntersection","missingIndices"));if(!s)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeIndexedTrianglesIntersection","missingResults"));for(var u=new o(0,0,0),l=new o(0,0,0),c=new o(0,0,0),h=new o(0,0,0),f=0,p=i.length;f<p;f+=3){var d=3*i[f],g=3*i[f+1],m=3*i[f+2];u[0]=n[d],u[1]=n[d+1],u[2]=n[d+2],l[0]=n[g],l[1]=n[g+1],l[2]=n[g+2],c[0]=n[m],c[1]=n[m+1],c[2]=n[m+2],a.computeTriangleIntersection(t,u,l,c,h)&&(s.push(h),h=new o(0,0,0))}return s.length>0},computeTriStripIntersections:function(t,n,i,a){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriStripIntersections","missingLine"));if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriStripIntersections","missingPoints"));if(!i)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriStripIntersections","missingIndices"));if(!a)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","computeTriStripIntersections","missingResults"));var s,u,l,c,h,f,p,d,g,m,y,v,E,_,b,S,w,x,T,L,C,A,M,R,O,P,I,N,D,k,F=t.direction[0],V=t.direction[1],j=t.direction[2],B=t.origin[0],U=t.origin[1],G=t.origin[2],K=1e-5;k=3*i[0],c=n[k++],h=n[k++],f=n[k],k=3*i[1],p=n[k++],d=n[k++],g=n[k];for(var W=2,z=i.length;W<z;W++)s=c,u=h,l=f,c=p,h=d,f=g,k=3*i[W],p=n[k++],d=n[k++],(N=(m=c-s)*(S=V*(b=(g=n[k])-l)-j*(_=d-u))+(y=h-u)*(w=j*(E=p-s)-F*b)+(v=f-l)*(x=F*_-V*E))>-K&&N<K||(O=(D=1/N)*((T=B-s)*S+(L=U-u)*w+(C=G-l)*x))<-K||O>1+K||(P=D*(F*(A=L*v-C*y)+V*(M=C*m-T*v)+j*(R=T*y-L*m)))<-K||O+P>1+K||(I=D*(E*A+_*M+b*R))>=0&&a.push(new o(B+F*I,U+V*I,G+j*I))},fabs:function(t){return t>=0?t:-t},fmod:function(t,e){return 0===e?0:t-Math.floor(t/e)*e},fract:function(t){return t-Math.floor(t)},mod:function(t,e){return(t%e+e)%e},max:function(t,e){return t>e?t:e},localCoordinateAxesAtPoint:function(t,n,i,o,a){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","localCoordinateAxesAtPoint","missingVector"));if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","localCoordinateAxesAtPoint","missingGlobe"));if(!i||!o||!a)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","localCoordinateAxesAtPoint","missingResult"));var s=t[0],u=t[1],l=t[2];n.surfaceNormalAtPoint(s,u,l,a),n.northTangentAtPoint(s,u,l,o),i.set(o[0],o[1],o[2]),i.cross(a),i.normalize(),o.set(a[0],a[1],a[2]),o.cross(i),o.normalize()},horizonDistanceForGlobeRadius:function(t,n){if(t<0)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","horizontalDistanceForGlobeRadius","The specified globe radius is negative."));return t>0&&n>0?Math.sqrt(n*(2*t+n)):0},perspectiveNearDistanceForFarDistance:function(t,n,i){if(t<0)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveNearDistanceForFarDistance","The specified distance is negative."));if(n<0)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveNearDistanceForFarDistance","The specified resolution is negative."));if(i<1)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveNearDistanceForFarDistance","The specified depth bits is negative."));var o=(1<<i)-1;return t/(o/(1-n/t)-o+1)},perspectiveNearDistance:function(t,n,i){if(t<=0)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveNearDistance","invalidWidth"));if(n<=0)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveNearDistance","invalidHeight"));if(i<0)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveNearDistance","The specified distance is negative."));var o=n/t;return 2*i/Math.sqrt(o*o+5)},perspectiveFrustumRectangle:function(t,n,o){if(t<=0)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveFrustumRectangle","invalidWidth"));if(n<=0)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveFrustumRectangle","invalidHeight"));if(o<0)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectiveFrustumRectangle","The specified distance is negative."));var a=o*n/t;return new i(-o/2,-a/2,o,a)},perspectivePixelSize:function(t,n,i){if(t<=0)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectivePixelSize","invalidWidth"));if(n<=0)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectivePixelSize","invalidHeight"));if(i<0)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","perspectivePixelSize","The specified distance is negative."));return a.perspectiveFrustumRectangle(t,n,i).height/n},boundingRectForUnitQuad:function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"WWMath","boundingRectForUnitQuad","missingMatrix"));var n=t,o=n[3],a=n[7],s=n[0]+n[3],u=n[4]+n[7],l=n[1]+n[3],c=n[5]+n[7],h=n[0]+n[1]+n[3],f=n[4]+n[5]+n[7],p=Math.min(Math.min(o,s),Math.min(l,h)),d=Math.max(Math.max(o,s),Math.max(l,h)),g=Math.min(Math.min(a,u),Math.min(c,f)),m=Math.max(Math.max(a,u),Math.max(c,f));return new i(p,g,d-p,m-g)},isPowerOfTwo:function(t){return 0!=t&&0===(t&t-1)},signum:function(t){return t>0?1:t<0?-1:0},gudermannianInverse:function(e){return Math.log(Math.tan(Math.PI/4+e*t.DEGREES_TO_RADIANS/2))/Math.PI},epsg3857ToEpsg4326:function(e,n){var r=6378100,i=Math.PI/2-2*Math.atan(Math.exp(-n/r)),o=e/r;return[a.clamp(i*t.RADIANS_TO_DEGREES,-90,90),a.clamp(o*t.RADIANS_TO_DEGREES,-180,180)]},powerOfTwoFloor:function(t){var e=Math.floor(Math.log(t)/Math.log(2));return Math.pow(2,e)},normalizeAngle360:function(t){var e=t%360;return e>=0?e:e<0?360+e:360-e}};return a})),i("geom/Location",["../geom/Angle","../error/ArgumentError","../util/Logger","../geom/Plane","../geom/Vec3","../util/WWMath"],(function(t,e,n,r,i,o){"use strict";var a=function(t,e){this.latitude=t,this.longitude=e};return a.ZERO=new a(0,0),a.fromRadians=function(e,n){return new a(e*t.RADIANS_TO_DEGREES,n*t.RADIANS_TO_DEGREES)},a.prototype.copy=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","copy","missingLocation"));return this.latitude=t.latitude,this.longitude=t.longitude,this},a.prototype.set=function(t,e){return this.latitude=t,this.longitude=e,this},a.prototype.equals=function(t){return t&&t.latitude===this.latitude&&t.longitude===this.longitude},a.interpolateAlongPath=function(t,r,i,o,a){if(!i||!o)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateAlongPath","missingLocation"));if(!a)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateAlongPath","missingResult"));return t===WorldWind.GREAT_CIRCLE?this.interpolateGreatCircle(r,i,o,a):t&&t===WorldWind.RHUMB_LINE?this.interpolateRhumb(r,i,o,a):this.interpolateLinear(r,i,o,a)},a.interpolateGreatCircle=function(t,r,i,a){if(!r||!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateGreatCircle","missingLocation"));if(!a)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateGreatCircle","missingResult"));if(r.equals(i))return a.latitude=r.latitude,a.longitude=r.longitude,a;var s=o.clamp(t,0,1),u=this.greatCircleAzimuth(r,i),l=this.greatCircleDistance(r,i);return this.greatCircleLocation(r,u,s*l,a)},a.greatCircleAzimuth=function(r,i){if(!r||!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleAzimuth","missingLocation"));var o,a,s,u=r.latitude*t.DEGREES_TO_RADIANS,l=i.latitude*t.DEGREES_TO_RADIANS,c=r.longitude*t.DEGREES_TO_RADIANS,h=i.longitude*t.DEGREES_TO_RADIANS;return u==l&&c==h?0:c==h?u>l?180:0:(a=Math.cos(l)*Math.sin(h-c),o=Math.cos(u)*Math.sin(l)-Math.sin(u)*Math.cos(l)*Math.cos(h-c),s=Math.atan2(a,o),isNaN(s)?0:s*t.RADIANS_TO_DEGREES)},a.greatCircleDistance=function(r,i){if(!r||!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleDistance","missingLocation"));var o,a,s,u,l=r.latitude*t.DEGREES_TO_RADIANS,c=i.latitude*t.DEGREES_TO_RADIANS,h=r.longitude*t.DEGREES_TO_RADIANS,f=i.longitude*t.DEGREES_TO_RADIANS;return l==c&&h==f?0:(o=Math.sin((c-l)/2),a=Math.sin((f-h)/2),s=o*o+Math.cos(l)*Math.cos(c)*a*a,u=2*Math.asin(Math.sqrt(s)),isNaN(u)?0:u)},a.greatCircleLocation=function(r,i,o,a){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleLocation","missingLocation"));if(!a)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleLocation","missingResult"));if(0==o)return a.latitude=r.latitude,a.longitude=r.longitude,a;var s,u,l=r.latitude*t.DEGREES_TO_RADIANS,c=r.longitude*t.DEGREES_TO_RADIANS,h=i*t.DEGREES_TO_RADIANS;return s=Math.asin(Math.sin(l)*Math.cos(o)+Math.cos(l)*Math.sin(o)*Math.cos(h)),u=c+Math.atan2(Math.sin(o)*Math.sin(h),Math.cos(l)*Math.cos(o)-Math.sin(l)*Math.sin(o)*Math.cos(h)),isNaN(s)||isNaN(u)?(a.latitude=r.latitude,a.longitude=r.longitude):(a.latitude=t.normalizedDegreesLatitude(s*t.RADIANS_TO_DEGREES),a.longitude=t.normalizedDegreesLongitude(u*t.RADIANS_TO_DEGREES)),a},a.interpolateRhumb=function(t,r,i,a){if(!r||!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateRhumb","missingLocation"));if(!a)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateRhumb","missingResult"));if(r.equals(i))return a.latitude=r.latitude,a.longitude=r.longitude,a;var s=o.clamp(t,0,1),u=this.rhumbAzimuth(r,i),l=this.rhumbDistance(r,i);return this.rhumbLocation(r,u,s*l,a)},a.rhumbAzimuth=function(r,i){if(!r||!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","rhumbAzimuth","missingLocation"));var a,s,u,l=r.latitude*t.DEGREES_TO_RADIANS,c=i.latitude*t.DEGREES_TO_RADIANS,h=r.longitude*t.DEGREES_TO_RADIANS,f=i.longitude*t.DEGREES_TO_RADIANS;return l==c&&h==f?0:(a=f-h,s=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(l/2+Math.PI/4)),o.fabs(a)>Math.PI&&(a=a>0?-(2*Math.PI-a):2*Math.PI+a),u=Math.atan2(a,s),isNaN(u)?0:u*t.RADIANS_TO_DEGREES)},a.rhumbDistance=function(r,i){if(!r||!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","rhumbDistance","missingLocation"));var a,s,u,l,c,h=r.latitude*t.DEGREES_TO_RADIANS,f=i.latitude*t.DEGREES_TO_RADIANS,p=r.longitude*t.DEGREES_TO_RADIANS,d=i.longitude*t.DEGREES_TO_RADIANS;return h==f&&p==d?0:(s=d-p,l=(a=f-h)/(u=Math.log(Math.tan(f/2+Math.PI/4)/Math.tan(h/2+Math.PI/4))),(isNaN(u)||isNaN(l))&&(l=Math.cos(h)),o.fabs(s)>Math.PI&&(s=s>0?-(2*Math.PI-s):2*Math.PI+s),c=Math.sqrt(a*a+l*l*s*s),isNaN(c)?0:c)},a.rhumbLocation=function(r,i,a,s){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","rhumbLocation","missingLocation"));if(!s)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","rhumbLocation","missingResult"));if(0==a)return s.latitude=r.latitude,s.longitude=r.longitude,s;var u,l,c=r.latitude*t.DEGREES_TO_RADIANS,h=r.longitude*t.DEGREES_TO_RADIANS,f=i*t.DEGREES_TO_RADIANS,p=c+a*Math.cos(f),d=Math.log(Math.tan(p/2+Math.PI/4)/Math.tan(c/2+Math.PI/4)),g=(p-c)/d;return(isNaN(d)||isNaN(g)||!isFinite(g))&&(g=Math.cos(c)),u=a*Math.sin(f)/g,o.fabs(p)>Math.PI/2&&(p=p>0?Math.PI-p:-Math.PI-p),l=o.fmod(h+u+Math.PI,2*Math.PI)-Math.PI,isNaN(p)||isNaN(l)?(s.latitude=r.latitude,s.longitude=r.longitude):(s.latitude=t.normalizedDegreesLatitude(p*t.RADIANS_TO_DEGREES),s.longitude=t.normalizedDegreesLongitude(l*t.RADIANS_TO_DEGREES)),s},a.interpolateLinear=function(t,r,i,a){if(!r||!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateLinear","missingLocation"));if(!a)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","interpolateLinear","missingResult"));if(r.equals(i))return a.latitude=r.latitude,a.longitude=r.longitude,a;var s=o.clamp(t,0,1),u=this.linearAzimuth(r,i),l=this.linearDistance(r,i);return this.linearLocation(r,u,s*l,a)},a.linearAzimuth=function(r,i){if(!r||!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","linearAzimuth","missingLocation"));var a,s,u,l=r.latitude*t.DEGREES_TO_RADIANS,c=i.latitude*t.DEGREES_TO_RADIANS,h=r.longitude*t.DEGREES_TO_RADIANS,f=i.longitude*t.DEGREES_TO_RADIANS;return l==c&&h==f?0:(a=f-h,s=c-l,o.fabs(a)>Math.PI&&(a=a>0?-(2*Math.PI-a):2*Math.PI+a),u=Math.atan2(a,s),isNaN(u)?0:u*t.RADIANS_TO_DEGREES)},a.linearDistance=function(r,i){if(!r||!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","linearDistance","missingLocation"));var a,s,u,l=r.latitude*t.DEGREES_TO_RADIANS,c=i.latitude*t.DEGREES_TO_RADIANS,h=r.longitude*t.DEGREES_TO_RADIANS,f=i.longitude*t.DEGREES_TO_RADIANS;return l==c&&h==f?0:(a=c-l,s=f-h,o.fabs(s)>Math.PI&&(s=s>0?-(2*Math.PI-s):2*Math.PI+s),u=Math.sqrt(a*a+s*s),isNaN(u)?0:u)},a.linearLocation=function(r,i,a,s){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","linearLocation","missingLocation"));if(!s)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","linearLocation","missingResult"));if(0==a)return s.latitude=r.latitude,s.longitude=r.longitude,s;var u,l=r.latitude*t.DEGREES_TO_RADIANS,c=r.longitude*t.DEGREES_TO_RADIANS,h=i*t.DEGREES_TO_RADIANS,f=l+a*Math.cos(h);return o.fabs(f)>Math.PI/2&&(f=f>0?Math.PI-f:-Math.PI-f),u=o.fmod(c+a*Math.sin(h)+Math.PI,2*Math.PI)-Math.PI,isNaN(f)||isNaN(u)?(s.latitude=r.latitude,s.longitude=r.longitude):(s.latitude=t.normalizedDegreesLatitude(f*t.RADIANS_TO_DEGREES),s.longitude=t.normalizedDegreesLongitude(u*t.RADIANS_TO_DEGREES)),s},a.locationsCrossDateLine=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","locationsCrossDateline","missingLocation"));for(var r=null,i=0,a=t.length;i<a;i+=1){var s=t[i];if(null!=r&&o.signum(r.longitude)!=o.signum(s.longitude)){var u=Math.abs(r.longitude-s.longitude);if(u>180&&u<360)return!0}r=s}return!1},a.greatCircleArcExtremeLocations=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleArcExtremeLocations","missingLocation"));for(var r=null,i=null,o=null,s=0,u=t.length;s<u;s+=1){var l=t[s];if(null!=o){var c=a.greatCircleArcExtremeForTwoLocations(o,l);if(null==c)continue;(null==r||r.latitude>c[0].latitude)&&(r=c[0]),(null==i||i.latitude<c[1].latitude)&&(i=c[1])}o=l}return[r,i]},a.greatCircleArcExtremeForTwoLocations=function(t,r){if(!t||!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleArcExtremeForTwoLocations","missingLocation"));var i,s,u,l=null,c=null,h=90,f=-90,p=[t,r];for(i=0,s=p.length;i<s;i+=1)h>=(u=p[i]).latitude&&(h=u.latitude,l=u),f<=u.latitude&&(f=u.latitude,c=u);var d=a.greatCircleAzimuth(t,r),g=a.greatCircleDistance(t,r),m=a.greatCircleExtremeLocationsUsingAzimuth(t,d);for(i=0,s=m.length;i<s;i+=1){u=m[i];var y=a.greatCircleAzimuth(t,u),v=a.greatCircleDistance(t,u);o.signum(y)==o.signum(d)&&v>=0&&v<=g&&(h>=u.latitude&&(h=u.latitude,l=u),f<=u.latitude&&(f=u.latitude,c=u))}return[l,c]},a.greatCircleExtremeLocationsUsingAzimuth=function(r,i){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Location","greatCircleArcExtremeLocationsUsingAzimuth","missingLocation"));var o=r.latitude,s=i*t.DEGREES_TO_RADIANS,u=-Math.tan(o)/Math.cos(s),l=Math.atan(u),c=l+Math.PI/2,h=l-Math.PI/2;return[a.greatCircleLocation(r,i,c,new a(0,0)),a.greatCircleLocation(r,i,h,new a(0,0))]},a.intersectionWithMeridian=function(t,e,n,o){var a=o.computePointFromLocation(t.latitude,t.longitude,new i(0,0,0)),s=o.computePointFromLocation(e.latitude,e.longitude,new i(0,0,0)),u=o.computePointFromLocation(90,n,new i(0,0,0)),l=o.computePointFromLocation(0,n,new i(0,0,0)),c=r.fromPoints(u,l,i.ZERO),h=new i(0,0,0);if(!c.intersectsSegmentAt(a,s,h))return null;var f=new WorldWind.Position(0,0,0);return o.computePositionFromPoint(h[0],h[1],h[2],f),f.latitude},a.meridianIntersection=function(t,e,n){var r=t.longitude<0?t.longitude+360:t.longitude,i=e.longitude<0?e.longitude+360:e.longitude;if(r===i)return null;var o=n<0?n+360:n,a=(e.latitude-t.latitude)/(i-r);return t.latitude+a*(o-r)},a.poles={NONE:0,NORTH:1,SOUTH:2},a})),i("geom/Position",["../geom/Angle","../error/ArgumentError","../geom/Location","../util/Logger","../util/WWMath"],(function(t,e,n,r,i){"use strict";var o=function(t,e,n){this.latitude=t,this.longitude=e,this.altitude=n};return o.ZERO=new o(0,0,0),o.fromRadians=function(e,n,r){return new o(e*t.RADIANS_TO_DEGREES,n*t.RADIANS_TO_DEGREES,r)},o.prototype.copy=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"Position","copy","missingPosition"));return this.latitude=t.latitude,this.longitude=t.longitude,this.altitude=t.altitude,this},o.prototype.equals=function(t){return t&&t.latitude===this.latitude&&t.longitude===this.longitude&&t.altitude===this.altitude},o.interpolateGreatCircle=function(t,o,a,s){if(!o||!a)throw new e(r.logMessage(r.LEVEL_SEVERE,"Position","interpolateGreatCircle","missingPosition"));if(!s)throw new e(r.logMessage(r.LEVEL_SEVERE,"Position","interpolateGreatCircle","missingResult"));var u=i.clamp(t,0,1);return s.altitude=i.interpolate(u,o.altitude,a.altitude),n.interpolateGreatCircle(u,o,a,s),s},o.interpolateRhumb=function(t,o,a,s){if(!o||!a)throw new e(r.logMessage(r.LEVEL_SEVERE,"Position","interpolateRhumb","missingPosition"));if(!s)throw new e(r.logMessage(r.LEVEL_SEVERE,"Position","interpolateRhumb","missingResult"));var u=i.clamp(t,0,1);return s.altitude=i.interpolate(u,o.altitude,a.altitude),n.interpolateRhumb(u,o,a,s),s},o.interpolateLinear=function(t,o,a,s){if(!o||!a)throw new e(r.logMessage(r.LEVEL_SEVERE,"Position","interpolateLinear","missingPosition"));if(!s)throw new e(r.logMessage(r.LEVEL_SEVERE,"Position","interpolateLinear","missingResult"));var u=i.clamp(t,0,1);return s.altitude=i.interpolate(u,o.altitude,a.altitude),n.interpolateLinear(u,o,a,s),s},o.prototype.toString=function(){return"("+this.latitude.toString()+"\xb0, "+this.longitude.toString()+"\xb0, "+this.altitude.toString()+")"},o})),i("render/Texture",["../error/ArgumentError","../util/Logger","../util/WWMath"],(function(t,e,n){"use strict";var r=function(r,i,o){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"Texture","constructor","missingGlContext"));if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"Texture","constructor","missingImage"));o||(o=r.CLAMP_TO_EDGE);var a=r.createTexture(),s=n.isPowerOfTwo(i.width)&&n.isPowerOfTwo(i.height);this.originalImageWidth=i.width,this.originalImageHeight=i.height,o!==r.REPEAT||s||(i=this.resizeImage(i),s=!0),this.imageWidth=i.width,this.imageHeight=i.height,this.size=i.width*i.height*4,r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,s?r.LINEAR_MIPMAP_LINEAR:r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,o),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,i),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),s&&r.generateMipmap(r.TEXTURE_2D),this.textureId=a,this.creationTime=new Date,this.texParameters={},this.anisotropicFilterExt=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic")};return r.prototype.setTexParameter=function(t,e){this.texParameters[t]=e},r.prototype.getTexParameter=function(t){return this.texParameters[t]},r.prototype.clearTexParameters=function(){this.texParameters={}},r.prototype.dispose=function(t){t.deleteTexture(this.textureId),delete this.textureId},r.prototype.bind=function(t){var e=t.currentGlContext;return e.bindTexture(e.TEXTURE_2D,this.textureId),this.applyTexParameters(t),t.frameStatistics.incrementTextureLoadCount(1),!0},r.prototype.applyTexParameters=function(t){var e=t.currentGlContext,n=this.texParameters[e.TEXTURE_MAG_FILTER]||e.LINEAR;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n),n===e.LINEAR&&this.anisotropicFilterExt&&e.texParameteri(e.TEXTURE_2D,this.anisotropicFilterExt.TEXTURE_MAX_ANISOTROPY_EXT,4)},r.prototype.resizeImage=function(t){var e=document.createElement("canvas");return e.width=n.powerOfTwoFloor(t.width),e.height=n.powerOfTwoFloor(t.height),e.getContext("2d").drawImage(t,0,0,e.width,e.height),e},r})),i("geom/Matrix",["../geom/Angle","../error/ArgumentError","../util/Logger","../geom/Plane","../geom/Position","../geom/Rectangle","../render/Texture","../geom/Vec3","../util/WWMath"],(function(t,e,n,r,i,o,a,s,u){"use strict";var l=function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g){this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=h,this[12]=f,this[13]=p,this[14]=d,this[15]=g};return l.prototype=new Float64Array(16),l.fromIdentity=function(){return new l(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},l.principalAxesFromPoints=function(t,r,i,o){if(!t||t.length<1)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","principalAxesFromPoints","missingPoints"));if(!r||!i||!o)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","principalAxesFromPoints","An axis argument is null or undefined."));var a=l.fromIdentity();a.setToCovarianceOfPoints(t),a.eigensystemFromSymmetricMatrix(r,i,o),r.normalize(),i.normalize(),o.normalize()},l.prototype.set=function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=h,this[12]=f,this[13]=p,this[14]=d,this[15]=g,this},l.prototype.setToIdentity=function(){this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=1,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1},l.prototype.copy=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","copy","missingMatrix"));this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15]},l.prototype.clone=function(){var t=l.fromIdentity();return t.copy(this),t},l.prototype.equals=function(t){return t&&this[0]==t[0]&&this[1]==t[1]&&this[2]==t[2]&&this[3]==t[3]&&this[4]==t[4]&&this[5]==t[5]&&this[6]==t[6]&&this[7]==t[7]&&this[8]==t[8]&&this[9]==t[9]&&this[10]==t[10]&&this[11]==t[11]&&this[12]==t[12]&&this[13]==t[13]&&this[14]==t[14]&&this[15]==t[15]},l.prototype.columnMajorComponents=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","columnMajorComponents","missingResult"));return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t},l.prototype.setToTranslation=function(t,e,n){return this[0]=1,this[1]=0,this[2]=0,this[3]=t,this[4]=0,this[5]=1,this[6]=0,this[7]=e,this[8]=0,this[9]=0,this[10]=1,this[11]=n,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.setTranslation=function(t,e,n){return this[3]=t,this[7]=e,this[11]=n,this},l.prototype.setToScale=function(t,e,n){return this[0]=t,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=e,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=n,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.setScale=function(t,e,n){return this[0]=t,this[5]=e,this[10]=n,this},l.prototype.setToTransposeOfMatrix=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToTransposeOfMatrix","missingMatrix"));return this[0]=t[0],this[1]=t[4],this[2]=t[8],this[3]=t[12],this[4]=t[1],this[5]=t[5],this[6]=t[9],this[7]=t[13],this[8]=t[2],this[9]=t[6],this[10]=t[10],this[11]=t[14],this[12]=t[3],this[13]=t[7],this[14]=t[11],this[15]=t[15],this},l.prototype.setToMultiply=function(t,r){if(!t||!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToMultiply","missingMatrix"));var i=t,o=r;return this[0]=i[0]*o[0]+i[1]*o[4]+i[2]*o[8]+i[3]*o[12],this[1]=i[0]*o[1]+i[1]*o[5]+i[2]*o[9]+i[3]*o[13],this[2]=i[0]*o[2]+i[1]*o[6]+i[2]*o[10]+i[3]*o[14],this[3]=i[0]*o[3]+i[1]*o[7]+i[2]*o[11]+i[3]*o[15],this[4]=i[4]*o[0]+i[5]*o[4]+i[6]*o[8]+i[7]*o[12],this[5]=i[4]*o[1]+i[5]*o[5]+i[6]*o[9]+i[7]*o[13],this[6]=i[4]*o[2]+i[5]*o[6]+i[6]*o[10]+i[7]*o[14],this[7]=i[4]*o[3]+i[5]*o[7]+i[6]*o[11]+i[7]*o[15],this[8]=i[8]*o[0]+i[9]*o[4]+i[10]*o[8]+i[11]*o[12],this[9]=i[8]*o[1]+i[9]*o[5]+i[10]*o[9]+i[11]*o[13],this[10]=i[8]*o[2]+i[9]*o[6]+i[10]*o[10]+i[11]*o[14],this[11]=i[8]*o[3]+i[9]*o[7]+i[10]*o[11]+i[11]*o[15],this[12]=i[12]*o[0]+i[13]*o[4]+i[14]*o[8]+i[15]*o[12],this[13]=i[12]*o[1]+i[13]*o[5]+i[14]*o[9]+i[15]*o[13],this[14]=i[12]*o[2]+i[13]*o[6]+i[14]*o[10]+i[15]*o[14],this[15]=i[12]*o[3]+i[13]*o[7]+i[14]*o[11]+i[15]*o[15],this},l.prototype.setToCovarianceOfPoints=function(t){if(!t||t.length<1)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToCovarianceOfPoints","missingArray"));var r,i,o,a,u=0,l=0,c=0,h=0,f=0,p=0,d=0,g=new s(0,0,0);r=s.averageOfBuffer(t,new s(0,0,0));for(var m=0,y=t.length/3;m<y;m++)g[0]=t[3*m],g[1]=t[3*m+1],g[2]=t[3*m+2],++u,l+=(i=g[0]-r[0])*i,c+=(o=g[1]-r[1])*o,h+=(a=g[2]-r[2])*a,f+=i*o,p+=i*a,d+=o*a;return this[0]=l/u,this[1]=f/u,this[2]=p/u,this[3]=0,this[4]=f/u,this[5]=c/u,this[6]=d/u,this[7]=0,this[8]=p/u,this[9]=d/u,this[10]=h/u,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=0,this},l.prototype.multiplyByTranslation=function(t,e,n){return this.multiply(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},l.prototype.multiplyByRotation=function(e,n,r,i){var o=Math.cos(i*t.DEGREES_TO_RADIANS),a=Math.sin(i*t.DEGREES_TO_RADIANS);return this.multiply(o+(1-o)*e*e,(1-o)*e*n-a*r,(1-o)*e*r+a*n,0,(1-o)*e*n+a*r,o+(1-o)*n*n,(1-o)*n*r-a*e,0,(1-o)*e*r-a*n,(1-o)*n*r+a*e,o+(1-o)*r*r,0,0,0,0,1),this},l.prototype.multiplyByScale=function(t,e,n){return this.multiply(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},l.prototype.setToUnitYFlip=function(){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=-1,this[6]=0,this[7]=1,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.multiplyByLocalCoordinateTransform=function(t,r){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByLocalCoordinateTransform","Origin vector is null or undefined"));if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByLocalCoordinateTransform","missingGlobe"));var i=new s(0,0,0),o=new s(0,0,0),a=new s(0,0,0);return u.localCoordinateAxesAtPoint(t,r,i,o,a),this.multiply(i[0],o[0],a[0],t[0],i[1],o[1],a[1],t[1],i[2],o[2],a[2],t[2],0,0,0,1),this},l.prototype.multiplyByTextureTransform=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByTextureTransform","missingTexture"));var r=t.originalImageWidth/t.imageWidth,i=t.originalImageHeight/t.imageHeight;return this.multiply(r,0,0,0,0,-i,0,i,0,0,1,0,0,0,0,1),this},l.prototype.extractTranslation=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractTranslation","missingResult"));return t[0]=this[3],t[1]=this[7],t[2]=this[11],t},l.prototype.extractRotationAngles=function(r){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractRotationAngles","missingResult"));var i=Math.atan2(this[6],this[10]),o=Math.atan2(-this[2],Math.sqrt(this[0]*this[0]+this[1]*this[1])),a=Math.cos(i),s=Math.sin(i),u=Math.atan2(s*this[8]-a*this[4],a*this[5]-s*this[9]);return r[0]=i*t.RADIANS_TO_DEGREES,r[1]=o*t.RADIANS_TO_DEGREES,r[2]=u*t.RADIANS_TO_DEGREES,r},l.prototype.multiplyByFirstPersonModelview=function(r,i,o,a,l){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByFirstPersonModelview","missingPosition"));if(!l)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByFirstPersonModelview","missingGlobe"));var c,h,f,p,d,g,m,y,v,E,_,b,S,w,x=new s(0,0,0),T=new s(0,0,0),L=new s(0,0,0),C=new s(0,0,0);return c=Math.cos(a*t.DEGREES_TO_RADIANS),h=Math.sin(a*t.DEGREES_TO_RADIANS),this.multiply(c,h,0,0,-h,c,0,0,0,0,1,0,0,0,0,1),c=Math.cos(o*t.DEGREES_TO_RADIANS),h=Math.sin(o*t.DEGREES_TO_RADIANS),this.multiply(1,0,0,0,0,c,h,0,0,-h,c,0,0,0,0,1),c=Math.cos(i*t.DEGREES_TO_RADIANS),h=Math.sin(i*t.DEGREES_TO_RADIANS),this.multiply(c,-h,0,0,h,c,0,0,0,0,1,0,0,0,0,1),l.computePointFromPosition(r.latitude,r.longitude,r.altitude,x),f=x[0],p=x[1],d=x[2],u.localCoordinateAxesAtPoint(x,l,T,L,C),g=T[0],m=T[1],y=T[2],v=L[0],E=L[1],_=L[2],b=C[0],S=C[1],w=C[2],this.multiply(g,m,y,-g*f-m*p-y*d,v,E,_,-v*f-E*p-_*d,b,S,w,-b*f-S*p-w*d,0,0,0,1),this},l.prototype.multiplyByLookAtModelview=function(t,r,i,o,a,s){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByLookAtModelview","missingPosition"));if(r<0)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByLookAtModelview","Range is less than zero"));if(!s)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyByLookAtModelview","missingGlobe"));return this.multiplyByTranslation(0,0,-r),this.multiplyByFirstPersonModelview(t,i,o,a,s),this},l.prototype.setToPerspectiveProjection=function(t,r,i,o){if(t<=0)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToPerspectiveProjection","invalidWidth"));if(r<=0)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToPerspectiveProjection","invalidHeight"));if(i===o)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToPerspectiveProjection","Near and far distance are the same."));if(i<=0||o<=0)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToPerspectiveProjection","Near or far distance is less than or equal to zero."));var a=u.perspectiveFrustumRectangle(t,r,i),s=a.getMinX(),l=a.getMaxX(),c=a.getMinY(),h=a.getMaxY();return this[0]=2*i/(l-s),this[1]=0,this[2]=(l+s)/(l-s),this[3]=0,this[4]=0,this[5]=2*i/(h-c),this[6]=(h+c)/(h-c),this[7]=0,this[8]=0,this[9]=0,this[10]=-(o+i)/(o-i),this[11]=-2*i*o/(o-i),this[12]=0,this[13]=0,this[14]=-1,this[15]=0,this},l.prototype.setToScreenProjection=function(t,r){if(t<=0)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToScreenProjection","invalidWidth"));if(r<=0)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","setToScreenProjection","invalidHeight"));return this[0]=2/t,this[1]=0,this[2]=0,this[3]=-1,this[4]=0,this[5]=2/r,this[6]=0,this[7]=-1,this[8]=0,this[9]=0,this[10]=2,this[11]=-1,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.extractEyePoint=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractEyePoint","missingResult"));return t[0]=-this[0]*this[3]-this[4]*this[7]-this[8]*this[11],t[1]=-this[1]*this[3]-this[5]*this[7]-this[9]*this[11],t[2]=-this[2]*this[3]-this[6]*this[7]-this[10]*this[11],t},l.prototype.extractForwardVector=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractForwardVector","missingResult"));return t[0]=-this[8],t[1]=-this[9],t[2]=-this[10],t},l.prototype.extractViewingParameters=function(r,o,a,s){if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractViewingParameters","The specified origin is null or undefined."));if(!a)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractViewingParameters","missingGlobe"));if(!s)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","extractViewingParameters","missingResult"));var u,c,h,f,p,d,g,m,y,v=new i(0,0,0),E=l.fromIdentity();return a.computePositionFromPoint(r[0],r[1],r[2],v),E.copy(this),E.multiplyByLocalCoordinateTransform(r,a),u=-E[11],c=E[10],h=Math.sqrt(E[2]*E[2]+E[6]*E[6]),f=Math.atan2(h,c)*t.RADIANS_TO_DEGREES,p=Math.cos(o*t.DEGREES_TO_RADIANS),d=Math.sin(o*t.DEGREES_TO_RADIANS),g=p*E[0]-d*E[4],m=d*E[5]-p*E[1],y=Math.atan2(m,g)*t.RADIANS_TO_DEGREES,s.origin=v,s.range=u,s.heading=y,s.tilt=f,s.roll=o,s},l.prototype.offsetProjectionDepth=function(t){return this[10]*=1+t,this},l.prototype.multiplyMatrix=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","multiplyMatrix","missingMatrix"));var r,i,o,a,s=this,u=t;return r=s[0],i=s[1],o=s[2],a=s[3],s[0]=r*u[0]+i*u[4]+o*u[8]+a*u[12],s[1]=r*u[1]+i*u[5]+o*u[9]+a*u[13],s[2]=r*u[2]+i*u[6]+o*u[10]+a*u[14],s[3]=r*u[3]+i*u[7]+o*u[11]+a*u[15],r=s[4],i=s[5],o=s[6],a=s[7],s[4]=r*u[0]+i*u[4]+o*u[8]+a*u[12],s[5]=r*u[1]+i*u[5]+o*u[9]+a*u[13],s[6]=r*u[2]+i*u[6]+o*u[10]+a*u[14],s[7]=r*u[3]+i*u[7]+o*u[11]+a*u[15],r=s[8],i=s[9],o=s[10],a=s[11],s[8]=r*u[0]+i*u[4]+o*u[8]+a*u[12],s[9]=r*u[1]+i*u[5]+o*u[9]+a*u[13],s[10]=r*u[2]+i*u[6]+o*u[10]+a*u[14],s[11]=r*u[3]+i*u[7]+o*u[11]+a*u[15],r=s[12],i=s[13],o=s[14],a=s[15],s[12]=r*u[0]+i*u[4]+o*u[8]+a*u[12],s[13]=r*u[1]+i*u[5]+o*u[9]+a*u[13],s[14]=r*u[2]+i*u[6]+o*u[10]+a*u[14],s[15]=r*u[3]+i*u[7]+o*u[11]+a*u[15],this},l.prototype.multiply=function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g){var m,y,v,E,_=this;return m=_[0],y=_[1],v=_[2],E=_[3],_[0]=m*t+y*i+v*u+E*f,_[1]=m*e+y*o+v*l+E*p,_[2]=m*n+y*a+v*c+E*d,_[3]=m*r+y*s+v*h+E*g,m=_[4],y=_[5],v=_[6],E=_[7],_[4]=m*t+y*i+v*u+E*f,_[5]=m*e+y*o+v*l+E*p,_[6]=m*n+y*a+v*c+E*d,_[7]=m*r+y*s+v*h+E*g,m=_[8],y=_[9],v=_[10],E=_[11],_[8]=m*t+y*i+v*u+E*f,_[9]=m*e+y*o+v*l+E*p,_[10]=m*n+y*a+v*c+E*d,_[11]=m*r+y*s+v*h+E*g,m=_[12],y=_[13],v=_[14],E=_[15],_[12]=m*t+y*i+v*u+E*f,_[13]=m*e+y*o+v*l+E*p,_[14]=m*n+y*a+v*c+E*d,_[15]=m*r+y*s+v*h+E*g,this},l.prototype.invertMatrix=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","invertMatrix","missingMatrix"));var r=[[],[],[],[]];r[0][0]=t[0],r[0][1]=t[1],r[0][2]=t[2],r[0][3]=t[3],r[1][0]=t[4],r[1][1]=t[5],r[1][2]=t[6],r[1][3]=t[7],r[2][0]=t[8],r[2][1]=t[9],r[2][2]=t[10],r[2][3]=t[11],r[3][0]=t[12],r[3][1]=t[13],r[3][2]=t[14],r[3][3]=t[15];var i,o,a=[],s=l.ludcmp(r,a);for(i=0;i<4;i+=1)s*=r[i][i];if(Math.abs(s)<1e-8)return null;var u=[[],[],[],[]],c=[];for(o=0;o<4;o+=1){for(i=0;i<4;i+=1)c[i]=0;for(c[o]=1,l.lubksb(r,a,c),i=0;i<4;i+=1)u[i][o]=c[i]}return this[0]=u[0][0],this[1]=u[0][1],this[2]=u[0][2],this[3]=u[0][3],this[4]=u[1][0],this[5]=u[1][1],this[6]=u[1][2],this[7]=u[1][3],this[8]=u[2][0],this[9]=u[2][1],this[10]=u[2][2],this[11]=u[2][3],this[12]=u[3][0],this[13]=u[3][1],this[14]=u[3][2],this[15]=u[3][3],this},l.lubksb=function(t,e,n){var r,i,o,a=-1;for(r=0;r<4;r+=1){var s=e[r];if(o=n[s],n[s]=n[r],-1!=a)for(i=a;i<=r-1;i+=1)o-=t[r][i]*n[i];else 0!=o&&(a=r);n[r]=o}for(r=3;r>=0;r-=1){for(o=n[r],i=r+1;i<4;i+=1)o-=t[r][i]*n[i];n[r]=o/t[r][r]}},l.ludcmp=function(t,e){var n,r,i,o,a,s,u,l,c=[],h=1;for(r=0;r<4;r+=1){for(a=0,i=0;i<4;i+=1)(n=Math.abs(t[r][i]))>a&&(a=n);if(0==a)return 0;c[r]=1/a}for(i=0;i<4;i+=1){for(r=0;r<i;r+=1){for(s=t[r][i],o=0;o<r;o+=1)s-=t[r][o]*t[o][i];t[r][i]=s}for(a=0,u=-1,r=i;r<4;r+=1){for(s=t[r][i],o=0;o<i;o++)s-=t[r][o]*t[o][i];t[r][i]=s,(l=c[r]*Math.abs(s))>=a&&(a=l,u=r)}if(i!=u){for(o=0;o<4;o+=1)l=t[u][o],t[u][o]=t[i][o],t[i][o]=l;h=-h,c[u]=c[i]}if(e[i]=u,0==t[i][i]&&(t[i][i]=1e-20),3!=i)for(l=1/t[i][i],r=i+1;r<4;r+=1)t[r][i]*=l}return h},l.prototype.invertOrthonormalMatrix=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","invertOrthonormalMatrix","missingMatrix"));var r=t;return this[0]=r[0],this[1]=r[4],this[2]=r[8],this[3]=0-r[0]*r[3]-r[4]*r[7]-r[8]*r[11],this[4]=r[1],this[5]=r[5],this[6]=r[9],this[7]=0-r[1]*r[3]-r[5]*r[7]-r[9]*r[11],this[8]=r[2],this[9]=r[6],this[10]=r[10],this[11]=0-r[2]*r[3]-r[6]*r[7]-r[10]*r[11],this[12]=0,this[13]=0,this[14]=0,this[15]=1,this},l.prototype.eigensystemFromSymmetricMatrix=function(t,r,i){if(!t||!r||!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","eigensystemFromSymmetricMatrix","missingResult"));if(this[1]!=this[4]||this[2]!=this[8]||this[6]!=this[9])throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","eigensystemFromSymmetricMatrix","Matrix is not symmetric"));for(var o,a,s,l,c,h,f,p,d,g,m,y=1e-10,v=this[0],E=this[1],_=this[2],b=this[5],S=this[6],w=this[10],x=[[1,0,0],[0,1,0],[0,0,1]],T=0;T<32&&!(u.fabs(E)<y&&u.fabs(_)<y&&u.fabs(S)<y);T++){if(0!=E)for(v-=(l=(s=1+(a=(o=.5*(b-v)/E)*o))!=a?(o<0?-1:1)*(Math.sqrt(s)-u.fabs(o)):.5/o)*E,b+=l*E,E=0,f=(c=1/Math.sqrt(l*l+1))*_-(h=c*l)*S,S=h*_+c*S,_=f,p=0;p<3;p++)f=c*x[p][0]-h*x[p][1],x[p][1]=h*x[p][0]+c*x[p][1],x[p][0]=f;if(0!=_)for(v-=(l=(s=1+(a=(o=.5*(w-v)/_)*o))!=a?(o<0?-1:1)*(Math.sqrt(s)-u.fabs(o)):.5/o)*_,w+=l*_,_=0,f=(c=1/Math.sqrt(l*l+1))*E-(h=c*l)*S,S=h*E+c*S,E=f,p=0;p<3;p++)f=c*x[p][0]-h*x[p][2],x[p][2]=h*x[p][0]+c*x[p][2],x[p][0]=f;if(0!=S)for(b-=(l=(s=1+(a=(o=.5*(w-b)/S)*o))!=a?(o<0?-1:1)*(Math.sqrt(s)-u.fabs(o)):.5/o)*S,w+=l*S,S=0,f=(c=1/Math.sqrt(l*l+1))*E-(h=c*l)*_,_=h*E+c*_,E=f,p=0;p<3;p++)f=c*x[p][1]-h*x[p][2],x[p][2]=h*x[p][1]+c*x[p][2],x[p][1]=f}d=0,g=1,m=2,v<b&&(f=v,v=b,b=f,f=d,d=g,g=f),b<w&&(f=b,b=w,w=f,f=g,g=m,m=f),v<b&&(f=v,v=b,b=f,f=d,d=g,g=f),t[0]=x[0][d],t[1]=x[1][d],t[2]=x[2][d],r[0]=x[0][g],r[1]=x[1][g],r[2]=x[2][g],i[0]=x[0][m],i[1]=x[1][m],i[2]=x[2][m],t.normalize(),r.normalize(),i.normalize(),t.multiply(v),r.multiply(b),i.multiply(w)},l.prototype.upper3By3=function(){var t=l.fromIdentity();return t[0]=this[0],t[1]=this[1],t[2]=this[2],t[4]=this[4],t[5]=this[5],t[6]=this[6],t[8]=this[8],t[9]=this[9],t[10]=this[10],t},l.prototype.unProject=function(t,r,i){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","unProject","missingPoint"));if(!r)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","unProject","missingViewport"));if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"Matrix","unProject","missingResult"));var o=t[0],a=t[1],s=t[2];if(o=2*(o=(o-r.x)/r.width)-1,a=2*(a=(a-r.y)/r.height)-1,(s=2*s-1)<-1||s>1)return!1;var u=this[0]*o+this[1]*a+this[2]*s+this[3],l=this[4]*o+this[5]*a+this[6]*s+this[7],c=this[8]*o+this[9]*a+this[10]*s+this[11],h=this[12]*o+this[13]*a+this[14]*s+this[15];return 0!==h&&(i[0]=u/h,i[1]=l/h,i[2]=c/h,!0)},l})),i("pick/PickedObject",[],(function(){"use strict";return function(t,e,n,r,i){this.color=t,this.userObject=e,this.position=n,this.parentLayer=r,this.isTerrain=i,this.isOnTop=!1}})),i("error/UnsupportedOperationError",["../error/AbstractError"],(function(t){"use strict";var e=function(e){var n;t.call(this,"UnsupportedOperationError",e);try{throw new Error}catch(t){n=t.stack}this.stack=n};return e.prototype=Object.create(t.prototype),e})),i("render/Renderable",["../util/Logger","../error/UnsupportedOperationError"],(function(t,e){"use strict";var n=function(){this.displayName="Renderable",this.enabled=!0,this.pickDelegate=null,this.userProperties={},this.timeRange=[]};return n.prototype.render=function(n){throw new e(t.logMessage(t.LEVEL_SEVERE,"Renderable","render","abstractInvocation"))},n})),i("shapes/Annotation",["../shapes/AnnotationAttributes","../error/ArgumentError","../shaders/BasicTextureProgram","../util/Color","../util/Font","../util/Insets","../util/Logger","../geom/Matrix","../util/Offset","../pick/PickedObject","../render/Renderable","../shapes/TextAttributes","../geom/Vec2","../geom/Vec3","../util/WWMath"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d){"use strict";var g=function(n,r){if(!n)throw new e(a.logMessage(a.LEVEL_SEVERE,"Annotation","constructor","missingPosition"));c.call(this),this.position=n,this.attributes=r||new t(null),this.altitudeMode=WorldWind.ABSOLUTE,this.layer=null,this.lastStateKey=null,this.calloutTransform=s.fromIdentity(),this.calloutOffset=new WorldWind.Offset(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,0),this.label="",this.labelTexture=null,this.labelTransform=s.fromIdentity(),this.placePoint=new p(0,0,0),this.depthOffset=-2.05,this.calloutPoints=null};return g.matrix=s.fromIdentity(),g.screenPoint=new p(0,0,0),g.scratchPoint=new p(0,0,0),g.prototype=Object.create(c.prototype),Object.defineProperties(g.prototype,{text:{get:function(){return this.label},set:function(t){this.label=t,this.lastStateKey=null}}}),g.prototype.renderOrdered=function(t){if(this.drawOrderedAnnotation(t),t.pickingMode){var e=new l(this.pickColor.clone(),this,this.position,this.layer,!1);t.pickPoint&&this.labelBounds.containsPoint(t.convertPointToViewport(t.pickPoint,g.scratchPoint))&&(e.labelPicked=!0),t.resolvePick(e)}},g.prototype.clone=function(){var t=new g(this.position);return t.copy(this),t.pickDelegate=this.pickDelegate?this.pickDelegate:this,t},g.prototype.copy=function(t){return this.position=t.position,this.enabled=t.enabled,this.attributes=t.attributes,this.label=t.label,this.altitudeMode=t.altitudeMode,this.pickDelegate=t.pickDelegate,this.depthOffset=t.depthOffset,this},g.prototype.render=function(t){var e;this.enabled&&t.accumulateOrderedRenderables&&(!t.globe.projectionLimits||t.globe.projectionLimits.containsLocation(this.position.latitude,this.position.longitude))&&((e=this.lastFrameTime!==t.timestamp?this.makeOrderedRenderable(t):this.clone().makeOrderedRenderable(t))&&(e.layer=t.currentLayer,this.lastFrameTime=t.timestamp,t.addOrderedRenderable(e)))},g.prototype.drawOrderedAnnotation=function(t){this.beginDrawing(t);try{this.doDrawOrderedAnnotation(t)}finally{this.endDrawing(t)}},g.prototype.makeOrderedRenderable=function(t){var e,n,r,i,o,a,s,u,l;if(this.label=t.textRenderer.wrap(this.label,this.attributes.width,this.attributes.height),t.surfacePointForMode(this.position.latitude,this.position.longitude,this.position.altitude,this.altitudeMode,this.placePoint),this.eyeDistance=t.eyePoint.distanceTo(this.placePoint),!t.projectWithDepth(this.placePoint,this.depthOffset,g.screenPoint))return null;this.labelTexture=t.createTextTexture(this.label,this.attributes.textAttributes),e=this.labelTexture.imageWidth,n=this.labelTexture.imageHeight,r=this.attributes.scale,i=this.attributes.insets.left,o=this.attributes.insets.right,a=this.attributes.insets.top,s=this.attributes.insets.bottom,l=this.attributes.leaderGapHeight,u=this.calloutOffset.offsetForSize((e+i+o)*r,(n+a+s)*r),this.calloutTransform.setTranslation(g.screenPoint[0]-u[0],g.screenPoint[1]+l,g.screenPoint[2]),this.labelTransform.setTranslation(g.screenPoint[0]-u[0]+i*r,g.screenPoint[1]+l+s*r,g.screenPoint[2]),this.labelTransform.setScale(e*r,n*r,1),this.labelBounds=d.boundingRectForUnitQuad(this.labelTransform);var c=(e+i+o)*r,h=(n+a+s)*r,f=c/2,p=-l;return this.attributes.drawLeader||(p=0),this.attributes.stateKey!==this.lastStateKey&&(this.calloutPoints=this.createCallout(c,h,f,p,this.attributes.leaderGapWidth,this.attributes.cornerRadius)),this},g.prototype.beginDrawing=function(t){var e,r=t.currentGlContext;t.findAndBindProgram(n),e=t.currentProgram,r.enableVertexAttribArray(e.vertexPointLocation),r.enableVertexAttribArray(e.vertexTexCoordLocation),e.loadModulateColor(r,t.pickingMode)},g.prototype.endDrawing=function(t){var e=t.currentGlContext,n=t.currentProgram;e.disableVertexAttribArray(n.vertexPointLocation),e.disableVertexAttribArray(n.vertexTexCoordLocation),t.bindProgram(null)},g.prototype.drawCorner=function(t,e,n,r,i,o,a,s){if(n<1)return s;for(var u=(i-r)/(o-1),l=1;l<o-1;l++){var c=r+u*l,h=t+Math.cos(c)*n,f=e+Math.sin(c)*n;a[s++]=h,a[s++]=f}return s},g.prototype.createCallout=function(t,e,n,r,i,o){var a=new Float32Array(2*(12+(o<1?0:56))),s=0;return a[s++]=t/2+i/2,a[s++]=0,a[s++]=t-o,a[s++]=0,s=this.drawCorner(t-o,o,o,-Math.PI/2,0,16,a,s),a[s++]=t,a[s++]=o,a[s++]=t,a[s++]=e-o,s=this.drawCorner(t-o,e-o,o,0,Math.PI/2,16,a,s),a[s++]=t-o,a[s++]=e,a[s++]=o,a[s++]=e,s=this.drawCorner(o,e-o,o,Math.PI/2,Math.PI,16,a,s),a[s++]=0,a[s++]=e-o,a[s++]=0,a[s++]=o,s=this.drawCorner(o,o,o,Math.PI,1.5*Math.PI,16,a,s),a[s++]=o,a[s++]=0,a[s++]=t/2-i/2,a[s++]=0,a[s++]=n,a[s++]=r,a[s++]=t/2+i/2,a[s]=0,a},g.prototype.doDrawOrderedAnnotation=function(t){var e,n=t.currentGlContext,i=t.currentProgram,o=!1;t.pickingMode&&(this.pickColor=t.uniquePickColor()),i.loadOpacity(n,t.pickingMode?1:this.attributes.opacity*this.layer.opacity);var a=this.attributes.stateKey!==this.lastStateKey;this.calloutCacheKey&&!a||(this.calloutCacheKey=t.gpuResourceCache.generateCacheKey());var s=t.gpuResourceCache.resourceForKey(this.calloutCacheKey);s||(s=n.createBuffer(),t.gpuResourceCache.putResource(this.calloutCacheKey,s,4*this.calloutPoints.length),o=!0),a&&this.calloutCacheKey&&t.gpuResourceCache.removeResource(this.calloutCacheKey),this.lastStateKey=this.attributes.stateKey,g.matrix.copy(t.screenProjection),g.matrix.multiplyMatrix(this.calloutTransform),i.loadModelviewProjection(n,g.matrix),n.bindBuffer(n.ARRAY_BUFFER,s),o&&(n.bufferData(n.ARRAY_BUFFER,this.calloutPoints,n.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1)),i.loadColor(n,t.pickingMode?this.pickColor:this.attributes.backgroundColor),i.loadTextureEnabled(n,!1),n.vertexAttribPointer(i.vertexPointLocation,2,n.FLOAT,!1,0,0),n.vertexAttribPointer(i.vertexTexCoordLocation,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLE_FAN,0,this.calloutPoints.length/2),g.matrix.copy(t.screenProjection),g.matrix.multiplyMatrix(this.labelTransform),i.loadModelviewProjection(n,g.matrix),g.matrix.setToIdentity(),g.matrix.multiplyByTextureTransform(this.labelTexture),i.loadTextureMatrix(n,g.matrix),i.loadColor(n,t.pickingMode?this.pickColor:r.WHITE),e=this.labelTexture.bind(t),i.loadTextureEnabled(n,e),n.bindBuffer(n.ARRAY_BUFFER,t.unitQuadBuffer3()),n.vertexAttribPointer(i.vertexPointLocation,3,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,t.unitQuadBuffer()),n.vertexAttribPointer(i.vertexTexCoordLocation,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLE_STRIP,0,4)},g})),i("ArcBallCamera",["./geom/Angle","./error/ArgumentError","./util/Logger","./geom/Matrix","./geom/Position","./geom/Vec3","./util/WWMath"],(function(t,e,n,r,i,o,a){"use strict";var s=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"ArcBallCamera","constructor","missing WorldWindow instance."));this.position=new i(30,-110,0),this.heading=0,this.tilt=0,this.range=1e7,this.roll=0,this.wwd=t,this._scratchMatrix=r.fromIdentity(),this._scratchVector=new o(0,0,0)};return s.prototype.createViewMatrix=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"ArcBallCamera","createViewMatrix","missing matrix"));return this.applyLimits(),t.setToIdentity(),t.multiplyByLookAtModelview(this.position,this.range,this.heading,this.tilt,this.roll,this.wwd.globe),t},s.prototype.clone=function(t){return(t=t||new s(this.wwd)).copy(this),t},s.prototype.copy=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"ArcBallCamera","copy","missing camera"));return this.position.copy(t.position),this.tilt=t.tilt,this.heading=t.heading,this.range=t.range,this.roll=t.roll,this},s.prototype.applyLimits=function(){if(this.position.latitude=a.clamp(this.position.latitude,-90,90),this.position.longitude=t.normalizedDegreesLongitude(this.position.longitude),this.position.altitude=a.clamp(this.position.altitude,0,Number.MAX_VALUE),this.range=a.clamp(this.range,1,Number.MAX_VALUE),this.heading=t.normalizedDegrees(this.heading),this.tilt=a.clamp(this.tilt,0,90),this.roll=t.normalizedDegrees(this.roll),this.wwd.globe.is2D()){var e=2*Math.PI*this.wwd.globe.equatorialRadius;this.range=a.clamp(this.range,1,e),this.tilt=0}},s.prototype.toFirstPerson=function(t){if(!t)throw new e(n.logMessage(n.LEVEL_SEVERE,"ArcBallCamera","toFirstPerson","missing camera"));var r=this.createViewMatrix(this._scratchMatrix),i=r.extractEyePoint(this._scratchVector),o=r.extractViewingParameters(i,this.roll,this.wwd.globe,{});return t.position.copy(o.origin),t.heading=o.heading,t.tilt=o.tilt-90,t.roll=o.roll,t.applyLimits(),t},s})),i("util/measure/MeasurerUtils",["../../geom/Location","../../geom/Position"],(function(t,e){"use strict";return{subdividePositions:function(n,r,i,o,a){var s,u=[],l=new t(0,0),c=new t(0,0),h=r[0];this.addPosition(n,u,h,i);for(var f=1;f<r.length;f++){var p=r[f],d=t.greatCircleDistance(h,p);l=t.interpolateAlongPath(o,.5,h,p,l);var g=d*n.radiusAt(l.latitude,l.longitude);if(g>a)for(var m=null,y=null,v=Math.ceil(g/a),E=1;E<v;E++){var _=E/v;o===WorldWind.LINEAR?c=t.interpolateLinear(_,h,p,c):o===WorldWind.RHUMB_LINE?(null==m&&(m=t.rhumbAzimuth(h,p),y=t.rhumbDistance(h,p)),c=t.rhumbLocation(h,m,_*y,c)):(null==m&&(m=t.greatCircleAzimuth(h,p),y=t.greatCircleDistance(h,p)),c=t.greatCircleLocation(h,m,_*y,c)),s=i?n.elevationAtLocation(c.latitude,c.longitude):h.altitude*(1-_)+p.altitude*_,u.push(new e(c.latitude,c.longitude,s))}this.addPosition(n,u,p,i),h=p}return u},addPosition:function(t,n,r,i){var o=r.altitude;return i&&(o=t.elevationAtLocation(r.latitude,r.longitude)),n.push(new e(r.latitude,r.longitude,o)),n},isLocationInside:function(t,e){for(var n=!1,r=e[0],i=1,o=e.length;i<o;i++){var a=e[i];(a.latitude<=t.latitude&&t.latitude<r.latitude||r.latitude<=t.latitude&&t.latitude<a.latitude)&&t.longitude<(r.longitude-a.longitude)*(t.latitude-a.latitude)/(r.latitude-a.latitude)+a.longitude&&(n=!n),r=a}return n},angleBetweenVectors:function(t,e){var n=t.dot(e),r=t.magnitude()*e.magnitude();return 0!==r&&1!==r&&(n/=r),n<-1?n=-1:n>1&&(n=1),Math.acos(n)}}})),i("geom/Sector",["../geom/Angle","../error/ArgumentError","../geom/Location","../util/Logger","../geom/Vec3","../util/WWMath"],(function(t,e,n,r,i,o){"use strict";var a=function(t,e,n,r){this.minLatitude=t,this.maxLatitude=e,this.minLongitude=n,this.maxLongitude=r};return a.ZERO=new a(0,0,0,0),a.FULL_SPHERE=new a(-90,90,-180,180),a.prototype.copy=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"Sector","copy","missingSector"));return this.minLatitude=t.minLatitude,this.maxLatitude=t.maxLatitude,this.minLongitude=t.minLongitude,this.maxLongitude=t.maxLongitude,this},a.prototype.isEmpty=function(){return this.minLatitude===this.maxLatitude&&this.minLongitude===this.maxLongitude},a.prototype.deltaLatitude=function(){return this.maxLatitude-this.minLatitude},a.prototype.deltaLongitude=function(){return this.maxLongitude-this.minLongitude},a.prototype.centroidLatitude=function(){return.5*(this.minLatitude+this.maxLatitude)},a.prototype.centroidLongitude=function(){return.5*(this.minLongitude+this.maxLongitude)},a.prototype.centroid=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"Sector","centroid","missingResult"));return t.latitude=this.centroidLatitude(),t.longitude=this.centroidLongitude(),t},a.prototype.minLatitudeRadians=function(){return this.minLatitude*t.DEGREES_TO_RADIANS},a.prototype.maxLatitudeRadians=function(){return this.maxLatitude*t.DEGREES_TO_RADIANS},a.prototype.minLongitudeRadians=function(){return this.minLongitude*t.DEGREES_TO_RADIANS},a.prototype.maxLongitudeRadians=function(){return this.maxLongitude*t.DEGREES_TO_RADIANS},a.prototype.setToBoundingSector=function(t){if(!t||t.length<2)throw new e(r.logMessage(r.LEVEL_SEVERE,"Sector","setToBoundingSector","missingArray"));for(var n=90,i=-90,o=180,a=-180,s=0,u=t.length;s<u;s+=1){var l=t[s];l&&(n=Math.min(n,l.latitude),i=Math.max(i,l.latitude),o=Math.min(o,l.longitude),a=Math.max(a,l.longitude))}return this.minLatitude=n,this.maxLatitude=i,this.minLongitude=o,this.maxLongitude=a,this},a.splitBoundingSectors=function(t){if(!t||t.length<2)throw new e(r.logMessage(r.LEVEL_SEVERE,"Sector","splitBoundingSectors","missingArray"));for(var n=90,i=180,s=-90,u=-180,l=null,c=0,h=t.length;c<h;c+=1){var f=t[c],p=f.latitude;p<n&&(n=p),p>s&&(s=p);var d=f.longitude;if(d>=0&&d<i&&(i=d),d<=0&&d>u&&(u=d),null!=l){var g=l.longitude;o.signum(d)!=o.signum(g)&&Math.abs(d-g)<180&&(u=0,i=0)}l=f}return n===s&&i===u?null:[new a(n,s,i,180),new a(n,s,-180,u)]},a.prototype.intersects=function(t){return t&&this.minLongitude<=t.maxLongitude&&this.maxLongitude>=t.minLongitude&&this.minLatitude<=t.maxLatitude&&this.maxLatitude>=t.minLatitude},a.prototype.overlaps=function(t){return t&&this.minLongitude<t.maxLongitude&&this.maxLongitude>t.minLongitude&&this.minLatitude<t.maxLatitude&&this.maxLatitude>t.minLatitude},a.prototype.contains=function(t){return t&&this.minLatitude<=t.minLatitude&&this.maxLatitude>=t.maxLatitude&&this.minLongitude<=t.minLongitude&&this.maxLongitude>=t.maxLongitude},a.prototype.containsLocation=function(t,e){return this.minLatitude<=t&&this.maxLatitude>=t&&this.minLongitude<=e&&this.maxLongitude>=e},a.prototype.intersection=function(t){if(!t instanceof a)throw new e(r.logMessage(r.LEVEL_SEVERE,"Sector","intersection","missingSector"));return this.minLatitude<t.minLatitude&&(this.minLatitude=t.minLatitude),this.maxLatitude>t.maxLatitude&&(this.maxLatitude=t.maxLatitude),this.minLongitude<t.minLongitude&&(this.minLongitude=t.minLongitude),this.maxLongitude>t.maxLongitude&&(this.maxLongitude=t.maxLongitude),this.maxLatitude<this.minLatitude&&(this.maxLatitude=this.minLatitude),this.maxLongitude<this.minLongitude&&(this.maxLongitude=this.minLongitude),this},a.prototype.getCorners=function(){var t=[];return t.push(new n(this.minLatitude,this.minLongitude)),t.push(new n(this.minLatitude,this.maxLongitude)),t.push(new n(this.maxLatitude,this.maxLongitude)),t.push(new n(this.maxLatitude,this.minLongitude)),t},a.prototype.computeBoundingPoints=function(t,o){if(null===t)throw new e(r.logMessage(r.LEVEL_SEVERE,"Sector","computeBoundingBox","missingGlobe"));var a=t.minAndMaxElevationsForSector(this),s=a[0]*o,u=a[1]*o;s===u&&(u=s+10);for(var l=[],c=this.getCorners(),h=0;h<c.length;h++)l.push(t.computePointFromPosition(c[h].latitude,c[h].longitude,s,new i(0,0,0))),l.push(t.computePointFromPosition(c[h].latitude,c[h].longitude,u,new i(0,0,0)));var f=this.centroid(new n(0,0));if(l.push(t.computePointFromPosition(f.latitude,f.longitude,u,new i(0,0,0))),this.minLatitude<0&&this.maxLatitude>0?(l.push(t.computePointFromPosition(this.minLatitude,f.longitude,u,new i(0,0,0))),l.push(t.computePointFromPosition(this.maxLatitude,f.longitude,u,new i(0,0,0))),l.push(t.computePointFromPosition(0,this.minLongitude,u,new i(0,0,0))),l.push(t.computePointFromPosition(0,this.maxLongitude,u,new i(0,0,0)))):this.minLatitude<0?l.push(t.computePointFromPosition(this.maxLatitude,f.longitude,u,new i(0,0,0))):l.push(t.computePointFromPosition(this.minLatitude,f.longitude,u,new i(0,0,0))),this.deltaLongitude()>=360){var p=this.minLatitude;l.push(t.computePointFromPosition(p,0,u,new i(0,0,0))),l.push(t.computePointFromPosition(p,90,u,new i(0,0,0))),l.push(t.computePointFromPosition(p,-90,u,new i(0,0,0))),l.push(t.computePointFromPosition(p,180,u,new i(0,0,0)));var d=this.maxLatitude;l.push(t.computePointFromPosition(d,0,u,new i(0,0,0))),l.push(t.computePointFromPosition(d,90,u,new i(0,0,0))),l.push(t.computePointFromPosition(d,-90,u,new i(0,0,0))),l.push(t.computePointFromPosition(d,180,u,new i(0,0,0)))}else if(this.deltaLongitude()>180){var g=f.longitude,m=f.latitude,y=(this.minLongitude+g)/2;l.push(t.computePointFromPosition(m,y,u,new i(0,0,0))),y=(g+this.maxLongitude)/2,l.push(t.computePointFromPosition(m,y,u,new i(0,0,0))),l.push(t.computePointFromPosition(m,this.minLongitude,u,new i(0,0,0))),l.push(t.computePointFromPosition(m,this.maxLongitude,u,new i(0,0,0)))}return l},a.prototype.union=function(t){if(!t instanceof a)throw new e(r.logMessage(r.LEVEL_SEVERE,"Sector","union","missingSector"));return this.minLatitude>t.minLatitude&&(this.minLatitude=t.minLatitude),this.maxLatitude<t.maxLatitude&&(this.maxLatitude=t.maxLatitude),this.minLongitude>t.minLongitude&&(this.minLongitude=t.minLongitude),this.maxLongitude<t.maxLongitude&&(this.maxLongitude=t.maxLongitude),this},a}));var o={DEBUG:!1,assert:function(t,e){if(o.DEBUG&&!t)throw new Error("Assertion failed"+(e?": "+e:""))},GLU_TESS_MAX_COORD:1e150,TRUE_PROJECT:!1,TESS_MAX_CACHE:100,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901}};return o.PQHandle,o.PQKey,o.geom={},o.geom.vertEq=function(t,e){return t.s===e.s&&t.t===e.t},o.geom.vertLeq=function(t,e){return t.s<e.s||t.s===e.s&&t.t<=e.t},o.geom.edgeEval=function(t,e,n){var r=e.s-t.s,i=n.s-e.s;return r+i>0?r<i?e.t-t.t+(t.t-n.t)*(r/(r+i)):e.t-n.t+(n.t-t.t)*(i/(r+i)):0},o.geom.edgeSign=function(t,e,n){var r=e.s-t.s,i=n.s-e.s;return r+i>0?(e.t-n.t)*r+(e.t-t.t)*i:0},o.geom.transLeq=function(t,e){return t.t<e.t||t.t===e.t&&t.s<=e.s},o.geom.transEval=function(t,e,n){var r=e.t-t.t,i=n.t-e.t;return r+i>0?r<i?e.s-t.s+(t.s-n.s)*(r/(r+i)):e.s-n.s+(n.s-t.s)*(i/(r+i)):0},o.geom.transSign=function(t,e,n){var r=e.t-t.t,i=n.t-e.t;return r+i>0?(e.s-n.s)*r+(e.s-t.s)*i:0},o.geom.edgeGoesLeft=function(t){return o.geom.vertLeq(t.dst(),t.org)},o.geom.edgeGoesRight=function(t){return o.geom.vertLeq(t.org,t.dst())},o.geom.vertL1dist=function(t,e){return Math.abs(t.s-e.s)+Math.abs(t.t-e.t)},o.geom.vertCCW=function(t,e,n){return t.s*(e.t-n.t)+e.s*(n.t-t.t)+n.s*(t.t-e.t)>=0},o.geom.interpolate_=function(t,e,n,r){return(t=t<0?0:t)<=(n=n<0?0:n)?0===n?(e+r)/2:e+t/(t+n)*(r-e):r+n/(t+n)*(e-r)},o.geom.edgeIntersect=function(t,e,n,r,i){var a,s,u;o.geom.vertLeq(t,e)||(u=t,t=e,e=u),o.geom.vertLeq(n,r)||(u=n,n=r,r=u),o.geom.vertLeq(t,n)||(u=t,t=n,n=u,u=e,e=r,r=u),o.geom.vertLeq(n,e)?o.geom.vertLeq(e,r)?((a=o.geom.edgeEval(t,n,e))+(s=o.geom.edgeEval(n,e,r))<0&&(a=-a,s=-s),i.s=o.geom.interpolate_(a,n.s,s,e.s)):((a=o.geom.edgeSign(t,n,e))+(s=-o.geom.edgeSign(t,r,e))<0&&(a=-a,s=-s),i.s=o.geom.interpolate_(a,n.s,s,r.s)):i.s=(n.s+e.s)/2,o.geom.transLeq(t,e)||(u=t,t=e,e=u),o.geom.transLeq(n,r)||(u=n,n=r,r=u),o.geom.transLeq(t,n)||(u=t,t=n,n=u,u=e,e=r,r=u),o.geom.transLeq(n,e)?o.geom.transLeq(e,r)?((a=o.geom.transEval(t,n,e))+(s=o.geom.transEval(n,e,r))<0&&(a=-a,s=-s),i.t=o.geom.interpolate_(a,n.t,s,e.t)):((a=o.geom.transSign(t,n,e))+(s=-o.geom.transSign(t,r,e))<0&&(a=-a,s=-s),i.t=o.geom.interpolate_(a,n.t,s,r.t)):i.t=(n.t+e.t)/2},o.mesh={},o.mesh.makeEdge=function(t){var e=o.mesh.makeEdgePair_(t.eHead);return o.mesh.makeVertex_(e,t.vHead),o.mesh.makeVertex_(e.sym,t.vHead),o.mesh.makeFace_(e,t.fHead),e},o.mesh.meshSplice=function(t,e){var n=!1,r=!1;t!==e&&(e.org!==t.org&&(r=!0,o.mesh.killVertex_(e.org,t.org)),e.lFace!==t.lFace&&(n=!0,o.mesh.killFace_(e.lFace,t.lFace)),o.mesh.splice_(e,t),r||(o.mesh.makeVertex_(e,t.org),t.org.anEdge=t),n||(o.mesh.makeFace_(e,t.lFace),t.lFace.anEdge=t))},o.mesh.deleteEdge=function(t){var e=t.sym,n=!1;t.lFace!==t.rFace()&&(n=!0,o.mesh.killFace_(t.lFace,t.rFace())),t.oNext===t?o.mesh.killVertex_(t.org,null):(t.rFace().anEdge=t.oPrev(),t.org.anEdge=t.oNext,o.mesh.splice_(t,t.oPrev()),n||o.mesh.makeFace_(t,t.lFace)),e.oNext===e?(o.mesh.killVertex_(e.org,null),o.mesh.killFace_(e.lFace,null)):(t.lFace.anEdge=e.oPrev(),e.org.anEdge=e.oNext,o.mesh.splice_(e,e.oPrev())),o.mesh.killEdge_(t)},o.mesh.addEdgeVertex=function(t){var e=o.mesh.makeEdgePair_(t),n=e.sym;return o.mesh.splice_(e,t.lNext),e.org=t.dst(),o.mesh.makeVertex_(n,e.org),e.lFace=n.lFace=t.lFace,e},o.mesh.splitEdge=function(t){var e=o.mesh.addEdgeVertex(t).sym;return o.mesh.splice_(t.sym,t.sym.oPrev()),o.mesh.splice_(t.sym,e),t.sym.org=e.org,e.dst().anEdge=e.sym,e.sym.lFace=t.rFace(),e.winding=t.winding,e.sym.winding=t.sym.winding,e},o.mesh.connect=function(t,e){var n=!1,r=o.mesh.makeEdgePair_(t),i=r.sym;return e.lFace!==t.lFace&&(n=!0,o.mesh.killFace_(e.lFace,t.lFace)),o.mesh.splice_(r,t.lNext),o.mesh.splice_(i,e),r.org=t.dst(),i.org=e.org,r.lFace=i.lFace=t.lFace,t.lFace.anEdge=i,n||o.mesh.makeFace_(r,t.lFace),r},o.mesh.zapFace=function(t){var e,n=t.anEdge,r=n.lNext;do{if(r=(e=r).lNext,e.lFace=null,null===e.rFace()){e.oNext===e?o.mesh.killVertex_(e.org,null):(e.org.anEdge=e.oNext,o.mesh.splice_(e,e.oPrev()));var i=e.sym;i.oNext===i?o.mesh.killVertex_(i.org,null):(i.org.anEdge=i.oNext,o.mesh.splice_(i,i.oPrev())),o.mesh.killEdge_(e)}}while(e!==n);var a=t.prev,s=t.next;s.prev=a,a.next=s},o.mesh.meshUnion=function(t,e){var n=t.fHead,r=t.vHead,i=t.eHead,o=e.fHead,a=e.vHead,s=e.eHead;return o.next!==o&&(n.prev.next=o.next,o.next.prev=n.prev,o.prev.next=n,n.prev=o.prev),a.next!==a&&(r.prev.next=a.next,a.next.prev=r.prev,a.prev.next=r,r.prev=a.prev),s.next!==s&&(i.sym.next.sym.next=s.next,s.next.sym.next=i.sym.next,s.sym.next.sym.next=i,i.sym.next=s.sym.next),t},o.mesh.deleteMesh=function(t){},o.mesh.makeEdgePair_=function(t){var e=new o.GluHalfEdge,n=new o.GluHalfEdge,r=t.sym.next;return n.next=r,r.sym.next=e,e.next=t,t.sym.next=n,e.sym=n,e.oNext=e,e.lNext=n,n.sym=e,n.oNext=n,n.lNext=e,e},o.mesh.splice_=function(t,e){var n=t.oNext,r=e.oNext;n.sym.lNext=e,r.sym.lNext=t,t.oNext=r,e.oNext=n},o.mesh.makeVertex_=function(t,e){var n=e.prev,r=new o.GluVertex(e,n);n.next=r,e.prev=r,r.anEdge=t;var i=t;do{i.org=r,i=i.oNext}while(i!==t)},o.mesh.makeFace_=function(t,e){var n=e.prev,r=new o.GluFace(e,n);n.next=r,e.prev=r,r.anEdge=t,r.inside=e.inside;var i=t;do{i.lFace=r,i=i.lNext}while(i!==t)},o.mesh.killEdge_=function(t){var e=t.next,n=t.sym.next;e.sym.next=n,n.sym.next=e},o.mesh.killVertex_=function(t,e){var n=t.anEdge,r=n;do{r.org=e,r=r.oNext}while(r!==n);var i=t.prev,o=t.next;o.prev=i,i.next=o},o.mesh.killFace_=function(t,e){var n=t.anEdge,r=n;do{r.lFace=e,r=r.lNext}while(r!==n);var i=t.prev,o=t.next;o.prev=i,i.next=o},o.normal={},o.normal.S_UNIT_X_=1,o.normal.S_UNIT_Y_=0,o.normal.projectPolygon=function(t){var e=!1,n=[t.normal[0],t.normal[1],t.normal[2]];0===n[0]&&0===n[1]&&0===n[2]&&(o.normal.computeNormal_(t,n),e=!0);var r=t.sUnit,i=t.tUnit,a=o.normal.longAxis_(n);if(o.TRUE_PROJECT){o.normal.normalize_(n),r[a]=0,r[(a+1)%3]=o.normal.S_UNIT_X_,r[(a+2)%3]=o.normal.S_UNIT_Y_;var s=o.normal.dot_(r,n);r[0]-=s*n[0],r[1]-=s*n[1],r[2]-=s*n[2],o.normal.normalize_(r),i[0]=n[1]*r[2]-n[2]*r[1],i[1]=n[2]*r[0]-n[0]*r[2],i[2]=n[0]*r[1]-n[1]*r[0],o.normal.normalize_(i)}else r[a]=0,r[(a+1)%3]=o.normal.S_UNIT_X_,r[(a+2)%3]=o.normal.S_UNIT_Y_,i[a]=0,i[(a+1)%3]=n[a]>0?-o.normal.S_UNIT_Y_:o.normal.S_UNIT_Y_,i[(a+2)%3]=n[a]>0?o.normal.S_UNIT_X_:-o.normal.S_UNIT_X_;for(var u=t.mesh.vHead,l=u.next;l!==u;l=l.next)l.s=o.normal.dot_(l.coords,r),l.t=o.normal.dot_(l.coords,i);e&&o.normal.checkOrientation_(t)},o.normal.dot_=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},o.normal.normalize_=function(t){var e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];e=Math.sqrt(e),t[0]/=e,t[1]/=e,t[2]/=e},o.normal.longAxis_=function(t){var e=0;return Math.abs(t[1])>Math.abs(t[0])&&(e=1),Math.abs(t[2])>Math.abs(t[e])&&(e=2),e},o.normal.computeNormal_=function(t,e){var n,r=[-2*o.GLU_TESS_MAX_COORD,-2*o.GLU_TESS_MAX_COORD,-2*o.GLU_TESS_MAX_COORD],i=[2*o.GLU_TESS_MAX_COORD,2*o.GLU_TESS_MAX_COORD,2*o.GLU_TESS_MAX_COORD],a=[],s=[],u=t.mesh.vHead;for(n=u.next;n!==u;n=n.next)for(var l=0;l<3;++l){var c=n.coords[l];c<i[l]&&(i[l]=c,s[l]=n),c>r[l]&&(r[l]=c,a[l]=n)}var h=0;if(r[1]-i[1]>r[0]-i[0]&&(h=1),r[2]-i[2]>r[h]-i[h]&&(h=2),i[h]>=r[h])return e[0]=0,e[1]=0,void(e[2]=1);var f=0,p=s[h],d=a[h],g=[0,0,0],m=[p.coords[0]-d.coords[0],p.coords[1]-d.coords[1],p.coords[2]-d.coords[2]],y=[0,0,0];for(n=u.next;n!==u;n=n.next){y[0]=n.coords[0]-d.coords[0],y[1]=n.coords[1]-d.coords[1],y[2]=n.coords[2]-d.coords[2],g[0]=m[1]*y[2]-m[2]*y[1],g[1]=m[2]*y[0]-m[0]*y[2],g[2]=m[0]*y[1]-m[1]*y[0];var v=g[0]*g[0]+g[1]*g[1]+g[2]*g[2];v>f&&(f=v,e[0]=g[0],e[1]=g[1],e[2]=g[2])}f<=0&&(e[0]=e[1]=e[2]=0,e[o.normal.longAxis_(m)]=1)},o.normal.checkOrientation_=function(t){for(var e=0,n=t.mesh.fHead,r=n.next;r!==n;r=r.next){var i=r.anEdge;if(!(i.winding<=0))do{e+=(i.org.s-i.dst().s)*(i.org.t+i.dst().t),i=i.lNext}while(i!==r.anEdge)}if(e<0){for(var o=t.mesh.vHead,a=o.next;a!==o;a=a.next)a.t=-a.t;t.tUnit[0]=-t.tUnit[0],t.tUnit[1]=-t.tUnit[1],t.tUnit[2]=-t.tUnit[2]}},o.render={},o.render.renderMesh=function(t,e,n){for(var r=!1,i=-1,a=e.fHead.prev;a!==e.fHead;a=a.prev)if(a.inside){r||(t.callBeginOrBeginData(o.primitiveType.GL_TRIANGLES),r=!0);var s=a.anEdge;do{if(n){var u=s.rFace().inside?0:1;i!==u&&(i=u,t.callEdgeFlagOrEdgeFlagData(!!i))}t.callVertexOrVertexData(s.org.data),s=s.lNext}while(s!==a.anEdge)}r&&t.callEndOrEndData()},o.render.renderBoundary=function(t,e){for(var n=e.fHead.next;n!==e.fHead;n=n.next)if(n.inside){t.callBeginOrBeginData(o.primitiveType.GL_LINE_LOOP);var r=n.anEdge;do{t.callVertexOrVertexData(r.org.data),r=r.lNext}while(r!==n.anEdge);t.callEndOrEndData()}},o.sweep={},o.sweep.SENTINEL_COORD_=4*o.GLU_TESS_MAX_COORD,o.sweep.TOLERANCE_NONZERO_=!1,o.sweep.computeInterior=function(t){t.fatalError=!1,o.sweep.removeDegenerateEdges_(t),o.sweep.initPriorityQ_(t),o.sweep.initEdgeDict_(t);for(var e;null!==(e=t.pq.extractMin());){for(;;){var n=t.pq.minimum();if(null===n||!o.geom.vertEq(n,e))break;n=t.pq.extractMin(),o.sweep.spliceMergeVertices_(t,e.anEdge,n.anEdge)}o.sweep.sweepEvent_(t,e)}var r=t.dict.getMin().getKey();t.event=r.eUp.org,o.sweep.doneEdgeDict_(t),o.sweep.donePriorityQ_(t),o.sweep.removeDegenerateFaces_(t.mesh),t.mesh.checkMesh()},o.sweep.addWinding_=function(t,e){t.winding+=e.winding,t.sym.winding+=e.sym.winding},o.sweep.edgeLeq_=function(t,e,n){var r=t.event,i=e.eUp,a=n.eUp;return i.dst()===r?a.dst()===r?o.geom.vertLeq(i.org,a.org)?o.geom.edgeSign(a.dst(),i.org,a.org)<=0:o.geom.edgeSign(i.dst(),a.org,i.org)>=0:o.geom.edgeSign(a.dst(),r,a.org)<=0:a.dst()===r?o.geom.edgeSign(i.dst(),r,i.org)>=0:o.geom.edgeEval(i.dst(),r,i.org)>=o.geom.edgeEval(a.dst(),r,a.org)},o.sweep.deleteRegion_=function(t,e){e.fixUpperEdge,e.eUp.activeRegion=null,t.dict.deleteNode(e.nodeUp),e.nodeUp=null},o.sweep.fixUpperEdge_=function(t,e){o.mesh.deleteEdge(t.eUp),t.fixUpperEdge=!1,t.eUp=e,e.activeRegion=t},o.sweep.topLeftRegion_=function(t){var e=t.eUp.org;do{t=t.regionAbove()}while(t.eUp.org===e);if(t.fixUpperEdge){var n=o.mesh.connect(t.regionBelow().eUp.sym,t.eUp.lNext);o.sweep.fixUpperEdge_(t,n),t=t.regionAbove()}return t},o.sweep.topRightRegion_=function(t){var e=t.eUp.dst();do{t=t.regionAbove()}while(t.eUp.dst()===e);return t},o.sweep.addRegionBelow_=function(t,e,n){var r=new o.ActiveRegion;return r.eUp=n,r.nodeUp=t.dict.insertBefore(e.nodeUp,r),n.activeRegion=r,r},o.sweep.isWindingInside_=function(t,e){switch(t.windingRule){case o.windingRule.GLU_TESS_WINDING_ODD:return 0!==(1&e);case o.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==e;case o.windingRule.GLU_TESS_WINDING_POSITIVE:return e>0;case o.windingRule.GLU_TESS_WINDING_NEGATIVE:return e<0;case o.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return e>=2||e<=-2}return!1},o.sweep.computeWinding_=function(t,e){e.windingNumber=e.regionAbove().windingNumber+e.eUp.winding,e.inside=o.sweep.isWindingInside_(t,e.windingNumber)},o.sweep.finishRegion_=function(t,e){var n=e.eUp,r=n.lFace;r.inside=e.inside,r.anEdge=n,o.sweep.deleteRegion_(t,e)},o.sweep.finishLeftRegions_=function(t,e,n){for(var r=e,i=e.eUp;r!==n;){r.fixUpperEdge=!1;var a=r.regionBelow(),s=a.eUp;if(s.org!==i.org){if(!a.fixUpperEdge){o.sweep.finishRegion_(t,r);break}s=o.mesh.connect(i.lPrev(),s.sym),o.sweep.fixUpperEdge_(a,s)}i.oNext!==s&&(o.mesh.meshSplice(s.oPrev(),s),o.mesh.meshSplice(i,s)),o.sweep.finishRegion_(t,r),i=a.eUp,r=a}return i},o.sweep.addRightEdges_=function(t,e,n,r,i,a){var s=!0,u=n;do{o.sweep.addRegionBelow_(t,e,u.sym),u=u.oNext}while(u!==r);null===i&&(i=e.regionBelow().eUp.rPrev());for(var l,c=e,h=i;(u=(l=c.regionBelow()).eUp.sym).org===h.org;)u.oNext!==h&&(o.mesh.meshSplice(u.oPrev(),u),o.mesh.meshSplice(h.oPrev(),u)),l.windingNumber=c.windingNumber-u.winding,l.inside=o.sweep.isWindingInside_(t,l.windingNumber),c.dirty=!0,!s&&o.sweep.checkForRightSplice_(t,c)&&(o.sweep.addWinding_(u,h),o.sweep.deleteRegion_(t,c),o.mesh.deleteEdge(h)),s=!1,c=l,h=u;c.dirty=!0,a&&o.sweep.walkDirtyRegions_(t,c)},o.sweep.callCombine_=function(t,e,n,r,i){var a=[e.coords[0],e.coords[1],e.coords[2]];e.data=null,e.data=t.callCombineOrCombineData(a,n,r),null===e.data&&(i?t.fatalError||(t.callErrorOrErrorData(o.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),t.fatalError=!0):e.data=n[0])},o.sweep.spliceMergeVertices_=function(t,e,n){var r=[null,null,null,null];r[0]=e.org.data,r[1]=n.org.data,o.sweep.callCombine_(t,e.org,r,[.5,.5,0,0],!1),o.mesh.meshSplice(e,n)},o.sweep.vertexWeights_=function(t,e,n,r,i){var a=o.geom.vertL1dist(e,t),s=o.geom.vertL1dist(n,t),u=i,l=i+1;r[u]=.5*s/(a+s),r[l]=.5*a/(a+s),t.coords[0]+=r[u]*e.coords[0]+r[l]*n.coords[0],t.coords[1]+=r[u]*e.coords[1]+r[l]*n.coords[1],t.coords[2]+=r[u]*e.coords[2]+r[l]*n.coords[2]},o.sweep.getIntersectData_=function(t,e,n,r,i,a){var s=[0,0,0,0],u=[n.data,r.data,i.data,a.data];e.coords[0]=e.coords[1]=e.coords[2]=0,o.sweep.vertexWeights_(e,n,r,s,0),o.sweep.vertexWeights_(e,i,a,s,2),o.sweep.callCombine_(t,e,u,s,!0)},o.sweep.checkForRightSplice_=function(t,e){var n=e.regionBelow(),r=e.eUp,i=n.eUp;if(o.geom.vertLeq(r.org,i.org)){if(o.geom.edgeSign(i.dst(),r.org,i.org)>0)return!1;o.geom.vertEq(r.org,i.org)?r.org!==i.org&&(t.pq.remove(r.org.pqHandle),o.sweep.spliceMergeVertices_(t,i.oPrev(),r)):(o.mesh.splitEdge(i.sym),o.mesh.meshSplice(r,i.oPrev()),e.dirty=n.dirty=!0)}else{if(o.geom.edgeSign(r.dst(),i.org,r.org)<0)return!1;e.regionAbove().dirty=e.dirty=!0,o.mesh.splitEdge(r.sym),o.mesh.meshSplice(i.oPrev(),r)}return!0},o.sweep.checkForLeftSplice_=function(t,e){var n,r=e.regionBelow(),i=e.eUp,a=r.eUp;if(o.geom.vertLeq(i.dst(),a.dst())){if(o.geom.edgeSign(i.dst(),a.dst(),i.org)<0)return!1;e.regionAbove().dirty=e.dirty=!0,n=o.mesh.splitEdge(i),o.mesh.meshSplice(a.sym,n),n.lFace.inside=e.inside}else{if(o.geom.edgeSign(a.dst(),i.dst(),a.org)>0)return!1;e.dirty=r.dirty=!0,n=o.mesh.splitEdge(a),o.mesh.meshSplice(i.lNext,a.sym),n.rFace().inside=e.inside}return!0},o.sweep.checkForIntersect_=function(t,e){var n=e.regionBelow(),r=e.eUp,i=n.eUp,a=r.org,s=i.org,u=r.dst(),l=i.dst(),c=new o.GluVertex;if(a===s)return!1;if(Math.min(a.t,u.t)>Math.max(s.t,l.t))return!1;if(o.geom.vertLeq(a,s)){if(o.geom.edgeSign(l,a,s)>0)return!1}else if(o.geom.edgeSign(u,s,a)<0)return!1;o.geom.edgeIntersect(u,a,l,s,c),o.geom.vertLeq(c,t.event)&&(c.s=t.event.s,c.t=t.event.t);var h=o.geom.vertLeq(a,s)?a:s;if(o.geom.vertLeq(h,c)&&(c.s=h.s,c.t=h.t),o.geom.vertEq(c,a)||o.geom.vertEq(c,s))return o.sweep.checkForRightSplice_(t,e),!1;if(!o.geom.vertEq(u,t.event)&&o.geom.edgeSign(u,t.event,c)>=0||!o.geom.vertEq(l,t.event)&&o.geom.edgeSign(l,t.event,c)<=0){if(l===t.event)return o.mesh.splitEdge(r.sym),o.mesh.meshSplice(i.sym,r),r=(e=o.sweep.topLeftRegion_(e)).regionBelow().eUp,o.sweep.finishLeftRegions_(t,e.regionBelow(),n),o.sweep.addRightEdges_(t,e,r.oPrev(),r,r,!0),!0;if(u===t.event){o.mesh.splitEdge(i.sym),o.mesh.meshSplice(r.lNext,i.oPrev()),n=e;var f=(e=o.sweep.topRightRegion_(e)).regionBelow().eUp.rPrev();return n.eUp=i.oPrev(),i=o.sweep.finishLeftRegions_(t,n,null),o.sweep.addRightEdges_(t,e,i.oNext,r.rPrev(),f,!0),!0}return o.geom.edgeSign(u,t.event,c)>=0&&(e.regionAbove().dirty=e.dirty=!0,o.mesh.splitEdge(r.sym),r.org.s=t.event.s,r.org.t=t.event.t),o.geom.edgeSign(l,t.event,c)<=0&&(e.dirty=n.dirty=!0,o.mesh.splitEdge(i.sym),i.org.s=t.event.s,i.org.t=t.event.t),!1}return o.mesh.splitEdge(r.sym),o.mesh.splitEdge(i.sym),o.mesh.meshSplice(i.oPrev(),r),r.org.s=c.s,r.org.t=c.t,r.org.pqHandle=t.pq.insert(r.org),o.sweep.getIntersectData_(t,r.org,a,u,s,l),e.regionAbove().dirty=e.dirty=n.dirty=!0,!1},o.sweep.walkDirtyRegions_=function(t,e){for(var n=e.regionBelow();;){for(;n.dirty;)e=n,n=n.regionBelow();if(!e.dirty&&(n=e,null===(e=e.regionAbove())||!e.dirty))return;e.dirty=!1;var r=e.eUp,i=n.eUp;if(r.dst()!==i.dst()&&o.sweep.checkForLeftSplice_(t,e)&&(n.fixUpperEdge?(o.sweep.deleteRegion_(t,n),o.mesh.deleteEdge(i),i=(n=e.regionBelow()).eUp):e.fixUpperEdge&&(o.sweep.deleteRegion_(t,e),o.mesh.deleteEdge(r),r=(e=n.regionAbove()).eUp)),r.org!==i.org)if(r.dst()===i.dst()||e.fixUpperEdge||n.fixUpperEdge||r.dst()!==t.event&&i.dst()!==t.event)o.sweep.checkForRightSplice_(t,e);else if(o.sweep.checkForIntersect_(t,e))return;r.org===i.org&&r.dst()===i.dst()&&(o.sweep.addWinding_(i,r),o.sweep.deleteRegion_(t,e),o.mesh.deleteEdge(r),e=n.regionAbove())}},o.sweep.connectRightVertex_=function(t,e,n){var r,i=n.oNext,a=e.regionBelow(),s=e.eUp,u=a.eUp,l=!1;s.dst()!==u.dst()&&o.sweep.checkForIntersect_(t,e),o.geom.vertEq(s.org,t.event)&&(o.mesh.meshSplice(i.oPrev(),s),i=(e=o.sweep.topLeftRegion_(e)).regionBelow().eUp,o.sweep.finishLeftRegions_(t,e.regionBelow(),a),l=!0),o.geom.vertEq(u.org,t.event)&&(o.mesh.meshSplice(n,u.oPrev()),n=o.sweep.finishLeftRegions_(t,a,null),l=!0),l?o.sweep.addRightEdges_(t,e,n.oNext,i,i,!0):(r=o.geom.vertLeq(u.org,s.org)?u.oPrev():s,r=o.mesh.connect(n.lPrev(),r),o.sweep.addRightEdges_(t,e,r,r.oNext,r.oNext,!1),r.sym.activeRegion.fixUpperEdge=!0,o.sweep.walkDirtyRegions_(t,e))},o.sweep.connectLeftDegenerate_=function(t,e,n){var r=e.eUp;if(o.geom.vertEq(r.org,n))o.sweep.TOLERANCE_NONZERO_&&o.sweep.spliceMergeVertices_(t,r,n.anEdge);else{if(!o.geom.vertEq(r.dst(),n))return o.mesh.splitEdge(r.sym),e.fixUpperEdge&&(o.mesh.deleteEdge(r.oNext),e.fixUpperEdge=!1),o.mesh.meshSplice(n.anEdge,r),void o.sweep.sweepEvent_(t,n);if(o.sweep.TOLERANCE_NONZERO_){var i=(e=o.sweep.topRightRegion_(e)).regionBelow(),a=i.eUp.sym,s=a.oNext,u=s;i.fixUpperEdge&&(o.sweep.deleteRegion_(t,i),o.mesh.deleteEdge(a),a=s.oPrev()),o.mesh.meshSplice(n.anEdge,a),o.geom.edgeGoesLeft(s)||(s=null),o.sweep.addRightEdges_(t,e,a.oNext,u,s,!0)}}},o.sweep.connectLeftVertex_=function(t,e){var n=new o.ActiveRegion;n.eUp=e.anEdge.sym;var r=t.dict.search(n).getKey(),i=r.regionBelow(),a=r.eUp,s=i.eUp;if(0!==o.geom.edgeSign(a.dst(),e,a.org)){var u,l=o.geom.vertLeq(s.dst(),a.dst())?r:i;r.inside||l.fixUpperEdge?(u=l===r?o.mesh.connect(e.anEdge.sym,a.lNext):o.mesh.connect(s.dNext(),e.anEdge).sym,l.fixUpperEdge?o.sweep.fixUpperEdge_(l,u):o.sweep.computeWinding_(t,o.sweep.addRegionBelow_(t,r,u)),o.sweep.sweepEvent_(t,e)):o.sweep.addRightEdges_(t,r,e.anEdge,e.anEdge,null,!0)}else o.sweep.connectLeftDegenerate_(t,r,e)},o.sweep.sweepEvent_=function(t,e){t.event=e;for(var n=e.anEdge;null===n.activeRegion;)if((n=n.oNext)===e.anEdge)return void o.sweep.connectLeftVertex_(t,e);var r=o.sweep.topLeftRegion_(n.activeRegion),i=r.regionBelow(),a=i.eUp,s=o.sweep.finishLeftRegions_(t,i,null);s.oNext===a?o.sweep.connectRightVertex_(t,r,s):o.sweep.addRightEdges_(t,r,s.oNext,a,a,!0)},o.sweep.addSentinel_=function(t,e){var n=new o.ActiveRegion,r=o.mesh.makeEdge(t.mesh);r.org.s=o.sweep.SENTINEL_COORD_,r.org.t=e,r.dst().s=-o.sweep.SENTINEL_COORD_,r.dst().t=e,t.event=r.dst(),n.eUp=r,n.windingNumber=0,n.inside=!1,n.fixUpperEdge=!1,n.sentinel=!0,n.dirty=!1,n.nodeUp=t.dict.insert(n)},o.sweep.initEdgeDict_=function(t){t.dict=new o.Dict(t,o.sweep.edgeLeq_),o.sweep.addSentinel_(t,-o.sweep.SENTINEL_COORD_),o.sweep.addSentinel_(t,o.sweep.SENTINEL_COORD_)},o.sweep.doneEdgeDict_=function(t){for(var e;null!==(e=t.dict.getMin().getKey());)e.sentinel,o.sweep.deleteRegion_(t,e);t.dict=null},o.sweep.removeDegenerateEdges_=function(t){for(var e,n=t.mesh.eHead,r=n.next;r!==n;r=e){e=r.next;var i=r.lNext;o.geom.vertEq(r.org,r.dst())&&r.lNext.lNext!==r&&(o.sweep.spliceMergeVertices_(t,i,r),o.mesh.deleteEdge(r),i=(r=i).lNext),i.lNext===r&&(i!==r&&(i!==e&&i!==e.sym||(e=e.next),o.mesh.deleteEdge(i)),r!==e&&r!==e.sym||(e=e.next),o.mesh.deleteEdge(r))}},o.sweep.initPriorityQ_=function(t){var e=new o.PriorityQ(o.geom.vertLeq);t.pq=e;var n,r=t.mesh.vHead;for(n=r.next;n!==r;n=n.next)n.pqHandle=e.insert(n);e.init()},o.sweep.donePriorityQ_=function(t){t.pq.deleteQ(),t.pq=null},o.sweep.removeDegenerateFaces_=function(t){for(var e,n=t.fHead.next;n!==t.fHead;n=e){e=n.next;var r=n.anEdge;r.lNext.lNext===r&&(o.sweep.addWinding_(r.oNext,r),o.mesh.deleteEdge(r))}},o.tessmono={},o.tessmono.tessellateMonoRegion_=function(t){for(var e=t.anEdge;o.geom.vertLeq(e.dst(),e.org);e=e.lPrev());for(;o.geom.vertLeq(e.org,e.dst());e=e.lNext);for(var n,r=e.lPrev();e.lNext!==r;)if(o.geom.vertLeq(e.dst(),r.org)){for(;r.lNext!==e&&(o.geom.edgeGoesLeft(r.lNext)||o.geom.edgeSign(r.org,r.dst(),r.lNext.dst())<=0);)r=(n=o.mesh.connect(r.lNext,r)).sym;r=r.lPrev()}else{for(;r.lNext!==e&&(o.geom.edgeGoesRight(e.lPrev())||o.geom.edgeSign(e.dst(),e.org,e.lPrev().org)>=0);)n=o.mesh.connect(e,e.lPrev()),e=n.sym;e=e.lNext}for(;r.lNext.lNext!==e;)r=(n=o.mesh.connect(r.lNext,r)).sym},o.tessmono.tessellateInterior=function(t){for(var e,n=t.fHead.next;n!==t.fHead;n=e)e=n.next,n.inside&&o.tessmono.tessellateMonoRegion_(n)},o.tessmono.discardExterior=function(t){for(var e,n=t.fHead.next;n!==t.fHead;n=e)e=n.next,n.inside||o.mesh.zapFace(n)},o.tessmono.setWindingNumber=function(t,e,n){for(var r,i=t.eHead.next;i!==t.eHead;i=r)r=i.next,i.rFace().inside!==i.lFace.inside?i.winding=i.lFace.inside?e:-e:n?o.mesh.deleteEdge(i):i.winding=0},o.Dict=function(t,e){this.head_=new o.DictNode,this.frame_=t,this.leq_=e},o.Dict.prototype.deleteDict_=function(){},o.Dict.prototype.insertBefore=function(t,e){do{t=t.prev}while(null!==t.key&&!this.leq_(this.frame_,t.key,e));var n=new o.DictNode(e,t.next,t);return t.next.prev=n,t.next=n,n},o.Dict.prototype.insert=function(t){return this.insertBefore(this.head_,t)},o.Dict.prototype.deleteNode=function(t){t.next.prev=t.prev,t.prev.next=t.next},o.Dict.prototype.search=function(t){var e=this.head_;do{e=e.next}while(null!==e.key&&!this.leq_(this.frame_,t,e.key));return e},o.Dict.prototype.getMin=function(){return this.head_.next},o.Dict.prototype.getMax=function(){return this.head_.prev},o.DictNode=function(t,e,n){this.key=t||null,this.next=e||this,this.prev=n||this},o.DictNode.prototype.getKey=function(){return this.key},o.DictNode.prototype.getSuccessor=function(){return this.next},o.DictNode.prototype.getPredecessor=function(){return this.prev},o.CachedVertex=function(){this.coords=[0,0,0],this.data=null},o.GluTesselator=function(){this.state=o.GluTesselator.tessState_.T_DORMANT,this.lastEdge_=null,this.mesh=null,this.callError_=null,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.relTolerance=o.GLU_TESS_DEFAULT_TOLERANCE,this.windingRule=o.windingRule.GLU_TESS_WINDING_ODD,this.fatalError=!1,this.dict=null,this.pq=null,this.event=null,this.callCombine_=null,this.boundaryOnly=!1,this.callBegin_=null,this.callEdgeFlag_=null,this.callVertex_=null,this.callEnd_=null,this.callMesh_=null,this.callBeginData_=null,this.callEdgeFlagData_=null,this.callVertexData_=null,this.callEndData_=null,this.callErrorData_=null,this.callCombineData_=null,this.polygonData_=null,this.emptyCache=!1,this.cacheCount=0,this.cache=new Array(o.TESS_MAX_CACHE);for(var t=0;t<o.TESS_MAX_CACHE;t++)this.cache[t]=new o.CachedVertex},o.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2},o.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(o.GluTesselator.tessState_.T_DORMANT)},o.GluTesselator.prototype.gluTessProperty=function(t,e){switch(t){case o.gluEnum.GLU_TESS_TOLERANCE:if(e<0||e>1)break;return void(this.relTolerance=e);case o.gluEnum.GLU_TESS_WINDING_RULE:var n=e;switch(n){case o.windingRule.GLU_TESS_WINDING_ODD:case o.windingRule.GLU_TESS_WINDING_NONZERO:case o.windingRule.GLU_TESS_WINDING_POSITIVE:case o.windingRule.GLU_TESS_WINDING_NEGATIVE:case o.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return void(this.windingRule=n)}break;case o.gluEnum.GLU_TESS_BOUNDARY_ONLY:return void(this.boundaryOnly=!!e);default:return void this.callErrorOrErrorData(o.gluEnum.GLU_INVALID_ENUM)}this.callErrorOrErrorData(o.gluEnum.GLU_INVALID_VALUE)},o.GluTesselator.prototype.gluGetTessProperty=function(t){switch(t){case o.gluEnum.GLU_TESS_TOLERANCE:return this.relTolerance;case o.gluEnum.GLU_TESS_WINDING_RULE:return this.windingRule;case o.gluEnum.GLU_TESS_BOUNDARY_ONLY:return this.boundaryOnly;default:this.callErrorOrErrorData(o.gluEnum.GLU_INVALID_ENUM)}return!1},o.GluTesselator.prototype.gluTessNormal=function(t,e,n){this.normal[0]=t,this.normal[1]=e,this.normal[2]=n},o.GluTesselator.prototype.gluTessCallback=function(t,e){var n=e||null;switch(t){case o.gluEnum.GLU_TESS_BEGIN:return void(this.callBegin_=n);case o.gluEnum.GLU_TESS_BEGIN_DATA:return void(this.callBeginData_=n);case o.gluEnum.GLU_TESS_EDGE_FLAG:return void(this.callEdgeFlag_=n);case o.gluEnum.GLU_TESS_EDGE_FLAG_DATA:return void(this.callEdgeFlagData_=n);case o.gluEnum.GLU_TESS_VERTEX:return void(this.callVertex_=n);case o.gluEnum.GLU_TESS_VERTEX_DATA:return void(this.callVertexData_=n);case o.gluEnum.GLU_TESS_END:return void(this.callEnd_=n);case o.gluEnum.GLU_TESS_END_DATA:return void(this.callEndData_=n);case o.gluEnum.GLU_TESS_ERROR:return void(this.callError_=n);case o.gluEnum.GLU_TESS_ERROR_DATA:return void(this.callErrorData_=n);case o.gluEnum.GLU_TESS_COMBINE:return void(this.callCombine_=n);case o.gluEnum.GLU_TESS_COMBINE_DATA:return void(this.callCombineData_=n);case o.gluEnum.GLU_TESS_MESH:return void(this.callMesh_=n);default:return void this.callErrorOrErrorData(o.gluEnum.GLU_INVALID_ENUM)}},o.GluTesselator.prototype.gluTessVertex=function(t,e){var n=!1,r=[0,0,0];this.requireState_(o.GluTesselator.tessState_.T_IN_CONTOUR),this.emptyCache&&(this.emptyCache_(),this.lastEdge_=null);for(var i=0;i<3;++i){var a=t[i];a<-o.GLU_TESS_MAX_COORD&&(a=-o.GLU_TESS_MAX_COORD,n=!0),a>o.GLU_TESS_MAX_COORD&&(a=o.GLU_TESS_MAX_COORD,n=!0),r[i]=a}if(n&&this.callErrorOrErrorData(o.errorType.GLU_TESS_COORD_TOO_LARGE),null===this.mesh){if(this.cacheCount<o.TESS_MAX_CACHE)return void this.cacheVertex_(r,e);this.emptyCache_()}this.addVertex_(r,e)},o.GluTesselator.prototype.gluTessBeginPolygon=function(t){this.requireState_(o.GluTesselator.tessState_.T_DORMANT),this.state=o.GluTesselator.tessState_.T_IN_POLYGON,this.cacheCount=0,this.emptyCache=!1,this.mesh=null,this.polygonData_=t},o.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(o.GluTesselator.tessState_.T_IN_POLYGON),this.state=o.GluTesselator.tessState_.T_IN_CONTOUR,this.lastEdge_=null,this.cacheCount>0&&(this.emptyCache=!0)},o.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(o.GluTesselator.tessState_.T_IN_CONTOUR),this.state=o.GluTesselator.tessState_.T_IN_POLYGON},o.GluTesselator.prototype.gluTessEndPolygon=function(){if(this.requireState_(o.GluTesselator.tessState_.T_IN_POLYGON),this.state=o.GluTesselator.tessState_.T_DORMANT,null===this.mesh&&this.emptyCache_(),o.normal.projectPolygon(this),o.sweep.computeInterior(this),!this.fatalError){var t=this.mesh;if(this.boundaryOnly?o.tessmono.setWindingNumber(t,1,!0):o.tessmono.tessellateInterior(t),this.mesh.checkMesh(),this.callBegin_||this.callEnd_||this.callVertex_||this.callEdgeFlag_||this.callBeginData_||this.callEndData_||this.callVertexData_||this.callEdgeFlagData_)if(this.boundaryOnly)o.render.renderBoundary(this,this.mesh);else{var e=!(!this.callEdgeFlag_&&!this.callEdgeFlagData_);o.render.renderMesh(this,this.mesh,e)}if(this.callMesh_)return o.tessmono.discardExterior(this.mesh),this.callMesh_(this.mesh),this.mesh=null,void(this.polygonData_=null)}o.mesh.deleteMesh(this.mesh),this.polygonData_=null,this.mesh=null},o.GluTesselator.prototype.makeDormant_=function(){this.mesh&&o.mesh.deleteMesh(this.mesh),this.state=o.GluTesselator.tessState_.T_DORMANT,this.lastEdge_=null,this.mesh=null},o.GluTesselator.prototype.requireState_=function(t){this.state!==t&&this.gotoState_(t)},o.GluTesselator.prototype.gotoState_=function(t){for(;this.state!==t;)if(this.state<t)switch(this.state){case o.GluTesselator.tessState_.T_DORMANT:this.callErrorOrErrorData(o.errorType.GLU_TESS_MISSING_BEGIN_POLYGON),this.gluTessBeginPolygon(null);break;case o.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorOrErrorData(o.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state){case o.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorOrErrorData(o.errorType.GLU_TESS_MISSING_END_CONTOUR),this.gluTessEndContour();break;case o.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorOrErrorData(o.errorType.GLU_TESS_MISSING_END_POLYGON),this.makeDormant_()}},o.GluTesselator.prototype.addVertex_=function(t,e){var n=this.lastEdge_;null===n?(n=o.mesh.makeEdge(this.mesh),o.mesh.meshSplice(n,n.sym)):(o.mesh.splitEdge(n),n=n.lNext),n.org.data=e,n.org.coords[0]=t[0],n.org.coords[1]=t[1],n.org.coords[2]=t[2],n.winding=1,n.sym.winding=-1,this.lastEdge_=n},o.GluTesselator.prototype.cacheVertex_=function(t,e){var n=this.cache[this.cacheCount];n.data=e,n.coords[0]=t[0],n.coords[1]=t[1],n.coords[2]=t[2],++this.cacheCount},o.GluTesselator.prototype.emptyCache_=function(){this.mesh=new o.GluMesh;for(var t=0;t<this.cacheCount;t++){var e=this.cache[t];this.addVertex_(e.coords,e.data)}this.cacheCount=0,this.emptyCache=!1},o.GluTesselator.prototype.callBeginOrBeginData=function(t){this.callBeginData_?this.callBeginData_(t,this.polygonData_):this.callBegin_&&this.callBegin_(t)},o.GluTesselator.prototype.callVertexOrVertexData=function(t){this.callVertexData_?this.callVertexData_(t,this.polygonData_):this.callVertex_&&this.callVertex_(t)},o.GluTesselator.prototype.callEdgeFlagOrEdgeFlagData=function(t){this.callEdgeFlagData_?this.callEdgeFlagData_(t,this.polygonData_):this.callEdgeFlag_&&this.callEdgeFlag_(t)},o.GluTesselator.prototype.callEndOrEndData=function(){this.callEndData_?this.callEndData_(this.polygonData_):this.callEnd_&&this.callEnd_()},o.GluTesselator.prototype.callCombineOrCombineData=function(t,e,n){var r;return this.callCombineData_?r=this.callCombineData_(t,e,n,this.polygonData_):this.callCombine_&&(r=this.callCombine_(t,e,n)),void 0===r&&(r=null),r},o.GluTesselator.prototype.callErrorOrErrorData=function(t){this.callErrorData_?this.callErrorData_(t,this.polygonData_):this.callError_&&this.callError_(t)},o.GluFace=function(t,e){this.next=t||this,this.prev=e||this,this.anEdge=null,this.data=null,this.inside=!1},o.GluHalfEdge=function(t){this.next=t||this,this.sym=null,this.oNext=null,this.lNext=null,this.org=null,this.lFace=null,this.activeRegion=null,this.winding=0},o.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace},o.GluHalfEdge.prototype.dst=function(){return this.sym.org},o.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext},o.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym},o.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym},o.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext},o.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym},o.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym},o.GluMesh=function(){this.vHead=new o.GluVertex,this.fHead=new o.GluFace,this.eHead=new o.GluHalfEdge,this.eHeadSym=new o.GluHalfEdge,this.eHead.sym=this.eHeadSym,this.eHeadSym.sym=this.eHead},o.GluMesh.prototype.checkMesh=function(){if(o.DEBUG){var t,e,n=this.fHead,r=this.vHead,i=this.eHead,a=n;for(a=n;(e=a.next)!==n;a=e){t=e.anEdge;do{t=t.lNext}while(t!==e.anEdge)}var s,u=r;for(u=r;(s=u.next)!==r;u=s){t=s.anEdge;do{t=t.oNext}while(t!==s.anEdge)}var l=i;for(l=i;(t=l.next)!==i;l=t);}},o.GluVertex=function(t,e){this.next=t||this,this.prev=e||this,this.anEdge=null,this.data=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=null},o.PQHandleElem=function(){this.key=null,this.node=0},o.PQHandleElem.realloc=function(t,e){var n=new Array(e),r=0;if(null!==t)for(;r<t.length;r++)n[r]=t[r];for(;r<e;r++)n[r]=new o.PQHandleElem;return n},o.PQNode=function(){this.handle=0},o.PQNode.realloc=function(t,e){var n=new Array(e),r=0;if(null!==t)for(;r<t.length;r++)n[r]=t[r];for(;r<e;r++)n[r]=new o.PQNode;return n},o.PriorityQ=function(t){this.keys_=o.PriorityQ.prototype.PQKeyRealloc_(null,o.PriorityQ.INIT_SIZE_),this.order_=null,this.size_=0,this.max_=o.PriorityQ.INIT_SIZE_,this.initialized_=!1,this.leq_=t,this.heap_=new o.PriorityQHeap(this.leq_)},o.PriorityQ.INIT_SIZE_=32,o.PriorityQ.prototype.deleteQ=function(){this.heap_.deleteHeap(),this.heap_=null,this.order_=null,this.keys_=null},o.PriorityQ.prototype.init=function(){this.order_=[];for(var t=0;t<this.size_;t++)this.order_[t]=t;var e=function(t,e){return function(n,r){return e(t[n],t[r])?1:-1}}(this.keys_,this.leq_);if(this.order_.sort(e),this.max_=this.size_,this.initialized_=!0,this.heap_.init(),o.DEBUG){var n=0+this.size_-1;for(t=0;t<n;++t);}},o.PriorityQ.prototype.insert=function(t){if(this.initialized_)return this.heap_.insert(t);var e=this.size_;return++this.size_>=this.max_&&(this.max_*=2,this.keys_=o.PriorityQ.prototype.PQKeyRealloc_(this.keys_,this.max_)),this.keys_[e]=t,-(e+1)},o.PriorityQ.prototype.PQKeyRealloc_=function(t,e){var n=new Array(e),r=0;if(null!==t)for(;r<t.length;r++)n[r]=t[r];for(;r<e;r++)n[r]=null;return n},o.PriorityQ.prototype.keyLessThan_=function(t,e){var n=this.keys_[t],r=this.keys_[e];return!this.leq_(r,n)},o.PriorityQ.prototype.keyGreaterThan_=function(t,e){var n=this.keys_[t],r=this.keys_[e];return!this.leq_(n,r)},o.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();var t=this.keys_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var e=this.heap_.minimum();if(this.leq_(e,t))return this.heap_.extractMin()}do{--this.size_}while(this.size_>0&&null===this.keys_[this.order_[this.size_-1]]);return t},o.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var t=this.keys_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var e=this.heap_.minimum();if(this.leq_(e,t))return e}return t},o.PriorityQ.prototype.isEmpty_=function(){return 0===this.size_&&this.heap_.isEmpty()},o.PriorityQ.prototype.remove=function(t){if(t>=0)this.heap_.remove(t);else for(t=-(t+1),this.keys_[t]=null;this.size_>0&&null===this.keys_[this.order_[this.size_-1]];)--this.size_},o.PriorityQHeap=function(t){this.nodes_=o.PQNode.realloc(null,o.PriorityQHeap.INIT_SIZE_+1),this.handles_=o.PQHandleElem.realloc(null,o.PriorityQHeap.INIT_SIZE_+1),this.size_=0,this.max_=o.PriorityQHeap.INIT_SIZE_,this.freeList_=0,this.initialized_=!1,this.leq_=t,this.nodes_[1].handle=1},o.PriorityQHeap.INIT_SIZE_=32,o.PriorityQHeap.prototype.deleteHeap=function(){this.handles_=null,this.nodes_=null},o.PriorityQHeap.prototype.init=function(){for(var t=this.size_;t>=1;--t)this.floatDown_(t);this.initialized_=!0},o.PriorityQHeap.prototype.insert=function(t){var e,n=++this.size_;return 2*n>this.max_&&(this.max_*=2,this.nodes_=o.PQNode.realloc(this.nodes_,this.max_+1),this.handles_=o.PQHandleElem.realloc(this.handles_,this.max_+1)),0===this.freeList_?e=n:(e=this.freeList_,this.freeList_=this.handles_[e].node),this.nodes_[n].handle=e,this.handles_[e].node=n,this.handles_[e].key=t,this.initialized_&&this.floatUp_(n),e},o.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_},o.PriorityQHeap.prototype.minimum=function(){return this.handles_[this.nodes_[1].handle].key},o.PriorityQHeap.prototype.extractMin=function(){var t=this.nodes_,e=this.handles_,n=t[1].handle,r=e[n].key;return this.size_>0&&(t[1].handle=t[this.size_].handle,e[t[1].handle].node=1,e[n].key=null,e[n].node=this.freeList_,this.freeList_=n,--this.size_>0&&this.floatDown_(1)),r},o.PriorityQHeap.prototype.remove=function(t){var e=this.nodes_,n=this.handles_,r=n[t].node;e[r].handle=e[this.size_].handle,n[e[r].handle].node=r,r<=--this.size_&&(r<=1||this.leq_(n[e[r>>1].handle].key,n[e[r].handle].key)?this.floatDown_(r):this.floatUp_(r)),n[t].key=null,n[t].node=this.freeList_,this.freeList_=t},o.PriorityQHeap.prototype.floatDown_=function(t){for(var e=this.nodes_,n=this.handles_,r=e[t].handle;;){var i=t<<1;i<this.size_&&this.leq_(n[e[i+1].handle].key,n[e[i].handle].key)&&++i;var o=e[i].handle;if(i>this.size_||this.leq_(n[r].key,n[o].key)){e[t].handle=r,n[r].node=t;break}e[t].handle=o,n[o].node=t,t=i}},o.PriorityQHeap.prototype.floatUp_=function(t){for(var e=this.nodes_,n=this.handles_,r=e[t].handle;;){var i=t>>1,o=e[i].handle;if(0===i||this.leq_(n[o].key,n[r].key)){e[t].handle=r,n[r].node=t;break}e[t].handle=o,n[o].node=t,t=i}},o.ActiveRegion=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},o.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()},o.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()},t.exports=o,i("util/libtess",(function(){})),i("util/measure/AreaMeasurer",["../../geom/Angle","../../error/ArgumentError","../../geom/Location","../Logger","./MeasurerUtils","../../geom/Sector","../../geom/Vec3","../libtess"],(function(t,e,n,r,i,a,s,u){"use strict";var l=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"AreaMeasurer","constructor","missingWorldWindow"));this.wwd=t,this.DEFAULT_AREA_SAMPLING_STEPS=32,this._areaTerrainSamplingSteps=this.DEFAULT_AREA_SAMPLING_STEPS,this._maxSegmentLength=1e5,this.subdividedPositions=null,this.vecZ=new s(0,0,1),this.scratchLocation=new n(0,0)};return Object.defineProperties(l.prototype,{areaTerrainSamplingSteps:{get:function(){return this._areaTerrainSamplingSteps},set:function(t){this._areaTerrainSamplingSteps=t}},maxSegmentLength:{get:function(){return this._maxSegmentLength},set:function(t){this._maxSegmentLength=t}}}),l.prototype.getArea=function(t,e,n){var r=this.wwd.globe;return e?this.computeSurfaceAreaSampling(r,t,n):this.computeProjectedAreaGeometry(r,t,n)},l.prototype.computeSurfaceAreaSampling=function(e,n,r){var o=new a(0,0,0,0);o.setToBoundingSector(n),this.subdividedPositions=i.subdividePositions(e,n,!0,r,this._maxSegmentLength);for(var u=Math.max(this.DEFAULT_AREA_SAMPLING_STEPS,this._areaTerrainSamplingSteps),l=o.deltaLatitude()*t.DEGREES_TO_RADIANS,c=o.deltaLongitude()*t.DEGREES_TO_RADIANS,h=Math.max(l/u,c/u),f=Math.round(l/h),p=Math.round(c/h*Math.cos(o.centroidLatitude()*t.DEGREES_TO_RADIANS)),d=l/f,g=c/p,m=0,y=0;y<f;y++)for(var v=o.minLatitude*t.DEGREES_TO_RADIANS+d*y,E=e.radiusAt((v+d/2)*t.RADIANS_TO_DEGREES,o.centroidLongitude()),_=g*E*Math.cos(v+d/2),b=d*E,S=_*b,w=0;w<p;w++){var x=o.minLongitude*t.DEGREES_TO_RADIANS+g*w,T=v*t.RADIANS_TO_DEGREES,L=(v+d)*t.RADIANS_TO_DEGREES,C=x*t.RADIANS_TO_DEGREES,A=(x+g)*t.RADIANS_TO_DEGREES,M=new a(T,L,C,A);if(i.isLocationInside(M.centroid(this.scratchLocation),this.subdividedPositions)){var R=e.elevationAtLocation(T,C),O=e.elevationAtLocation(T,A),P=e.elevationAtLocation(L,C),I=new s(_,0,O-R),N=new s(0,b,P-R);I.normalize(),N.normalize();var D=I.cross(N).normalize(),k=Math.tan(i.angleBetweenVectors(this.vecZ,D));m+=S*Math.sqrt(1+k*k)}}return m},l.prototype.computeProjectedAreaGeometry=function(e,n,r){this.subdividedPositions=i.subdividePositions(e,n,!1,r,this._maxSegmentLength);var o=this.subdividedPositions.length,a=this.subdividedPositions[0],s=this.subdividedPositions[o-1];a.equals(s)&&o--;for(var u=[],l=0,c=0;c<o;c++){var h=this.subdividedPositions[c];u[l++]=h.longitude*t.DEGREES_TO_RADIANS,u[l++]=h.latitude*t.DEGREES_TO_RADIANS,u[l++]=0}var f=this.tessellatePolygon(o,u),p=0,d=f.length/9;for(c=0;c<d;c++){var g=[f[0+(l=9*c)],f[l+1],f[l+2],f[l+3],f[l+4],f[l+5],f[l+6],f[l+7],f[l+8]];p+=this.computeTriangleProjectedArea(e,g)}return p},l.prototype.computeTriangleProjectedArea=function(e,n){var r=n[0],i=n[1],o=n[3],a=n[4],s=n[6],u=n[7],l=Math.abs(r*(a-u)+o*(u-i)+s*(i-a));l/=2;var c=(r+o+s)/3,h=(i+a+u)/3,f=e.radiusAt(h*t.RADIANS_TO_DEGREES,c*t.RADIANS_TO_DEGREES);return l*(Math.cos(h)*f*f)},l.prototype.tessellatePolygon=function(t,e){var n,i=new o.GluTesselator,a=[];i.gluTessCallback(o.gluEnum.GLU_TESS_BEGIN,(function(t){t!==o.primitiveType.GL_TRIANGLES&&r.logMessage(r.LEVEL_WARNING,"AreaMeasurer","tessellatePolygon","Tessellation error, primitive is not TRIANGLES.")})),i.gluTessCallback(o.gluEnum.GLU_TESS_VERTEX_DATA,(function(t,e){e.push(t[0]),e.push(t[1]),e.push(t[2])})),i.gluTessCallback(o.gluEnum.GLU_TESS_EDGE_FLAG,(function(){})),i.gluTessCallback(o.gluEnum.GLU_TESS_ERROR,(function(t){r.logMessage(r.LEVEL_WARNING,"AreaMeasurer","tessellatePolygon","Tessellation error "+t+".")})),i.gluTessBeginPolygon(a),i.gluTessBeginContour();for(var s=0;s<t;s++)n=e.slice(3*s,3*s+3),i.gluTessVertex(n,n);return i.gluTessEndContour(),i.gluTessEndPolygon(),a},l})),i("util/AbsentResourceList",[],(function(){"use strict";var t=function(t,e){this.maxTrys=t,this.minCheckInterval=e,this.tryAgainInterval=6e4,this.possiblyAbsent={}};return t.prototype.isResourceAbsent=function(t){var e=this.possiblyAbsent[t];if(!e)return!1;if(e.permanent)return!0;var n=Date.now()-e.timeOfLastMark;return n>this.tryAgainInterval?(delete this.possiblyAbsent[t],!1):n<this.minCheckInterval||e.numTrys>this.maxTrys},t.prototype.markResourceAbsent=function(t){var e=this.possiblyAbsent[t];e||(e={timeOfLastMark:Date.now(),numTrys:0},this.possiblyAbsent[t]=e),e.numTrys=e.numTrys+1,e.timeOfLastMark=Date.now()},t.prototype.markResourceAbsentPermanently=function(t){var e=this.possiblyAbsent[t];e||(e={timeOfLastMark:Date.now(),numTrys:0},this.possiblyAbsent[t]=e),e.numTrys=e.numTrys+1,e.timeOfLastMark=Date.now(),e.permanent=!0},t.prototype.unmarkResourceAbsent=function(t){this.possiblyAbsent[t]&&delete this.possiblyAbsent[t]},t})),i("globe/ElevationCoverage",["../error/ArgumentError","../util/Logger","../geom/Sector"],(function(t,e,n){"use strict";var r=function(r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationCoverage","constructor","missingResolution"));this.timestamp=Date.now(),this.displayName="Coverage",this._enabled=!0,this.resolution=r,this.coverageSector=n.FULL_SPHERE};return Object.defineProperties(r.prototype,{enabled:{get:function(){return this._enabled},set:function(t){this._enabled=t,this.timestamp=Date.now()}}}),r.prototype.minAndMaxElevationsForSector=function(n,r){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationCoverage","minAndMaxElevationsForSector","missingSector"));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationCoverage","minAndMaxElevationsForSector","missingResult"));return r[0]>0&&(r[0]=0),r[1]<0&&(r[1]=0),!0},r.prototype.elevationAtLocation=function(t,e){return 0},r.prototype.elevationsForGrid=function(n,r,i,o){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationCoverage","elevationsForGrid","missingSector"));if(r<=0||i<=0)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationCoverage","elevationsForGrid","numLat or numLon is less than 1"));if(!o||o.length<r*i)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationCoverage","elevationsForGrid","missingArray"));for(var a=0,s=o.length;a<s;a++)o[a]=0;return!0},r})),i("globe/ElevationImage",["../error/ArgumentError","../util/Logger","../util/WWMath"],(function(t,e,n){"use strict";var r=function(n,r,i){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationImage","constructor","missingSector"));this.sector=n,this.imageWidth=r,this.imageHeight=i,this.size=this.imageWidth*this.imageHeight,this.hasData=!0,this.hasMissingData=!1};return r.NO_DATA=0,r.isNoData=function(t,e,n,i){var o=r.NO_DATA;return t===o&&e===o&&n===o&&i===o},r.prototype.pixel=function(t,e){return t<0||t>=this.imageWidth||e<0||e>=this.imageHeight?0:(e=this.imageHeight-e-1,this.imageData[t+e*this.imageWidth])},r.prototype.elevationAtLocation=function(t,e){var i=this.sector.maxLatitude,o=this.sector.minLongitude,a=this.sector.deltaLatitude(),s=this.sector.deltaLongitude(),u=(this.imageWidth-1)*(e-o)/s,l=(this.imageHeight-1)*(i-t)/a,c=Math.floor(n.clamp(u,0,this.imageWidth-1)),h=Math.floor(n.clamp(c+1,0,this.imageWidth-1)),f=Math.floor(n.clamp(l,0,this.imageHeight-1)),p=Math.floor(n.clamp(f+1,0,this.imageHeight-1)),d=this.imageData,g=d[c+f*this.imageWidth],m=d[h+f*this.imageWidth],y=d[c+p*this.imageWidth],v=d[h+p*this.imageWidth],E=u-c,_=l-f;return r.isNoData(g,m,y,v)?NaN:(1-E)*(1-_)*g+E*(1-_)*m+(1-E)*_*y+E*_*v},r.prototype.elevationsForGrid=function(i,o,a,s){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationImage","elevationsForGrid","missingSector"));if(o<1||a<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationImage","elevationsForGrid","The specified number of sample points is less than 1."));if(!s)throw new t(e.logMessage(e.LEVEL_SEVERE,"ElevationImage","elevationsForGrid","missingResult"));var u,l,c,h,f=this.sector.minLatitude,p=this.sector.maxLatitude,d=this.sector.minLongitude,g=this.sector.maxLongitude,m=p-f,y=g-d,v=i.minLatitude,E=i.maxLatitude,_=i.minLongitude,b=i.maxLongitude,S=(E-v)/(o>1?o-1:1),w=(b-_)/(a>1?a-1:1),x=0,T=this.imageData;for(h=0,u=v;h<o;h+=1,u+=S)if(h===o-1&&(u=E),u>=f&&u<=p){var L=(this.imageHeight-1)*(p-u)/m,C=Math.floor(n.clamp(L,0,this.imageHeight-1)),A=Math.floor(n.clamp(C+1,0,this.imageHeight-1)),M=L-C;for(c=0,l=_;c<a;c+=1,l+=w){if(c===a-1&&(l=b),l>=d&&l<=g&&isNaN(s[x])){var R=(this.imageWidth-1)*(l-d)/y,O=Math.floor(n.clamp(R,0,this.imageWidth-1)),P=Math.floor(n.clamp(O+1,0,this.imageWidth-1)),I=R-O,N=T[O+C*this.imageWidth],D=T[P+C*this.imageWidth],k=T[O+A*this.imageWidth],F=T[P+A*this.imageWidth];r.isNoData(N,D,k,F)?s[x]=NaN:s[x]=(1-I)*(1-M)*N+I*(1-M)*D+(1-I)*M*k+I*M*F}x++}}else x+=a},r.prototype.minAndMaxElevationsForSector=function(t){if(!this.hasData)return null;var e=[];if(t)if(t.contains(this.sector))e[0]>this.minElevation&&(e[0]=this.minElevation),e[1]<this.maxElevation&&(e[1]=this.maxElevation);else{var r=this.sector.maxLatitude,i=this.sector.minLongitude,o=this.sector.deltaLatitude(),a=this.sector.deltaLongitude(),s=t.minLatitude,u=t.maxLatitude,l=t.minLongitude,c=t.maxLongitude,h=Math.floor((this.imageHeight-1)*(r-u)/o),f=Math.ceil((this.imageHeight-1)*(r-s)/o),p=Math.floor((this.imageWidth-1)*(l-i)/a),d=Math.ceil((this.imageWidth-1)*(c-i)/a);h=n.clamp(h,0,this.imageHeight-1),f=n.clamp(f,0,this.imageHeight-1),p=n.clamp(p,0,this.imageWidth-1),d=n.clamp(d,0,this.imageWidth-1);for(var g=this.imageData,m=Number.MAX_VALUE,y=-m,v=h;v<=f;v++)for(var E=p;E<=d;E++){var _=g[Math.floor(E+v*this.imageWidth)];m>_&&(m=_),y<_&&(y=_)}e[0]>m&&(e[0]=m),e[1]<y&&(e[1]=y)}else e[0]=this.minElevation,e[1]=this.maxElevation;return e},r.prototype.findMinAndMaxElevation=function(){if(this.hasData=!1,this.hasMissingData=!1,this.imageData&&this.imageData.length>0){this.minElevation=Number.MAX_VALUE,this.maxElevation=-Number.MAX_VALUE;for(var t=this.imageData,e=this.imageWidth*this.imageHeight,n=0;n<e;n++){var i=t[n];i!==r.NO_DATA?(this.hasData=!0,this.minElevation>i&&(this.minElevation=i),this.maxElevation<i&&(this.maxElevation=i)):this.hasMissingData=!0}}this.hasData||(this.minElevation=0,this.maxElevation=0)},r})),i("formats/geotiff/GeoTiffConstants",[],(function(){"use strict";return{Tag:{MODEL_PIXEL_SCALE:33550,MODEL_TRANSFORMATION:34264,MODEL_TIEPOINT:33922,GEO_KEY_DIRECTORY:34735,GEO_DOUBLE_PARAMS:34736,GEO_ASCII_PARAMS:34737,GDAL_NODATA:42113,GDAL_METADATA:42112},Key:{GTModelTypeGeoKey:1024,GTRasterTypeGeoKey:1025,GTCitationGeoKey:1026,GeographicTypeGeoKey:2048,GeogCitationGeoKey:2049,GeogGeodeticDatumGeoKey:2050,GeogPrimeMeridianGeoKey:2051,GeogLinearUnitsGeoKey:2052,GeogLinearUnitSizeGeoKey:2053,GeogAngularUnitsGeoKey:2054,GeogAngularUnitSizeGeoKey:2055,GeogEllipsoidGeoKey:2056,GeogSemiMajorAxisGeoKey:2057,GeogSemiMinorAxisGeoKey:2058,GeogInvFlatteningGeoKey:2059,GeogAzimuthUnitsGeoKey:2060,GeogPrimeMeridianLongGeoKey:2061,GeogTOWGS84GeoKey:2062,ProjectedCSTypeGeoKey:3072,PCSCitationGeoKey:3073,ProjectionGeoKey:3074,ProjCoordTransGeoKey:3075,ProjLinearUnitsGeoKey:3076,ProjLinearUnitSizeGeoKey:3077,ProjStdParallel1GeoKey:3078,ProjStdParallel2GeoKey:3079,ProjNatOriginLongGeoKey:3080,ProjNatOriginLatGeoKey:3081,ProjFalseEastingGeoKey:3082,ProjFalseNorthingGeoKey:3083,ProjFalseOriginLongGeoKey:3084,ProjFalseOriginLatGeoKey:3085,ProjFalseOriginEastingGeoKey:3086,ProjFalseOriginNorthingGeoKey:3087,ProjCenterLongGeoKey:3088,ProjCenterLatGeoKey:3089,ProjCenterEastingGeoKey:3090,ProjCenterNorthingGeoKey:3091,ProjScaleAtNatOriginGeoKey:3092,ProjScaleAtCenterGeoKey:3093,ProjAzimuthAngleGeoKey:3094,ProjStraightVertPoleLongGeoKey:3095,VerticalCSTypeGeoKey:4096,VerticalCitationGeoKey:4097,VerticalDatumGeoKey:4098,VerticalUnitsGeoKey:4099}}})),i("formats/geotiff/GeoTiffKeyEntry",["../../error/AbstractError","../../error/ArgumentError","./GeoTiffConstants","../../util/Logger"],(function(t,e,n,r){"use strict";var i=function(t,n,i,o){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"GeoTiffKeyEntry","constructor","missingKeyId"));if(null===n||void 0===n)throw new e(r.logMessage(r.LEVEL_SEVERE,"GeoTiffKeyEntry","constructor","missingTiffTagLocation"));if(!i)throw new e(r.logMessage(r.LEVEL_SEVERE,"GeoTiffKeyEntry","constructor","missingCount"));if(null===o||void 0===o)throw new e(r.logMessage(r.LEVEL_SEVERE,"GeoTiffKeyEntry","constructor","missingValueOffset"));this._keyId=t,this._tiffTagLocation=n,this._count=i,this._valueOffset=o};return Object.defineProperties(i.prototype,{keyId:{get:function(){return this._keyId}},tiffTagLocation:{get:function(){return this._tiffTagLocation}},count:{get:function(){return this._count}},valueOffset:{get:function(){return this._valueOffset}}}),i.prototype.getGeoKeyValue=function(t,e){var r;if(0===this.tiffTagLocation)r=this.valueOffset;else if(this.tiffTagLocation===n.Tag.GEO_ASCII_PARAMS){var i="";if(e){for(var o=this.valueOffset;o<this.count-1;o++)i+=e[o];"|"!=e[this.count-1]&&(i+=e[this.count-1]),r=i}}else this.tiffTagLocation===n.Tag.GEO_DOUBLE_PARAMS&&t&&(r=t[this.valueOffset]);return r},i})),i("formats/geotiff/GeoTiffMetadata",[],(function(){"use strict";var t=function(){this._bitsPerSample=null,this._colorMap=null,this._compression=null,this._extraSamples=null,this._imageDescription=null,this._imageLength=null,this._imageWidth=null,this._maxSampleValue=null,this._minSampleValue=null,this._orientation=0,this._photometricInterpretation=null,this._planarConfiguration=null,this._resolutionUnit=null,this._rowsPerStrip=null,this._samplesPerPixel=null,this._sampleFormat=null,this._software=null,this._stripByteCounts=null,this._stripOffsets=null,this._tileByteCounts=null,this._tileOffsets=null,this._tileLength=null,this._tileWidth=null,this._xResolution=null,this._yResolution=null,this._geoAsciiParams=null,this._geoDoubleParams=null,this._geoKeyDirectory=null,this._modelPixelScale=null,this._modelTiepoint=null,this._modelTransformation=null,this._noData=null,this._metaData=null,this._bbox=null,this._gtModelTypeGeoKey=null,this._gtRasterTypeGeoKey=null,this._gtCitationGeoKey=null,this._geographicTypeGeoKey=null,this._geogCitationGeoKey=null,this._geogAngularUnitsGeoKey=null,this._geogAngularUnitSizeGeoKey=null,this._geogSemiMajorAxisGeoKey=null,this._geogInvFlatteningGeoKey=null,this._projectedCSType=null,this._projLinearUnits=null};return Object.defineProperties(t.prototype,{bitsPerSample:{get:function(){return this._bitsPerSample},set:function(t){this._bitsPerSample=t}},colorMap:{get:function(){return this._colorMap},set:function(t){this._colorMap=t}},compression:{get:function(){return this._compression},set:function(t){this._compression=t}},extraSamples:{get:function(){return this._extraSamples},set:function(t){this._extraSamples=t}},imageDescription:{get:function(){return this._imageDescription},set:function(t){this._imageDescription=t}},imageLength:{get:function(){return this._imageLength},set:function(t){this._imageLength=t}},imageWidth:{get:function(){return this._imageWidth},set:function(t){this._imageWidth=t}},maxSampleValue:{get:function(){return this._maxSampleValue},set:function(t){this._maxSampleValue=t}},minSampleValue:{get:function(){return this._minSampleValue},set:function(t){this._minSampleValue=t}},orientation:{get:function(){return this._orientation},set:function(t){this._orientation=t}},photometricInterpretation:{get:function(){return this._photometricInterpretation},set:function(t){this._photometricInterpretation=t}},planarConfiguration:{get:function(){return this._planarConfiguration},set:function(t){this._planarConfiguration=t}},resolutionUnit:{get:function(){return this._resolutionUnit},set:function(t){this._resolutionUnit=t}},rowsPerStrip:{get:function(){return this._rowsPerStrip},set:function(t){this._rowsPerStrip=t}},samplesPerPixel:{get:function(){return this._samplesPerPixel},set:function(t){this._samplesPerPixel=t}},sampleFormat:{get:function(){return this._sampleFormat},set:function(t){this._sampleFormat=t}},software:{get:function(){return this._software},set:function(t){this._software=t}},stripByteCounts:{get:function(){return this._stripByteCounts},set:function(t){this._stripByteCounts=t}},stripOffsets:{get:function(){return this._stripOffsets},set:function(t){this._stripOffsets=t}},tileByteCounts:{get:function(){return this._tileByteCounts},set:function(t){this._tileByteCounts=t}},tileOffsets:{get:function(){return this._tileOffsets},set:function(t){this._tileOffsets=t}},tileLength:{get:function(){return this._tileLength},set:function(t){this._tileLength=t}},tileWidth:{get:function(){return this._tileWidth},set:function(t){this._tileWidth=t}},geoAsciiParams:{get:function(){return this._geoAsciiParams},set:function(t){this._geoAsciiParams=t}},geoDoubleParams:{get:function(){return this._geoDoubleParams},set:function(t){this._geoDoubleParams=t}},geoKeyDirectory:{get:function(){return this._geoKeyDirectory},set:function(t){this._geoKeyDirectory=t}},modelPixelScale:{get:function(){return this._modelPixelScale},set:function(t){this._modelPixelScale=t}},modelTiepoint:{get:function(){return this._modelTiepoint},set:function(t){this._modelTiepoint=t}},modelTransformation:{get:function(){return this._modelTransformation},set:function(t){this._modelTransformation=t}},noData:{get:function(){return this._noData},set:function(t){this._noData=t}},metaData:{get:function(){return this._metaData},set:function(t){this._metaData=t}},bbox:{get:function(){return this._bbox},set:function(t){this._bbox=t}},gtModelTypeGeoKey:{get:function(){return this._gtModelTypeGeoKey},set:function(t){this._gtModelTypeGeoKey=t}},gtRasterTypeGeoKey:{get:function(){return this._gtRasterTypeGeoKey},set:function(t){this._gtRasterTypeGeoKey=t}},gtCitationGeoKey:{get:function(){return this._gtCitationGeoKey},set:function(t){this._gtCitationGeoKey=t}},geographicTypeGeoKey:{get:function(){return this._geographicTypeGeoKey},set:function(t){this._geographicTypeGeoKey=t}},geogCitationGeoKey:{get:function(){return this._geogCitationGeoKey},set:function(t){this._geogCitationGeoKey=t}},geogAngularUnitsGeoKey:{get:function(){return this._geogAngularUnitsGeoKey},set:function(t){this._geogAngularUnitsGeoKey=t}},geogAngularUnitSizeGeoKey:{get:function(){return this._geogAngularUnitSizeGeoKey},set:function(t){this._geogAngularUnitSizeGeoKey=t}},geogSemiMajorAxisGeoKey:{get:function(){return this._geogSemiMajorAxisGeoKey},set:function(t){this._geogSemiMajorAxisGeoKey=t}},geogInvFlatteningGeoKey:{get:function(){return this._geogInvFlatteningGeoKey},set:function(t){this._geogInvFlatteningGeoKey=t}},projectedCSType:{get:function(){return this._projectedCSType},set:function(t){this._projectedCSType=t}},projLinearUnits:{get:function(){return this._projLinearUnits},set:function(t){this._projLinearUnits=t}},xResolution:{get:function(){return this._xResolution},set:function(t){this._xResolution=t}},yResolution:{get:function(){return this._yResolution},set:function(t){this._yResolution=t}}}),t})),i("formats/geotiff/TiffConstants",[],(function(){"use strict";return{Tag:{NEW_SUBFILE_TYPE:254,SUBFILE_TYPE:255,IMAGE_WIDTH:256,IMAGE_LENGTH:257,BITS_PER_SAMPLE:258,COMPRESSION:259,PHOTOMETRIC_INTERPRETATION:262,THRESHHOLDING:263,CELL_WIDTH:264,CELL_LENGTH:265,FILL_ORDER:266,DOCUMENT_NAME:269,IMAGE_DESCRIPTION:270,MAKE:271,MODEL:272,STRIP_OFFSETS:273,ORIENTATION:274,SAMPLES_PER_PIXEL:277,ROWS_PER_STRIP:278,STRIP_BYTE_COUNTS:279,MIN_SAMPLE_VALUE:280,MAX_SAMPLE_VALUE:281,X_RESOLUTION:282,Y_RESOLUTION:283,PLANAR_CONFIGURATION:284,PAGE_NAME:285,X_POSITION:286,Y_POSITION:287,FREE_OFFSETS:288,FREE_BYTE_COUNTS:289,GRAY_RESPONSE_UNIT:290,GRAY_RESPONSE_CURVE:291,T4_OPTIONS:292,T6_PTIONS:293,RESOLUTION_UNIT:296,PAGE_NUMBER:297,TRANSFER_FUNCTION:301,SOFTWARE:305,DATE_TIME:306,ARTIST:315,HOST_COMPUTER:316,PREDICTOR:317,WHITE_POINT:318,PRIMARY_CHROMATICITIES:319,COLOR_MAP:320,HALFTONE_HINTS:321,TILE_WIDTH:322,TILE_LENGTH:323,TILE_OFFSETS:324,TILE_BYTE_COUNTS:325,INK_SET:332,INK_NAMES:333,NUMBER_OF_INKS:334,DOT_RANGE:336,TARGET_PRINTER:337,EXTRA_SAMPLES:338,SAMPLE_FORMAT:339,S_MIN_SAMPLE_VALUE:340,S_MAX_SAMPLE_VALUE:341,TRANSFER_RANGE:342,JPEG_PROC:512,JPEG_INTERCHANGE_FORMAT:513,JPEG_INTERCHANGE_FORMAT_LENGTH:514,JPEG_RESTART_INTERVAL:515,JPEG_LOSSLESS_PREDICTORS:517,JPEG_POINT_TRANSFORMS:518,JPEG_Q_TABLES:519,JPEG_DC_TABLES:520,JPEG_AC_TABLES:521,Y_Cb_Cr_COEFFICIENTS:529,Y_Cb_Cr_SUB_SAMPLING:530,Y_Cb_Cr_POSITIONING:531,REFERENCE_BLACK_WHITE:532,COPYRIGHT:33432},Compression:{UNCOMPRESSED:1,CCITT_1D:2,GROUP_3_FAX:3,GROUP_4_FAX:4,LZW:5,JPEG:6,PACK_BITS:32773},Orientation:{Row0_IS_TOP__Col0_IS_LHS:1,Row0_IS_TOP__Col0_IS_RHS:2,Row0_IS_BOTTOM__Col0_IS_RHS:3,Row0_IS_BOTTOM__Col0_IS_LHS:4,Row0_IS_LHS__Col0_IS_TOP:5,Row0_IS_RHS__Col0_IS_TOP:6,Row0_IS_RHS__Col0_IS_BOTTOM:7,Row0_IS_LHS__Col0_IS_BOTTOM:8},PhotometricInterpretation:{WHITE_IS_ZERO:0,BLACK_IS_ZERO:1,RGB:2,RGB_PALETTE:3,TRANSPARENCY_MASK:4,CMYK:5,Y_Cb_Cr:6,CIE_LAB:7},PlanarConfiguration:{CHUNKY:1,PLANAR:2},ResolutionUnit:{NONE:1,INCH:2,CENTIMETER:3},SampleFormat:{UNSIGNED:1,SIGNED:2,IEEE_FLOAT:3,UNDEFINED:4,DEFAULT:1},Type:{BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,SBYTE:6,UNDEFINED:7,SSHORT:8,SLONG:9,SRATIONAL:10,FLOAT:11,DOUBLE:12}}})),i("formats/geotiff/GeoTiffUtil",["../../error/ArgumentError","../../util/Logger","./TiffConstants"],(function(t,e,n){"use strict";return{getBytes:function(n,r,i,o,a){if(i<=0)throw new t(e.logMessage(e.LEVEL_SEVERE,"GeoTiffReader","getBytes","noBytesRequested"));if(i<=1)return a?n.getInt8(r,o):n.getUint8(r,o);if(i<=2)return a?n.getInt16(r,o):n.getUint16(r,o);if(i<=3)return a?n.getInt32(r,o)>>>8:n.getUint32(r,o)>>>8;if(i<=4)return a?n.getInt32(r,o):n.getUint32(r,o);if(i<=8)return n.getFloat64(r,o);throw new t(e.logMessage(e.LEVEL_SEVERE,"GeoTiffReader","getBytes","tooManyBytesRequested"))},getSampleBytes:function(t,r,i,o,a){var s;switch(o){case n.SampleFormat.UNSIGNED:s=this.getBytes(t,r,i,a,!1);break;case n.SampleFormat.SIGNED:s=this.getBytes(t,r,i,a,!0);break;case n.SampleFormat.IEEE_FLOAT:3==i?s=t.getFloat32(r,a)>>>8:4==i?s=t.getFloat32(r,a):8==i?s=t.getFloat64(r,a):e.log(e.LEVEL_WARNING,"Do not attempt to parse the data  not handled: "+i);break;case n.SampleFormat.UNDEFINED:default:s=this.getBytes(t,r,i,a,!1)}return s},getRGBAFillValue:function(t,e,n,r){return"undefined"==typeof r&&(r=1),"rgba("+t+", "+e+", "+n+", "+r+")"},clampColorSample:function(t,e){var n=Math.pow(2,8-e);return Math.floor(t*n+(n-1))}}})),i("util/proj4-src",[],(function(){"use strict";function t(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(K,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(K,"")===i)return t[n]}function e(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=z}function n(t){return new e(t).output()}function r(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,o=n.reduce((function(t,e){return i(e,t),t}),r);e&&(t[e]=o)}function i(t,e){if(Array.isArray(t)){var n,o=t.shift();if("PARAMETER"===o&&(o=t.shift()),1===t.length)return Array.isArray(t[0])?(e[o]={},void i(t[0],e[o])):void(e[o]=t[0]);if(t.length)if("TOWGS84"!==o)switch(Array.isArray(o)||(e[o]={}),o){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[o]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&i(t[2],e[o]));case"SPHEROID":case"ELLIPSOID":return e[o]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&i(t[3],e[o]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void r(e,o,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return i(t,e[o]);return r(e,o,t)}else e[o]=t;else e[o]=!0}else e[t]=!0}function o(t){return t*J}function a(t){function e(e){return e*(t.to_meter||1)}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var n=t.GEOGCS;"GEOGCS"===t.type&&(n=t),n&&(n.DATUM?t.datumCode=n.DATUM.name.toLowerCase():t.datumCode=n.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),n.DATUM&&n.DATUM.SPHEROID&&(t.ellps=n.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=n.DATUM.SPHEROID.a,t.rf=parseFloat(n.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",o],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",o],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",o],["lat0","latitude_of_origin",o],["lat0","standard_parallel_1",o],["lat1","standard_parallel_1",o],["lat2","standard_parallel_2",o],["alpha","azimuth",o],["srsCode","name"]].forEach((function(e){return function(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=o(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function s(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?s[t]=W(arguments[1]):s[t]=Q(arguments[1]):s[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?s.apply(e,t):s(t)}));if("string"==typeof t){if(t in s)return s[t]}else"EPSG"in t?s["EPSG:"+t.EPSG]=t:"ESRI"in t?s["ESRI:"+t.ESRI]=t:"IAU2000"in t?s["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function u(t){return function(t){return"string"==typeof t}(t)?function(t){return t in s}(t)?s[t]:function(t){return $.some((function(e){return t.indexOf(e)>-1}))}(t)?Q(t):function(t){return"+"===t[0]}(t)?W(t):void 0:t}function l(t){return t}function c(t,e){var n=ut.length;return t.names?(ut[n]=t,t.names.forEach((function(t){st[t.toLowerCase()]=n})),this):(console.log(e),!0)}function h(e,n){if(!(this instanceof h))return new h(e);n=n||function(t){if(t)throw t};var r=u(e);if("object"==typeof r){var i=h.projections.get(r.projName);if(i){if(r.datumCode&&"none"!==r.datumCode){var o=t(ft,r.datumCode);o&&(r.datum_params=o.towgs84?o.towgs84.split(","):null,r.ellps=o.ellipse,r.datumName=o.datumName?o.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84";var a=function(e,n,r,i,o){if(!e){var a=t(ct,i);a||(a=ht),e=a.a,n=a.b,r=a.rf}return r&&!n&&(n=(1-1/r)*e),(0===r||Math.abs(e-n)<k)&&(o=!0,n=e),{a:e,b:n,rf:r,sphere:o}}(r.a,r.b,r.rf,r.ellps,r.sphere),s=function(t,e,n,r){var i=t*t,o=e*e,a=(i-o)/i,s=0;return r?(i=(t*=1-a*(I+a*(N+a*D)))*t,a=0):s=Math.sqrt(a),{es:a,e:s,ep2:(i-o)/o}}(a.a,a.b,a.rf,r.R_A),l=r.datum||function(t,e,n,r,i,o){var a={};return a.datum_type=void 0===t||"none"===t?R:M,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=C),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=A,a.datum_params[3]*=O,a.datum_params[4]*=O,a.datum_params[5]*=O,a.datum_params[6]=a.datum_params[6]/1e6+1))),a.a=n,a.b=r,a.es=i,a.ep2=o,a}(r.datumCode,r.datum_params,a.a,a.b,s.es,s.ep2);tt(this,r),tt(this,i),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=l,this.init(),n(null,this)}else n(e)}else n(e)}function f(t){return t===C||t===A}function p(t,e,n){var r;return Array.isArray(n)&&(n=gt(n)),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===C||t.datum.datum_type===A)&&"WGS84"!==e.datumCode||(e.datum.datum_type===C||e.datum.datum_type===A)&&"WGS84"!==t.datumCode}(t,e)&&(n=p(t,r=new h("WGS84"),n),t=r),"enu"!==t.axis&&(n=dt(t,!1,n)),"longlat"===t.projName?n={x:n.x*F,y:n.y*F}:(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter}),n=t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=pt(t.datum,e.datum,n),e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y}),"longlat"===e.projName?n={x:n.x*V,y:n.y*V}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter})),"enu"!==e.axis?dt(e,!0,n):n}function d(t,e,n){var r;return Array.isArray(n)?(r=p(t,e,n),3===n.length?[r.x,r.y,r.z]:[r.x,r.y]):p(t,e,n)}function g(t){return t instanceof h?t:t.oProj?t.oProj:h(t)}function m(t,e,n){t=g(t);var r,i=!1;return"undefined"==typeof e?(e=t,t=mt,i=!0):("undefined"!=typeof e.x||Array.isArray(e))&&(n=e,e=t,t=mt,i=!0),e=g(e),n?d(t,e,n):(r={forward:function(n){return d(t,e,n)},inverse:function(n){return d(e,t,n)}},i&&(r.oProj=e),r)}function y(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function(t,e,n){var r=w(n),i=Math.floor(t/1e5),o=Math.floor(e/1e5)%20;return function(t,e,n){var r=n-1,i=vt.charCodeAt(r),o=Et.charCodeAt(r),a=i+t-1,s=o+e,u=!1;return a>xt&&(a=a-xt+_t-1,u=!0),(a===bt||i<bt&&a>bt||(a>bt||i<bt)&&u)&&a++,(a===St||i<St&&a>St||(a>St||i<St)&&u)&&++a===bt&&a++,a>xt&&(a=a-xt+_t-1),s>wt?(s=s-wt+_t-1,u=!0):u=!1,(s===bt||o<bt&&s>bt||(s>bt||o<bt)&&u)&&s++,(s===St||o<St&&s>St||(s>St||o<St)&&u)&&++s===bt&&s++,s>wt&&(s=s-wt+_t-1),String.fromCharCode(a)+String.fromCharCode(s)}(i,o,r)}(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}(function(t){var e,n,r,i,o,a,s,u,l=t.lat,c=t.lon,h=6378137,f=.00669438,p=.9996,d=E(l),g=E(c);u=Math.floor((c+180)/6)+1,180===c&&(u=60),l>=56&&l<64&&c>=3&&c<12&&(u=32),l>=72&&l<84&&(c>=0&&c<9?u=31:c>=9&&c<21?u=33:c>=21&&c<33?u=35:c>=33&&c<42&&(u=37)),s=E(6*(u-1)-180+3),e=f/(1-f),n=h/Math.sqrt(1-f*Math.sin(d)*Math.sin(d)),r=Math.tan(d)*Math.tan(d),i=e*Math.cos(d)*Math.cos(d),o=Math.cos(d)*(g-s),a=h*(.9983242984503243*d-.002514607064228144*Math.sin(2*d)+2639046602129982e-21*Math.sin(4*d)-35*f*f*f/3072*Math.sin(6*d));var m=p*n*(o+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*e)*o*o*o*o*o/120)+5e5,y=p*(a+n*Math.tan(d)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-330*e)*o*o*o*o*o*o/720));return l<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(m),zoneNumber:u,zoneLetter:S(l)}}({lat:t[1],lon:t[0]}),e)}function v(t){var e=b(x(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function E(t){return t*(Math.PI/180)}function _(t){return t/Math.PI*180}function b(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,l,c,h,f,p,d=.9996,g=6378137,m=.00669438,y=(1-Math.sqrt(1-m))/(1+Math.sqrt(1-m)),v=n-5e5,E=e;r<"N"&&(E-=1e7),h=6*(i-1)-180+3,o=m/(1-m),p=(f=E/d/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),a=g/Math.sqrt(1-m*Math.sin(p)*Math.sin(p)),s=Math.tan(p)*Math.tan(p),u=o*Math.cos(p)*Math.cos(p),l=g*(1-m)/Math.pow(1-m*Math.sin(p)*Math.sin(p),1.5),c=v/(a*d);var S=p-a*Math.tan(p)/l*(c*c/2-(5+3*s+10*u-4*u*u-9*o)*c*c*c*c/24+(61+90*s+298*u+45*s*s-252*o-3*u*u)*c*c*c*c*c*c/720);S=_(S);var w,x=(c-(1+2*s+u)*c*c*c/6+(5-2*u+28*s-3*u*u+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(p);if(x=h+_(x),t.accuracy){var T=b({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:T.lat,right:T.lon,bottom:S,left:x}}else w={lat:S,lon:x};return w}function S(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function w(t){var e=t%yt;return 0===e&&(e=yt),e}function x(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);for(var u=w(a),l=function(t,e){for(var n=vt.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(++n===bt&&n++,n===St&&n++,n>xt){if(i)throw"Bad character: "+t;n=_t,i=!0}r+=1e5}return r}(r.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=Et.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(++n===bt&&n++,n===St&&n++,n>wt){if(i)throw"Bad character: "+t;n=_t,i=!0}r+=1e5}return r}(r.charAt(1),u);c<T(s);)c+=2e6;var h=n-o;if(h%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,g=h/2,m=0,y=0;return g>0&&(f=1e5/Math.pow(10,g),p=t.substring(o,o+g),m=parseFloat(p)*f,d=t.substring(o+g),y=parseFloat(d)*f),{easting:m+l,northing:y+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function T(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function L(t,e,n){if(!(this instanceof L))return new L(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&"undefined"==typeof e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var C=1,A=2,M=4,R=5,O=484813681109536e-20,P=Math.PI/2,I=.16666666666666666,N=.04722222222222222,D=.022156084656084655,k="undefined"==typeof Number.EPSILON?1e-10:Number.EPSILON,F=.017453292519943295,V=57.29577951308232,j=Math.PI/4,B=2*Math.PI,U={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},G={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},K=/[\s_\-\/\(\)]/g,W=function(e){var n,r,i,o={},a=e.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),s={proj:"projName",datum:"datumCode",rf:function(t){o.rf=parseFloat(t)},lat_0:function(t){o.lat0=t*F},lat_1:function(t){o.lat1=t*F},lat_2:function(t){o.lat2=t*F},lat_ts:function(t){o.lat_ts=t*F},lon_0:function(t){o.long0=t*F},lon_1:function(t){o.long1=t*F},lon_2:function(t){o.long2=t*F},alpha:function(t){o.alpha=parseFloat(t)*F},lonc:function(t){o.longc=t*F},x_0:function(t){o.x0=parseFloat(t)},y_0:function(t){o.y0=parseFloat(t)},k_0:function(t){o.k0=parseFloat(t)},k:function(t){o.k0=parseFloat(t)},a:function(t){o.a=parseFloat(t)},b:function(t){o.b=parseFloat(t)},r_a:function(){o.R_A=!0},zone:function(t){o.zone=parseInt(t,10)},south:function(){o.utmSouth=!0},towgs84:function(t){o.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){o.to_meter=parseFloat(t)},units:function(e){o.units=e;var n=t(G,e);n&&(o.to_meter=n.to_meter)},from_greenwich:function(t){o.from_greenwich=t*F},pm:function(e){var n=t(U,e);o.from_greenwich=(n||parseFloat(e))*F},nadgrids:function(t){"@null"===t?o.datumCode="none":o.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(o.axis=t)}};for(n in a)r=a[n],n in s?"function"==typeof(i=s[n])?i(r):o[i]=r:o[n]=r;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o},z=1,Y=/\s/,H=/[A-Za-z]/,q=/[A-Za-z84]/,X=/[,\]]/,Z=/[\d\.E\-\+]/;e.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;Y.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case z:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},e.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(X.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},e.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=z)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=z,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},e.prototype.number=function(t){if(!Z.test(t)){if(X.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},e.prototype.quoted=function(t){return'"'===t?void(this.state=5):void(this.word+=t)},e.prototype.keyword=function(t){if(q.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=z)}if(!X.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},e.prototype.neutral=function(t){if(H.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(Z.test(t))return this.word=t,void(this.state=3);if(!X.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},e.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var J=.017453292519943295,Q=function(t){var e=n(t),r=e.shift(),o=e.shift();e.unshift(["name",o]),e.unshift(["type",r]);var s={};return i(e,s),a(s),s};!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(s);var $=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],tt=function(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t},et=function(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)},nt=function(t){return t<0?-1:1},rt=function(t){return Math.abs(t)<=3.14159265359?t:t-nt(t)*B},it=function(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(P-e))/r},ot=function(t,e){for(var n,r,i=.5*t,o=P-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(o),o+=r=P-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999},at=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=et(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*V>90&&i*V<-90&&r*V>180&&r*V<-180)return null;if(Math.abs(Math.abs(i)-P)<=k)return null;if(this.sphere)e=this.x0+this.a*this.k0*rt(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(j+.5*i));else{var o=Math.sin(i),a=it(this.e,i,o);e=this.x0+this.a*this.k0*rt(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=P-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=ot(this.e,o)))return null}return e=rt(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:l,inverse:l,names:["longlat","identity"]}],st={},ut=[],lt={start:function(){at.forEach(c)},add:c,get:function(t){if(!t)return!1;var e=t.toLowerCase();return"undefined"!=typeof st[e]&&ut[st[e]]?ut[st[e]]:void 0}},ct={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},ht=ct.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ct.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var ft={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};h.projections=lt,h.projections.start();var pt=function(t,e,n){return function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===C?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==A||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e)||t.datum_type===R||e.datum_type===R?n:t.es!==e.es||t.a!==e.a||f(t.datum_type)||f(e.datum_type)?(n=function(t,e,n){var r,i,o,a,s=t.x,u=t.y,l=t.z?t.z:0;if(u<-P&&u>-1.001*P)u=-P;else if(u>P&&u<1.001*P)u=P;else if(u<-P||u>P)return null;return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(u),a=Math.cos(u),o=i*i,{x:((r=n/Math.sqrt(1-e*o))+l)*a*Math.cos(s),y:(r+l)*a*Math.sin(s),z:(r*(1-e)+l)*i}}(n,t.es,t.a),f(t.datum_type)&&(n=function(t,e,n){if(e===C)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===A){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6];return{x:l*(t.x-u*t.y+s*t.z)+r,y:l*(u*t.x+t.y-a*t.z)+i,z:l*(-s*t.x+a*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),f(e.datum_type)&&(n=function(t,e,n){if(e===C)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===A){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=(t.x-r)/l,h=(t.y-i)/l,f=(t.z-o)/l;return{x:c+u*h-s*f,y:-u*c+h+a*f,z:s*c-a*h+f}}}(n,e.datum_type,e.datum_params)),function(t,e,n,r){var i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E=1e-12,_=t.x,b=t.y,S=t.z?t.z:0;if(i=Math.sqrt(_*_+b*b),o=Math.sqrt(_*_+b*b+S*S),i/n<E){if(y=0,o/n<E)return v=-r,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(b,_);a=S/o,h=(s=i/o)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),f=a*u,m=0;do{m++,l=e*(c=n/Math.sqrt(1-e*f*f))/(c+(v=i*h+S*f-c*(1-e*f*f))),g=(d=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*h-(p=s*(1-l)*u)*f,h=p,f=d}while(g*g>1e-24&&m<30);return{x:y,y:Math.atan(d/Math.abs(p)),z:v}}(n,e.es,e.a,e.b)):n},dt=function(t,e,n){var r,i,o,a=n.x,s=n.y,u=n.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i="x"):1===o?(r=s,i="y"):(r=u,i="z"),t.axis[o]){case"e":l[i]=r;break;case"w":l[i]=-r;break;case"n":l[i]=r;break;case"s":l[i]=-r;break;case"u":void 0!==n[i]&&(l.z=r);break;case"d":void 0!==n[i]&&(l.z=-r);break;default:return null}return l},gt=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},mt=h("WGS84"),yt=6,vt="AJSAJS",Et="AFAFAF",_t=65,bt=73,St=79,wt=86,xt=90,Tt={forward:y,inverse:function(t){var e=b(x(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:v};L.fromMGRS=function(t){return new L(v(t))},L.prototype.toMGRS=function(t){return y([this.x,this.y],t)};var Lt=.01953125,Ct=.01068115234375,At=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(Lt+t*Ct))),e[1]=t*(.75-t*(.046875+t*(Lt+t*Ct)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e},Mt=function(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))},Rt=function(t,e,n){for(var r=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(Mt(i,a,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<k)return i}return i},Ot={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=At(this.es),this.ml0=Mt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=rt(i-this.long0),s=Math.sin(o),u=Math.cos(o);if(this.es){var l=u*a,c=Math.pow(l,2),h=this.ep2*Math.pow(u,2),f=Math.pow(h,2),p=Math.abs(u)>k?Math.tan(o):0,d=Math.pow(p,2),g=Math.pow(d,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var m=Mt(o,s,u,this.en);n=this.a*(this.k0*l*(1+c/6*(1-d+h+c/20*(5-18*d+g+14*h-58*d*h+c/42*(61+179*g-g*d-479*d)))))+this.x0,r=this.a*(this.k0*(m-this.ml0+s*a*l/2*(1+c/12*(5-d+9*h+4*f+c/30*(61+g-58*d+270*h-330*d*h+c/56*(1385+543*g-g*d-3111*d))))))+this.y0}else{var y=u*Math.sin(a);if(Math.abs(Math.abs(y)-1)<k)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,r=u*Math.cos(a)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(r))>=1){if(y-1>k)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,n=Rt(e,this.es,this.en),Math.abs(n)<P){var s=Math.sin(n),u=Math.cos(n),l=Math.abs(u)>k?Math.tan(n):0,c=this.ep2*Math.pow(u,2),h=Math.pow(c,2),f=Math.pow(l,2),p=Math.pow(f,2);e=1-this.es*Math.pow(s,2);var d=o*Math.sqrt(e)/this.k0,g=Math.pow(d,2);r=n-(e*=l)*g/(1-this.es)*.5*(1-g/12*(5+3*f-9*c*f+c-4*h-g/30*(61+90*f-252*c*f+45*p+46*c-g/56*(1385+3633*f+4095*p+1574*p*f)))),i=rt(this.long0+d*(1-g/6*(1+2*f+c-g/20*(5+28*f+24*p+8*c*f+6*c-g/42*(61+662*f+1320*p+720*p*f))))/u)}else r=P*nt(a),i=0;else{var m=Math.exp(o/this.k0),y=.5*(m-1/m),v=this.lat0+a/this.k0,E=Math.cos(v);e=Math.sqrt((1-Math.pow(E,2))/(1+Math.pow(y,2))),r=Math.asin(e),a<0&&(r=-r),i=0===y&&0===E?0:rt(Math.atan2(y,E)+this.long0)}return t.x=i,t.y=r,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},Pt=function(t){var e=Math.exp(t);return(e-1/e)/2},It=function(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},Nt=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(It(1,e)+1))),t<0?-e:e},Dt=function(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)},kt=function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n},Ft=function(t,e,n){for(var r,i,o=Math.sin(e),a=Math.cos(e),s=Pt(n),u=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),l=2*a*u,c=-2*o*s,h=t.length-1,f=t[h],p=0,d=0,g=0;--h>=0;)r=d,i=p,f=l*(d=f)-r-c*(p=g)+t[h],g=c*d-i+l*p;return[(l=o*u)*f-(c=a*s)*g,l*g+c*f]},Vt={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var r=Dt(this.cbg,this.lat0);this.Zb=-this.Qn*(r+kt(this.gtu,2*r))},forward:function(t){var e=rt(t.x-this.long0),n=t.y;n=Dt(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(o*i,It(r,i*a)),e=Nt(Math.tan(e));var s,u,l=Ft(this.gtu,2*n,2*e);return n+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=Ft(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(Pt(r));var a=Math.sin(i),s=Math.cos(i),u=Math.sin(r),l=Math.cos(r);i=Math.atan2(a*l,It(u,l*s)),r=Math.atan2(u,l*s),e=rt(r+this.long0),n=Dt(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},jt=function(t,e){if(void 0===t){if((t=Math.floor(30*(rt(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t},Bt={init:function(){var t=jt(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*F,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Vt.init.apply(this),this.forward=Vt.forward,this.inverse=Vt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Ut=function(t,e){return Math.pow((1-t)/(1+t),e)},Gt=20,Kt={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+j)/(Math.pow(Math.tan(.5*this.lat0+j),this.C)*Ut(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+j),this.C)*Ut(this.e*Math.sin(n),this.ratexp))-P,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+j)/this.K,1/this.C),i=Gt;i>0&&(n=2*Math.atan(r*Ut(this.e*Math.sin(t.y),-.5*this.e))-P,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]},Wt={init:function(){Kt.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=rt(t.x-this.long0),Kt.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,Kt.inverse.apply(this,[t]),t.x=rt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},zt={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=k&&(this.k0=.5*(1+nt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=k&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=k&&(this.k0=.5*this.cons*et(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/it(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=et(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-P,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,o,a,s=t.x,u=t.y,l=Math.sin(u),c=Math.cos(u),h=rt(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=k&&Math.abs(u+this.lat0)<=k?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(u,l,this.e))-P,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=k?(o=it(this.e,u*this.con,this.con*l),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<k?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(.5*this.a*this.k0));return e=this.long0,n=this.lat0,a<=k?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=rt(Math.abs(this.coslat0)<k?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=k){if(a<=k)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*ot(this.e,r),e=this.con*rt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=k?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=rt(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*ot(this.e,Math.tan(.5*(P+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(P+t))*Math.pow((1-e)/(1+e),.5*n)}},Yt={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,l=o,c=-1e3,h=0;Math.abs(l-c)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]},Ht={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,i,o=it(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(a*a<1&&(a=1),isNaN(this.longc)){var s=it(this.e,this.lat1,Math.sin(this.lat1)),u=it(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var l=Math.pow(s,this.bl),c=Math.pow(u,this.bl);i=.5*((r=this.el/l)-1/r);var h=(this.el*this.el-c*l)/(this.el*this.el+c*l),f=(c-l)/(c+l),p=rt(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*p)/f)/this.bl,this.long0=rt(this.long0);var d=rt(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*d)/i),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else r=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=r*Math.pow(o,this.bl),i=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=rt(i-this.long0);if(Math.abs(Math.abs(o)-P)<=k)r=o>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(j+r*this.gamma0*.5)),e=-1*r*P*this.al/this.bl;else{var s=it(this.e,o,Math.sin(o)),u=this.el/Math.pow(s,this.bl),l=.5*(u-1/u),c=.5*(u+1/u),h=Math.sin(this.bl*a),f=(l*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/c;n=Math.abs(Math.abs(f)-1)<=k?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,e=Math.abs(Math.cos(this.bl*a))<=k?this.al*this.bl*a:this.al*Math.atan2(l*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),i=.5*(r-1/r),o=.5*(r+1/r),a=Math.sin(this.bl*e/this.al),s=(a*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,u=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<k?(t.x=this.long0,t.y=P):Math.abs(s+1)<k?(t.x=this.long0,t.y=-1*P):(t.y=ot(this.e,u),t.x=rt(this.long0-Math.atan2(i*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},qt={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<k)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=et(this.e,e,n),i=it(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=et(this.e,o,a),u=it(this.e,this.lat2,o),l=it(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>k?this.ns=Math.log(r/s)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=k&&(n=nt(n)*(P-2*k));var r,i,o=Math.abs(Math.abs(n)-P);if(o>k)r=it(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var a=this.ns*rt(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,n,r,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),n=1):(e=-Math.sqrt(a*a+s*s),n=-1);var u=0;if(0!==e&&(u=Math.atan2(n*a,n*s)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=ot(this.e,r)))return null}else i=-P;return o=rt(u/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},Xt={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y,c=rt(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]},Zt=function(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},Jt=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},Qt=function(t){return.375*t*(1+.25*t*(1+.46875*t))},$t=function(t){return.05859375*t*t*(1+.75*t)},te=function(t){return t*t*t*(35/3072)},ee=function(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)},ne=function(t){return Math.abs(t)<P?t:t-nt(t)*Math.PI},re=function(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN},ie={init:function(){this.sphere||(this.e0=Jt(this.es),this.e1=Qt(this.es),this.e2=$t(this.es),this.e3=te(this.es),this.ml0=this.a*Zt(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=rt(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=ee(this.a,this.e,o),u=Math.tan(i)*Math.tan(i),l=r*Math.cos(i),c=l*l,h=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*h)*c/120)),n=this.a*Zt(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-u+6*h)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=re(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-P)<=k)return t.x=this.long0,t.y=P,i<0&&(t.y*=-1),t;var u=ee(this.a,this.e,Math.sin(s)),l=u*u*u/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),h=r*this.a/u,f=h*h;e=s-u*Math.tan(s)/l*h*h*(.5-(1+3*c)*h*h/24),n=h*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(s)}return t.x=rt(n+this.long0),t.y=ne(e),t},names:["Cassini","Cassini_Soldner","cass"]},oe=function(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e},ae=.3333333333333333,se=.17222222222222222,ue=.10257936507936508,le=.06388888888888888,ce=.0664021164021164,he=.016415012942191543,fe={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-P)<k?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<k?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=oe(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*ae,e=t*t,n[0]+=e*se,n[1]=e*le,e*=t,n[0]+=e*ue,n[1]+=e*ce,n[2]=e*he,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=oe(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,o,a,s,u,l,c,h=t.x,f=t.y;if(h=rt(h-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r)<=k)return null;e=(n=Math.sqrt(2/n))*c*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.phi0)<k)return null;n=j-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(s=0,u=0,l=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(f),a=oe(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*r;break;case this.EQUIT:l=1+u*r;break;case this.N_POLE:l=P+f,a=this.qp-a;break;case this.S_POLE:l=f-P,a=this.qp+a}if(Math.abs(l)<k)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),n=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*r):(l=Math.sqrt(2/(1+u*r)))*s*this.ymf,e=this.xmf*l*u*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(l=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?l:-l)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a,s,u=t.x/this.a,l=t.y/this.a;if(this.sphere){var c,h=0,f=0;if((n=.5*(c=Math.sqrt(u*u+l*l)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(c)<=k?0:Math.asin(l*f/c),u*=f,l=h*c;break;case this.OBLIQ:n=Math.abs(c)<=k?this.phi0:Math.asin(h*this.sinph0+l*f*this.cosph0/c),u*=f*this.cosph0,l=(h-Math.sin(n)*this.sinph0)*c;break;case this.N_POLE:l=-l,n=P-n;break;case this.S_POLE:n-=P}e=0!==l||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(u,l):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(u/=this.dd,l*=this.dd,(a=Math.sqrt(u*u+l*l))<k)return t.x=0,t.y=this.phi0,t;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),u*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+l*i*this.cosb1/a,o=this.qp*s,l=a*this.cosb1*r-l*this.sinb1*i):(s=l*i/a,o=this.qp*s,l=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),!(o=u*u+l*l))return t.x=0,t.y=this.phi0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(u,l),n=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}(Math.asin(s),this.apa)}return t.x=rt(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},pe=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},de={init:function(){Math.abs(this.lat1+this.lat2)<k||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=et(this.e3,this.sin_po,this.cos_po),this.qs1=oe(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=et(this.e3,this.sin_po,this.cos_po),this.qs2=oe(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=oe(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>k?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=oe(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*rt(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=rt(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,a=pe(.5*e);if(t<k)return a;for(var s=t*t,u=1;u<=25;u++)if(a+=o=.5*(i=1-(r=t*(n=Math.sin(a)))*r)*i/Math.cos(a)*(e/(1-s)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return a;return null}},ge={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y;return r=rt(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),(o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=k?(a=this.x0+1*this.a*n*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),a=pe(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=rt(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]},me=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*P:P;for(var r,i,o,a,s=Math.asin(.5*e),u=0;u<30;u++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=r=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return s;return NaN},ye={init:function(){this.sphere||(this.k0=et(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=rt(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=oe(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=rt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=me(this.e,2*t.y*this.k0/this.a),e=rt(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]},ve={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=rt(e-this.long0),i=ne(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=rt(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=ne(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Ee=20,_e={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jt(this.es),this.e1=Qt(this.es),this.e2=$t(this.es),this.e3=te(this.es),this.ml0=this.a*Zt(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,a=rt(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=k?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(ne(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=k)e=this.a*a,n=-1*this.ml0;else{var s=ee(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(r),n=this.a*Zt(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,a,s,u,l;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=k)e=rt(r/this.a+this.long0),n=0;else{var c;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,u=a,o=Ee;o;--o)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=k){n=u;break}e=rt(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=k)n=0,e=rt(this.long0+r/this.a);else{var h,f,p,d,g;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,u=a,o=Ee;o;--o)if(g=this.e*Math.sin(u),h=Math.sqrt(1-g*g)*Math.tan(u),f=this.a*Zt(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(h*(d=f/this.a)+1)-d-.5*h*(d*d+s))/(this.es*Math.sin(2*u)*(d*d+s-2*a*d)/(4*h)+(a-d)*(h*p-2/Math.sin(2*u))-p),Math.abs(l)<=k){n=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=rt(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]},be={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,o=r/O*1e-5,a=i,s=1,u=0;for(e=1;e<=10;e++)s*=o,u+=this.A[e]*s;var l,c=u,h=a,f=1,p=0,d=0,g=0;for(e=1;e<=6;e++)l=p*c+f*h,f=f*c-p*h,p=l,d=d+this.B_re[e]*f-this.B_im[e]*p,g=g+this.B_im[e]*f+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,o=r-this.x0,a=(i-this.y0)/this.a,s=o/this.a,u=1,l=0,c=0,h=0;for(e=1;e<=6;e++)n=l*a+u*s,u=u*a-l*s,l=n,c=c+this.C_re[e]*u-this.C_im[e]*l,h=h+this.C_im[e]*u+this.C_re[e]*l;for(var f=0;f<this.iterations;f++){var p,d=c,g=h,m=a,y=s;for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,m+=(e-1)*(this.B_re[e]*d-this.B_im[e]*g),y+=(e-1)*(this.B_im[e]*d+this.B_re[e]*g);d=1,g=0;var v=this.B_re[1],E=this.B_im[1];for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,v+=e*(this.B_re[e]*d-this.B_im[e]*g),E+=e*(this.B_im[e]*d+this.B_re[e]*g);var _=v*v+E*E;c=(m*v+y*E)/_,h=(y*v-m*E)/_}var b=c,S=h,w=1,x=0;for(e=1;e<=9;e++)w*=b,x+=this.D[e]*w;var T=this.lat0+x*O*1e5,L=this.long0+S;return t.x=L,t.y=T,t},names:["New_Zealand_Map_Grid","nzmg"]},Se={init:function(){},forward:function(t){var e=t.x,n=t.y,r=rt(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=rt(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]},we=20,xe={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=At(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=rt(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=we;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<k)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var u=Math.sin(i),l=Math.cos(i);n=this.a*Mt(i,u,l,this.en),e=this.a*r*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=pe((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=pe(Math.sin(e)/this.n)),r=rt(r+this.long0),e=ne(e)):(e=Rt(t.y/this.a,this.es,this.en),(i=Math.abs(e))<P?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=rt(n)):i-k<P&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]},Te={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=rt(e-this.long0),i=n,o=Math.PI*Math.sin(n),a=0;;a++){var s=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=s,Math.abs(s)<k)break}i/=2,Math.PI/2-Math.abs(n)<k&&(r=0);var u=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=u,t.y=l,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=rt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]},Le={init:function(){Math.abs(this.lat1+this.lat2)<k||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jt(this.es),this.e1=Qt(this.es),this.e2=$t(this.es),this.e3=te(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=et(this.e,this.sinphi,this.cosphi),this.ml1=Zt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<k?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=et(this.e,this.sinphi,this.cosphi),this.ml2=Zt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Zt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=Zt(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*rt(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=rt(this.long0+o/this.ns),r=ne(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=re(a,this.e0,this.e1,this.e2,this.e3),i=rt(this.long0+o/this.ns),t.x=i,t.y=r,t},names:["Equidistant_Conic","eqdc"]},Ce={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,o=rt(r-this.long0);Math.abs(i)<=k&&(e=this.x0+this.R*o,n=this.y0);var a=pe(2*Math.abs(i/Math.PI));(Math.abs(o)<=k||Math.abs(Math.abs(i)-P)<=k)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),u=s*s,l=Math.sin(a),c=Math.cos(a),h=c/(l+c-1),f=h*h,p=h*(2/l-1),d=p*p,g=Math.PI*this.R*(s*(h-d)+Math.sqrt(u*(h-d)*(h-d)-(d+u)*(f-d)))/(d+u);o<0&&(g=-g),e=this.x0+g;var m=u+h;return g=Math.PI*this.R*(p*m-s*Math.sqrt((d+u)*(u+1)-m*m))/(d+u),n=i>=0?this.y0+g:this.y0-g,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,o,a,s,u,l,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(u=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,n=t.y>=0?(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(r)<k?this.long0:rt(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Ae={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_,b,S,w=t.x,x=t.y,T=Math.sin(t.y),L=Math.cos(t.y),C=rt(w-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=k?(t.x=this.x0+this.a*(P-x)*Math.sin(C),t.y=this.y0-this.a*(P-x)*Math.cos(C),t):Math.abs(this.sin_p12+1)<=k?(t.x=this.x0+this.a*(P+x)*Math.sin(C),t.y=this.y0+this.a*(P+x)*Math.cos(C),t):(v=this.sin_p12*T+this.cos_p12*L*Math.cos(C),y=(m=Math.acos(v))/Math.sin(m),t.x=this.x0+this.a*y*L*Math.sin(C),t.y=this.y0+this.a*y*(this.cos_p12*T-this.sin_p12*L*Math.cos(C)),t):(e=Jt(this.es),n=Qt(this.es),r=$t(this.es),i=te(this.es),Math.abs(this.sin_p12-1)<=k?(o=this.a*Zt(e,n,r,i,P),a=this.a*Zt(e,n,r,i,x),t.x=this.x0+(o-a)*Math.sin(C),t.y=this.y0-(o-a)*Math.cos(C),t):Math.abs(this.sin_p12+1)<=k?(o=this.a*Zt(e,n,r,i,P),a=this.a*Zt(e,n,r,i,x),t.x=this.x0+(o+a)*Math.sin(C),t.y=this.y0+(o+a)*Math.cos(C),t):(s=T/L,u=ee(this.a,this.e,this.sin_p12),l=ee(this.a,this.e,T),c=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(l*L)),E=0===(h=Math.atan2(Math.sin(C),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(C)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=k?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(C)*Math.cos(c)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),m=u*E*(1-(_=E*E)*(g=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-g)/6+(b=_*E)/8*(d=f*p)*(1-2*g)+(S=b*E)/120*(g*(4-7*g)-3*f*f*(1-7*g))-S*E/48*d),t.x=this.x0+m*Math.sin(h),t.y=this.y0+m*Math.cos(h),t))},inverse:function(t){var e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_,b,S;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*P*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=k?a=this.lat0:(a=pe(i*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-P,o=rt(Math.abs(s)<=k?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=o,t.y=a,t}return u=Jt(this.es),l=Qt(this.es),c=$t(this.es),h=te(this.es),Math.abs(this.sin_p12-1)<=k?(f=this.a*Zt(u,l,c,h,P),e=Math.sqrt(t.x*t.x+t.y*t.y),a=re((f-e)/this.a,u,l,c,h),o=rt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=k?(f=this.a*Zt(u,l,c,h,P),e=Math.sqrt(t.x*t.x+t.y*t.y),a=re((e-f)/this.a,u,l,c,h),o=rt(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),p=ee(this.a,this.e,this.sin_p12),m=Math.cos(g),v=-(y=this.e*this.cos_p12*m)*y/(1-this.es),E=3*this.es*(1-v)*this.sin_p12*this.cos_p12*m/(1-this.es),S=1-v*(b=(_=e/p)-v*(1+v)*Math.pow(_,3)/6-E*(1+3*v)*Math.pow(_,4)/24)*b/2-_*b*b*b/6,d=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*m),o=rt(this.long0+Math.asin(Math.sin(g)*Math.sin(b)/Math.cos(d))),a=Math.atan((1-this.es*S*this.sin_p12/Math.sin(d))*Math.tan(d)/(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]},Me={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y;return r=rt(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),((o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=k)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=pe(e/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=k?(s=this.lat0,t.x=a,t.y=s,t):(s=pe(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-P,Math.abs(o)<=k?(a=rt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=rt(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=a,t.y=s,t))},names:["ortho"]};return m.defaultDatum="WGS84",m.Proj=h,m.WGS84=new m.Proj("WGS84"),m.Point=L,m.toPoint=gt,m.defs=s,m.transform=p,m.mgrs=Tt,m.version="2.4.3",function(t){t.Proj.projections.add(Ot),t.Proj.projections.add(Vt),t.Proj.projections.add(Bt),t.Proj.projections.add(Wt),t.Proj.projections.add(zt),t.Proj.projections.add(Yt),t.Proj.projections.add(Ht),t.Proj.projections.add(qt),t.Proj.projections.add(Xt),t.Proj.projections.add(ie),t.Proj.projections.add(fe),t.Proj.projections.add(de),t.Proj.projections.add(ge),t.Proj.projections.add(ye),t.Proj.projections.add(ve),t.Proj.projections.add(_e),t.Proj.projections.add(be),t.Proj.projections.add(Se),t.Proj.projections.add(xe),t.Proj.projections.add(Te),t.Proj.projections.add(Le),t.Proj.projections.add(Ce),t.Proj.projections.add(Ae),t.Proj.projections.add(Me)}(m),m})),i("formats/geotiff/TiffIFDEntry",["../../error/AbstractError","../../error/ArgumentError","./GeoTiffUtil","../../util/Logger","./TiffConstants"],(function(t,e,n,r,i){"use strict";var o=function(t,n,i,o,a,s){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","constructor","missingTag"));if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","constructor","missingType"));if(!i)throw new e(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","constructor","missingCount"));if(null===o||void 0===o)throw new e(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","constructor","missingValueOffset"));if(!a)throw new e(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","constructor","missingGeoTiffData"));if(null===s||void 0===s)throw new e(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","constructor","missingIsLittleEndian"));this._tag=t,this._type=n,this._count=i,this._valueOffset=o,this._geoTiffData=a,this._isLittleEndian=s};return Object.defineProperties(o.prototype,{tag:{get:function(){return this._tag}},type:{get:function(){return this._type}},count:{get:function(){return this._count}},valueOffset:{get:function(){return this._valueOffset}},geoTiffData:{get:function(){return this._geoTiffData}},isLittleEndian:{get:function(){return this._isLittleEndian}}}),o.prototype.getIFDTypeLength=function(){switch(this.type){case i.Type.BYTE:case i.Type.ASCII:case i.Type.SBYTE:case i.Type.UNDEFINED:return 1;case i.Type.SHORT:case i.Type.SSHORT:return 2;case i.Type.LONG:case i.Type.SLONG:case i.Type.FLOAT:return 4;case i.Type.RATIONAL:case i.Type.SRATIONAL:case i.Type.DOUBLE:return 8;default:return-1}},o.prototype.getIFDEntryValue=function(){var e=[],o=null,a=this.getIFDTypeLength();if(a*this.count<=4)o=!1===this.isLittleEndian?this.valueOffset>>>8*(4-a):this.valueOffset,e.push(o);else for(var s=0;s<this.count;s++){var u=a*s;if(a>=8)if(this.type===i.Type.RATIONAL||this.type===i.Type.SRATIONAL)e.push(n.getBytes(this.geoTiffData,this.valueOffset+u,4,this.isLittleEndian)),e.push(n.getBytes(this.geoTiffData,this.valueOffset+u+4,4,this.isLittleEndian));else{if(this.type!==i.Type.DOUBLE)throw new t(r.logMessage(r.LEVEL_SEVERE,"TiffIFDEntry","parse","invalidTypeOfIFD"));e.push(n.getBytes(this.geoTiffData,this.valueOffset+u,8,this.isLittleEndian))}else e.push(n.getBytes(this.geoTiffData,this.valueOffset+u,a,this.isLittleEndian))}return this.type===i.Type.ASCII?(e.forEach((function(t,e,n){0===t?n.splice(e,1):n[e]=String.fromCharCode(t)})),e.join("")):e},o})),i("util/WWUtil",["../error/ArgumentError","../geom/Line","../util/Logger","../geom/Rectangle","../geom/Vec3"],(function(t,e,n,r,i){"use strict";var o={latLonRegex:/^(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)$/,suffixForMimeType:function(t){return"image/png"===t?"png":"image/jpeg"===t?"jpg":"application/bil16"===t||"application/bil32"===t?"bil":null},currentUrlSansFilePart:function(){for(var t=window.location.protocol,e=window.location.host,n=window.location.pathname.split("/"),r="",i=0,o=n.length;i<o-1;i++)n[i].length>0&&(r=r+"/"+n[i]);return t+"//"+e+r},worldwindlibLocation:function(){for(var t=document.getElementsByTagName("script"),e=0;e<t.length;e++){var n=t[e].src.indexOf("/worldwind.");if(n>=0)return t[e].src.substring(0,n)+"/"}return null},urlPath:function(t){if(!t)return"";for(var e=t.split("/"),n="",r=0,i=e.length;r<i;r++){var o=e[r];o&&0!==o.length&&-1==o.indexOf(":")&&"."!==o&&".."!==o&&"null"!==o&&"undefined"!==o&&(0!==n.length&&(n+="/"),n+=o)}return n},fillArray:function(t,e){if(t)for(var n=0,r=t.length;n<r;n++)t[n]=e},multiplyArray:function(t,e){if(t)for(var n=0,r=t.length;n<r;n++)t[n]*=e},jsonpCounter:0,jsonp:function(t,e,n){var r="gov_nasa_worldwind_jsonp_"+o.jsonpCounter++;window[r]=function(t){delete window[r],n(t)};var i=t+(-1===t.indexOf("?")?"?":"&");i+=e+"="+r;var a=document.createElement("script");a.async=!0,a.src=i;var s=document.getElementsByTagName("head")[0],u=function(){a.onload=void 0,a.onerror=void 0,s.removeChild(a)};a.onload=u,a.onerror=u,s.appendChild(a)},arrayEquals:function(t,e){return t.length==e.length&&t.every((function(t,n){return t===e[n]||t.equals&&t.equals(e[n])}))},transformToBoolean:function(t){return 0!=t&&"0"!=t&&"false"!=t&&Boolean(t)},clone:function(t){var e,n={},r=Object.keys(t);for(e=0;e<r.length;e++)n[r[e]]=t[r[e]];return n},guid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},date:function(t){return new Date(t)},startsWith:function(t,e,n){return n=n||0,t.substr(n,e.length)===e},endsWith:function(t,e,n){("number"!=typeof n||!isFinite(n)||Math.floor(n)!==n||n>t.length)&&(n=t.length),n-=e.length;var r=t.lastIndexOf(e,n);return-1!==r&&r===n},arrayIncludes:function(t,e){if(!t)return!1;for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i===e||"number"==typeof i&&"number"==typeof e&&isNaN(i)&&isNaN(e))return!0}return!1}};return o})),i("formats/geotiff/GeoTiffReader",["../../error/AbstractError","../../error/ArgumentError","./GeoTiffConstants","./GeoTiffKeyEntry","./GeoTiffMetadata","./GeoTiffUtil","../../geom/Location","../../geom/Sector","../../util/Logger","../../util/proj4-src","./TiffConstants","./TiffIFDEntry","../../util/WWUtil"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f){"use strict";var p=function(t){if(!t)throw new e(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","constructor","missingArrayBuffer"));this._isLittleEndian=!1,this._imageFileDirectories=[],this._geoTiffData=new DataView(t),this._metadata=new i,this.parse()};return Object.defineProperties(p.prototype,{isLittleEndian:{get:function(){return this._isLittleEndian}},imageFileDirectories:{get:function(){return this._imageFileDirectories}},geoTiffData:{get:function(){return this._geoTiffData}},metadata:{get:function(){return this._metadata}}}),p.retrieveFromUrl=function(t,n){if(!t)throw new e(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","retrieveFromUrl","missingUrl"));if(!n)throw new e(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","retrieveFromUrl","The specified callback is null or undefined."));var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var e=r.response;e&&n(new p(e),r)}else u.log(u.LEVEL_WARNING,"GeoTiff retrieval failed ("+r.statusText+"): "+t),n(null,r)}.bind(this),r.onerror=function(){u.log(u.LEVEL_WARNING,"GeoTiff retrieval failed: "+t),n(null,r)},r.ontimeout=function(){u.log(u.LEVEL_WARNING,"GeoTiff retrieval timed out: "+t),n(null,r)},r.send(null)},p.prototype.parse=function(){if(!this._imageFileDirectories.length){if(this.getEndianness(),!this.isTiffFileType())throw new t(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","parse","invalidTiffFileType"));var e=o.getBytes(this.geoTiffData,4,4,this.isLittleEndian);this.parseImageFileDirectory(e),this.getMetadataFromImageFileDirectory(),this.parseGeoKeys(),this.setBBox()}},p.prototype.getEndianness=function(){var e=o.getBytes(this.geoTiffData,0,2,this.isLittleEndian);if(18761===e)this._isLittleEndian=!0;else{if(19789!==e)throw new t(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","getEndianness","invalidByteOrderValue"));this._isLittleEndian=!1}},p.prototype.getImage=function(){return this.createImage()},p.prototype.getImageData=function(){return this.createTypedElevationArray()},p.prototype.isTiffFileType=function(){return 42===o.getBytes(this.geoTiffData,2,2,this.isLittleEndian)},p.prototype.isGeoTiff=function(){return!!this.getIFDByTag(n.Tag.GEO_KEY_DIRECTORY)},p.prototype.createImage=function(){var t=this.metadata.bitsPerSample,e=this.metadata.samplesPerPixel,n=this.metadata.photometricInterpretation,r=this.metadata.imageLength,i=this.metadata.imageWidth;if(this.metadata.colorMap)var o=this.metadata.colorMap,a=Math.pow(2,t[0]);var s=document.createElement("canvas");s.width=i,s.height=r;var u=s.getContext("2d");if(this.metadata.stripOffsets){var l=this.parseStrips(!1);if(this.metadata.rowsPerStrip)var c=this.metadata.rowsPerStrip;else c=r;for(var h=l.length,f=0,p=0;p<h;p++){for(var d=l[p].length,g=f*p,m=0,y=0;y<d;m++)for(var v=0;v<i;v++,y++){var E=l[p][y];u.fillStyle=this.getFillStyle(E,n,t,e,o,a),u.fillRect(v,g+m,1,1)}f=c}}else if(this.metadata.tileOffsets){var _=this.parseTiles(!1),b=this.metadata.tileWidth,S=this.metadata.tileLength,w=Math.ceil(i/b);for(m=0;m<r;m++)for(v=0;v<i;v++){var x=Math.floor(v/b),T=m%S*b+v%b;E=_[Math.floor(m/S)*w+x][T],u.fillStyle=this.getFillStyle(E,n,t,e,o,a),u.fillRect(v,m,1,1)}}return this._geoTiffData=null,s},p.prototype.getFillStyle=function(t,e,n,r,i,a){var s=0,l=0,h=0,f=1;switch(this.metadata.noData&&t[0]==this.metadata.noData&&(f=0),e){case c.PhotometricInterpretation.WHITE_IS_ZERO:var p=Math.pow(2,n)-1;t[0]=p-t[0];case c.PhotometricInterpretation.BLACK_IS_ZERO:s=l=h=o.clampColorSample(t[0],n[0]);break;case c.PhotometricInterpretation.RGB:if(s=o.clampColorSample(t[0],n[0]),l=o.clampColorSample(t[1],n[1]),h=o.clampColorSample(t[2],n[2]),4===r&&2===this.metadata.extraSamples[0]){var d=Math.pow(2,n[3]);f=t[3]/d}break;case c.PhotometricInterpretation.RGB_PALETTE:if(i){var g=t[0];s=o.clampColorSample(i[g],16),l=o.clampColorSample(i[a+g],16),h=o.clampColorSample(i[2*a+g],16)}break;case c.PhotometricInterpretation.TRANSPARENCY_MASK:u.log(u.LEVEL_WARNING,"Photometric interpretation not yet implemented: TRANSPARENCY_MASK");break;case c.PhotometricInterpretation.CMYK:u.log(u.LEVEL_WARNING,"Photometric interpretation not yet implemented: CMYK");break;case c.PhotometricInterpretation.Y_Cb_Cr:u.log(u.LEVEL_WARNING,"Photometric interpretation not yet implemented: Y_Cb_Cr");break;case c.PhotometricInterpretation.CIE_LAB:u.log(u.LEVEL_WARNING,"Photometric interpretation not yet implemented: CIE_LAB");break;default:u.log("Unknown photometric interpretation: "+e)}return o.getRGBAFillValue(s,l,h,f)},p.prototype.createTypedElevationArray=function(){var t,e=[],n=this.metadata.bitsPerSample[0];if(this.metadata.stripOffsets)for(var r=this.parseStrips(!0),i=0;i<r.length;i++)e=e.concat(r[i]);else if(this.metadata.tileOffsets)for(var o=this.parseTiles(!0),a=this.metadata.imageWidth,s=this.metadata.imageLength,u=this.metadata.tileWidth,l=this.metadata.tileLength,h=Math.ceil(a/u),f=0;f<s;f++)for(var p=0;p<a;p++){var d=Math.floor(p/u),g=f%l*u+p%u,m=o[Math.floor(f/l)*h+d][g];e.push(m)}if(this.metadata.sampleFormat)var y=this.metadata.sampleFormat[0];else y=c.SampleFormat.UNSIGNED;switch(n){case 8:t=y===c.SampleFormat.SIGNED?new Int8Array(e):new Uint8Array(e);break;case 16:t=y===c.SampleFormat.SIGNED?new Int16Array(e):new Uint16Array(e);break;case 32:t=y===c.SampleFormat.SIGNED?new Int32Array(e):y===c.SampleFormat.IEEE_FLOAT?new Float32Array(e):new Uint32Array(e);break;case 64:t=new Float64Array(e)}return t},p.prototype.parseStrips=function(t){var e=this.metadata.samplesPerPixel,n=this.metadata.bitsPerSample,r=this.metadata.stripOffsets,i=this.metadata.stripByteCounts,o=this.metadata.compression;if(this.metadata.sampleFormat)var a=this.metadata.sampleFormat;else a=c.SampleFormat.UNSIGNED;for(var s=e*n[0]/8,u=[],l=0;l<r.length;l++){var h=r[l],f=i[l];u[l]=this.parseBlock(t,o,s,f,h,n,a)}return u},p.prototype.parseBlock=function(t,e,n,r,i,a,s){var l=[];switch(e){case c.Compression.UNCOMPRESSED:for(var h=0,f=n;h<r;h+=f){for(var p=0,d=[];p<a.length;p++){var g=p*(M=a[p]/8);d.push(o.getSampleBytes(this.geoTiffData,i+h+g,M,s[p],this.isLittleEndian))}t?l.push(d[0]):l.push(d)}break;case c.Compression.CCITT_1D:u.log(u.LEVEL_WARNING,"Compression type not yet implemented: CCITT_1D");break;case c.Compression.GROUP_3_FAX:u.log(u.LEVEL_WARNING,"Compression type not yet implemented: GROUP_3_FAX");break;case c.Compression.GROUP_4_FAX:u.log(u.LEVEL_WARNING,"Compression type not yet implemented: GROUP_4_FAX");break;case c.Compression.LZW:u.log(u.LEVEL_WARNING,"Compression type not yet implemented: LZW");break;case c.Compression.JPEG:u.log(u.LEVEL_WARNING,"Compression type not yet implemented: JPEG");break;case c.Compression.PACK_BITS:if(this.metadata.tileOffsets)var m=this.metadata.tileWidth,y=this.metadata.tileWidth,v=new ArrayBuffer(m*y*n);else{var E=this.metadata.rowsPerStrip,_=this.metadata.imageWidth;v=new ArrayBuffer(E*_*n)}var b=new DataView(v),S=!0,w=(d=[],0),x=0,T=0;for(h=0;h<r;h+=1)if(S){w=1,x=1,S=!1;var L=this.geoTiffData.getInt8(i+h,this.isLittleEndian);L>=0&&L<=127?w=L+1:L>=-127&&L<=-1?x=1-L:S=!0}else{for(var C=o.getBytes(this.geoTiffData,i+h,1,this.isLittleEndian),A=0;A<x;A++)b.setInt8(T,C),T++;0===--w&&(S=!0)}for(h=0,f=n;h<v.byteLength;h+=f){for(p=0,d=[];p<a.length;p++){var M;g=p*(M=a[p]/8),d.push(o.getSampleBytes(b,h+g,M,s[p],this.isLittleEndian))}t?l.push(d[0]):l.push(d)}}return l},p.prototype.parseTiles=function(t){var e=this.metadata.samplesPerPixel,n=this.metadata.bitsPerSample,r=this.metadata.compression;if(this.metadata.sampleFormat)var i=this.metadata.sampleFormat;else i=new Array(e),f.fillArray(i,c.SampleFormat.UNSIGNED);for(var o=e*n[0]/8,a=this.metadata.tileWidth,s=this.metadata.tileLength,u=this.metadata.tileOffsets,l=this.metadata.tileByteCounts,h=this.metadata.imageLength,p=this.metadata.imageWidth,d=Math.ceil(p/a),g=Math.ceil(h/s),m=[],y=0;y<g;y++)for(var v=0;v<d;v++){var E=d*y+v,_=u[E],b=l[E];m[E]=this.parseBlock(t,r,o,b,_,n,i)}return m},p.prototype.geoTiffImageToPCS=function(t,n){if(null===t||void 0===t)throw new e(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","geoTiffImageToPCS","missingXValue"));if(null===n||void 0===n)throw new e(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","geoTiffImageToPCS","missingYValue"));var r=[t,n],i=this.metadata.modelTiepoint,o=this.metadata.modelPixelScale,s=this.metadata.modelTransformation,c=i?i.length:0,h=o?o.length:0,f=s?s.length:0;if(c>6&&0===h);else if(16===f){var p=t,d=n;r=[t=p*s[0]+d*s[1]+s[3],n=p*s[4]+d*s[5]+s[7]]}else h<3||c<6||(t=(t-i[0])*o[0]+i[3],n=(n-i[1])*(-1*o[1])+i[4]),r=[t,n];return l.defs([["EPSG:26771","+proj=tmerc +lat_0=36.66666666666666 +lon_0=-88.33333333333333 +k=0.9999749999999999 +x_0=152400.3048006096 +y_0=0 +ellps=clrk66 +datum=NAD27 +to_meter=0.3048006096012192 +no_defs "],["EPSG:32633","+proj=utm +zone=33 +datum=WGS84 +units=m +no_defs"]]),this.metadata.projectedCSType&&(r=l("EPSG:"+this.metadata.projectedCSType,"EPSG:4326",r)),new a(r[1],r[0])},p.prototype.setBBox=function(){var t=this.geoTiffImageToPCS(0,0),e=this.geoTiffImageToPCS(this.metadata.imageWidth,0),n=this.geoTiffImageToPCS(0,this.metadata.imageLength);this.geoTiffImageToPCS(this.metadata.imageWidth,this.metadata.imageLength),this.metadata.bbox=new s(n.latitude,t.latitude,t.longitude,e.longitude)},p.prototype.getMetadataFromImageFileDirectory=function(){for(var t=0;t<this.imageFileDirectories[0].length;t++)switch(this.imageFileDirectories[0][t].tag){case c.Tag.BITS_PER_SAMPLE:this.metadata.bitsPerSample=this.imageFileDirectories[0][t].getIFDEntryValue();break;case c.Tag.COLOR_MAP:this.metadata.colorMap=this.imageFileDirectories[0][t].getIFDEntryValue();break;case c.Tag.COMPRESSION:this.metadata.compression=this.imageFileDirectories[0][t].getIFDEntryValue()[0];break;case c.Tag.EXTRA_SAMPLES:this.metadata.extraSamples=this.imageFileDirectories[0][t].getIFDEntryValue();break;case c.Tag.IMAGE_DESCRIPTION:this.metadata.imageDescription=this.imageFileDirectories[0][t].getIFDEntryValue()[0];break;case c.Tag.IMAGE_LENGTH:this.metadata.imageLength=this.imageFileDirectories[0][t].getIFDEntryValue()[0];break;case c.Tag.IMAGE_WIDTH:this.metadata.imageWidth=this.imageFileDirectories[0][t].getIFDEntryValue()[0];break;case c.Tag.MAX_SAMPLE_VALUE:this.metadata.maxSampleValue=this.imageFileDirectories[0][t].getIFDEntryValue()[0];break;case c.Tag.MIN_SAMPLE_VALUE:this.metadata.minSampleValue=this.imageFileDirectories[0][t].getIFDEntryValue()[0];break;case c.Tag.ORIENTATION:this.metadata.orientation=this.imageFileDirectories[0][t].getIFDEntryValue()[0];break;case c.Tag.PHOTOMETRIC_INTERPRETATION:this.metadata.photometricInterpretation=this.imageFileDirectories[0][t].getIFDEntryValue()[0];break;case c.Tag.PLANAR_CONFIGURATION:this.metadata.planarConfiguration=this.imageFileDirectories[0][t].getIFDEntryValue()[0];break;case c.Tag.ROWS_PER_STRIP:this.metadata.rowsPerStrip=this.imageFileDirectories[0][t].getIFDEntryValue()[0];break;case c.Tag.RESOLUTION_UNIT:this.metadata.resolutionUnit=this.imageFileDirectories[0][t].getIFDEntryValue()[0];break;case c.Tag.SAMPLES_PER_PIXEL:this.metadata.samplesPerPixel=this.imageFileDirectories[0][t].getIFDEntryValue()[0];break;case c.Tag.SAMPLE_FORMAT:this.metadata.sampleFormat=this.imageFileDirectories[0][t].getIFDEntryValue();break;case c.Tag.SOFTWARE:this.metadata.software=this.imageFileDirectories[0][t].getIFDEntryValue();break;case c.Tag.STRIP_BYTE_COUNTS:this.metadata.stripByteCounts=this.imageFileDirectories[0][t].getIFDEntryValue();break;case c.Tag.STRIP_OFFSETS:this.metadata.stripOffsets=this.imageFileDirectories[0][t].getIFDEntryValue();break;case c.Tag.TILE_BYTE_COUNTS:this.metadata.tileByteCounts=this.imageFileDirectories[0][t].getIFDEntryValue();break;case c.Tag.TILE_OFFSETS:this.metadata.tileOffsets=this.imageFileDirectories[0][t].getIFDEntryValue();break;case c.Tag.TILE_LENGTH:this.metadata.tileLength=this.imageFileDirectories[0][t].getIFDEntryValue();break;case c.Tag.TILE_WIDTH:this.metadata.tileWidth=this.imageFileDirectories[0][t].getIFDEntryValue();break;case c.Tag.X_RESOLUTION:this.metadata.xResolution=this.imageFileDirectories[0][t].getIFDEntryValue();break;case c.Tag.Y_RESOLUTION:this.metadata.tileWidth=this.imageFileDirectories[0][t].getIFDEntryValue();break;case n.Tag.GEO_ASCII_PARAMS:this.metadata.geoAsciiParams=this.imageFileDirectories[0][t].getIFDEntryValue();break;case n.Tag.GEO_DOUBLE_PARAMS:this.metadata.geoDubleParams=this.imageFileDirectories[0][t].getIFDEntryValue();break;case n.Tag.GEO_KEY_DIRECTORY:this.metadata.geoKeyDirectory=this.imageFileDirectories[0][t].getIFDEntryValue();break;case n.Tag.MODEL_PIXEL_SCALE:this.metadata.modelPixelScale=this.imageFileDirectories[0][t].getIFDEntryValue();break;case n.Tag.MODEL_TIEPOINT:this.metadata.modelTiepoint=this.imageFileDirectories[0][t].getIFDEntryValue();break;case n.Tag.GDAL_METADATA:this.metadata.metaData=this.imageFileDirectories[0][t].getIFDEntryValue();break;case n.Tag.GDAL_NODATA:this.metadata.noData=this.imageFileDirectories[0][t].getIFDEntryValue();break;default:u.log(u.LEVEL_WARNING,"Ignored GeoTiff tag: "+this.imageFileDirectories[0][t].tag)}},p.prototype.parseGeoKeys=function(){if(!this.isGeoTiff())throw new t(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","parse","invalidGeoTiffFile"));var e=this.metadata.geoKeyDirectory;if(!e)throw new t(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","parseGeoKeys","missingGeoKeyDirectoryTag"));for(var i=(e[0],e[1],e[2],e[3]),o=0;o<i;o++){var a=e[4+4*o],s=e[5+4*o],l=e[6+4*o],c=e[7+4*o];switch(a){case n.Key.GTModelTypeGeoKey:this.metadata.gtModelTypeGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GTRasterTypeGeoKey:this.metadata.gtRasterTypeGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GTCitationGeoKey:this.metadata.gtCitationGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GeographicTypeGeoKey:this.metadata.geographicTypeGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GeogCitationGeoKey:this.metadata.geogCitationGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GeogAngularUnitsGeoKey:this.metadata.geogAngularUnitsGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GeogAngularUnitSizeGeoKey:this.metadata.geogAngularUnitSizeGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GeogSemiMajorAxisGeoKey:this.metadata.geogSemiMajorAxisGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.GeogInvFlatteningGeoKey:this.metadata.geogInvFlatteningGeoKey=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.ProjectedCSTypeGeoKey:this.metadata.projectedCSType=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;case n.Key.ProjLinearUnitsGeoKey:this.metadata.projLinearUnits=new r(a,s,l,c).getGeoKeyValue(this.metadata.geoDoubleParams,this.metadata.geoAsciiParams);break;default:u.log(u.LEVEL_WARNING,"Ignored GeoTiff key: "+a)}}},p.prototype.parseImageFileDirectory=function(t){if(!t)throw new e(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","parseImageFileDirectory","missingOffset"));for(var n=o.getBytes(this.geoTiffData,t,2,this.isLittleEndian),r=[],i=t+2,a=0;a<n;i+=12,a++){var s=o.getBytes(this.geoTiffData,i,2,this.isLittleEndian),l=o.getBytes(this.geoTiffData,i+2,2,this.isLittleEndian),c=o.getBytes(this.geoTiffData,i+4,4,this.isLittleEndian),f=o.getBytes(this.geoTiffData,i+8,4,this.isLittleEndian);r.push(new h(s,l,c,f,this.geoTiffData,this.isLittleEndian))}this._imageFileDirectories.push(r);var p=o.getBytes(this.geoTiffData,i,4,this.isLittleEndian);0!==p&&this.parseImageFileDirectory(p)},p.prototype.getIFDByTag=function(t){if(!t)throw new e(u.logMessage(u.LEVEL_SEVERE,"GeoTiffReader","getIFDByTag","missingTag"));for(var n=0;n<this.imageFileDirectories[0].length;n++)if(this.imageFileDirectories[0][n].tag===t)return this.imageFileDirectories[0][n];return null},p})),i("util/Level",["../geom/Angle","../error/ArgumentError","../geom/Location","../util/Logger"],(function(t,e,n,r){"use strict";var i=function(n,i,o){if(!i)throw new e(r.logMessage(r.LEVEL_SEVERE,"Level","constructor","The specified tile delta is null or undefined"));if(!o)throw new e(r.logMessage(r.LEVEL_SEVERE,"Level","constructor","The specified parent level set is null or undefined"));this.levelNumber=n,this.tileDelta=i,this.parent=o,this.texelSize=i.latitude*t.DEGREES_TO_RADIANS/o.tileHeight,this.tileWidth=o.tileWidth,this.tileHeight=o.tileHeight,this.sector=o.sector};return i.prototype.isFirstLevel=function(){return this.parent.firstLevel()==this},i.prototype.isLastLevel=function(){return this.parent.lastLevel()==this},i.prototype.previousLevel=function(){return this.parent.level(this.levelNumber-1)},i.prototype.nextLevel=function(){return this.parent.level(this.levelNumber+1)},i.prototype.compare=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"Level","compare","The specified level is null or undefined"));return this.levelNumber<t.levelNumber?-1:this.levelNumber>t.levelNumber?1:0},i})),i("util/LevelSet",["../error/ArgumentError","../util/Level","../geom/Location","../util/Logger"],(function(t,e,n,r){"use strict";var i=function(i,o,a,s,u){if(!i)throw new t(r.logMessage(r.LEVEL_SEVERE,"LevelSet","constructor","missingSector"));if(!o)throw new t(r.logMessage(r.LEVEL_SEVERE,"LevelSet","constructor","The specified level zero delta is null or undefined"));if(o.latitude<=0||o.longitude<=0)throw new t(r.logMessage(r.LEVEL_SEVERE,"LevelSet","constructor","The specified level zero delta is less than or equal to zero."));if(a<1)throw new t(r.logMessage(r.LEVEL_SEVERE,"LevelSet","constructor","The specified number of levels is less than one."));if(s<1||u<1)throw new t(r.logMessage(r.LEVEL_SEVERE,"LevelSet","constructor","The specified tile width or tile height is less than one."));this.sector=i,this.levelZeroDelta=o,this.numLevels=a,this.tileWidth=s,this.tileHeight=u,this.levels=[];for(var l=0;l<a;l+=1){var c=Math.pow(2,l),h=o.latitude/c,f=o.longitude/c,p=new n(h,f),d=new e(l,p,this);this.levels[l]=d}};return i.numLevelsForResolution=function(e,n){if(!e||!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"LevelSet","numLevelsForResolution","missingResolution"));var i=Math.log(e/n)/Math.log(2);return i<0&&(i=0),i+1},i.prototype.level=function(t){return t<0||t>=this.levels.length?null:this.levels[t]},i.prototype.levelForTexelSize=function(t){var e=this.lastLevel();if(e.texelSize>=t)return e;for(var n=0,r=this.levels.length;n<r;n+=1){var i=this.levels[n];if(i.texelSize<=t)return i}return e},i.prototype.firstLevel=function(){return this.levels[0]},i.prototype.lastLevel=function(){return this.levels[this.levels.length-1]},i})),i("cache/MemoryCache",["../error/ArgumentError","../util/Logger"],(function(t,e){"use strict";var n=function(n,r){if(!n||n<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","constructor","The specified capacity is undefined, zero or negative"));if(!r||r>=n||r<0)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","constructor","The specified low-water value is undefined, greater than or equal to the capacity, or less than 1"));this._capacity=n,this._lowWater=r,this.usedCapacity=0,this.freeCapacity=n,this.entries={},this.listeners=[]};return Object.defineProperties(n.prototype,{capacity:{get:function(){return this._capacity},set:function(n){if(!n||n<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","capacity","Specified cache capacity is undefined, 0 or negative."));var r=this._capacity;this._capacity=n,this._capacity<=this.lowWater&&(this._lowWater=.85*this._capacity),this._capacity<r&&this.makeSpace(0)}},lowWater:{get:function(){return this._lowWater},set:function(n){if(!n||n>=this._capacity||n<0)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","lowWater","Specified cache low-water value is undefined, negative or not less than the current capacity."));this._lowWater=n}}}),n.prototype.entryForKey=function(t){if(!t)return null;var e=this.entries[t];return e?(e.lastUsed=Date.now(),e.entry):null},n.prototype.putEntry=function(n,r,i){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","putEntry","missingKey."));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","putEntry","missingEntry."));if(i<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","putEntry","The specified entry size is less than 1."));var o;this.entries[n]&&this.removeEntry(n),this.usedCapacity+i>this._capacity&&this.makeSpace(i),this.usedCapacity+=i,this.freeCapacity=this._capacity-this.usedCapacity,o={key:n,entry:r,size:i,lastUsed:Date.now(),agingFactor:1},this.entries[n]=o},n.prototype.clear=function(t){if(t)for(var e in this.entries)this.entries.hasOwnProperty(e)&&this.removeCacheEntry(e);this.entries={},this.freeCapacity=this._capacity,this.usedCapacity=0},n.prototype.removeEntry=function(t){if(t){var e=this.entries[t];e&&this.removeCacheEntry(e)}},n.prototype.setEntryAgingFactor=function(t,e){if(t){var n=this.entries[t];n&&(n.agingFactor=e)}},n.prototype.removeCacheEntry=function(t){delete this.entries[t.key],this.usedCapacity-=t.size,this.freeCapacity=this._capacity-this.usedCapacity;for(var e=0,n=this.listeners.length;e<n;e++)try{this.listeners[e].entryRemoved(t.key,t.entry)}catch(n){this.listeners[e].removalError(n,t.key,t.entry)}},n.prototype.containsKey=function(t){return t&&this.entries[t]},n.prototype.addCacheListener=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","addCacheListener","missingListener"));if("function"!=typeof n.entryRemoved||"function"!=typeof n.removalError)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","addCacheListener","The specified listener does not implement the required functions."));this.listeners.push(n)},n.prototype.removeCacheListener=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"MemoryCache","removeCacheListener","missingListener"));var r=this.listeners.indexOf(n);r>-1&&this.listeners.splice(r,1)},n.prototype.makeSpace=function(t){var e=[],n=Date.now();for(var r in this.entries)this.entries.hasOwnProperty(r)&&e.push(this.entries[r]);e.sort((function(t,e){var r=(n-t.lastUsed)*t.agingFactor;return(n-e.lastUsed)*e.agingFactor-r}));for(var i=0,o=e.length;i<o&&(this.usedCapacity>this._lowWater||this.freeCapacity<t);i++)this.removeCacheEntry(e[i])},n})),i("shaders/BasicProgram",["../error/ArgumentError","../util/Color","../shaders/GpuProgram","../util/Logger"],(function(t,e,n,r){"use strict";var i=function(t){n.call(this,t,"attribute vec4 vertexPoint;\nuniform mat4 mvpMatrix;\nvoid main() {gl_Position = mvpMatrix * vertexPoint;}","precision mediump float;\nuniform vec4 color;\nvoid main() {gl_FragColor = color;}"),this.vertexPointLocation=this.attributeLocation(t,"vertexPoint"),this.mvpMatrixLocation=this.uniformLocation(t,"mvpMatrix"),this.colorLocation=this.uniformLocation(t,"color")};return i.key="WorldWindGpuBasicProgram",(i.prototype=Object.create(n.prototype)).loadModelviewProjection=function(e,n){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"BasicProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(e,n,this.mvpMatrixLocation)},i.prototype.loadColor=function(e,n){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"BasicProgram","loadColor","missingColor"));this.loadUniformColor(e,n,this.colorLocation)},i.prototype.loadColorComponents=function(t,e,n,r,i){this.loadUniformColorComponents(t,e,n,r,i,this.colorLocation)},i})),i("geom/Frustum",["../error/ArgumentError","../geom/Matrix","../geom/Plane","../util/Logger"],(function(t,e,n,r){"use strict";var i=function(e,n,i,o,a,s){if(!(e&&n&&i&&o&&a&&s))throw new t(r.logMessage(r.LEVEL_SEVERE,"Frustum","constructor","missingPlane"));this._left=e,this._right=n,this._bottom=i,this._top=o,this._near=a,this._far=s,this._planes=[this._left,this._right,this._top,this._bottom,this._near,this._far]};return Object.defineProperties(i.prototype,{left:{get:function(){return this._left}},right:{get:function(){return this._right}},bottom:{get:function(){return this._bottom}},top:{get:function(){return this._top}},near:{get:function(){return this._near}},far:{get:function(){return this._far}}}),i.prototype.transformByMatrix=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"Frustum","transformByMatrix","missingMatrix"));return this._left.transformByMatrix(e),this._right.transformByMatrix(e),this._bottom.transformByMatrix(e),this._top.transformByMatrix(e),this._near.transformByMatrix(e),this._far.transformByMatrix(e),this},i.prototype.normalize=function(){return this._left.normalize(),this._right.normalize(),this._bottom.normalize(),this._top.normalize(),this._near.normalize(),this._far.normalize(),this},i.unitFrustum=function(){return new i(new n(1,0,0,1),new n(-1,0,0,1),new n(0,1,1,1),new n(0,-1,0,1),new n(0,0,-1,1),new n(0,0,1,1))},i.fromProjectionMatrix=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"Frustum","fromProjectionMatrix","missingMatrix"));var o,a,s,u,l,c,h,f,p,d,g;return o=e[12]+e[0],a=e[13]+e[1],s=e[14]+e[2],u=e[15]+e[3],l=Math.sqrt(o*o+a*a+s*s),c=new n(o/l,a/l,s/l,u/l),o=e[12]-e[0],a=e[13]-e[1],s=e[14]-e[2],u=e[15]-e[3],l=Math.sqrt(o*o+a*a+s*s),h=new n(o/l,a/l,s/l,u/l),o=e[12]+e[4],a=e[13]+e[5],s=e[14]+e[6],u=e[15]+e[7],l=Math.sqrt(o*o+a*a+s*s),p=new n(o/l,a/l,s/l,u/l),o=e[12]-e[4],a=e[13]-e[5],s=e[14]-e[6],u=e[15]-e[7],l=Math.sqrt(o*o+a*a+s*s),f=new n(o/l,a/l,s/l,u/l),o=e[12]+e[8],a=e[13]+e[9],s=e[14]+e[10],u=e[15]+e[11],l=Math.sqrt(o*o+a*a+s*s),d=new n(o/l,a/l,s/l,u/l),o=e[12]-e[8],a=e[13]-e[9],s=e[14]-e[10],u=e[15]-e[11],l=Math.sqrt(o*o+a*a+s*s),g=new n(o/l,a/l,s/l,u/l),new i(c,h,p,f,d,g)},i.prototype.containsPoint=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"Frustum","containsPoint","missingPoint"));return!(this._far.dot(e)<=0)&&!(this._left.dot(e)<=0)&&!(this._right.dot(e)<=0)&&!(this._top.dot(e)<=0)&&!(this._bottom.dot(e)<=0)&&!(this._near.dot(e)<=0)},i.prototype.intersectsSegment=function(e,n){if(!e||!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"Frustum","containsPoint","missingPoint"));if(this.containsPoint(e)||this.containsPoint(n))return!0;if(e.equals(n))return!1;for(var i=0,o=this._planes.length;i<o;i++){if(this._planes[i].onSameSide(e,n)<0)return!1;if(null!=this._planes[i].clip(e,n))return!0}return!1},i})),i("error/NotYetImplementedError",["../error/AbstractError"],(function(t){"use strict";var e=function(e){var n;t.call(this,"NotYetImplementedError",e);try{throw new Error}catch(t){n=t.stack}this.stack=n};return e.prototype=Object.create(t.prototype),e})),i("geom/BoundingBox",["../error/ArgumentError","../shaders/BasicProgram","../geom/Frustum","../util/Logger","../geom/Matrix","../error/NotYetImplementedError","../geom/Plane","../geom/Sector","../geom/Vec3","../util/WWMath","../util/WWUtil"],(function(t,e,n,r,i,o,a,s,u,l,c){"use strict";var h=function(){this.center=new u(0,0,0),this.bottomCenter=new u(-.5,0,0),this.topCenter=new u(.5,0,0),this.r=new u(1,0,0),this.s=new u(0,1,0),this.t=new u(0,0,1),this.radius=Math.sqrt(3),this.tmp1=new u(0,0,0),this.tmp2=new u(0,0,0),this.tmp3=new u(0,0,0),this.scratchElevations=new Float64Array(9),this.scratchPoints=new Float64Array(3*this.scratchElevations.length)};return h.scratchMatrix=i.fromIdentity(),h.prototype.getCorners=function(){var t=new u(this.s[0],this.s[1],this.s[2]),e=new u(this.t[0],this.t[1],this.t[2]),n=new u(this.s[0],this.s[1],this.s[2]),r=new u(this.s[0],this.s[1],this.s[2]);t.add(this.t).multiply(-.5),e.subtract(this.s).multiply(.5),n.add(this.t).multiply(.5),r.subtract(this.t).multiply(.5);for(var i=[],o=0;o<4;o++)i.push(new u(this.bottomCenter[0],this.bottomCenter[1],this.bottomCenter[2]));for(o=0;o<4;o++)i.push(new u(this.topCenter[0],this.topCenter[1],this.topCenter[2]));return i[0].add(t),i[1].add(e),i[2].add(n),i[3].add(r),i[4].add(t),i[5].add(e),i[6].add(n),i[7].add(r),i},h.prototype.setToPoints=function(e){if(!e||e.length<3)throw new t(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","setToPoints","missingArray"));var n,o,a,s,l,c,h,f,p,d,g,m,y,v,E,_=+Number.MAX_VALUE,b=-Number.MAX_VALUE,S=+Number.MAX_VALUE,w=-Number.MAX_VALUE,x=+Number.MAX_VALUE,T=-Number.MAX_VALUE,L=this.r,C=this.s,A=this.t,M=new u(0,0,0);i.principalAxesFromPoints(e,L,C,A);for(var R=0,O=e.length/3;R<O;R++)M[0]=e[3*R],M[1]=e[3*R+1],M[2]=e[3*R+2],_>(n=M.dot(L))&&(_=n),b<n&&(b=n),S>(o=M.dot(C))&&(S=o),w<o&&(w=o),x>(a=M.dot(A))&&(x=a),T<a&&(T=a);return b===_&&(b=_+1),w===S&&(w=S+1),T===x&&(T=x+1),s=b-_,l=w-S,c=T-x,h=b+_,f=w+S,p=T+x,d=.5*L[0]*s,g=.5*L[1]*s,m=.5*L[2]*s,y=.5*(L[0]*h+C[0]*f+A[0]*p),v=.5*(L[1]*h+C[1]*f+A[1]*p),E=.5*(L[2]*h+C[2]*f+A[2]*p),this.center[0]=y,this.center[1]=v,this.center[2]=E,this.topCenter[0]=y+d,this.topCenter[1]=v+g,this.topCenter[2]=E+m,this.bottomCenter[0]=y-d,this.bottomCenter[1]=v-g,this.bottomCenter[2]=E-m,L.multiply(s),C.multiply(l),A.multiply(c),this.radius=.5*Math.sqrt(s*s+l*l+c*c),this},h.prototype.setToVec3Points=function(e){if(!e||0===e.length)throw new t(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","setToVec3Points","missingArray"));for(var n=new Float32Array(3*e.length),i=0;i<e.length;i++)for(var o=e[i],a=0;a<3;a++)n[3*i+a]=o[a];return this.setToPoints(n)},h.prototype.setToSector=function(e,n,i,o){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","setToSector","missingSector"));if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","setToSector","missingGlobe"));var a=this.scratchElevations,s=this.scratchPoints;c.fillArray(a,o),a[0]=a[2]=a[6]=a[8]=i,n.computePointsForGrid(e,3,3,a,u.ZERO,s),this.tmp1.set(s[12],s[13],s[14]),l.localCoordinateAxesAtPoint(this.tmp1,n,this.r,this.s,this.t);for(var h=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],f=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],p=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],d=0,g=s.length;d<g;d+=3)this.tmp1.set(s[d],s[d+1],s[d+2]),this.adjustExtremes(this.r,h,this.s,f,this.t,p,this.tmp1);e.deltaLongitude()>180&&(n.computePointFromPosition(e.centroidLatitude(),e.centroidLongitude()+90,o,this.tmp1),n.computePointFromPosition(e.centroidLatitude(),e.centroidLongitude()-90,o,this.tmp2),this.adjustExtremes(this.r,h,this.s,f,this.t,p,this.tmp1),this.adjustExtremes(this.r,h,this.s,f,this.t,p,this.tmp2)),h[1]-h[0]<f[1]-f[0]&&this.swapAxes(this.r,h,this.s,f),f[1]-f[0]<p[1]-p[0]&&this.swapAxes(this.s,f,this.t,p),h[1]-h[0]<f[1]-f[0]&&this.swapAxes(this.r,h,this.s,f);var m=h[1]-h[0],y=f[1]-f[0],v=p[1]-p[0],E=h[1]+h[0],_=f[1]+f[0],b=p[1]+p[0],S=.5*(this.r[0]*E+this.s[0]*_+this.t[0]*b),w=.5*(this.r[1]*E+this.s[1]*_+this.t[1]*b),x=.5*(this.r[2]*E+this.s[2]*_+this.t[2]*b),T=.5*this.r[0]*m,L=.5*this.r[1]*m,C=.5*this.r[2]*m;return this.center.set(S,w,x),this.topCenter.set(S+T,w+L,x+C),this.bottomCenter.set(S-T,w-L,x-C),this.r.multiply(m),this.s.multiply(y),this.t.multiply(v),this.radius=.5*Math.sqrt(m*m+y*y+v*v),this},h.prototype.translate=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","translate","missingVector"));return this.bottomCenter.add(e),this.topCenter.add(e),this.center.add(e),this},h.prototype.distanceTo=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","distanceTo","missingPoint"));var n=this.center.distanceTo(e)-this.radius;return n>=0?n:-n},h.prototype.effectiveRadius=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","effectiveRadius","missingPlane"));var n=e.normal;return.5*(l.fabs(this.r.dot(n))+l.fabs(this.s.dot(n))+l.fabs(this.t.dot(n)))},h.prototype.intersectsFrustum=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"BoundingBox","intersectsFrustum","missingFrustum"));return this.tmp1.copy(this.bottomCenter),this.tmp2.copy(this.topCenter),!(this.intersectionPoint(e.near)<0)&&!(this.intersectionPoint(e.far)<0)&&!(this.intersectionPoint(e.left)<0)&&!(this.intersectionPoint(e.right)<0)&&!(this.intersectionPoint(e.top)<0)&&!(this.intersectionPoint(e.bottom)<0)},h.prototype.intersectionPoint=function(t){var e=t.normal,n=.5*(Math.abs(this.s.dot(e))+Math.abs(this.t.dot(e)));return this.intersectsAt(t,n,this.tmp1,this.tmp2)},h.prototype.intersectsAt=function(t,e,n,r){var i=t.dot(n),o=i<=-e,a=t.dot(r)<=-e;if(o&&a)return-1;if(o==a)return 0;this.tmp3.copy(n),this.tmp3.subtract(r);var s=(e+i)/t.normal.dot(this.tmp3);return this.tmp3.copy(r),this.tmp3.subtract(n),this.tmp3.multiply(s),this.tmp3.add(n),o?n.copy(this.tmp3):r.copy(this.tmp3),s},h.prototype.adjustExtremes=function(t,e,n,r,i,o,a){var s=a.dot(t);e[0]>s&&(e[0]=s),e[1]<s&&(e[1]=s);var u=a.dot(n);r[0]>u&&(r[0]=u),r[1]<u&&(r[1]=u);var l=a.dot(i);o[0]>l&&(o[0]=l),o[1]<l&&(o[1]=l)},h.prototype.swapAxes=function(t,e,n,r){t.swap(n);var i=e[0];e[0]=r[0],r[0]=i,i=e[1],e[1]=r[1],r[1]=i},h.prototype.render=function(t){var n=t.currentGlContext,r=h.scratchMatrix,i=t.findAndBindProgram(e);try{r.copy(t.modelviewProjection),r.multiply(this.r[0],this.s[0],this.t[0],this.center[0],this.r[1],this.s[1],this.t[1],this.center[1],this.r[2],this.s[2],this.t[2],this.center[2],0,0,0,1),r.multiplyByTranslation(-.5,-.5,-.5),i.loadModelviewProjection(n,r),n.disable(n.CULL_FACE),n.bindBuffer(n.ARRAY_BUFFER,t.unitCubeBuffer()),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.unitCubeElements()),n.enableVertexAttribArray(i.vertexPointLocation),n.vertexAttribPointer(i.vertexPointLocation,3,n.FLOAT,!1,0,0),i.loadColorComponents(n,0,1,0,.6),n.drawElements(n.LINES,24,n.UNSIGNED_SHORT,72),i.loadColorComponents(n,1,1,1,.3),n.drawElements(n.TRIANGLES,36,n.UNSIGNED_SHORT,0)}finally{n.enable(n.CULL_FACE),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}},h})),i("util/Tile",["../error/ArgumentError","../geom/BoundingBox","../util/Logger","../geom/Sector","../geom/Vec3","../util/WWUtil"],(function(t,e,n,r,i,o){"use strict";var a=function e(r,i,o,a){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Tile","constructor","missingSector"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Tile","constructor","The specified level is null or undefined."));if(o<0||a<0)throw new t(n.logMessage(n.LEVEL_SEVERE,"Tile","constructor","The specified row or column is less than zero."));this.sector=r,this.level=i,this.row=o,this.column=a,this.tileWidth=i.tileWidth,this.tileHeight=i.tileHeight,this.texelSize=i.texelSize,this.tileKey=e.computeTileKey(i.levelNumber,o,a),this.extent=null,this.referencePoint=null,this.opacity=1,this.samplePoints=null,this.sampleElevations=null,this.updateTimestamp=null,this.updateVerticalExaggeration=null,this.updateGlobeStateKey=null};return a.prototype.isEqual=function(t){return!!t&&!!t.tileKey&&this.tileKey==t.tileKey},a.prototype.size=function(){return 828},a.prototype.distanceTo=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Tile","distanceTo","missingVector"));for(var r,i,o,a=e[0],s=e[1],u=e[2],l=this.samplePoints,c=Number.POSITIVE_INFINITY,h=0,f=l.length;h<f;h+=3)r=a-l[h],i=s-l[h+1],o=u-l[h+2],c=Math.min(c,r*r+i*i+o*o);return Math.sqrt(c)},a.prototype.subdivide=function(e,i){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Tile","subdivide","The specified level is null or undefined."));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Tile","subdivide","The specified tile factory is null or undefined."));var o,a,s,u=this.sector.minLatitude,l=this.sector.maxLatitude,c=this.sector.centroidLatitude(),h=this.sector.minLongitude,f=this.sector.maxLongitude,p=this.sector.centroidLongitude(),d=[];return o=2*this.row,a=2*this.column,s=new r(u,c,h,p),d.push(i.createTile(s,e,o,a)),o=2*this.row,a=2*this.column+1,s=new r(u,c,p,f),d.push(i.createTile(s,e,o,a)),o=2*this.row+1,a=2*this.column,s=new r(c,l,h,p),d.push(i.createTile(s,e,o,a)),o=2*this.row+1,a=2*this.column+1,s=new r(c,l,p,f),d.push(i.createTile(s,e,o,a)),d},a.prototype.subdivideToCache=function(e,r,i){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Tile","subdivideToCache","The specified level is null or undefined."));if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"Tile","subdivideToCache","The specified tile factory is null or undefined."));var o=i?i.entryForKey(this.tileKey):null;return o||(o=this.subdivide(e,r))&&i&&i.putEntry(this.tileKey,o,4*o[0].size()),o},a.prototype.mustSubdivide=function(t,e){var n=t.globe.equatorialRadius*this.texelSize,r=this.distanceTo(t.eyePoint);return n>e*t.pixelSizeAtDistance(r)},a.prototype.update=function(t){var e=t.globe.elevationTimestamp(),n=t.verticalExaggeration,r=t.globeStateKey;this.updateTimestamp==e&&this.updateVerticalExaggeration==n&&this.updateGlobeStateKey==r||(this.doUpdate(t),t.frameStatistics.incrementTileUpdateCount(1),this.updateTimestamp=e,this.updateVerticalExaggeration=n,this.updateGlobeStateKey=r)},a.prototype.doUpdate=function(t){var n=t.globe,r=t.verticalExaggeration,a=n.minAndMaxElevationsForSector(this.sector),s=a[0]*r,u=a[1]*r;s===u&&(s=u+10),this.extent||(this.extent=new e),this.extent.setToSector(this.sector,n,s,u),this.samplePoints||(this.sampleElevations=new Float64Array(9),this.samplePoints=new Float64Array(3*this.sampleElevations.length)),o.fillArray(this.sampleElevations,.5*(s+u)),n.computePointsForGrid(this.sector,3,3,this.sampleElevations,i.ZERO,this.samplePoints),this.referencePoint||(this.referencePoint=new i(0,0,0)),n.computePointFromPosition(this.sector.centroidLatitude(),this.sector.centroidLongitude(),0,this.referencePoint)},a.computeTileKey=function(t,e,n){return t+"."+e+"."+n},a.computeRow=function(t,e){var n=Math.floor((e+90)/t);return 90==e&&(n-=1),n},a.computeColumn=function(t,e){var n=Math.floor((e+180)/t);return 180==e&&(n-=1),n},a.computeLastRow=function(t,e){var n=Math.ceil((e+90)/t-1);return e+90<t&&(n=0),n},a.computeLastColumn=function(t,e){var n=Math.ceil((e+180)/t-1);return e+180<t&&(n=0),n},a.computeSector=function(e,i,o){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Tile","computeSector","missingLevel"));if(i<0||o<0)throw new t(n.logMessage(n.LEVEL_SEVERE,"Tile","computeSector","The specified row or column is less than zero."));var a=e.tileDelta.latitude,s=e.tileDelta.longitude,u=i*a-90,l=o*s-180;return new r(u,u+a,l,l+s)},a.createTilesForLevel=function(e,i,o){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"Tile","createTilesForLevel","missingLevel"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"Tile","createTilesForLevel","The specified tile factory is null or undefined"));if(!o)throw new t(n.logMessage(n.LEVEL_SEVERE,"Tile","createTilesForLevel","missingResult"));for(var s,u,l,c=e.tileDelta.latitude,h=e.tileDelta.longitude,f=e.sector,p=a.computeRow(c,f.minLatitude),d=a.computeRow(c,f.maxLatitude),g=a.computeColumn(h,f.minLongitude),m=a.computeColumn(h,f.maxLongitude),y=g*h-180,v=p*c-90,E=p;E<=d;E+=1){u=v+c,s=y;for(var _=g;_<=m;_+=1){var b=new r(v,u,s,l=s+h),S=i.createTile(b,e,E,_);o.push(S),s=l}v=u}},a})),i("globe/TiledElevationCoverage",["../formats/aaigrid/AAIGridReader","../util/AbsentResourceList","../geom/Angle","../error/ArgumentError","../globe/ElevationCoverage","../globe/ElevationImage","../formats/geotiff/GeoTiffReader","../util/LevelSet","../geom/Location","../util/Logger","../cache/MemoryCache","../geom/Sector","../util/Tile","../util/WWMath","../util/WWUtil"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d){"use strict";var g=function(t){if(!t)throw new r(l.logMessage(l.LEVEL_SEVERE,"TiledElevationCoverage","constructor","missingConfig"));if(!t.coverageSector)throw new r(l.logMessage(l.LEVEL_SEVERE,"TiledElevationCoverage","constructor","missingSector"));if(!t.resolution)throw new r(l.logMessage(l.LEVEL_SEVERE,"TiledElevationCoverage","constructor","missingResolution"));if(!t.retrievalImageFormat)throw new r(l.logMessage(l.LEVEL_SEVERE,"TiledElevationCoverage","constructor","missingImageFormat"));i.call(this,t.resolution);var n=s.numLevelsForResolution(45/256,t.resolution),o=Math.ceil(n);this.coverageSector=t.coverageSector,this.retrievalImageFormat=t.retrievalImageFormat,this.minElevation=t.minElevation||0,this.maxElevation=t.maxElevation||0,this.pixelIsPoint=!1,this.levels=new s(this.coverageSector,new u(45,45),o,256,256),this.currentTiles=[],this.currentSector=new h(0,0,0,0),this.tileCache=new c(1e6,8e5),this.imageCache=new c(1e7,8e6),this.retrievalQueueSize=WorldWind.configuration.coverageRetrievalQueueSize,this.currentRetrievals=[],this.absentResourceList=new e(3,5e3),this.urlBuilder=t.urlBuilder||null};return(g.prototype=Object.create(i.prototype)).minAndMaxElevationsForSector=function(t,e){if(!t)throw new r(l.logMessage(l.LEVEL_SEVERE,"TiledElevationCoverage","minAndMaxElevationsForSector","missingSector"));if(!e)throw new r(l.logMessage(l.LEVEL_SEVERE,"TiledElevationCoverage","minAndMaxElevationsForSector","missingResult"));var i=this.levels.levelForTexelSize(t.deltaLatitude()*n.DEGREES_TO_RADIANS/64);if(this.assembleTiles(i,t,!1),0===this.currentTiles.length)return!1;for(var o=!0,a=0,s=this.currentTiles.length;a<s;a++){var u=this.imageCache.entryForKey(this.currentTiles[a].tileKey);if(u&&u.hasData){var c=u.minElevation;e[0]>c&&(e[0]=c);var h=u.maxElevation;e[1]<h&&(e[1]=h)}u&&u.hasData&&!u.hasMissingData||(o=!1)}return o},g.prototype.elevationAtLocation=function(t,e){return this.coverageSector.containsLocation(t,e)?this.pointElevationForLocation(t,e):null},g.prototype.elevationsForGrid=function(t,e,i,o){if(!t)throw new r(l.logMessage(l.LEVEL_SEVERE,"TiledElevationCoverage","elevationsForGrid","missingSector"));if(!e||!i||e<1||i<1)throw new r(l.logMessage(l.LEVEL_SEVERE,"TiledElevationCoverage","elevationsForGrid","The specified number of latitudinal or longitudinal positions is less than one."));var a=t.deltaLatitude()/(e-1)*n.DEGREES_TO_RADIANS,s=this.levels.levelForTexelSize(a);return this.pixelIsPoint?this.pointElevationsForGrid(t,e,i,s,o):this.areaElevationsForGrid(t,e,i,s,o)},g.prototype.pointElevationForLocation=function(t,e){for(var n,r=this.levels.lastLevel(),i=r.tileDelta.latitude,o=r.tileDelta.longitude,a=f.computeRow(i,t),s=f.computeColumn(o,e),u=null,l=r.levelNumber;l>=0;l--){if(n=f.computeTileKey(l,a,s),u=this.imageCache.entryForKey(n)){var c=u.elevationAtLocation(t,e);return isNaN(c)?null:c}a=Math.floor(a/2),s=Math.floor(s/2)}return null},g.prototype.pointElevationsForGrid=function(t,e,n,r,i){if(this.assembleTiles(r,t,!0),0===this.currentTiles.length)return!1;this.currentTiles.sort((function(t,e){return t.level.levelNumber-e.level.levelNumber}));for(var o=0,a=this.currentTiles.length;o<a;o++){var s=this.imageCache.entryForKey(this.currentTiles[o].tileKey);s&&s.elevationsForGrid(t,e,n,i)}return!d.arrayIncludes(i,NaN)},g.prototype.areaElevationsForGrid=function(t,e,n,r,i){var o,a,s,u,l,c,h=t.minLatitude,f=t.maxLatitude,p=t.minLongitude,g=t.maxLongitude,m=t.deltaLatitude()/(e>1?e-1:1),y=t.deltaLongitude()/(n>1?n-1:1),v=0;for(l=0,o=h;l<e;l+=1,o+=m)for(l===e-1&&(o=f),c=0,a=p;c<n;c+=1,a+=y)c===n-1&&(a=g),isNaN(i[v])&&this.coverageSector.containsLocation(o,a)&&(s=(a+180)/360,u=(o+90)/180,this.areaElevationForCoord(s,u,r.levelNumber,i,v)),v++;return!d.arrayIncludes(i,NaN)},g.prototype.areaElevationForCoord=function(t,e,n,r,i){for(var a,s,u,l,c,h,f,d,g,m,y,v,E,_,b,S=new Float64Array(4),w=n;w>=0;w--)if(a=this.levels.level(w),s=Math.round(360*a.tileWidth/a.tileDelta.longitude),c=1-(l=1/(2*(u=Math.round(180*a.tileHeight/a.tileDelta.latitude)))),h=u-1,f=s*p.fract(t),d=u*p.clamp(e,l,c),g=p.mod(Math.floor(f-.5),s),m=p.mod(g+1,s),y=p.clamp(Math.floor(d-.5),0,h),v=p.clamp(y+1,0,h),E=p.fract(f-.5),_=p.fract(d-.5),b=w==n||0==w,this.lookupPixels(g,m,y,v,a,b,S))return!o.isNoData(S[0],S[1],S[2],S[3])&&(r[i]=(1-E)*(1-_)*S[0]+E*(1-_)*S[1]+(1-E)*_*S[2]+E*_*S[3],!0);return!1},g.prototype.lookupPixels=function(t,e,n,r,i,o,a){var s,u,l,c,h=i.levelNumber,f=i.tileWidth,p=i.tileHeight,d=Math.floor(n/p),g=Math.floor(r/p),m=Math.floor(t/f),y=Math.floor(e/f);return d==g&&d==this.cachedRow&&m==y&&m==this.cachedCol?s=u=l=c=this.cachedImage:d==g&&m==y?(u=l=c=s=this.lookupImage(h,d,m,o),this.cachedRow=d,this.cachedCol=m,this.cachedImage=s):(s=this.lookupImage(h,d,m,o),u=this.lookupImage(h,d,y,o),l=this.lookupImage(h,g,m,o),c=this.lookupImage(h,g,y,o)),!!(s&&u&&l&&c)&&(a[0]=s.pixel(t%f,n%p),a[1]=u.pixel(e%f,n%p),a[2]=l.pixel(t%f,r%p),a[3]=c.pixel(e%f,r%p),!0)},g.prototype.lookupImage=function(t,e,n,r){var i=f.computeTileKey(t,e,n),o=this.imageCache.entryForKey(i);if(null==o&&r){var a=this.tileForLevel(t,e,n);this.retrieveTileImage(a)}return o},g.prototype.assembleTiles=function(t,e,n){if(this.currentTiles=[],this.currentSector.copy(e),this.currentSector.intersection(this.coverageSector),!this.currentSector.isEmpty())for(var r=t.tileDelta.latitude,i=t.tileDelta.longitude,o=f.computeRow(r,this.currentSector.minLatitude),a=f.computeLastRow(r,this.currentSector.maxLatitude),s=f.computeColumn(i,this.currentSector.minLongitude),u=f.computeLastColumn(i,this.currentSector.maxLongitude),l=o;l<=a;l++)for(var c=s;c<=u;c++)this.addTileOrAncestor(t,l,c,n)},g.prototype.addTileOrAncestor=function(t,e,n,r){var i=this.tileForLevel(t.levelNumber,e,n);this.isTileImageInMemory(i)?this.addToCurrentTiles(i):(r&&this.retrieveTileImage(i),t.isFirstLevel()?this.currentTiles.push(i):this.addAncestor(t,e,n,r))},g.prototype.addAncestor=function(t,e,n,r){for(var i=null,o=Math.floor(e/2),a=Math.floor(n/2),s=t.levelNumber-1;s>=0;s--){if(i=this.tileForLevel(s,o,a),this.isTileImageInMemory(i))return void this.addToCurrentTiles(i);o=Math.floor(o/2),a=Math.floor(a/2)}this.addToCurrentTiles(i),r&&this.retrieveTileImage(i)},g.prototype.addToCurrentTiles=function(t){this.currentTiles.push(t)},g.prototype.tileForLevel=function(t,e,n){var r=f.computeTileKey(t,e,n),i=this.tileCache.entryForKey(r);if(i)return i;var o=this.levels.level(t),a=f.computeSector(o,e,n);return i=new f(a,o,e,n),this.tileCache.putEntry(r,i,i.size()),i},g.prototype.isTileImageInMemory=function(t){return this.imageCache.containsKey(t.tileKey)},g.prototype.resourceUrlForTile=function(t){return this.urlBuilder.urlForTile(t,this.retrievalImageFormat)},g.prototype.retrieveTileImage=function(t){if(this.currentRetrievals.indexOf(t.tileKey)<0){if(this.currentRetrievals.length>this.retrievalQueueSize)return;var e=this.resourceUrlForTile(t,this.retrievalImageFormat),n=new XMLHttpRequest,r=this;if(!e)return;n.open("GET",e,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){if(4===n.readyState){r.removeFromCurrentRetrievals(t.tileKey);var i=n.getResponseHeader("content-type");if(200===n.status)if(i===r.retrievalImageFormat||"text/plain"===i||"application/octet-stream"===i||"multipart/related"===i.substring(0,17)){l.log(l.LEVEL_INFO,"Elevations retrieval succeeded: "+e),r.loadElevationImage(t,n),r.absentResourceList.unmarkResourceAbsent(t.tileKey);var o=document.createEvent("Event");o.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(o)}else"text/xml"===i?(r.absentResourceList.markResourceAbsent(t.tileKey),l.log(l.LEVEL_WARNING,"Elevations retrieval failed ("+n.statusText+"): "+e+".\n "+String.fromCharCode.apply(null,new Uint8Array(n.response)))):(r.absentResourceList.markResourceAbsent(t.tileKey),l.log(l.LEVEL_WARNING,"Elevations retrieval failed: "+e+". Unexpected content type "+i));else r.absentResourceList.markResourceAbsent(t.tileKey),l.log(l.LEVEL_WARNING,"Elevations retrieval failed ("+n.statusText+"): "+e)}},n.onerror=function(){r.removeFromCurrentRetrievals(t.tileKey),r.absentResourceList.markResourceAbsent(t.tileKey),l.log(l.LEVEL_WARNING,"Elevations retrieval failed: "+e)},n.ontimeout=function(){r.removeFromCurrentRetrievals(t.tileKey),r.absentResourceList.markResourceAbsent(t.tileKey),l.log(l.LEVEL_WARNING,"Elevations retrieval timed out: "+e)},n.send(null),this.currentRetrievals.push(t.tileKey)}},g.prototype.removeFromCurrentRetrievals=function(t){var e=this.currentRetrievals.indexOf(t);e>-1&&this.currentRetrievals.splice(e,1)},g.prototype.loadElevationImage=function(e,n){var r,i,s=new o(e.sector,e.tileWidth,e.tileHeight);"application/bil16"===this.retrievalImageFormat?(s.imageData=new Int16Array(n.response),s.size=2*s.imageData.length):"application/bil32"===this.retrievalImageFormat?(s.imageData=new Float32Array(n.response),s.size=4*s.imageData.length):"image/tiff"===this.retrievalImageFormat?(r=new a(n.response),s.imageData=r.getImageData(),s.size=s.imageData.length*r.metadata.bitsPerSample[0]/8):"image/x-aaigrid"===this.retrievalImageFormat&&(i=new t(n.response),s.imageData=i.getImageData(),s.size=s.imageData.length),s.imageData&&(s.findMinAndMaxElevation(),this.imageCache.putEntry(e.tileKey,s,s.size),this.timestamp=Date.now())},g})),i("util/WmsUrlBuilder",["../error/ArgumentError","../util/Logger"],(function(t,e){"use strict";var n=function(n,r,i,o,a){if(!n||0===n.length)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsUrlBuilder","constructor","The WMS service address is missing."));if(!r||0===r.length)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsUrlBuilder","constructor","The WMS layer names are not specified."));this.serviceAddress=n,this.layerNames=r,this.styleNames=i||"",this.transparent=!0,this.wmsVersion=o&&o.length>0?o:"1.3.0",this.isWms130OrGreater=this.wmsVersion>="1.3.0",this.crs="EPSG:4326",this.timeString=a};return n.prototype.urlForTile=function(r,i){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsUrlBuilder","urlForTile","missingTile"));if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsUrlBuilder","urlForTile","The image format is null or undefined."));var o=r.sector,a=n.fixGetMapString(this.serviceAddress);return a.search(/service=wms/i)<0&&(a+="service=WMS"),a=(a=(a=(a=(a=(a=(a=(a+="&request=GetMap")+"&version="+this.wmsVersion)+"&transparent="+(this.transparent?"TRUE":"FALSE"))+"&layers="+this.layerNames)+"&styles="+this.styleNames)+"&format="+i)+"&width="+r.tileWidth)+"&height="+r.tileHeight,this.timeString&&(a=a+"&time="+this.timeString),this.isWms130OrGreater?(a=a+"&crs="+this.crs,a+="&bbox=",a="CRS:84"===this.crs?(a=a+o.minLongitude+","+o.minLatitude+",")+o.maxLongitude+","+o.maxLatitude:(a=a+o.minLatitude+","+o.minLongitude+",")+o.maxLatitude+","+o.maxLongitude):(a=a+"&srs="+this.crs,a=(a=(a+="&bbox=")+o.minLongitude+","+o.minLatitude+",")+o.maxLongitude+","+o.maxLatitude),a.replace(" ","%20")},n.fixGetMapString=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsUrlBuilder","fixGetMapString","The specified service address is null or undefined."));var r=n.indexOf("?");return r<0?n+="?":r!==n.length-1&&(r=n.search(/&$/))<0&&(n+="&"),n},n})),i("globe/AsterV2ElevationCoverage",["../geom/Location","../geom/Sector","../globe/TiledElevationCoverage","../util/WmsUrlBuilder"],(function(t,e,n,r){"use strict";var i=function(){n.call(this,{coverageSector:new e(-83.0001,83.0001,-180,180),resolution:.000277777777778,retrievalImageFormat:"application/bil16",minElevation:-11e3,maxElevation:8850,urlBuilder:new r("https://worldwind26.arc.nasa.gov/elev","aster_v2","","1.3.0")}),this.displayName="ASTER V2 Earth Elevation Coverage"};return i.prototype=Object.create(n.prototype),i})),i("shaders/AtmosphereProgram",["../error/ArgumentError","../shaders/GpuProgram","../util/Logger"],(function(t,e,n){"use strict";var r=function(t,n,r,i){e.call(this,t,n,r,i),this.FRAGMODE_SKY=1,this.FRAGMODE_GROUND_PRIMARY=2,this.FRAGMODE_GROUND_SECONDARY=3,this.FRAGMODE_GROUND_PRIMARY_TEX_BLEND=4,this.altitude=16e4,this.rayleighScaleDepth=.25,this.fragModeLocation=this.uniformLocation(t,"fragMode"),this.mvpMatrixLocation=this.uniformLocation(t,"mvpMatrix"),this.texCoordMatrixLocation=this.uniformLocation(t,"texCoordMatrix"),this.vertexOriginLocation=this.uniformLocation(t,"vertexOrigin"),this.eyePointLocation=this.uniformLocation(t,"eyePoint"),this.eyeMagnitudeLocation=this.uniformLocation(t,"eyeMagnitude"),this.eyeMagnitude2Location=this.uniformLocation(t,"eyeMagnitude2"),this.lightDirectionLocation=this.uniformLocation(t,"lightDirection"),this.atmosphereRadiusLocation=this.uniformLocation(t,"atmosphereRadius"),this.atmosphereRadius2Location=this.uniformLocation(t,"atmosphereRadius2"),this.globeRadiusLocation=this.uniformLocation(t,"globeRadius"),this.scaleLocation=this.uniformLocation(t,"scale"),this.scaleDepthLocation=this.uniformLocation(t,"scaleDepth"),this.scaleOverScaleDepthLocation=this.uniformLocation(t,"scaleOverScaleDepth"),this.scratchArray9=new Float32Array(9)};return r.key="WorldWindGpuAtmosphereProgram",(r.prototype=Object.create(e.prototype)).getAltitude=function(){return this.altitude},r.prototype.loadFragMode=function(e,r){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadFragMode","missingFragMode"));e.uniform1i(this.fragModeLocation,r)},r.prototype.loadModelviewProjection=function(e,r){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(e,r,this.mvpMatrixLocation)},r.prototype.loadVertexOrigin=function(e,r){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadVertexOrigin","missingVector"));e.uniform3f(this.vertexOriginLocation,r[0],r[1],r[2])},r.prototype.loadLightDirection=function(e,r){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadLightDirection","missingVector"));e.uniform3f(this.lightDirectionLocation,r[0],r[1],r[2])},r.prototype.loadEyePoint=function(e,r){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadEyePoint","missingVector"));e.uniform3f(this.eyePointLocation,r[0],r[1],r[2]),e.uniform1f(this.eyeMagnitudeLocation,r.magnitude()),e.uniform1f(this.eyeMagnitude2Location,r.magnitudeSquared())},r.prototype.loadGlobeRadius=function(e,r){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadGlobeRadius","missingGlobeRadius"));var i=r,o=i+this.altitude;e.uniform1f(this.globeRadiusLocation,i),e.uniform1f(this.atmosphereRadiusLocation,o),e.uniform1f(this.atmosphereRadius2Location,o*o)},r.prototype.setScale=function(t){t.uniform1f(this.scaleLocation,1/this.getAltitude()),t.uniform1f(this.scaleDepthLocation,this.rayleighScaleDepth),t.uniform1f(this.scaleOverScaleDepthLocation,1/this.getAltitude()/this.rayleighScaleDepth)},r.prototype.loadTexMatrix=function(e,r){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"AtmosphereProgram","loadTexMatrix","missingMatrix"));r.columnMajorComponents(this.scratchArray9),e.uniformMatrix3fv(this.texCoordMatrixLocation,!1,this.scratchArray9)},r})),i("shaders/GroundProgram",["../shaders/AtmosphereProgram"],(function(t){"use strict";var e=function(e){t.call(this,e,"precision mediump int;\nconst int FRAGMODE_GROUND_PRIMARY_TEX_BLEND = 4;\nconst int SAMPLE_COUNT = 2;\nconst float SAMPLES = 2.0;\nconst float PI = 3.141592653589;\nconst float Kr = 0.0025;\nconst float Kr4PI = Kr * 4.0 * PI;\nconst float Km = 0.0015;\nconst float Km4PI = Km * 4.0 * PI;\nconst float ESun = 15.0;\nconst float KmESun = Km * ESun;\nconst float KrESun = Kr * ESun;\nconst vec3 invWavelength = vec3(5.60204474633241, 9.473284437923038, 19.643802610477206);\nconst float rayleighScaleDepth = 0.25;\nuniform int fragMode;\nuniform mat4 mvpMatrix;\nuniform mat3 texCoordMatrix;\nuniform vec3 vertexOrigin;\nuniform vec3 eyePoint;\nuniform float eyeMagnitude;\nuniform float eyeMagnitude2;\nuniform vec3 lightDirection;\nuniform float atmosphereRadius;\nuniform float atmosphereRadius2;\nuniform float globeRadius;\nuniform float scale;\nuniform float scaleDepth;\nuniform float scaleOverScaleDepth;\nattribute vec4 vertexPoint;\nattribute vec2 vertexTexCoord;\nvarying vec3 primaryColor;\nvarying vec3 secondaryColor;\nvarying vec2 texCoord;\nfloat scaleFunc(float cos) {\n    float x = 1.0 - cos;\n    return scaleDepth * exp(-0.00287 + x*(0.459 + x*(3.83 + x*(-6.80 + x*5.25))));\n}\nvoid sampleGround() {\n    vec3 point = vertexPoint.xyz + vertexOrigin;\n    vec3 ray = point - eyePoint;\n    float far = length(ray);\n    ray /= far;\n    vec3 start;\n    if (eyeMagnitude < atmosphereRadius) {\n        start = eyePoint;\n    } else {\n        float B = 2.0 * dot(eyePoint, ray);\n        float C = eyeMagnitude2 - atmosphereRadius2;\n        float det = max(0.0, B*B - 4.0 * C);\n        float near = 0.5 * (-B - sqrt(det));\n        start = eyePoint + ray * near;\n        far -= near;\n}\n    float depth = exp((globeRadius - atmosphereRadius) / scaleDepth);\n    float eyeAngle = dot(-ray, point) / length(point);\n    float lightAngle = dot(lightDirection, point) / length(point);\n    float eyeScale = scaleFunc(eyeAngle);\n    float lightScale = scaleFunc(lightAngle);\n    float eyeOffset = depth*eyeScale;\n    float temp = (lightScale + eyeScale);\n    float sampleLength = far / SAMPLES;\n    float scaledLength = sampleLength * scale;\n    vec3 sampleRay = ray * sampleLength;\n    vec3 samplePoint = start + sampleRay * 0.5;\n    vec3 frontColor = vec3(0.0, 0.0, 0.0);\n    vec3 attenuate = vec3(0.0, 0.0, 0.0);\n    for(int i=0; i<SAMPLE_COUNT; i++)\n    {\n        float height = length(samplePoint);\n        float depth = exp(scaleOverScaleDepth * (globeRadius - height));\n        float scatter = depth*temp - eyeOffset;\n        attenuate = exp(-scatter * (invWavelength * Kr4PI + Km4PI));\n        frontColor += attenuate * (depth * scaledLength);\n        samplePoint += sampleRay;\n    }\n    primaryColor = frontColor * (invWavelength * KrESun + KmESun);\n    secondaryColor = attenuate;\n}\nvoid main()\n {\n    sampleGround();\n    gl_Position = mvpMatrix * vertexPoint;\n    if (fragMode == FRAGMODE_GROUND_PRIMARY_TEX_BLEND) {\n        texCoord = (texCoordMatrix * vec3(vertexTexCoord, 1.0)).st;\n    }\n}","precision mediump float;\nprecision mediump int;\nconst int FRAGMODE_GROUND_PRIMARY = 2;\nconst int FRAGMODE_GROUND_SECONDARY = 3;\nconst int FRAGMODE_GROUND_PRIMARY_TEX_BLEND = 4;\nuniform int fragMode;\nuniform sampler2D texSampler;\nvarying vec3 primaryColor;\nvarying vec3 secondaryColor;\nvarying vec2 texCoord;\nvoid main (void)\n{\n    if (fragMode == FRAGMODE_GROUND_PRIMARY) {\n        gl_FragColor = vec4(primaryColor, 1.0);\n    } else if (fragMode == FRAGMODE_GROUND_SECONDARY) {\n        gl_FragColor = vec4(secondaryColor, 1.0);\n    } else if (fragMode == FRAGMODE_GROUND_PRIMARY_TEX_BLEND) {\n        vec4 texColor = texture2D(texSampler, texCoord);\n        gl_FragColor = vec4(primaryColor + texColor.rgb * (1.0 - secondaryColor), 1.0);\n    }\n}",["vertexPoint","vertexTexCoord"])};return e.key="WorldWindGroundProgram",e.prototype=Object.create(t.prototype),e})),i("layer/Layer",["../util/Logger"],(function(t){"use strict";var e=function(t){this.displayName=t||"Layer",this.enabled=!0,this.pickEnabled=!0,this.opacity=1,this.minActiveAltitude=-Number.MAX_VALUE,this.maxActiveAltitude=Number.MAX_VALUE,this.inCurrentFrame=!1,this.time=null};return e.prototype.refresh=function(){},e.prototype.render=function(t){this.inCurrentFrame=!1,this.enabled&&(t.pickingMode&&!this.pickEnabled||this.withinActiveAltitudes(t)&&this.isLayerInView(t)&&this.doRender(t))},e.prototype.doRender=function(t){},e.prototype.withinActiveAltitudes=function(t){var e=t.eyePosition;return!!e&&e.altitude>=this.minActiveAltitude&&e.altitude<=this.maxActiveAltitude},e.prototype.isLayerInView=function(t){return!0},e})),i("geom/Matrix3",["../error/ArgumentError","../util/Logger"],(function(t,e){"use strict";var n=function(t,e,n,r,i,o,a,s,u){this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u};return n.prototype=new Float64Array(9),n.fromIdentity=function(){return new n(1,0,0,0,1,0,0,0,1)},n.prototype.setToUnitYFlip=function(){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=-1,this[5]=1,this[6]=0,this[7]=0,this[8]=1,this},n.prototype.multiplyMatrix=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Matrix3","multiplyMatrix","missingMatrix"));var r,i,o,a=this,s=n;return r=a[0],i=a[1],o=a[2],a[0]=r*s[0]+i*s[3]+o*s[6],a[1]=r*s[1]+i*s[4]+o*s[7],a[2]=r*s[2]+i*s[5]+o*s[8],r=a[3],i=a[4],o=a[5],a[3]=r*s[0]+i*s[3]+o*s[6],a[4]=r*s[1]+i*s[4]+o*s[7],a[5]=r*s[2]+i*s[5]+o*s[8],r=a[6],i=a[7],o=a[8],a[6]=r*s[0]+i*s[3]+o*s[6],a[7]=r*s[1]+i*s[4]+o*s[7],a[8]=r*s[2]+i*s[5]+o*s[8],this},n.prototype.multiplyByTileTransform=function(t,e){var n=t.deltaLatitude(),r=t.deltaLongitude(),i=e.deltaLatitude(),o=e.deltaLongitude(),a=r/o,s=n/i,u=(t.minLongitude-e.minLongitude)/o,l=(t.minLatitude-e.minLatitude)/i,c=this;return c[2]+=c[0]*u+c[1]*l,c[5]+=c[3]*u+c[4]*l,c[8]+=c[6]*u+c[6]*l,c[0]*=a,c[1]*=s,c[3]*=a,c[4]*=s,c[6]*=a,c[7]*=s,this},n.prototype.columnMajorComponents=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Matrix3","columnMajorComponents","missingResult"));return n[0]=this[0],n[1]=this[3],n[2]=this[6],n[3]=this[1],n[4]=this[4],n[5]=this[7],n[6]=this[2],n[7]=this[5],n[8]=this[8],n},n})),i("shaders/SkyProgram",["../shaders/AtmosphereProgram"],(function(t){"use strict";var e=function(e){t.call(this,e,"precision mediump int;\nconst int SAMPLE_COUNT = 2;\nconst float SAMPLES = 2.0;\nconst float PI = 3.141592653589;\nconst float Kr = 0.0025;\nconst float Kr4PI = Kr * 4.0 * PI;\nconst float Km = 0.0015;\nconst float Km4PI = Km * 4.0 * PI;\nconst float ESun = 15.0;\nconst float KmESun = Km * ESun;\nconst float KrESun = Kr * ESun;\nconst vec3 invWavelength = vec3(5.60204474633241, 9.473284437923038, 19.643802610477206);\nconst float rayleighScaleDepth = 0.25;\nuniform mat4 mvpMatrix;\nuniform vec3 vertexOrigin;\nuniform vec3 eyePoint;\nuniform float eyeMagnitude;\nuniform float eyeMagnitude2;\nuniform mediump vec3 lightDirection;\nuniform float atmosphereRadius;\nuniform float atmosphereRadius2;\nuniform float globeRadius;\nuniform float scale;\nuniform float scaleDepth;\nuniform float scaleOverScaleDepth;\nattribute vec4 vertexPoint;\nvarying vec3 primaryColor;\nvarying vec3 secondaryColor;\nvarying vec3 direction;\nfloat scaleFunc(float cos)\n{\n    float x = 1.0 - cos;\n    return scaleDepth * exp(-0.00287 + x*(0.459 + x*(3.83 + x*(-6.80 + x*5.25))));\n}\nvoid sampleSky() {\n    vec3 point = vertexPoint.xyz + vertexOrigin;\n    vec3 ray = point - eyePoint;\n    float far = length(ray);\n    ray /= far;\n    vec3 start;\n    float startOffset;\n    if (eyeMagnitude < atmosphereRadius) {\n        start = eyePoint;\n        float height = length(start);\n        float depth = exp(scaleOverScaleDepth * (globeRadius - eyeMagnitude));\n        float startAngle = dot(ray, start) / height;\n        startOffset = depth*scaleFunc(startAngle);\n    } else {\n        float B = 2.0 * dot(eyePoint, ray);\n        float C = eyeMagnitude2 - atmosphereRadius2;\n        float det = max(0.0, B*B - 4.0 * C);\n        float near = 0.5 * (-B - sqrt(det));\n        start = eyePoint + ray * near;\n        far -= near;\n        float startAngle = dot(ray, start) / atmosphereRadius;\n        float startDepth = exp(-1.0 / scaleDepth);\n        startOffset = startDepth*scaleFunc(startAngle);\n    }\n    float sampleLength = far / SAMPLES;\n    float scaledLength = sampleLength * scale;\n    vec3 sampleRay = ray * sampleLength;\n    vec3 samplePoint = start + sampleRay * 0.5;\n    vec3 frontColor = vec3(0.0, 0.0, 0.0);\n    for(int i=0; i<SAMPLE_COUNT; i++)\n    {\n       float height = length(samplePoint);\n       float depth = exp(scaleOverScaleDepth * (globeRadius - height));\n       float lightAngle = dot(lightDirection, samplePoint) / height;\n       float cameraAngle = dot(ray, samplePoint) / height;\n       float scatter = (startOffset + depth*(scaleFunc(lightAngle) - scaleFunc(cameraAngle)));\n       vec3 attenuate = exp(-scatter * (invWavelength * Kr4PI + Km4PI));\n       frontColor += attenuate * (depth * scaledLength);\n       samplePoint += sampleRay;\n    }\n    primaryColor = frontColor * (invWavelength * KrESun);\n    secondaryColor = frontColor * KmESun;\n    direction = eyePoint - point;\n}\nvoid main()\n{\n    sampleSky();\n    gl_Position = mvpMatrix * vertexPoint;\n}","#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nconst float g = -0.95;\nconst float g2 = g * g;\nuniform mediump vec3 lightDirection;\nvarying vec3 primaryColor;\nvarying vec3 secondaryColor;\nvarying vec3 direction;\nvoid main (void)\n{\n    float cos = dot(lightDirection, direction) / length(direction);\n    float rayleighPhase = 0.75 * (1.0 + cos * cos);\n    float miePhase = 1.5 * ((1.0 - g2) / (2.0 + g2)) * (1.0 + cos*cos) /         pow(1.0 + g2 - 2.0*g*cos, 1.5);\n    const float exposure = 2.0;\n    vec3 color = primaryColor * rayleighPhase + secondaryColor * miePhase;\n    color = vec3(1.0) - exp(-exposure * color);\n    gl_FragColor = vec4(color, color.b);\n}",["vertexPoint"])};return e.key="WorldWindSkyProgram",e.prototype=Object.create(t.prototype),e})),i("util/SunPosition",["../geom/Angle","../error/ArgumentError","./Logger","./WWMath"],(function(t,e,n,r){"use strict";return{getAsGeographicLocation:function(t){if(t instanceof Date==0)throw new e(n.logMessage(n.LEVEL_SEVERE,"SunPosition","getAsGeographicLocation","missingDate"));var r=this.getAsCelestialLocation(t);return this.celestialToGeographic(r,t)},getAsCelestialLocation:function(i){if(i instanceof Date==0)throw new e(n.logMessage(n.LEVEL_SEVERE,"SunPosition","getAsCelestialLocation","missingDate"));var o=this.computeJulianDate(i)-2451545,a=r.normalizeAngle360(280.46+.9856474*o),s=r.normalizeAngle360(357.528+.9856003*o)*t.DEGREES_TO_RADIANS,u=a+1.915*Math.sin(s)+.02*Math.sin(2*s),l=u*t.DEGREES_TO_RADIANS,c=(23.439-4e-7*o)*t.DEGREES_TO_RADIANS,h=Math.asin(Math.sin(c)*Math.sin(l))*t.RADIANS_TO_DEGREES,f=Math.atan(Math.cos(c)*Math.tan(l))*t.RADIANS_TO_DEGREES;return u>=90&&u<270&&(f+=180),{declination:h,rightAscension:f=r.normalizeAngle360(f)}},celestialToGeographic:function(i,o){if(!i)throw new e(n.logMessage(n.LEVEL_SEVERE,"SunPosition","celestialToGeographic","missingCelestialLocation"));if(o instanceof Date==0)throw new e(n.logMessage(n.LEVEL_SEVERE,"SunPosition","celestialToGeographic","missingDate"));var a=this.computeJulianDate(o)-2451545,s=r.normalizeAngle360(280.46061837+360.98564736629*a),u=r.normalizeAngle360(s-i.rightAscension),l=t.normalizedDegreesLongitude(-u);return{latitude:i.declination,longitude:l}},computeJulianDate:function(t){if(t instanceof Date==0)throw new e(n.logMessage(n.LEVEL_SEVERE,"SunPosition","computeJulianDate","missingDate"));var r=t.getUTCFullYear(),i=t.getUTCMonth()+1,o=t.getUTCDate(),a=(t.getUTCHours()+t.getUTCMinutes()/60+t.getUTCSeconds()/3600)/24;i<=2&&(r-=1,i+=12);var s=Math.floor(r/100),u=2-s+Math.floor(s/4);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(i+1))+o+u-1524.5+a}}})),i("layer/AtmosphereLayer",["../error/ArgumentError","../shaders/GroundProgram","../layer/Layer","../util/Logger","../geom/Matrix","../geom/Matrix3","../geom/Sector","../shaders/SkyProgram","../util/SunPosition","../geom/Vec3","../util/WWUtil"],(function(t,e,n,r,i,o,a,s,u,l,c){"use strict";var h=function(t){n.call(this,"Atmosphere"),this.pickEnabled=!1,this._nightImageSource=t||WorldWind.configuration.baseUrl+"images/dnb_land_ocean_ice_2012.png",this._activeLightDirection=new l(0,0,0),this._fullSphereSector=a.FULL_SPHERE,this._skyData={},this._skyWidth=128,this._skyHeight=128,this._numIndices=0,this._texMatrix=o.fromIdentity(),this._activeTexture=null};return h.prototype=Object.create(n.prototype),Object.defineProperties(h.prototype,{nightImageSource:{get:function(){return this._nightImageSource},set:function(t){this._nightImageSource=t}}}),h.prototype.doRender=function(t){t.globe.is2D()||(this.determineLightDirection(t),this.drawSky(t),this.drawGround(t))},h.prototype.applySkyVertices=function(t){var e,n,r=t.currentGlContext,i=t.currentProgram,o=this._skyData;o.verticesVboCacheKey||(o.verticesVboCacheKey=t.gpuResourceCache.generateCacheKey()),(n=t.gpuResourceCache.resourceForKey(o.verticesVboCacheKey))?(r.bindBuffer(r.ARRAY_BUFFER,n),r.vertexAttribPointer(0,3,r.FLOAT,!1,0,0)):(e=this.assembleVertexPoints(t,this._skyHeight,this._skyWidth,i.getAltitude()),n=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,n),r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW),r.vertexAttribPointer(0,3,r.FLOAT,!1,0,0),t.gpuResourceCache.putResource(o.verticesVboCacheKey,n,4*e.length),t.frameStatistics.incrementVboLoadCount(1))},h.prototype.applySkyIndices=function(t){var e,n,r=t.currentGlContext,i=this._skyData;i.indicesVboCacheKey||(i.indicesVboCacheKey=t.gpuResourceCache.generateCacheKey()),(n=t.gpuResourceCache.resourceForKey(i.indicesVboCacheKey))?r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n):(e=this.assembleTriStripIndices(this._skyWidth,this._skyHeight),n=r.createBuffer(),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e,r.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1),t.gpuResourceCache.putResource(i.indicesVboCacheKey,n,2*e.length))},h.prototype.drawSky=function(t){var e=t.currentGlContext,n=t.findAndBindProgram(s);n.loadGlobeRadius(e,t.globe.equatorialRadius),n.loadEyePoint(e,t.eyePoint),n.loadVertexOrigin(e,l.ZERO),n.loadModelviewProjection(e,t.modelviewProjection),n.loadLightDirection(e,this._activeLightDirection),n.setScale(e),this.applySkyVertices(t),this.applySkyIndices(t),e.depthMask(!1),e.frontFace(e.CW),e.enableVertexAttribArray(0),e.drawElements(e.TRIANGLE_STRIP,this._numIndices,e.UNSIGNED_SHORT,0),e.depthMask(!0),e.frontFace(e.CCW),e.disableVertexAttribArray(0)},h.prototype.drawGround=function(t){if(t.terrain){var n,r=t.currentGlContext,i=t.findAndBindProgram(e),o=t.terrain;i.loadGlobeRadius(r,t.globe.equatorialRadius),i.loadEyePoint(r,t.eyePoint),i.loadLightDirection(r,this._activeLightDirection),i.setScale(r),this.nightImageSource&&null!==this.time&&(this._activeTexture=t.gpuResourceCache.resourceForKey(this.nightImageSource),this._activeTexture||(this._activeTexture=t.gpuResourceCache.retrieveTexture(r,this.nightImageSource)),n=this._activeTexture&&this._activeTexture.bind(t)),o.beginRendering(t);for(var a=0,s=o.surfaceGeometry.length;a<s;a++){var u=o.surfaceGeometry[a],l=u.referencePoint;i.loadVertexOrigin(r,l),n&&(this._texMatrix.setToUnitYFlip(),this._texMatrix.multiplyByTileTransform(u.sector,this._fullSphereSector),i.loadTexMatrix(r,this._texMatrix)),o.beginRenderingTile(t,u),i.loadFragMode(r,i.FRAGMODE_GROUND_SECONDARY),r.blendFunc(r.DST_COLOR,r.ZERO),o.renderTile(t,u);var c=n?i.FRAGMODE_GROUND_PRIMARY_TEX_BLEND:i.FRAGMODE_GROUND_PRIMARY;i.loadFragMode(r,c),r.blendFunc(r.ONE,r.ONE),o.renderTile(t,u),o.endRenderingTile(t,u)}o.endRendering(t),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),this._activeTexture=null}},h.prototype.assembleVertexPoints=function(t,e,n,r){var i=e*n,o=new Array(i);c.fillArray(o,r);var a=new Float32Array(3*i);return t.globe.computePointsForGrid(this._fullSphereSector,e,n,o,l.ZERO,a)},h.prototype.assembleTriStripIndices=function(t,e){for(var n=[],r=0,i=0;i<t-1;i++){for(var o=0;o<e;o++)r=o+i*e,n.push(r+e),n.push(r);i<t-2&&(n.push(r),n.push((i+2)*e))}return this._numIndices=n.length,new Uint16Array(n)},h.prototype.determineLightDirection=function(t){if(null!==this.time){var e=u.getAsGeographicLocation(this.time);t.globe.computePointFromLocation(e.latitude,e.longitude,this._activeLightDirection)}else this._activeLightDirection.copy(t.eyePoint);this._activeLightDirection.normalize()},h})),i("util/BasicTimeSequence",["../error/ArgumentError","../util/Logger"],(function(t,e){"use strict";var n=function(n){if(!n&&n.length<2)throw new t(e.logMessage(e.LEVEL_SEVERE,"BasicTimeSequence","constructor","missingDates"));this.dates=n,this.currentIndex=0,this.currentTime=n[0]};return Object.defineProperties(n.prototype,{scaleForCurrentTime:{get:function(){return this.currentTime?this.currentIndex/this.dates.length:1}}}),n.prototype.next=function(){return this.currentIndex>=this.dates.length-1?null:(this.currentIndex++,this.currentTime=this.dates[this.currentIndex],this.currentTime)},n.prototype.previous=function(){return this.currentIndex<=0?null:(this.currentIndex--,this.currentTime=this.dates[this.currentIndex],this.currentTime)},n.prototype.reset=function(){this.currentIndex=-1,this.currentTime=null},n.prototype.getTimeForScale=function(t){return this.currentIndex=t<=0?0:t>=1?this.dates.length-1:Math.floor(this.dates.length*t),this.currentTime=this.dates[this.currentIndex],this.currentTime},n})),i("gesture/Touch",[],(function(){"use strict";var t=function(t,e,n){this.identifier=t,this._clientX=e,this._clientY=n,this._clientStartX=e,this._clientStartY=n};return Object.defineProperties(t.prototype,{clientX:{get:function(){return this._clientX},set:function(t){this._clientX=t}},clientY:{get:function(){return this._clientY},set:function(t){this._clientY=t}},translationX:{get:function(){return this._clientX-this._clientStartX},set:function(t){this._clientStartX=this._clientX-t}},translationY:{get:function(){return this._clientY-this._clientStartY},set:function(t){this._clientStartY=this._clientY-t}}}),t})),i("gesture/GestureRecognizer",["../error/ArgumentError","../util/Logger","../gesture/Touch"],(function(t,e,n){"use strict";var r=function n(r,i){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"GestureRecognizer","constructor","missingTarget"));this.target=r,this.enabled=!0,this._state=WorldWind.POSSIBLE,this._nextState=null,this._clientX=0,this._clientY=0,this._clientStartX=0,this._clientStartY=0,this._translationX=0,this._translationY=0,this._translationWeight=.4,this._mouseButtonMask=0,this._touches=[],this._touchCentroidShiftX=0,this._touchCentroidShiftY=0,this._gestureCallbacks=[],this._canRecognizeWith=[],this._requiresFailureOf=[],this._requiredToFailBy=[],i&&this._gestureCallbacks.push(i),this.listenerList=[],n.allRecognizers.push(this)};return r.allRecognizers=[],Object.defineProperties(r.prototype,{state:{get:function(){return this._state},set:function(t){this.transitionToState(t)}},clientX:{get:function(){return this._clientX},set:function(t){this._clientX=t}},clientY:{get:function(){return this._clientY},set:function(t){this._clientY=t}},translationX:{get:function(){return this._translationX},set:function(t){this._translationX=t,this._clientStartX=this._clientX,this._touchCentroidShiftX=0}},translationY:{get:function(){return this._translationY},set:function(t){this._translationY=t,this._clientStartY=this._clientY,this._touchCentroidShiftY=0}},mouseButtonMask:{get:function(){return this._mouseButtonMask}},touchCount:{get:function(){return this._touches.length}},gestureCallbacks:{get:function(){return this._gestureCallbacks}}}),r.prototype.touch=function(n){if(n<0||n>=this._touches.length)throw new t(e.logMessage(e.LEVEL_SEVERE,"GestureRecognizer","touch","indexOutOfRange"));return this._touches[n]},r.prototype.recognizeSimultaneouslyWith=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"GestureRecognizer","recognizeSimultaneouslyWith","The specified gesture recognizer is null or undefined."));-1==this._canRecognizeWith.indexOf(n)&&(this._canRecognizeWith.push(n),n._canRecognizeWith.push(this))},r.prototype.canRecognizeSimultaneouslyWith=function(t){return-1!=this._canRecognizeWith.indexOf(t)},r.prototype.requireRecognizerToFail=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"GestureRecognizer","requireRecognizerToFail","The specified gesture recognizer is null or undefined"));-1==this._requiresFailureOf.indexOf(n)&&(this._requiresFailureOf.push(n),n._requiredToFailBy.push(this))},r.prototype.requiresRecognizerToFail=function(t){return-1!=this._requiresFailureOf.indexOf(t)},r.prototype.requiredToFailByRecognizer=function(t){return-1!=this._requiredToFailBy.indexOf(t)},r.prototype.reset=function(){this._state=WorldWind.POSSIBLE,this._nextState=null,this._clientX=0,this._clientY=0,this._clientStartX=0,this._clientStartY=0,this._translationX=0,this._translationY=0,this._mouseButtonMask=0,this._touches=[],this._touchCentroidShiftX=0,this._touchCentroidShiftY=0},r.prototype.prepareToRecognize=function(){},r.prototype.mouseDown=function(t){},r.prototype.mouseMove=function(t){},r.prototype.mouseUp=function(t){},r.prototype.touchStart=function(t){},r.prototype.touchMove=function(t){},r.prototype.touchCancel=function(t){},r.prototype.touchEnd=function(t){},r.prototype.transitionToState=function(t){this._nextState=null,t===WorldWind.FAILED?(this._state=t,this.updateRecognizersWaitingForFailure(),this.resetIfEventsEnded()):t===WorldWind.RECOGNIZED?(this.tryToRecognize(t),this._state===t&&(this.prepareToRecognize(),this.notifyListeners(),this.callGestureCallbacks(),this.resetIfEventsEnded())):t===WorldWind.BEGAN?(this.tryToRecognize(t),this._state===t&&(this.prepareToRecognize(),this.notifyListeners(),this.callGestureCallbacks())):t===WorldWind.CHANGED?(this._state=t,this.notifyListeners(),this.callGestureCallbacks()):(t===WorldWind.CANCELLED||t===WorldWind.ENDED)&&(this._state=t,this.notifyListeners(),this.callGestureCallbacks(),this.resetIfEventsEnded())},r.prototype.updateRecognizersWaitingForFailure=function(){for(var t=0,e=this._requiredToFailBy.length;t<e;t++){var n=this._requiredToFailBy[t];null!=n._nextState&&n.transitionToState(n._nextState)}},r.prototype.tryToRecognize=function(t){if(r.allRecognizers.some(this.canBePreventedByRecognizer,this))this.transitionToState(WorldWind.FAILED);else if(r.allRecognizers.some(this.isWaitingForRecognizerToFail,this))this._nextState=t;else{for(var e=r.allRecognizers.filter(this.canPreventRecognizer,this),n=0,i=e.length;n<i;n++)e[n].transitionToState(WorldWind.FAILED);this._state=t}},r.prototype.canPreventRecognizer=function(t){return this!=t&&this.target==t.target&&t.state==WorldWind.POSSIBLE&&(this.requiredToFailByRecognizer(t)||!this.canRecognizeSimultaneouslyWith(t))},r.prototype.canBePreventedByRecognizer=function(t){return this!=t&&this.target==t.target&&t.state==WorldWind.RECOGNIZED&&(this.requiresRecognizerToFail(t)||!this.canRecognizeSimultaneouslyWith(t))},r.prototype.isWaitingForRecognizerToFail=function(t){return this!=t&&this.target==t.target&&t.state==WorldWind.POSSIBLE&&this.requiresRecognizerToFail(t)},r.prototype.addListener=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"GestureRecognizer","addListener","missingListener"));this.listenerList.push(n)},r.prototype.removeListener=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"GestureRecognizer","removeListener","missingListener"));var r=this.listenerList.indexOf(n);-1!==r&&this.listenerList.splice(r,1)},r.prototype.notifyListeners=function(){for(var t=0;t<this.listenerList.length;t++)this.listenerList[t].gestureStateChanged(this)},r.prototype.callGestureCallbacks=function(){for(var t=0,e=this._gestureCallbacks.length;t<e;t++)this._gestureCallbacks[t](this)},r.prototype.onGestureEvent=function(t){var n,r;if(this.enabled&&(!t.defaultPrevented||this.state!==WorldWind.POSSIBLE))try{if("mousedown"===t.type)this.handleMouseDown(t);else if("mousemove"===t.type)this.handleMouseMove(t);else if("mouseup"===t.type)this.handleMouseUp(t);else if("touchstart"===t.type)for(n=0,r=t.changedTouches.length;n<r;n++)this.handleTouchStart(t.changedTouches.item(n));else if("touchmove"===t.type)for(n=0,r=t.changedTouches.length;n<r;n++)this.handleTouchMove(t.changedTouches.item(n));else if("touchcancel"===t.type)for(n=0,r=t.changedTouches.length;n<r;n++)this.handleTouchCancel(t.changedTouches.item(n));else if("touchend"===t.type)for(n=0,r=t.changedTouches.length;n<r;n++)this.handleTouchEnd(t.changedTouches.item(n));else"pointerdown"===t.type&&"mouse"===t.pointerType?this.handleMouseDown(t):"pointermove"===t.type&&"mouse"===t.pointerType?this.handleMouseMove(t):"pointercancel"===t.type&&"mouse"===t.pointerType||("pointerup"===t.type&&"mouse"===t.pointerType?this.handleMouseUp(t):"pointerdown"===t.type&&"touch"===t.pointerType?this.handleTouchStart(t):"pointermove"===t.type&&"touch"===t.pointerType?this.handleTouchMove(t):"pointercancel"===t.type&&"touch"===t.pointerType?this.handleTouchCancel(t):"pointerup"===t.type&&"touch"===t.pointerType?this.handleTouchEnd(t):e.logMessage(e.LEVEL_INFO,"GestureRecognizer","handleEvent","Unrecognized event type: "+t.type))}catch(t){e.logMessage(e.LEVEL_SEVERE,"GestureRecognizer","handleEvent","Error handling event.\n"+t.toString())}},r.prototype.handleMouseDown=function(t){if(!("mousedown"==t.type&&this._touches.length>0)){var e=1<<t.button;e&0!=this._mouseButtonMask||(0==this._mouseButtonMask&&(this._clientX=t.clientX,this._clientY=t.clientY,this._clientStartX=t.clientX,this._clientStartY=t.clientY,this._translationX=0,this._translationY=0),this._mouseButtonMask|=e,this.mouseDown(t))}},r.prototype.handleMouseMove=function(t){if(0!=this._mouseButtonMask&&(this._clientX!=t.clientX||this._clientY!=t._clientY)){var e=t.clientX-this._clientStartX,n=t.clientY-this._clientStartY,r=this._translationWeight;this._clientX=t.clientX,this._clientY=t.clientY,this._translationX=this._translationX*(1-r)+e*r,this._translationY=this._translationY*(1-r)+n*r,this.mouseMove(t)}},r.prototype.handleMouseUp=function(t){var e=1<<t.button;e&0==this._mouseButtonMask||(this._mouseButtonMask&=~e,this.mouseUp(t),0==this._mouseButtonMask&&this.resetIfEventsEnded())},r.prototype.handleTouchStart=function(t){var e=new n(t.identifier||t.pointerId,t.clientX,t.clientY);this._touches.push(e),1==this._touches.length?(this._clientX=t.clientX,this._clientY=t.clientY,this._clientStartX=t.clientX,this._clientStartY=t.clientY,this._translationX=0,this._translationY=0,this._touchCentroidShiftX=0,this._touchCentroidShiftY=0):this.touchesAddedOrRemoved(),this.touchStart(e)},r.prototype.handleTouchMove=function(t){var e=this.indexOfTouchWithId(t.identifier||t.pointerId);if(-1!=e){var n=this._touches[e];if(n.clientX!=t.clientX||n.clientY!=t.clientY){n.clientX=t.clientX,n.clientY=t.clientY;var r=this.touchCentroid(),i=r.clientX-this._clientStartX+this._touchCentroidShiftX,o=r.clientY-this._clientStartY+this._touchCentroidShiftY,a=this._translationWeight;this._clientX=r.clientX,this._clientY=r.clientY,this._translationX=this._translationX*(1-a)+i*a,this._translationY=this._translationY*(1-a)+o*a,this.touchMove(n)}}},r.prototype.handleTouchCancel=function(t){var e=this.indexOfTouchWithId(t.identifier||t.pointerId);if(-1!=e){var n=this._touches[e];this._touches.splice(e,1),this.touchesAddedOrRemoved(),this.touchCancel(n),this.resetIfEventsEnded()}},r.prototype.handleTouchEnd=function(t){var e=this.indexOfTouchWithId(t.identifier||t.pointerId);if(-1!=e){var n=this._touches[e];this._touches.splice(e,1),this.touchesAddedOrRemoved(),this.touchEnd(n),this.resetIfEventsEnded()}},r.prototype.resetIfEventsEnded=function(){this._state!=WorldWind.POSSIBLE&&0==this._mouseButtonMask&&0==this._touches.length&&this.reset()},r.prototype.touchesAddedOrRemoved=function(){this._touchCentroidShiftX+=this._clientX,this._touchCentroidShiftY+=this._clientY;var t=this.touchCentroid();this._clientX=t.clientX,this._clientY=t.clientY,this._touchCentroidShiftX-=this._clientX,this._touchCentroidShiftY-=this._clientY},r.prototype.touchCentroid=function(){for(var t=0,e=0,n=0,r=this._touches.length;n<r;n++){var i=this._touches[n];t+=i.clientX/r,e+=i.clientY/r}return{clientX:t,clientY:e}},r.prototype.indexOfTouchWithId=function(t){for(var e=0,n=this._touches.length;e<n;e++)if(this._touches[e].identifier==t)return e;return-1},r})),i("gesture/ClickRecognizer",["../gesture/GestureRecognizer"],(function(t){"use strict";var e=function(e,n){t.call(this,e,n),this.numberOfClicks=1,this.button=0,this.maxMouseMovement=5,this.maxClickDuration=500,this.maxClickInterval=400,this.clicks=[],this.timeout=null};return(e.prototype=Object.create(t.prototype)).reset=function(){t.prototype.reset.call(this),this.clicks=[],this.cancelFailAfterDelay()},e.prototype.mouseDown=function(t){if(this.state==WorldWind.POSSIBLE)if(this.button!=t.button)this.state=WorldWind.FAILED;else{var e={clientX:this.clientX,clientY:this.clientY};this.clicks.push(e),this.failAfterDelay(this.maxClickDuration)}},e.prototype.mouseMove=function(t){if(this.state==WorldWind.POSSIBLE){var e=this.translationX,n=this.translationY;Math.sqrt(e*e+n*n)>this.maxMouseMovement&&(this.state=WorldWind.FAILED)}},e.prototype.mouseUp=function(t){this.state==WorldWind.POSSIBLE&&0==this.mouseButtonMask&&(this.clicks.length==this.numberOfClicks?(this.clientX=this.clicks[0].clientX,this.clientY=this.clicks[0].clientY,this.state=WorldWind.RECOGNIZED):this.failAfterDelay(this.maxClickInterval))},e.prototype.touchStart=function(t){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},e.prototype.failAfterDelay=function(t){var e=this;e.timeout&&window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){e.timeout=null,e.state==WorldWind.POSSIBLE&&(e.state=WorldWind.FAILED)}),t)},e.prototype.cancelFailAfterDelay=function(){var t=this;t.timeout&&(window.clearTimeout(t.timeout),t.timeout=null)},e})),i("gesture/DragRecognizer",["../gesture/GestureRecognizer"],(function(t){"use strict";var e=function(e,n){t.call(this,e,n),this.button=0,this.interpretDistance=5};return(e.prototype=Object.create(t.prototype)).mouseMove=function(t){this.state==WorldWind.POSSIBLE?this.shouldInterpret()&&(this.shouldRecognize()?(this.translationX=0,this.translationY=0,this.state=WorldWind.BEGAN):this.state=WorldWind.FAILED):this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CHANGED)},e.prototype.mouseUp=function(t){0==this.mouseButtonMask&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.ENDED))},e.prototype.touchStart=function(t){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},e.prototype.shouldInterpret=function(){var t=this.translationX,e=this.translationY;return Math.sqrt(t*t+e*e)>this.interpretDistance},e.prototype.shouldRecognize=function(){return 1<<this.button==this.mouseButtonMask},e})),i("gesture/FlingRecognizer",["../gesture/GestureRecognizer"],(function(t){"use strict";var e=function(e,n){t.call(this,e,n),this.minVelocity=100,this._stackLimit=5,this._positionStack=[]};return(e.prototype=Object.create(t.prototype))._pushEvent=function(t){this._positionStack.length>=this._stackLimit&&this._positionStack.shift(),this._positionStack.push({time:new Date,x:t.clientX,y:t.clientY})},e.prototype._getVelocity=function(){var t=this._positionStack.length;if(0===t)return{x:0,y:0};var e=this._positionStack[0],n=this._positionStack[t-1];this._positionStack.length=0;var r=(n.time-e.time)/1e3;return{x:(n.x-e.x)/r,y:(n.y-e.y)/r}},e.prototype.mouseMove=function(t){this._pushEvent(t)},e.prototype.mouseUp=function(t){this._checkForFling()},e.prototype.touchMove=function(t){1===this.touchCount&&this._pushEvent(t)},e.prototype.touchCancel=function(t){this._positionStack.length=0},e.prototype.touchEnd=function(t){0===this.touchCount?this._checkForFling():this._positionStack.length=0},e.prototype._checkForFling=function(){var t=this._getVelocity();this.state===WorldWind.POSSIBLE&&(Math.abs(t.x)>this.minVelocity||Math.abs(t.y)>this.minVelocity)&&(this.state=WorldWind.RECOGNIZED)},e})),i("gesture/PanRecognizer",["../gesture/GestureRecognizer"],(function(t){"use strict";var e=function(e,n){t.call(this,e,n),this.minNumberOfTouches=1,this.maxNumberOfTouches=Number.MAX_VALUE,this.interpretDistance=20};return(e.prototype=Object.create(t.prototype)).mouseDown=function(t){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},e.prototype.touchMove=function(t){this.state==WorldWind.POSSIBLE?this.shouldInterpret()&&(this.shouldRecognize()?this.state=WorldWind.BEGAN:this.state=WorldWind.FAILED):this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CHANGED)},e.prototype.touchEnd=function(t){0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.ENDED))},e.prototype.touchCancel=function(t){0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CANCELLED))},e.prototype.prepareToRecognize=function(){this.translationX=0,this.translationY=0},e.prototype.shouldInterpret=function(){var t=this.translationX,e=this.translationY;return Math.sqrt(t*t+e*e)>this.interpretDistance},e.prototype.shouldRecognize=function(){var t=this.touchCount;return 0!=t&&t>=this.minNumberOfTouches&&t<=this.maxNumberOfTouches},e})),i("gesture/PinchRecognizer",["../gesture/GestureRecognizer"],(function(t){"use strict";var e=function(e,n){t.call(this,e,n),this._scale=1,this._offsetScale=1,this.referenceDistance=0,this.interpretThreshold=20,this.weight=.4,this.pinchTouches=[]};return e.prototype=Object.create(t.prototype),Object.defineProperties(e.prototype,{scale:{get:function(){return this._scale*this._offsetScale}}}),e.prototype.reset=function(){t.prototype.reset.call(this),this._scale=1,this._offsetScale=1,this.referenceDistance=0,this.pinchTouches=[]},e.prototype.mouseDown=function(t){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},e.prototype.touchStart=function(t){this.pinchTouches.length<2&&2==this.pinchTouches.push(t)&&(this.referenceDistance=this.currentPinchDistance(),this._offsetScale*=this._scale,this._scale=1)},e.prototype.touchMove=function(t){if(2==this.pinchTouches.length)if(this.state==WorldWind.POSSIBLE)this.shouldRecognize()&&(this.state=WorldWind.BEGAN);else if(this.state==WorldWind.BEGAN||this.state==WorldWind.CHANGED){var e=this.currentPinchDistance(),n=Math.abs(e/this.referenceDistance),r=this.weight;this._scale=this._scale*(1-r)+n*r,this.state=WorldWind.CHANGED}},e.prototype.touchEnd=function(t){var e=this.pinchTouches.indexOf(t);-1!=e&&this.pinchTouches.splice(e,1),0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.ENDED))},e.prototype.touchCancel=function(t){var e=this.pinchTouches.indexOf(t);-1!=e&&this.pinchTouches.splice(e,1),0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CANCELLED))},e.prototype.prepareToRecognize=function(){this.referenceDistance=this.currentPinchDistance(),this._scale=1},e.prototype.shouldRecognize=function(){var t=this.currentPinchDistance();return Math.abs(t-this.referenceDistance)>this.interpretThreshold},e.prototype.currentPinchDistance=function(){var t=this.pinchTouches[0],e=this.pinchTouches[1],n=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(n*n+r*r)},e})),i("gesture/RotationRecognizer",["../geom/Angle","../gesture/GestureRecognizer"],(function(t,e){"use strict";var n=function(t,n){e.call(this,t,n),this._rotation=0,this._offsetRotation=0,this.referenceAngle=0,this.interpretThreshold=20,this.weight=.4,this.rotationTouches=[]};return n.prototype=Object.create(e.prototype),Object.defineProperties(n.prototype,{rotation:{get:function(){return this._rotation+this._offsetRotation}}}),n.prototype.reset=function(){e.prototype.reset.call(this),this._rotation=0,this._offsetRotation=0,this.referenceAngle=0,this.rotationTouches=[]},n.prototype.mouseDown=function(t){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},n.prototype.touchStart=function(t){this.rotationTouches.length<2&&2==this.rotationTouches.push(t)&&(this.referenceAngle=this.currentTouchAngle(),this._offsetRotation+=this._rotation,this._rotation=0)},n.prototype.touchMove=function(e){if(2==this.rotationTouches.length)if(this.state==WorldWind.POSSIBLE)this.shouldRecognize()&&(this.state=WorldWind.BEGAN);else if(this.state==WorldWind.BEGAN||this.state==WorldWind.CHANGED){var n=this.currentTouchAngle(),r=t.normalizedDegrees(n-this.referenceAngle),i=this.weight;this._rotation=this._rotation*(1-i)+r*i,this.state=WorldWind.CHANGED}},n.prototype.touchEnd=function(t){var e=this.rotationTouches.indexOf(t);-1!=e&&this.rotationTouches.splice(e,1),0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.ENDED))},n.prototype.touchCancel=function(t){var e=this.rotationTouches.indexOf(t);-1!=e&&(this.rotationTouches.splice(e,1),0==this.touchCount&&(this.state==WorldWind.POSSIBLE?this.state=WorldWind.FAILED:this.state!=WorldWind.BEGAN&&this.state!=WorldWind.CHANGED||(this.state=WorldWind.CANCELLED)))},n.prototype.prepareToRecognize=function(){this.referenceAngle=this.currentTouchAngle(),this._rotation=0},n.prototype.shouldRecognize=function(){var e=this.currentTouchAngle(),n=t.normalizedDegrees(e-this.referenceAngle);return Math.abs(n)>this.interpretThreshold},n.prototype.currentTouchAngle=function(){var e=this.rotationTouches[0],n=this.rotationTouches[1],r=e.clientX-n.clientX,i=e.clientY-n.clientY;return Math.atan2(i,r)*t.RADIANS_TO_DEGREES},n})),i("gesture/TapRecognizer",["../gesture/GestureRecognizer"],(function(t){"use strict";var e=function(e,n){t.call(this,e,n),this.numberOfTaps=1,this.numberOfTouches=1,this.maxTouchMovement=20,this.maxTapDuration=500,this.maxTapInterval=400,this.taps=[],this.timeout=null};return(e.prototype=Object.create(t.prototype)).reset=function(){t.prototype.reset.call(this),this.taps=[],this.cancelFailAfterDelay()},e.prototype.mouseDown=function(t){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},e.prototype.touchStart=function(t){var e;this.state==WorldWind.POSSIBLE&&(this.touchCount>this.numberOfTouches?this.state=WorldWind.FAILED:1==this.touchCount?(e={touchCount:this.touchCount,clientX:this.clientX,clientY:this.clientY},this.taps.push(e),this.failAfterDelay(this.maxTapDuration)):((e=this.taps[this.taps.length-1]).touchCount=this.touchCount,e.clientX=this.clientX,e.clientY=this.clientY))},e.prototype.touchMove=function(t){if(this.state==WorldWind.POSSIBLE){var e=this.translationX,n=this.translationY;Math.sqrt(e*e+n*n)>this.maxTouchMovement&&(this.state=WorldWind.FAILED)}},e.prototype.touchEnd=function(t){if(this.state==WorldWind.POSSIBLE&&0==this.touchCount){var e=this.taps.length;this.taps[e-1].touchCount!=this.numberOfTouches?this.state=WorldWind.FAILED:e==this.numberOfTaps?(this.clientX=this.taps[0].clientX,this.clientY=this.taps[0].clientY,this.state=WorldWind.RECOGNIZED):this.failAfterDelay(this.maxTapInterval)}},e.prototype.touchCancel=function(t){this.state==WorldWind.POSSIBLE&&(this.state=WorldWind.FAILED)},e.prototype.failAfterDelay=function(t){var e=this;e.timeout&&window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){e.timeout=null,e.state==WorldWind.POSSIBLE&&(e.state=WorldWind.FAILED)}),t)},e.prototype.cancelFailAfterDelay=function(){var t=this;t.timeout&&(window.clearTimeout(t.timeout),t.timeout=null)},e})),i("gesture/TiltRecognizer",["../gesture/PanRecognizer"],(function(t){"use strict";var e=function(e,n){t.call(this,e,n),this.maxTouchDistance=250,this.maxTouchDivergence=50};return e.LEFT=1,e.RIGHT=2,e.UP=4,e.DOWN=8,(e.prototype=Object.create(t.prototype)).shouldInterpret=function(){for(var t=0,e=this.touchCount;t<e;t++){var n=this.touch(t),r=n.translationX,i=n.translationY;if(Math.sqrt(r*r+i*i)>this.interpretDistance)return!0}return!1},e.prototype.shouldRecognize=function(){if(this.touchCount<2)return!1;var t=this.touch(0),n=this.touch(1),r=t.clientX-n.clientX,i=t.clientY-n.clientY;if(Math.sqrt(r*r+i*i)>this.maxTouchDistance)return!1;var o=t.translationX-n.translationX,a=t.translationY-n.translationY;if(Math.sqrt(o*o+a*a)>this.maxTouchDivergence)return!1;var s=e.UP|e.DOWN;return 0!=(this.touchDirection(t)&s&this.touchDirection(n)&s)},e.prototype.touchDirection=function(t){var n=t.translationX,r=t.translationY,i=0;return Math.abs(n)>Math.abs(r)?(i|=n<0?e.LEFT:0,i|=n>0?e.RIGHT:0):(i|=r<0?e.UP:0,i|=r>0?e.DOWN:0),i},e})),i("WorldWindowController",["./error/ArgumentError","./util/Logger","./error/UnsupportedOperationError"],(function(t,e,n){"use strict";var r=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WorldWindowController","constructor","missingWorldWindow"));this.wwd=n,this.allGestureListeners=[]};return r.prototype.onGestureEvent=function(t){for(var e=!1,n=0;n<this.allGestureListeners.length&&!e;n++)e|=this.allGestureListeners[n].onGestureEvent(t);return e},r.prototype.gestureStateChanged=function(t){throw new n(e.logMessage(e.LEVEL_SEVERE,"WorldWindowController","gestureStateChanged","abstractInvocation"))},r.prototype.addGestureListener=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WorldWindowController","addGestureListener","missingListener"));this.allGestureListeners.push(n)},r.prototype.removeGestureListener=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WorldWindowController","removeGestureListener","missingListener"));var r=this.allGestureListeners.indexOf(n);-1!==r&&this.allGestureListeners.splice(r,1)},r.prototype.applyLimits=function(){},r})),i("BasicWorldWindowController",["./geom/Angle","./ArcBallCamera","./error/ArgumentError","./gesture/ClickRecognizer","./gesture/DragRecognizer","./gesture/FlingRecognizer","./gesture/GestureRecognizer","./geom/Line","./geom/Location","./util/Logger","./geom/Matrix","./util/measure/MeasurerUtils","./gesture/PanRecognizer","./gesture/PinchRecognizer","./geom/Position","./gesture/RotationRecognizer","./gesture/TapRecognizer","./gesture/TiltRecognizer","./geom/Vec2","./geom/Vec3","./WorldWindowController","./util/WWMath"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_,b){"use strict";var S=function(t){_.call(this,t),this.zoomToMouseEnabled=!0,this.primaryDragRecognizer=new i(this.wwd,null),this.primaryDragRecognizer.addListener(this),this.secondaryDragRecognizer=new i(this.wwd,null),this.secondaryDragRecognizer.addListener(this),this.secondaryDragRecognizer.button=2,this.panRecognizer=new f(this.wwd,null),this.panRecognizer.addListener(this),this.pinchRecognizer=new p(this.wwd,null),this.pinchRecognizer.addListener(this),this.rotationRecognizer=new g(this.wwd,null),this.rotationRecognizer.addListener(this),this.tiltRecognizer=new y(this.wwd,null),this.tiltRecognizer.addListener(this),this.panRecognizer.recognizeSimultaneouslyWith(this.pinchRecognizer),this.panRecognizer.recognizeSimultaneouslyWith(this.rotationRecognizer),this.pinchRecognizer.recognizeSimultaneouslyWith(this.rotationRecognizer),this.panRecognizer.requireRecognizerToFail(this.tiltRecognizer),this.pinchRecognizer.requireRecognizerToFail(this.tiltRecognizer),this.rotationRecognizer.requireRecognizerToFail(this.tiltRecognizer),this.flingRecognizer=new o(this.wwd,null),this.flingRecognizer.addListener(this),this.flingRecognizer.recognizeSimultaneouslyWith(this.primaryDragRecognizer),this.flingRecognizer.recognizeSimultaneouslyWith(this.panRecognizer),this.flingRecognizer.recognizeSimultaneouslyWith(this.pinchRecognizer),this.flingRecognizer.recognizeSimultaneouslyWith(this.rotationRecognizer),this.beginPoint=new v(0,0),this.lastPoint=new v(0,0),this.beginHeading=0,this.beginTilt=0,this.beginRange=0,this.lastRotation=0,this.pointerLocation=null,this.dragDelta=new v(0,0),this.dragLastLocation=new u(0,0),this.flingAnimationId=-1,this.beginIntersectionPoint=new E(0,0,0),this.lastIntersectionPoint=new E(0,0,0),this.beginIntersectionPosition=new d(0,0,0),this.lastIntersectionPosition=new d(0,0,0),this.rotationVector=new E(0,0,0),this.scratchRay=new s(new E(0,0,0),new E(0,0,0)),this.scratchMatrix=c.fromIdentity()};return(S.prototype=Object.create(_.prototype)).onGestureEvent=function(t){var e=_.prototype.onGestureEvent.call(this,t);if(("mousemove"===t.type||"mouse"===t.pointerType&&"pointermove"===t.type)&&(this.pointerLocation=null),!e)if("wheel"===t.type)e=!0,this.handleWheelEvent(t);else for(var n=0,r=a.allRecognizers.length;n<r;n++){var i=a.allRecognizers[n];i.target===this.wwd&&(e|=i.onGestureEvent(t))}return e},S.prototype.gestureStateChanged=function(t){t.state!==WorldWind.BEGAN&&t.state!==WorldWind.RECOGNIZED||this.cancelFlingAnimation();var n=this.wwd.navigator.camera instanceof e;t===this.primaryDragRecognizer||t===this.panRecognizer?n?this.handlePanOrDrag(t):this.handleSecondaryDrag(t):t===this.secondaryDragRecognizer?n&&this.handleSecondaryDrag(t):t===this.pinchRecognizer?this.handlePinch(t):t===this.rotationRecognizer?this.handleRotation(t):t===this.tiltRecognizer?this.handleTilt(t):t===this.flingRecognizer&&this.handleFling(t)},S.prototype.handlePanOrDrag=function(t){this.wwd.globe.is2D()?this.handlePanOrDrag2D(t):this.handlePanOrDrag3D(t)},S.prototype.handlePanOrDrag3D=function(e){var n=this.wwd,r=e.state,i=e.clientX,o=e.clientY;if(r===WorldWind.BEGAN){var a=n.rayThroughScreenPoint(n.canvasCoordinates(i,o));if(!n.globe.intersectsLine(a,this.beginIntersectionPoint))return;n.globe.computePositionFromPoint(this.beginIntersectionPoint[0],this.beginIntersectionPoint[1],this.beginIntersectionPoint[2],this.beginIntersectionPosition),this.beginPoint.set(i,o),this.lastPoint.set(i,o)}else r===WorldWind.CHANGED&&this.move3D(i,o)&&(this.beginPoint.copy(this.lastPoint),this.lastPoint.set(i,o),this.applyLimits(),this.dragDelta.set(this.dragLastLocation.latitude-n.navigator.lookAtLocation.latitude,t.normalizedDegreesLongitude(this.dragLastLocation.longitude-n.navigator.lookAtLocation.longitude)),this.dragLastLocation.copy(n.navigator.lookAtLocation),n.redraw())},S.prototype.move3D=function(t,e){var n=this.wwd,r=n.rayThroughScreenPoint(n.canvasCoordinates(t,e));if(!n.globe.intersectsLine(r,this.lastIntersectionPoint))return!1;if(n.globe.computePositionFromPoint(this.lastIntersectionPoint[0],this.lastIntersectionPoint[1],this.lastIntersectionPoint[2],this.lastIntersectionPosition),this.isSphereRotation(this.lastIntersectionPosition)){var i=this.computeRotationVectorAndAngle(this.beginIntersectionPoint,this.lastIntersectionPoint,this.rotationVector);return this.rotateShpere(this.rotationVector,i,!1)}var o=this.lastIntersectionPosition.latitude-this.beginIntersectionPosition.latitude,a=this.lastIntersectionPosition.longitude-this.beginIntersectionPosition.longitude,s=n.navigator.lookAtLocation;return s.latitude-=o,s.longitude-=a,!0},S.prototype.isSphereRotation=function(t){var e=this.wwd.navigator.lookAtLocation.latitude;return 0!==this.wwd.navigator.heading||Math.abs(e)>75||Math.abs(t.latitude)>75},S.prototype.computeRotationVectorAndAngle=function(e,n,r){var i=h.angleBetweenVectors(e,n)*t.RADIANS_TO_DEGREES;return r.copy(e),r.cross(n),r.normalize(),i},S.prototype.rotateShpere=function(t,e,n){if(!(isFinite(e)&&isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])))return!1;var r=this.wwd,i=r.navigator,o=this.scratchMatrix,a=i.lookAtLocation.altitude,s=i.tilt;if(i.tilt=0,r.computeViewingTransform(null,o),o.multiplyByRotation(t[0],t[1],t[2],e),o.extractEyePoint(this.scratchRay.origin),o.extractForwardVector(this.scratchRay.direction),!r.globe.intersectsLine(this.scratchRay,this.lastIntersectionPoint))return i.tilt=s,!1;var u=o.extractViewingParameters(this.lastIntersectionPoint,i.roll,r.globe,{});return!n&&Math.abs(i.heading)<5&&Math.abs(i.lookAtLocation.latitude<70)&&Math.abs(this.lastIntersectionPosition.latitude)<70?i.heading=Math.round(u.heading):i.heading=u.heading,i.lookAtLocation.copy(u.origin),i.lookAtLocation.altitude=a,i.tilt=s,!0},S.prototype.handlePanOrDrag2D=function(t){var e=t.state,n=t.clientX,r=t.clientY,i=t.translationX,o=t.translationY;this.wwd.navigator,e===WorldWind.BEGAN?(this.beginPoint.set(n,r),this.lastPoint.set(n,r)):e===WorldWind.CHANGED&&this.move2D(i,o)},S.prototype.move2D=function(t,e){var n=this.wwd.navigator,r=this.lastPoint[0],i=this.lastPoint[1],o=this.beginPoint[0]+t,a=this.beginPoint[1]+e;this.lastPoint.set(o,a);var s=this.wwd.globe,u=this.wwd.rayThroughScreenPoint(this.wwd.canvasCoordinates(r,i)),l=new E(0,0,0),h=new E(0,0,0),f=new E(0,0,0);if(s.intersectsLine(u,l)&&(u=this.wwd.rayThroughScreenPoint(this.wwd.canvasCoordinates(o,a)),s.intersectsLine(u,h))){var p=c.fromIdentity();if(this.wwd.computeViewingTransform(null,p),p.multiplyByTranslation(h[0]-l[0],h[1]-l[1],h[2]-l[2]),p.extractEyePoint(u.origin),p.extractForwardVector(u.direction),s.intersectsLine(u,f)){var d=p.extractViewingParameters(f,n.roll,s,{});n.lookAtLocation.copy(d.origin),n.range=d.range,n.heading=d.heading,n.tilt=d.tilt,n.roll=d.roll,this.applyLimits(),this.wwd.redraw(),this.dragDelta.set(r-o,i-a),this.dragLastLocation.copy(n.lookAtLocation)}}},S.prototype.handleFling=function(t){this.wwd.globe.is2D()?this.handleFling2D(t):this.handleFling3D(t)},S.prototype.handleFling2D=function(t){if(t.state===WorldWind.RECOGNIZED){var e=this.wwd.navigator;this.beginPoint.copy(this.lastPoint);var n=new u;n.copy(this.dragLastLocation);var r=new Date,i=this.dragDelta[0],o=this.dragDelta[1],a=i,s=o,l=this;this.flingAnimationId=requestAnimationFrame((function t(){if(l.flingAnimationId=-1,n.equals(e.lookAtLocation)){var u=(new Date-r)/1500;u=u>1?1:u;var c=Math.sin(u*Math.PI/2);a-=i-i*c,s-=o-o*c,l.move2D(a,s),n.copy(e.lookAtLocation),u<1&&(l.flingAnimationId=requestAnimationFrame(t))}}))}},S.prototype.handleFling3D=function(t){if(t.state===WorldWind.RECOGNIZED){var e=this.wwd.navigator,n=new v;n.copy(this.dragDelta);var r=new u;r.copy(this.dragLastLocation);var i=this.wwd,o=0,a=i.rayThroughScreenPoint(i.canvasCoordinates(this.lastPoint[0],this.lastPoint[1]));if(!i.globe.intersectsLine(a,this.lastIntersectionPoint))return;i.globe.computePositionFromPoint(this.lastIntersectionPoint[0],this.lastIntersectionPoint[1],this.lastIntersectionPoint[2],this.lastIntersectionPosition);var s=this.isSphereRotation(this.lastIntersectionPosition);if(s){if(a=i.rayThroughScreenPoint(i.canvasCoordinates(this.beginPoint[0],this.beginPoint[1])),!i.globe.intersectsLine(a,this.beginIntersectionPoint))return;if(o=this.computeRotationVectorAndAngle(this.beginIntersectionPoint,this.lastIntersectionPoint,this.rotationVector),!(isFinite(o)&&isFinite(this.rotationVector[0])&&isFinite(this.rotationVector[1])&&isFinite(this.rotationVector[2])))return}var l=new Date,c=this;this.flingAnimationId=requestAnimationFrame((function t(){if(c.flingAnimationId=-1,r.equals(e.lookAtLocation)){var i=(new Date-l)/1500;i=i>1?1:i;var a=Math.sin(i*Math.PI/2);if(s){var u=o*(1-a);c.rotateShpere(c.rotationVector,u,!0)}else{var h=n[0]-n[0]*a,f=n[1]-n[1]*a;e.lookAtLocation.latitude-=h,e.lookAtLocation.longitude-=f}c.applyLimits(),c.wwd.redraw(),r.copy(e.lookAtLocation),i<1&&(c.flingAnimationId=requestAnimationFrame(t))}}))}},S.prototype.cancelFlingAnimation=function(){-1!==this.flingAnimationId&&(cancelAnimationFrame(this.flingAnimationId),this.flingAnimationId=-1)},S.prototype.handleSecondaryDrag=function(t){var e=t.state,n=t.translationX,r=t.translationY,i=this.wwd.navigator;if(e===WorldWind.BEGAN)this.beginHeading=i.heading,this.beginTilt=i.tilt;else if(e===WorldWind.CHANGED){var o=180*n/this.wwd.canvas.clientWidth,a=90*r/this.wwd.canvas.clientHeight;i.heading=this.beginHeading+o,i.tilt=this.beginTilt+a,this.applyLimits(),this.wwd.redraw()}},S.prototype.handlePinch=function(t){var e=this.wwd.navigator,n=t.state,r=t.scale;if(n===WorldWind.BEGAN)this.beginRange=e.range,this.pointerLocation=null;else if(n===WorldWind.CHANGED&&0!==r){var i=this.beginRange/r,o=i/e.range;this.moveZoom(t.clientX,t.clientY,o),e.range=i,this.applyLimits(),this.wwd.redraw()}},S.prototype.handleRotation=function(t){var e=this.wwd.navigator,n=t.state,r=t.rotation;n===WorldWind.BEGAN?this.lastRotation=0:n===WorldWind.CHANGED&&(e.heading-=r-this.lastRotation,this.lastRotation=r,this.applyLimits(),this.wwd.redraw())},S.prototype.handleTilt=function(t){var e=this.wwd.navigator,n=t.state,r=t.translationY;if(n===WorldWind.BEGAN)this.beginTilt=e.tilt;else if(n===WorldWind.CHANGED){var i=-90*r/this.wwd.canvas.clientHeight;e.tilt=this.beginTilt+i,this.applyLimits(),this.wwd.redraw()}},S.prototype.handleWheelEvent=function(t){this.cancelFlingAnimation();var e,n=this.wwd.navigator;t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?e=t.deltaY:t.deltaMode===WheelEvent.DOM_DELTA_LINE?e=40*t.deltaY:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e=400*t.deltaY);var r=1+e/1e3;this.moveZoom(t.clientX,t.clientY,r),n.range*=r,this.applyLimits(),this.wwd.redraw()},S.prototype.locationAtPickPoint=function(t,e){for(var n=this.wwd.canvasCoordinates(t,e),r=this.wwd.pickTerrain(n),i=0;i<r.objects.length;i++){var o=r.objects[i];if(o.isTerrain){var a=o.position;if(a)return new u(a.latitude,a.longitude)}}},S.prototype.moveZoom=function(t,e,n){if(this.zoomToMouseEnabled&&1!==n&&(this.pointerLocation||(this.pointerLocation=this.locationAtPickPoint(t,e)),this.pointerLocation)){var r,i=this.wwd.navigator.lookAtLocation;if(n<1)r=u.greatCircleDistance(i,this.pointerLocation)*this.wwd.globe.equatorialRadius<=5e4?this.pointerLocation:u.interpolateGreatCircle(n,this.pointerLocation,i,new u(0,0));else{var o=u.interpolateGreatCircle(1/n,this.pointerLocation,i,new u(0,0)),a=u.greatCircleDistance(i,o),s=u.greatCircleAzimuth(i,o);r=u.greatCircleLocation(i,s-180,a,new u(0,0))}i.latitude=r.latitude,i.longitude=r.longitude}},S.prototype.applyLimits=function(){this.wwd.navigator.camera.applyLimits()},S})),i("util/ImageSource",["../error/ArgumentError","../util/Color","../util/Logger"],(function(t,e,n){"use strict";var r=function e(r){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"ImageSource","constructor","missingImage"));this.image=r,this.key="ImageSource "+ ++e.keyPool};return r.keyPool=0,r})),i("shapes/ScreenImage",["../error/ArgumentError","../shaders/BasicTextureProgram","../util/Color","../util/ImageSource","../util/Logger","../geom/Matrix","../util/Offset","../pick/PickedObject","../render/Renderable","../geom/Vec3","../util/WWMath"],(function(t,e,n,r,i,o,a,s,u,l,c){"use strict";var h=function(e,r){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"ScreenImage","constructor","missingOffset"));if(!r)throw new t(i.logMessage(i.LEVEL_SEVERE,"ScreenImage","constructor","missingImage"));u.call(this),this.screenOffset=e,this._imageSource=r,this.imageColor=n.WHITE,this.imageOffset=new a(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,.5),this.imageScale=1,this.imageRotation=0,this.imageTilt=0,this.enabled=!0,this.opacity=1,this.pickDelegate=null,this.activeTexture=null,this.imageTransform=o.fromIdentity(),this.texCoordMatrix=o.fromIdentity(),this.imageBounds=null,this.layer=null};return h.matrix=o.fromIdentity(),h.prototype=Object.create(u.prototype),Object.defineProperties(h.prototype,{imageSource:{get:function(){return this._imageSource},set:function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"ScreenImage","imageSource","missingImage"));this._imageSource=e,this.imageSourceWasUpdated=!0}}}),h.prototype.render=function(t){if(this.enabled&&t.accumulateOrderedRenderables){var e=null;this.lastFrameTime!==t.timestamp&&(e=this.makeOrderedRenderable(t)),e&&e.isVisible(t)&&(e.layer=t.currentLayer,this.lastFrameTime=t.timestamp,t.addOrderedRenderable(e))}},h.prototype.renderOrdered=function(t){if(this.drawOrderedScreenImage(t),t.pickingMode){var e=new s(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);t.resolvePick(e)}},h.prototype.makeOrderedRenderable=function(t){var e,n,r,i,o,a,s;return this.activeTexture=this.getActiveTexture(t),this.activeTexture&&!this.imageSourceWasUpdated||(this.activeTexture=t.gpuResourceCache.retrieveTexture(t.currentGlContext,this._imageSource),this.activeTexture)?(this.eyeDistance=0,e=this.activeTexture.imageWidth,n=this.activeTexture.imageHeight,r=this.imageScale,a=this.imageOffset.offsetForSize(e,n),i=t.viewport.width,o=t.viewport.height,s=this.screenOffset.offsetForSize(i,o),this.imageTransform.setTranslation(s[0]-a[0]*r,s[1]-a[1]*r,0),this.imageTransform.setScale(e*r,n*r,1),this.imageBounds=c.boundingRectForUnitQuad(this.imageTransform),this):null},h.prototype.getActiveTexture=function(t){return t.gpuResourceCache.resourceForKey(this._imageSource)},h.prototype.isVisible=function(t){return t.pickingMode?t.pickRectangle&&this.imageBounds.intersects(t.pickRectangle):this.imageBounds.intersects(t.viewport)},h.prototype.drawOrderedScreenImage=function(t){this.beginDrawing(t);try{this.doDrawOrderedScreenImage(t)}finally{this.endDrawing(t)}},h.prototype.beginDrawing=function(t){var n,r=t.currentGlContext;t.findAndBindProgram(e),n=t.currentProgram,r.bindBuffer(r.ARRAY_BUFFER,t.unitQuadBuffer()),r.vertexAttribPointer(n.vertexTexCoordLocation,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n.vertexPointLocation),r.enableVertexAttribArray(n.vertexTexCoordLocation),n.loadTextureUnit(r,r.TEXTURE0),n.loadModulateColor(r,t.pickingMode),r.disable(r.DEPTH_TEST)},h.prototype.endDrawing=function(t){var e=t.currentGlContext,n=t.currentProgram;e.disableVertexAttribArray(n.vertexPointLocation),e.disableVertexAttribArray(n.vertexTexCoordLocation),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.enable(e.DEPTH_TEST)},h.prototype.doDrawOrderedScreenImage=function(t){var e=t.currentGlContext,n=t.currentProgram;e.bindBuffer(e.ARRAY_BUFFER,t.unitQuadBuffer3()),e.vertexAttribPointer(n.vertexPointLocation,3,e.FLOAT,!1,0,0),h.matrix.copy(t.screenProjection),h.matrix.multiplyMatrix(this.imageTransform),h.matrix.multiplyByTranslation(.5,.5,.5),h.matrix.multiplyByRotation(1,0,0,this.imageTilt),h.matrix.multiplyByRotation(0,0,1,this.imageRotation),h.matrix.multiplyByTranslation(-.5,-.5,0),n.loadModelviewProjection(e,h.matrix),n.loadTextureEnabled(e,!0),t.pickingMode?(this.pickColor=t.uniquePickColor(),n.loadColor(e,this.pickColor),n.loadOpacity(e,1)):(n.loadColor(e,this.imageColor),n.loadOpacity(e,this.opacity*this.layer.opacity)),this.texCoordMatrix.setToIdentity(),this.texCoordMatrix.multiplyByTextureTransform(this.activeTexture),n.loadTextureMatrix(e,this.texCoordMatrix),this.activeTexture.bind(t)&&e.drawArrays(e.TRIANGLE_STRIP,0,4)},h})),i("render/TextureTile",["../error/ArgumentError","../util/Logger","../util/Tile"],(function(t,e,n){"use strict";var r=function(t,e,r,i){n.call(this,t,e,r,i),this.gpuCacheKey=null};return(r.prototype=Object.create(n.prototype)).size=function(){return n.prototype.size.call(this)},r.prototype.bind=function(t){var e=t.gpuResourceCache.resourceForKey(this.gpuCacheKey);return!!e&&e.bind(t)},r.prototype.applyInternalTransform=function(t,e){},r})),i("render/ImageTile",["../error/ArgumentError","../util/Logger","../render/TextureTile","../util/Tile"],(function(t,e,n,r){"use strict";var i=function(r,i,o,a,s){if(!s||s.length<1)throw new t(e.logMessage(e.LEVEL_SEVERE,"ImageTile","constructor","The specified image path is null, undefined or zero length."));n.call(this,r,i,o,a),this.imagePath=s,this.fallbackTile=null,this.gpuCacheKey=s};return(i.prototype=Object.create(n.prototype)).size=function(){return this.__proto__.__proto__.size.call(this)+this.imagePath.length+8},i.prototype.bind=function(t){return!!this.__proto__.__proto__.bind.call(this,t)||!!this.fallbackTile&&this.fallbackTile.bind(t)},i.prototype.applyInternalTransform=function(t,e){this.fallbackTile&&!t.gpuResourceCache.resourceForKey(this.imagePath)&&this.applyFallbackTransform(e)},i.prototype.applyFallbackTransform=function(t){if(!(this.level.levelNumber-this.fallbackTile.level.levelNumber<=0)){var e=this.fallbackTile.sector.deltaLatitude(),n=this.fallbackTile.sector.deltaLongitude(),r=this.sector.deltaLongitude()/n,i=this.sector.deltaLatitude()/e,o=(this.sector.minLongitude-this.fallbackTile.sector.minLongitude)/n,a=(this.sector.minLatitude-this.fallbackTile.sector.minLatitude)/e;t.multiply(r,0,0,o,0,i,0,a,0,0,1,0,0,0,0,1)}},i})),i("layer/TiledImageLayer",["../util/AbsentResourceList","../error/ArgumentError","../render/ImageTile","../layer/Layer","../util/LevelSet","../util/Logger","../geom/Matrix","../cache/MemoryCache","../render/Texture","../util/Tile","../util/WWUtil"],(function(t,e,n,r,i,o,a,s,u,l,c){"use strict";var h=function(n,u,l,c,h,f,p){if(!n)throw new e(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","constructor","missingSector"));if(!u)throw new e(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","constructor","The specified level-zero delta is null or undefined."));if(!c)throw new e(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","constructor","The specified image format is null or undefined."));if(!h)throw new e(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","constructor","The specified cache path is null or undefined."));if(!l||l<1)throw new e(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","constructor","The specified number of levels is less than one."));if(!f||!p||f<1||p<1)throw new e(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","constructor","The specified tile width or height is less than one."));r.call(this,"Tiled Image Layer"),this.retrievalImageFormat=c,this.cachePath=h,this.retrievalQueueSize=WorldWind.configuration.layerRetrievalQueueSize,this.levels=new i(n,u,l,f,p),this.detailControl=1.75,this.crossOrigin="anonymous",this.expiration=null,this.currentTiles=[],this.currentTilesInvalid=!0,this.tileCache=new s(5e5,4e5),this.currentRetrievals=[],this.absentResourceList=new t(3,5e4),this.pickEnabled=!1,this.lasTtMVP=a.fromIdentity()};return(h.prototype=Object.create(r.prototype)).refresh=function(){this.expiration=new Date,this.currentTilesInvalid=!0},h.prototype.prePopulate=function(t){if(!t)throw new e(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","prePopulate","missingWorldWindow"));var n=t.drawContext;this.topLevelTiles&&0!==this.topLevelTiles.length||this.createTopLevelTiles(n);for(var r=0;r<this.topLevelTiles.length;r++){var i=this.topLevelTiles[r];this.isTileTextureInMemory(n,i)||this.retrieveTileImage(n,i,!0)}},h.prototype.prePopulateCurrentTiles=function(t){if(!t)throw new e(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","prePopulate","missingWorldWindow"));var n=t.drawContext;this.assembleTiles(n);for(var r=0,i=this.currentTiles.length;r<i;r++){var a=this.currentTiles[r];this.isTileTextureInMemory(n,a)||this.retrieveTileImage(n,a,!0)}},h.prototype.isPrePopulated=function(t){if(!t)throw new e(o.logMessage(o.LEVEL_SEVERE,"TiledImageLayer","isPrePopulated","missingWorldWindow"));for(var n=0;n<this.topLevelTiles.length;n++)if(!this.isTileTextureInMemory(t.drawContext,this.topLevelTiles[n]))return!1;return!0},h.prototype.createTile=function(t,e,r,i){var o=this.cachePath+"-layer/"+e.levelNumber+"/"+r+"/"+r+"_"+i+"."+c.suffixForMimeType(this.retrievalImageFormat);return new n(t,e,r,i,o)},h.prototype.doRender=function(t){if(t.terrain){if(this.currentTilesInvalid||!t.modelviewProjection.equals(this.lasTtMVP)||t.globeStateKey!==this.lastGlobeStateKey)if(this.currentTilesInvalid=!1,t.surfaceOpacity>=1&&this.opacity>=1){this.previousTiles={};for(var e=0;e<this.currentTiles.length;e++)this.previousTiles[this.currentTiles[e].imagePath]=this.currentTiles[e];this.assembleTiles(t),this.fadeOutgoingTiles(t)}else this.assembleTiles(t);this.lasTtMVP.copy(t.modelviewProjection),this.lastGlobeStateKey=t.globeStateKey,this.currentTiles.length>0&&(t.surfaceTileRenderer.renderTiles(t,this.currentTiles,this.opacity,t.surfaceOpacity>=1),t.frameStatistics.incrementImageTileCount(this.currentTiles.length),this.inCurrentFrame=!0)}},h.prototype.fadeOutgoingTiles=function(t){for(var e=(t.timestamp-t.previousRedrawTimestamp)/t.fadeTime,n={},r=0;r<this.currentTiles.length;r++){var i=this.currentTiles[r];n[i.imagePath]=i}for(var o in this.previousTiles)this.previousTiles.hasOwnProperty(o)&&(i=this.previousTiles[o]).opacity>0&&!n[i.imagePath]&&(i.opacity=Math.max(0,i.opacity-e),i.opacity>0&&(this.currentTiles.push(i),this.currentTilesInvalid=!0,t.redrawRequested=!0))},h.prototype.isLayerInView=function(t){return t.terrain&&t.terrain.sector&&t.terrain.sector.intersects(this.levels.sector)},h.prototype.createTopLevelTiles=function(t){this.topLevelTiles=[],l.createTilesForLevel(this.levels.firstLevel(),this,this.topLevelTiles)},h.prototype.assembleTiles=function(t){this.currentTiles=[],this.topLevelTiles&&0!==this.topLevelTiles.length||this.createTopLevelTiles(t);for(var e=0,n=this.topLevelTiles.length;e<n;e++){var r=this.topLevelTiles[e];r.update(t),this.currentAncestorTile=null,this.isTileVisible(t,r)&&this.addTileOrDescendants(t,r)}},h.prototype.addTileOrDescendants=function(t,e){if(this.tileMeetsRenderingCriteria(t,e))this.addTile(t,e);else{var n=null;try{(this.isTileTextureInMemory(t,e)||0===e.level.levelNumber)&&(n=this.currentAncestorTile,this.currentAncestorTile=e);for(var r=this.levels.level(e.level.levelNumber+1),i=e.subdivideToCache(r,this,this.tileCache),o=0,a=i.length;o<a;o++){var s=i[o];s.update(t),this.levels.sector.intersects(s.sector)&&this.isTileVisible(t,s)&&this.addTileOrDescendants(t,s)}}finally{n&&(this.currentAncestorTile=n)}}},h.prototype.addTile=function(t,e){e.fallbackTile=null;var n=t.gpuResourceCache.resourceForKey(e.imagePath);return n?(e.opacity=1,this.currentTiles.push(e),void(this.expiration&&this.isTextureExpired(n)&&this.retrieveTileImage(t,e))):(this.retrieveTileImage(t,e),void(this.currentAncestorTile&&this.isTileTextureInMemory(t,this.currentAncestorTile)&&(e.fallbackTile=this.currentAncestorTile,e.fallbackTile.opacity=1,this.currentTiles.push(e))))},h.prototype.isTileVisible=function(t,e){return!(t.globe.projectionLimits&&!e.sector.overlaps(t.globe.projectionLimits))&&e.extent.intersectsFrustum(t.frustumInModelCoordinates)},h.prototype.tileMeetsRenderingCriteria=function(t,e){var n=this.detailControl;return(e.sector.minLatitude>=75||e.sector.maxLatitude<=-75)&&(n*=1.2),e.level.isLastLevel()||!e.mustSubdivide(t,n)},h.prototype.isTileTextureInMemory=function(t,e){return t.gpuResourceCache.containsResource(e.imagePath)},h.prototype.isTextureExpired=function(t){return this.expiration&&t.creationTime.getTime()<=this.expiration.getTime()},h.prototype.retrieveTileImage=function(t,e,n){if(this.currentRetrievals.indexOf(e.imagePath)<0){if(this.currentRetrievals.length>this.retrievalQueueSize)return;if(this.absentResourceList.isResourceAbsent(e.imagePath))return;var r=this.resourceUrlForTile(e,this.retrievalImageFormat),i=new Image,a=e.imagePath,s=t.gpuResourceCache,u=t.currentGlContext.canvas,l=this;if(!r)return void(this.currentTilesInvalid=!0);i.onload=function(){o.log(o.LEVEL_INFO,"Image retrieval succeeded: "+r);var c=l.createTexture(t,e,i);if(l.removeFromCurrentRetrievals(a),c&&(s.putResource(a,c,c.size),l.currentTilesInvalid=!0,l.absentResourceList.unmarkResourceAbsent(a),!n)){var h=document.createEvent("Event");h.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),u.dispatchEvent(h)}},i.onerror=function(){l.removeFromCurrentRetrievals(a),l.absentResourceList.markResourceAbsent(a),o.log(o.LEVEL_WARNING,"Image retrieval failed: "+r)},this.currentRetrievals.push(a),i.crossOrigin=this.crossOrigin,i.src=r}},h.prototype.createTexture=function(t,e,n){return new u(t.currentGlContext,n)},h.prototype.removeFromCurrentRetrievals=function(t){var e=this.currentRetrievals.indexOf(t);e>-1&&this.currentRetrievals.splice(e,1)},h.prototype.resourceUrlForTile=function(t,e){return this.urlBuilder?this.urlBuilder.urlForTile(t,e):null},h})),i("layer/MercatorTiledImageLayer",["../util/Color","../geom/Sector","../layer/TiledImageLayer","../geom/Vec2","../util/WWMath"],(function(t,e,n,r,i){"use strict";var o=function(t,e,i,o,a,s,u){n.call(this,t,e,i,o,a,s,u),this.detectBlankImages=!1,this.testPixels=[new r(20,20),new r(235,20),new r(20,235),new r(235,235)],this.destCanvas=document.createElement("canvas"),this.destContext=this.destCanvas.getContext("2d")};return(o.prototype=Object.create(n.prototype)).createTile=function(t,r,o,a){var s,u,l,c,h,f=this.mapSizeForLevel(r.levelNumber),p=i.clamp(a*this.imageSize,0,f),d=i.clamp(o*this.imageSize,0,f),g=i.clamp(p+this.imageSize,0,f);return s=p/f-.5,u=.5-i.clamp(d+this.imageSize,0,f)/f,l=90-360*Math.atan(Math.exp(2*-u*Math.PI))/Math.PI,c=360*s,s=g/f-.5,u=.5-d/f,h=90-360*Math.atan(Math.exp(2*-u*Math.PI))/Math.PI,t=new e(l,h,c,360*s),n.prototype.createTile.call(this,t,r,o,a)},o.prototype.createTexture=function(t,e,r){var o,a,s,u,l,c,h=t.canvas2D,f=t.ctx2D,p=this.destCanvas,d=this.destContext,g=d.createImageData(r.width,r.height),m=e.sector,y=i.gudermannianInverse(m.minLatitude),v=i.gudermannianInverse(m.maxLatitude);if(h.width=r.width,h.height=r.height,p.width=r.width,p.height=r.height,f.drawImage(r,0,0,r.width,r.height),o=f.getImageData(0,0,r.width,r.height),this.detectBlankImages&&this.isBlankImage(r,o))return this.absentResourceList.markResourceAbsentPermanently(e.imagePath),null;for(var E=0;E<1;E++)for(var _=0;_<r.height;_++){a=(1-_/(r.height-1))*m.deltaLatitude()+m.minLatitude,c=1-(i.gudermannianInverse(a)-y)/(v-y),c=i.clamp(c,0,1),s=Math.floor(c*(r.height-1));for(var b=0;b<r.width;b++)u=4*(b+s*r.width),l=4*(b+_*r.width),g.data[l]=o.data[u],g.data[l+1]=o.data[u+1],g.data[l+2]=o.data[u+2],g.data[l+3]=o.data[u+3]}return d.putImageData(g,0,0),n.prototype.createTexture.call(this,t,e,p)},o.prototype.isBlankImage=function(t,e){for(var n,r,i=null,o=0,a=this.testPixels.length;o<a;o++)if(r=4*((n=this.testPixels[o])[0]+n[1]*t.width),i){if(e.data[r]!=i[0]||e.data[r+1]!=i[1]||e.data[r+2]!=i[2])return!1}else i=[e.data[r],e.data[r+1],e.data[r+2]];return!0},o})),i("layer/BingTiledImageLayer",["../geom/Angle","../util/Color","../geom/Location","../util/Offset","../shapes/ScreenImage","../geom/Sector","../layer/MercatorTiledImageLayer"],(function(t,e,n,r,i,o,a){"use strict";var s=function(t){this.imageSize=256,a.call(this,new o(-85.05,85.05,-180,180),new n(85.05,180),23,"image/jpeg",t,this.imageSize,this.imageSize),this.displayName=t,this.pickEnabled=!0,this.detectBlankImages=!0};return s.logoImage=null,s.logoLastFrameTime=0,(s.prototype=Object.create(a.prototype)).doRender=function(t){a.prototype.doRender.call(this,t),this.inCurrentFrame&&this.renderLogo(t)},s.prototype.createTopLevelTiles=function(t){this.topLevelTiles=[],this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),0,0)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),0,1)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),1,0)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),1,1))},s.prototype.renderLogo=function(t){s.logoImage||((s.logoImage=new i(WorldWind.configuration.bingLogoPlacement,WorldWind.configuration.baseUrl+"images/powered-by-bing.png")).imageColor=new e(1,1,1,.5)),s.logoLastFrameTime!==t.timestamp&&(s.logoImage.screenOffset=WorldWind.configuration.bingLogoPlacement,s.logoImage.imageOffset=WorldWind.configuration.bingLogoAlignment,s.logoImage.render(t),s.logoLastFrameTime=t.timestamp)},s.prototype.mapSizeForLevel=function(t){return 256<<t+1},s})),i("util/BingImageryUrlBuilder",["../error/ArgumentError","../util/Logger","../util/WWUtil"],(function(t,e,n){"use strict";var r=function t(e,n){var r="AkttWCS8p6qzxvx5RH3qUcCPgwG9nRJ7IwlpFGb14B0rBorB5DvmXr2Y_eCUNIxH";this.bingMapsKey=n,this.bingMapsKey||(this.bingMapsKey=WorldWind.BingMapsKey),this.bingMapsKey||(this.bingMapsKey=r),this.bingMapsKey===r&&t.showBingMapsKeyWarning(),this.imagerySet=e};return r.showBingMapsKeyWarning=function(){r.keyMessagePrinted||(r.keyMessagePrinted=!0,e.log(e.LEVEL_WARNING,"WARNING: You are using a limited use, non-production Bing Maps key.\nIf you are developing an app or a web page this violates the Bing Terms of Use.\nPlease visit https://www.microsoft.com/en-us/maps/create-a-bing-maps-key to obtain your own key for your application.\nSpecify that key to WorldWind by setting the WorldWind.BingMapsKey property to your key prior to creating any Bing Maps layers.\n"))},r.prototype.requestMetadata=function(){if(!this.metadataRetrievalInProcess){this.metadataRetrievalInProcess=!0;var t="https://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+this.imagerySet+"/0,0?zl=1&uriScheme=https&key="+this.bingMapsKey,e=this;n.jsonp(t,"jsonp",(function(t){e.imageUrl=t.resourceSets[0].resources[0].imageUrl;var n=document.createEvent("Event");n.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(n),e.metadataRetrievalInProcess=!1}))}},r.prototype.urlForTile=function(n,r){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"BingImageryUrlBuilder","urlForTile","missingTile"));if(!this.imageUrl)return this.requestMetadata(),null;var i,o=this.quadKeyFromLevelRowColumn(n.level.levelNumber,n.row,n.column);return"Aerial"===this.imagerySet?i=this.imageUrl.replace(/a3/,"a"+o):"AerialWithLabels"===this.imagerySet?i=this.imageUrl.replace(/h3/,"h"+o):"Road"===this.imagerySet&&(i=this.imageUrl.replace(/r3/,"r"+o)),i},r.prototype.quadKeyFromLevelRowColumn=function(t,e,n){for(var r,i,o="",a=t+1;a>0;a--)r=0,0!=(n&(i=1<<a-1))&&(r+=1),0!=(e&i)&&(r+=2),o+=r.toString();return o},r})),i("layer/BingAerialLayer",["../geom/Location","../geom/Sector","../layer/BingTiledImageLayer","../util/BingImageryUrlBuilder"],(function(t,e,n,r){"use strict";var i=function(t){n.call(this,"Bing Aerial"),this.urlBuilder=new r("Aerial",t)};return i.prototype=Object.create(n.prototype),i})),i("layer/BingAerialWithLabelsLayer",["../geom/Location","../geom/Sector","../layer/BingTiledImageLayer","../util/BingImageryUrlBuilder"],(function(t,e,n,r){"use strict";var i=function(t){n.call(this,"Bing Aerial with Labels"),this.urlBuilder=new r("AerialWithLabels",t)};return i.prototype=Object.create(n.prototype),i})),i("layer/BingRoadsLayer",["../geom/Location","../geom/Sector","../layer/BingTiledImageLayer","../util/BingImageryUrlBuilder"],(function(t,e,n,r){"use strict";var i=function(t){n.call(this,"Bing Roads"),this.urlBuilder=new r("Road",t),this.detectBlankImages=!1};return i.prototype=Object.create(n.prototype),i})),i("layer/BingWMSLayer",["../geom/Location","../geom/Sector","../layer/TiledImageLayer","../util/WmsUrlBuilder"],(function(t,e,n,r){"use strict";var i=function(){n.call(this,e.FULL_SPHERE,new t(45,45),16,"image/png","BingWMS",256,256),this.displayName="Bing WMS",this.pickEnabled=!1,this.maxActiveAltitude=1e4,this.urlBuilder=new r("https://worldwind27.arc.nasa.gov/wms/virtualearth","ve","","1.3.0")};return i.prototype=Object.create(n.prototype),i})),i("layer/BMNGLandsatLayer",["../geom/Location","../geom/Sector","../layer/TiledImageLayer","../util/WmsUrlBuilder"],(function(t,e,n,r){"use strict";var i=function(){n.call(this,e.FULL_SPHERE,new t(45,45),12,"image/jpeg","BMNGLandsat256",256,256),this.displayName="Blue Marble & Landsat",this.pickEnabled=!1,this.urlBuilder=new r("https://worldwind25.arc.nasa.gov/wms","BlueMarble-200405,esat","","1.3.0")};return i.prototype=Object.create(n.prototype),i})),i("layer/BMNGLayer",["../geom/Location","../geom/Sector","../layer/TiledImageLayer","../util/WmsUrlBuilder"],(function(t,e,n,r){"use strict";var i=function(i){n.call(this,e.FULL_SPHERE,new t(45,45),7,"image/jpeg",i||"BMNG256",256,256),this.displayName="Blue Marble",this.pickEnabled=!1,this.urlBuilder=new r("https://worldwind25.arc.nasa.gov/wms",i||"BlueMarble-200405","","1.3.0")};return i.prototype=Object.create(n.prototype),i})),i("layer/RenderableLayer",["../error/ArgumentError","../layer/Layer","../util/Logger"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t),this.renderables=[],this.timeRange=[]};return(r.prototype=Object.create(e.prototype)).addRenderable=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"RenderableLayer","addRenderable","missingRenderable"));this.renderables.push(e)},r.prototype.addRenderables=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"RenderableLayer","addRenderables","The renderables array is null or undefined."));for(var r=0,i=e.length;r<i;r++)this.addRenderable(e[r])},r.prototype.removeRenderable=function(t){var e=this.renderables.indexOf(t);e>=0&&this.renderables.splice(e,1)},r.prototype.removeAllRenderables=function(){this.renderables=[]},r.prototype.doRender=function(t){for(var e=t.orderedRenderables.length,r=0,i=this.renderables.length;r<i;r++)try{var o=this.renderables[r].enabled;this.renderables[r].enabled=this.solveTimeVisibility(t,this.renderables[r]),this.renderables[r].render(t),this.renderables[r].enabled=o}catch(t){n.logMessage(n.LEVEL_SEVERE,"RenderableLayer","doRender","Error while rendering shape "+this.renderables[r].displayName+".\n"+t.toString())}t.orderedRenderables.length>e&&(this.inCurrentFrame=!0)},r.prototype.solveTimeVisibility=function(t,e){var n=t.currentLayer.timeRange;if(e.timeRange.length>=2&&n.length>=2){var r=e.timeRange[0],i=e.timeRange[1],o=n[0],a=n[1];if(r<o||i>a)return!1}return e.enabled},r})),i("render/SurfaceTile",["../error/ArgumentError","../util/Logger","../geom/Matrix","../geom/Sector","../error/UnsupportedOperationError"],(function(t,e,n,r,i){"use strict";var o=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfaceTile","constructor","missingSector"));this.sector=n};return o.prototype.bind=function(t){throw new i(e.logMessage(e.LEVEL_SEVERE,"SurfaceTile","bind","abstractInvocation"))},o.prototype.applyInternalTransform=function(t,n){throw new i(e.logMessage(e.LEVEL_SEVERE,"SurfaceTile","applyInternalTransform","abstractInvocation"))},o})),i("shapes/SurfaceImage",["../error/ArgumentError","../util/Logger","../pick/PickedObject","../render/SurfaceTile"],(function(t,e,n,r){"use strict";var i=function(n,i){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfaceImage","constructor","missingSector"));if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfaceImage","constructor","missingImage"));r.call(this,n),this.enabled=!0,this._imageSource=i,this.resamplingMode=WorldWind.FILTER_LINEAR,this.opacity=1,this.displayName="Surface Image",this.imageSourceWasUpdated=!0};return i.prototype=Object.create(r.prototype),Object.defineProperties(i.prototype,{imageSource:{get:function(){return this._imageSource},set:function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfaceImage","imageSource","missingImage"));this._imageSource=n,this.imageSourceWasUpdated=!0}}}),i.prototype.bind=function(t){var e=t.gpuResourceCache.resourceForKey(this._imageSource);return e&&!this.imageSourceWasUpdated?this.bindTexture(t,e):(e=t.gpuResourceCache.retrieveTexture(t.currentGlContext,this._imageSource),this.imageSourceWasUpdated=!1,e?this.bindTexture(t,e):void 0)},i.prototype.bindTexture=function(t,e){var n=t.currentGlContext;return e.setTexParameter(n.TEXTURE_MAG_FILTER,this.resamplingMode===WorldWind.FILTER_NEAREST?n.NEAREST:n.LINEAR),e.bind(t)},i.prototype.applyInternalTransform=function(t,e){},i.prototype.render=function(t){if(this.enabled&&t.terrain&&this.sector.overlaps(t.terrain.sector)){if(t.pickingMode&&(this.pickColor=t.uniquePickColor()),t.surfaceTileRenderer.renderTiles(t,[this],this.opacity*t.currentLayer.opacity),t.pickingMode){var e=new n(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);t.resolvePick(e)}t.currentLayer.inCurrentFrame=!0}},i})),i("layer/BMNGOneImageLayer",["../layer/RenderableLayer","../geom/Sector","../shapes/SurfaceImage","../util/WWUtil"],(function(t,e,n,r){"use strict";var i=function(){t.call(this,"Blue Marble Image");var r=new n(e.FULL_SPHERE,WorldWind.configuration.baseUrl+"images/BMNG_world.topo.bathy.200405.3.2048x1024.jpg");this.addRenderable(r),this.pickEnabled=!1,this.minActiveAltitude=3e6};return i.prototype=Object.create(t.prototype),i})),i("util/PeriodicTimeSequence",["../error/ArgumentError","../util/Logger"],(function(t,e){"use strict";var n=function n(r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"PeriodicTimeSequence","constructor","missingString"));var i=r.split("/");if(3!==i.length)throw new t(e.logMessage(e.LEVEL_SEVERE,"PeriodicTimeSequence","constructor","The interval string "+r+" does not contain 3 elements."));this.sequenceString=r,this.startTime=new Date(i[0]),this.endTime=new Date(i[1]),this.intervalMilliseconds=this.endTime.getTime()-this.startTime.getTime(),this._currentTime=this.startTime,this.infiniteInterval=this.startTime.getTime()==this.endTime.getTime(),this.period=n.parsePeriodString(i[2],!1)};return Object.defineProperties(n.prototype,{currentTime:{get:function(){return this._currentTime},set:function(t){this._currentTime=t}},scaleForCurrentTime:{get:function(){return this.currentTime?(this.currentTime.getTime()-this.startTime.getTime())/this.intervalMilliseconds:1}}}),n.prototype.next=function(){return this.currentTime?this.currentTime.getTime()>=this.endTime.getTime()&&!this.infiniteInterval?this.currentTime=null:this.currentTime=n.incrementTime(this.currentTime,this.period):this.currentTime=this.startTime,this.currentTime},n.prototype.previous=function(){return this.currentTime?this.currentTime.getTime()===this.startTime.getTime()?this.currentTime=null:this.currentTime=this.getTimeForScale(.9999*this.scaleForCurrentTime):this.currentTime=this.endTime,this.currentTime},n.prototype.reset=function(){this.currentTime=null},n.prototype.getTimeForScale=function(t){if(t<=0)return this.startTime;if(t>=1)return this.endTime;var e=new Date(this.startTime.getTime()),r=e,i=0;for(i=0;i<t;i=(e.getTime()-this.startTime.getTime())/this.intervalMilliseconds)r=e,e=n.incrementTime(e,this.period);return r},n.incrementTime=function(t,e){var r=new Date(t.getTime());return 0!=e[0]&&r.setUTCFullYear(r.getUTCFullYear()+e[0]),0!=e[1]&&n.addMonths(r,e[1]),0!=e[2]&&r.setUTCDate(r.getUTCDate()+7*e[2]),0!=e[3]&&r.setUTCDate(r.getUTCDate()+e[3]),0!=e[4]&&r.setUTCHours(r.getUTCHours()+e[4]),0!=e[5]&&r.setUTCMinutes(r.getUTCMinutes()+e[5]),0!=e[6]&&r.setUTCSeconds(r.getUTCSeconds()+e[6]),r},n.isLeapYear=function(t){return t%4===0&&t%100!==0||t%400===0},n.getDaysInMonth=function(t,e){return[31,n.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},n.addMonths=function(t,e){var r=t.getUTCDate();return t.setUTCDate(1),t.setUTCMonth(t.getUTCMonth()+e),t.setUTCDate(Math.min(r,n.getDaysInMonth(t.getUTCFullYear(),t.getUTCMonth()))),t},n.parsePeriodString=function(n,r){var i,o=!!r&&r,a=[2,3,4,5,7,8,9],s=[0,0,0,0,0,0,0],u=[0,12,4,7,24,60,60];if(!(n=n.toUpperCase().trim()))return s;if("string"!=typeof n)throw new t(e.logMessage(e.LEVEL_SEVERE,"PeriodicTimeSequence","parsePeriodString","Invalid ISO8601 period string '"+n+"'"));if(!(i=/^P((\d+Y)?(\d+M)?(\d+W)?(\d+D)?)?(T(\d+H)?(\d+M)?(\d+S)?)?$/.exec(n)))throw new t(e.logMessage(e.LEVEL_SEVERE,"PeriodicTimeSequence","parsePeriodString","String '"+n+"' is not a valid ISO8601 period."));for(var l=0;l<a.length;l++){var c=a[l];s[l]=i[c]?+i[c].replace(/[A-Za-z]+/g,""):0}if(o)for(l=s.length-1;l>0;l--)s[l]>=u[l]&&(s[l-1]=s[l-1]+Math.floor(s[l]/u[l]),s[l]=s[l]%u[l]);return s},n})),i("util/LevelRowColumnUrlBuilder",["../error/ArgumentError","../util/Logger","../util/WWUtil"],(function(t,e,n){"use strict";var r=function(t,e){this.serverAddress=t,t&&0!==t.length||(this.serverAddress=n.currentUrlSansFilePart()),this.pathToData=e};return r.prototype.urlForTile=function(r,i){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsUrlBuilder","urlForTile","missingTile"));if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsUrlBuilder","urlForTile","The image format is null or undefined."));var o=this.serverAddress;return this.pathToData&&(o=o+"/"+this.pathToData),(o=(o=(o=(o=o+"/"+r.level.levelNumber.toString())+"/"+r.row.toString())+"/"+r.row.toString()+"_"+r.column.toString())+"."+n.suffixForMimeType(i)).replace(" ","%20")},r})),i("layer/RestTiledImageLayer",["../error/ArgumentError","../geom/Location","../util/Logger","../geom/Sector","../layer/TiledImageLayer","../util/LevelRowColumnUrlBuilder","../util/WWUtil"],(function(t,e,n,r,i,o,a){"use strict";var s=function(t,n,s,u){var l=a.urlPath(t+"/"+n);i.call(this,u&&u.sector||r.FULL_SPHERE,u&&u.levelZeroTileDelta||new e(45,45),u&&u.numLevels||5,u&&u.imageFormat||"image/jpeg",l,u&&u.tileWidth||256,u&&u.tileHeight||256),this.displayName=s,this.pickEnabled=!1,this.urlBuilder=new o(t,n)};return s.prototype=Object.create(i.prototype),s})),i("layer/BMNGRestLayer",["../error/ArgumentError","../layer/Layer","../util/Logger","../util/PeriodicTimeSequence","../layer/RestTiledImageLayer"],(function(t,e,n,r,i){"use strict";var o=function t(n,i,o,a){e.call(this,o||"Blue Marble time series"),this.time=a||new Date("2004-01"),this.timeSequence=new r("2004-01-01/2004-12-01/P1M"),this.serverAddress=n,this.pathToData=i,this.layers={},this.layerNames=[{month:"BlueMarble-200401",time:t.availableTimes[0]},{month:"BlueMarble-200402",time:t.availableTimes[1]},{month:"BlueMarble-200403",time:t.availableTimes[2]},{month:"BlueMarble-200404",time:t.availableTimes[3]},{month:"BlueMarble-200405",time:t.availableTimes[4]},{month:"BlueMarble-200406",time:t.availableTimes[5]},{month:"BlueMarble-200407",time:t.availableTimes[6]},{month:"BlueMarble-200408",time:t.availableTimes[7]},{month:"BlueMarble-200409",time:t.availableTimes[8]},{month:"BlueMarble-200410",time:t.availableTimes[9]},{month:"BlueMarble-200411",time:t.availableTimes[10]},{month:"BlueMarble-200412",time:t.availableTimes[11]}],this.pickEnabled=!1};return o.prototype=Object.create(e.prototype),o.availableTimes=[new Date("2004-01"),new Date("2004-02"),new Date("2004-03"),new Date("2004-04"),new Date("2004-05"),new Date("2004-06"),new Date("2004-07"),new Date("2004-08"),new Date("2004-09"),new Date("2004-10"),new Date("2004-11"),new Date("2004-12")],o.prototype.prePopulate=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"BMNGRestLayer","prePopulate","missingWorldWindow"));for(var r=0;r<this.layerNames.length;r++){var i=this.layerNames[r].month;this.layers[i]||this.createSubLayer(i),this.layers[i].prePopulate(e)}},o.prototype.isPrePopulated=function(t){for(var e=0;e<this.layerNames.length;e++){var n=this.layers[this.layerNames[e].month];if(!n||!n.isPrePopulated(t))return!1}return!0},o.prototype.doRender=function(t){var e=this.nearestLayer(this.time);e.opacity=this.opacity,this.detailControl&&(e.detailControl=this.detailControl),e.doRender(t),this.inCurrentFrame=e.inCurrentFrame},o.prototype.nearestLayer=function(t){var e=this.nearestLayerName(t);return this.layers[e]||this.createSubLayer(e),this.layers[e]},o.prototype.createSubLayer=function(t){var e;e=this.pathToData?this.pathToData+"/"+t:t,this.layers[t]=new i(this.serverAddress,e,this.displayName)},o.prototype.nearestLayerName=function(t){var e=t.getTime();if(e<=this.layerNames[0].time.getTime())return this.layerNames[0].month;if(e>=this.layerNames[11].time.getTime())return this.layerNames[11].month;for(var n=0;n<this.layerNames.length-1;n++){var r=this.layerNames[n].time.getTime(),i=this.layerNames[n+1].time.getTime();if(e>=r&&e<=i)return e-r<i-e?this.layerNames[n].month:this.layerNames[n+1].month}},o})),i("formats/collada/ColladaAsset",[],(function(){"use strict";var t=function(t){this.xmlAsset=t.getElementsByTagName("asset")[0],this.asset={daeVersion:t.querySelector("COLLADA").getAttribute("version")}};return t.prototype.parse=function(){if(!this.xmlAsset)return null;for(var t=0;t<this.xmlAsset.childNodes.length;t++){var e=this.xmlAsset.childNodes.item(t);if(1===e.nodeType)switch(e.nodeName){case"contributor":var n=e.querySelector("authoring_tool");n&&(this.asset.authoring_tool=n.textContext);break;case"unit":this.asset.unit=e.getAttribute("meter");break;default:this.asset[e.localName]=e.textContent}}return this.xmlAsset=null,this.asset},t})),i("formats/collada/ColladaUtils",["../../util/Logger"],(function(t){"use strict";return{getRawValues:function(t){if(!t)return null;var e=t.textContent;return 0===(e=(e=(e=e.replace(/\n/gi," ")).replace(/\s+/gi," ")).trim()).length?null:e.split(" ")},bufferDataFloat32:function(t){var e=this.getRawValues(t);if(!e)return null;for(var n=e.length,r=new Float32Array(n),i=0;i<n;i++)r[i]=parseFloat(e[i]);return r},bufferDataUInt32:function(t){var e=this.getRawValues(t);if(!e)return null;for(var n=e.length,r=new Uint32Array(n),i=0;i<n;i++)r[i]=parseInt(e[i]);return r},getFirstChildElement:function(t,e){for(var n=t.childNodes,r=0;r<n.length;++r){var i=n.item(r);if(1===i.nodeType&&(i.nodeName&&!e||e&&e===i.nodeName))return i}return null},getFilename:function(t){var e=t.lastIndexOf("\\");return-1!==e&&(t=t.substr(e+1)),-1!==(e=t.lastIndexOf("/"))&&(t=t.substr(e+1)),t},replaceSpace:function(t){return t?t.replace(/ /g,"_"):""},querySelectorById:function(t,e){for(var n=0;n<t.length;n++){var r=t.item(n).getAttribute("id");if(r&&r.toString()===e)return t.item(n)}return null},getTextureType:function(t){for(var e=!0,n=0,r=t.length;n<r;n++)if(t[n]<0||t[n]>1){e=!1;break}return e},fetchFile:function(e,n){var r=new XMLHttpRequest;r.onload=function(){this.status>=200&&this.status<400||0===this.status?n(this.response):(t.log(t.LEVEL_SEVERE,"sever error: "+this.status),n(null))},r.onerror=function(e){t.log(t.LEVEL_SEVERE,"connection error: "+e),n(null)},r.open("get",e,!0),r.send()}}})),i("formats/collada/ColladaImage",["./ColladaUtils"],(function(t){"use strict";var e=function(t,e){this.filename="",this.map=t,this.name=e,this.path=""};return e.prototype.parse=function(e){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"init_from":this.filename=t.getFilename(r.textContent),this.path=r.textContent}}return this},e})),i("formats/collada/ColladaMaterial",["./ColladaUtils"],(function(t){"use strict";var e=function(t){this.id=t,this.newParams=[]};return e.prototype.parse=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1===n.nodeType)switch(n.nodeName){case"profile_COMMON":this.parseProfileCommon(n)}}return this},e.prototype.parseProfileCommon=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1===n.nodeType)switch(n.nodeName){case"newparam":this.parseNewparam(n);break;case"image":break;case"technique":this.parseTechnique(n)}}},e.prototype.parseNewparam=function(t){for(var e=t.getAttribute("sid"),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"surface":var i=r.querySelector("init_from");i&&this.newParams.push({sid:e,type:"surface",initFrom:i.textContent});break;case"sampler2D":var o=r.querySelector("source");this.newParams.push({sid:e,type:"sampler2D",source:o.textContent})}}},e.prototype.parseTechnique=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1===n.nodeType)switch(n.nodeName){case"constant":case"lambert":case"blinn":case"phong":this.techniqueType=n.nodeName,this.parseTechniqueType(n)}}},e.prototype.parseTechniqueType=function(e){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType&&r.nodeName){var i=r.nodeName,o=t.getFirstChildElement(r);if(o)switch(o.nodeName){case"color":this[i]=t.bufferDataFloat32(o).subarray(0,4);break;case"float":this[i]=t.bufferDataFloat32(o)[0];break;case"texture":var a=o.getAttribute("texture"),s=this.newParams.map((function(t){return t.sid})).indexOf(a),u=this.newParams[s].source;s=this.newParams.map((function(t){return t.sid})).indexOf(u);var l=this.newParams[s].initFrom;this.textures||(this.textures={}),this.textures[i]={mapId:l}}}}},e})),i("formats/collada/ColladaMesh",["./ColladaUtils"],(function(t){"use strict";var e=function(t){this.filename=t||"",this.name=t||"",this.buffers=[]};return e.prototype.parse=function(e){for(var n={},r={},i={id:"",inputs:[]},o=0;o<e.childNodes.length;o++){var a=e.childNodes[o];if(1===a.nodeType)switch(a.nodeName){case"source":if(!a.querySelector)continue;var s=a.querySelector("float_array");if(!s)continue;var u=t.bufferDataFloat32(s),l=a.querySelector("accessor"),c=parseInt(l.getAttribute("stride"));n[a.getAttribute("id")]={stride:c,data:u};break;case"vertices":this.parseVertices(a,i);break;case"triangles":r=this.parsePolygons(a,n,i,3),this.buffers.push(r);break;case"polygons":r=this.parsePolygons(a,n,i,4),this.buffers.push(r);break;case"polylist":r=this.parsePolygons(a,n,i,null),this.buffers.push(r)}}return this},e.prototype.parseVertices=function(t,e){e.id=t.getAttribute("id");for(var n=t.querySelectorAll("input"),r=0;r<n.length;r++){var i=n[r],o=i.getAttribute("source").substr(1),a=i.getAttribute("semantic").toUpperCase();e.inputs.push({semantic:a,source:o})}},e.prototype.parsePolygons=function(t,e,n,r){var i=[];null==r&&(i=t.querySelector("vcount").textContent.trim().split(" "));var o=parseInt(t.getAttribute("count")),a=t.getAttribute("material"),s=this.parseInputs(t,e,n),u=s.inputs,l=s.maxOffset,c=t.querySelector("p"),h=[];c&&(h=c.textContent.trim().split(" "));for(var f=u.length,p=0,d={},g=[],m=0,y=!1,v=!1,E=0;E<o;E++){if(i.length)var _=parseInt(i[E]);else _=r;for(var b=-1,S=-1,w=-1,x=0;x<_;x++){var T=h.slice(m,m+l).join(" ");if(w=S,d.hasOwnProperty(T))S=d[T],y=!0;else{for(var L=0;L<f;L++){var C=u[L],A=C[4],M=parseInt(h[m+A]),R=C[1],O=C[3];M*=C[2];for(var P=0;P<C[2];P++)R.push(O[M+P])}S=p,p+=1,d[T]=S}_>3&&(0===x&&(b=S),x>2*l&&((b>65535||w>65535)&&(v=!0),g.push(b),g.push(w))),S>65535&&(v=!0),g.push(S),m+=l}}var I={vertices:new Float32Array(u[0][1]),indexedRendering:y,material:a};return I.indexedRendering&&(I.indices=v?new Uint32Array(g):new Uint16Array(g)),this.transformMeshInfo(I,u),I},e.prototype.parseInputs=function(t,e,n){for(var r=[],i=0,o=t.querySelectorAll("input"),a=0;a<o.length;a++){var s=o.item(a);if(s.getAttribute){var u=s.getAttribute("semantic").toUpperCase(),l=s.getAttribute("source").substr(1),c=parseInt(s.getAttribute("offset"));i=i<c+1?c+1:i;var h=0;if(s.getAttribute("set")&&(h=parseInt(s.getAttribute("set"))),n.id===l)for(var f=n.inputs,p=0;p<f.length;p++){var d=e[f[p].source];d&&r.push([f[p].semantic,[],d.stride,d.data,c,h])}else d=e[l],r.push([u,[],d.stride,d.data,c,h])}}return{inputs:r,maxOffset:i}},e.prototype.transformMeshInfo=function(e,n){for(var r={normal:"normals",texcoord:"uvs"},i=1;i<n.length;i++){var o=n[i][0].toLowerCase(),a=n[i][1];a.length&&(r[o]&&(o=r[o]),e[o]&&(o+=n[i][5]),e[o]=new Float32Array(a),"uvs"===o&&(e.isClamp=t.getTextureType(a)))}return e},e})),i("formats/collada/ColladaNode",["./ColladaUtils","../../geom/Matrix","../../geom/Vec3"],(function(t,e,n){"use strict";var r=function(){this.id="",this.name="",this.sid="",this.children=[],this.materials=[],this.mesh="",this.localMatrix=e.fromIdentity(),this.worldMatrix=e.fromIdentity()};return r.prototype.parse=function(t,n,i){this.id=t.getAttribute("id"),this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.children=[],this.materials=[],this.mesh="",this.localMatrix=e.fromIdentity(),this.worldMatrix=e.fromIdentity(),this.setNodeTransforms(t,i);for(var o=0;o<t.childNodes.length;o++){var a=t.childNodes[o];if(1===a.nodeType)switch(a.nodeName){case"node":this.children.push((new r).parse(a,n,this.worldMatrix));break;case"instance_geometry":this.mesh=a.getAttribute("url").substr(1);for(var s=a.querySelectorAll("instance_material"),u=0;u<s.length;u++){var l=s.item(u);this.materials.push({id:l.getAttribute("target").substr(1),symbol:l.getAttribute("symbol")})}break;case"instance_node":var c=a.getAttribute("url").substr(1),h=this.getLibraryNode(n,c);h&&this.children.push((new r).parse(h,n,this.worldMatrix))}}return this},r.prototype.setNodeTransforms=function(r,i){var o=e.fromIdentity(),a=e.fromIdentity(),s=e.fromIdentity(),u=e.fromIdentity();i||(i=e.fromIdentity());for(var l=[],c=0;c<r.childNodes.length;c++){var h=r.childNodes[c];if(1===h.nodeType)switch(h.nodeName){case"matrix":var f=t.bufferDataFloat32(h);o.copy(f),l.push(o);break;case"rotate":f=t.bufferDataFloat32(h),a.multiplyByRotation(f[0],f[1],f[2],f[3]),l.push(a);break;case"translate":f=t.bufferDataFloat32(h),s.multiplyByTranslation(f[0],f[1],f[2]),l.push(s);break;case"scale":f=t.bufferDataFloat32(h),u.multiplyByScale(f[0],f[1],f[2]),l.push(u)}}for(c=0;c<l.length;c++)this.localMatrix.multiplyMatrix(l[c]);this.worldMatrix.setToMultiply(i,this.localMatrix),this.normalMatrix=e.fromIdentity();var p=new n(0,0,0);this.worldMatrix.extractRotationAngles(p),this.normalMatrix.multiplyByRotation(-1,0,0,p[0]),this.normalMatrix.multiplyByRotation(0,-1,0,p[1]),this.normalMatrix.multiplyByRotation(0,0,-1,p[2])},r.prototype.getLibraryNode=function(t,e){for(var n=0;n<t.length;n++){var r=t[n].attributes.getNamedItem("id");if(r&&r.value===e)return t[n]}return null},r})),i("formats/collada/ColladaScene",["../../error/ArgumentError","../../shaders/BasicTextureProgram","../../util/Color","../../util/Logger","../../geom/Matrix","../../geom/Position","../../pick/PickedObject","../../render/Renderable","../../geom/Vec3"],(function(t,e,n,r,i,o,a,s,u){"use strict";var l=function(e,o){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"ColladaScene","constructor","missingPosition"));s.call(this),this._position=e,this._nodes=[],this._meshes={},this._materials={},this._images={},this._upAxis="",this._dirPath="",this._xRotation=0,this._yRotation=0,this._zRotation=0,this._xTranslation=0,this._yTranslation=0,this._zTranslation=0,this._scale=1,this._altitudeMode=WorldWind.ABSOLUTE,this._localTransforms=!0,this._useTexturePaths=!0,this._nodesToHide=[],this._hideNodes=!1,this._placePoint=new u(0,0,0),this._transformationMatrix=i.fromIdentity(),this._mvpMatrix=i.fromIdentity(),this._normalTransformMatrix=i.fromIdentity(),this._normalMatrix=i.fromIdentity(),this._texCoordMatrix=i.fromIdentity().setToUnitYFlip(),this._entities=[],this._activeTexture=null,this._tmpVector=new u(0,0,0),this._tmpColor=new n(1,1,1,1),this._vboCacheKey="",this._iboCacheKey="",this.setSceneData(o)};return(l.prototype=Object.create(s.prototype)).constructor=l,Object.defineProperties(l.prototype,{position:{get:function(){return this._position},set:function(t){this._position=t}},nodes:{get:function(){return this._nodes},set:function(t){this._nodes=t}},meshes:{get:function(){return this._meshes},set:function(t){this._meshes=t}},materials:{get:function(){return this._materials},set:function(t){this._materials=t}},images:{get:function(){return this._images},set:function(t){this._images=t}},upAxis:{get:function(){return this._upAxis},set:function(t){this._upAxis=t}},dirPath:{get:function(){return this._dirPath},set:function(t){this._dirPath=t}},xRotation:{get:function(){return this._xRotation},set:function(t){this._xRotation=t}},yRotation:{get:function(){return this._yRotation},set:function(t){this._yRotation=t}},zRotation:{get:function(){return this._zRotation},set:function(t){this._zRotation=t}},xTranslation:{get:function(){return this._xTranslation},set:function(t){this._xTranslation=t}},yTranslation:{get:function(){return this._yTranslation},set:function(t){this._yTranslation=t}},zTranslation:{get:function(){return this._zTranslation},set:function(t){this._zTranslation=t}},scale:{get:function(){return this._scale},set:function(t){this._scale=t}},placePoint:{get:function(){return this._placePoint},set:function(t){this._placePoint=t}},altitudeMode:{get:function(){return this._altitudeMode},set:function(t){this._altitudeMode=t}},transformationMatrix:{get:function(){return this._transformationMatrix},set:function(t){this._transformationMatrix=t}},normalMatrix:{get:function(){return this._normalMatrix},set:function(t){this._normalMatrix=t}},localTransforms:{get:function(){return this._localTransforms},set:function(t){this._localTransforms=t}},useTexturePaths:{get:function(){return this._useTexturePaths},set:function(t){this._useTexturePaths=t}},nodesToHide:{get:function(){return this._nodesToHide},set:function(t){this._nodesToHide=t}},hideNodes:{get:function(){return this._hideNodes},set:function(t){this._hideNodes=t}}}),l.prototype.setSceneData=function(t){t&&(this._nodes=t.root.children,this._meshes=t.meshes,this._materials=t.materials,this._images=t.images,this._upAxis=t.metadata.up_axis,this._dirPath=t.dirPath,this.flattenModel())},l.prototype.flattenModel=function(){for(var t=0,e=this._nodes.length;t<e;t++)this.flattenNode(this._nodes[t]);this._entities.sort((function(t,e){var n=null===t.imageKey?"":""+t,r=null===e.imageKey?"":""+e;return n>r?1:n===r?0:-1}))},l.prototype.flattenNode=function(t){if(t.mesh)for(var e=t.mesh,n=this._meshes[e].buffers,r=0,i=n.length;r<i;r++){for(var o=n[r].material,a=0;a<t.materials.length;a++)if(o===t.materials[a].symbol){var s=t.materials[a].id;break}var u=this._materials[s],l=null;u&&u.textures&&n[r].uvs&&n[r].uvs.length>0&&(u.textures.diffuse?l=u.textures.diffuse.mapId:u.textures.reflective&&(l=u.textures.reflective.mapId)),this._entities.push({mesh:n[r],material:u,node:t,imageKey:l})}for(var c=0;c<t.children.length;c++)this.flattenNode(t.children[c])},l.prototype.render=function(t){var e,n=t.frustumInModelCoordinates;this.enabled&&(this.lastFrameTime!==t.timestamp&&(e=this.makeOrderedRenderable(t)),e&&n.containsPoint(this._placePoint)&&(e.layer=t.currentLayer,this.lastFrameTime=t.timestamp,t.addOrderedRenderable(e)))},l.prototype.makeOrderedRenderable=function(t){return t.surfacePointForMode(this._position.latitude,this._position.longitude,this._position.altitude,this._altitudeMode,this._placePoint),this.eyeDistance=t.eyePoint.distanceTo(this._placePoint),this},l.prototype.renderOrdered=function(t){if(this.drawOrderedScene(t),t.pickingMode){var e=new a(this.pickColor.clone(),this,this._position,this.layer,!1);t.resolvePick(e)}},l.prototype.drawOrderedScene=function(t){try{this.beginDrawing(t)}finally{this.endDrawing(t)}},l.prototype.beginDrawing=function(t){var n=t.currentGlContext,r=t.gpuResourceCache,i=r.resourceForKey(this._vboCacheKey),o=r.resourceForKey(this._iboCacheKey);i||(this.setupBuffers(t),i=r.resourceForKey(this._vboCacheKey),o=r.resourceForKey(this._iboCacheKey)),n.bindBuffer(n.ARRAY_BUFFER,i),o&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o),t.findAndBindProgram(e),n.enableVertexAttribArray(0),t.pickingMode&&(this.pickColor=t.uniquePickColor()),this.computeTransformationMatrix(t.globe);for(var a=0,s=this._entities.length;a<s;a++)this.mustRenderNode(this._entities[a].node.id)&&this.draw(t,this._entities[a])},l.prototype.setupBuffers=function(t){for(var e=t.currentGlContext,n=Float32Array.BYTES_PER_ELEMENT||4,i=Uint16Array.BYTES_PER_ELEMENT||2,o=Uint32Array.BYTES_PER_ELEMENT||4,a=!1,s=0,u=0,l=0,c=this._entities.length;l<c;l++){var h=this._entities[l].mesh;h.indexedRendering&&(s+=h.indices.length,h.indices instanceof Uint32Array&&(a=!0)),u+=h.vertices.length,this._entities[l].imageKey&&(u+=h.uvs.length),h.normals&&h.normals.length&&(u+=h.normals.length)}var f=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,f),e.bufferData(e.ARRAY_BUFFER,u*n,e.STATIC_DRAW);var p=0;for(l=0,c=this._entities.length;l<c;l++){var d=this._entities[l].mesh.vertices;this._entities[l].vertexOffset=p,e.bufferSubData(e.ARRAY_BUFFER,p*n,d),p+=d.length}for(l=0,c=this._entities.length;l<c;l++)this._entities[l].imageKey&&(d=this._entities[l].mesh.uvs,this._entities[l].uvOffset=p,e.bufferSubData(e.ARRAY_BUFFER,p*n,d),p+=d.length);for(l=0,c=this._entities.length;l<c;l++)(d=d=this._entities[l].mesh.normals)&&d.length&&(this._entities[l].normalOffset=p,e.bufferSubData(e.ARRAY_BUFFER,p*n,d),p+=d.length);var g,m=i,y=s*m;if(a&&((g=t.getExtension("OES_element_index_uint"))?y=s*(m=o):r.log(r.LEVEL_SEVERE,'The 3D model is too big and might not render properly. \nYour browser does not support the "OES_element_index_uint" extension, required to render large models.')),s){var v=e.createBuffer();for(e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,v),e.bufferData(e.ELEMENT_ARRAY_BUFFER,y,e.STATIC_DRAW),p=0,l=0,c=this._entities.length;l<c;l++)(h=this._entities[l].mesh).indexedRendering&&((d=h.indices)instanceof Uint32Array&&!g&&(d=new Uint16Array(d)),this._entities[l].indexOffset=p,this._entities[l].indexSize=m,e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,p*m,d),p+=d.length)}this._vboCacheKey=t.gpuResourceCache.generateCacheKey(),t.gpuResourceCache.putResource(this._vboCacheKey,f,u*n),s&&(this._iboCacheKey=t.gpuResourceCache.generateCacheKey(),t.gpuResourceCache.putResource(this._iboCacheKey,v,y))},l.prototype.draw=function(t,e){var n=t.currentGlContext,r=t.currentProgram,i=t.gpuResourceCache,o=e.mesh,a=e.material,s=e.node.worldMatrix,u=e.node.normalMatrix,l=o.normals&&o.normals.length,c=e.imageKey;if(this.applyColor(t,a),c){var h=this._useTexturePaths?this._images[c].path:this._images[c].filename,f=this._dirPath+h;if(this._activeTexture=i.resourceForKey(f),!this._activeTexture){var p=o.isClamp?n.CLAMP_TO_EDGE:n.REPEAT;this._activeTexture=i.retrieveTexture(n,f,p)}this._activeTexture&&this._activeTexture.bind(t)?(r.loadTextureEnabled(n,!0),n.vertexAttribPointer(2,2,n.FLOAT,!1,8,4*e.uvOffset),n.enableVertexAttribArray(2),r.loadModulateColor(n,t.pickingMode)):(r.loadTextureEnabled(n,!1),n.disableVertexAttribArray(2))}else r.loadTextureEnabled(n,!1),n.disableVertexAttribArray(2);if(l&&!t.pickingMode?(r.loadApplyLighting(n,1),n.vertexAttribPointer(1,3,n.FLOAT,!1,12,4*e.normalOffset),n.enableVertexAttribArray(1)):(r.loadApplyLighting(n,0),n.disableVertexAttribArray(1)),this.applyMatrix(t,l,f,s,u),n.vertexAttribPointer(0,3,n.FLOAT,!1,12,4*e.vertexOffset),o.indexedRendering){var d=e.indexOffset*e.indexSize;o.indices instanceof Uint32Array&&t.getExtension("OES_element_index_uint")?n.drawElements(n.TRIANGLES,o.indices.length,n.UNSIGNED_INT,d):n.drawElements(n.TRIANGLES,o.indices.length,n.UNSIGNED_SHORT,d)}else n.drawArrays(n.TRIANGLES,0,Math.floor(o.vertices.length/3))},l.prototype.applyColor=function(t,e){var n=t.currentGlContext,r=t.currentProgram;if(e)if("constant"===e.techniqueType)var i=e.reflective;else i=e.diffuse;var o,a=1,s=1,u=1,l=1;i&&(a=i[0],s=i[1],u=i[2],l=null!=i[3]?i[3]:1),this._tmpColor.set(a,s,u,l),o=l*this.layer.opacity,n.depthMask(o>=1||t.pickingMode),r.loadColor(n,t.pickingMode?this.pickColor:this._tmpColor),r.loadOpacity(n,t.pickingMode?o>0?1:0:o)},l.prototype.applyMatrix=function(t,e,n,r,i){this._mvpMatrix.copy(t.modelviewProjection),this._mvpMatrix.multiplyMatrix(this._transformationMatrix),r&&this._localTransforms&&this._mvpMatrix.multiplyMatrix(r),e&&!t.pickingMode&&(this._normalMatrix.copy(t.modelviewNormalTransform),this._normalMatrix.multiplyMatrix(this._normalTransformMatrix),i&&this._localTransforms&&this._normalMatrix.multiplyMatrix(i),t.currentProgram.loadModelviewInverse(t.currentGlContext,this._normalMatrix)),n&&this._activeTexture&&(t.currentProgram.loadTextureMatrix(t.currentGlContext,this._texCoordMatrix),this._activeTexture=null),t.currentProgram.loadModelviewProjection(t.currentGlContext,this._mvpMatrix)},l.prototype.endDrawing=function(t){var e=t.currentGlContext,n=t.currentProgram;e.disableVertexAttribArray(1),e.disableVertexAttribArray(2),n.loadApplyLighting(e,0),n.loadTextureEnabled(e,!1)},l.prototype.computeTransformationMatrix=function(t){this._transformationMatrix.setToIdentity(),this._transformationMatrix.multiplyByLocalCoordinateTransform(this._placePoint,t),this._transformationMatrix.multiplyByRotation(1,0,0,this._xRotation),this._transformationMatrix.multiplyByRotation(0,1,0,this._yRotation),this._transformationMatrix.multiplyByRotation(0,0,1,this._zRotation),this._transformationMatrix.multiplyByScale(this._scale,this._scale,this._scale),this._transformationMatrix.multiplyByTranslation(this._xTranslation,this._yTranslation,this._zTranslation),this.computeNormalMatrix()},l.prototype.computeNormalMatrix=function(){this._transformationMatrix.extractRotationAngles(this._tmpVector),this._normalTransformMatrix.setToIdentity(),this._normalTransformMatrix.multiplyByRotation(-1,0,0,this._tmpVector[0]),this._normalTransformMatrix.multiplyByRotation(0,-1,0,this._tmpVector[1]),this._normalTransformMatrix.multiplyByRotation(0,0,-1,this._tmpVector[2])},l.prototype.mustRenderNode=function(t){var e=!0;return this._hideNodes&&(e=-1===this._nodesToHide.indexOf(t)),e},l})),i("formats/collada/ColladaLoader",["../../error/ArgumentError","./ColladaAsset","./ColladaImage","./ColladaMaterial","./ColladaMesh","./ColladaNode","./ColladaScene","./ColladaUtils","../../util/Logger"],(function(t,e,n,r,i,o,a,s,u){"use strict";var l=function(e,n){if(!e)throw new t(u.logMessage(u.LEVEL_SEVERE,"ColladaLoader","constructor","missingPosition"));this.position=e,this.dirPath="/",this.init(n)};return l.prototype.init=function(t){t&&(this.dirPath=t.dirPath||"/"),this.scene={type:"SceneTree",dirPath:this.dirPath,images:{},metadata:{},materials:{},meshes:{},root:{children:[]}},this.xmlDoc=null},l.prototype.load=function(t,e){-1===t.indexOf("://")&&(t=this.dirPath+t),s.fetchFile(t,function(t){if(t)try{n=this.parse(t)}catch(t){n=null,u.log(u.LEVEL_SEVERE,"error parsing collada file: "+t)}else var n=null;e(n)}.bind(this))},l.prototype.parse=function(t){this.init();var n=new DOMParser;this.xmlDoc=n.parseFromString(t,"text/xml");var r=this.xmlDoc.querySelectorAll("library_nodes node"),i=this.xmlDoc.querySelectorAll("library_effects effect");return this.scene.metadata=new e(this.xmlDoc).parse(),this.parseLib("visual_scene",r),this.parseLib("library_geometries"),this.parseLib("library_materials",i),this.parseLib("library_images"),this.xmlDoc=null,new a(this.position,this.scene)},l.prototype.parseLib=function(t,e){var a=this.xmlDoc.getElementsByTagName(t),u=[];a&&a.length&&(u=a[0].childNodes);for(var l=0;l<u.length;l++){var c=u[l];if(1===c.nodeType)switch(c.nodeName){case"node":var h=(new o).parse(c,e);h&&this.scene.root.children.push(h);break;case"geometry":var f=c.getAttribute("id"),p=c.querySelector("mesh"),d=new i(f).parse(p);d&&(this.scene.meshes[f]=d);break;case"material":var g=c.getAttribute("id"),m=c.querySelector("instance_effect").getAttribute("url").substr(1),y=s.querySelectorById(e,m),v=new r(g).parse(y);v&&(this.scene.materials[g]=v);break;case"image":var E=c.getAttribute("id"),_=c.getAttribute("name"),b=new n(E,_).parse(c);b&&(this.scene.images[E]=b)}}},l})),i("shapes/Compass",["../error/ArgumentError","../util/Logger","../util/Offset","../shapes/ScreenImage"],(function(t,e,n,r){"use strict";var i=function(t,e){var i=t||new n(WorldWind.OFFSET_FRACTION,1,WorldWind.OFFSET_FRACTION,1),o=e||WorldWind.configuration.baseUrl+"images/notched-compass.png";r.call(this,i,o),t||(this.imageOffset=new n(WorldWind.OFFSET_FRACTION,1.1,WorldWind.OFFSET_FRACTION,1.1)),this.size=.15};return(i.prototype=Object.create(r.prototype)).render=function(t){this.imageRotation=t.navigator.heading,this.imageTilt=t.navigator.tilt;var e=this.getActiveTexture(t);e&&(this.imageScale=this.size*t.currentGlContext.drawingBufferWidth/e.imageWidth),r.prototype.render.call(this,t)},i})),i("layer/CompassLayer",["../shapes/Compass","../layer/RenderableLayer"],(function(t,e){"use strict";var n=function(){e.call(this,"Compass"),this._compass=new t(null,null),this.addRenderable(this._compass)};return n.prototype=Object.create(e.prototype),Object.defineProperties(n.prototype,{compass:{get:function(){return this._compass},set:function(e){e&&e instanceof t&&(this.removeAllRenderables(),this.addRenderable(e),this._compass=e)}}}),n})),i("shapes/Text",["../error/ArgumentError","../shaders/BasicTextureProgram","../util/Color","../util/Font","../util/Logger","../geom/Matrix","../pick/PickedObject","../render/Renderable","../shapes/TextAttributes","../error/UnsupportedOperationError","../geom/Vec2","../geom/Vec3","../util/WWMath"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f){"use strict";var p=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"Text","constructor","missingText"));s.call(this),this.attributes=new u(null),this.highlightAttributes=null,this.highlighted=!1,this.enabled=!0,this.text=e,this.altitudeMode=WorldWind.ABSOLUTE,this.pickDelegate=null,this.alwaysOnTop=!1,this.targetVisibility=1,this.currentVisibility=1,this.declutterGroup=0,this.markerImageSource=WorldWind.configuration.baseUrl+"images/white-dot.png",this.markerImageScale=.1,this.activeAttributes=null,this.activeTexture=null,this.imageTransform=o.fromIdentity(),this.imageBounds=null,this.layer=null,this.depthOffset=-.003,this.screenPoint=new h(0,0,0)};return p.matrix=o.fromIdentity(),p.glPickPoint=new h(0,0,0),(p.prototype=Object.create(s.prototype)).copy=function(t){return this.text=t.text,this.attributes=t.attributes,this.highlightAttributes=t.highlightAttributes,this.highlighted=t.highlighted,this.enabled=t.enabled,this.altitudeMode=t.altitudeMode,this.pickDelegate=t.pickDelegate,this.alwaysOnTop=t.alwaysOnTop,this.depthOffset=t.depthOffset,this.declutterGroup=t.declutterGroup,this.targetVisibility=t.targetVisibility,this.currentVisibility=t.currentVisibility,this},Object.defineProperties(p.prototype,{screenBounds:{get:function(){return this.imageBounds}}}),p.prototype.render=function(t){var e;this.enabled&&this.text&&0!==this.text.length&&t.accumulateOrderedRenderables&&((e=this.lastFrameTime!==t.timestamp?this.makeOrderedRenderable(t):this.clone().makeOrderedRenderable(t))&&e.isVisible(t)&&(e.layer=t.currentLayer,this.lastFrameTime=t.timestamp,t.addOrderedRenderable(e)))},p.prototype.renderOrdered=function(t){if((0!==this.currentVisibility||0!==this.targetVisibility||this.markerImageSource)&&(this.drawOrderedText(t),t.pickingMode)){var e=new a(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,this.position,this.layer,!1);t.resolvePick(e)}},p.prototype.makeOrderedRenderable=function(t){var e,n,r,i;return this.determineActiveAttributes(t),this.activeAttributes&&this.computeScreenPointAndEyeDistance(t)?(this.activeTexture=t.createTextTexture(this.text,this.activeAttributes),e=this.activeTexture.imageWidth,n=this.activeTexture.imageHeight,r=this.activeAttributes.scale,i=this.activeAttributes.offset.offsetForSize(e,n),this.imageTransform.setTranslation(this.screenPoint[0]-i[0]*r,this.screenPoint[1]-i[1]*r,this.screenPoint[2]),this.imageTransform.setScale(e*r,n*r,1),this.imageBounds=f.boundingRectForUnitQuad(this.imageTransform),this):null},p.prototype.computeScreenPointAndEyeDistance=function(t){throw new l(i.logMessage(i.LEVEL_SEVERE,"Renderable","render","abstractInvocation"))},p.prototype.determineActiveAttributes=function(t){this.highlighted&&this.highlightAttributes?this.activeAttributes=this.highlightAttributes:this.activeAttributes=this.attributes},p.prototype.isVisible=function(t){return t.pickingMode?t.pickRectangle&&this.imageBounds.intersects(t.pickRectangle):this.imageBounds.intersects(t.viewport)},p.prototype.drawOrderedText=function(t){this.beginDrawing(t);try{this.doDrawOrderedText(t),t.pickingMode}finally{this.endDrawing(t)}},p.prototype.drawBatchOrderedText=function(t){for(var e;(e=t.peekOrderedRenderable())&&e instanceof p;){t.popOrderedRenderable();try{e.doDrawOrderedText(t)}catch(t){i.logMessage(i.LEVEL_WARNING,"Text","drawBatchOrderedText","Error occurred while rendering text using batching: "+t.message)}}},p.prototype.beginDrawing=function(t){var n,r=t.currentGlContext;t.findAndBindProgram(e),n=t.currentProgram,r.bindBuffer(r.ARRAY_BUFFER,t.unitQuadBuffer3()),r.vertexAttribPointer(n.vertexPointLocation,3,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,t.unitQuadBuffer()),r.vertexAttribPointer(n.vertexTexCoordLocation,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n.vertexPointLocation),r.enableVertexAttribArray(n.vertexTexCoordLocation),n.loadTextureUnit(r,r.TEXTURE0),n.loadModulateColor(r,!1),r.depthMask(!1)},p.prototype.endDrawing=function(t){var e=t.currentGlContext,n=t.currentProgram;e.disableVertexAttribArray(n.vertexPointLocation),e.disableVertexAttribArray(n.vertexTexCoordLocation),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.depthMask(!0)},p.prototype.doDrawOrderedText=function(t){var e=t.currentGlContext,r=t.currentProgram;if(!t.pickingMode&&this.currentVisibility!==this.targetVisibility){var i=(t.timestamp-t.previousRedrawTimestamp)/t.fadeTime;this.currentVisibility<this.targetVisibility?this.currentVisibility=Math.min(1,this.currentVisibility+i):this.currentVisibility=Math.max(0,this.currentVisibility-i),t.redrawRequested=!0}this.activeAttributes.depthTest||e.disable(e.DEPTH_TEST),t.pickingMode?(this.pickColor=t.uniquePickColor(),r.loadColor(e,this.pickColor),r.loadOpacity(e,1),r.loadTextureEnabled(e,!1)):(r.loadColor(e,n.WHITE),r.loadOpacity(e,this.layer.opacity*this.currentVisibility)),this.currentVisibility>0&&this.drawLabel(t),this.currentVisibility<1&&this.markerImageSource&&this.drawMarker(t),this.activeAttributes.depthTest||e.enable(e.DEPTH_TEST)},p.prototype.drawLabel=function(t){var e,n=t.currentGlContext,r=t.currentProgram;!t.pickingMode&&this.activeTexture&&(p.matrix.setToIdentity(),p.matrix.multiplyByTextureTransform(this.activeTexture),e=this.activeTexture.bind(t),r.loadTextureEnabled(n,e),r.loadTextureMatrix(n,p.matrix)),p.matrix.copy(t.screenProjection),p.matrix.multiplyMatrix(this.imageTransform),r.loadModelviewProjection(n,p.matrix),n.drawArrays(n.TRIANGLE_STRIP,0,4)},p.prototype.drawMarker=function(t){var e,n=t.currentGlContext,r=t.currentProgram,i=t.gpuResourceCache.resourceForKey(this.markerImageSource);if(i){t.pickingMode||(p.matrix.setToIdentity(),p.matrix.multiplyByTextureTransform(i),e=i.bind(t),r.loadTextureEnabled(n,e),r.loadTextureMatrix(n,p.matrix),r.loadOpacity(n,this.layer.opacity*(1-this.currentVisibility)));var o=this.markerImageScale;p.matrix.copy(t.screenProjection),p.matrix.multiplyByTranslation(this.screenPoint[0]-o*i.imageWidth/2,this.screenPoint[1]-o*i.imageWidth/2,this.screenPoint[2]),p.matrix.multiplyByScale(i.imageWidth*o,i.imageHeight*o,1),r.loadModelviewProjection(n,p.matrix),n.drawArrays(n.TRIANGLE_STRIP,0,4)}else t.gpuResourceCache.retrieveTexture(t.currentGlContext,this.markerImageSource)},p})),i("shapes/ScreenText",["../error/ArgumentError","../util/Logger","../util/Offset","../shapes/Text"],(function(t,e,n,r){"use strict";var i=function(n,i){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"Text","constructor","missingOffset"));r.call(this,i),this.screenOffset=n,this.altitudeMode=null};return(i.prototype=Object.create(r.prototype)).render=function(t){this.lastFrameTime!==t.timestamp&&r.prototype.render.call(this,t)},i.prototype.computeScreenPointAndEyeDistance=function(t){var e=t.currentGlContext,n=this.screenOffset.offsetForSize(e.drawingBufferWidth,e.drawingBufferHeight);return this.screenPoint[0]=n[0],this.screenPoint[1]=n[1],this.screenPoint[2]=0,this.eyeDistance=0,!0},i})),i("layer/CoordinatesDisplayLayer",["../error/ArgumentError","../util/Color","../util/Font","../layer/Layer","../util/Logger","../util/Offset","../geom/Position","../shapes/ScreenImage","../shapes/ScreenText","../shapes/TextAttributes","../geom/Vec2"],(function(t,e,n,r,i,o,a,s,u,l,c){"use strict";var h=function(n){function a(t){f.handleUIEvent(t)}if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"CoordinatesDisplayLayer","constructor","missingWorldWindow"));r.call(this,"Coordinates"),this.wwd=n,this.pickEnabled=!1,this.eventType=null,this.clientX=null,this.clientY=null,this.terrainPosition=null,this.latText=new u(new o(WorldWind.OFFSET_PIXELS,0,WorldWind.OFFSET_PIXELS,0)," "),this.latText.attributes=new l(null),this.latText.attributes.color=e.YELLOW,this.lonText=new u(new o(WorldWind.OFFSET_PIXELS,0,WorldWind.OFFSET_PIXELS,0)," "),this.lonText.attributes=new l(null),this.lonText.attributes.color=e.YELLOW,this.elevText=new u(new o(WorldWind.OFFSET_PIXELS,0,WorldWind.OFFSET_PIXELS,0)," "),this.elevText.attributes=new l(null),this.elevText.attributes.color=e.YELLOW,this.eyeText=new u(new o(WorldWind.OFFSET_PIXELS,0,WorldWind.OFFSET_PIXELS,0)," "),this.eyeText.attributes=new l(null),this.eyeText.attributes.color=e.YELLOW;var c=new o(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,.5),h=WorldWind.configuration.baseUrl+"images/crosshair.png";this.crosshairImage=new s(c,h);var f=this;window.PointerEvent?(n.addEventListener("pointerdown",a),n.addEventListener("pointermove",a),n.addEventListener("pointerleave",a)):(n.addEventListener("mousedown",a),n.addEventListener("mousemove",a),n.addEventListener("mouseleave",a),n.addEventListener("touchstart",a),n.addEventListener("touchmove",a)),this.wwd.redrawCallbacks.push((function(t,e){f.handleRedraw(e)}))};return(h.prototype=Object.create(r.prototype)).doRender=function(t){var e,n,r,i,a,s=this.terrainPosition,u=t.eyePosition,l=t.currentGlContext.canvas.clientWidth;l>650?(e=l/2-50,n=11,r=WorldWind.OFFSET_PIXELS,i=0):l>400?(e=60,n=5,r=WorldWind.OFFSET_INSET_PIXELS,i=1):(e=60,n=5,r=WorldWind.OFFSET_INSET_PIXELS,i=1,a=!0),this.latText.text=s?this.formatLatitude(s.latitude):null,this.latText.screenOffset=new o(WorldWind.OFFSET_PIXELS,e,r,n),this.latText.attributes.offset=new o(WorldWind.OFFSET_FRACTION,1,WorldWind.OFFSET_FRACTION,i),this.latText.render(t),e+=70,this.lonText.text=s?this.formatLongitude(s.longitude):null,this.lonText.screenOffset=new o(WorldWind.OFFSET_PIXELS,e,r,n),this.lonText.attributes.offset=new o(WorldWind.OFFSET_FRACTION,1,WorldWind.OFFSET_FRACTION,i),this.lonText.render(t),t.globe.is2D()||(e+=70,this.elevText.text=s?this.formatAltitude(s.altitude,"m"):null,this.elevText.screenOffset=new o(WorldWind.OFFSET_PIXELS,e,r,n),this.elevText.attributes.offset=new o(WorldWind.OFFSET_FRACTION,1,WorldWind.OFFSET_FRACTION,i),this.elevText.render(t)),a||(e+=40,this.eyeText.text="Eye  "+this.formatAltitude(u.altitude,u.altitude<1e3?"m":"km"),this.eyeText.screenOffset=new o(WorldWind.OFFSET_PIXELS,e,r,n),this.eyeText.attributes.offset=new o(WorldWind.OFFSET_FRACTION,0,WorldWind.OFFSET_FRACTION,i),this.eyeText.render(t)),"touch"===this.eventType&&this.crosshairImage.render(t),this.inCurrentFrame=!0},h.prototype.handleUIEvent=function(t){-1!==t.type.indexOf("pointer")?this.eventType=t.pointerType:-1!==t.type.indexOf("mouse")?this.eventType="mouse":-1!==t.type.indexOf("touch")&&(this.eventType="touch"),-1!==t.type.indexOf("leave")?(this.clientX=null,this.clientY=null):(this.clientX=t.clientX,this.clientY=t.clientY),this.wwd.redraw()},h.prototype.handleRedraw=function(t){var e,n;t===WorldWind.BEFORE_REDRAW&&(("mouse"===this.eventType||"pen"===this.eventType)&&this.clientX&&this.clientY?(e=this.wwd.canvasCoordinates(this.clientX,this.clientY))[0]>=0&&e[0]<this.wwd.canvas.width&&e[1]>=0&&e[1]<this.wwd.canvas.height&&(n=this.wwd.pickTerrain(e).terrainObject()):"touch"===this.eventType&&(e=new c(this.wwd.canvas.width/2,this.wwd.canvas.height/2),n=this.wwd.pickTerrain(e).terrainObject()),this.terrainPosition=n?n.position:null)},h.prototype.formatLatitude=function(t){var e=t<0?"\xb0S":"\xb0N";return Math.abs(t).toFixed(2)+e},h.prototype.formatLongitude=function(t){var e=t<0?"\xb0W":"\xb0E";return Math.abs(t).toFixed(2)+e},h.prototype.formatAltitude=function(t,e){return"km"===e&&(t/=1e3),t.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")+" "+e},h})),i("util/Date",[],(function(){"use strict";var t=function(t){this._date=t?new Date(t):new Date};return(t.prototype=Object.create(Date.prototype)).isAfter=function(t){return-1==this.compare(t)},t.prototype.isBefore=function(t){return 1==this.compare(t)},t.prototype.valueOf=function(){return this._date.valueOf()},t.prototype.getTime=function(){return this._date.getTime()},t.prototype.compare=function(t){var e=this._date.valueOf(),n=t.valueOf();return e>n?-1:e<n?1:0},t})),i("layer/DigitalGlobeTiledImageLayer",["../geom/Angle","../error/ArgumentError","../util/Color","../geom/Location","../util/Logger","../geom/Sector","../layer/MercatorTiledImageLayer"],(function(t,e,n,r,i,o,a){"use strict";var s=function(t,n,s){if(!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"DigitalGlobeTiledImageLayer","constructor","The map ID is null or undefined."));if(!s)throw new e(i.logMessage(i.LEVEL_SEVERE,"DigitalGlobeTiledImageLayer","constructor","The access token is null or undefined."));this.imageSize=256,t=t||"Digital Globe",a.call(this,new o(-85.05,85.05,-180,180),new r(85.05,180),19,"image/jpeg",t,this.imageSize,this.imageSize),this.mapId=n,this.accessToken=s,this.displayName=t,this.pickEnabled=!0,this.destCanvas=document.createElement("canvas"),this.destContext=this.destCanvas.getContext("2d"),this.requestMetadata();var u=this;this.urlBuilder={urlForTile:function(t,e){return u.metadataRetrievalInProcess?null:u.urlTemplate.replace("{z}",t.level.levelNumber+1).replace("{x}",t.column).replace("{y}",t.row)}}};return(s.prototype=Object.create(a.prototype)).requestMetadata=function(){if(!this.metadataRetrievalInProcess){this.metadataRetrievalInProcess=!0;var t="https://api.mapbox.com/v4/"+this.mapId+".json?secure&access_token="+this.accessToken,e=new XMLHttpRequest,n=this;e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var t=JSON.parse(e.responseText);n.urlTemplate=t.tiles[0];var r=document.createEvent("Event");r.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(r),n.metadataRetrievalInProcess=!1}},e.open("GET",t,!0),e.send()}},s.prototype.doRender=function(t){a.prototype.doRender.call(this,t),this.inCurrentFrame&&t.screenCreditController.addCredit("\xa9 Digital Globe",n.DARK_GRAY)},s.prototype.createTopLevelTiles=function(t){this.topLevelTiles=[],this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),0,0)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),0,1)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),1,0)),this.topLevelTiles.push(this.createTile(null,this.levels.firstLevel(),1,1))},s.prototype.mapSizeForLevel=function(t){return 256<<t+1},s})),i("render/DoubleBufferedFbo",["../error/ArgumentError","../util/Logger"],(function(t,e){"use strict";var n=function(n,r,i,o,a){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"DoubleBufferedFbo","constructor","missing DrawContext"));if(!r||!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"DoubleBufferedFbo","constructor","missing texture"));if(o<0||a<0)throw new t(e.logMessage(e.LEVEL_SEVERE,"DoubleBufferedFbo","constructor","The framebuffer width or height is less than zero."));this.width=o,this.height=a,this.size=o*a*4*2,this.fbo1=n.currentGlContext.createFramebuffer(),this.fbo2=n.currentGlContext.createFramebuffer(),this.texture1=r,this.texture2=i,this.fbo1Complete=!1,this.fbo2Complete=!1,this.primary=1,this.isCleared=!0};return n.prototype.bindFbo=function(t){var e=t.currentGlContext,n=this.getPrimaryFbo();e.bindFramebuffer(e.FRAMEBUFFER,n),this.ensureFboComplete(t)},n.prototype.bind=function(t){var e=t.currentGlContext,n=this.getPrimaryTexture();return e.bindTexture(e.TEXTURE_2D,n),t.frameStatistics.incrementTextureLoadCount(1),!0},n.prototype.dispose=function(t){t.deleteTexture(this.texture1),t.deleteTexture(this.texture2),t.deleteFramebuffer(this.fbo1),t.deleteFramebuffer(this.fbo2),this.texture1=void 0,this.texture2=void 0,this.fbo1=void 0,this.fbo2=void 0},n.prototype.getPrimaryFbo=function(){return 1===this.primary?this.fbo1:this.fbo2},n.prototype.getSecondaryFbo=function(){return 1===this.primary?this.fbo2:this.fbo1},n.prototype.getPrimaryTexture=function(){return 1===this.primary?this.texture1:this.texture2},n.prototype.getSecondaryTexture=function(){return 1===this.primary?this.texture2:this.texture1},n.prototype.clearFbo=function(t){if(!this.isCleared){var e=t.currentGlContext,n=e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT;this.bindFbo(t),e.clear(n),e.viewport(0,0,this.width,this.height),this.swap(),this.bindFbo(t),e.clear(n),this.swap(),this.isCleared=!0}},n.prototype.swap=function(){1===this.primary?this.primary=2:this.primary=1},n.prototype.ensureFboComplete=function(t){var e=t.currentGlContext;1!==this.primary||this.fbo1Complete?2!==this.primary||this.fbo2Complete||(e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture2,0),this.fbo2Complete=!0):(e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture1,0),this.fbo1Complete=!0)},n})),i("util/FrameStatistics",[],(function(){"use strict";var t=function(){this.frameCount=0,this.frameTimeCumulative=0,this.frameTimeBase=0,this.frameTimeExtremes=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],this.frameTime=0,this.tessellationTime=0,this.layerRenderingTime=0,this.orderedRenderingTime=0,this.terrainTileCount=0,this.imageTileCount=0,this.renderedTileCount=0,this.tileUpdateCount=0,this.textureLoadCount=0,this.vboLoadCount=0,this.frameTimeAverage=0,this.frameRateAverage=0,this.frameTimeMin=0,this.frameTimeMax=0};return t.prototype.beginFrame=function(){this.frameTime=Date.now(),this.tessellationTime=0,this.layerRenderingTime=0,this.orderedRenderingTime=0,this.terrainTileCount=0,this.imageTileCount=0,this.renderedTileCount=0,this.tileUpdateCount=0,this.textureLoadCount=0,this.vboLoadCount=0,++this.frameCount},t.prototype.endFrame=function(){var t=Date.now();this.frameTime=t-this.frameTime,this.frameTimeCumulative+=this.frameTime,this.frameTimeExtremes[0]=Math.min(this.frameTimeExtremes[0],this.frameTime),this.frameTimeExtremes[1]=Math.max(this.frameTimeExtremes[1],this.frameTime),t-this.frameTimeBase>2e3&&(this.frameTimeAverage=this.frameTimeCumulative/this.frameCount,this.frameRateAverage=1e3*this.frameCount/(t-this.frameTimeBase),this.frameTimeMin=this.frameTimeExtremes[0],this.frameTimeMax=this.frameTimeExtremes[1],this.frameCount=0,this.frameTimeCumulative=0,this.frameTimeBase=t,this.frameTimeExtremes=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY])},t.prototype.incrementRenderedTileCount=function(t){this.renderedTileCount+=t},t.prototype.setTerrainTileCount=function(t){this.terrainTileCount=t},t.prototype.incrementImageTileCount=function(t){this.imageTileCount=t},t.prototype.incrementTileUpdateCount=function(t){this.tileUpdateCount+=t},t.prototype.incrementTextureLoadCount=function(t){this.textureLoadCount+=t},t.prototype.incrementVboLoadCount=function(t){this.vboLoadCount+=t},t})),i("render/FramebufferTexture",["../error/ArgumentError","../util/Logger","../util/WWMath"],(function(t,e){"use strict";var n=function(n,r,i,o){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"FramebufferTexture","constructor","missingGlContext"));if(r<0||i<0)throw new t(e.logMessage(e.LEVEL_SEVERE,"FramebufferTexture","constructor","The framebuffer width or height is less than zero."));this.width=r,this.height=i,this.depth=o,this.size=r*i*4+(o?r*i*2:0),this.framebufferId=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,this.framebufferId),this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r,i,0,n.RGBA,n.UNSIGNED_BYTE,null),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture,0),this.depthBuffer=null,o&&(this.depthBuffer=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.depthBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r,i),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer));var a=n.checkFramebufferStatus(n.FRAMEBUFFER);a!=n.FRAMEBUFFER_COMPLETE&&(e.logMessage(e.LEVEL_WARNING,"FramebufferTexture","constructor","Error creating framebuffer: "+a),this.framebufferId=null,this.texture=null,this.depthBuffer=null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)};return n.prototype.bind=function(t){return this.texture&&t.currentGlContext.bindTexture(gl.TEXTURE_2D,this.texture),!!this.texture},n})),i("render/FramebufferTile",["../error/ArgumentError","../render/FramebufferTexture","../util/Logger","../geom/Matrix","../geom/Rectangle","../render/TextureTile"],(function(t,e,n,r,i,o){"use strict";var a=function(e,i,a,s,u){if(!u||u.length<1)throw new t(n.logMessage(n.LEVEL_SEVERE,"FramebufferTile","constructor","The specified cache name is null, undefined or zero length."));o.call(this,e,i,a,s),this.gpuCacheKey=u,this.textureTransform=r.fromIdentity().setToUnitYFlip(),this.mustClear=!0};return(a.prototype=Object.create(o.prototype)).clearFramebuffer=function(t){this.mustClear=!0},a.prototype.bindFramebuffer=function(t){var e=t.gpuResourceCache.resourceForKey(this.gpuCacheKey);return e||(e=this.createFramebuffer(t)),t.bindFramebuffer(e),this.mustClear&&(this.doClearFramebuffer(t),this.mustClear=!1),!0},a.prototype.createFramebuffer=function(t){var n=new e(t.currentGlContext,this.tileWidth,this.tileHeight,!1);return t.gpuResourceCache.putResource(this.gpuCacheKey,n,n.size),n},a.prototype.doClearFramebuffer=function(t){var e=t.currentGlContext;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},a.prototype.applyInternalTransform=function(t,e){e.multiplyMatrix(this.textureTransform)},a})),i("render/FramebufferTileController",["../error/ArgumentError","../render/FramebufferTile","../util/LevelSet","../geom/Location","../util/Logger","../cache/MemoryCache","../geom/Sector","../util/Tile"],(function(t,e,n,r,i,o,a,s){"use strict";var u=function t(){this.tileWidth=256,this.tileHeight=256,this.detailControl=1.75,this.levels=new n(a.FULL_SPHERE,new r(45,45),16,this.tileWidth,this.tileHeight),this.topLevelTiles=[],this.currentTiles=[],this.currentTimestamp=null,this.currentGlobeStateKey=null,this.tileCache=new o(5e5,4e5),this.key="FramebufferTileController "+ ++t.keyPool};return u.keyPool=0,u.prototype.selectTiles=function(e,n){if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"FramebufferTileController","selectTiles","missingSector"));this.assembleTiles(e);for(var r=[],o=0,a=this.currentTiles.length;o<a;o++){var s=this.currentTiles[o];s.sector.overlaps(n)&&(s.selected=!0,r.push(s))}return r},u.prototype.render=function(t){if(0!=this.currentTiles.length){for(var e=[],n=0,r=this.currentTiles.length;n<r;n++){var i=this.currentTiles[n];i.selected&&e.push(i)}t.surfaceTileRenderer.renderTiles(t,e,1);var o=t.currentGlContext,a=t.currentFramebuffer;try{for(o.clearColor(0,0,0,0),n=0,r=e.length;n<r;n++)(i=e[n]).selected=!1,i.bindFramebuffer(t),o.clear(o.COLOR_BUFFER_BIT)}finally{t.bindFramebuffer(a)}}},u.prototype.assembleTiles=function(t){var e=t.timestamp,n=t.globeStateKey;this.currentTimestamp==e&&this.currentGlobeStateKey==n||(this.doAssembleTiles(t),this.currentTimestamp=e,this.currentGlobeStateKey=n)},u.prototype.doAssembleTiles=function(t){if(this.currentTiles=[],t.terrain){0==this.topLevelTiles.length&&this.createTopLevelTiles();for(var e=0,n=this.topLevelTiles.length;e<n;e++){var r=this.topLevelTiles[e];r.update(t),this.isTileVisible(t,r)&&this.addTileOrDescendants(t,r)}}},u.prototype.createTile=function(t,n,r,i){var o=this.key+" "+n.levelNumber+"."+r+"."+i;return new e(t,n,r,i,o)},u.prototype.createTopLevelTiles=function(){s.createTilesForLevel(this.levels.firstLevel(),this,this.topLevelTiles)},u.prototype.addTileOrDescendants=function(t,e){if(this.tileMeetsRenderingCriteria(t,e))this.addTile(e);else for(var n=e.subdivideToCache(e.level.nextLevel(),this,this.tileCache),r=0,i=n.length;r<i;r++){var o=n[r];o.update(t),this.isTileVisible(t,o)&&this.addTileOrDescendants(t,o)}},u.prototype.addTile=function(t){this.currentTiles.push(t)},u.prototype.isTileVisible=function(t,e){return!(t.globe.projectionLimits&&!e.sector.overlaps(t.globe.projectionLimits))&&(t.pickingMode?e.extent.intersectsFrustum(t.pickFrustum):e.extent.intersectsFrustum(t.frustumInModelCoordinates))},u.prototype.tileMeetsRenderingCriteria=function(t,e){var n=this.detailControl;return(e.sector.minLatitude>=75||e.sector.maxLatitude<=-75)&&(n*=1.2),e.level.isLastLevel()||!e.mustSubdivide(t,n)},u})),i("globe/ElevationModel",["../error/ArgumentError","../geom/Angle","../geom/Location","../util/Logger","../util/WWUtil"],(function(t,e,n,r,i){"use strict";var o=function(){this.id=0,this.stateKey="",this.coverages=[],this.scratchLocation=new n(0,0),this.computeStateKey()};return Object.defineProperties(o.prototype,{timestamp:{get:function(){var t,e,n=0;for(t=0,e=this.coverages.length;t<e;t++){var r=this.coverages[t];n<r.timestamp&&(n=r.timestamp)}return n}},minElevation:{get:function(){for(var t=Number.MAX_VALUE,e=0,n=this.coverages.length;e<n;e++){var r=this.coverages[e];r.enabled&&r.minElevation<t&&(t=r.minElevation)}return t!==Number.MAX_VALUE?t:0}},maxElevation:{get:function(){for(var t=-Number.MAX_VALUE,e=0,n=this.coverages.length;e<n;e++){var r=this.coverages[e];r.enabled&&r.maxElevation>t&&(t=r.maxElevation)}return t!==-Number.MAX_VALUE?t:0}}}),o.idPool=0,o.prototype.computeStateKey=function(){this.id=++o.idPool,this.stateKey="elevationModel "+this.id.toString()+" "},o.prototype.coverageComparator=function(t,e){var n=t.resolution,r=e.resolution;return n>r?-1:n===r?0:1},o.prototype.performCoverageListChangedActions=function(){this.coverages.length>1&&this.coverages.sort(this.coverageComparator),this.computeStateKey()},o.prototype.addCoverage=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","addCoverage","missingCoverage"));return!this.containsCoverage(e)&&(this.coverages.push(e),this.performCoverageListChangedActions(),!0)},o.prototype.removeAllCoverages=function(){this.coverages.length>0&&(this.coverages=[],this.performCoverageListChangedActions())},o.prototype.removeCoverage=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","removeCoverage","missingCoverage"));var n=this.coverages.indexOf(e);n>=0&&(this.coverages.splice(n,1),this.performCoverageListChangedActions())},o.prototype.containsCoverage=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","containsCoverage","missingCoverage"));return this.coverages.indexOf(e)>=0},o.prototype.minAndMaxElevationsForSector=function(e){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","minAndMaxElevationsForSector","missingSector"));for(var n=[Number.MAX_VALUE,-Number.MAX_VALUE],i=this.coverages.length-1;i>=0;i--){var o=this.coverages[i];if(o.enabled&&o.coverageSector.intersects(e)&&o.minAndMaxElevationsForSector(e,n))break}return n[0]!==Number.MAX_VALUE?n:[0,0]},o.prototype.elevationAtLocation=function(t,e){var n;for(n=this.coverages.length-1;n>=0;n--){var r=this.coverages[n];if(r.enabled&&r.coverageSector.containsLocation(t,e)){var i=r.elevationAtLocation(t,e);if(null!==i)return i}}return 0},o.prototype.preferredCoverageIndex=function(t,e,n){var r,i=this.coverages.length,o=Number.MAX_VALUE,a=-1;for(r=0;r<i;r++){var s=this.coverages[r];if(s.enabled&&(null!==t&&s.coverageSector.intersects(t)||null!==e&&s.coverageSector.containsLocation(e.latitude,e.longitude))){var u=Math.abs(s.resolution-n);if(u>o)return a;o=u,a=r}}return a},o.prototype.bestCoverageAtLocation=function(e,n,i){if(!i||i<0)throw new t(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","bestCoverageAtLocation","invalidResolution"));this.scratchLocation.set(e,n);var o=this.preferredCoverageIndex(null,this.scratchLocation,i);return o>=0?this.coverages[o]:null},o.prototype.elevationsForGrid=function(e,n,o,a,s){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","elevationsForGrid","missingSector"));if(!n||!o||n<1||o<1)throw new t(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","elevationsForGrid","The specified number of latitudinal or longitudinal positions is less than one."));if(!a)throw new t(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","elevationsForGrid","missingTargetResolution"));if(!s)throw new t(r.logMessage(r.LEVEL_SEVERE,"ElevationModel","elevationsForGrid","missingResult"));i.fillArray(s,NaN);var u=Number.MAX_VALUE,l=!1,c=this.preferredCoverageIndex(e,null,a);if(c>=0)for(var h=c;!l&&h>=0;h--){var f=this.coverages[h];f.enabled&&f.coverageSector.intersects(e)&&(l=f.elevationsForGrid(e,n,o,s))&&(u=f.resolution)}if(!l){var p=s.length;for(h=0;h<p;h++)isNaN(s[h])&&(s[h]=0)}return u},o})),i("projections/GeographicProjection",["../error/ArgumentError","../util/Logger","../geom/Sector","../error/UnsupportedOperationError"],(function(t,e,n,r){"use strict";var i=function(t,e,n){this.displayName=t||"Geographic Projection",this.continuous=e,this.projectionLimits=n,this.is2D=!0};return i.prototype.geographicToCartesian=function(t,n,i,o,a,s){throw new r(e.logMessage(e.LEVEL_SEVERE,"GeographicProjection","geographicToCartesian","abstractInvocation"))},i.prototype.geographicToCartesianGrid=function(t,n,i,o,a,s,u,l){throw new r(e.logMessage(e.LEVEL_SEVERE,"GeographicProjection","geographicToCartesianGrid","abstractInvocation"))},i.prototype.cartesianToGeographic=function(t,n,i,o,a,s){throw new r(e.logMessage(e.LEVEL_SEVERE,"GeographicProjection","cartesianToGeographic","abstractInvocation"))},i.prototype.northTangentAtLocation=function(n,r,i,o){if(!o)throw new t(e.logMessage(e.LEVEL_SEVERE,"ProjectionEquirectangular","northTangentAtLocation","missingResult"));return o[0]=0,o[1]=1,o[2]=0,o},i.prototype.northTangentAtPoint=function(n,r,i,o,a,s){if(!s)throw new t(e.logMessage(e.LEVEL_SEVERE,"ProjectionEquirectangular","northTangentAtPoint","missingResult"));return s[0]=0,s[1]=1,s[2]=0,s},i.prototype.surfaceNormalAtLocation=function(n,r,i,o){if(!o)throw new t(e.logMessage(e.LEVEL_SEVERE,"GeographicProjection","surfaceNormalAtLocation","missingResult"));return o[0]=0,o[1]=0,o[2]=1,o},i.prototype.surfaceNormalAtPoint=function(n,r,i,o,a){if(!a)throw new t(e.logMessage(e.LEVEL_SEVERE,"GeographicProjection","surfaceNormalAtPoint","missingResult"));return a[0]=0,a[1]=0,a[2]=1,a},i})),i("projections/ProjectionWgs84",["../geom/Angle","../error/ArgumentError","../projections/GeographicProjection","../util/Logger","../geom/Position","../geom/Vec3","../util/WWMath"],(function(t,e,n,r,i,o,a){"use strict";var s=function(){n.call(this,"WGS84",!1,null),this.is2D=!1,this.scratchPosition=new i(0,0,0)};return s.prototype=Object.create(n.prototype),Object.defineProperties(s.prototype,{stateKey:{get:function(){return"projection wgs84 "}}}),s.prototype.geographicToCartesian=function(n,i,o,a,s,u){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionWgs84","geographicToCartesian","missingGlobe"));var l=Math.cos(i*t.DEGREES_TO_RADIANS),c=Math.sin(i*t.DEGREES_TO_RADIANS),h=Math.cos(o*t.DEGREES_TO_RADIANS),f=Math.sin(o*t.DEGREES_TO_RADIANS),p=n.equatorialRadius/Math.sqrt(1-n.eccentricitySquared*c*c);return u[0]=(p+a)*l*f,u[1]=(p*(1-n.eccentricitySquared)+a)*c,u[2]=(p+a)*l*h,u},s.prototype.geographicToCartesianGrid=function(n,i,a,s,u,l,c,h){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionWgs84","geographicToCartesianGrid","missingGlobe"));var f,p,d,g,m,y,v,E,_=i.minLatitude*t.DEGREES_TO_RADIANS,b=i.maxLatitude*t.DEGREES_TO_RADIANS,S=i.minLongitude*t.DEGREES_TO_RADIANS,w=i.maxLongitude*t.DEGREES_TO_RADIANS,x=(b-_)/(a>1?a-1:1),T=(w-S)/(s>1?s-1:1),L=l||new o(0,0,0),C=0,A=0,M=new Float64Array(s),R=new Float64Array(s);for(p=0,g=S;p<s;p++,g+=T)p===s-1&&(g=w),M[p]=Math.cos(g),R[p]=Math.sin(g);for(f=0,d=_;f<a;f++,d+=x)for(f===a-1&&(d=b),v=Math.cos(d),E=Math.sin(d),m=n.equatorialRadius/Math.sqrt(1-n.eccentricitySquared*E*E),p=0;p<s;p++)y=u[C++],h[A++]=(m+y)*v*R[p]-L[0],h[A++]=(m*(1-n.eccentricitySquared)+y)*E-L[1],h[A++]=(m+y)*v*M[p]-L[2];return h},s.prototype.cartesianToGeographic=function(n,i,o,s,u,l){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionWgs84","cartesianToGeographic","missingGlobe"));var c,h,f,p,d,g,m,y,v,E,_,b,S,w,x,T=s,L=i,C=o,A=T*T+L*L,M=Math.sqrt(A),R=n.equatorialRadius,O=1/(R*R),P=n.eccentricitySquared,I=P*P,N=A*O,D=C*C*(1-P)*O,k=(N+D-I)/6,F=8*k*k*k+I*N*D;return F>0||0!=D?(F>0?(p=Math.sqrt(F),d=Math.sqrt(I*N*D),f=F>10*P?k+.5*(g=a.cbrt((p+d)*(p+d)))+2*k*k/g:k+.5*a.cbrt((p+d)*(p+d))+.5*a.cbrt((p-d)*(p-d))):(p=Math.sqrt(-F),d=Math.sqrt(-8*k*k*k),g=Math.sqrt(I*N*D),m=2*Math.atan2(g,p+d)/3,f=-4*k*Math.sin(m)*Math.cos(Math.PI/6+m)),v=P*(f+(y=Math.sqrt(f*f+I*D))-D)/(2*y),_=(E=(f+y)/(Math.sqrt(v*v+f+y)+v))*M/(E+P),c=(E+P-1)*(b=Math.sqrt(_*_+C*C))/E,h=2*Math.atan2(C,b+_)):(c=-R*(p=Math.sqrt(1-P))*(d=Math.sqrt(P-N))/(S=Math.sqrt(P)),h=d/(S*d+p*Math.sqrt(N))),w=((x=Math.sqrt(2))-1)*L<M+T?2*Math.atan2(L,M+T):M+L<(x+1)*T?.5*-Math.PI+2*Math.atan2(T,M-L):.5*Math.PI-2*Math.atan2(T,M+L),l.latitude=t.RADIANS_TO_DEGREES*h,l.longitude=t.RADIANS_TO_DEGREES*w,l.altitude=c,l},s.prototype.northTangentAtLocation=function(e,n,r,i){var o=Math.cos(n*t.DEGREES_TO_RADIANS),a=Math.cos(r*t.DEGREES_TO_RADIANS),s=Math.sin(n*t.DEGREES_TO_RADIANS),u=Math.sin(r*t.DEGREES_TO_RADIANS);return i[0]=-s*u,i[1]=o,i[2]=-s*a,i.normalize()},s.prototype.northTangentAtPoint=function(t,e,n,r,i,a){return this.cartesianToGeographic(t,e,n,r,o.ZERO,this.scratchPosition),this.northTangentAtLocation(t,this.scratchPosition.latitude,this.scratchPosition.longitude,a)},s.prototype.surfaceNormalAtLocation=function(e,n,r,i){var o=Math.cos(n*t.DEGREES_TO_RADIANS),a=Math.cos(r*t.DEGREES_TO_RADIANS),s=Math.sin(n*t.DEGREES_TO_RADIANS),u=Math.sin(r*t.DEGREES_TO_RADIANS);return i[0]=o*u,i[1]=s,i[2]=o*a,i.normalize()},s.prototype.surfaceNormalAtPoint=function(t,n,i,o,a){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionWgs84","surfaceNormalAtPoint","missingGlobe"));var s=t.equatorialRadius*t.equatorialRadius,u=t.polarRadius*t.polarRadius;return a[0]=n/s,a[1]=i/u,a[2]=o/s,a.normalize()},s})),i("globe/Terrain",["../error/ArgumentError","../util/Logger","../geom/Vec3"],(function(t,e,n){"use strict";var r=function(t,e,n,r){this.globe=t,this.verticalExaggeration=r,this.sector=n.sector,this.tessellator=e,this.surfaceGeometry=n.tileArray,this.stateKey=t.stateKey+" ve "+r.toString()};return r.scratchPoint=new n(0,0,0),r.prototype.surfacePoint=function(n,i,o,a){if(!a)throw new t(e.logMessage(e.LEVEL_SEVERE,"Terrain","surfacePoint","missingResult"));for(var s=0,u=this.surfaceGeometry.length;s<u;s++)if(this.surfaceGeometry[s].sector.containsLocation(n,i)){if(this.surfaceGeometry[s].surfacePoint(n,i,a),o){var l=this.globe.surfaceNormalAtPoint(a[0],a[1],a[2],r.scratchPoint);a[0]+=l[0]*o,a[1]+=l[1]*o,a[2]+=l[2]*o}return a}var c=o+this.globe.elevationAtLocation(n,i)*this.verticalExaggeration;return this.globe.computePointFromPosition(n,i,c,a),a},r.prototype.surfacePointForMode=function(n,r,i,o,a){if(!a)throw new t(e.logMessage(e.LEVEL_SEVERE,"Terrain","surfacePointForMode","missingResult"));if(o||(o=WorldWind.ABSOLUTE),o===WorldWind.CLAMP_TO_GROUND)return this.surfacePoint(n,r,0,a);if(o===WorldWind.RELATIVE_TO_GROUND)return this.surfacePoint(n,r,i,a);var s=i*this.verticalExaggeration;return this.globe.computePointFromPosition(n,r,s,a),a},r.prototype.beginRendering=function(t){this.globe&&this.globe.tessellator&&this.globe.tessellator.beginRendering(t)},r.prototype.endRendering=function(t){this.globe&&this.globe.tessellator&&this.globe.tessellator.endRendering(t)},r.prototype.beginRenderingTile=function(n,r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"Terrain","beginRenderingTile","missingTile"));this.globe&&this.globe.tessellator&&this.globe.tessellator.beginRenderingTile(n,r)},r.prototype.endRenderingTile=function(t,e){},r.prototype.renderTile=function(n,r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"Terrain","renderTile","missingTile"));this.globe&&this.globe.tessellator&&this.globe.tessellator.renderTile(n,r)},r.prototype.pick=function(t){this.globe&&this.globe.tessellator&&this.globe.tessellator.pick(t,this.surfaceGeometry,this)},r})),i("globe/TerrainTile",["../error/ArgumentError","../util/Logger","../geom/Matrix","../util/Tile"],(function(t,e,n,r){"use strict";var i=function(t,e,i,o){r.call(this,t,e,i,o),this.transformationMatrix=n.fromIdentity(),this.points=null,this.pointsStateKey=null,this.pointsVboStateKey=null,this.neighborMap={},this.neighborMap[WorldWind.NORTH]=null,this.neighborMap[WorldWind.SOUTH]=null,this.neighborMap[WorldWind.EAST]=null,this.neighborMap[WorldWind.WEST]=null,this._stateKey=null,this._elevationTimestamp=null,this.scratchArray=[]};return i.prototype=Object.create(r.prototype),Object.defineProperties(i.prototype,{stateKey:{get:function(){return this._stateKey||(this._stateKey=this.computeStateKey()),this._stateKey}}}),i.prototype.neighborLevel=function(t){return this.neighborMap[t]},i.prototype.setNeighborLevel=function(t,e){this.neighborMap[t]=e,this._stateKey=null},i.prototype.surfacePoint=function(n,r,i){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"TerrainTile","surfacePoint","missingResult"));var o,a,s,u,l,c,h,f,p,d,g=this.sector,m=g.minLatitude,y=g.maxLatitude,v=g.minLongitude,E=g.maxLongitude,_=this.tileWidth,b=this.tileHeight;a=(n-m)/(y-m)*b,s=(o=(r-v)/(E-v)*_)<_?Math.floor(o):_-1,u=a<b?Math.floor(a):b-1,l=_+1,c=this.points,h=this.scratchArray,f=3*(s+u*l);for(var S=0;S<6;S++)h[S]=c[f+S];f=3*(s+(u+1)*l);for(var w=6;w<12;w++)h[w]=c[f+(w-6)];return(p=o<_?o-Math.floor(o):1)>(d=a<b?a-Math.floor(a):1)?(i[0]=h[0]+p*(h[3]-h[0])+d*(h[6]-h[0]),i[1]=h[1]+p*(h[4]-h[1])+d*(h[7]-h[1]),i[2]=h[2]+p*(h[5]-h[2])+d*(h[8]-h[2])):(i[0]=h[9]+(1-p)*(h[6]-h[9])+(1-d)*(h[3]-h[9]),i[1]=h[10]+(1-p)*(h[7]-h[10])+(1-d)*(h[4]-h[10]),i[2]=h[11]+(1-p)*(h[8]-h[11])+(1-d)*(h[5]-h[11])),i[0]+=this.referencePoint[0],i[1]+=this.referencePoint[1],i[2]+=this.referencePoint[2],i},i.prototype.update=function(t){r.prototype.update.call(this,t);var e=t.globe.elevationTimestamp();this._elevationTimestamp!=e&&(this._elevationTimestamp=e,this._stateKey=null)},i.prototype.computeStateKey=function(){var t=[];return t.push(this._elevationTimestamp),t.push(this.neighborMap[WorldWind.NORTH]?this.neighborMap[WorldWind.NORTH].compare(this.level):0),t.push(this.neighborMap[WorldWind.SOUTH]?this.neighborMap[WorldWind.SOUTH].compare(this.level):0),t.push(this.neighborMap[WorldWind.EAST]?this.neighborMap[WorldWind.EAST].compare(this.level):0),t.push(this.neighborMap[WorldWind.WEST]?this.neighborMap[WorldWind.WEST].compare(this.level):0),t.join(".")},i})),i("globe/TerrainTileList",["../error/ArgumentError","../util/Logger","../geom/Sector"],(function(t,e,n){"use strict";var r=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"TerrainTileList","TerrainTileList","missingTessellator"));this.tessellator=n,this.sector=null,this.tileArray=[]};return Object.defineProperties(r.prototype,{length:{get:function(){return this.tileArray.length}}}),r.prototype.addTile=function(r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"TerrainTileList","addTile","missingTile"));-1==this.tileArray.indexOf(r)&&(this.tileArray.push(r),this.sector?this.sector.union(r.sector):(this.sector=new n(0,0,0,0),this.sector.copy(r.sector)))},r.prototype.removeAllTiles=function(){this.tileArray=[],this.sector=null},r})),i("globe/Tessellator",["../geom/Angle","../error/ArgumentError","../shaders/BasicProgram","../globe/Globe","../shaders/GpuProgram","../util/Level","../util/LevelSet","../geom/Location","../util/Logger","../geom/Matrix","../cache/MemoryCache","../error/NotYetImplementedError","../pick/PickedObject","../geom/Position","../geom/Rectangle","../geom/Sector","../globe/Terrain","../globe/TerrainTile","../globe/TerrainTileList","../util/Tile","../util/WWMath","../util/WWUtil"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_,b){"use strict";var S=function(){this.numRowsTilesInTopLevel=4,this.numColumnsTilesInTopLevel=8,this.maximumSubdivisionDepth=15,this.tileWidth=32,this.tileHeight=32,this.detailControl=40,this.levels=new a(g.FULL_SPHERE,new s(180/this.numRowsTilesInTopLevel,360/this.numColumnsTilesInTopLevel),this.maximumSubdivisionDepth,this.tileWidth,this.tileHeight),this.topLevelTiles={},this.currentTiles=new v(this),this.tileCache=new c(5e6,4e6),this.elevationTimestamp=void 0,this.lastModelViewProjection=l.fromIdentity(),this.vertexPointLocation=-1,this.vertexTexCoordLocation=-1,this.texCoords=null,this.texCoordVboCacheKey="global_tex_coords",this.indices=null,this.indicesVboCacheKey="global_indices",this.baseIndices=null,this.baseIndicesOffset=null,this.numBaseIndices=null,this.indicesNorth=null,this.indicesNorthOffset=null,this.numIndicesNorth=null,this.indicesSouth=null,this.indicesSouthOffset=null,this.numIndicesSouth=null,this.indicesWest=null,this.indicesWestOffset=null,this.numIndicesWest=null,this.indicesEast=null,this.indicesEastOffset=null,this.numIndicesEast=null,this.indicesLoresNorth=null,this.indicesLoresNorthOffset=null,this.numIndicesLoresNorth=null,this.indicesLoresSouth=null,this.indicesLoresSouthOffset=null,this.numIndicesLoresSouth=null,this.indicesLoresWest=null,this.indicesLoresWestOffset=null,this.numIndicesLoresWest=null,this.indicesLoresEast=null,this.indicesLoresEastOffset=null,this.numIndicesLoresEast=null,this.outlineIndicesOffset=null,this.numOutlineIndices=null,this.wireframeIndicesOffset=null,this.numWireframeIndices=null,this.scratchMatrix=l.fromIdentity(),this.scratchElevations=null,this.scratchPrevElevations=null,this.corners={},this.tiles=[]};return S.prototype.tessellate=function(t){if(!t)throw new e(u.logMessage(u.LEVEL_SEVERE,"Tessellator","tessellate","missingDC"));var n=t.globe.elevationTimestamp();if(this.lastGlobeStateKey===t.globeStateKey&&this.lastVerticalExaggeration===t.verticalExaggeration&&this.elevationTimestamp===n&&t.modelviewProjection.equals(this.lastModelViewProjection))return this.lastTerrain;this.lastModelViewProjection.copy(t.modelviewProjection),this.lastGlobeStateKey=t.globeStateKey,this.elevationTimestamp=n,this.lastVerticalExaggeration=t.verticalExaggeration,this.currentTiles.removeAllTiles(),this.topLevelTiles[t.globeStateKey]&&0!=this.topLevelTiles[t.globeStateKey].length||this.createTopLevelTiles(t),this.corners={},this.tiles=[];for(var r=0,i=this.topLevelTiles[t.globeStateKey].length;r<i;r+=1){var o=this.topLevelTiles[t.globeStateKey][r];o.update(t),this.isTileVisible(t,o)&&this.addTileOrDescendants(t,o)}return this.refineNeighbors(t),this.finishTessellating(t),this.lastTerrain=0===this.currentTiles.length?null:new m(t.globe,this,this.currentTiles,t.verticalExaggeration),this.lastTerrain},S.prototype.createTile=function(t,n,r,i){if(!t)throw new e(u.logMessage(u.LEVEL_SEVERE,"Tile","constructor","missingSector"));if(!n)throw new e(u.logMessage(u.LEVEL_SEVERE,"Tile","constructor","The specified level is null or undefined."));if(r<0||i<0)throw new e(u.logMessage(u.LEVEL_SEVERE,"Tile","constructor","The specified row or column is less than zero."));return new y(t,n,r,i)},S.prototype.beginRendering=function(t){var e=t.currentProgram;if(e){this.buildSharedGeometry(),this.cacheSharedGeometryVBOs(t);var n=t.currentGlContext,r=t.gpuResourceCache;if(this.vertexPointLocation=e.attributeLocation(n,"vertexPoint"),this.vertexTexCoordLocation=e.attributeLocation(n,"vertexTexCoord"),n.enableVertexAttribArray(this.vertexPointLocation),this.vertexTexCoordLocation>=0){var i=r.resourceForKey(this.texCoordVboCacheKey);n.bindBuffer(n.ARRAY_BUFFER,i),n.vertexAttribPointer(this.vertexTexCoordLocation,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(this.vertexTexCoordLocation)}var o=r.resourceForKey(this.indicesVboCacheKey);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o)}else u.logMessage(u.LEVEL_INFO,"Tessellator","beginRendering","Current Program is empty")},S.prototype.endRendering=function(t){var e=t.currentGlContext;e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.vertexPointLocation>=0&&e.disableVertexAttribArray(this.vertexPointLocation),this.vertexTexCoordLocation>=0&&e.disableVertexAttribArray(this.vertexTexCoordLocation)},S.prototype.beginRenderingTile=function(t,n){if(!n)throw new e(u.logMessage(u.LEVEL_SEVERE,"Tessellator","beginRenderingTile","missingTile"));var r=t.currentGlContext,i=t.gpuResourceCache;this.scratchMatrix.setToMultiply(t.modelviewProjection,n.transformationMatrix),t.currentProgram.loadModelviewProjection(r,this.scratchMatrix);var o=t.globeStateKey+n.tileKey,a=i.resourceForKey(o);a?n.pointsVboStateKey!=n.pointsStateKey?(r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferSubData(r.ARRAY_BUFFER,0,n.points),n.pointsVboStateKey=n.pointsStateKey):t.currentGlContext.bindBuffer(r.ARRAY_BUFFER,a):(a=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,n.points,r.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1),i.putResource(o,a,4*n.points.length),n.pointsVboStateKey=n.pointsStateKey),r.vertexAttribPointer(this.vertexPointLocation,3,r.FLOAT,!1,0,0)},S.prototype.endRenderingTile=function(t,e){},S.prototype.renderTile=function(t,n){if(!n)throw new e(u.logMessage(u.LEVEL_SEVERE,"Tessellator","renderTile","missingTile"));var r=t.currentGlContext,i=r.TRIANGLE_STRIP;r.drawElements(i,this.numBaseIndices,r.UNSIGNED_SHORT,2*this.baseIndicesOffset);var o,a=n.level;(o=n.neighborLevel(WorldWind.NORTH))&&o.compare(a)<0?r.drawElements(i,this.numIndicesLoresNorth,r.UNSIGNED_SHORT,2*this.indicesLoresNorthOffset):r.drawElements(i,this.numIndicesNorth,r.UNSIGNED_SHORT,2*this.indicesNorthOffset),(o=n.neighborLevel(WorldWind.SOUTH))&&o.compare(a)<0?r.drawElements(i,this.numIndicesLoresSouth,r.UNSIGNED_SHORT,2*this.indicesLoresSouthOffset):r.drawElements(i,this.numIndicesSouth,r.UNSIGNED_SHORT,2*this.indicesSouthOffset),(o=n.neighborLevel(WorldWind.WEST))&&o.compare(a)<0?r.drawElements(i,this.numIndicesLoresWest,r.UNSIGNED_SHORT,2*this.indicesLoresWestOffset):r.drawElements(i,this.numIndicesWest,r.UNSIGNED_SHORT,2*this.indicesWestOffset),(o=n.neighborLevel(WorldWind.EAST))&&o.compare(a)<0?r.drawElements(i,this.numIndicesLoresEast,r.UNSIGNED_SHORT,2*this.indicesLoresEastOffset):r.drawElements(i,this.numIndicesEast,r.UNSIGNED_SHORT,2*this.indicesEastOffset)},S.prototype.renderWireframeTile=function(t,n){if(!n)throw new e(u.logMessage(u.LEVEL_SEVERE,"Tessellator","renderWireframeTile","missingTile"));var r=t.currentGlContext;this.vertexTexCoordLocation>=0&&r.disableVertexAttribArray(this.vertexTexCoordLocation),r.drawElements(r.LINES,this.numWireframeIndices,r.UNSIGNED_SHORT,2*this.wireframeIndicesOffset)},S.prototype.renderTileOutline=function(t,n){if(!n)throw new e(u.logMessage(u.LEVEL_SEVERE,"Tessellator","renderTileOutline","missingTile"));var r=t.currentGlContext;this.vertexTexCoordLocation>=0&&r.disableVertexAttribArray(this.vertexTexCoordLocation),r.drawElements(r.LINE_LOOP,this.numOutlineIndices,r.UNSIGNED_SHORT,2*this.outlineIndicesOffset)},S.prototype.pick=function(t,n,r){if(!t)throw new e(u.logMessage(u.LEVEL_SEVERE,"Tessellator","pick","missingDc"));if(!n)throw new e(u.logMessage(u.LEVEL_SEVERE,"Tessellator","pick","missingList"));for(var i=null,o=r||this,a=new p(0,0,0),s=[],l=0,c=n.length;l<c;l++){var h=n[l];h.extent.intersectsFrustum(t.pickFrustum)&&s.push(h)}if(t.pickTerrainOnly||(i=t.uniquePickColor(),this.drawPickTiles(t,s,i)),!t.regionPicking){var d=t.pickRay.clone(),g=this.computeNearestIntersection(d,s);g&&(t.globe.computePositionFromPoint(g[0],g[1],g[2],a),a.altitude=t.globe.elevationAtLocation(a.latitude,a.longitude),t.addPickedObject(new f(i,o,a,null,!0)))}},S.prototype.drawPickTiles=function(t,e,r){var i=t.currentGlContext;try{t.findAndBindProgram(n),t.currentProgram.loadColor(i,r),this.beginRendering(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];this.beginRenderingTile(t,s),this.renderTile(t,s),this.endRenderingTile(t,s)}}finally{this.endRendering(t)}},S.prototype.computeNearestIntersection=function(t,e){for(var n=[],r=0,i=e.length;r<i;r++)this.computeIntersections(t,e[r],n);if(0==n.length)return null;var o,a=Number.POSITIVE_INFINITY;for(r=0,i=n.length;r<i;r++){var s=t.origin.distanceToSquared(n[r]);a>s&&(a=s,o=r)}return n[o]},S.prototype.computeIntersections=function(t,e,n){var r,i,o=e.level,a=e.points,s=n.length;t.origin.subtract(e.referencePoint),this.buildSharedGeometry(e),i=this.baseIndices,_.computeTriStripIntersections(t,a,i,n),i=(r=e.neighborLevel(WorldWind.SOUTH))&&r.compare(o)<0?this.indicesLoresSouth:this.indicesSouth,_.computeTriStripIntersections(t,a,i,n),i=(r=e.neighborLevel(WorldWind.WEST))&&r.compare(o)<0?this.indicesLoresWest:this.indicesWest,_.computeTriStripIntersections(t,a,i,n),i=(r=e.neighborLevel(WorldWind.EAST))&&r.compare(o)<0?this.indicesLoresEast:this.indicesEast,_.computeTriStripIntersections(t,a,i,n),i=(r=e.neighborLevel(WorldWind.NORTH))&&r.compare(o)<0?this.indicesLoresNorth:this.indicesNorth,_.computeTriStripIntersections(t,a,i,n),t.origin.add(e.referencePoint);for(var u=s,l=n.length;u<l;u++)n[u].add(e.referencePoint)},S.prototype.createTopLevelTiles=function(t){this.topLevelTiles[t.globeStateKey]=[],E.createTilesForLevel(this.levels.firstLevel(),this,this.topLevelTiles[t.globeStateKey])},S.prototype.addTileOrDescendants=function(t,e){return this.tileMeetsRenderCriteria(t,e)?void this.addTile(t,e):void this.addTileDescendants(t,e)},S.prototype.addTileDescendants=function(t,e){for(var n=e.level.nextLevel(),r=e.subdivideToCache(n,this,this.tileCache),i=0;i<r.length;i+=1){var o=r[i];o.update(t),this.levels.sector.intersects(o.sector)&&this.isTileVisible(t,o)&&this.addTileOrDescendants(t,o)}},S.prototype.addTile=function(t,e){var n=this.tiles.length;this.tiles.push(e);var r,i=e.sector,o=[i.maxLatitude,i.maxLongitude].toString(),a=[i.minLatitude,i.maxLongitude].toString(),s=[i.maxLatitude,i.minLongitude].toString(),u=[i.minLatitude,i.minLongitude].toString();(r=this.corners[u])?r.sw=n:this.corners[u]={sw:n},(r=this.corners[s])?r.nw=n:this.corners[s]={nw:n},(r=this.corners[a])?r.se=n:this.corners[a]={se:n},(r=this.corners[o])?r.ne=n:this.corners[o]={ne:n}},S.prototype.refineNeighbors=function(t){for(var e={},n=0,r=this.tiles.length;n<r;n+=1){var i,o,a=(d=this.tiles[n]).level.levelNumber,s=d.sector,u=[s.maxLatitude,s.maxLongitude].toString(),l=[s.minLatitude,s.maxLongitude].toString(),c=[s.maxLatitude,s.minLongitude].toString(),h=[s.minLatitude,s.minLongitude].toString();(i=this.corners[u]).hasOwnProperty("se")&&(o=i.se,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),i.hasOwnProperty("nw")&&(o=i.nw,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),(i=this.corners[l]).hasOwnProperty("ne")&&(o=i.ne,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),i.hasOwnProperty("sw")&&(o=i.sw,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),(i=this.corners[c]).hasOwnProperty("ne")&&(o=i.ne,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),i.hasOwnProperty("sw")&&(o=i.sw,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),(i=this.corners[h]).hasOwnProperty("se")&&(o=i.se,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0))),i.hasOwnProperty("nw")&&(o=i.nw,this.tiles[o].level.levelNumber<a-1&&(e[o]||(e[o]=!0)))}var f=[],p=[];for(n=0,r=this.tiles.length;n<r;n+=1)d=this.tiles[n],e[n]?f.push(d):p.push(d);if(f.length>0){for(this.tiles=[],this.corners={},n=0,r=p.length;n<r;n+=1)d=p[n],this.addTile(t,d);for(n=0,r=f.length;n<r;n+=1){var d=f[n];this.addTileDescendants(t,d)}this.refineNeighbors(t)}},S.prototype.finishTessellating=function(t){for(var e=0,n=this.tiles.length;e<n;e+=1){var r=this.tiles[e];this.setNeighbors(r),this.regenerateTileGeometryIfNeeded(t,r),this.currentTiles.addTile(r)}},S.prototype.setNeighbors=function(t){var e=t.sector,n=[e.maxLatitude,e.maxLongitude].toString(),r=[e.minLatitude,e.maxLongitude].toString(),i=[e.maxLatitude,e.minLongitude].toString(),o=[e.minLatitude,e.minLongitude].toString(),a=this.corners[n],s=this.corners[r],u=this.corners[i],l=this.corners[o],c=-1,h=-1,f=-1,p=-1;a.hasOwnProperty("se")?c=a.se:u.hasOwnProperty("sw")&&(c=u.sw),s.hasOwnProperty("ne")?h=s.ne:l.hasOwnProperty("nw")&&(h=l.nw),a.hasOwnProperty("nw")?f=a.nw:s.hasOwnProperty("sw")&&(f=s.sw),u.hasOwnProperty("ne")?p=u.ne:l.hasOwnProperty("se")&&(p=l.se),t.setNeighborLevel(WorldWind.NORTH,c>=0?this.tiles[c].level:null),t.setNeighborLevel(WorldWind.SOUTH,h>=0?this.tiles[h].level:null),t.setNeighborLevel(WorldWind.EAST,f>=0?this.tiles[f].level:null),t.setNeighborLevel(WorldWind.WEST,p>=0?this.tiles[p].level:null)},S.prototype.isTileVisible=function(t,e){return!(t.globe.projectionLimits&&!e.sector.overlaps(t.globe.projectionLimits))&&e.extent.intersectsFrustum(t.frustumInModelCoordinates)},S.prototype.tileMeetsRenderCriteria=function(t,e){var n=this.detailControl;return(e.sector.minLatitude>=75||e.sector.maxLatitude<=-75)&&(n*=2),e.level.isLastLevel()||!e.mustSubdivide(t,n)},S.prototype.regenerateTileGeometryIfNeeded=function(t,e){var n=t.globeStateKey+e.stateKey+t.verticalExaggeration;e.points&&e.pointsStateKey==n||(this.regenerateTileGeometry(t,e),e.pointsStateKey=n)},S.prototype.coverageTargetResolution=function(e){return e/8*t.RADIANS_TO_DEGREES},S.prototype.regenerateTileGeometry=function(t,e){var n=e.tileHeight+1,r=e.tileWidth+1,i=e.referencePoint,o=this.scratchElevations;o||(o=new Float64Array(n*r),this.scratchElevations=o),e.points||(e.points=new Float32Array(n*r*3)),b.fillArray(o,0),t.globe.elevationsForGrid(e.sector,n,r,this.coverageTargetResolution(e.texelSize),o),this.mustAlignNeighborElevations(t,e)&&this.alignNeighborElevations(t,e,o),b.multiplyArray(o,t.verticalExaggeration),t.globe.computePointsForGrid(e.sector,n,r,o,i,e.points),e.transformationMatrix.setTranslation(i[0],i[1],i[2])},S.prototype.mustAlignNeighborElevations=function(t,e){var n=e.level,r=e.neighborLevel(WorldWind.NORTH),i=e.neighborLevel(WorldWind.SOUTH),o=e.neighborLevel(WorldWind.EAST),a=e.neighborLevel(WorldWind.WEST);return r&&r.compare(n)<0||i&&i.compare(n)<0||o&&o.compare(n)<0||a&&a.compare(n)<0},S.prototype.alignNeighborElevations=function(t,e,n){var r,i,o,a,s=e.tileHeight+1,u=e.tileWidth+1,l=e.level,c=Math.floor(s/2)+1,h=Math.floor(u/2)+1,f=l.previousLevel(),p=this.scratchPrevElevations;if(p||(p=new Float64Array(c*h),this.scratchPrevElevations=p),b.fillArray(p,0),t.globe.elevationsForGrid(e.sector,c,h,this.coverageTargetResolution(f.texelSize),p),(r=e.neighborLevel(WorldWind.NORTH))&&r.compare(l)<0)for(o=(s-1)*u,a=(c-1)*h,i=0;i<h;i++,o+=2,a+=1)n[o]=p[a],i<h-1&&(n[o+1]=.5*(p[a]+p[a+1]));if((r=e.neighborLevel(WorldWind.SOUTH))&&r.compare(l)<0)for(o=0,a=0,i=0;i<h;i++,o+=2,a+=1)n[o]=p[a],i<h-1&&(n[o+1]=.5*(p[a]+p[a+1]));if((r=e.neighborLevel(WorldWind.EAST))&&r.compare(l)<0)for(o=u-1,a=h-1,i=0;i<c;i++,o+=2*u,a+=h)n[o]=p[a],i<c-1&&(n[o+u]=.5*(p[a]+p[a+h]));if((r=e.neighborLevel(WorldWind.WEST))&&r.compare(l)<0)for(o=0,a=0,i=0;i<c;i++,o+=2*u,a+=h)n[o]=p[a],i<c-1&&(n[o+u]=.5*(p[a]+p[a+h]))},S.prototype.buildSharedGeometry=function(){var t=this.levels.tileWidth,e=this.levels.tileHeight;this.texCoords||this.buildTexCoords(t,e),this.indices||this.buildIndices(t,e)},S.prototype.buildTexCoords=function(t,e){for(var n=t+1,r=e+1,i=1/t,o=1/e,a=new Float32Array(n*r*2),s=0,u=0,l=0;u<r;u++,l+=o){u==r-1&&(l=1);for(var c=0,h=0;c<n;c++,h+=i)c==n-1&&(h=1),a[s++]=h,a[s++]=l}this.texCoords=a},S.prototype.buildIndices=function(t,e){for(var n,r=e+1,i=t+1,o=2*(r-3)*(i-2)+2*(r-3),a=[],s=0,u=1;u<i-2;u+=1){for(var l=1;l<r-1;l+=1)n=u+l*i,a[s++]=n,a[s++]=n+1;a[s++]=n+1,n=u+1+1*i,a[s++]=n}for(this.baseIndicesOffset=a.length-o,this.baseIndices=new Uint16Array(a.slice(this.baseIndicesOffset)),this.numBaseIndices=o,o=2*i-2,n=(u=i-1)+(l=r-1)*i,a[s++]=n,u=i-2;u>0;u-=1)n=u+l*i,a[s++]=n,a[s++]=n-i;for(n=(u=0)+l*i,a[s++]=n,this.indicesNorthOffset=a.length-o,this.indicesNorth=new Uint16Array(a.slice(this.indicesNorthOffset)),this.numIndicesNorth=o,o=2*i-2,n=(u=0)+(l=0)*i,a[s++]=n,u=1;u<i-1;u+=1)n=u+l*i,a[s++]=n,a[s++]=n+i;for(n=(u=i-1)+l*i,a[s++]=n,this.indicesSouthOffset=a.length-o,this.indicesSouth=new Uint16Array(a.slice(this.indicesSouthOffset)),this.numIndicesSouth=o,o=2*r-2,n=(u=0)+(l=r-1)*i,a[s++]=n,l=r-2;l>0;l-=1)n=u+l*i,a[s++]=n,a[s++]=n+1;for(n=u+(l=0)*i,a[s++]=n,this.indicesWestOffset=a.length-o,this.indicesWest=new Uint16Array(a.slice(this.indicesWestOffset)),this.numIndicesWest=o,o=2*r-2,n=(u=i-1)+(l=0)*i,a[s++]=n,l=1;l<r-1;l+=1)n=u+l*i,a[s++]=n,a[s++]=n-1;for(n=u+(l=r-1)*i,a[s++]=n,this.indicesEastOffset=a.length-o,this.indicesEast=new Uint16Array(a.slice(this.indicesEastOffset)),this.numIndicesEast=o,o=2*i-2,n=(u=i-1)+(l=r-1)*i,a[s++]=n,u=i-2;u>0;u-=1)n=(u+1&-2)+l*i,a[s++]=n,n=u+(l-1)*i,a[s++]=n;for(n=(u=0)+l*i,a[s++]=n,this.indicesLoresNorthOffset=a.length-o,this.indicesLoresNorth=new Uint16Array(a.slice(this.indicesLoresNorthOffset)),this.numIndicesLoresNorth=o,o=2*i-2,n=(u=0)+(l=0)*i,a[s++]=n,u=1;u<i-1;u+=1)n=(-2&u)+l*i,a[s++]=n,n=u+(l+1)*i,a[s++]=n;for(n=(u=i-1)+l*i,a[s++]=n,this.indicesLoresSouthOffset=a.length-o,this.indicesLoresSouth=new Uint16Array(a.slice(this.indicesLoresSouthOffset)),this.numIndicesLoresSouth=o,o=2*r-2,n=(u=0)+(l=r-1)*i,a[s++]=n,l=r-2;l>0;l-=1)n=u+(l+1&-2)*i,a[s++]=n,n=u+1+l*i,a[s++]=n;for(n=u+(l=0)*i,a[s++]=n,this.indicesLoresWestOffset=a.length-o,this.indicesLoresWest=new Uint16Array(a.slice(this.indicesLoresWestOffset)),this.numIndicesLoresWest=o,o=2*r-2,n=(u=i-1)+(l=0)*i,a[s++]=n,l=1;l<r-1;l+=1)n=u+(-2&l)*i,a[s++]=n,n=u-1+l*i,a[s++]=n;n=u+(l=r-1)*i,a[s++]=n,this.indicesLoresEastOffset=a.length-o,this.indicesLoresEast=new Uint16Array(a.slice(this.indicesLoresEastOffset)),this.numIndicesLoresEast=o;var c=this.buildWireframeIndices(t,e),h=this.buildOutlineIndices(t,e);a=a.concat(c),this.wireframeIndicesOffset=a.length-this.numWireframeIndices,a=a.concat(h),this.outlineIndicesOffset=a.length-this.numOutlineIndices,this.indices=new Uint16Array(a)},S.prototype.buildWireframeIndices=function(t,e){var n,r,i,o=e+1,a=t+1,s=2*t*o+2*e*a,u=[],l=a,c=0;for(r=0;r<o;r+=1)for(n=0;n<t;n+=1)i=n+r*l,u[c]=i,u[c+1]=i+1,c+=2;for(n=0;n<a;n+=1)for(r=0;r<e;r+=1)i=n+r*l,u[c]=i,u[c+1]=i+l,c+=2;return this.numWireframeIndices=s,u},S.prototype.buildOutlineIndices=function(t,e){var n,r,i,o=e+1,a=t+1,s=2*(o-2)+2*a+1,u=[],l=0;for(r=0,n=0;n<a;n+=1)i=n+r*a,u[l]=i,l+=1;for(n=a-1,r=1;r<o;r+=1)i=n+r*a,u[l]=i,l+=1;for(r=o-1,n=a-1;n>=0;n-=1)i=n+r*a,u[l]=i,l+=1;for(n=0,r=o-1;r>=0;r-=1)i=n+r*a,u[l]=i,l+=1;return this.numOutlineIndices=s,u},S.prototype.cacheSharedGeometryVBOs=function(t){var e=t.currentGlContext,n=t.gpuResourceCache,r=n.resourceForKey(this.texCoordVboCacheKey);r||(r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,this.texCoords,e.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1),n.putResource(this.texCoordVboCacheKey,r,4*this.texCoords.length/2));var i=n.resourceForKey(this.indicesVboCacheKey);i||(i=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1),n.putResource(this.indicesVboCacheKey,i,2*this.indices.length))},S})),i("globe/Globe",["../geom/Angle","../error/ArgumentError","../geom/BoundingBox","../globe/ElevationModel","../geom/Line","../geom/Location","../util/Logger","../geom/Position","../projections/ProjectionWgs84","../geom/Sector","../globe/Tessellator","../geom/Vec3","../util/WWMath"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f){"use strict";var p=function t(n,r){if(!n)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","constructor","Elevation model is null or undefined."));this.elevationModel=n,this.equatorialRadius=WorldWind.WGS84_SEMI_MAJOR_AXIS;var i=1/WorldWind.WGS84_INVERSE_FLATTENING;this.polarRadius=this.equatorialRadius*(1-i),this.eccentricitySquared=2*i-i*i,this.tessellator=new c,this._projection=r||new u,this._offset=0,this.offsetVector=new h(0,0,0),this.id=++t.idPool,this._stateKey="globe "+this.id.toString()+" "};return p.idPool=0,Object.defineProperties(p.prototype,{stateKey:{get:function(){return this._stateKey+this.elevationModel.stateKey+"offset "+this.offset.toString()+" "+this.projection.stateKey}},continuous:{get:function(){return this.projection.continuous}},projection:{get:function(){return this._projection},set:function(t){if(!t)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","projection","missingProjection"));this.projection!=t&&(this.tessellator=new c),this._projection=t}},projectionLimits:{get:function(){return this._projection.projectionLimits}},offset:{get:function(){return this._offset},set:function(t){this._offset=t,this.offsetVector[0]=2*t*Math.PI*this.equatorialRadius}}}),p.prototype.is2D=function(){return this.projection.is2D},p.prototype.computePointFromPosition=function(t,n,r,i){if(!i)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","computePointFromPosition","missingResult"));return this.projection.geographicToCartesian(this,t,n,r,this.offsetVector,i)},p.prototype.computePointFromLocation=function(t,n,r){if(!r)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","computePointFromLocation","missingResult"));return this.computePointFromPosition(t,n,0,r)},p.prototype.computePointsForGrid=function(t,n,r,i,o,s){if(!t)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","computePointsFromPositions","missingSector"));if(n<1||r<1)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","computePointsFromPositions","Number of latitude or longitude locations is less than one."));var u=n*r;if(!i||i.length<u)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","computePointsFromPositions","Elevations array is null, undefined or insufficient length."));if(!s||s.length<u)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","computePointsFromPositions","Result array is null, undefined or insufficient length."));return this.projection.geographicToCartesianGrid(this,t,n,r,i,o,this.offsetVector,s)},p.prototype.computePositionFromPoint=function(t,n,r,i){if(!i)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","computePositionFromPoint","missingResult"));return this.projection.cartesianToGeographic(this,t,n,r,this.offsetVector,i),this.continuous&&(i.longitude<-180?i.longitude+=360:i.longitude>180&&(i.longitude-=360)),i},p.prototype.radiusAt=function(e,n){var r=Math.sin(e*t.DEGREES_TO_RADIANS);return this.equatorialRadius/Math.sqrt(1-this.eccentricitySquared*r*r)*Math.sqrt(1+(this.eccentricitySquared*this.eccentricitySquared-2*this.eccentricitySquared)*r*r)},p.prototype.surfaceNormalAtLocation=function(n,r,i){if(!i)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","surfaceNormalAtLocation","missingResult"));if(this.projection.surfaceNormalAtLocation)return this.projection.surfaceNormalAtLocation(this,n,r,i);if(this.is2D())return i[0]=0,i[1]=0,i[2]=1,i;var o=Math.cos(n*t.DEGREES_TO_RADIANS),s=Math.cos(r*t.DEGREES_TO_RADIANS),u=Math.sin(n*t.DEGREES_TO_RADIANS),l=Math.sin(r*t.DEGREES_TO_RADIANS);return i[0]=o*l,i[1]=u,i[2]=o*s,i.normalize()},p.prototype.surfaceNormalAtPoint=function(t,n,r,i){if(!i)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","surfaceNormalAtPoint","missingResult"));if(this.projection.surfaceNormalAtPoint)return this.projection.surfaceNormalAtPoint(this,t,n,r,i);if(this.is2D())return i[0]=0,i[1]=0,i[2]=1,i;var o=this.equatorialRadius*this.equatorialRadius,s=this.polarRadius*this.polarRadius;return i[0]=t/o,i[1]=n/s,i[2]=r/o,i.normalize()},p.prototype.northTangentAtLocation=function(t,n,r){if(!r)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","northTangentAtLocation","missingResult"));return this.projection.northTangentAtLocation(this,t,n,r)},p.prototype.northTangentAtPoint=function(t,n,r,i){if(!i)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","northTangentAtPoint","missingResult"));return this.projection.northTangentAtPoint(this,t,n,r,this.offsetVector,i)},p.prototype.intersectsFrustum=function(t){if(!t)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","intersectsFrustum","missingFrustum"));if(this.is2D()){var r=new n;return r.setToSector(l.FULL_SPHERE,this,this.elevationModel.minElevation,this.elevationModel.maxElevation),r.intersectsFrustum(t)}return!(t.far.distance<=this.equatorialRadius)&&!(t.left.distance<=this.equatorialRadius)&&!(t.right.distance<=this.equatorialRadius)&&!(t.top.distance<=this.equatorialRadius)&&!(t.bottom.distance<=this.equatorialRadius)&&!(t.near.distance<=this.equatorialRadius)},p.prototype.intersectsLine=function(t,n){if(!t)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","intersectWithRay","missingLine"));if(!n)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","intersectsLine","missingResult"));var r,i=t.direction[0],o=t.direction[1],s=t.direction[2],u=t.origin[0],l=t.origin[1],c=t.origin[2];if(this.is2D())return(0!=s||0==c)&&!((r=-c/s)<0)&&(n[0]=u+i*r,n[1]=l+o*r,n[2]=c+s*r,!0);var h,f,p,d=this.equatorialRadius,g=d*d,m=d/this.polarRadius,y=m*m;return!((p=(f=2*(u*i+y*l*o+c*s))*f-4*(h=i*i+y*o*o+s*s)*(u*u+y*l*l+c*c-g))<0)&&((r=(-f-Math.sqrt(p))/(2*h))>0||(r=(-f+Math.sqrt(p))/(2*h))>0)&&(n[0]=u+i*r,n[1]=l+o*r,n[2]=c+s*r,!0)},p.prototype.elevationTimestamp=function(){return this.elevationModel.timestamp},p.prototype.minElevation=function(){return this.elevationModel.minElevation},p.prototype.maxElevation=function(){return this.elevationModel.maxElevation},p.prototype.minAndMaxElevationsForSector=function(t){if(!t)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","minAndMaxElevationsForSector","missingSector"));return this.elevationModel.minAndMaxElevationsForSector(t)},p.prototype.elevationAtLocation=function(t,e){return this.elevationModel.elevationAtLocation(t,e)},p.prototype.elevationsForGrid=function(t,n,r,i,o){if(!t)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","elevationsForSector","missingSector"));if(n<=0||r<=0)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","elevationsForSector","numLat or numLon is less than 1"));if(!o||o.length<n*r)throw new e(a.logMessage(a.LEVEL_SEVERE,"Globe","elevationsForSector","missingArray"));return this.elevationModel.elevationsForGrid(t,n,r,i,o)},p})),i("cache/GpuResourceCache",["../util/AbsentResourceList","../error/ArgumentError","../util/ImageSource","../util/Logger","../cache/MemoryCache","../render/Texture"],(function(t,e,n,r,i,o){"use strict";var a=function(n,o){if(!n||n<1)throw new e(r.logMessage(r.LEVEL_SEVERE,"GpuResourceCache","constructor","Specified cache capacity is undefined, 0 or negative."));if(!o||o<0||o>=n)throw new e(r.logMessage(r.LEVEL_SEVERE,"GpuResourceCache","constructor","Specified cache low-water value is undefined, negative or not less than the capacity."));this.entries=new i(n,o),this.cacheKeyPool=0,this.currentRetrievals={},this.absentResourceList=new t(3,6e4)};return Object.defineProperties(a.prototype,{capacity:{get:function(){return this.entries.capacity}},lowWater:{get:function(){return this.entries.lowWater}},usedCapacity:{get:function(){return this.entries.usedCapacity}},freeCapacity:{get:function(){return this.entries.freeCapacity}}}),a.prototype.generateCacheKey=function(){return"GpuResourceCache "+ ++this.cacheKeyPool},a.prototype.putResource=function(t,i,o){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"GpuResourceCache","putResource","missingKey."));if(!i)throw new e(r.logMessage(r.LEVEL_SEVERE,"GpuResourceCache","putResource","missingResource."));if(!o||o<1)throw new e(r.logMessage(r.LEVEL_SEVERE,"GpuResourceCache","putResource","The specified resource size is undefined or less than 1."));var a={resource:i};this.entries.putEntry(t instanceof n?t.key:t,a,o)},a.prototype.resourceForKey=function(t){var e=t instanceof n?this.entries.entryForKey(t.key):this.entries.entryForKey(t),r=e?e.resource:null;return null!==r&&"function"==typeof r.clearTexParameters&&r.clearTexParameters(),r},a.prototype.setResourceAgingFactor=function(t,e){this.entries.setEntryAgingFactor(t,e)},a.prototype.containsResource=function(t){return this.entries.containsKey(t instanceof n?t.key:t)},a.prototype.removeResource=function(t){this.entries.removeEntry(t instanceof n?t.key:t)},a.prototype.clear=function(){this.entries.clear(!1)},a.prototype.retrieveTexture=function(t,e,i){if(!e)return null;if(e instanceof n){var a=new o(t,e.image,i);return this.putResource(e.key,a,a.size),a}if(this.currentRetrievals[e]||this.absentResourceList.isResourceAbsent(e))return null;var s=this,u=new Image;return u.onload=function(){r.log(r.LEVEL_INFO,"Image retrieval succeeded: "+e);var n=new o(t,u,i);s.putResource(e,n,n.size),delete s.currentRetrievals[e],s.absentResourceList.unmarkResourceAbsent(e);var a=document.createEvent("Event");a.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(a)},u.onerror=function(){delete s.currentRetrievals[e],s.absentResourceList.markResourceAbsent(e),r.log(r.LEVEL_WARNING,"Image retrieval failed: "+e)},this.currentRetrievals[e]=e,u.crossOrigin="anonymous",u.src=e,null},a})),i("pick/PickedObjectList",[],(function(){"use strict";var t=function(){this.objects=[]};return t.prototype.hasNonTerrainObjects=function(){return this.objects.length>1||1===this.objects.length&&null==this.terrainObject()},t.prototype.terrainObject=function(){for(var t=0,e=this.objects.length;t<e;t++)if(this.objects[t].isTerrain)return this.objects[t];return null},t.prototype.add=function(t){if(t)if(t.isTerrain){for(var e=this.objects.length,n=0,r=this.objects.length;n<r;n++)if(this.objects[n].isTerrain){e=n;break}this.objects[e]=t}else this.objects.push(t)},t.prototype.clear=function(){this.objects=[]},t.prototype.topPickedObject=function(){var t=this.objects.length;if(t>1)for(var e=0;e<t;e++)if(this.objects[e].isOnTop)return this.objects[e];return t>0?this.objects[0]:null},t})),i("render/ScreenCreditController",["../error/ArgumentError","../util/Color","../util/Font","../layer/Layer","../util/Logger","../util/Offset","../shapes/ScreenText"],(function(t,e,n,r,i,o,a){"use strict";var s=function(){r.call(this,"ScreenCreditController"),this.creditPlacement=new o(WorldWind.OFFSET_PIXELS,11,WorldWind.OFFSET_PIXELS,2),this.creditMargin=11,this.opacity=.5,this.credits=[]};return(s.prototype=Object.create(r.prototype)).clear=function(){this.credits=[]},s.prototype.addCredit=function(e,r,s){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"ScreenCreditController","addCredit","missingText"));if(!r)throw new t(i.logMessage(i.LEVEL_SEVERE,"ScreenCreditController","addCredit","missingColor"));for(var u=0,l=this.credits.length;u<l;u++)if(this.credits[u].text===e)return;var c=new a(new o(WorldWind.OFFSET_PIXELS,0,WorldWind.OFFSET_PIXELS,0),e);c.attributes.font=new n(10),c.attributes.color=r,c.attributes.enableOutline=!1,c.attributes.offset=new o(WorldWind.OFFSET_FRACTION,0,WorldWind.OFFSET_FRACTION,0),s&&(c.userProperties.url=s),this.credits.push(c)},s.prototype.doRender=function(t){for(var e=this.creditPlacement.offsetForSize(t.viewport.width,t.viewport.height),n=0,r=this.credits.length;n<r;n++)this.credits[n].screenOffset.x=e[0],this.credits[n].screenOffset.y=e[1],this.credits[n].render(t),t.textRenderer.typeFace=this.credits[n].attributes.font,t.textRenderer.outlineWidth=this.credits[n].attributes.outlineWidth,t.textRenderer.enableOutline=this.credits[n].attributes.enableOutline,e[0]+=t.textRenderer.textSize(this.credits[n].text)[0],e[0]+=this.creditMargin},s})),i("util/HashMap",[],(function(){"use strict";var t=function(){this._entries=Object.create(null)};return t.prototype.get=function(t){return this._entries[t]},t.prototype.set=function(t,e){this._entries[t]=e},t.prototype.remove=function(t){delete this._entries[t]},t.prototype.contains=function(t){return t in this._entries},t.reIndex=function(e,n,r){var i=new t;for(var o in e._entries){var a=parseInt(o);a>=n&&(a+=r);var s=e.get(o);s.index=a,i.set(a,s)}return i},t})),i("util/PolygonSplitter",["./HashMap","../geom/Location","../geom/Position","./WWMath"],(function(t,e,n,r){"use strict";return{addedIndex:-1,poleIndexOffset:-1,splitContours:function(t,e){for(var n=!1,r=0,i=t.length;r<i;r++){var o=this.splitContour(t[r]);o.polygons.length>1&&(n=!0),e.push(o)}return n},splitContour:function(n){var r=new t,i=[],o=[],a=[],s=[],u=-1,l=this.findIntersectionAndPole(n,i,o,r);return 0===o.length?(a.push(i),s.push(r),this.formatContourOutput(a,l,u,s)):(o.length>2&&o.sort((function(t,e){return e.latitude-t.latitude})),l!==e.poles.NONE&&(i=this.handleOnePole(i,o,r,l),r=this.reindexIntersections(o,r,this.poleIndexOffset)),0===o.length?(a.push(i),s.push(r),u=0,this.formatContourOutput(a,l,u,s)):(this.linkIntersections(o,r),u=this.makePolygons(i,o,r,a,s),this.formatContourOutput(a,l,u,s)))},findIntersectionAndPole:function(t,n,i,o){var a=!1,s=90,u=-90;this.addedIndex=-1;for(var l=0,c=t.length;l<c;l++){var h=t[l],f=t[(l+1)%c];if(s=Math.min(s,h.latitude),u=Math.max(u,h.latitude),e.locationsCrossDateLine([h,f])){a=!a;var p=e.meridianIntersection(h,f,180);null===p&&(p=(h.latitude+f.latitude)/2);var d=180*r.signum(h.longitude)||180,g=this.createPoint(p,d,h.altitude),m=this.createPoint(p,-d,f.altitude);this.safeAdd(n,h,l,c);var y=n.length;o.set(y,this.makeIntersectionEntry(y)),o.set(y+1,this.makeIntersectionEntry(y+1)),i.push({indexEnd:y,indexStart:y+1,latitude:p}),n.push(g),n.push(m),this.safeAdd(n,f,l+1,c)}else this.safeAdd(n,h,l,c),this.safeAdd(n,f,l+1,c)}var v=e.poles.NONE;return a&&(v=this.determinePole(s,u)),v},determinePole:function(t,n){return t>0?e.poles.NORTH:n<0?e.poles.SOUTH:Math.abs(n)>=Math.abs(t)?e.poles.NORTH:e.poles.SOUTH},handleOnePole:function(t,n,r,i){var o;if(i===e.poles.NORTH)var a=n.shift(),s=90;else i===e.poles.SOUTH&&(a=n.pop(),s=-90);var u=r.get(a.indexEnd),l=r.get(a.indexStart);u.forPole=!0,l.forPole=!0,this.poleIndexOffset=a.indexStart,o=t.slice(0,a.indexEnd+1);var c=this.createPoint(s,t[u.index].longitude,t[u.index].altitude),h=this.createPoint(s,t[l.index].longitude,t[l.index].altitude);return o.push(c,h),o.concat(t.slice(this.poleIndexOffset))},linkIntersections:function(t,e){for(var n=0;n<t.length-1;n+=2){var r=t[n],i=t[n+1],o=e.get(r.indexEnd),a=e.get(r.indexStart),s=e.get(i.indexEnd),u=e.get(i.indexStart);o.linkTo=i.indexStart,a.linkTo=i.indexEnd,s.linkTo=r.indexStart,u.linkTo=r.indexEnd}},reindexIntersections:function(e,n,r){n=t.reIndex(n,r,2);for(var i=0,o=e.length;i<o;i++)e[i].indexEnd>=r&&(e[i].indexEnd+=2),e[i].indexStart>=r&&(e[i].indexStart+=2);return n},makePolygons:function(e,n,r,i,o){for(var a=-1,s=0;s<n.length-1;s+=2){var u=n[s],l=n[s+1],c=u.indexStart,h=l.indexEnd,f=[],p=new t,d=this.makePolygon(c,h,e,r,f,p);f.length&&(i.push(f),o.push(p),d&&(a=i.length-1)),c=l.indexStart,h=u.indexEnd,f=[],p=new t,d=this.makePolygon(c,h,e,r,f,p),f.length&&(i.push(f),o.push(p),d&&(a=i.length-1))}return a},makePolygon:function(t,e,n,r,i,o){var a=!1,s=n.length,u=!1;e<t&&(e+=s);for(var l=t;l<=e;l++){var c=l%s,h=n[c],f=r.get(c);if(f){if(f.visited)break;if(i.push(h),o.set(i.length-1,f),f.forPole)u=!0;else{if(a&&1+(l=f.linkTo-1)===t)break;a=!a,f.visited=!0}}else i.push(h)}return u},safeAdd:function(t,e,n,r){this.addedIndex<n&&this.addedIndex<r-1&&(t.push(e),this.addedIndex=n)},createPoint:function(t,r,i){return null==i?new e(t,r):new n(t,r,i)},formatContourOutput:function(t,e,n,r){return{polygons:t,pole:e,poleIndex:n,iMap:r}},makeIntersectionEntry:function(t){return null==t&&(t=-1),{visited:!1,forPole:!1,index:t,linkTo:-1}}}})),i("shapes/ShapeAttributes",["../util/Color","../util/ImageSource"],(function(t,e){"use strict";var n=function(e){this._drawInterior=!e||e._drawInterior,this._drawOutline=!e||e._drawOutline,this._enableLighting=!!e&&e._enableLighting,this._interiorColor=e?e._interiorColor.clone():t.WHITE.clone(),this._outlineColor=e?e._outlineColor.clone():t.RED.clone(),this._outlineWidth=e?e._outlineWidth:1,this._outlineStippleFactor=e?e._outlineStippleFactor:0,this._outlineStipplePattern=e?e._outlineStipplePattern:61680,this._imageSource=e?e._imageSource:null,this._depthTest=!e||e._depthTest,this._drawVerticals=!!e&&e._drawVerticals,this._applyLighting=!!e&&e._applyLighting,this.stateKeyInvalid=!0};return n.prototype.computeStateKey=function(){return"di "+this._drawInterior+" do "+this._drawOutline+" el "+this._enableLighting+" ic "+this._interiorColor.toHexString(!0)+" oc "+this._outlineColor.toHexString(!0)+" ow "+this._outlineWidth+" osf "+this._outlineStippleFactor+" osp "+this._outlineStipplePattern+" is "+(this._imageSource?this.imageSource instanceof e?this.imageSource.key:this.imageSource:"null")+" dt "+this._depthTest+" dv "+this._drawVerticals+" li "+this._applyLighting},Object.defineProperties(n.prototype,{stateKey:{get:function(){return this.stateKeyInvalid&&(this._stateKey=this.computeStateKey(),this.stateKeyInvalid=!1),this._stateKey}},drawInterior:{get:function(){return this._drawInterior},set:function(t){this._drawInterior=t,this.stateKeyInvalid=!0}},drawOutline:{get:function(){return this._drawOutline},set:function(t){this._drawOutline=t,this.stateKeyInvalid=!0}},enableLighting:{get:function(){return this._enableLighting},set:function(t){this._enableLighting=t,this.stateKeyInvalid=!0}},interiorColor:{get:function(){return this._interiorColor},set:function(t){this._interiorColor=t,this.stateKeyInvalid=!0}},outlineColor:{get:function(){return this._outlineColor},set:function(t){this._outlineColor=t,this.stateKeyInvalid=!0}},outlineWidth:{get:function(){return this._outlineWidth},set:function(t){this._outlineWidth=t,this.stateKeyInvalid=!0}},outlineStipplePattern:{get:function(){return this._outlineStipplePattern},set:function(t){this._outlineStipplePattern=t,this.stateKeyInvalid=!0}},outlineStippleFactor:{get:function(){return this._outlineStippleFactor},set:function(t){this._outlineStippleFactor=t,this.stateKeyInvalid=!0}},imageSource:{get:function(){return this._imageSource},set:function(t){this._imageSource=t,this.stateKeyInvalid=!0}},depthTest:{get:function(){return this._depthTest},set:function(t){this._depthTest=t,this.stateKeyInvalid=!0}},drawVerticals:{get:function(){return this._drawVerticals},set:function(t){this._drawVerticals=t,this.stateKeyInvalid=!0}},applyLighting:{get:function(){return this._applyLighting},set:function(t){this._applyLighting=t,this.stateKeyInvalid=!0}}}),n})),i("shapes/SurfaceShape",["../error/AbstractError","../geom/Angle","../error/ArgumentError","../geom/BoundingBox","../util/Color","../geom/Location","../util/Logger","../cache/MemoryCache","../error/NotYetImplementedError","../pick/PickedObject","../util/PolygonSplitter","../render/Renderable","../geom/Sector","../shapes/ShapeAttributes","../error/UnsupportedOperationError","../geom/Vec3"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g){"use strict";var m=function t(e){h.call(this),this._displayName="Surface Shape",this._attributes=e||new p(null),this._highlightAttributes=null,this._highlighted=!1,this._enabled=!0,this._pathType=WorldWind.GREAT_CIRCLE,this._maximumNumEdgeIntervals=t.DEFAULT_NUM_EDGE_INTERVALS,this._polarThrottle=t.DEFAULT_POLAR_THROTTLE,this._boundingSector=null,this.pickDelegate=null,this._boundingSectors=[],this._locations=null,this._boundaries=null,this._interiorGeometry=null,this._outlineGeometry=null,this._isInteriorInhibited=!1,this.stateKeyInvalid=!0,this._attributesStateKey=null,this.boundariesArePrepared=!1,this.layer=null,this.pickColor=null,this.contours=[],this.containsPole=!1,this.crossesAntiMeridian=!1,this.expirationInterval=2e3,this.shapeDataCache=new s(3,2),this.currentData=null};return m.prototype=Object.create(h.prototype),Object.defineProperties(m.prototype,{stateKey:{get:function(){if(this._attributesStateKey){var t=null;this._highlighted?this._highlightAttributes&&(t=this._highlightAttributes.stateKey):this._attributes&&(t=this._attributes.stateKey),t!=this._attributesStateKey&&(this._attributesStateKey=t,this.stateKeyInvalid=!0)}else this._highlighted?this._highlightAttributes&&(this._attributesStateKey=this._highlightAttributes.stateKey):this._attributes&&(this._attributesStateKey=this._attributes.stateKey),this._attributesStateKey&&(this.stateKeyInvalid=!0);return this.stateKeyInvalid&&(this._stateKey=this.computeStateKey()),this._stateKey}},displayName:{get:function(){return this._displayName},set:function(t){this.stateKeyInvalid=!0,this._displayName=t}},attributes:{get:function(){return this._attributes},set:function(t){this.stateKeyInvalid=!0,this._attributes=t,this._attributesStateKey=t.stateKey}},highlightAttributes:{get:function(){return this._highlightAttributes},set:function(t){this.stateKeyInvalid=!0,this._highlightAttributes=t}},highlighted:{get:function(){return this._highlighted},set:function(t){this.stateKeyInvalid=!0,this._highlighted=t}},enabled:{get:function(){return this._enabled},set:function(t){this.stateKeyInvalid=!0,this._enabled=t}},pathType:{get:function(){return this._pathType},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._pathType=t}},maximumNumEdgeIntervals:{get:function(){return this._maximumNumEdgeIntervals},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._maximumNumEdgeIntervals=t}},polarThrottle:{get:function(){return this._polarThrottle},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._polarThrottle=t}},boundingSector:{get:function(){return this._boundingSector}}}),m.staticStateKey=function(t){return t.stateKeyInvalid=!1,t.highlighted&&t._highlightAttributes?t._attributesStateKey=t._highlightAttributes.stateKey:t._attributes?t._attributesStateKey=t._attributes.stateKey:t._attributesStateKey=null,"dn "+t.displayName+" at "+(t._attributesStateKey?t._attributesStateKey:"null")+" hi "+t.highlighted+" en "+t.enabled+" pt "+t.pathType+" ne "+t.maximumNumEdgeIntervals+" po "+t.polarThrottle+" se ["+t.boundingSector.minLatitude+","+t.boundingSector.maxLatitude+","+t.boundingSector.minLongitude+","+t.boundingSector.maxLongitude+"]"},m.prototype.computeStateKey=function(){return m.staticStateKey(this)},m.prototype.area=function(t,e){throw new u(a.logMessage(a.LEVEL_SEVERE,"SurfaceShape","area","notYetImplemented"))},m.prototype.computeBoundaries=function(e){throw new t(a.logMessage(a.LEVEL_SEVERE,"SurfaceShape","computeBoundaries","abstractInvocation"))},m.prototype.intersectsFrustum=function(t){return!this.currentData||!this.currentData.extent||(t.pickingMode?this.currentData.extent.intersectsFrustum(t.pickFrustum):this.currentData.extent.intersectsFrustum(t.frustumInModelCoordinates))},m.prototype.isShapeDataCurrent=function(t,e){return e.verticalExaggeration===t.verticalExaggeration&&e.expiryTime>Date.now()},m.prototype.createShapeDataObject=function(){return{}},m.prototype.resetExpiration=function(t){t.expiryTime=Date.now()+this.expirationInterval+1e3*Math.random()},m.prototype.establishCurrentData=function(t){this.currentData=this.shapeDataCache.entryForKey(t.globeStateKey),this.currentData||(this.currentData=this.createShapeDataObject(),this.resetExpiration(this.currentData),this.shapeDataCache.putEntry(t.globeStateKey,this.currentData,1)),this.currentData.isExpired=!this.isShapeDataCurrent(t,this.currentData)},m.prototype.render=function(t){this.enabled&&(this.layer=t.currentLayer,this.prepareBoundaries(t),this.establishCurrentData(t),!this.currentData.isExpired&&this.currentData.extent||(this.computeExtent(t),this.currentData.verticalExaggeration=t.verticalExaggeration,this.resetExpiration(this.currentData)),this.currentData&&this.currentData.extent&&!this.intersectsFrustum(t)||t.surfaceShapeTileBuilder.insertSurfaceShape(this))},m.prototype.interpolateLocations=function(t){var e,n,r,i=t[0],o=i,a=!0,s=!0,u=0,l=!0;for(this._locations=[i],n=1,r=t.length;n<r;n+=1)e=o,s=a,l=!0,((a=(o=t[n]).latitude==i.latitude&&o.longitude==i.longitude)||s)&&(u+=1)>2&&(l=!1),l&&this.interpolateEdge(e,o,this._locations),this._locations.push(o),e=o;this._isInteriorInhibited||e.latitude==i.latitude&&e.longitude==i.longitude||(this.interpolateEdge(e,i,this._locations),this._locations.push(i))},m.prototype.interpolateEdge=function(t,e,n){var r,i,a=o.greatCircleDistance(t,e),s=Math.round(this._maximumNumEdgeIntervals*a/Math.PI);if(s>0){r=1/s,i=t;for(var u=this.throttledStep(r,i);u<1;u+=this.throttledStep(r,i))i=new o(0,0),o.interpolateAlongPath(this._pathType,u,t,e,i),180===t.longitude&&180===e.longitude?i.longitude=180:-180===t.longitude&&-180===e.longitude&&(i.longitude=-180),n.push(i)}},m.prototype.throttledStep=function(t,n){var r=Math.cos(n.latitude*e.DEGREES_TO_RADIANS);r*=r;var i=this._polarThrottle/(1+this._polarThrottle);return t*(1-i+i*r)},m.prototype.prepareBoundaries=function(t){if(!this.boundariesArePrepared){this.computeBoundaries(t);var e=this.formatBoundaries();this.normalizeAngles(e),e=this.interpolateBoundaries(e);var n=[],r=c.splitContours(e,n);this.contours=n,this.crossesAntiMeridian=r,this.prepareGeometry(t,n),this.prepareSectors(),this.boundariesArePrepared=!0}},m.prototype.formatBoundaries=function(){var t=[];return this._boundaries.length?(null!=this._boundaries[0].latitude?t.push(this._boundaries):t=this._boundaries,t):t},m.prototype.resetBoundaries=function(){this.boundariesArePrepared=!1,this.shapeDataCache.clear(!1)},m.prototype.normalizeAngles=function(t){for(var n=0,r=t.length;n<r;n++)for(var i=t[n],o=0,a=i.length;o<a;o++){var s=i[o];(s.longitude<-180||s.longitude>180)&&(s.longitude=e.normalizedDegreesLongitude(s.longitude)),(s.latitude<-90||s.latitude>90)&&(s.latitude=e.normalizedDegreesLatitude(s.latitude))}},m.prototype.interpolateBoundaries=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];this.interpolateLocations(i),e.push(this._locations.slice()),this._locations.length=0}return e},m.prototype.computeSectors=function(t){return this._boundingSectors&&this._boundingSectors.length>0||this.prepareBoundaries(t),this._boundingSectors},m.prototype.computeExtent=function(t){if(!this._boundingSectors||0===this._boundingSectors.length)return null;if(!this.currentData)return null;var e;if(this.currentData.extent||(this.currentData.extent=new r),1===this._boundingSectors.length)e=this._boundingSectors[0].computeBoundingPoints(t.globe,t.verticalExaggeration),this.currentData.extent.setToVec3Points(e);else{for(var n=[],i=0;i<this._boundingSectors.length;i++){e=this._boundingSectors[i].computeBoundingPoints(t.globe,t.verticalExaggeration);var o=new r;o.setToVec3Points(e);for(var a=o.getCorners(),s=0;s<a.length;s++)n.push(a[s])}this.currentData.extent.setToVec3Points(n)}return this.currentData.extent},m.prototype.computeShiftedLocations=function(t,e,n,r){var i=[],a=new g(0,0,0),s=new WorldWind.Position(0,0,0),u=t.computePointFromLocation(e.latitude,e.longitude,new g(0,0,0)),l=t.computePointFromLocation(n.latitude,n.longitude,new g(0,0,0));if(t.is2D())for(var c=l.subtract(u),h=0,f=r.length;h<f;h++)t.computePointFromLocation(r[h].latitude,r[h].longitude,a),a.add(c),t.computePositionFromPoint(a[0],a[1],a[2],s),i.push(new o(s.latitude,s.longitude));else{var p=n.latitude-e.latitude,d=n.longitude-e.longitude,m=-90,y=90;for(h=0,f=r.length;h<f;h++){var v=r[h].latitude+p,E=r[h].longitude+d;v>90?(v=180-v,E+=180):v<-90&&(v=-180-v,E+=180),E<-180?E+=360:E>180&&(E-=360),v>m&&(m=v),v<y&&(y=v),i.push(new o(v,E))}if(m>90)for(c=m-90,h=0,f=i.length;h<f;h++)i[h].latitude-=c}return i},m.prototype.prepareSectors=function(){this.determineSectors(),this.crossesAntiMeridian?this.sectorsOverAntiMeridian():this.sectorsNotOverAntiMeridian()},m.prototype.determineSectors=function(){for(var t=0,e=this.contours.length;t<e;t++){var n=this.contours[t],r=n.polygons;n.sectors=[];for(var i=0,a=r.length;i<a;i++){var s=r[i],u=new f(0,0,0,0);if(u.setToBoundingSector(s),this._pathType===WorldWind.GREAT_CIRCLE){var l=o.greatCircleArcExtremeLocations(s),c=Math.min(u.minLatitude,l[0].latitude),h=Math.max(u.maxLatitude,l[1].latitude);u.minLatitude=c,u.maxLatitude=h}n.sectors.push(u)}}},m.prototype.sectorsOverAntiMeridian=function(){for(var t=new f(90,-90,180,-180),e=new f(90,-90,180,-180),n=0,r=this.contours.length;n<r;n++)for(var i=this.contours[n].sectors,o=0,a=i.length;o<a;o++){var s=i[o];s.minLongitude<0&&s.maxLongitude>0?(e.union(s),t.union(s)):s.minLongitude<0?e.union(s):t.union(s)}var u=Math.min(t.minLatitude,e.minLatitude),l=Math.max(t.maxLatitude,t.maxLatitude);this._boundingSector=new f(u,l,-180,180),this._boundingSectors=[t,e]},m.prototype.sectorsNotOverAntiMeridian=function(){this._boundingSector=new f(90,-90,180,-180);for(var t=0,e=this.contours.length;t<e;t++)for(var n=this.contours[t].sectors,r=0,i=n.length;r<i;r++)this._boundingSector.union(n[r]);this._boundingSectors=[this._boundingSector]},m.prototype.prepareGeometry=function(t,e){for(var n=[],r=[],i=0,a=e.length;i<a;i++)for(var s=e[i],u=s.poleIndex,l=0,c=s.polygons.length;l<c;l++){var h=s.polygons[l],f=s.iMap[l];n.push(h),s.pole!==o.poles.NONE&&c>1?l===u?this.outlineForPole(h,f,r):this.outlineForSplit(h,f,r):s.pole!==o.poles.NONE&&1===c?this.outlineForPole(h,f,r):s.pole===o.poles.NONE&&c>1?this.outlineForSplit(h,f,r):s.pole===o.poles.NONE&&1===c&&r.push(h)}this._interiorGeometry=n,this._outlineGeometry=r},m.prototype.outlineForPole=function(t,e,n){this.containsPole=!0;for(var r=[],i=0,o=0,a=t.length;o<a;o++){var s=t[o],u=e.get(o);u&&u.forPole&&++i%2===1&&(r.push(s),n.push(r),r=[]),i%2===0&&r.push(s)}r.length&&n.push(r)},m.prototype.outlineForSplit=function(t,e,n){for(var r=[],i=0,o=0,a=t.length;o<a;o++){var s=t[o],u=e.get(o);u&&!u.forPole&&++i%2===0&&(r.push(s),n.push(r),r=[]),i%2===1&&r.push(s)}},m.prototype.resetPickColor=function(){this.pickColor=null},m.prototype.renderToTexture=function(t,e,n,r,o,a){var s=this._highlighted&&this._highlightAttributes||this._attributes;if(s){var u=!this._isInteriorInhibited&&s.drawInterior,c=s.drawOutline&&s.outlineWidth>0;if(u||c){if(t.pickingMode)this.pickColor||(this.pickColor=t.uniquePickColor()),e.fillStyle=this.pickColor.toCssColorString(),e.strokeStyle=e.fillStyle,e.lineWidth=s.outlineWidth;else{var h=s.interiorColor,f=s.outlineColor;e.fillStyle=new i(h.red,h.green,h.blue,h.alpha*this.layer.opacity).toCssColorString(),e.strokeStyle=new i(f.red,f.green,f.blue,f.alpha*this.layer.opacity).toCssColorString(),e.lineWidth=s.outlineWidth}if(this.crossesAntiMeridian||this.containsPole?(u&&(this.draw(this._interiorGeometry,e,n,r,o,a),e.fill()),c&&(this.draw(this._outlineGeometry,e,n,r,o,a),e.stroke())):(this.draw(this._interiorGeometry,e,n,r,o,a),u&&e.fill(),c&&e.stroke()),t.pickingMode){var p=new l(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);t.resolvePick(p)}}}},m.prototype.draw=function(t,e,n,r,i,o){e.beginPath();for(var a=0,s=t.length;a<s;a++){var u=t[a],l=u[0],c=l.longitude*n+i,h=l.latitude*r+o;e.moveTo(c,h);for(var f=1,p=u.length;f<p;f++)c=(l=u[f]).longitude*n+i,h=l.latitude*r+o,e.lineTo(c,h)}},m.DEFAULT_NUM_EDGE_INTERVALS=128,m.DEFAULT_POLAR_THROTTLE=10,m})),i("shapes/SurfaceShapeTile",["../geom/Angle","../error/ArgumentError","../util/Level","../util/Logger","../geom/Sector","../render/Texture","../render/TextureTile"],(function(t,e,n,r,i,o,a){"use strict";var s=function(t,e,n,r){a.call(this,t,e,n,r),this.surfaceShapes=[],this.surfaceShapeStateKeys=[],this.asRenderedSurfaceShapeStateKeys=[],this.sector=t,this.cacheKey=null,this.pickSequence=0,this.createCtx2D()};return(s.prototype=Object.create(a.prototype)).clearShapes=function(){this.surfaceShapes=[],this.surfaceShapeStateKeys=[]},s.prototype.hasShapes=function(){return this.surfaceShapes.length>0},s.prototype.getShapes=function(){return this.surfaceShapes},s.prototype.setShapes=function(t){this.surfaceShapes=t},s.prototype.getSector=function(){return this.sector},s.prototype.addSurfaceShape=function(t){this.surfaceShapes.push(t),this.surfaceShapeStateKeys.push(t.stateKey+" lo "+t.layer.opacity)},s.prototype.needsUpdate=function(t){var e,n;if(this.surfaceShapes.length!=this.asRenderedSurfaceShapeStateKeys.length)return!0;for(e=0,n=this.surfaceShapes.length;e<n;e+=1)if(this.surfaceShapeStateKeys[e]!==this.asRenderedSurfaceShapeStateKeys[e])return!0;return!this.hasTexture(t)},s.prototype.hasTexture=function(t){return!t.pickingMode&&(this.gpuCacheKey||(this.gpuCacheKey=this.getCacheKey()),t.gpuResourceCache.containsResource(this.gpuCacheKey))},s.prototype.updateTexture=function(t){var e=t.currentGlContext,n=s.canvas,r=s.ctx2D;n.width=this.tileWidth,n.height=this.tileHeight;var i=this.tileWidth/this.sector.deltaLongitude(),a=-this.tileHeight/this.sector.deltaLatitude(),u=-this.sector.minLongitude*i,l=-this.sector.maxLatitude*a;this.asRenderedSurfaceShapeStateKeys=[];for(var c=0,h=this.surfaceShapes.length;c<h;c+=1){var f=this.surfaceShapes[c];this.asRenderedSurfaceShapeStateKeys.push(this.surfaceShapeStateKeys[c]),f.renderToTexture(t,r,i,a,u,l)}this.gpuCacheKey=this.getCacheKey();var p=t.gpuResourceCache,d=new o(e,n);return p.putResource(this.gpuCacheKey,d,d.size),p.setResourceAgingFactor(this.gpuCacheKey,10),d},s.prototype.getCacheKey=function(){return this.cacheKey||(this.cacheKey="SurfaceShapeTile:"+this.tileKey+","+this.pickSequence.toString()),this.cacheKey},s.prototype.createCtx2D=function(){s.ctx2D||(s.canvas=document.createElement("canvas"),s.ctx2D=s.canvas.getContext("2d"))},s.canvas=null,s.ctx2D=null,s})),i("shapes/SurfaceShapeTileBuilder",["../error/ArgumentError","../render/DrawContext","../globe/Globe","../shaders/GpuProgram","../util/Level","../util/LevelSet","../geom/Location","../util/Logger","../geom/Matrix","../cache/MemoryCache","../error/NotYetImplementedError","../pick/PickedObject","../geom/Rectangle","../geom/Sector","../shapes/SurfaceShape","../shapes/SurfaceShapeTile","../globe/Terrain","../globe/TerrainTile","../globe/TerrainTileList","../render/TextureTile","../util/Tile"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_){"use strict";var b=function(){this.numRowsTilesInTopLevel=4,this.numColumnsTilesInTopLevel=8,this.maximumSubdivisionDepth=15,this.tileWidth=256,this.tileHeight=256,this.levels=new o(p.FULL_SPHERE,new a(180/this.numRowsTilesInTopLevel,360/this.numColumnsTilesInTopLevel),this.maximumSubdivisionDepth,this.tileWidth,this.tileHeight),this.surfaceShapes=[],this.surfaceShapeTiles=[],this.topLevelTiles=[],this.sector=new p(-90,90,-180,180),this.detailControl=1.25,this.tileCache=new l(5e5,4e5)};return b.prototype.clear=function(){this.surfaceShapeTiles.splice(0,this.surfaceShapeTiles.length),this.surfaceShapes.splice(0,this.surfaceShapes.length)},b.prototype.insertSurfaceShape=function(t){this.surfaceShapes.push(t)},b.prototype.doRender=function(t){if(t.pickingMode){for(var e=0,n=this.surfaceShapes.length;e<n;e+=1)this.surfaceShapes[e].resetPickColor();b.pickSequence+=1;var r=this.surfaceShapeTiles,i=this.topLevelTiles;this.surfaceShapeTiles=[],this.topLevelTiles=[],this.buildTiles(t),t.deepPicking?this.doDeepPickingRender(t):t.surfaceTileRenderer.renderTiles(t,this.surfaceShapeTiles,1),this.surfaceShapeTiles=r,this.topLevelTiles=i}else this.buildTiles(t),t.surfaceTileRenderer.renderTiles(t,this.surfaceShapeTiles,1)},b.prototype.doDeepPickingRender=function(t){var e,n,r,i,o,a,s,u,l,c=[];for(o=0,a=t.objectsAtPickPoint.objects.length;o<a;o+=1)(s=t.objectsAtPickPoint.objects[o]).userObject instanceof d&&(u=s.userObject,c.indexOf(u)<0&&(c.push(u),t.objectsAtPickPoint.objects.splice(o,1),o-=1,a-=1));if(!(c.length<=0)){var f=[];for(r=0,i=c.length;r<i;r+=1){for(u=c[r],e=0,n=this.surfaceShapeTiles.length;e<n;e+=1)(l=this.surfaceShapeTiles[e]).setShapes([u]),l.updateTexture(t);t.surfaceTileRenderer.renderTiles(t,this.surfaceShapeTiles,1);var p=t.readPickColor(t.pickPoint);p&&u.pickColor.equals(p)&&(s=new h(u.pickColor.clone(),u.pickDelegate?u.pickDelegate:u,null,u.layer,!1),f.push(s))}for(o=0,a=t.objectsAtPickPoint.objects.length;o<a;o+=1)(s=t.objectsAtPickPoint.objects[o]).userObject instanceof d&&(t.objectsAtPickPoint.objects.splice(o,1),o-=1,a-=1);for(o=0,a=f.length;o<a;o+=1)s=f[o],t.objectsAtPickPoint.objects.push(s)}},b.prototype.buildTiles=function(e){if(!e)throw new t(s.logMessage(s.LEVEL_SEVERE,"SurfaceShapeTileBuilder","buildTiles","missingDc"));if(this.surfaceShapes&&!(this.surfaceShapes.length<1)){this.assembleTiles(e),this.surfaceShapes.splice(0,this.surfaceShapes.length);for(var n=0,r=this.surfaceShapeTiles.length;n<r;n+=1)this.surfaceShapeTiles[n].clearShapes()}},b.prototype.assembleTiles=function(t){var e,n,r,i,o,a,s;this.topLevelTiles.length<1&&this.createTopLevelTiles();var u={};for(n=0,r=this.surfaceShapes.length;n<r;n+=1){var l=this.surfaceShapes[n],c=l.computeSectors(t);if(c)for(a=0,s=c.length;a<s;a+=1){var h=c[a];for(i=0,o=this.topLevelTiles.length;i<o;i+=1)(e=this.topLevelTiles[i]).sector.intersects(h)&&(u[e.tileKey]=e,e.addSurfaceShape(l))}}for(var f in u)u.hasOwnProperty(f)&&(e=u[f],this.addTileOrDescendants(t,this.levels,null,e))},b.prototype.addTileOrDescendants=function(t,e,n,r){if(this.intersectsFrustum(t,r)){if(null!=n&&this.addIntersectingShapes(t,n,r),r.hasShapes()){if(this.meetsRenderCriteria(t,e,r))return void this.addTile(t,r);for(var i=e.level(r.level.levelNumber+1),o=t.pickingMode?r.subdivide(i,this):r.subdivideToCache(i,this,this.tileCache),a=0,s=o.length;a<s;a+=1){var u=o[a];this.addTileOrDescendants(t,e,r,u)}r.clearShapes()}}else r.clearShapes()},b.prototype.addIntersectingShapes=function(t,e,n){for(var r=e.getShapes(),i=0,o=r.length;i<o;i+=1){var a=r[i],s=a.computeSectors(t);if(s)for(var u=0,l=s.length;u<l;u+=1){var c=s[u];if(n.getSector().intersects(c)){n.addSurfaceShape(a);break}}}},b.prototype.addTile=function(t,e){t.pickingMode&&(e.pickSequence=b.pickSequence),e.needsUpdate(t)&&e.updateTexture(t),this.surfaceShapeTiles.push(e)},b.prototype.createTile=function(t,e,n,r){return new g(t,e,n,r)},b.prototype.createTopLevelTiles=function(){_.createTilesForLevel(this.levels.firstLevel(),this,this.topLevelTiles)},b.prototype.intersectsFrustum=function(t,e){return!(t.globe.projectionLimits&&!e.sector.overlaps(t.globe.projectionLimits))&&(e.update(t),e.extent.intersectsFrustum(t.pickingMode?t.pickFrustum:t.frustumInModelCoordinates))},b.prototype.meetsRenderCriteria=function(t,e,n){return n.level.levelNumber==e.lastLevel().levelNumber||!n.mustSubdivide(t,this.detailControl)},b.pickSequence=0,b})),i("shaders/SurfaceTileRendererProgram",["../error/ArgumentError","../util/Color","../shaders/GpuProgram","../util/Logger"],(function(t,e,n,r){"use strict";var i=function(t){n.call(this,t,"attribute vec4 vertexPoint;\nattribute vec4 vertexTexCoord;\nuniform mat4 mvpMatrix;\nuniform mat4 texSamplerMatrix;\nuniform mat4 texMaskMatrix;\nvarying vec2 texSamplerCoord;\nvarying vec2 texMaskCoord;\nvoid main() {\ngl_Position = mvpMatrix * vertexPoint;\ntexSamplerCoord = (texSamplerMatrix * vertexTexCoord).st;\ntexMaskCoord = (texMaskMatrix * vertexTexCoord).st;\n}","precision mediump float;\nuniform sampler2D texSampler;\nuniform float opacity;\nuniform vec4 color;\nuniform bool modulateColor;\nvarying vec2 texSamplerCoord;\nvarying vec2 texMaskCoord;\nbool isInsideTextureImage(const vec2 coord) {\n    return coord.x >= 0.0 && coord.x <= 1.0 && coord.y >= 0.0 && coord.y <= 1.0;\n}\nvoid main(void) {\nfloat mask = float(isInsideTextureImage(texMaskCoord));if (modulateColor) {\n    gl_FragColor = color * mask * floor(texture2D(texSampler, texSamplerCoord).a + 0.5);\n} else {\n    gl_FragColor = texture2D(texSampler, texSamplerCoord) * mask * opacity;\n}\n}"),this.vertexPointLocation=this.attributeLocation(t,"vertexPoint"),this.vertexTexCoordLocation=this.attributeLocation(t,"vertexTexCoord"),this.mvpMatrixLocation=this.uniformLocation(t,"mvpMatrix"),this.colorLocation=this.uniformLocation(t,"color"),this.modulateColorLocation=this.uniformLocation(t,"modulateColor"),this.texSamplerMatrixLocation=this.uniformLocation(t,"texSamplerMatrix"),this.texMaskMatrixLocation=this.uniformLocation(t,"texMaskMatrix"),this.texSamplerLocation=this.uniformLocation(t,"texSampler"),this.opacityLocation=this.uniformLocation(t,"opacity"),this.vertexPointLocation=-1};return i.key="WorldWindGpuSurfaceTileRenderingProgram",(i.prototype=Object.create(n.prototype)).loadModelviewProjection=function(e,n){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"SurfaceTileRendererProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(e,n,this.mvpMatrixLocation)},i.prototype.loadTexSamplerMatrix=function(e,n){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"SurfaceTileRendererProgram","loadTexSamplerMatrix","missingMatrix"));this.loadUniformMatrix(e,n,this.texSamplerMatrixLocation)},i.prototype.loadTexMaskMatrix=function(e,n){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"SurfaceTileRendererProgram","loadTexMaskMatrix","missingMatrix"));this.loadUniformMatrix(e,n,this.texMaskMatrixLocation)},i.prototype.loadTexSampler=function(t,e){t.uniform1i(this.texSamplerLocation,e-WebGLRenderingContext.TEXTURE0)},i.prototype.loadOpacity=function(t,e){t.uniform1f(this.opacityLocation,e)},i.prototype.loadColor=function(e,n){if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"SurfaceTileRendererProgram","loadColor","missingColor"));this.loadUniformColor(e,n,this.colorLocation)},i.prototype.loadModulateColor=function(t,e){t.uniform1i(this.modulateColorLocation,e?1:0)},i})),i("render/SurfaceTileRenderer",["../error/ArgumentError","../util/Logger","../geom/Matrix","../shapes/SurfaceShapeTile","../shaders/SurfaceTileRendererProgram"],(function(t,e,n,r,i){"use strict";var o=function(){this.texMaskMatrix=n.fromIdentity(),this.texSamplerMatrix=n.fromIdentity(),this.isSurfaceShapeTileRendering=!1};return o.prototype.renderTiles=function(n,i,o,a){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfaceTileRenderer","renderTiles","Specified surface tiles array is null or undefined."));if(!(i.length<1)){var s,u,l,c,h=n.terrain,f=n.currentGlContext,p=0,d=1;if(h){this.isSurfaceShapeTileRendering=i[0]instanceof r,o*=n.surfaceOpacity,s=this.beginRendering(n,o),h.beginRendering(n);try{for(var g=0,m=h.surfaceGeometry.length;g<m;g++){l=(u=h.surfaceGeometry[g]).sector,h.beginRenderingTile(n,u);try{for(var y=0,v=i.length;y<v;y++)(c=i[y]).sector.overlaps(l)&&c.bind(n)&&(n.pickingMode?c.pickColor&&s.loadColor(f,c.pickColor):a&&c.opacity!=d&&(s.loadOpacity(f,o*c.opacity),d=c.opacity),this.applyTileState(n,u,c),h.renderTile(n,u),++p)}catch(t){console.log(t)}finally{h.endRenderingTile(n,u)}}}catch(t){console.log(t)}finally{h.endRendering(n),this.endRendering(n),n.frameStatistics.incrementRenderedTileCount(p)}}}},o.prototype.beginRendering=function(t,e){var n=t.currentGlContext,r=t.findAndBindProgram(i);return r.loadTexSampler(n,n.TEXTURE0),t.pickingMode&&!this.isSurfaceShapeTileRendering?r.loadModulateColor(n,!0):(r.loadModulateColor(n,!1),r.loadOpacity(n,e)),r},o.prototype.endRendering=function(t){var e=t.currentGlContext;e.bindTexture(e.TEXTURE_2D,null)},o.prototype.applyTileState=function(t,e,n){var r=t.currentGlContext,i=t.currentProgram,o=e.sector,a=o.deltaLatitude(),s=o.deltaLongitude(),u=n.sector,l=u.deltaLatitude(),c=u.deltaLongitude(),h=l>0?l:1,f=c>0?c:1,p=s/f,d=a/h,g=-(u.minLongitude-o.minLongitude)/f,m=-(u.minLatitude-o.minLatitude)/h;this.texMaskMatrix.set(p,0,0,g,0,d,0,m,0,0,1,0,0,0,0,1),this.texSamplerMatrix.setToUnitYFlip(),n.applyInternalTransform(t,this.texSamplerMatrix),this.texSamplerMatrix.multiplyMatrix(this.texMaskMatrix),i.loadTexSamplerMatrix(r,this.texSamplerMatrix),i.loadTexMaskMatrix(r,this.texMaskMatrix)},o})),i("render/TextRenderer",["../error/ArgumentError","../shaders/BasicTextureProgram","../util/Color","../util/Font","../util/Logger","../geom/Matrix","../render/Texture","../geom/Vec2"],(function(t,e,n,r,i,o,a,s){"use strict";var u=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"TextRenderer","constructor","missingDc"));this.canvas2D=document.createElement("canvas"),this.ctx2D=this.canvas2D.getContext("2d"),this.dc=e,this.enableOutline=!0,this.lineSpacing=.15,this.outlineColor=new n(0,0,0,.5),this.outlineWidth=4,this.textColor=new n(1,1,1,1),this.typeFace=new r(14)};return u.prototype.textSize=function(t){if(0===t.length)return new s(0,0);this.ctx2D.font=this.typeFace.fontString;for(var e=t.split("\n"),n=e.length*(this.typeFace.size*(1+this.lineSpacing)),r=0,i=0;i<e.length;i++)r=Math.max(r,this.ctx2D.measureText(e[i]).width);return this.enableOutline&&(r+=this.outlineWidth,n+=this.outlineWidth),new s(r,n)},u.prototype.renderText=function(t){if(t&&t.length>0){var e=this.drawText(t);return new a(this.dc.currentGlContext,e)}return null},u.prototype.drawText=function(t){var e=this.ctx2D,n=this.canvas2D,r=this.textSize(t),i=t.split("\n"),o=this.enableOutline?this.outlineWidth/2:0,a=this.dc.pixelScale;n.width=Math.ceil(r[0])*a,n.height=Math.ceil(r[1])*a,e.scale(a,a),e.font=this.typeFace.fontString,e.textBaseline="bottom",e.textAlign=this.typeFace.horizontalAlignment,e.fillStyle=this.textColor.toCssColorString(),e.strokeStyle=this.outlineColor.toCssColorString(),e.lineWidth=this.outlineWidth,e.lineCap="round",e.lineJoin="round","left"===this.typeFace.horizontalAlignment?e.translate(o,0):"right"===this.typeFace.horizontalAlignment?e.translate(r[0]-o,0):e.translate(r[0]/2,0);for(var s=0;s<i.length;s++)e.translate(0,this.typeFace.size*(1+this.lineSpacing)+o),this.enableOutline&&e.strokeText(i[s],0,0),e.fillText(i[s],0,0);return n},u.prototype.getMaxLineHeight=function(){return this.textSize("_\xc9")[1]},u.prototype.wrap=function(e,n,r){if(!e)throw new t(i.logMessage(i.WARNING,"TextRenderer","wrap","missing text"));var o,a=e.split("\n"),s="";for(o=0;o<a.length;o++)a[o]=this.wrapLine(a[o],n);var u=0,l=!1,c=this.getMaxLineHeight();for(o=0;o<a.length&&!l;o++){for(var h=a[o].split("\n"),f=0;f<h.length&&!l;f++)r<=0||u+c<=r?(s+=h[f],u+=c+this.lineSpacing,f<h.length-1&&(s+="\n")):l=!0;o<a.length-1&&!l&&(s+="\n")}return l&&(s.length>0&&(s=s.substring(0,s.length-1)),s+="..."),s},u.prototype.wrapLine=function(t,e){var n="",r=t.trim();if(this.textSize(r)[0]>e){for(var i="",o=0,a=r.indexOf(" ",o+1);o<r.length;){-1===a&&(a=r.length);var s=r.substring(o,a),u=i+s;this.textSize(u)[0]<=e?i+=s:0!==i.length?(n+=i,n+="\n",i="",i+=s.trim()):i+=s.trim(),(o=a)<r.length-1&&(a=r.indexOf(" ",o+1))}n+=i}else n+=r;return n},u})),i("render/DrawContext",["../error/ArgumentError","../util/Color","../util/FrameStatistics","../render/FramebufferTexture","../render/FramebufferTileController","../geom/Frustum","../globe/Globe","../shaders/GpuProgram","../cache/GpuResourceCache","../layer/Layer","../geom/Line","../util/Logger","../geom/Matrix","../pick/PickedObjectList","../geom/Plane","../geom/Position","../geom/Rectangle","../render/ScreenCreditController","../geom/Sector","../shapes/SurfaceShape","../shapes/SurfaceShapeTileBuilder","../render/SurfaceTileRenderer","../render/TextRenderer","../geom/Vec2","../geom/Vec3","../util/WWMath"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_,b,S,w,x,T){"use strict";var L=function(n){if(!n)throw new t(h.logMessage(h.LEVEL_SEVERE,"Texture","constructor","missingGlContext"));this.currentGlContext=n,this.canvas2D=document.createElement("canvas"),this.ctx2D=this.canvas2D.getContext("2d"),this.clearColor=e.TRANSPARENT,this.gpuResourceCache=new u(WorldWind.configuration.gpuCacheSize,.8*WorldWind.configuration.gpuCacheSize),this.surfaceTileRenderer=new b,this.surfaceShapeTileBuilder=new _,this.surfaceShapeTileController=new i,this.screenCreditController=new y,this.textRenderer=new S(this),this.currentFramebuffer=null,this.currentProgram=null,this.surfaceRenderables=[],this.orderedRenderingMode=!1,this.orderedRenderables=[],this.orderedRenderablesCounter=0,this.timestamp=Date.now(),this.previousRedrawTimestamp=this.timestamp,this.redrawRequested=!1,this.globe=null,this.globeStateKey=null,this.layers=null,this.currentLayer=null,this.eyePosition=new g(0,0,0),this.eyePoint=new x(0,0,0),this.screenProjection=f.fromIdentity(),this.terrain=null,this.verticalExaggeration=1,this.fadeTime=500,this.surfaceOpacity=1,this.frameStatistics=null,this.pickingMode=!1,this.pickTerrainOnly=!1,this.deepPicking=!1,this.regionPicking=!1,this.pickPoint=null,this.pickRay=null,this.pickRectangle=null,this.pickFramebuffer=null,this.pickFrustum=null,this.pickColor=new e(0,0,0,1),this.objectsAtPickPoint=new p,this.pixelScale=1,this.navigator=null,this.modelview=f.fromIdentity(),this.projection=f.fromIdentity(),this.modelviewProjection=f.fromIdentity(),this.frustumInModelCoordinates=null,this.modelviewNormalTransform=f.fromIdentity(),this.viewport=new m(0,0,0,0),this.pixelSizeFactor=0,this.pixelSizeOffset=0,this.glExtensionsCache={}};return L.unitCubeKey="DrawContextUnitCubeKey",L.unitCubeElementsKey="DrawContextUnitCubeElementsKey",L.unitQuadKey="DrawContextUnitQuadKey",L.unitQuadKey3="DrawContextUnitQuadKey3",L.prototype.reset=function(){this.screenCreditController.clear(),this.surfaceRenderables=[],this.orderedRenderingMode=!1,this.orderedRenderables=[],this.screenRenderables=[],this.orderedRenderablesCounter=0;var t=this.timestamp;this.timestamp=Date.now(),this.timestamp===t&&++this.timestamp,this.redrawRequested=!1,this.globe=null,this.globeStateKey=null,this.layers=null,this.currentLayer=null,this.terrain=null,this.verticalExaggeration=1,this.frameStatistics=null,this.accumulateOrderedRenderables=!0,this.pickingMode=!1,this.pickTerrainOnly=!1,this.deepPicking=!1,this.regionPicking=!1,this.pickPoint=null,this.pickRay=null,this.pickRectangle=null,this.pickFrustum=null,this.pickColor=new e(0,0,0,1),this.objectsAtPickPoint.clear(),this.eyePoint.set(0,0,0),this.modelview.setToIdentity(),this.projection.setToIdentity(),this.modelviewProjection.setToIdentity(),this.frustumInModelCoordinates=null,this.modelviewNormalTransform.setToIdentity()},L.prototype.update=function(){var t=this.currentGlContext,e=this.eyePoint;this.globeStateKey=this.globe.stateKey,this.globe.computePositionFromPoint(e[0],e[1],e[2],this.eyePosition),this.screenProjection.setToScreenProjection(t.drawingBufferWidth,t.drawingBufferHeight)},L.prototype.contextLost=function(){this.gpuResourceCache.clear(),this.pickFramebuffer=null,this.currentFramebuffer=null,this.currentProgram=null,this.glExtensionsCache={}},L.prototype.contextRestored=function(){this.gpuResourceCache.clear(),this.glExtensionsCache={}},L.prototype.bindFramebuffer=function(t){this.currentFramebuffer!=t&&(this.currentGlContext.bindFramebuffer(this.currentGlContext.FRAMEBUFFER,t?t.framebufferId:null),this.currentFramebuffer=t)},L.prototype.bindProgram=function(t){this.currentProgram!=t&&(this.currentGlContext.useProgram(t?t.programId:null),this.currentProgram=t)},L.prototype.findAndBindProgram=function(e){if(!e)throw new t(h.logMessage(h.LEVEL_SEVERE,"DrawContext","findAndBindProgram","The specified program constructor is null or undefined."));var n=this.gpuResourceCache.resourceForKey(e.key);if(n)this.bindProgram(n);else try{n=new e(this.currentGlContext),this.bindProgram(n),this.gpuResourceCache.putResource(e.key,n,n.size)}catch(t){h.log(h.LEVEL_SEVERE,"Error attempting to create GPU program.")}return n},L.prototype.addSurfaceRenderable=function(t){t&&this.surfaceRenderables.push(t)},L.prototype.peekSurfaceRenderable=function(){return this.surfaceRenderables.length>0?this.surfaceRenderables[this.surfaceRenderables.length-1]:null},L.prototype.popSurfaceRenderable=function(){return this.surfaceRenderables.length>0?this.surfaceRenderables.pop():null},L.prototype.reverseSurfaceRenderables=function(){this.surfaceRenderables.reverse()},L.prototype.addOrderedRenderable=function(t,e){if(t){var n={orderedRenderable:t,insertionOrder:this.orderedRenderablesCounter++,eyeDistance:e||t.eyeDistance,globeStateKey:this.globeStateKey};this.globe.continuous&&(n.globeOffset=this.globe.offset),0===n.eyeDistance?this.screenRenderables.push(n):this.orderedRenderables.push(n)}},L.prototype.addOrderedRenderableToBack=function(t){if(t){var e={orderedRenderable:t,insertionOrder:this.orderedRenderablesCounter++,eyeDistance:Number.MAX_VALUE,globeStateKey:this.globeStateKey};this.globe.continuous&&(e.globeOffset=this.globe.offset),this.orderedRenderables.push(e)}},L.prototype.peekOrderedRenderable=function(){return this.orderedRenderables.length>0?this.orderedRenderables[this.orderedRenderables.length-1].orderedRenderable:null},L.prototype.popOrderedRenderable=function(){if(this.orderedRenderables.length>0){var t=this.orderedRenderables.pop();return this.globeStateKey=t.globeStateKey,this.globe.continuous&&(this.globe.offset=t.globeOffset),t.orderedRenderable}return null},L.prototype.nextScreenRenderable=function(){if(this.screenRenderables.length>0){var t=this.screenRenderables.shift();return this.globeStateKey=t.globeStateKey,this.globe.continuous&&(this.globe.offset=t.globeOffset),t.orderedRenderable}return null},L.prototype.sortOrderedRenderables=function(){this.orderedRenderables.sort((function(t,e){var n=t.eyeDistance,r=e.eyeDistance;if(n<r)return-1;if(n>r)return 1;var i=t.insertionOrder,o=e.insertionOrder;return i>o?-1:i<o?1:0}))},L.prototype.readPickColor=function(t){var n=this.convertPointToViewport(t,new w(0,0)),r=new Uint8Array(4);return this.currentGlContext.readPixels(n[0],n[1],1,1,this.currentGlContext.RGBA,this.currentGlContext.UNSIGNED_BYTE,r),this.clearColor.equalsBytes(r)?null:e.colorFromByteArray(r)},L.prototype.readPickColors=function(t){var n,r=this.currentGlContext,i=new Uint8Array(t.width*t.height*4),o={},a=new e(0,0,0,0),s=r.getParameter(r.PACK_ALIGNMENT);r.pixelStorei(r.PACK_ALIGNMENT,1),this.currentGlContext.readPixels(t.x,t.y,t.width,t.height,r.RGBA,r.UNSIGNED_BYTE,i),r.pixelStorei(r.PACK_ALIGNMENT,s);for(var u=0,l=t.width*t.height;u<l;u++){var c=4*u;(n=e.colorFromBytes(i[c],i[c+1],i[c+2],i[c+3])).equals(this.clearColor)||n.equals(a)||(o[n.toByteString()]=n)}return o},L.prototype.resolvePick=function(t){if(t.userObject instanceof E||!this.deepPicking||this.regionPicking)this.addPickedObject(t);else{var e=this.readPickColor(this.pickPoint);if(!e)return null;t.color.equals(e)&&this.addPickedObject(t)}},L.prototype.addPickedObject=function(t){t&&this.objectsAtPickPoint.add(t)},L.prototype.uniquePickColor=function(){var t=this.pickColor.nextColor().clone();return t.equals(this.clearColor)?t.nextColor():t},L.prototype.makePickFramebuffer=function(){var t=this.currentGlContext,e=t.drawingBufferWidth,n=t.drawingBufferHeight;return this.pickFramebuffer&&this.pickFramebuffer.width==e&&this.pickFramebuffer.height==n||(this.pickFramebuffer=new r(t,e,n,!0)),this.pickFramebuffer},L.prototype.makePickFrustum=function(){if(!this.pickPoint&&!this.pickRectangle)return!1;var t,e,n,r,i,a,s,u,l,c,h,p,g,y,v,E,_,b,S,L,C,A,M=new x(0,0,0),R=new x(0,0,0),O=this.pickRectangle,P=this.viewport;O||(A=this.convertPointToViewport(this.pickPoint,new w(0,0)),O=new m(A[0]-2,A[1]-2,4,4));var I=O.x,N=O.x+O.width,D=O.y,k=O.y+O.height;if(N<0||k<0||I>P.x+P.width||D>P.y+P.height)return!1;O.x=T.clamp(I,P.x,P.x+P.width),O.y=T.clamp(D,P.y,P.y+P.height),O.width=T.clamp(N,P.x,P.x+P.width)-O.x,O.height=T.clamp(k,P.y,P.y+P.height)-O.y,this.pickRectangle=O;var F=f.fromIdentity();return F.invertMatrix(this.modelviewProjection),R[0]=O.x,R[1]=O.y,R[2]=0,F.unProject(R,P,t=new x(0,0,0)),R[0]=O.x,R[1]=O.y,R[2]=1,F.unProject(R,P,e=new x(0,0,0)),R[0]=O.x+O.width,R[1]=O.y,R[2]=0,F.unProject(R,P,n=new x(0,0,0)),R[0]=O.x+O.width,R[1]=O.y,R[2]=1,F.unProject(R,P,r=new x(0,0,0)),R[0]=O.x,R[1]=O.y+O.height,R[2]=0,F.unProject(R,P,i=new x(0,0,0)),R[0]=O.x,R[1]=O.y+O.height,R[2]=1,F.unProject(R,P,a=new x(0,0,0)),R[0]=O.x+O.width,R[1]=O.y+O.height,R[2]=0,F.unProject(R,P,s=new x(0,0,0)),R[0]=O.x+O.width,R[1]=O.y+O.height,R[2]=1,F.unProject(R,P,u=new x(0,0,0)),C=new x(a[0]-t[0],a[1]-t[1],a[2]-t[2]),M.set(i[0]-e[0],i[1]-e[1],i[2]-e[2]),l=C.cross(M),(v=new d(l[0],l[1],l[2],-l.dot(t))).normalize(),C=new x(s[0]-r[0],s[1]-r[1],s[2]-r[2]),M.set(u[0]-n[0],u[1]-n[1],u[2]-n[2]),c=C.cross(M),(E=new d(c[0],c[1],c[2],-c.dot(n))).normalize(),C=new x(a[0]-s[0],a[1]-s[1],a[2]-s[2]),M.set(u[0]-i[0],u[1]-i[1],u[2]-i[2]),h=C.cross(M),(_=new d(h[0],h[1],h[2],-h.dot(i))).normalize(),C=new x(r[0]-t[0],r[1]-t[1],r[2]-t[2]),M.set(e[0]-n[0],e[1]-n[1],e[2]-n[2]),p=C.cross(M),(b=new d(p[0],p[1],p[2],-p.dot(n))).normalize(),C=new x(i[0]-n[0],i[1]-n[1],i[2]-n[2]),M.set(s[0]-t[0],s[1]-t[1],s[2]-t[2]),g=C.cross(M),(S=new d(g[0],g[1],g[2],-g.dot(t))).normalize(),C=new x(u[0]-e[0],u[1]-e[1],u[2]-e[2]),M.set(a[0]-r[0],a[1]-r[1],a[2]-r[2]),y=C.cross(M),(L=new d(y[0],y[1],y[2],-y.dot(e))).normalize(),this.pickFrustum=new o(v,E,b,_,S,L),!0},L.prototype.isSmall=function(t,e){if(!t)return!1;var n=this.eyePoint.distanceTo(t.center),r=this.pixelSizeAtDistance(n);return 2*t.radius<e*r},L.prototype.unitCubeBuffer=function(){var t=this.gpuResourceCache.resourceForKey(L.unitCubeKey);if(!t){var e=this.currentGlContext,n=new Float32Array(24),r=0;n[r++]=0,n[r++]=1,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=1,n[r++]=1,n[r++]=0,n[r++]=1,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=1,n[r++]=1,n[r++]=0,n[r++]=0,n[r++]=1,n[r++]=1,n[r++]=1,n[r++]=1,n[r++]=1,n[r++]=0,n[23]=1,t=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.frameStatistics.incrementVboLoadCount(1),this.gpuResourceCache.putResource(L.unitCubeKey,t,4*n.length)}return t},L.prototype.unitCubeElements=function(){var t=this.gpuResourceCache.resourceForKey(L.unitCubeElementsKey);if(!t){var e=this.currentGlContext,n=new Int16Array(60),r=0;n[r++]=1,n[r++]=0,n[r++]=3,n[r++]=3,n[r++]=0,n[r++]=2,n[r++]=4,n[r++]=5,n[r++]=6,n[r++]=6,n[r++]=5,n[r++]=7,n[r++]=5,n[r++]=1,n[r++]=7,n[r++]=7,n[r++]=1,n[r++]=3,n[r++]=6,n[r++]=2,n[r++]=4,n[r++]=4,n[r++]=2,n[r++]=0,n[r++]=4,n[r++]=0,n[r++]=5,n[r++]=5,n[r++]=0,n[r++]=1,n[r++]=7,n[r++]=3,n[r++]=6,n[r++]=6,n[r++]=3,n[r++]=2,n[r++]=0,n[r++]=1,n[r++]=1,n[r++]=3,n[r++]=3,n[r++]=2,n[r++]=2,n[r++]=0,n[r++]=4,n[r++]=5,n[r++]=5,n[r++]=7,n[r++]=7,n[r++]=6,n[r++]=6,n[r++]=4,n[r++]=0,n[r++]=4,n[r++]=5,n[r++]=1,n[r++]=2,n[r++]=6,n[r++]=7,n[59]=3,t=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.frameStatistics.incrementVboLoadCount(1),this.gpuResourceCache.putResource(L.unitCubeElementsKey,t,2*n.length)}return t},L.prototype.unitQuadBuffer=function(){var t=this.gpuResourceCache.resourceForKey(L.unitQuadKey);if(!t){var e=this.currentGlContext,n=new Float32Array(8);n[0]=0,n[1]=1,n[2]=0,n[3]=0,n[4]=1,n[5]=1,n[6]=1,n[7]=0,t=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.frameStatistics.incrementVboLoadCount(1),this.gpuResourceCache.putResource(L.unitQuadKey,t,4*n.length)}return t},L.prototype.unitQuadBuffer3=function(){var t=this.gpuResourceCache.resourceForKey(L.unitQuadKey3);if(!t){var e=this.currentGlContext,n=new Float32Array(12);n[0]=0,n[1]=1,n[2]=0,n[3]=0,n[4]=0,n[5]=0,n[6]=1,n[7]=1,n[8]=0,n[9]=1,n[10]=0,n[11]=0,t=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.frameStatistics.incrementVboLoadCount(1),this.gpuResourceCache.putResource(L.unitQuadKey3,t,4*n.length)}return t},L.prototype.surfacePointForMode=function(e,n,r,i,o){if(!o)throw new t(h.logMessage(h.LEVEL_SEVERE,"DrawContext","surfacePointForMode","missingResult"));if(this.terrain)this.terrain.surfacePointForMode(e,n,r,i,o);else{var a=r+this.globe.elevationAtLocation(e,n)*this.verticalExaggeration;this.globe.computePointFromPosition(e,n,a,o)}return o},L.prototype.project=function(e,n){if(!e)throw new t(h.logMessage(h.LEVEL_SEVERE,"DrawContext","project","missingPoint"));if(!n)throw new t(h.logMessage(h.LEVEL_SEVERE,"DrawContext","project","missingResult"));var r=e[0],i=e[1],o=e[2],a=this.modelviewProjection,s=a[0]*r+a[1]*i+a[2]*o+a[3],u=a[4]*r+a[5]*i+a[6]*o+a[7],l=a[8]*r+a[9]*i+a[10]*o+a[11],c=a[12]*r+a[13]*i+a[14]*o+a[15];return 0!==c&&(s/=c,u/=c,!((l/=c)<-1||l>1)&&(u=.5*u+.5,l=.5*l+.5,s=(s=.5*s+.5)*this.viewport.width+this.viewport.x,u=u*this.viewport.height+this.viewport.y,n[0]=s,n[1]=u,n[2]=l,!0))},L.prototype.projectWithDepth=function(e,n,r){if(!e)throw new t(h.logMessage(h.LEVEL_SEVERE,"DrawContext","projectWithDepth","missingPoint"));if(!r)throw new t(h.logMessage(h.LEVEL_SEVERE,"DrawContext","projectWithDepth","missingResult"));var i=e[0],o=e[1],a=e[2],s=this.modelview,u=s[0]*i+s[1]*o+s[2]*a+s[3],l=s[4]*i+s[5]*o+s[6]*a+s[7],c=s[8]*i+s[9]*o+s[10]*a+s[11],f=s[12]*i+s[13]*o+s[14]*a+s[15],p=this.projection,d=p[0]*u+p[1]*l+p[2]*c+p[3]*f,g=p[4]*u+p[5]*l+p[6]*c+p[7]*f,m=p[8]*u+p[9]*l+p[10]*c+p[11]*f,y=p[12]*u+p[13]*l+p[14]*c+p[15]*f;return 0!==y&&(d/=y,g/=y,!((m/=y)<-1||m>1)&&(m=p[8]*u+p[9]*l+p[10]*c*(1+n)+p[11]*f,m/=y,g=.5*g+.5,m=.5*(m=T.clamp(m,-1,1))+.5,d=(d=.5*d+.5)*this.viewport.width+this.viewport.x,g=g*this.viewport.height+this.viewport.y,r[0]=d,r[1]=g,r[2]=m,!0))},L.prototype.convertPointToViewport=function(e,n){if(!e)throw new t(h.logMessage(h.LEVEL_SEVERE,"DrawContext","convertPointToViewport","missingPoint"));if(!n)throw new t(h.logMessage(h.LEVEL_SEVERE,"DrawContext","convertPointToViewport","missingResult"));return n[0]=e[0],n[1]=this.viewport.height-e[1],n},L.prototype.pixelSizeAtDistance=function(t){return this.pixelSizeFactor*t+this.pixelSizeOffset},L.prototype.createTextTexture=function(t,e){if(!t||!e)return null;var n=this.computeTextTextureStateKey(t,e),r=this.gpuResourceCache.resourceForKey(n);return r||(this.textRenderer.textColor=e.color,this.textRenderer.typeFace=e.font,this.textRenderer.enableOutline=e.enableOutline,this.textRenderer.outlineColor=e.outlineColor,this.textRenderer.outlineWidth=e.outlineWidth,r=this.textRenderer.renderText(t),this.gpuResourceCache.putResource(n,r,r.size),this.gpuResourceCache.setResourceAgingFactor(n,100)),r},L.prototype.computeTextTextureStateKey=function(t,e){return t&&e?t+"c "+e.color.toHexString(!0)+" f "+e.font.toString()+" eo "+e.enableOutline+" ow "+e.outlineWidth+" oc "+e.outlineColor.toHexString(!0):null},L.prototype.getExtension=function(e){if(!e)throw new t(h.logMessage(h.LEVEL_SEVERE,"DrawContext","getExtension","missingExtensionName"));return e in this.glExtensionsCache||(this.glExtensionsCache[e]=this.currentGlContext.getExtension(e)||null),this.glExtensionsCache[e]},L})),i("globe/GebcoElevationCoverage",["../geom/Location","../geom/Sector","../globe/TiledElevationCoverage","../util/WmsUrlBuilder"],(function(t,e,n,r){"use strict";var i=function(){n.call(this,{coverageSector:e.FULL_SPHERE,resolution:.008333333333333,retrievalImageFormat:"application/bil16",minElevation:-11e3,maxElevation:8850,urlBuilder:new r("https://worldwind26.arc.nasa.gov/elev","GEBCO","","1.3.0")}),this.displayName="GEBCO Earth Elevation Coverage"};return i.prototype=Object.create(n.prototype),i})),i("globe/UsgsNedElevationCoverage",["../geom/Location","../geom/Sector","../globe/TiledElevationCoverage","../util/WmsUrlBuilder"],(function(t,e,n,r){"use strict";var i=function(){n.call(this,{coverageSector:new e(24.396308,49.384358,-124.848974,-66.885444),resolution:92592592593e-15,retrievalImageFormat:"application/bil16",minElevation:-11e3,maxElevation:8850,urlBuilder:new r("https://worldwind26.arc.nasa.gov/elev","USGS-NED","","1.3.0")}),this.displayName="USGS NED Earth Elevation Coverage"};return i.prototype=Object.create(n.prototype),i})),i("globe/UsgsNedHiElevationCoverage",["../geom/Location","../geom/Sector","../globe/TiledElevationCoverage","../util/WmsUrlBuilder"],(function(t,e,n,r){"use strict";var i=function(){n.call(this,{coverageSector:new e(18.86546,28.517269,-178.443593,-154.755792),resolution:92592592593e-15,retrievalImageFormat:"application/bil16",minElevation:-11e3,maxElevation:8850,urlBuilder:new r("https://worldwind26.arc.nasa.gov/elev","USGS-NED","","1.3.0")}),this.displayName="USGS NED Hawaii Elevation Coverage"};return i.prototype=Object.create(n.prototype),i})),i("globe/EarthElevationModel",["../globe/AsterV2ElevationCoverage","../globe/ElevationModel","../globe/GebcoElevationCoverage","../globe/UsgsNedElevationCoverage","../globe/UsgsNedHiElevationCoverage"],(function(t,e,n,r,i){"use strict";var o=function(){e.call(this),this.addCoverage(new n),this.addCoverage(new t),this.addCoverage(new r),this.addCoverage(new i)};return o.prototype=Object.create(e.prototype),o})),i("globe/EarthRestElevationCoverage",["../util/LevelSet","../geom/Location","../geom/Sector","../util/LevelRowColumnUrlBuilder","../globe/TiledElevationCoverage"],(function(t,e,n,r,i){"use strict";var o=function(o,a,s){i.call(this,{coverageSector:n.FULL_SPHERE,resolution:.00732421875,retrievalImageFormat:"application/bil16",minElevation:-11e3,maxElevation:8850,urlBuilder:new r(o,a)}),this.displayName=s||"Earth Elevations",this.levels=new t(n.FULL_SPHERE,new e(60,60),5,512,512)};return o.prototype=Object.create(i.prototype),o})),i("FirstPersonCamera",["./geom/Angle","./error/ArgumentError","./geom/Line","./util/Logger","./geom/Matrix","./geom/Position","./geom/Vec3","./util/WWMath"],(function(t,e,n,r,i,o,a,s){"use strict";var u=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"FirstPersonCamera","constructor","missing WorldWindow instance."));this.position=new o(30,-110,1e3),this.heading=0,this.tilt=0,this.roll=0,this.wwd=t,this._scratchMatrix=i.fromIdentity(),this._scratchVector=new a(0,0,0),this._ray=new n(new a(0,0,0),new a(0,0,0))};return Object.defineProperties(u.prototype,{range:{get:function(){return this.position.altitude},set:function(t){this.position.altitude=t}}}),u.prototype.createViewMatrix=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"FirstPersonCamera","createViewMatrix","missing matrix"));return this.applyLimits(),t.setToIdentity(),t.multiplyByLookAtModelview(this.position,0,this.heading,this.tilt+90,this.roll,this.wwd.globe),t},u.prototype.clone=function(t){return(t=t||new u(this.wwd)).copy(this),t},u.prototype.copy=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"FirstPersonCamera","copy","missing camera"));return this.position.copy(t.position),this.heading=t.heading,this.tilt=t.tilt,this.roll=t.roll,this},u.prototype.applyLimits=function(){this.position.latitude=s.clamp(this.position.latitude,-90,90),this.position.longitude=t.normalizedDegreesLongitude(this.position.longitude),this.position.altitude=s.clamp(this.position.altitude,0,Number.MAX_VALUE),this.tilt=s.clamp(this.tilt,-90,90),this.heading=t.normalizedDegrees(this.heading),this.roll=t.normalizedDegrees(this.roll)},u.prototype.toArcBall=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"FirstPersonCamera","toArcBall","missing arcBallCamera"));var n=this.createViewMatrix(this._scratchMatrix);n.extractEyePoint(this._ray.origin),n.extractForwardVector(this._ray.direction);var i=this._ray.pointAt(t.range,this._scratchVector),o=n.extractViewingParameters(i,this.roll,this.wwd.globe,{});return t.position.copy(o.origin),t.heading=o.heading,t.tilt=o.tilt,t.roll=o.roll,t.applyLimits(),t},u})),i("layer/FrameStatisticsLayer",["../error/ArgumentError","../util/Color","../util/Font","../layer/Layer","../util/Logger","../util/Offset","../shapes/ScreenText","../shapes/TextAttributes"],(function(t,e,n,r,i,o,a,s){"use strict";var u=function(u){if(!u)throw new t(i.logMessage(i.LEVEL_SEVERE,"FrameStatisticsLayer","constructor","missingWorldWindow"));r.call(this,"Frame Statistics"),this.pickEnabled=!1;var l=new s(null);l.color=e.GREEN,l.font=new n(12),l.offset=new o(WorldWind.OFFSET_FRACTION,0,WorldWind.OFFSET_FRACTION,1),this.frameTime=new a(new o(WorldWind.OFFSET_PIXELS,5,WorldWind.OFFSET_INSET_PIXELS,5)," "),this.frameTime.attributes=l,this.frameRate=new a(new o(WorldWind.OFFSET_PIXELS,5,WorldWind.OFFSET_INSET_PIXELS,25)," "),this.frameRate.attributes=l;var c=this;u.redrawCallbacks.push((function(t,e){c.handleRedraw(t,e)}))};return(u.prototype=Object.create(r.prototype)).doRender=function(t){this.frameRate.render(t),this.frameTime.render(t),this.inCurrentFrame=!0},u.prototype.handleRedraw=function(t,e){if(e===WorldWind.BEFORE_REDRAW){var n=t.frameStatistics;this.frameTime.text="Frame time  "+n.frameTimeAverage.toFixed(0)+" ms  ("+n.frameTimeMin.toFixed(0)+" - "+n.frameTimeMax.toFixed(0)+")",this.frameRate.text="Frame rate  "+n.frameRateAverage.toFixed(0)+" fps"}},u})),i("shapes/AbstractShape",["../error/ArgumentError","../util/Logger","../geom/Matrix","../cache/MemoryCache","../render/Renderable","../shapes/ShapeAttributes","../error/UnsupportedOperationError","../geom/Vec3"],(function(t,e,n,r,i,o,a,s){"use strict";var u=function(t){i.call(this),this._attributes=t||new o(null),this._highlightAttributes=null,this.highlighted=!1,this._altitudeMode=WorldWind.ABSOLUTE,this.referencePosition=null,this.shapeDataCache=new r(3,2),this.currentData=null,this.activeAttributes=null,this.expirationInterval=2e3,this.useSurfaceShapeFor2D=!1,this.scratchMatrix=n.fromIdentity()};return u.prototype=Object.create(i.prototype),Object.defineProperties(u.prototype,{attributes:{get:function(){return this._attributes},set:function(t){this._attributes=t,this.surfaceShape&&(this.surfaceShape.attributes=this._attributes)}},highlightAttributes:{get:function(){return this._highlightAttributes},set:function(t){this._highlightAttributes=t,this.surfaceShape&&(this.surfaceShape.highlightAttributes=this._highlightAttributes)}},altitudeMode:{get:function(){return this._altitudeMode},set:function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"AbstractShape","altitudeMode","missingAltitudeMode"));this._altitudeMode=n,this.reset()}}}),u.prototype.reset=function(){this.shapeDataCache.clear(!1),this.surfaceShape=null},u.prototype.updateSurfaceShape=function(){this.surfaceShape.displayName=this.displayName,this.surfaceShape.highlighted=this.highlighted,this.surfaceShape.enabled=this.enabled,this.surfaceShape.pathType=this.pathType,this.surfaceShape.pickDelegate=this.pickDelegate?this.pickDelegate:this},u.prototype.createSurfaceShape=function(){return null},u.prototype.render=function(t){if(this.enabled&&t.accumulateOrderedRenderables){if(t.globe.is2D()&&this.useSurfaceShapeFor2D&&(this.surfaceShape||(this.surfaceShape=this.createSurfaceShape(),this.surfaceShape&&(this.surfaceShape.attributes=this._attributes,this.surfaceShape.highlightAttributes=this._highlightAttributes)),this.surfaceShape))return this.updateSurfaceShape(),void this.surfaceShape.render(t);if((t.terrain||this.altitudeMode==WorldWind.ABSOLUTE)&&(this.establishCurrentData(t),(!t.globe.projectionLimits||this.isWithinProjectionLimits(t))&&(!this.currentData.extent||this.intersectsFrustum(t))&&(this.determineActiveAttributes(t),this.activeAttributes))){var e=this.makeOrderedRenderable(t);if(e){if(!this.intersectsFrustum(t))return;if(t.isSmall(this.currentData.extent,1))return;e.layer=t.currentLayer,t.addOrderedRenderable(e,this.currentData.eyeDistance)}}}},u.prototype.renderOrdered=function(t){this.currentData=this.shapeDataCache.entryForKey(t.globeStateKey),this.beginDrawing(t);try{this.doRenderOrdered(t)}finally{this.endDrawing(t)}},u.prototype.makeOrderedRenderable=function(t){var e=this.doMakeOrderedRenderable(t);return this.currentData.verticalExaggeration=t.verticalExaggeration,e},u.prototype.doMakeOrderedRenderable=function(t){throw new a(e.logMessage(e.LEVEL_SEVERE,"AbstractShape","makeOrderedRenderable","abstractInvocation"))},u.prototype.doRenderOrdered=function(t){throw new a(e.logMessage(e.LEVEL_SEVERE,"AbstractShape","doRenderOrdered","abstractInvocation"))},u.prototype.beginDrawing=function(t){},u.prototype.endDrawing=function(t){},u.prototype.intersectsFrustum=function(t){return!this.currentData||!this.currentData.extent||(t.pickingMode?this.currentData.extent.intersectsFrustum(t.pickFrustum):this.currentData.extent.intersectsFrustum(t.frustumInModelCoordinates))},u.prototype.establishCurrentData=function(t){this.currentData=this.shapeDataCache.entryForKey(t.globeStateKey),this.currentData||(this.currentData=this.createShapeDataObject(),this.resetExpiration(this.currentData),this.shapeDataCache.putEntry(t.globeStateKey,this.currentData,1)),this.currentData.isExpired=!this.isShapeDataCurrent(t,this.currentData)},u.prototype.createShapeDataObject=function(){return{transformationMatrix:n.fromIdentity(),referencePoint:new s(0,0,0)}},u.prototype.resetExpiration=function(t){t.expiryTime=Date.now()+this.expirationInterval+1e3*Math.random()},u.prototype.isShapeDataCurrent=function(t,e){return e.verticalExaggeration===t.verticalExaggeration&&e.expiryTime>Date.now()},u.prototype.determineActiveAttributes=function(t){this.highlighted&&this._highlightAttributes?this.activeAttributes=this.highlightAttributes:this.activeAttributes=this._attributes},u.prototype.isWithinProjectionLimits=function(t){return!0},u.prototype.applyMvpMatrix=function(t){this.scratchMatrix.copy(t.modelviewProjection),this.scratchMatrix.multiplyMatrix(this.currentData.transformationMatrix),t.currentProgram.loadModelviewProjection(t.currentGlContext,this.scratchMatrix)},u.prototype.applyMvpMatrixForOutline=function(t){this.scratchMatrix.copy(t.projection),this.scratchMatrix.offsetProjectionDepth(-.001),this.scratchMatrix.multiplyMatrix(t.modelview),this.scratchMatrix.multiplyMatrix(this.currentData.transformationMatrix),t.currentProgram.loadModelviewProjection(t.currentGlContext,this.scratchMatrix)},u})),i("shapes/AbstractMesh",["../shapes/AbstractShape","../error/ArgumentError","../shaders/BasicTextureProgram","../geom/BoundingBox","../util/Color","../util/ImageSource","../geom/Line","../geom/Location","../util/Logger","../geom/Matrix","../pick/PickedObject","../geom/Position","../shapes/ShapeAttributes","../geom/Vec2","../geom/Vec3","../util/WWMath"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g){"use strict";var m=function(e){t.call(this,e),this.pickTransparentImagePixels=!0,this._altitudeScale=1};return m.prototype=Object.create(t.prototype),Object.defineProperties(m.prototype,{altitudeScale:{get:function(){return this._altitudeScale},set:function(t){this._altitudeScale=t,this.reset()}}}),m.prototype.mustGenerateGeometry=function(t){return!this.currentData.meshPoints||this.currentData.drawInterior!==this.activeAttributes.drawInterior||!(!this.activeAttributes.applyLighting||this.currentData.normals)||this.altitudeMode!==WorldWind.ABSOLUTE&&this.currentData.isExpired},m.prototype.doMakeOrderedRenderable=function(t){if(!this.activeAttributes.drawInterior&&!this.activeAttributes.drawOutline)return null;if(!this.mustGenerateGeometry(t))return this;var e=this.currentData,n=e.referencePoint;return t.surfacePointForMode(this.referencePosition.latitude,this.referencePosition.longitude,this.referencePosition.altitude*this._altitudeScale,this._altitudeMode,n),e.transformationMatrix.setToTranslation(n[0],n[1],n[2]),e.meshPoints=this.computeMeshPoints(t,e),e.refreshVertexBuffer=!0,this.activeAttributes.imageSource&&!this.texCoords&&(this.texCoords=this.computeTexCoords(),this.texCoords&&(e.refreshTexCoordBuffer=!0)),this.meshIndices||(this.meshIndices=this.computeMeshIndices(),e.refreshMeshIndices=!0),this.meshOutlineIndices||(this.meshOutlineIndices=this.computeOutlineIndices(),this.meshOutlineIndices&&(e.refreshOutlineIndices=!0)),this.activeAttributes.applyLighting&&this.computeNormals(e),e.drawInterior=this.activeAttributes.drawInterior,this.resetExpiration(e),e.extent||(e.extent=new r),e.extent.setToPoints(e.meshPoints),e.extent.translate(e.referencePoint),this},m.prototype.computeMeshPoints=function(t,e){throw new UnsupportedOperationError(u.logMessage(u.LEVEL_SEVERE,"AbstractMesh","computeMeshPoints","abstractInvocation"))},m.prototype.computeTexCoords=function(){return null},m.prototype.computeMeshIndices=function(t){throw new UnsupportedOperationError(u.logMessage(u.LEVEL_SEVERE,"AbstractMesh","computeMeshIndices","abstractInvocation"))},m.prototype.computeOutlineIndices=function(t){},m.prototype.computeNormals=function(t){for(var e,n=new Float32Array(t.meshPoints.length),r=this.meshIndices,i=t.meshPoints,o=[],a=[new d(0,0,0),new d(0,0,0),new d(0,0,0)],s=0;s<r.length;s+=3){for(var u=0;u<3;u++)e=r[s+u],a[u].set(i[3*e],i[3*e+1],i[3*e+2]);var l=d.computeTriangleNormal(a[0],a[1],a[2]);for(u=0;u<3;u++)o[e=r[s+u]]||(o[e]=[]),o[e].push(l)}for(l=new d(0,0,0),s=0;s<o.length;s++)o[s]?(d.average(o[s],l),l.normalize(),n[3*s]=l[0],n[3*s+1]=l[1],n[3*s+2]=l[2]):(n[3*s]=0,n[3*s+1]=0,n[3*s+2]=0);t.normals=n,t.refreshNormalsBuffer=!0},m.prototype.doRenderOrdered=function(t){var e,n,r,i=t.currentGlContext,o=t.currentProgram,a=this.currentData,s=this.texCoords&&!!this.activeAttributes.imageSource;if(t.pickingMode&&(r=t.uniquePickColor()),a.pointsVboCacheKey||(a.pointsVboCacheKey=t.gpuResourceCache.generateCacheKey()),(e=t.gpuResourceCache.resourceForKey(a.pointsVboCacheKey))||(e=i.createBuffer(),t.gpuResourceCache.putResource(a.pointsVboCacheKey,e,4*a.meshPoints.length),a.refreshVertexBuffer=!0),i.bindBuffer(i.ARRAY_BUFFER,e),a.refreshVertexBuffer&&(i.bufferData(i.ARRAY_BUFFER,a.meshPoints,i.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1),a.refreshVertexBuffer=!1),i.vertexAttribPointer(o.vertexPointLocation,3,i.FLOAT,!1,0,0),o.loadTextureEnabled(i,!1),this.activeAttributes.drawInterior){var u=!t.pickingMode&&a.normals&&this.activeAttributes.applyLighting;this.applyMvpMatrix(t),a.meshIndicesVboCacheKey||(a.meshIndicesVboCacheKey=t.gpuResourceCache.generateCacheKey()),(e=t.gpuResourceCache.resourceForKey(a.meshIndicesVboCacheKey))||(e=i.createBuffer(),t.gpuResourceCache.putResource(a.meshIndicesVboCacheKey,e,2*this.meshIndices.length),a.refreshMeshIndices=!0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e),a.refreshMeshIndices&&(i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.meshIndices,i.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1),a.refreshMeshIndices=!1),n=this.activeAttributes.interiorColor,i.depthMask(n.alpha*this.layer.opacity>=1||t.pickingMode),o.loadColor(i,t.pickingMode?r:n),o.loadOpacity(i,t.pickingMode?1:this.layer.opacity),!s||t.pickingMode&&this.pickTransparentImagePixels||(this.activeTexture=t.gpuResourceCache.resourceForKey(this.activeAttributes.imageSource),this.activeTexture||(this.activeTexture=t.gpuResourceCache.retrieveTexture(t.currentGlContext,this.activeAttributes.imageSource)),this.activeTexture&&this.activeTexture.bind(t)&&(a.texCoordsVboCacheKey||(a.texCoordsVboCacheKey=t.gpuResourceCache.generateCacheKey()),(e=t.gpuResourceCache.resourceForKey(a.texCoordsVboCacheKey))||(e=i.createBuffer(),t.gpuResourceCache.putResource(a.texCoordsVboCacheKey,e,4*this.texCoords.length),a.refreshTexCoordBuffer=!0),i.bindBuffer(i.ARRAY_BUFFER,e),a.refreshTexCoordBuffer&&(i.bufferData(i.ARRAY_BUFFER,this.texCoords,i.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1),a.refreshTexCoordBuffer=!1),i.enableVertexAttribArray(o.vertexTexCoordLocation),i.vertexAttribPointer(o.vertexTexCoordLocation,2,i.FLOAT,!1,0,0),this.scratchMatrix.setToIdentity(),this.scratchMatrix.multiplyByTextureTransform(this.activeTexture),o.loadTextureEnabled(i,!0),o.loadTextureUnit(i,i.TEXTURE0),o.loadTextureMatrix(i,this.scratchMatrix),o.loadModulateColor(i,t.pickingMode))),u&&(o.loadApplyLighting(i,!0),a.normalsVboCacheKey||(a.normalsVboCacheKey=t.gpuResourceCache.generateCacheKey()),(e=t.gpuResourceCache.resourceForKey(a.normalsVboCacheKey))||(e=i.createBuffer(),t.gpuResourceCache.putResource(a.normalsVboCacheKey,e,4*a.normals.length),a.refreshNormalsBuffer=!0),i.bindBuffer(i.ARRAY_BUFFER,e),a.refreshNormalsBuffer&&(i.bufferData(i.ARRAY_BUFFER,a.normals,i.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1),a.refreshNormalsBuffer=!1),i.enableVertexAttribArray(o.normalVectorLocation),i.vertexAttribPointer(o.normalVectorLocation,3,i.FLOAT,!1,0,0)),i.drawElements(i.TRIANGLES,this.meshIndices.length,i.UNSIGNED_SHORT,0),s&&i.disableVertexAttribArray(o.vertexTexCoordLocation),u&&(o.loadApplyLighting(i,!1),i.disableVertexAttribArray(o.normalVectorLocation))}if(this.activeAttributes.drawOutline&&this.meshOutlineIndices&&(o.loadTextureEnabled(i,!1),i.disableVertexAttribArray(o.vertexTexCoordLocation),this.applyMvpMatrixForOutline(t),n=this.activeAttributes.outlineColor,i.depthMask(n.alpha*this.layer.opacity>=1||t.pickingMode),o.loadColor(i,t.pickingMode?r:n),o.loadOpacity(i,t.pickingMode?1:this.layer.opacity),i.lineWidth(this.activeAttributes.outlineWidth),a.outlineIndicesVboCacheKey||(a.outlineIndicesVboCacheKey=t.gpuResourceCache.generateCacheKey()),(e=t.gpuResourceCache.resourceForKey(a.outlineIndicesVboCacheKey))||(e=i.createBuffer(),t.gpuResourceCache.putResource(a.outlineIndicesVboCacheKey,e,2*this.meshOutlineIndices.length),a.refreshOutlineIndices=!0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e),a.refreshOutlineIndices&&(i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.meshOutlineIndices,i.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1),a.refreshOutlineIndices=!1),i.drawElements(i.LINE_STRIP,this.meshOutlineIndices.length,i.UNSIGNED_SHORT,0)),t.pickingMode){var l=this.computePickPosition(t),h=new c(r,this.pickDelegate?this.pickDelegate:this,l,this.layer,!1);t.resolvePick(h)}},m.prototype.computePickPosition=function(t){if(null===t.pickRay)return null;var e=this.currentData,n=t.pickRay,r=new d(n.origin[0],n.origin[1],n.origin[2]).subtract(e.referencePoint),i=new a(r,n.direction),o=[];if(g.computeIndexedTrianglesIntersection(i,e.meshPoints,this.meshIndices,o)){var s=o[0];if(o.length>1)for(var u=s.distanceToSquared(t.eyePoint),l=1;l<o.length;l++){var c=o[l].distanceToSquared(t.eyePoint);c<u&&(u=c,s=o[l])}var f=new h(0,0,0);return t.globe.computePositionFromPoint(s[0]+e.referencePoint[0],s[1]+e.referencePoint[1],s[2]+e.referencePoint[2],f),f.altitude/=this._altitudeScale,f}return null},m.prototype.beginDrawing=function(t){var e=t.currentGlContext;this.activeAttributes.drawInterior&&(e.disable(e.CULL_FACE),t.findAndBindProgram(n),!t.pickMode&&this.currentData.normals&&this.activeAttributes.applyLighting&&t.currentProgram.loadModelviewInverse(e,t.modelviewNormalTransform)),e.enableVertexAttribArray(t.currentProgram.vertexPointLocation)},m.prototype.endDrawing=function(t){var e=t.currentGlContext;e.disableVertexAttribArray(t.currentProgram.vertexPointLocation),e.depthMask(!0),e.lineWidth(1),e.enable(e.CULL_FACE)},m})),i("shapes/SurfacePolygon",["../error/ArgumentError","../util/Logger","../shapes/ShapeAttributes","../shapes/SurfaceShape"],(function(t,e,n,r){"use strict";var i=function n(i,o){if(!Array.isArray(i))throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfacePolygon","constructor","The specified boundary is not an array."));r.call(this,o),this._boundaries=i,this._stateId=n.stateId++};return i.prototype=Object.create(r.prototype),Object.defineProperties(i.prototype,{boundaries:{get:function(){return this._boundaries},set:function(n){if(!Array.isArray(n))throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfacePolygon","set boundaries","The specified value is not an array."));this.resetBoundaries(),this._boundaries=n,this._stateId=i.stateId++,this.stateKeyInvalid=!0}}}),i.stateId=Number.MIN_SAFE_INTEGER,i.staticStateKey=function(t){return r.staticStateKey(t)+" pg "+t._stateId},i.prototype.computeStateKey=function(){return i.staticStateKey(this)},i.prototype.computeBoundaries=function(t){},i.prototype.getReferencePosition=function(){return this.boundaries.length>0&&this.boundaries[0].length>2?this.boundaries[0][0]:this.boundaries.length>2?this.boundaries[0]:null},i.prototype.moveTo=function(t,e){if(this.boundaries.length>0&&this.boundaries[0].length>2){for(var n=[],r=0,i=this._boundaries.length;r<i;r++){var o=this.computeShiftedLocations(t,this.getReferencePosition(),e,this._boundaries[r]);n.push(o)}this.boundaries=n}else this.boundaries.length>2&&(this.boundaries=this.computeShiftedLocations(t,this.getReferencePosition(),e,this._boundaries))},i})),i("shapes/GeographicMesh",["../shapes/AbstractMesh","../error/ArgumentError","../shaders/BasicTextureProgram","../geom/BoundingBox","../util/Color","../util/ImageSource","../geom/Location","../util/Logger","../geom/Matrix","../pick/PickedObject","../geom/Position","../shapes/ShapeAttributes","../shapes/SurfacePolygon","../geom/Vec2","../geom/Vec3"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d){"use strict";var g=function(n,r){if(!n)throw new e(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","constructor","missingPositions"));if(n.length<2||n[0].length<2)throw new e(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","constructor","Number of positions is insufficient."));if(n.length*n[0].length>65536)throw new e(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","constructor","Too many positions. Must be fewer than 65536. Try using multiple meshes."));for(var i=n[0].length,o=1;o<n.length;o++)if(n[o].length!==i)throw new e(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","constructor","Array lengths are inconsistent."));var a=n.length,u=n[0].length;t.call(this,r),this.pickTransparentImagePixels=!0,this._positions=n,this._altitudeScale=1,this.numRows=a,this.numColumns=u,this._textureCoordinates=null,this.referencePosition=this.determineReferencePosition(this._positions)};return g.prototype=Object.create(t.prototype),Object.defineProperties(g.prototype,{positions:{get:function(){return this._positions},set:function(t){if(!t)throw new e(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","positions","missingPositions"));if(t.length<2||t[0].length<2)throw new e(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","positions","Number of positions is insufficient."));for(var n=t[0].length,r=1;r<t.length;r++)if(t[r].length!==n)throw new e(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","positions","Array lengths are inconsistent."));this.numRows=t.length,this.numColumns=t[0].length,this._positions=t,this.referencePosition=this.determineReferencePosition(this._positions),this.reset(),this.meshIndices=null,this.meshOutlineIndices=null}},textureCoordinates:{get:function(){return this._textureCoordinates},set:function(t){if(t&&t.length!=this.numRows)throw new e(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","textureCoordinates","Number of texture coordinate rows is inconsistent with the currently specified positions."));for(var n=0;n<this.numRows;n++)if(t[n].length!==this.numColumns)throw new e(s.logMessage(s.LEVEL_SEVERE,"GeographicMesh","textureCoordinates","Texture coordinate row lengths are inconsistent with the currently specified positions."));this._textureCoordinates=t,this.reset(),this.texCoords=null}}}),g.makeGridIndices=function(t,e){for(var n=[],r=0,i=0;i<t-1;i++)for(var o=0;o<e-1;o++){var a=i*e+o;n[r++]=a,n[r++]=a+1,n[r++]=a+e,n[r++]=a+1,n[r++]=a+1+e,n[r++]=a+e}return n},g.prototype.determineReferencePosition=function(t){return t[0][0]},g.prototype.createSurfaceShape=function(){for(var t=[],e=0;e<this.numColumns;e++)t.push(this._positions[0][e]);for(var n=1;n<this.numRows;n++)t.push(this._positions[n][this.numColumns-1]);for(e=this.numColumns-2;e>=0;e--)t.push(this._positions[this.numRows-1][e]);for(n=this.numRows-2;n>0;n--)t.push(this._positions[n][0]);return new f(t,null)},g.prototype.computeMeshPoints=function(t,e){for(var n,r,i=Number.MAX_VALUE,o=t.eyePoint,a=new Float32Array(this.numRows*this.numColumns*3),s=new d(0,0,0),u=0,l=0;l<this._positions.length;l++)for(var c=0,h=this._positions[l].length;c<h;c++)n=this._positions[l][c],t.surfacePointForMode(n.latitude,n.longitude,n.altitude*this._altitudeScale,this.altitudeMode,s),(r=s.distanceToSquared(o))<i&&(i=r),s.subtract(this.currentData.referencePoint),a[u++]=s[0],a[u++]=s[1],a[u++]=s[2];return e.eyeDistance=Math.sqrt(i),a},g.prototype.computeTexCoords=function(){return this._textureCoordinates?this.computeExplicitTexCoords():this.computeImplicitTexCoords()},g.prototype.computeExplicitTexCoords=function(){for(var t=new Float32Array(2*this.numRows*this.numColumns),e=0,n=0;n<this._textureCoordinates.length;n++)for(var r=0,i=this._textureCoordinates[n].length;r<i;r++){var o=this._textureCoordinates[n][r];t[e++]=o[0],t[e++]=o[1]}return t},g.prototype.computeImplicitTexCoords=function(){for(var t=new Float32Array(2*this.numRows*this.numColumns),e=1/(this.numRows-1),n=1/(this.numColumns-1),r=0,i=0;i<this._positions.length;i++)for(var o=i===this.numRows-1?1:i*e,a=0,s=this._positions[i].length;a<s;a++)t[r++]=a===this.numColumns-1?1:a*n,t[r++]=o;return t},g.prototype.computeMeshIndices=function(){for(var t=new Uint16Array((this.numRows-1)*(this.numColumns-1)*6),e=0,n=0;n<this.numRows-1;n++)for(var r=0;r<this.numColumns-1;r++){var i=n*this.numColumns+r;t[e++]=i,t[e++]=i+1,t[e++]=i+this.numColumns,t[e++]=i+1,t[e++]=i+1+this.numColumns,t[e++]=i+this.numColumns}return t},g.prototype.computeOutlineIndices=function(){for(var t=new Uint16Array(2*this.numRows+2*this.numColumns),e=0,n=0;n<this.numColumns;n++)t[e++]=n;for(var r=1;r<this.numRows;r++)t[e++]=(r+1)*this.numColumns-1;for(n=this.numRows*this.numColumns-2;n>=(this.numRows-1)*this.numColumns;n--)t[e++]=n;for(r=this.numRows-2;r>=0;r--)t[e++]=r*this.numColumns;return t},g})),i("shapes/GeographicText",["../error/ArgumentError","../util/Logger","../shapes/Text","../geom/Vec3"],(function(t,e,n,r){"use strict";var i=function(r,i){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"Text","constructor","missingPosition"));n.call(this,i),this.position=r,this.declutterGroup=1};return i.placePoint=new r(0,0,0),(i.prototype=Object.create(n.prototype)).clone=function(){var t=new i(this.position,this.text);return t.copy(this),t.pickDelegate=this.pickDelegate?this.pickDelegate:this,t},i.prototype.render=function(t){t.globe.projectionLimits&&!t.globe.projectionLimits.containsLocation(this.position.latitude,this.position.longitude)||n.prototype.render.call(this,t)},i.prototype.computeScreenPointAndEyeDistance=function(t){return t.surfacePointForMode(this.position.latitude,this.position.longitude,this.position.altitude,this.altitudeMode,i.placePoint),!!t.frustumInModelCoordinates.containsPoint(i.placePoint)&&(this.eyeDistance=this.alwaysOnTop?0:t.eyePoint.distanceTo(i.placePoint),!!t.projectWithDepth(i.placePoint,this.depthOffset,this.screenPoint))},i})),i("formats/geojson/GeoJSONConstants",[],(function(){"use strict";var t=function(){};return t.FIELD_TYPE="type",t.FIELD_CRS="crs",t.FIELD_NAME="name",t.FIELD_BBOX="bbox",t.FIELD_COORDINATES="coordinates",t.FIELD_GEOMETRIES="geometries",t.FIELD_GEOMETRY="geometry",t.FIELD_PROPERTIES="properties",t.FIELD_FEATURES="features",t.FIELD_ID="id",t.TYPE_POINT="Point",t.TYPE_MULTI_POINT="MultiPoint",t.TYPE_LINE_STRING="LineString",t.TYPE_MULTI_LINE_STRING="MultiLineString",t.TYPE_POLYGON="Polygon",t.TYPE_MULTI_POLYGON="MultiPolygon",t.TYPE_GEOMETRY_COLLECTION="GeometryCollection",t.TYPE_FEATURE="Feature",t.TYPE_FEATURE_COLLECTION="FeatureCollection",t.FIELD_CRS_NAME="name",t.FIELD_CRS_LINK="link",t.WGS84_CRS="urn:ogc:def:crs:OGC:1.3:CRS84",t.EPSG4326_CRS="EPSG:4326",t})),i("formats/geojson/GeoJSONExporter",["../../error/ArgumentError","./GeoJSONConstants","../../util/Logger"],(function(t,e,n){"use strict";return{exportRenderable:function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportRenderable","missingRenderable"));return e instanceof WorldWind.Placemark?this.exportPlacemark(e):e instanceof WorldWind.SurfacePolyline?this.exportSurfacePolyline(e):e instanceof WorldWind.SurfacePolygon?this.exportSurfacePolygon(e):e instanceof WorldWind.SurfaceEllipse?this.exportSurfaceEllipse(e):e instanceof WorldWind.SurfaceCircle?this.exportSurfaceCircle(e):e instanceof WorldWind.SurfaceRectangle?this.exportSurfaceRectangle(e):e instanceof WorldWind.SurfaceSector?this.exportSurfaceSector(e):e instanceof WorldWind.Path?this.exportPath(e):e instanceof WorldWind.Polygon?this.exportPolygon(e):(n.log(n.LEVEL_WARNING,"Export renderable not implemented: "+e),null)},exportRenderables:function(r){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportRenderables","missingRenderables"));if(0!=r.length){if(r.length>1){var i="{";i=(i=i+'"'+e.FIELD_TYPE+'":"'+e.TYPE_GEOMETRY_COLLECTION+'"')+',"'+e.FIELD_GEOMETRIES+'":[';for(var o=0;o<r.length;o++){var a=this.exportRenderable(r[o]);a&&(i+=a,i+=",")}return","===i.slice(-1)&&(i=i.substring(0,i.length-1)),(i+="]")+"}"}return this.exportRenderable(r[0])}},exportLayer:function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportLayer","missingLayer"));return this.exportRenderables(e.renderables)},exportPlacemark:function(r){if(!(r instanceof WorldWind.Placemark))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportPlacemark","invalidTypeOfRenderable"));var i="{";return(i=(i=(i=i+'"'+e.FIELD_TYPE+'":"'+e.TYPE_POINT+'",')+'"'+e.FIELD_COORDINATES+'":')+"["+r.position.longitude+","+r.position.latitude+"]")+"}"},exportSurfacePolyline:function(r){if(!(r instanceof WorldWind.SurfacePolyline))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportSurfacePolyline","invalidTypeOfRenderable"));var i="{";i=(i=i+'"'+e.FIELD_TYPE+'":"'+e.TYPE_LINE_STRING+'",')+'"'+e.FIELD_COORDINATES+'":[';for(var o=0;o<r.boundaries.length;o++)i=i+"["+r.boundaries[o].longitude+","+r.boundaries[o].latitude+"]",o!==r.boundaries.length-1&&(i+=",");return(i+="]")+"}"},exportSurfacePolygon:function(r){if(!(r instanceof WorldWind.SurfacePolygon))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportSurfacePolygon","invalidTypeOfRenderable"));var i="{";if(i=(i=i+'"'+e.FIELD_TYPE+'":"'+e.TYPE_POLYGON+'",')+'"'+e.FIELD_COORDINATES+'":[',r.boundaries.length>0&&r.boundaries[0].length>2)for(var o=0;o<r.boundaries.length;o++){i+="[";for(var a=0;a<r.boundaries[o].length;a++)i=i+"["+r.boundaries[o][a].longitude+","+r.boundaries[o][a].latitude+"]",i+=",",a===r.boundaries[o].length-1&&(i=i+"["+r.boundaries[o][0].longitude+","+r.boundaries[o][0].latitude+"]");i+="]",o!==r.boundaries.length-1&&(i+=",")}else{for(i+="[",o=0;o<r.boundaries.length;o++)i=i+"["+r.boundaries[o].longitude+","+r.boundaries[o].latitude+"]",i+=",",o===r.boundaries.length-1&&(i=i+"["+r.boundaries[0].longitude+","+r.boundaries[0].latitude+"]");i+="]"}return(i+="]")+"}"},exportSurfaceEllipse:function(r){if(!(r instanceof WorldWind.SurfaceEllipse))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportSurfaceEllipse","invalidTypeOfRenderable"));var i="{";i=(i=i+'"'+e.FIELD_TYPE+'":"'+e.TYPE_POLYGON+'",')+'"'+e.FIELD_COORDINATES+'":[',i+="[";for(var o=0;o<r._boundaries.length;o++)i=i+"["+r._boundaries[o].longitude+","+r._boundaries[o].latitude+"]",i+=",",o===r._boundaries.length-1&&(i=i+"["+r._boundaries[0].longitude+","+r._boundaries[0].latitude+"]");return i+="]",(i+="]")+"}"},exportSurfaceCircle:function(r){if(!(r instanceof WorldWind.SurfaceCircle))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportSurfaceCircle","invalidTypeOfRenderable"));var i="{";i=(i=i+'"'+e.FIELD_TYPE+'":"'+e.TYPE_POLYGON+'",')+'"'+e.FIELD_COORDINATES+'":[',i+="[";for(var o=r._boundaries.length-1;o>=0;o--)i=i+"["+r._boundaries[o].longitude+","+r._boundaries[o].latitude+"]",i+=",",0===o&&(i=i+"["+r._boundaries[r._boundaries.length-1].longitude+","+r._boundaries[r._boundaries.length-1].latitude+"]");return i+="]",(i+="]")+"}"},exportSurfaceRectangle:function(r){if(!(r instanceof WorldWind.SurfaceRectangle))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportSurfaceRectangle","invalidTypeOfRenderable"));var i="{";i=(i=i+'"'+e.FIELD_TYPE+'":"'+e.TYPE_POLYGON+'",')+'"'+e.FIELD_COORDINATES+'":[',i+="[";for(var o=0;o<r._boundaries.length;o++)i=i+"["+r._boundaries[o].longitude+","+r._boundaries[o].latitude+"]",i+=",",o===r._boundaries.length-1&&(i=i+"["+r._boundaries[0].longitude+","+r._boundaries[0].latitude+"]");return i+="]",(i+="]")+"}"},exportSurfaceSector:function(r){if(!(r instanceof WorldWind.SurfaceSector))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportSurfaceSector","invalidTypeOfRenderable"));var i="{";i=(i=i+'"'+e.FIELD_TYPE+'":"'+e.TYPE_POLYGON+'",')+'"'+e.FIELD_COORDINATES+'":[',i+="[",r._boundaries.reverse();for(var o=0;o<r._boundaries.length;o++)i=i+"["+r._boundaries[o].longitude+","+r._boundaries[o].latitude+"]",i+=",",o===r._boundaries.length-1&&(i=i+"["+r._boundaries[0].longitude+","+r._boundaries[0].latitude+"]");return i+="]",(i+="]")+"}"},exportPath:function(r){if(!(r instanceof WorldWind.Path))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportPath","invalidTypeOfRenderable"));var i="{";i=(i=i+'"'+e.FIELD_TYPE+'":"'+e.TYPE_LINE_STRING+'",')+'"'+e.FIELD_COORDINATES+'":[';for(var o=0;o<r.positions.length;o++)i=i+"["+r.positions[o].longitude+","+r.positions[o].latitude+","+r.positions[o].altitude+"]",o!==r.positions.length-1&&(i+=",");return(i+="]")+"}"},exportPolygon:function(r){if(!(r instanceof WorldWind.Polygon))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONExporter","exportPolygon","invalidTypeOfRenderable"));var i="{";if(i=(i=i+'"'+e.FIELD_TYPE+'":"'+e.TYPE_POLYGON+'",')+'"'+e.FIELD_COORDINATES+'":[',r.boundaries.length>0&&r.boundaries[0].length>2)for(var o=0;o<r.boundaries.length;o++){i+="[";for(var a=0;a<r.boundaries[o].length;a++)i=i+"["+r.boundaries[o][a].longitude+","+r.boundaries[o][a].latitude+","+r.boundaries[o][a].altitude+"]",i+=",",a===r.boundaries[o].length-1&&(i=i+"["+r.boundaries[o][0].longitude+","+r.boundaries[o][0].latitude+","+r.boundaries[o][0].altitude+"]");i+="]",o!==r.boundaries.length-1&&(i+=",")}else{for(i+="[",o=0;o<r.boundaries.length;o++)i=i+"["+r.boundaries[o].longitude+","+r.boundaries[o].latitude+","+r.boundaries[o].altitude+"]",i+=",",o===r.boundaries.length-1&&(i=i+"["+r.boundaries[0].longitude+","+r.boundaries[0].latitude+","+r.boundaries[0].altitude+"]");i+="]"}return(i+="]")+"}"}}})),i("formats/geojson/GeoJSONGeometry",["../../error/ArgumentError","./GeoJSONConstants","../../util/Logger"],(function(t,e,n){"use strict";var r=function(e,r,i){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometry","constructor","missingCoordinates"));if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometry","constructor","missingType"));this._coordinates=e,this._type=r,this._bbox=i||null};return Object.defineProperties(r.prototype,{coordinates:{get:function(){return this._coordinates}},type:{get:function(){return this._type}},bbox:{get:function(){return this._bbox}}}),r.prototype.isPointType=function(){return this.type===e.TYPE_POINT},r.prototype.isMultiPointType=function(){return this.type===e.TYPE_MULTI_POINT},r.prototype.isLineStringType=function(){return this.type===e.TYPE_LINE_STRING},r.prototype.isMultiLineStringType=function(){return this.type===e.TYPE_MULTI_LINE_STRING},r.prototype.isPolygonType=function(){return this.type===e.TYPE_POLYGON},r.prototype.isMultiPolygonType=function(){return this.type===e.TYPE_MULTI_POLYGON},r})),i("formats/geojson/GeoJSONGeometryCollection",["../../error/ArgumentError","./GeoJSONConstants","../../util/Logger"],(function(t,e,n){"use strict";var r=function(e,r){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryCollection","constructor","missingGeometries"));if("[object Array]"!==Object.prototype.toString.call(e))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryCollection","constructor","invalidGeometries"));this._geometries=e,this._bbox=r};return Object.defineProperties(r.prototype,{geometries:{get:function(){return this._geometries}},bbox:{get:function(){return this._bbox}}}),r})),i("formats/geojson/GeoJSONGeometryLineString",["../../error/ArgumentError","./GeoJSONGeometry","../../util/Logger"],(function(t,e,n){"use strict";var r=function(r,i,o){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryLineString","constructor","missingCoordinates"));if(r.length<2||r[0].length<2)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryLineString","constructor","invalidNumberOfCoordinates"));if("[object Array]"!==Object.prototype.toString.call(r[0])||"[object Number]"!==Object.prototype.toString.call(r[0][0]))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryLineString","constructor","invalidCoordinatesType"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryLineString","constructor","missingType"));e.call(this,r,i,o)};return r.prototype=Object.create(e.prototype),r})),i("formats/geojson/GeoJSONGeometryMultiLineString",["../../error/ArgumentError","./GeoJSONGeometry","../../util/Logger"],(function(t,e,n){"use strict";var r=function(r,i,o){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiLineString","constructor","missingCoordinates"));if(r[0].length<2||r[0][0].length<2)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiLineString","constructor","invalidNumberOfCoordinates"));if("[object Array]"!==Object.prototype.toString.call(r[0])||"[object Array]"!==Object.prototype.toString.call(r[0][0])||"[object Number]"!==Object.prototype.toString.call(r[0][0][0]))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiLineString","constructor","invalidCoordinatesType"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryLineString","constructor","missingType"));e.call(this,r,i,o)};return r.prototype=Object.create(e.prototype),r})),i("formats/geojson/GeoJSONGeometryMultiPoint",["../../error/ArgumentError","./GeoJSONGeometry","../../util/Logger"],(function(t,e,n){"use strict";var r=function(r,i,o){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiPoint","constructor","missingCoordinates"));if(r[0].length<2)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiPoint","constructor","invalidNumberOfCoordinates"));if("[object Array]"!==Object.prototype.toString.call(r[0])||"[object Number]"!==Object.prototype.toString.call(r[0][0]))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiPoint","constructor","invalidCoordinatesType"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPoint","constructor","missingType"));e.call(this,r,i,o)};return r.prototype=Object.create(e.prototype),r})),i("formats/geojson/GeoJSONGeometryMultiPolygon",["../../error/ArgumentError","./GeoJSONGeometry","../../util/Logger"],(function(t,e,n){"use strict";var r=function(r,i,o){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryMultiPolygon","constructor","missingCoordinates"));if("[object Array]"!==Object.prototype.toString.call(r[0])||"[object Array]"!==Object.prototype.toString.call(r[0][0])||"[object Array]"!==Object.prototype.toString.call(r[0][0][0])||"[object Number]"!==Object.prototype.toString.call(r[0][0][0][0]))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","invalidCoordinatesType"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","missingType"));e.call(this,r,i,o)};return r.prototype=Object.create(e.prototype),r})),i("formats/geojson/GeoJSONGeometryPoint",["../../error/ArgumentError","./GeoJSONGeometry","../../util/Logger"],(function(t,e,n){"use strict";var r=function(r,i,o){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPoint","constructor","missingCoordinates"));if(r.length<2)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPoint","constructor","invalidNumberOfCoordinates"));if("[object Array]"!==Object.prototype.toString.call(r)||"[object Number]"!==Object.prototype.toString.call(r[0]))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPoint","constructor","invalidCoordinatesType"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPoint","constructor","missingType"));e.call(this,r,i,o)};return r.prototype=Object.create(e.prototype),r})),i("formats/geojson/GeoJSONGeometryPolygon",["../../error/ArgumentError","./GeoJSONGeometry","../../util/Logger"],(function(t,e,n){"use strict";var r=function(r,i,o){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","missingCoordinates"));if(r[0].length<2||r[0][0].length<2)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","invalidNumberOfCoordinates"));if("[object Array]"!==Object.prototype.toString.call(r[0])||"[object Array]"!==Object.prototype.toString.call(r[0][0])||"[object Number]"!==Object.prototype.toString.call(r[0][0][0]))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","invalidCoordinatesType"));for(var a=0;a<r.length;a++)if(r[a][0][0]!==r[a][r[a].length-1][0]||r[a][0][1]!==r[a][r[a].length-1][1])throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","invalidLinearRing"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONGeometryPolygon","constructor","missingType"));e.call(this,r,i,o)};return r.prototype=Object.create(e.prototype),r})),i("formats/geojson/GeoJSONCRS",["../../error/ArgumentError","./GeoJSONConstants","../../util/Logger","../../util/proj4-src"],(function(t,e,n,r){"use strict";var i=function(e,r){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONCRS","constructor","missingType"));if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONCRS","constructor","missingProperties"));this._type=e,this._properties=r,this._projectionString=null};return Object.defineProperties(i.prototype,{type:{get:function(){return this._type}},properties:{get:function(){return this._properties}},projectionString:{get:function(){return this._projectionString}}}),i.prototype.isDefault=function(){return!(!this.isNamed()||this._projectionString!==e.EPSG4326_CRS&&this._projectionString!==e.WGS84_CRS)},i.prototype.isNamed=function(){return this._type===e.FIELD_CRS_NAME},i.prototype.isLinked=function(){return this._type===e.FIELD_CRS_LINK},i.prototype.isCRSSupported=function(){try{r(this._projectionString,e.EPSG4326_CRS)}catch(t){return n.log(n.LEVEL_WARNING,"Unknown GeoJSON coordinate reference system ("+t+"): "+this._properties.name),!1}return!0},i.prototype.getLinkedCRSString=function(t,e){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="text",r.onreadystatechange=function(){4===r.readyState&&(200===r.status?(this._projectionString=r.response,e()):n.log(n.LEVEL_WARNING,"GeoJSON Linked CRS retrieval failed ("+r.statusText+"): "+t))}.bind(this),r.onerror=function(){n.log(n.LEVEL_WARNING,"GeoJSON Linked CRS retrieval failed: "+t)},r.ontimeout=function(){n.log(n.LEVEL_WARNING,"GeoJSON Linked CRS retrieval timed out: "+t)},r.send(null)},i.prototype.setCRSString=function(t){this.isNamed()?(this._projectionString=this._properties.name,t()):this.isLinked()&&this.getLinkedCRSString(this._properties.href,t)},i})),i("formats/geojson/GeoJSONFeature",["../../error/ArgumentError","./GeoJSONConstants","../../util/Logger"],(function(t,e,n){"use strict";var r=function(r,i,o,a){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONFeature","constructor","missingGeometry"));if(!r[e.FIELD_TYPE])throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONFeature","constructor","missingFeatureGeometryType"));if(!i)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONFeature","constructor","missingProperties"));this._geometry=r,this._properties=i,this._id=o,this._bbox=a};return Object.defineProperties(r.prototype,{geometry:{get:function(){return this._geometry}},properties:{get:function(){return this._properties}},id:{get:function(){return this._id}},bbox:{get:function(){return this._bbox}}}),r})),i("formats/geojson/GeoJSONFeatureCollection",["../../error/ArgumentError","./GeoJSONConstants","../../util/Logger"],(function(t,e,n){"use strict";var r=function(e,r,i){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONFeatureCollection","constructor","missingFeatures"));if("[object Array]"!==Object.prototype.toString.call(e))throw new t(n.logMessage(n.LEVEL_SEVERE,"GeoJSONFeatureCollection","constructor","invalidFeatures"));this._properties=r,this._features=e,this._bbox=i};return Object.defineProperties(r.prototype,{features:{get:function(){return this._features}},properties:{get:function(){return this._properties}},bbox:{get:function(){return this._bbox}}}),r})),i("shapes/PlacemarkAttributes",["../util/Color","../util/Font","../util/Offset","../shapes/ShapeAttributes","../shapes/TextAttributes"],(function(t,e,n,r,i){"use strict";var o=function(e){this._imageColor=e?e._imageColor.clone():t.WHITE.clone(),this._imageOffset=e?e._imageOffset:new n(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,.5),this._imageScale=e?e._imageScale:1,this._imageSource=e?e._imageSource:null,this._depthTest=!e||e._depthTest,this._labelAttributes=e?e._labelAttributes:new i(null),this._drawLeaderLine=!!e&&e._drawLeaderLine,this._leaderLineAttributes=e?e._leaderLineAttributes:new r(null),this.stateKeyInvalid=!0};return o.prototype.computeStateKey=function(){return"ic "+this._imageColor.toHexString(!0)+" io "+this._imageOffset.toString()+" is "+this._imageScale+" ip "+this._imageSource+" dt "+this._depthTest+" la "+this._labelAttributes.stateKey+" dll "+this._drawLeaderLine+" lla "+this._leaderLineAttributes.stateKey},Object.defineProperties(o.prototype,{stateKey:{get:function(){return this.stateKeyInvalid&&(this._stateKey=this.computeStateKey(),this.stateKeyInvalid=!1),this._stateKey}},imageColor:{get:function(){return this._imageColor},set:function(t){this._imageColor=t,this.stateKeyInvalid=!0}},imageOffset:{get:function(){return this._imageOffset},set:function(t){this._imageOffset=t,this.stateKeyInvalid=!0}},imageScale:{get:function(){return this._imageScale},set:function(t){this._imageScale=t,this.stateKeyInvalid=!0}},imageSource:{get:function(){return this._imageSource},set:function(t){this._imageSource=t,this.stateKeyInvalid=!0}},depthTest:{get:function(){return this._depthTest},set:function(t){this._depthTest=t,this.stateKeyInvalid=!0}},labelAttributes:{get:function(){return this._labelAttributes},set:function(t){this._labelAttributes=t,this.stateKeyInvalid=!0}},drawLeaderLine:{get:function(){return this._drawLeaderLine},set:function(t){this._drawLeaderLine=t,this.stateKeyInvalid=!0}},leaderLineAttributes:{get:function(){return this._leaderLineAttributes},set:function(t){this._leaderLineAttributes=t,this.stateKeyInvalid=!0}}}),o})),i("shapes/Placemark",["../error/ArgumentError","../shaders/BasicTextureProgram","../util/Color","../util/Font","../util/Logger","../geom/Matrix","../pick/PickedObject","../shapes/PlacemarkAttributes","../render/Renderable","../geom/Vec2","../geom/Vec3","../util/WWMath"],(function(t,e,n,r,i,o,a,s,u,l,c,h){"use strict";var f=function(e,n,r){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"Placemark","constructor","missingPosition"));u.call(this),this.attributes=r||new s(null),this.highlightAttributes=null,this.highlighted=!1,this.position=e,this.eyeDistanceScaling=n,this.eyeDistanceScalingThreshold=1e6,this.eyeDistanceScalingLabelThreshold=1.5*this.eyeDistanceScalingThreshold,this.label=null,this.altitudeMode=WorldWind.ABSOLUTE,this.alwaysOnTop=!1,this.enableLeaderLinePicking=!1,this.updateImage=!0,this.declutterGroup=2,this.targetVisibility=1,this.currentVisibility=1,this.imageRotation=0,this.imageTilt=0,this.imageRotationReference=WorldWind.RELATIVE_TO_SCREEN,this.imageTiltReference=WorldWind.RELATIVE_TO_SCREEN,this.activeAttributes=null,this.activeTexture=null,this.labelTexture=null,this.placePoint=new c(0,0,0),this.groundPoint=new c(0,0,0),this.imageTransform=o.fromIdentity(),this.labelTransform=o.fromIdentity(),this.texCoordMatrix=o.fromIdentity(),this.imageBounds=null,this.layer=null,this.depthOffset=-.003};return f.screenPoint=new c(0,0,0),f.matrix=o.fromIdentity(),f.scratchPoint=new c(0,0,0),f.prototype=Object.create(u.prototype),Object.defineProperties(f.prototype,{screenBounds:{get:function(){return this.labelBounds}}}),f.prototype.copy=function(t){return this.position=t.position,this.attributes=t.attributes,this.highlightAttributes=t.highlightAttributes,this.highlighted=t.highlighted,this.enabled=t.enabled,this.label=t.label,this.altitudeMode=t.altitudeMode,this.pickDelegate=t.pickDelegate,this.alwaysOnTop=t.alwaysOnTop,this.depthOffset=t.depthOffset,this.targetVisibility=t.targetVisibility,this.currentVisibility=t.currentVisibility,this.imageRotation=t.imageRotation,this.imageTilt=t.imageTilt,this.imageRotationReference=t.imageRotationReference,this.imageTiltReference=t.imageTiltReference,this},f.prototype.clone=function(){var t=new f(this.position);return t.copy(this),t.pickDelegate=this.pickDelegate?this.pickDelegate:this,t},f.prototype.render=function(t){var e;this.enabled&&t.accumulateOrderedRenderables&&(!t.globe.projectionLimits||t.globe.projectionLimits.containsLocation(this.position.latitude,this.position.longitude))&&((e=this.lastFrameTime!==t.timestamp?this.makeOrderedRenderable(t):this.clone().makeOrderedRenderable(t))&&e.isVisible(t)&&(e.layer=t.currentLayer,this.lastFrameTime=t.timestamp,t.addOrderedRenderable(e)))},f.prototype.renderOrdered=function(t){if(this.drawOrderedPlacemark(t),t.pickingMode){var e=new a(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,this.position,this.layer,!1);t.pickPoint&&this.mustDrawLabel()&&this.labelBounds.containsPoint(t.convertPointToViewport(t.pickPoint,f.scratchPoint))&&(e.labelPicked=!0),t.resolvePick(e)}},f.prototype.makeOrderedRenderable=function(t){var e,n,r,i;if(this.determineActiveAttributes(t),!this.activeAttributes)return null;if(t.surfacePointForMode(this.position.latitude,this.position.longitude,this.position.altitude,this.altitudeMode,this.placePoint),this.eyeDistance=this.alwaysOnTop?0:t.eyePoint.distanceTo(this.placePoint),this.mustDrawLeaderLine(t)&&t.surfacePointForMode(this.position.latitude,this.position.longitude,0,this.altitudeMode,this.groundPoint),!t.projectWithDepth(this.placePoint,this.depthOffset,f.screenPoint))return null;var o=this.eyeDistanceScaling?Math.max(0,Math.min(1,this.eyeDistanceScalingThreshold/this.eyeDistance)):1;return this.activeTexture?(e=this.activeTexture.originalImageWidth,n=this.activeTexture.originalImageHeight,r=this.activeAttributes.imageScale*o,i=this.activeAttributes.imageOffset.offsetForSize(e,n),this.imageTransform.setTranslation(f.screenPoint[0]-i[0]*r,f.screenPoint[1]-i[1]*r,f.screenPoint[2]),this.imageTransform.setScale(e*r,n*r,1)):(r=this.activeAttributes.imageScale*o,i=this.activeAttributes.imageOffset.offsetForSize(r,r),this.imageTransform.setTranslation(f.screenPoint[0]-i[0],f.screenPoint[1]-i[1],f.screenPoint[2]),this.imageTransform.setScale(r,r,1)),this.imageBounds=h.boundingRectForUnitQuad(this.imageTransform),this.mustDrawLabel()&&(this.labelTexture=t.createTextTexture(this.label,this.activeAttributes.labelAttributes),e=this.labelTexture.imageWidth,n=this.labelTexture.imageHeight,r=this.activeAttributes.labelAttributes.scale*o,i=this.activeAttributes.labelAttributes.offset.offsetForSize(e,n),this.labelTransform.setTranslation(f.screenPoint[0]-i[0]*r,f.screenPoint[1]-i[1]*r,f.screenPoint[2]),this.labelTransform.setScale(e*r,n*r,1),this.labelBounds=h.boundingRectForUnitQuad(this.labelTransform)),this},f.prototype.determineActiveAttributes=function(t){this.highlighted&&this.highlightAttributes?this.activeAttributes=this.highlightAttributes:this.activeAttributes=this.attributes,this.activeAttributes&&this.activeAttributes.imageSource&&(this.activeTexture=t.gpuResourceCache.resourceForKey(this.activeAttributes.imageSource),this.activeTexture&&!this.updateImage||(this.activeTexture=t.gpuResourceCache.retrieveTexture(t.currentGlContext,this.activeAttributes.imageSource),this.updateImage=!1))},f.prototype.isVisible=function(t){return t.pickingMode?t.pickRectangle&&(this.imageBounds.intersects(t.pickRectangle)||this.mustDrawLabel()&&this.labelBounds.intersects(t.pickRectangle)||this.mustDrawLeaderLine(t)&&t.pickFrustum.intersectsSegment(this.groundPoint,this.placePoint)):this.imageBounds.intersects(t.viewport)||this.mustDrawLabel()&&this.labelBounds.intersects(t.viewport)||this.mustDrawLeaderLine(t)&&t.frustumInModelCoordinates.intersectsSegment(this.groundPoint,this.placePoint)},f.prototype.drawOrderedPlacemark=function(t){this.beginDrawing(t);try{this.doDrawOrderedPlacemark(t),t.pickingMode||this.drawBatchOrderedPlacemarks(t)}finally{this.endDrawing(t)}},f.prototype.drawBatchOrderedPlacemarks=function(t){for(var e;(e=t.peekOrderedRenderable())&&e.doDrawOrderedPlacemark;){t.popOrderedRenderable();try{e.doDrawOrderedPlacemark(t)}catch(t){i.logMessage(i.LEVEL_WARNING,"Placemark","drawBatchOrderedPlacemarks","Error occurred while rendering placemark using batching: "+t.message)}}},f.prototype.beginDrawing=function(t){var n,r=t.currentGlContext;t.findAndBindProgram(e),n=t.currentProgram,r.bindBuffer(r.ARRAY_BUFFER,t.unitQuadBuffer()),r.vertexAttribPointer(n.vertexTexCoordLocation,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n.vertexPointLocation),r.enableVertexAttribArray(n.vertexTexCoordLocation),n.loadTextureUnit(r,r.TEXTURE0),n.loadModulateColor(r,t.pickingMode)},f.prototype.endDrawing=function(t){var e=t.currentGlContext,n=t.currentProgram;e.disableVertexAttribArray(n.vertexPointLocation),e.disableVertexAttribArray(n.vertexTexCoordLocation),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindTexture(e.TEXTURE_2D,null)},f.prototype.doDrawOrderedPlacemark=function(t){var e,r=t.currentGlContext,i=t.currentProgram,o=!0;if(t.pickingMode&&(this.pickColor=t.uniquePickColor()),this.eyeDistanceScaling&&this.eyeDistance>this.eyeDistanceScalingLabelThreshold&&(this.targetVisibility=0),!t.pickingMode&&this.mustDrawLabel()&&this.currentVisibility!=this.targetVisibility){var a=(t.timestamp-t.previousRedrawTimestamp)/t.fadeTime;this.currentVisibility<this.targetVisibility?this.currentVisibility=Math.min(1,this.currentVisibility+a):this.currentVisibility=Math.max(0,this.currentVisibility-a),t.redrawRequested=!0}if(i.loadOpacity(r,t.pickingMode?1:this.layer.opacity),this.mustDrawLeaderLine(t)){this.leaderLinePoints||(this.leaderLinePoints=new Float32Array(6)),this.leaderLinePoints[0]=this.groundPoint[0],this.leaderLinePoints[1]=this.groundPoint[1],this.leaderLinePoints[2]=this.groundPoint[2],this.leaderLinePoints[3]=this.placePoint[0],this.leaderLinePoints[4]=this.placePoint[1],this.leaderLinePoints[5]=this.placePoint[2],this.leaderLineCacheKey||(this.leaderLineCacheKey=t.gpuResourceCache.generateCacheKey());var s=t.gpuResourceCache.resourceForKey(this.leaderLineCacheKey);s||(s=r.createBuffer(),t.gpuResourceCache.putResource(this.leaderLineCacheKey,s,4*this.leaderLinePoints.length)),i.loadTextureEnabled(r,!1),i.loadColor(r,t.pickingMode?this.pickColor:this.activeAttributes.leaderLineAttributes.outlineColor),f.matrix.copy(t.modelviewProjection),i.loadModelviewProjection(r,f.matrix),this.activeAttributes.leaderLineAttributes.depthTest||r.disable(r.DEPTH_TEST),r.lineWidth(this.activeAttributes.leaderLineAttributes.outlineWidth),r.bindBuffer(r.ARRAY_BUFFER,s),r.bufferData(r.ARRAY_BUFFER,this.leaderLinePoints,r.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1),r.vertexAttribPointer(i.vertexPointLocation,3,r.FLOAT,!1,0,0),r.drawArrays(r.LINES,0,2)}this.activeAttributes.depthTest||(o=!1,r.disable(r.DEPTH_TEST)),r.bindBuffer(r.ARRAY_BUFFER,t.unitQuadBuffer3()),r.vertexAttribPointer(i.vertexPointLocation,3,r.FLOAT,!1,0,0),f.matrix.copy(t.screenProjection),f.matrix.multiplyMatrix(this.imageTransform);var u=this.imageRotationReference===WorldWind.RELATIVE_TO_GLOBE?t.navigator.heading-this.imageRotation:-this.imageRotation;f.matrix.multiplyByTranslation(.5,.5,0),f.matrix.multiplyByRotation(0,0,1,u),f.matrix.multiplyByTranslation(-.5,-.5,0);var l=this.imageTiltReference===WorldWind.RELATIVE_TO_GLOBE?t.navigator.tilt+this.imageTilt:this.imageTilt;f.matrix.multiplyByRotation(-1,0,0,l),i.loadModelviewProjection(r,f.matrix),i.loadTextureEnabled(r,!0),t.pickingMode?i.loadColor(r,this.pickColor):i.loadColor(r,this.activeAttributes.imageColor),this.texCoordMatrix.setToIdentity(),this.activeTexture&&this.texCoordMatrix.multiplyByTextureTransform(this.activeTexture),i.loadTextureMatrix(r,this.texCoordMatrix),this.activeTexture?(e=this.activeTexture.bind(t),i.loadTextureEnabled(r,e)):i.loadTextureEnabled(r,!1),r.drawArrays(r.TRIANGLE_STRIP,0,4),this.mustDrawLabel()&&this.currentVisibility>0&&(i.loadOpacity(r,t.pickingMode?1:this.layer.opacity*this.currentVisibility),f.matrix.copy(t.screenProjection),f.matrix.multiplyMatrix(this.labelTransform),i.loadModelviewProjection(r,f.matrix),!t.pickingMode&&this.labelTexture?(this.texCoordMatrix.setToIdentity(),this.texCoordMatrix.multiplyByTextureTransform(this.labelTexture),i.loadTextureMatrix(r,this.texCoordMatrix),i.loadColor(r,n.WHITE),e=this.labelTexture.bind(t),i.loadTextureEnabled(r,e)):(i.loadTextureEnabled(r,!1),i.loadColor(r,this.pickColor)),this.activeAttributes.labelAttributes.depthTest?o||(o=!0,r.enable(r.DEPTH_TEST)):(o=!1,r.disable(r.DEPTH_TEST)),r.drawArrays(r.TRIANGLE_STRIP,0,4)),o||r.enable(r.DEPTH_TEST)},f.prototype.mustDrawLabel=function(){return this.label&&this.label.length>0&&this.activeAttributes.labelAttributes},f.prototype.mustDrawLeaderLine=function(t){return this.activeAttributes.drawLeaderLine&&this.activeAttributes.leaderLineAttributes&&(!t.pickingMode||this.enableLeaderLinePicking)},f.prototype.getReferencePosition=function(){return this.position},f.prototype.moveTo=function(t,e){this.position=e},f})),i("shapes/Polygon",["../shapes/AbstractShape","../error/ArgumentError","../shaders/BasicTextureProgram","../geom/BoundingBox","../util/Color","../util/ImageSource","../geom/Location","../util/Logger","../geom/Matrix","../pick/PickedObject","../geom/Position","../shapes/ShapeAttributes","../shapes/SurfacePolygon","../geom/Vec2","../geom/Vec3","../util/libtess"],(function(t,e,n,r,i,a,s,u,l,c,h,f,p,d,g,m){"use strict";var y=function(n,r){if(!n)throw new e(u.logMessage(u.LEVEL_SEVERE,"Polygon","constructor","missingBoundaries"));t.call(this,r),n.length>0&&n[0].latitude&&(n=[n],this._boundariesSpecifiedSimply=!0),this._boundaries=n,this._textureCoordinates=null,this.referencePosition=this.determineReferencePosition(this._boundaries),this._extrude=!1,this.scratchPoint=new g(0,0,0)};return y.prototype=Object.create(t.prototype),Object.defineProperties(y.prototype,{boundaries:{get:function(){return this._boundariesSpecifiedSimply?this._boundaries[0]:this._boundaries},set:function(t){if(!t)throw new e(u.logMessage(u.LEVEL_SEVERE,"Polygon","boundaries","missingBoundaries"));t.length>0&&t[0].latitude&&(t=[t],this._boundariesSpecifiedSimply=!0),this._boundaries=t,this.referencePosition=this.determineReferencePosition(this._boundaries),this.reset()}},textureCoordinates:{get:function(){return this._textureCoordinates},set:function(t){this._textureCoordinates=t,this.reset()}},extrude:{get:function(){return this._extrude},set:function(t){this._extrude=t,this.reset()}}}),y.prototype.determineReferencePosition=function(t){return t.length>0&&t[0].length>2?t[0][0]:null},y.prototype.mustGenerateGeometry=function(t){return!this.currentData.boundaryPoints||this.currentData.drawInterior!==this.activeAttributes.drawInterior||this.altitudeMode!==WorldWind.ABSOLUTE&&this.currentData.isExpired},y.prototype.hasCapTexture=function(){return this.textureCoordinates&&this.capImageSource()},y.prototype.capImageSource=function(){return this.activeAttributes.imageSource?"string"==typeof this.activeAttributes.imageSource||this.activeAttributes.imageSource instanceof a?this.activeAttributes.imageSource:Array.isArray(this.activeAttributes.imageSource)&&this.activeAttributes.imageSource[0]&&("string"==typeof this.activeAttributes.imageSource[0]||this.activeAttributes.imageSource instanceof a)?this.activeAttributes.imageSource[0]:null:null},y.prototype.hasSideTextures=function(){return this.activeAttributes.imageSource&&Array.isArray(this.activeAttributes.imageSource)&&this.activeAttributes.imageSource.length>1},y.prototype.sideImageSource=function(t){if(0===t||2===this.activeAttributes.imageSource.length)return this.activeAttributes.imageSource[1];var e=this.activeAttributes.imageSource.length-1;return t=Math.min(t+1,e),this.activeAttributes.imageSource[t]},y.prototype.createSurfaceShape=function(){return new p(this.boundaries,null)},y.prototype.doMakeOrderedRenderable=function(t){if(!this.referencePosition)return null;if(!this.activeAttributes.drawInterior&&!this.activeAttributes.drawOutline)return null;if(!this.mustGenerateGeometry(t))return this;var e=this.currentData,n=e.referencePoint;t.surfacePointForMode(this.referencePosition.latitude,this.referencePosition.longitude,this.referencePosition.altitude,this._altitudeMode,n),e.transformationMatrix.setToTranslation(n[0],n[1],n[2]);for(var i=[],o=0;o<this._boundaries.length;o++)i[o]=this._boundaries[o].slice(0),i[o].push(this._boundaries[o][0]);var a=this.computeBoundaryPoints(t,i);if(this.activeAttributes.drawInterior){var s=this.tessellatePolygon(t,a);if(s){e.capTriangles=new Float32Array(s.length);for(var u=0,l=s.length;u<l;u++)e.capTriangles[u]=s[u]}}if(e.boundaryPoints=a,e.drawInterior=this.activeAttributes.drawInterior,this.resetExpiration(e),e.refreshBuffers=!0,e.extent||(e.extent=new r),1===a.length)e.extent.setToPoints(a[0]);else{var c=[];for(o=0;o<a.length;o++)for(var h=0;h<a[o].length;h++)c.push(a[o][h]);e.extent.setToPoints(c)}return e.extent.translate(e.referencePoint),this},y.prototype.computeBoundaryPoints=function(t,e){for(var n,r,i,o,a=Number.MAX_VALUE,s=t.eyePoint,u=[],l=this._extrude?6:3,c=new g(0,0,0),h=0;h<e.length;h++){n=(this._extrude?2:1)*e[h].length,u[h]=new Float32Array(3*n);for(var f=0,p=e[h].length;f<p;f++)r=e[h][f],t.surfacePointForMode(r.latitude,r.longitude,r.altitude,this.altitudeMode,c),(o=c.distanceToSquared(s))<a&&(a=o),c.subtract(this.currentData.referencePoint),i=l*f,u[h][i]=c[0],u[h][i+1]=c[1],u[h][i+2]=c[2],this._extrude&&(t.surfacePointForMode(r.latitude,r.longitude,0,WorldWind.CLAMP_TO_GROUND,c),(o=c.distanceToSquared(s))<a&&(a=o),c.subtract(this.currentData.referencePoint),u[h][i+3]=c[0],u[h][i+4]=c[1],u[h][i+5]=c[2])}return this.currentData.eyeDistance=0,u},y.prototype.tessellatePolygon=function(t,e){var n,r,i=[],a=0,s=this._extrude?6:3,l=this.hasCapTexture();this.polygonTessellator||(this.polygonTessellator=new o.GluTesselator,this.polygonTessellator.gluTessCallback(o.gluEnum.GLU_TESS_VERTEX_DATA,(function(t,e){e[e.length]=t[0],e[e.length]=t[1],e[e.length]=t[2],l&&(e[e.length]=t[3],e[e.length]=t[4])})),this.polygonTessellator.gluTessCallback(o.gluEnum.GLU_TESS_COMBINE,(function(t,e,n){var r=[t[0],t[1],t[2]];if(l)for(var i=3;i<=4;i++){for(var o=0,a=0;a<4;a++)n[a]>0&&(o+=n[a]*e[a][i]);r[i]=o}return r})),this.polygonTessellator.gluTessCallback(o.gluEnum.GLU_TESS_ERROR,(function(t){a=t,u.logMessage(u.LEVEL_WARNING,"Polygon","tessellatePolygon","Tessellation error "+t+".")}))),(r=g.computeBufferNormal(e[0],s))||(r=new g(0,0,0),t.globe.surfaceNormalAtLocation(this.referencePosition.latitude,this.referencePosition.longitude,r)),this.polygonTessellator.gluTessNormal(r[0],r[1],r[2]),this.currentData.capNormal=r,this.polygonTessellator.gluTessBeginPolygon(i);for(var c=0;c<e.length;c++){var h=0;this.polygonTessellator.gluTessBeginContour();for(var f=e[c],p=0;p<f.length;p+=s)n=[f[p],f[p+1],f[p+2]],l&&(h<this.textureCoordinates[c].length?(n[3]=this.textureCoordinates[c][h][0],n[4]=this.textureCoordinates[c][h][1]):(n[3]=this.textureCoordinates[c][0][0],n[4]=this.textureCoordinates[c][1][1]),++h),this.polygonTessellator.gluTessVertex(n,n);this.polygonTessellator.gluTessEndContour()}return this.polygonTessellator.gluTessEndPolygon(),0===a?i:null},y.prototype.mustDrawVerticals=function(t){return this._extrude&&this.activeAttributes.drawOutline&&this.activeAttributes.drawVerticals&&this.altitudeMode!==WorldWind.CLAMP_TO_GROUND},y.prototype.doRenderOrdered=function(t){var e,n=this.currentData;if(t.pickingMode&&(e=t.uniquePickColor()),this.activeAttributes.drawInterior&&n.capTriangles&&n.capTriangles.length>0&&this.drawCap(t,e),this._extrude&&this.activeAttributes.drawInterior&&this.drawSides(t,e),this.activeAttributes.drawOutline&&this.drawOutline(t,e),n.refreshBuffers=!1,t.pickingMode){var r=new c(e,this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);t.resolvePick(r)}},y.prototype.drawCap=function(t,e){var n,r,i,o,a=t.currentGlContext,s=t.currentProgram,u=this.currentData,l=u.refreshBuffers,c=!!this.hasCapTexture(),h=this.activeAttributes.applyLighting,f=u.capTriangles.length/(c?5:3);s.loadTextureEnabled(a,!1),this.applyMvpMatrix(t),u.capVboCacheKey||(u.capVboCacheKey=t.gpuResourceCache.generateCacheKey()),(n=t.gpuResourceCache.resourceForKey(u.capVboCacheKey))||(n=a.createBuffer(),t.gpuResourceCache.putResource(u.capVboCacheKey,n,4*u.capTriangles.length),l=!0),a.bindBuffer(a.ARRAY_BUFFER,n),l&&(o=h?this.makeCapBufferWithNormals():u.capTriangles,a.bufferData(a.ARRAY_BUFFER,o,a.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1)),r=this.activeAttributes.interiorColor,a.depthMask(r.alpha*this.layer.opacity>=1||t.pickingMode),s.loadColor(a,t.pickingMode?e:r),s.loadOpacity(a,t.pickingMode?1:this.layer.opacity),i=12+(c?8:0)+(h?12:0),c&&!t.pickingMode&&(this.activeTexture=t.gpuResourceCache.resourceForKey(this.capImageSource()),this.activeTexture||(this.activeTexture=t.gpuResourceCache.retrieveTexture(t.currentGlContext,this.capImageSource())),this.activeTexture&&this.activeTexture.bind(t)&&(a.enableVertexAttribArray(s.vertexTexCoordLocation),a.vertexAttribPointer(s.vertexTexCoordLocation,2,a.FLOAT,!1,i,12),this.scratchMatrix.setToIdentity(),this.scratchMatrix.multiplyByTextureTransform(this.activeTexture),s.loadTextureEnabled(a,!0),s.loadTextureUnit(a,a.TEXTURE0),s.loadTextureMatrix(a,this.scratchMatrix),s.loadModulateColor(a,t.pickingMode))),h&&!t.pickingMode&&(s.loadApplyLighting(a,!0),a.enableVertexAttribArray(s.normalVectorLocation),a.vertexAttribPointer(s.normalVectorLocation,3,a.FLOAT,!1,i,i-12)),a.vertexAttribPointer(s.vertexPointLocation,3,a.FLOAT,!1,i,0),a.drawArrays(a.TRIANGLES,0,f)},y.prototype.makeCapBufferWithNormals=function(){for(var t=this.currentData,e=t.capNormal,n=this.hasCapTexture()?5:3,r=n+3,i=t.capTriangles.length/n,o=t.capTriangles,a=new Float32Array(i*r),s=0,u=0;u<i;u++){for(var l=0;l<n;l++)a[s++]=o[u*n+l];a[s++]=e[0],a[s++]=e[1],a[s++]=e[2]}return a},y.prototype.drawSides=function(t,e){var n,r,i,o,a=t.currentGlContext,s=t.currentProgram,u=this.currentData,l=u.refreshBuffers,c=this.hasSideTextures(),h=this.activeAttributes.applyLighting,f=3+(c?2:0)+(h?3:0),p=4*f;o=0;for(var d=0;d<u.boundaryPoints.length;d++)o+=u.boundaryPoints[d].length/6-1;if(u.sidesVboCacheKey||(u.sidesVboCacheKey=t.gpuResourceCache.generateCacheKey()),!(n=t.gpuResourceCache.resourceForKey(u.sidesVboCacheKey))||l?(i=this.makeSidesBuffer(o),u.numSideVertices=i.length/f,n||(n=a.createBuffer()),t.gpuResourceCache.putResource(u.sidesVboCacheKey,n,4*i.length),a.bindBuffer(a.ARRAY_BUFFER,n),a.bufferData(a.ARRAY_BUFFER,i,a.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1)):a.bindBuffer(a.ARRAY_BUFFER,n),r=this.activeAttributes.interiorColor,a.depthMask(r.alpha*this.layer.opacity>=1||t.pickingMode),s.loadColor(a,t.pickingMode?e:r),s.loadOpacity(a,t.pickingMode?1:this.layer.opacity),c&&!t.pickingMode){h?(s.loadApplyLighting(a,!0),a.enableVertexAttribArray(s.normalVectorLocation)):s.loadApplyLighting(a,!1);for(var g=0;g<o;g++){var m=this.sideImageSource(g),y=t.gpuResourceCache.resourceForKey(m),v=6*g*p;m&&!y&&(y=t.gpuResourceCache.retrieveTexture(t.currentGlContext,m)),y&&y.bind(t)?(a.enableVertexAttribArray(s.vertexTexCoordLocation),a.vertexAttribPointer(s.vertexTexCoordLocation,2,a.FLOAT,!1,p,v+12),this.scratchMatrix.setToIdentity(),this.scratchMatrix.multiplyByTextureTransform(y),s.loadTextureEnabled(a,!0),s.loadTextureUnit(a,a.TEXTURE0),s.loadTextureMatrix(a,this.scratchMatrix)):(s.loadTextureEnabled(a,!1),a.disableVertexAttribArray(s.vertexTexCoordLocation)),h&&a.vertexAttribPointer(s.normalVectorLocation,3,a.FLOAT,!1,p,v+20),a.vertexAttribPointer(s.vertexPointLocation,3,a.FLOAT,!1,p,v),a.drawArrays(a.TRIANGLES,0,6)}}else s.loadTextureEnabled(a,!1),h&&!t.pickingMode?(s.loadApplyLighting(a,!0),a.enableVertexAttribArray(s.normalVectorLocation),a.vertexAttribPointer(s.normalVectorLocation,3,a.FLOAT,!1,p,p-12)):s.loadApplyLighting(a,!1),a.vertexAttribPointer(s.vertexPointLocation,3,a.FLOAT,!1,p,0),a.drawArrays(a.TRIANGLES,0,u.numSideVertices)},y.prototype.makeSidesBuffer=function(t){var e,n,r,i,o,a,s,u,l,c,h=this.currentData,f=this.hasSideTextures(),p=this.activeAttributes.applyLighting,m=3+(f?2:0)+(p?3:0);e=new Float32Array(2*t*3*m),n=0,r=new g(0,0,0),i=new g(0,0,0),o=new g(0,0,0),a=new g(0,0,0),f?(s=new d(0,1),u=new d(0,0),l=new d(1,1),c=new d(1,0)):s=u=l=c=null;for(var y=0;y<h.boundaryPoints.length;y++)for(var v,E=h.boundaryPoints[y],_=0;_<E.length-6;_+=6)r[0]=E[_],r[1]=E[_+1],r[2]=E[_+2],i[0]=E[_+3],i[1]=E[_+4],i[2]=E[_+5],o[0]=E[_+6],o[1]=E[_+7],o[2]=E[_+8],a[0]=E[_+9],a[1]=E[_+10],a[2]=E[_+11],v=p?g.computeTriangleNormal(r,i,o):null,this.addVertexToBuffer(r,s,v,e,n),n+=m,this.addVertexToBuffer(i,u,v,e,n),n+=m,this.addVertexToBuffer(o,l,v,e,n),n+=m,this.addVertexToBuffer(i,u,v,e,n),n+=m,this.addVertexToBuffer(a,c,v,e,n),n+=m,this.addVertexToBuffer(o,l,v,e,n),n+=m;return e},y.prototype.addVertexToBuffer=function(t,e,n,r,i){r[i++]=t[0],r[i++]=t[1],r[i++]=t[2],e&&(r[i++]=e[0],r[i++]=e[1]),n&&(r[i++]=n[0],r[i++]=n[1],r[i]=n[2])},y.prototype.drawOutline=function(t,e){var n,r,i,o,a,s=t.currentGlContext,u=t.currentProgram,l=this.currentData,c=l.refreshBuffers;u.loadTextureEnabled(s,!1),u.loadApplyLighting(s,!1),this.hasCapTexture()&&s.disableVertexAttribArray(u.vertexTexCoordLocation),this.activeAttributes.applyLighting&&s.disableVertexAttribArray(u.normalVectorLocation),l.boundaryVboCacheKeys||(this.currentData.boundaryVboCacheKeys=[]),this.applyMvpMatrixForOutline(t),u.loadTextureEnabled(s,!1),s.disableVertexAttribArray(u.vertexTexCoordLocation);for(var h=0;h<l.boundaryPoints.length;h++)n=l.boundaryPoints[h].length/3,l.boundaryVboCacheKeys[h]||(l.boundaryVboCacheKeys[h]=t.gpuResourceCache.generateCacheKey()),(r=t.gpuResourceCache.resourceForKey(l.boundaryVboCacheKeys[h]))||(r=s.createBuffer(),t.gpuResourceCache.putResource(l.boundaryVboCacheKeys[h],r,12*n),c=!0),s.bindBuffer(s.ARRAY_BUFFER,r),c&&(s.bufferData(s.ARRAY_BUFFER,l.boundaryPoints[h],s.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1)),i=this.activeAttributes.outlineColor,s.depthMask(i.alpha*this.layer.opacity>=1||t.pickingMode),u.loadColor(s,t.pickingMode?e:i),u.loadOpacity(s,t.pickingMode?1:this.layer.opacity),s.lineWidth(this.activeAttributes.outlineWidth),this._extrude?(o=24,a=n/2):(o=12,a=n),s.vertexAttribPointer(u.vertexPointLocation,3,s.FLOAT,!1,o,0),s.drawArrays(s.LINE_STRIP,0,a),this.mustDrawVerticals(t)&&(s.vertexAttribPointer(u.vertexPointLocation,3,s.FLOAT,!1,0,0),s.drawArrays(s.LINES,0,n-2))},y.prototype.beginDrawing=function(t){var e=t.currentGlContext;this.activeAttributes.drawInterior&&e.disable(e.CULL_FACE),t.findAndBindProgram(n),e.enableVertexAttribArray(t.currentProgram.vertexPointLocation),!t.pickMode&&this.activeAttributes.applyLighting&&t.currentProgram.loadModelviewInverse(e,t.modelviewNormalTransform)},y.prototype.endDrawing=function(t){var e=t.currentGlContext;e.disableVertexAttribArray(t.currentProgram.vertexPointLocation),e.disableVertexAttribArray(t.currentProgram.normalVectorLocation),e.depthMask(!0),e.lineWidth(1),e.enable(e.CULL_FACE)},y})),i("shapes/SurfacePolyline",["../error/ArgumentError","../util/Logger","../shapes/ShapeAttributes","../shapes/SurfaceShape"],(function(t,e,n,r){"use strict";var i=function n(i,o){if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfacePolyline","constructor","The specified locations array is null or undefined."));r.call(this,o),this._boundaries=i,this._stateId=n.stateId++,this._isInteriorInhibited=!0};return i.prototype=Object.create(r.prototype),Object.defineProperties(i.prototype,{boundaries:{get:function(){return this._boundaries},set:function(n){if(!Array.isArray(n))throw new t(e.logMessage(e.LEVEL_SEVERE,"SurfacePolyline","set boundaries","The specified value is not an array."));this.resetBoundaries(),this._boundaries=n,this._stateId=i.stateId++,this.stateKeyInvalid=!0}}}),i.stateId=Number.MIN_SAFE_INTEGER,i.staticStateKey=function(t){return r.staticStateKey(t)+" pl "+t._stateId},i.prototype.computeStateKey=function(){return i.staticStateKey(this)},i.prototype.computeBoundaries=function(t){},i.prototype.getReferencePosition=function(){return this.boundaries.length>1?this.boundaries[0]:null},i.prototype.moveTo=function(t,e){this.boundaries=this.computeShiftedLocations(t,this.getReferencePosition(),e,this._boundaries)},i})),i("formats/geojson/GeoJSONParser",["../../error/ArgumentError","../../util/Color","./GeoJSONConstants","./GeoJSONCRS","./GeoJSONFeature","./GeoJSONFeatureCollection","./GeoJSONGeometry","./GeoJSONGeometryCollection","./GeoJSONGeometryLineString","./GeoJSONGeometryMultiLineString","./GeoJSONGeometryMultiPoint","./GeoJSONGeometryMultiPolygon","./GeoJSONGeometryPoint","./GeoJSONGeometryPolygon","../../geom/Location","../../util/Logger","../../shapes/Placemark","../../shapes/PlacemarkAttributes","../../shapes/Polygon","../../geom/Position","../../util/proj4-src","../../layer/RenderableLayer","../../shapes/ShapeAttributes","../../shapes/SurfacePolygon","../../shapes/SurfacePolyline"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_,b,S,w,x){"use strict";var T=function(e){if(!e)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","constructor","missingDataSource"));this._dataSource=e,this._geoJSONObject=null,this._geoJSONType=null,this._crs=null,this._layer=null,this._parserCompletionCallback=null,this._shapeConfigurationCallback=this.defaultShapeConfigurationCallback,this.defaultPlacemarkAttributes=new y(null),this.defaultShapeAttributes=new S(null),this.setProj4jsAliases()};return Object.defineProperties(T.prototype,{dataSource:{get:function(){return this._dataSource}},geoJSONObject:{get:function(){return this._geoJSONObject}},geoJSONType:{get:function(){return this._geoJSONType}},crs:{get:function(){return this._crs}},layer:{get:function(){return this._layer}},parserCompletionCallback:{get:function(){return this._parserCompletionCallback}},shapeConfigurationCallback:{get:function(){return this._shapeConfigurationCallback}}}),T.prototype.load=function(t,e,n){t&&(this._parserCompletionCallback=t),e&&(this._shapeConfigurationCallback=e),this._layer=n||new b;var r=typeof this.dataSource;if("string"===r){var i=T.tryParseJSONString(this.dataSource);null!==i?this.handle(i):this.requestUrl(this.dataSource)}else"object"===r?this.handle(this.dataSource):g.logMessage(g.LEVEL_SEVERE,"GeoJSON","load","Unsupported data source type: "+r)},T.prototype.defaultShapeConfigurationCallback=function(t,e){var n={},r=e.name||e.Name||e.NAME;return r&&(n.name=r),t.isPointType()||t.isMultiPointType()?n.attributes=this.defaultPlacemarkAttributes:(t.isLineStringType()||t.isMultiLineStringType()||t.isPolygonType()||t.isMultiPolygonType())&&(n.attributes=this.defaultShapeAttributes),n},T.prototype.requestUrl=function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="text",e.onreadystatechange=function(){4===e.readyState&&(200===e.status?this.handle(T.tryParseJSONString(e.response)):g.log(g.LEVEL_WARNING,"GeoJSON retrieval failed ("+e.statusText+"): "+t))}.bind(this),e.onerror=function(){g.log(g.LEVEL_WARNING,"GeoJSON retrieval failed: "+t)},e.ontimeout=function(){g.log(g.LEVEL_WARNING,"GeoJSON retrieval timed out: "+t)},e.send(null)},T.prototype.handle=function(e){if(e||g.logMessage(g.LEVEL_SEVERE,"GeoJSON","handle","Invalid GeoJSON object"),this._geoJSONObject=e,"[object Array]"===Object.prototype.toString.call(this.geoJSONObject))throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","handle","invalidGeoJSONObjectLength"));if(!this.geoJSONObject.hasOwnProperty(n.FIELD_TYPE))throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","handle","missingGeoJSONType"));this.setGeoJSONType(),this.setGeoJSONCRS(),this._parserCompletionCallback&&"function"==typeof this._parserCompletionCallback&&this._parserCompletionCallback(this.layer)},T.prototype.setGeoJSONCRS=function(){if(this.geoJSONObject[n.FIELD_CRS]){this._crs=new r(this.geoJSONObject[n.FIELD_CRS][n.FIELD_TYPE],this.geoJSONObject[n.FIELD_CRS][n.FIELD_PROPERTIES]);var t=function(){this.addRenderablesForGeoJSON(this.layer)}.bind(this);this.crs.setCRSString(t)}else this.addRenderablesForGeoJSON(this.layer)},T.prototype.addRenderablesForGeoJSON=function(e){if(!e)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForGeoJSON","missingLayer"));switch(this.geoJSONType){case n.TYPE_FEATURE:var r=new i(this.geoJSONObject[n.FIELD_GEOMETRY],this.geoJSONObject[n.FIELD_PROPERTIES],this.geoJSONObject[n.FIELD_ID],this.geoJSONObject[n.FIELD_BBOX]);this.addRenderablesForFeature(e,r);break;case n.TYPE_FEATURE_COLLECTION:var a=new o(this.geoJSONObject[n.FIELD_FEATURES],this.geoJSONObject[n.FIELD_PROPERTIES],this.geoJSONObject[n.FIELD_BBOX]);this.addRenderablesForFeatureCollection(e,a);break;case n.TYPE_GEOMETRY_COLLECTION:var u=new s(this.geoJSONObject[n.FIELD_GEOMETRIES],this.geoJSONObject[n.FIELD_BBOX]);this.addRenderablesForGeometryCollection(e,u,null);break;default:this.addRenderablesForGeometry(e,this.geoJSONObject,null)}},T.prototype.addRenderablesForGeometry=function(e,r,i){if(!e)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForGeometry","missingLayer"));if(!r)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForGeometry","missingGeometry"));switch(r[n.FIELD_TYPE]){case n.TYPE_POINT:var o=new f(r[n.FIELD_COORDINATES],r[n.FIELD_TYPE],r[n.FIELD_BBOX]);this.addRenderablesForPoint(e,o,i||null);break;case n.TYPE_MULTI_POINT:var a=new c(r[n.FIELD_COORDINATES],r[n.FIELD_TYPE],r[n.FIELD_BBOX]);this.addRenderablesForMultiPoint(e,a,i||null);break;case n.TYPE_LINE_STRING:var s=new u(r[n.FIELD_COORDINATES],r[n.FIELD_TYPE],r[n.FIELD_BBOX]);this.addRenderablesForLineString(e,s,i||null);break;case n.TYPE_MULTI_LINE_STRING:var d=new l(r[n.FIELD_COORDINATES],r[n.FIELD_TYPE],r[n.FIELD_BBOX]);this.addRenderablesForMultiLineString(e,d,i||null);break;case n.TYPE_POLYGON:var m=new p(r[n.FIELD_COORDINATES],r[n.FIELD_TYPE],r[n.FIELD_BBOX]);this.addRenderablesForPolygon(e,m,i||null);break;case n.TYPE_MULTI_POLYGON:var y=new h(r[n.FIELD_COORDINATES],r[n.FIELD_TYPE],r[n.FIELD_BBOX]);this.addRenderablesForMultiPolygon(e,y,i||null)}},T.prototype.addRenderablesForPoint=function(e,n,r){if(!e)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForPoint","missingLayer"));if(!n)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForPoint","missingGeometry"));var i=this.shapeConfigurationCallback(n,r);if(!this.crs||this.crs.isCRSSupported()){var o=n.coordinates[0],a=n.coordinates[1],s=n.coordinates[2]?n.coordinates[2]:0,u=this.getReprojectedIfRequired(a,o,this.crs),l=new E(u[1],u[0],s),c=new m(l,!1,i&&i.attributes?i.attributes:null);c.altitudeMode=WorldWind.RELATIVE_TO_GROUND,i&&i.name&&(c.label=i.name),i.highlightAttributes&&(c.highlightAttributes=i.highlightAttributes),i&&i.pickDelegate&&(c.pickDelegate=i.pickDelegate),i&&i.userProperties&&(c.userProperties=i.userProperties),i&&i.timeRange&&(c.timeRange=i.timeRange),e.addRenderable(c)}},T.prototype.addRenderablesForMultiPoint=function(e,n,r){if(!e)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForMultiPoint","missingLayer"));if(!n)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForMultiPoint","missingGeometry"));var i=this.shapeConfigurationCallback(n,r);if(!this.crs||this.crs.isCRSSupported())for(var o=0,a=n.coordinates.length;o<a;o+=1){var s=n.coordinates[o][0],u=n.coordinates[o][1],l=n.coordinates[o][2]?n.coordinates[o][2]:0,c=this.getReprojectedIfRequired(u,s,this.crs),h=new E(c[1],c[0],l),f=new m(h,!1,i&&i.attributes?i.attributes:null);f.altitudeMode=WorldWind.RELATIVE_TO_GROUND,i&&i.name&&(f.label=i.name),i.highlightAttributes&&(f.highlightAttributes=i.highlightAttributes),i&&i.pickDelegate&&(f.pickDelegate=i.pickDelegate),i&&i.userProperties&&(f.userProperties=i.userProperties),i&&i.timeRange&&(f.timeRange=i.timeRange),e.addRenderable(f)}},T.prototype.addRenderablesForLineString=function(e,n,r){if(!e)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForLineString","missingLayer"));if(!n)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForLineString","missingGeometry"));var i=this.shapeConfigurationCallback(n,r);if(!this.crs||this.crs.isCRSSupported()){for(var o=[],a=0,s=n.coordinates;a<s.length;a++){var u=s[a][0],l=s[a][1],c=this.getReprojectedIfRequired(l,u,this.crs),h=new d(c[1],c[0]);o.push(h)}var f;f=new x(o,i&&i.attributes?i.attributes:null),i.highlightAttributes&&(f.highlightAttributes=i.highlightAttributes),i&&i.name&&(f.displayName=i.name),i&&i.pickDelegate&&(f.pickDelegate=i.pickDelegate),i&&i.userProperties&&(f.userProperties=i.userProperties),i&&i.timeRange&&(f.timeRange=i.timeRange),e.addRenderable(f)}},T.prototype.addRenderablesForMultiLineString=function(e,n,r){if(!e)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForMultiLineString","missingLayer"));if(!n)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForMultiLineString","missingGeometry"));var i=this.shapeConfigurationCallback(n,r);if(!this.crs||this.crs.isCRSSupported())for(var o=0,a=n.coordinates;o<a.length;o++){for(var s=[],u=0,l=a[o];u<l.length;u++){var c=l[u][0],h=l[u][1],f=this.getReprojectedIfRequired(h,c,this.crs),p=new d(f[1],f[0]);s.push(p)}var m;m=new x(s,i&&i.attributes?i.attributes:null),i.highlightAttributes&&(m.highlightAttributes=i.highlightAttributes),i&&i.name&&(m.displayName=i.name),i&&i.pickDelegate&&(m.pickDelegate=i.pickDelegate),i&&i.userProperties&&(m.userProperties=i.userProperties),i&&i.timeRange&&(m.timeRange=i.timeRange),e.addRenderable(m)}},T.prototype.addRenderablesForPolygon=function(e,n,r){if(!e)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForPolygon","missingLayer"));if(!n)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForPolygon","missingGeometry"));var i=this.shapeConfigurationCallback(n,r);if(!this.crs||this.crs.isCRSSupported()){for(var o=[],a=0,s=n.coordinates;a<s.length;a++){for(var u=[],l=0,c=s[a];l<c.length;l++){var h=c[l][0],f=c[l][1],p=this.getReprojectedIfRequired(f,h,this.crs),m=new d(p[1],p[0]);u.push(m)}o.push(u)}var y;y=new w(o,i&&i.attributes?i.attributes:null),i.highlightAttributes&&(y.highlightAttributes=i.highlightAttributes),i&&i.name&&(y.displayName=i.name),i&&i.pickDelegate&&(y.pickDelegate=i.pickDelegate),i&&i.userProperties&&(y.userProperties=i.userProperties),i&&i.timeRange&&(y.timeRange=i.timeRange),e.addRenderable(y)}},T.prototype.addRenderablesForMultiPolygon=function(e,n,r){if(!e)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForMultiPolygon","missingLayer"));if(!n)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForMultiPolygon","missingGeometry"));var i=this.shapeConfigurationCallback(n,r);if(!this.crs||this.crs.isCRSSupported())for(var o=0,a=n.coordinates;o<a.length;o++){for(var s=[],u=0;u<a[o].length;u++){for(var l=[],c=0,h=a[o][u];c<h.length;c++){var f=h[c][0],p=h[c][1],m=this.getReprojectedIfRequired(p,f,this.crs),y=new d(m[1],m[0]);l.push(y)}s.push(l)}var v;v=new w(s,i&&i.attributes?i.attributes:null),i.highlightAttributes&&(v.highlightAttributes=i.highlightAttributes),i&&i.name&&(v.displayName=i.name),i&&i.pickDelegate&&(v.pickDelegate=i.pickDelegate),i&&i.userProperties&&(v.userProperties=i.userProperties),i&&i.timeRange&&(v.timeRange=i.timeRange),e.addRenderable(v)}},T.prototype.addRenderablesForGeometryCollection=function(e,r,i){if(!e)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForGeometryCollection","missingLayer"));if(!r)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForGeometryCollection","missingGeometryCollection"));for(var o=0,a=r.geometries;o<a.length;o++)a[o].hasOwnProperty(n.FIELD_TYPE)&&this.addRenderablesForGeometry(e,a[o],i)},T.prototype.addRenderablesForFeature=function(e,r){if(!e)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForFeature","missingLayer"));if(!r)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForFeature","missingFeature"));if(r.geometry.type===n.TYPE_GEOMETRY_COLLECTION){var i=new s(r.geometry.geometries,r.bbox);this.addRenderablesForGeometryCollection(e,i,r.properties)}else this.addRenderablesForGeometry(e,r.geometry,r.properties)},T.prototype.addRenderablesForFeatureCollection=function(e,r){if(!e)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForFeatureCollection","missingLayer"));if(!r)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","addRenderablesForFeatureCollection","missingFeatureCollection"));if(r.features.length>0)for(var o=0;o<r.features.length;o++){var a=new i(r.features[o][n.FIELD_GEOMETRY],r.features[o][n.FIELD_PROPERTIES],r.features[o][n.FIELD_ID],r.features[o][n.FIELD_BBOX]);this.addRenderablesForFeature(e,a)}},T.prototype.setGeoJSONType=function(){switch(this.geoJSONObject[n.FIELD_TYPE]){case n.TYPE_POINT:this._geoJSONType=n.TYPE_POINT;break;case n.TYPE_MULTI_POINT:this._geoJSONType=n.TYPE_MULTI_POINT;break;case n.TYPE_LINE_STRING:this._geoJSONType=n.TYPE_LINE_STRING;break;case n.TYPE_MULTI_LINE_STRING:this._geoJSONType=n.TYPE_MULTI_LINE_STRING;break;case n.TYPE_POLYGON:this._geoJSONType=n.TYPE_POLYGON;break;case n.TYPE_MULTI_POLYGON:this._geoJSONType=n.TYPE_MULTI_POLYGON;break;case n.TYPE_GEOMETRY_COLLECTION:this._geoJSONType=n.TYPE_GEOMETRY_COLLECTION;break;case n.TYPE_FEATURE:this._geoJSONType=n.TYPE_FEATURE;break;case n.TYPE_FEATURE_COLLECTION:this._geoJSONType=n.TYPE_FEATURE_COLLECTION;break;default:throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","setGeoJSONType","invalidGeoJSONType"))}},T.prototype.getReprojectedIfRequired=function(e,r,i){if(!e&&0!==e)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","getReprojectedIfRequired","missingLatitude"));if(!r&&0!==r)throw new t(g.logMessage(g.LEVEL_SEVERE,"GeoJSON","getReprojectedIfRequired","missingLongitude"));return!i||i.isDefault()?[r,e]:_(i.projectionString,n.EPSG4326_CRS,[r,e])},T.prototype.setProj4jsAliases=function(){_.defs([["urn:ogc:def:crs:EPSG::4326",_.defs("EPSG:4326")],["urn:ogc:def:crs:OGC:1.3:CRS84",_.defs("EPSG:4326")],["urn:ogc:def:crs:EPSG::3857",_.defs("EPSG:3857")]])},T.tryParseJSONString=function(t){try{return JSON.parse(t)}catch(t){return null}},T})),i("projections/ProjectionEquirectangular",["../geom/Angle","../error/ArgumentError","../projections/GeographicProjection","../util/Logger","../geom/Vec3"],(function(t,e,n,r,i){"use strict";var o=function(){n.call(this,"Equirectangular",!0,null)};return o.prototype=Object.create(n.prototype),Object.defineProperties(o.prototype,{stateKey:{get:function(){return"projection equirectangular "}}}),o.prototype.geographicToCartesian=function(n,i,o,a,s,u){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesian","missingGlobe"));if(!u)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesian","missingResult"));return u[0]=n.equatorialRadius*o*t.DEGREES_TO_RADIANS+(s?s[0]:0),u[1]=n.equatorialRadius*i*t.DEGREES_TO_RADIANS,u[2]=a,u},o.prototype.geographicToCartesianGrid=function(n,o,a,s,u,l,c,h){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesianGrid","missingGlobe"));if(!o)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesianGrid","missingSector"));if(!u||u.length<a*s)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesianGrid","The specified elevations array is null, undefined or insufficient length"));if(!h)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","geographicToCartesianGrid","missingResult"));var f,p,d,g,m,y=n.equatorialRadius,v=o.minLatitude*t.DEGREES_TO_RADIANS,E=o.maxLatitude*t.DEGREES_TO_RADIANS,_=o.minLongitude*t.DEGREES_TO_RADIANS,b=o.maxLongitude*t.DEGREES_TO_RADIANS,S=(E-v)/(a>1?a-1:1),w=(b-_)/(s>1?s-1:1),x=l||new i(0,0,0),T=c?c[0]:0,L=0,C=0;for(f=0,d=v;f<a;f++,d+=S)for(f===a-1&&(d=E),m=y*d-x[1],p=0,g=_;p<s;p++,g+=w)p===s-1&&(g=b),h[C++]=y*g-x[0]+T,h[C++]=m,h[C++]=u[L++]-x[2];return h},o.prototype.cartesianToGeographic=function(n,i,o,a,s,u){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","cartesianToGeographic","missingGlobe"));if(!u)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionEquirectangular","cartesianToGeographic","missingResult"));return u.latitude=o/n.equatorialRadius*t.RADIANS_TO_DEGREES,u.longitude=(i-(s?s[0]:0))/n.equatorialRadius*t.RADIANS_TO_DEGREES,u.altitude=a,u},o})),i("globe/Globe2D",["../globe/ElevationModel","../globe/Globe","../projections/ProjectionEquirectangular"],(function(t,e,n){"use strict";var r=function(){e.call(this,new t,new n)};return r.prototype=Object.create(e.prototype),r})),i("util/GoToAnimator",["../geom/Location","../util/Logger","../geom/Position","../geom/Vec3"],(function(t,e,n,r){"use strict";var i=function(t){if(!t)throw new ArgumentError(e.logMessage(e.LEVEL_SEVERE,"GoToAnimator","constructor","missingWorldWindow"));this.wwd=t,this.animationFrequency=20,this.travelTime=3e3,this.cancelled=!1};return i.prototype.cancel=function(){this.cancelled=!0},i.prototype.goTo=function(i,o){if(!i)throw new ArgumentError(e.logMessage(e.LEVEL_SEVERE,"GoToAnimator","goTo","missingPosition"));this.completionCallback=o,this.cancelled=!1,this.wwd.navigator.lookAtLocation.altitude=i.altitude||0,this.targetPosition=new n(i.latitude,i.longitude,this.wwd.navigator.range),this.startPosition=new n(this.wwd.navigator.lookAtLocation.latitude,this.wwd.navigator.lookAtLocation.longitude,this.wwd.navigator.range),this.startTime=Date.now();var a,s=this.travelTime,u=t.greatCircleDistance(this.startPosition,this.targetPosition),l=this.wwd.globe.computePointFromLocation(this.startPosition.latitude,this.startPosition.longitude,new r(0,0,0)),c=this.wwd.globe.computePointFromLocation(this.targetPosition.latitude,this.targetPosition.longitude,new r(0,0,0));this.maxAltitude=l.distanceTo(c);var h=this.wwd.pixelSizeAtDistance(this.startPosition.altitude)*this.wwd.canvas.clientWidth/this.wwd.globe.equatorialRadius;u<=2*h&&(this.maxAltitude=this.startPosition.altitude),this.maxAltitudeReachedTime=this.maxAltitude<=this.wwd.navigator.range?Date.now():null,this.maxAltitude>this.startPosition.altitude?(a=Math.max(0,this.maxAltitude-this.startPosition.altitude),a+=Math.abs(this.targetPosition.altitude-this.maxAltitude)):a=Math.abs(this.targetPosition.altitude-this.startPosition.altitude);var f=Math.max(u,a/this.wwd.globe.equatorialRadius);if(0!==f){f<2*h&&(s=Math.min(f/h*this.travelTime,this.travelTime)),s=Math.max(1,s),this.panVelocity=u/s,this.rangeVelocity=a/s;var p=this;setTimeout((function t(){return p.cancelled?void(p.completionCallback&&p.completionCallback(p)):void(p.update()?setTimeout(t,p.animationFrequency):p.completionCallback&&p.completionCallback(p))}),this.animationFrequency)}},i.prototype.update=function(){var t=new n(this.wwd.navigator.lookAtLocation.latitude,this.wwd.navigator.lookAtLocation.longitude,this.wwd.navigator.range),e=this.updateRange(t);return e=this.updateLocation(t)||e,this.wwd.redraw(),e},i.prototype.updateRange=function(t){var e,n,r=!1;return this.maxAltitudeReachedTime?(n=Date.now()-this.maxAltitudeReachedTime,this.maxAltitude>this.targetPosition.altitude?(e=this.maxAltitude-this.rangeVelocity*n,e=Math.max(e,this.targetPosition.altitude)):(e=this.maxAltitude+this.rangeVelocity*n,e=Math.min(e,this.targetPosition.altitude)),this.wwd.navigator.range=e,r=Math.abs(this.wwd.navigator.range-this.targetPosition.altitude)>1):(n=Date.now()-this.startTime,e=Math.min(this.startPosition.altitude+this.rangeVelocity*n,this.maxAltitude),Math.abs(this.wwd.navigator.range-e)<1&&(this.maxAltitudeReachedTime=Date.now()),this.wwd.navigator.range=e,r=!0),r},i.prototype.updateLocation=function(e){var n=Date.now()-this.startTime,r=t.greatCircleDistance(this.startPosition,e),i=t.greatCircleDistance(e,this.targetPosition),o=t.greatCircleAzimuth(e,this.targetPosition),a=this.panVelocity*n,s=Math.min(a-r,i),u=t.greatCircleLocation(e,o,s,new t(0,0)),l=!1;return this.wwd.navigator.lookAtLocation.latitude=u.latitude,this.wwd.navigator.lookAtLocation.longitude=u.longitude,s<1/this.wwd.globe.equatorialRadius&&(l=!0),!l},i})),i("shaders/GridParticleProgram",["../error/ArgumentError","./GpuProgram","../util/Logger"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t,"attribute vec2 vertexPosition;\nuniform mediump int drawMode;\nuniform sampler2D simParticleSampler;\nuniform float simTextureDimension;\nuniform vec4 bbox;\nvarying vec2 texureCoord;\nconst int MODE_TEX_COPY_FADE = 0;\nconst int MODE_DRAW_PARTICLES = 1;\nconst vec2 bitEnc = vec2(1.0, 255.0);\nconst vec2 bitDec = 1.0 / bitEnc;\nvec2 decodePositionFromRGBA(const vec4 color) {\n   vec4 roundedColor = floor(color * 255.0 + 0.5) / 255.0;\n   float x = dot(roundedColor.rg, bitDec);\n   float y = dot(roundedColor.ba, bitDec);\n   return vec2(x, y);\n}\nvoid main() {\n   if (drawMode == MODE_TEX_COPY_FADE) {\n       texureCoord = vertexPosition;\n       gl_Position = vec4(1.0 - 2.0 * vertexPosition, 0, 1);\n   }\n   else {\n       float row = vertexPosition.x / simTextureDimension;\n       vec2 uv = vec2(fract(row), floor(row) / simTextureDimension);\n       vec4 color = texture2D(simParticleSampler, uv);\n       vec2 pos = decodePositionFromRGBA(color);\n       texureCoord = bbox.xy + pos * (bbox.zw - bbox.xy);       gl_Position = vec4((2.0 * pos.x - 1.0), (2.0 * pos.y - 1.0), 0.0, 1.0);\n       gl_PointSize = 1.0;\n   }\n}","precision mediump float;\nuniform sampler2D tileOrColorsSampler;\nuniform mediump int drawMode;\nuniform float fadeOpacity;\nuniform sampler2D gridSampler;\nuniform vec4 gridMinMax;\nvarying vec2 texureCoord;\nconst int MODE_TEX_COPY_FADE = 0;\nconst int MODE_DRAW_PARTICLES = 1;\nvoid main() {\n   if (drawMode == MODE_TEX_COPY_FADE) {\n       vec4 color = texture2D(tileOrColorsSampler, 1.0 - texureCoord);\n       gl_FragColor = vec4(floor(255.0 * color * fadeOpacity) / 255.0);\n   }\n   else {\n       vec2 gridVector = mix(gridMinMax.xy, gridMinMax.zw, texture2D(gridSampler, texureCoord).rg);\n       float normalizedDistance = length(gridVector) / length(gridMinMax.zw);\n       vec2 textCoord = vec2(fract(16.0 * normalizedDistance), floor(16.0 * normalizedDistance) / 16.0);\n       gl_FragColor = texture2D(tileOrColorsSampler, textCoord);\n   }\n}",["vertexPosition"]),this.vertexPositionLocation=this.attributeLocation(t,"vertexPosition"),this.simParticleSamplerLocation=this.uniformLocation(t,"simParticleSampler"),this.simTextureDimensionLocation=this.uniformLocation(t,"simTextureDimension"),this.drawModeLocation=this.uniformLocation(t,"drawMode"),this.tileOrColorsSamplerLocation=this.uniformLocation(t,"tileOrColorsSampler"),this.fadeOpacityLocation=this.uniformLocation(t,"fadeOpacity"),this.gridSamplerLocation=this.uniformLocation(t,"gridSampler"),this.gridMinMaxLocation=this.uniformLocation(t,"gridMinMax"),this.bboxLocation=this.uniformLocation(t,"bbox"),this.MODE_TEX_COPY_FADE=0,this.MODE_DRAW_PARTICLES=1};return r.key="WorldWindGpuGridParticleProgram",(r.prototype=Object.create(e.prototype)).loadSimParticleSamper=function(t,e){t.uniform1i(this.simParticleSamplerLocation,e-t.TEXTURE0)},r.prototype.loadSimTextureDimension=function(e,r){if(null==r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleProgram","loadSimTextureDimension","missing dimension"));e.uniform1f(this.simTextureDimensionLocation,r)},r.prototype.loadDrawMode=function(t,e){t.uniform1i(this.drawModeLocation,e)},r.prototype.loadTileOrColorsSampler=function(t,e){t.uniform1i(this.tileOrColorsSamplerLocation,e-t.TEXTURE0)},r.prototype.loadFadeOpacity=function(e,r){if(null==r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleProgram","loadFadeOpacity","missing fadeOpacity"));e.uniform1f(this.fadeOpacityLocation,r)},r.prototype.loadGridSampler=function(t,e){t.uniform1i(this.gridSamplerLocation,e-t.TEXTURE0)},r.prototype.loadGridMinMax=function(e,r,i,o,a){if(null==r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleProgram","loadGridMinMax","missing uMin"));if(null==i)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleProgram","loadGridMinMax","missing vMin"));if(null==o)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleProgram","loadGridMinMax","missing uMax"));if(null==a)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleProgram","loadGridMinMax","missing vMax"));e.uniform4f(this.gridMinMaxLocation,r,i,o,a)},r.prototype.loadBbox=function(e,r){if(null==r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleProgram","loadBbox","missing bbox"));e.uniform4fv(this.bboxLocation,r)},r})),i("shaders/GridParticleSimProgram",["../error/ArgumentError","./GpuProgram","../util/Logger"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t,"attribute vec2 vertexPosition;\nvarying vec2 texureCoord;\nvoid main() {\n    texureCoord = vertexPosition;\n    gl_Position = vec4(1.0 - 2.0 * vertexPosition, 0, 1);\n}","#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform sampler2D particleSampler;\nuniform sampler2D gridSampler;\nuniform vec2 gridDimensions;\nuniform vec4 gridMinMax;\nuniform float randSeed;\nuniform float speedFactor;\nuniform float dropRate;\nuniform float dropRateMultiplier;\nuniform vec4 bbox;\nvarying vec2 texureCoord;\nconst vec2 bitEnc = vec2(1.0, 255.0);\nconst vec2 bitDec = 1.0 / bitEnc;\nconst vec3 rand_constants = vec3(12.9898, 78.233, 4375.85453);\nfloat rand(const vec2 co) {\n   float t = dot(rand_constants.xy, co);\n   return fract(sin(t) * (rand_constants.z + t));\n}\nvec2 lookupGridVector(const vec2 uv) {\n   vec2 px = 1.0 / gridDimensions;\n   vec2 vc = (floor(uv * gridDimensions)) * px;\n   vec2 f = fract(uv * gridDimensions);\n   vec2 tl = texture2D(gridSampler, vc).rg;\n   vec2 tr = texture2D(gridSampler, vc + vec2(px.x, 0)).rg;\n   vec2 bl = texture2D(gridSampler, vc + vec2(0, px.y)).rg;\n   vec2 br = texture2D(gridSampler, vc + px).rg;\n   return mix(mix(tl, tr, f.x), mix(bl, br, f.x), f.y);\n}\nvec2 decodePositionFromRGBA(const vec4 color) {\n   vec4 rounded_color = floor(color * 255.0 + 0.5) / 255.0;\n   float x = dot(rounded_color.rg, bitDec);\n   float y = dot(rounded_color.ba, bitDec);\n   return vec2(x, y);\n}\nvec4 encodePositionToRGBA(const vec2 pos) {\n   vec2 rg = bitEnc * pos.x;\n   rg = fract(rg);\n   rg -= rg.yy * vec2(1.0 / 255.0, 0.0);\n   vec2 ba = bitEnc * pos.y;\n   ba = fract(ba);\n   ba -= ba.yy * vec2(1.0 / 255.0, 0.0);\n   return vec4(rg, ba);\n}\nvoid main() {\n   vec4 color = texture2D(particleSampler, texureCoord);\n   vec2 pos = decodePositionFromRGBA(color);\n   vec2 global_pos = bbox.xy + pos * (bbox.zw - bbox.xy);\n   vec2 normalizedGridVector = lookupGridVector(global_pos);\n   vec2 gridVector = mix(gridMinMax.xy, gridMinMax.zw, normalizedGridVector);\n   float normalizedDistance = length(gridVector) / length(gridMinMax.zw);\n   float distortion = max(cos(radians(global_pos.y * 180.0 - 90.0)), 0.00001);\n   float speedReduction = 0.0001;\n   vec2 offset = vec2(gridVector.x / distortion, -gridVector.y) * speedReduction * speedFactor;\n   pos = fract(1.0 + pos + offset);\n   float dropRating = dropRate + normalizedDistance * dropRateMultiplier;\n   vec2 seed = (pos + texureCoord) * randSeed;\n   float retain = step(dropRating, rand(seed));\n   vec2 randomPos = vec2(rand(seed + 1.3), 1.0 - rand(seed + 2.1));\n   pos = mix(pos, randomPos, 1.0 - retain);\n    gl_FragColor = encodePositionToRGBA(pos);\n}",["vertexPosition"]),this.vertexPointLocation=this.attributeLocation(t,"vertexPosition"),this.particleSamplerLocation=this.uniformLocation(t,"particleSampler"),this.gridSamplerLocation=this.uniformLocation(t,"gridSampler"),this.gridDimensionsLocation=this.uniformLocation(t,"gridDimensions"),this.gridMinMaxLocation=this.uniformLocation(t,"gridMinMax"),this.randSeedLocation=this.uniformLocation(t,"randSeed"),this.speedFactorLocation=this.uniformLocation(t,"speedFactor"),this.dropRateLocation=this.uniformLocation(t,"dropRate"),this.dropRateMultiplierLocation=this.uniformLocation(t,"dropRateMultiplier"),this.bboxLocation=this.uniformLocation(t,"bbox")};return r.key="WorldWindGpuGridParticleSimProgram",(r.prototype=Object.create(e.prototype)).loadGridDimensions=function(e,r,i){if(null==r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleSimProgram","loadGridDimensions","missing width"));if(null==i)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleSimProgram","loadGridDimensions","missing height"));e.uniform2f(this.gridDimensionsLocation,r,i)},r.prototype.loadGridMinMax=function(e,r,i,o,a){if(null==r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleSimProgram","loadGridMinMax","missing uMin"));if(null==i)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleSimProgram","loadGridMinMax","missing vMin"));if(null==o)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleSimProgram","loadGridMinMax","missing uMax"));if(null==a)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleSimProgram","loadGridMinMax","missing vMax"));e.uniform4f(this.gridMinMaxLocation,r,i,o,a)},r.prototype.loadRandSeed=function(e,r){if(null==r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleSimProgram","loadRandSeed","missing seed"));e.uniform1f(this.randSeedLocation,r)},r.prototype.loadSpeedFactor=function(e,r){if(null==r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleSimProgram","loadSpeedFactor","missing speedFactor"));e.uniform1f(this.speedFactorLocation,r)},r.prototype.loadDropRate=function(e,r){if(null==r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleSimProgram","loadDropRate","missing dropRate"));e.uniform1f(this.dropRateLocation,r)},r.prototype.loadDropRateMultiplier=function(e,r){if(null==r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleSimProgram","loadDropRateMultiplier","missing dropRateMultiplier"));e.uniform1f(this.dropRateMultiplierLocation,r)},r.prototype.loadBbox=function(e,r){if(null==r)throw new t(n.logMessage(n.LEVEL_SEVERE,"GridParticleSimProgram","loadBbox","missing bbox"));e.uniform4fv(this.bboxLocation,r)},r.prototype.loadGridSampler=function(t,e){t.uniform1i(this.gridSamplerLocation,e-t.TEXTURE0)},r.prototype.loadParticleSamper=function(t,e){t.uniform1i(this.particleSamplerLocation,e-t.TEXTURE0)},r})),i("layer/GriddedDataLayer",["../render/DoubleBufferedFbo","../shaders/GridParticleProgram","../shaders/GridParticleSimProgram","../geom/Location","../geom/Sector","./TiledImageLayer","../util/WWMath","../util/WWUtil"],(function(t,e,n,r,i,o,a,s){"use strict";var u=function(t,e){var n="GriddedDataLayer_"+s.guid();o.call(this,new i(-90,90,-180,180),new r(45,45),16,"image/png",n,256,256),this.displayName=t||"GriddedDataLayer",this._numParticles=16384,this._colors={0:"#3288bd",.1:"#66c2a5",.2:"#abdda4",.3:"#e6f598",.4:"#fee08b",.5:"#fdae61",.6:"#f46d43",1:"#d53e4f"},this.fadeOpacity=.996,this.speedFactor=.25,this.dropRate=.003,this.dropRateMultiplier=.01,this.waitTime=334,this.gridData=null,this.eyeAltitudeReduction=.15,this.eyeAltitudeReductionTrehshold=2e7,this.sector=new i(-90,90,-180,180),this._gridDataUrl=e,this._simTextureResolution=128,this._groundTextureResolution=2048,this._loadInProgress=!1,this._bbox=new Float32Array([0,0,1,1]),this._lastGroundFboClear=0,this._requiresFboClear=!1,this._simTextureKey=n+"_simTexture",this._simTextureKey1=n+"_simTexture1",this._simTextureKey2=n+"_simTexture2",this._colorsTextureKey=n+"_colorsTexture",this._gridTextureKey=n+"_gridTexure",this._groundTextureKey=n+"_groundTexure",this._groundTextureKey1=n+"_groundTexure1",this._groundTextureKey2=n+"_groundTexure2",this._particleVboKey=n+"_particleVbo",this._quadVboKey=n+"_quadVbo"};return u.prototype=Object.create(o.prototype),Object.defineProperties(u.prototype,{numParticles:{get:function(){return this._numParticles},set:function(t){this._simTextureResolution=Math.ceil(Math.sqrt(t)),this._numParticles=this._simTextureResolution*this._simTextureResolution;var e="GriddedDataLayer_"+s.guid();this._simTextureKey=e+"_simTexture",this._simTextureKey1=e+"_simTexture1",this._simTextureKey2=e+"_simTexture2",this._particleVboKey=e+"_particleVbo",this._requiresFboClear=!0}},colors:{get:function(){return this._colors},set:function(t){this._colors=t;var e="GriddedDataLayer_"+s.guid();this._colorsTextureKey=e+"_colorsTexture",this._requiresFboClear=!0}}}),u.prototype.doRender=function(t){if(t.redrawRequested=!0,t.terrain){if(!this.gridData)return void this.loadGridData(this._gridDataUrl);var e=!t.modelviewProjection.equals(this.lasTtMVP);if((this.currentTilesInvalid||e||t.globeStateKey!==this.lastGlobeStateKey)&&(this.currentTilesInvalid=!1,this.assembleTiles(t),t.globe.is2D()||(this.currentTiles=this.cullTilesHorizon(t,this.currentTiles)),e&&(this._requiresFboClear=!0)),this.lasTtMVP.copy(t.modelviewProjection),this.lastGlobeStateKey=t.globeStateKey,this.currentTiles.length>0){if(this._requiresFboClear&&this.clearGroundFbo(t),Date.now()-this._lastGroundFboClear<=this.waitTime)return;try{this.renderToTexture(t)}finally{this.restoreGLState(t)}t.surfaceTileRenderer.renderTiles(t,[this],this.opacity,t.surfaceOpacity>=1),t.frameStatistics.incrementImageTileCount(1),this.inCurrentFrame=!0}}},u.prototype.renderToTexture=function(t){var r=t.currentGlContext,i=t.gpuResourceCache,o=r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT,a=this._groundTextureKey,s=this._simTextureKey;1===t.globe.offset?(a=this._groundTextureKey1,s=this._simTextureKey1):-1===t.globe.offset&&(a=this._groundTextureKey2,s=this._simTextureKey2),r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.blendFunc(r.ONE,r.ZERO),r.activeTexture(r.TEXTURE0);var u=i.resourceForKey(this._gridTextureKey);u||(u=this.createGridTexture(t,this._gridTextureKey)),r.bindTexture(r.TEXTURE_2D,u),t.frameStatistics.incrementTextureLoadCount(1),r.activeTexture(r.TEXTURE1);var l=i.resourceForKey(s);l||(l=this.createSimFbo(t,s)),r.bindTexture(r.TEXTURE_2D,l.getSecondaryTexture()),t.frameStatistics.incrementTextureLoadCount(1);var c=i.resourceForKey(this._quadVboKey);c||(c=this.createQuadVbo(t));var h=i.resourceForKey(this._particleVboKey);h||(h=this.createParticleVbo(t));var f=i.resourceForKey(this._colorsTextureKey);f||(f=this.createColorsTexture(t,this._colorsTextureKey));var p=i.resourceForKey(a);p||(p=this.createGroundFbo(t,a));var d=this.getBoundingSector(this.currentTiles,this.sector),g=this.getBoundingBox(d,this._bbox),m=t.findAndBindProgram(e);r.enableVertexAttribArray(0),r.activeTexture(r.TEXTURE2),m.loadGridSampler(r,r.TEXTURE0),m.loadSimParticleSamper(r,r.TEXTURE1),m.loadTileOrColorsSampler(r,r.TEXTURE2),m.loadFadeOpacity(r,this.fadeOpacity),m.loadSimTextureDimension(r,this._simTextureResolution),m.loadGridMinMax(r,this.gridData.uMin,this.gridData.vMin,this.gridData.uMax,this.gridData.vMax),p.bindFbo(t),r.clear(o),r.viewport(0,0,p.width,p.height),m.loadDrawMode(r,m.MODE_TEX_COPY_FADE),r.bindBuffer(r.ARRAY_BUFFER,c),r.vertexAttribPointer(0,2,r.FLOAT,!1,0,0),r.bindTexture(r.TEXTURE_2D,p.getSecondaryTexture()),t.frameStatistics.incrementTextureLoadCount(1),r.drawArrays(r.TRIANGLES,0,6),r.bindBuffer(r.ARRAY_BUFFER,h),r.vertexAttribPointer(0,2,r.FLOAT,!1,0,0),m.loadDrawMode(r,m.MODE_DRAW_PARTICLES),m.loadBbox(r,g),r.bindTexture(r.TEXTURE_2D,f),t.frameStatistics.incrementTextureLoadCount(1),r.drawArrays(r.POINTS,0,this._numParticles),p.swap(),p.isCleared=!1,l.bindFbo(t),r.clear(o),r.viewport(0,0,this._simTextureResolution,this._simTextureResolution),r.disable(r.BLEND),m=t.findAndBindProgram(n),r.bindBuffer(r.ARRAY_BUFFER,c),r.enableVertexAttribArray(0),r.vertexAttribPointer(0,2,r.FLOAT,!1,0,0),m.loadGridDimensions(r,this.gridData.width,this.gridData.height),m.loadGridMinMax(r,this.gridData.uMin,this.gridData.vMin,this.gridData.uMax,this.gridData.vMax),m.loadRandSeed(r,Math.random()),m.loadSpeedFactor(r,this.speedFactor),m.loadDropRate(r,this.dropRate),m.loadDropRateMultiplier(r,this.dropRateMultiplier),m.loadGridSampler(r,r.TEXTURE0),m.loadParticleSamper(r,r.TEXTURE1),m.loadBbox(r,g),r.drawArrays(r.TRIANGLES,0,6),l.swap(),l.isCleared=!1},u.prototype.restoreGLState=function(t){var e=t.currentGlContext;e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,t.viewport.width,t.viewport.height),e.enable(e.DEPTH_TEST),e.enable(e.BLEND),e.activeTexture(e.TEXTURE0),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)},u.prototype.clearGroundFbo=function(t){this._requiresFboClear=!1;var e=this._groundTextureKey;1===t.globe.offset?e=this._groundTextureKey1:-1===t.globe.offset&&(e=this._groundTextureKey2);var n=t.gpuResourceCache.resourceForKey(e);if(n&&!n.isCleared){n.clearFbo(t);var r=t.currentGlContext;r.bindFramebuffer(r.FRAMEBUFFER,null),r.viewport(0,0,t.viewport.width,t.viewport.height),this._lastGroundFboClear=Date.now()}},u.prototype.bind=function(t){var e=this._groundTextureKey;1===t.globe.offset?e=this._groundTextureKey1:-1===t.globe.offset&&(e=this._groundTextureKey2);var n=t.gpuResourceCache.resourceForKey(e);return!!n&&n.bind(t)},u.prototype.applyInternalTransform=function(t,e){},u.prototype.loadGridData=function(t){if(!this._loadInProgress&&t){var e=this,n=new XMLHttpRequest;n.onload=function(){if(e._loadInProgress=!1,!(n.status>=200&&n.status<300||0===n.status))throw new Error(n.statusText);var t=JSON.parse(n.response);e.gridData=e.createGridData(t)},n.onerror=function(){throw e._loadInProgress=!1,new Error("Unable to fetch data: "+t)},n.open("GET",t,!0),n.send(),this._loadInProgress=!0}},u.prototype.createGridData=function(t){for(var e=t[0],n=t[1],r=Math.floor(e.header.nx),i=Math.floor(e.header.ny),o=e.data[0],a=e.data[0],s=n.data[0],u=n.data[0],l=1,c=e.data.length;l<c;l++)o>e.data[l]&&(o=e.data[l]),a<e.data[l]&&(a=e.data[l]),s>n.data[l]&&(s=n.data[l]),u<n.data[l]&&(u=n.data[l]);for(var h=new Uint8Array(r*i*4),f=a-o,p=u-s,d=Math.floor(r/2),g=0;g<i;g++)for(var m=0;m<r;m++){var y=g*r+(m+d)%r;h[0+(l=4*(g*r+m))]=Math.floor(255*(e.data[y]-o)/f),h[l+1]=Math.floor(255*(n.data[y]-s)/p),h[l+2]=0,h[l+3]=255}return{width:r,height:i,uMin:o,uMax:a,vMin:s,vMax:u,data:h}},u.prototype.getBoundingSector=function(t,e){t.length&&e.copy(t[0].sector);for(var n=1,r=t.length;n<r;n++)e.union(t[n].sector);return e},u.prototype.getBoundingBox=function(t,e){return e[0]=(t.minLongitude+180)/360,e[1]=(t.maxLatitude-90)/-180,e[2]=(t.maxLongitude+180)/360,e[3]=(t.minLatitude-90)/-180,e},u.prototype.cullTilesHorizon=function(t,e){var n=[],r=t.eyePosition.altitude,i=1-this.eyeAltitudeReduction;r>this.eyeAltitudeReductionTrehshold&&(i=1);for(var o=a.horizonDistanceForGlobeRadius(t.globe.equatorialRadius,r*i),s=0,u=e.length;s<u;s++){var l=e[s];l.distanceTo(t.eyePoint)<=o&&n.push(l)}return n},u.prototype.retrieveTileImage=function(t,e,n){if(this.currentTilesInvalid=!0,!n){var r=document.createEvent("Event");r.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(r)}},u.prototype.addTile=function(t,e){e.fallbackTile=null,e.opacity=1,this.currentTiles.push(e)},u.prototype.createSimFbo=function(e,n){this._simTextureResolution=Math.ceil(Math.sqrt(this._numParticles)),this._numParticles=this._simTextureResolution*this._simTextureResolution;for(var r=new Uint8Array(4*this._numParticles),i=0,o=r.length;i<o;i++)r[i]=Math.floor(256*Math.random());var a={width:this._simTextureResolution,height:this._simTextureResolution},s=this.createTexture(e,r,a),u=this.createTexture(e,r,a),l=new t(e,s,u,a.width,a.height);return e.gpuResourceCache.putResource(n,l,l.size),l},u.prototype.createGroundFbo=function(e,n){var r=e.currentGlContext,i={width:this._groundTextureResolution,height:this._groundTextureResolution};i[r.TEXTURE_MIN_FILTER]=r.NEAREST,i[r.TEXTURE_MAG_FILTER]=r.NEAREST;var o=new Uint8Array(i.width*i.height*4),a=this.createTexture(e,o,i),s=this.createTexture(e,o,i),u=new t(e,a,s,i.width,i.height);return e.gpuResourceCache.putResource(n,u,u.size),u},u.prototype.createColorsTexture=function(t,e){var n=t.currentGlContext,r=this.createColorGradient(this._colors),i={width:16,height:16};i[n.TEXTURE_MIN_FILTER]=n.LINEAR,i[n.TEXTURE_MAG_FILTER]=n.LINEAR;var o=this.createTexture(t,r,i),a=i.width*i.height*4;return t.gpuResourceCache.putResource(e,o,a),o},u.prototype.createGridTexture=function(t,e){var n=t.currentGlContext,r=this.gridData.data,i={width:this.gridData.width,height:this.gridData.height};i[n.TEXTURE_MIN_FILTER]=n.LINEAR,i[n.TEXTURE_MAG_FILTER]=n.LINEAR;var o=this.createTexture(t,r,i),a=i.width*i.height*4;return t.gpuResourceCache.putResource(e,o,a),o},u.prototype.createParticleVbo=function(t){for(var e=t.currentGlContext,n=2*this._numParticles,r=new Float32Array(n),i=0,o=0;o<n;o+=2)r[o]=i++;var a=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),t.gpuResourceCache.putResource(this._particleVboKey,a,r.byteLength),a},u.prototype.createQuadVbo=function(t){var e=t.currentGlContext,n=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),r=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),t.gpuResourceCache.putResource(this._quadVboKey,r,n.byteLength),r},u.prototype.createTexture=function(t,e,n){var r=t.currentGlContext,i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,n[r.TEXTURE_WRAP_S]||r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,n[r.TEXTURE_WRAP_T]||r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n[r.TEXTURE_MIN_FILTER]||r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,n[r.TEXTURE_MAG_FILTER]||r.NEAREST);var o=n.level||0,a=n.format||r.RGBA,s=n.type||r.UNSIGNED_BYTE,u=n.width,l=n.height;return r.texImage2D(r.TEXTURE_2D,o,a,u,l,0,a,s,e),i},u.prototype.createColorGradient=function(t){var e=document.createElement("canvas");e.width=256,e.height=1;for(var n=e.getContext("2d"),r=n.createLinearGradient(0,0,256,0),i=Object.keys(t),o=0,a=i.length;o<a;o++){var s=i[o];r.addColorStop(Number(s),t[s])}return n.fillStyle=r,n.fillRect(0,0,256,1),n.getImageData(0,0,256,1).data},u})),i("layer/heatmap/HeatMapTile",[],(function(){var t=function(t,e){this._data=t,this._sector=e.sector,this._canvas=this.createCanvas(e.width,e.height),this._width=e.width,this._height=e.height,this._intensityGradient=e.intensityGradient,this._radius=e.radius,this._incrementPerIntensity=e.incrementPerIntensity};return t.prototype.url=function(){return this.draw().toDataURL()},t.prototype.canvas=function(){return this.draw()},t.prototype.draw=function(){var t=[];for(var e in this._intensityGradient)this._intensityGradient.hasOwnProperty(e)&&t.push({shape:this.shape(e),min:e});for(var n,r=this._canvas.getContext("2d"),i=null,o=0;o<this._data.length;o++){var a=this._data[o];n=a.measure*this._incrementPerIntensity,r.globalAlpha=n,t.forEach((function(t){n>t.min&&(i=t.shape)})),r.drawImage(i,this.longitudeInSector(a,this._sector,this._width)-i.width/2,this._height-this.latitudeInSector(a,this._sector,this._height)-i.height/2)}return this._canvas},t.prototype.createCanvas=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},t.prototype.shape=function(t){var e=this.createCanvas(2*this._radius,2*this._radius),n=e.getContext("2d"),r=n.createRadialGradient(this._radius,this._radius,0,this._radius,this._radius,this._radius);return r.addColorStop(0,"rgba(0,0,0,"+t+")"),r.addColorStop(1,"rgba(0,0,0,0)"),n.beginPath(),n.arc(this._radius,this._radius,this._radius,0,2*Math.PI,!0),n.fillStyle=r,n.fill(),n.closePath(),e},t.prototype.latitudeInSector=function(t,e,n){var r=e.maxLatitude-e.minLatitude,i=t.latitude-e.minLatitude;return Math.ceil(i/r*n)},t.prototype.longitudeInSector=function(t,e,n){var r=e.maxLongitude-e.minLongitude,i=t.longitude-e.minLongitude;return Math.ceil(i/r*n)},t})),i("layer/heatmap/HeatMapColoredTile",["./HeatMapTile"],(function(t){var e=function(e,n){t.call(this,e,n),this._extendedWidth=n.extendedWidth,this._extendedHeight=n.extendedHeight,this._gradient=this.gradient(n.intensityGradient)};return(e.prototype=Object.create(t.prototype)).draw=function(){var e=t.prototype.draw.call(this),n=e.getContext("2d"),r=0,i=0,o=this._width,a=this._height;this._extendedHeight&&(r=this._extendedHeight,a=this._height-2*this._extendedHeight),this._extendedWidth&&(i=this._extendedWidth,o=this._width-2*this._extendedWidth);var s=n.getImageData(r,i,o,a);return this.colorize(s.data,this._gradient),n.putImageData(s,r,i),e},e.prototype.gradient=function(t){var e=this.createCanvas(1,256).getContext("2d"),n=e.createLinearGradient(0,0,0,256);for(var r in t)n.addColorStop(+r,t[r]);return e.fillStyle=n,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data},e.prototype.colorize=function(t,e){for(var n,r=0,i=t.length;r<i;r+=4)(n=4*t[r+3])&&(t[r]=e[n],t[r+1]=e[n+1],t[r+2]=e[n+2],t[r+3]=255)},e})),i("layer/heatmap/HeatMapIntervalType",[],(function(){"use strict";return{CONTINUOUS:0,QUANTILES:1}})),i("geom/MeasuredLocation",["./Angle","./Location"],(function(t,e){"use strict";var n=function(t,n,r){e.call(this,t,n),this.measure=r};return n.prototype=Object.create(e.prototype),n.fromRadians=function(e,r,i){return new n(e*t.RADIANS_TO_DEGREES,r*t.RADIANS_TO_DEGREES,i)},n.prototype.copy=function(t){return e.prototype.copy.call(this,t),this.measure=t.measure,this},n.prototype.set=function(t,n,r){return e.prototype.set.call(this,t,n),this.measure=r,this},n.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&this.measure===t.measure},n})),i("layer/heatmap/HeatMapLayer",["../../error/ArgumentError","./HeatMapColoredTile","./HeatMapIntervalType","./HeatMapTile","../../util/ImageSource","../../geom/Location","../../util/Logger","../../geom/MeasuredLocation","../TiledImageLayer","../../geom/Sector","../../util/WWUtil"],(function(t,e,n,r,i,o,a,s,u,l,c){"use strict";var h=function(t,e,r){this.tileWidth=256,this.tileHeight=256,u.call(this,new l(-90,90,-180,180),new o(45,45),r||18,"image/png","HeatMap"+c.guid(),this.tileWidth,this.tileHeight),this.displayName=t;for(var i={},a=-90;a<=90;a++){i[a]={};for(var s=-180;s<=180;s++)i[a][s]=[]}var h,f,p=Number.MIN_VALUE;e.forEach((function(t){h=Math.floor(t.latitude),f=Math.floor(t.longitude),i[h][f].push(t),t.measure>p&&(p=t.measure)})),this._data=i,this._measuredLocations=e,this._intervalType=n.CONTINUOUS,this._scale=["blue","cyan","lime","yellow","red"],this._radius=12.5,this._incrementPerIntensity=1/p,this.setGradient(e)};return h.prototype=Object.create(u.prototype),Object.defineProperties(h.prototype,{intervalType:{get:function(){return this._intervalType},set:function(t){this._intervalType=t,this.setGradient()}},scale:{get:function(){return this._scale},set:function(t){this._scale=t,this.setGradient()}},gradient:{get:function(){return this._gradient}},radius:{get:function(){return this._radius},set:function(t){this._radius=t}}}),h.prototype.filterGeographically=function(t,e){var n=Math.floor(e.minLatitude),r=Math.floor(e.maxLatitude),i=Math.floor(e.minLongitude),o=Math.floor(e.maxLongitude),a=0,s=0;n<=-90&&(n=-90),r>=90&&(r=90),i<=-180&&(a=Math.abs(i- -180),i=-180),o>=180&&(s=Math.abs(o-180),o=180);var u=[];if(this.gatherGeographical(t,u,e,n,r,i,o),0!==a){var c=new l(n,r,180-a,180);this.gatherGeographical(t,u,c,n,r,180-a,180,-360)}if(0!==s){var h=new l(n,r,-180,-180+s);this.gatherGeographical(t,u,h,n,r,-180,-180+s,360)}return u},h.prototype.gatherGeographical=function(t,e,n,r,i,o,a,u){var l,c;for(l=r;l<=i;l++)for(c=o;c<=a;c++)t[l][c].forEach((function(t){n.containsLocation(t.latitude,t.longitude)&&(u?e.push(new s(t.latitude,u+t.longitude,t.measure)):e.push(t))}))},h.prototype.setGradient=function(){var t=this.intervalType,e=this.scale,r={};if(t===n.CONTINUOUS)e.forEach((function(t,n){r[n/e.length]=t}));else if(t===n.QUANTILES){var i=this._measuredLocations;i.sort((function(t,e){return t.measure<e.measure?-1:t.measure>e.measure?1:0}));var o=i[i.length-1].measure;i.length>=e.length?e.forEach((function(t,n){0===n?r[0]=t:r[i[Math.floor(n/e.length*i.length)].measure/o]=t})):e.forEach((function(t,n){r[n/e.length]=t}))}this._gradient=r},h.prototype.retrieveTileImage=function(t,e,n){if(this.currentRetrievals.indexOf(e.imagePath)<0){if(this.absentResourceList.isResourceAbsent(e.imagePath))return;var r=e.imagePath,i=t.gpuResourceCache,o=this,a=this.radius,s=this.calculateExtendedSector(e.sector,a/this.tileWidth*2,a/this.tileHeight*2),u=Math.ceil(s.extensionFactorWidth*this.tileWidth),l=Math.ceil(s.extensionFactorHeight*this.tileHeight),c=this.filterGeographically(this._data,s.sector),h=this.createHeatMapTile(c,{sector:s.sector,width:this.tileWidth+2*u,height:this.tileHeight+2*l,radius:a,intensityGradient:this.gradient,incrementPerIntensity:this._incrementPerIntensity,extendedWidth:u,extendedHeight:l}).canvas(),f=document.createElement("canvas");f.height=this.tileHeight,f.width=this.tileWidth,f.getContext("2d").putImageData(h.getContext("2d").getImageData(u,l,this.tileWidth,this.tileHeight),0,0);var p=o.createTexture(t,e,f);if(o.removeFromCurrentRetrievals(r),p&&(i.putResource(r,p,p.size),o.currentTilesInvalid=!0,o.absentResourceList.unmarkResourceAbsent(r),!n)){var d=document.createEvent("Event");d.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(d)}}},h.prototype.calculateExtendedSector=function(t,e,n){var r=(t.maxLatitude-t.minLatitude)*n,i=(t.maxLongitude-t.minLongitude)*e;return{sector:new l(t.minLatitude-r,t.maxLatitude+r,t.minLongitude-i,t.maxLongitude+i),extensionFactorHeight:n,extensionFactorWidth:e}},h.prototype.createHeatMapTile=function(t,n){return new e(t,n)},h})),i("util/HighlightController",["../error/ArgumentError","../util/Logger"],(function(t,e){"use strict";return function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"HighlightController","constructor","missingWorldWindow"));this.worldWindow=n;var r=[],i=function(t){for(var e=t.clientX,i=t.clientY,o=r.length>0,a=0;a<r.length;a++)r[a].highlighted=!1;r=[];var s=n.pick(n.canvasCoordinates(e,i));if(s.objects.length>0&&(o=!0),s.objects.length>0)for(var u=0;u<s.objects.length;u++)s.objects[u].isTerrain||(s.objects[u].userObject.highlighted=!0,r.push(s.objects[u].userObject));o&&n.redraw()};this.worldWindow.addEventListener("mousemove",i),new WorldWind.TapRecognizer(this.worldWindow,i)}})),i("formats/kml/util/KmlAttribute",[],(function(){"use strict";var t=function(t,e){this.node=t,this.name=e};return t.prototype.value=function(){return this.node.attributes&&this.node.attributes.getNamedItem(this.name)&&this.node.attributes.getNamedItem(this.name).value||null},t.prototype.exists=function(){return null!=this.value()},t.prototype.save=function(t){this.node.setAttribute(this.name,t)},t})),i("formats/kml/KmlElements",[],(function(){"use strict";return{keys:{},addKey:function(t,e){this.keys[t]=e},getKey:function(t){return this.keys[t]}}})),i("formats/kml/util/KmlNodeTransformers",["./KmlAttribute","../KmlElements","../../../geom/Position","../../../util/WWUtil"],(function(t,e,n,r){function i(t){var e;return null!=t&&t.childNodes[0]?e=t.childNodes[0].nodeValue:null!=t&&(e=""),e}var o=function(){};return o.string=function(t){return String(i(t))},o.number=function(t){return Number(i(t))},o.boolean=function(t){return r.transformToBoolean(i(t))},o.date=function(t){return r.date(i(t))},o.kmlObject=function(t,n,r){var i=t.nodeName,o=e.getKey(i);return o?new o({objectNode:t,parent:n,controls:r}):null},o.linearRing=function(t,n,r){var i=e.getKey("LinearRing");if(!i)return null;var o=null;return Array.prototype.forEach.call(t.childNodes,(function(t){t.nodeName.toUpperCase()=="LinearRing".toUpperCase()&&(o=t)})),new i({objectNode:o,parent:n,controls:r})},o.positions=function(t){var e=[];return i(t).trim().replace(/\s+/g," ").split(" ").forEach((function(t){t=t.split(","),e.push(new n(Number(t[1]),Number(t[0]),Number(t[2]||0)))})),e},o.attribute=function(e){return function(n){return new t(n,e).value()}},o})),i("formats/kml/util/KmlElementsFactory",["./KmlNodeTransformers"],(function(t){"use strict";var e=function(t){this.options=t||{},this.options.controls=this.options.controls||[]};e.prototype.specific=function(t,e){var n=t.node,r=null,i=this;return[].forEach.call(n.childNodes,(function(n){n.nodeName==e.name&&(r=e.transformer(n,t,i.options.controls))})),r},e.prototype.any=function(e,n){var r=e.node,i=null,o=this;return[].forEach.call(r.childNodes,(function(r){-1!=n.name.indexOf(r.nodeName)&&(i=t.kmlObject(r,e,o.options.controls))})),i},e.prototype.all=function(e){var n=e.node,r=[],i=this;return[].forEach.call(n.childNodes,(function(n){var o=t.kmlObject(n,e,i.options.controls);o&&r.push(o)})),r};var n=new e;return e.applicationWide=function(){return n},e})),i("formats/kml/util/KmlTreeKeyValueCache",["../../../util/WWUtil"],(function(t){"use strict";var e=function(){this.map={}};e.prototype.add=function(t,e,n){this.map[t]||(this.map[t]={}),this.map[t][e]=n},e.prototype.value=function(e,n){if(!this.map[e])return null;if(-1==n.indexOf("#")){var r=this.level(e);for(var i in r)if(r.hasOwnProperty(i)&&t.startsWith(i,n))return r[i]}return this.map[e][n]||null},e.prototype.level=function(t){return this.map[t]},e.prototype.remove=function(t,e){delete this.map[t][e]};var n=new e;return e.applicationLevelCache=function(){return n},e})),i("formats/kml/util/KmlElementsFactoryCached",["./KmlAttribute","./KmlElementsFactory","./KmlTreeKeyValueCache","../../../util/WWUtil"],(function(t,e,n,r){"use strict";var i=function(t){this.internalFactory=new e(t),this.cache=n.applicationLevelCache()};i.prototype.all=function(t){var e=t.node,n=this.cache.level(this.cacheKey(t.node,"All"));if(n){var r=[];for(var i in n)n.hasOwnProperty(i)&&r.push(n[i]);return r}var o=this.internalFactory.all(t);if(o&&o.length){var a=this;o.forEach((function(t){a.cache.add(a.cacheKey(e,"All"),a.cacheKey(t.node),t)}))}return o},i.prototype.specific=function(t,e){var n=t.node,r=e.name;e.attribute&&(r=e.attribute+r);var i=this.cache.value(this.cacheKey(n),r);if(i)return i;var o=this.internalFactory.specific(t,e);return o&&o.node?this.cache.add(this.cacheKey(n),this.cacheKey(o.node),o):o&&this.cache.add(this.cacheKey(n),r,o),o},i.prototype.any=function(t,e){var n,r=t.node,i=this,o=null;if(e.name.forEach((function(t){(n=i.cache.value(i.cacheKey(r),t))&&(o=n)})),o)return o;var a=this.internalFactory.any(t,e);return a&&this.cache.add(i.cacheKey(r),i.cacheKey(a.node),a),a},i.prototype.cacheKey=function(e,n){var i=new t(e,"id");i.exists()||i.save(r.guid());var o=e.nodeName+"#"+i.value();return n&&(o=n+o),o};var o=new i;return i.applicationWide=function(){return o},i})),function(){"use strict";function o(t){return"function"==typeof t}function a(){return function(){setTimeout(s,1)}}function s(){for(var t=0;t<x;t+=2)(0,O[t])(O[t+1]),O[t]=void 0,O[t+1]=void 0;x=0}function u(){}function l(t,e){if(e.constructor===t.constructor)!function(t,e){e._state===I?f(t,e._result):e._state===N?p(t,e._result):d(e,void 0,(function(e){c(t,e)}),(function(e){p(t,e)}))}(t,e);else{var n=function(t){try{return t.then}catch(t){return D.error=t,D}}(e);n===D?p(t,D.error):void 0===n?f(t,e):o(n)?function(t,e,n){T((function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,(function(n){r||(r=!0,e!==n?c(t,n):f(t,n))}),(function(e){r||(r=!0,p(t,e))}),t._label);!r&&i&&(r=!0,p(t,i))}),t)}(t,e,n):f(t,e)}}function c(t,e){t===e?p(t,new TypeError("You cannot resolve a promise with itself")):function(t){return"function"==typeof t||"object"==typeof t&&null!==t}(e)?l(t,e):f(t,e)}function h(t){t._onerror&&t._onerror(t._result),g(t)}function f(t,e){t._state===P&&(t._result=e,t._state=I,0!==t._subscribers.length&&T(g,t))}function p(t,e){t._state===P&&(t._state=N,t._result=e,T(h,t))}function d(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+I]=n,i[o+N]=r,0===o&&t._state&&T(g,t)}function g(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,a=0;a<e.length;a+=3)r=e[a],i=e[a+n],r?y(n,r,i,o):i(o);t._subscribers.length=0}}function m(){this.error=null}function y(t,e,n,r){var i,a,s,u,l=o(n);if(l){if((i=function(t,e){try{return t(e)}catch(t){return k.error=t,k}}(n,r))===k?(u=!0,a=i.error,i=null):s=!0,e===i)return void p(e,new TypeError("A promises callback cannot return that same promise."))}else i=r,s=!0;e._state!==P||(l&&s?c(e,i):u?p(e,a):t===I?f(e,i):t===N&&p(e,i))}function v(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(u),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?f(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&f(n.promise,n._result))):p(n.promise,n._validationError())}function E(t){this._id=G++,this._state=void 0,this._result=void 0,this._subscribers=[],u!==t&&(o(t)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof E||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(t,e){try{e((function(e){c(t,e)}),(function(e){p(t,e)}))}catch(e){p(t,e)}}(this,t))}var _,b,S,w=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},x=0,T=function(t,e){O[x]=t,O[x+1]=e,2===(x+=2)&&(b?b(s):S())},L="undefined"!=typeof window?window:void 0,C=L||{},A=C.MutationObserver||C.WebKitMutationObserver,M="undefined"!=typeof e&&"[object process]"==={}.toString.call(e),R="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,O=new Array(1e3);S=M?function(){e.nextTick(s)}:A?function(){var t=0,e=new A(s),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():R?function(){var t=new MessageChannel;return t.port1.onmessage=s,function(){t.port2.postMessage(0)}}():void 0===L&&"function"==typeof r?function(){try{var t=r("vertx");return _=t.runOnLoop||t.runOnContext,function(){_(s)}}catch(n){return a()}}():a();var P=void 0,I=1,N=2,D=new m,k=new m;v.prototype._validateInput=function(t){return w(t)},v.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},v.prototype._init=function(){this._result=new Array(this.length)};var F=v;v.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,i=0;n._state===P&&i<e;i++)t._eachEntry(r[i],i)},v.prototype._eachEntry=function(t,e){var n=this,r=n._instanceConstructor;!function(t){return"object"==typeof t&&null!==t}(t)?(n._remaining--,n._result[e]=t):t.constructor===r&&t._state!==P?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(r.resolve(t),e)},v.prototype._settledAt=function(t,e,n){var r=this,i=r.promise;i._state===P&&(r._remaining--,t===N?p(i,n):r._result[e]=n),0===r._remaining&&f(i,r._result)},v.prototype._willSettleAt=function(t,e){var n=this;d(t,void 0,(function(t){n._settledAt(I,e,t)}),(function(t){n._settledAt(N,e,t)}))};var V=function(t){return new F(this,t).promise},j=function(t){function e(t){c(r,t)}function n(t){p(r,t)}var r=new this(u);if(!w(t))return p(r,new TypeError("You must pass an array to race.")),r;for(var i=t.length,o=0;r._state===P&&o<i;o++)d(this.resolve(t[o]),void 0,e,n);return r},B=function(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(u);return c(e,t),e},U=function(t){var e=new this(u);return p(e,t),e},G=0,K=E;E.all=V,E.race=j,E.resolve=B,E.reject=U,E._setScheduler=function(t){b=t},E._setAsap=function(t){T=t},E._asap=T,E.prototype={constructor:E,then:function(t,e){var n=this,r=n._state;if(r===I&&!t||r===N&&!e)return this;var i=new this.constructor(u),o=n._result;if(r){var a=arguments[r-1];T((function(){y(r,i,a,o)}))}else d(n,i,t,e);return i},catch:function(t){return this.then(null,t)}};var W=function(){var t;if("undefined"!=typeof Y)t=Y;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=K)},z={Promise:K,polyfill:W};"function"==typeof i&&i.amd?i("util/es6-promise",[],(function(){return z})):t.exports?t.exports=z:"undefined"!=typeof this&&(this.ES6Promise=z);var Y={};W()}.call(this),i("util/Promise",["./es6-promise"],(function(t){"use strict";return window.Promise?window.Promise:t.Promise})),i("formats/kml/KmlObject",["../../error/ArgumentError","./util/KmlAttribute","./KmlElements","./util/KmlElementsFactoryCached","../../util/Logger","../../util/Promise","../../render/Renderable"],(function(t,e,n,r,i,o,a){"use strict";var s=function(e){if(a.call(this),!(e=e||{}).objectNode)throw new t(i.logMessage(i.LEVEL_SEVERE,"KmlObject","constructor","Passed node isn't defined."));this._node=e.objectNode,this._cache={},this._controls=e.controls||[],this._factory=new r({controls:this._controls}),this.hook(this._controls,e)};return s.prototype=Object.create(a.prototype),Object.defineProperties(s.prototype,{id:{get:function(){return new e(this.node,"id").value()}},node:{get:function(){return this._node}}}),s.prototype.hook=function(t,e){var n=this;t.forEach((function(t){t.hook(n,e)}))},s.prototype.render=function(t){},s.prototype.getTagNames=function(){return[]},s})),i("formats/kml/KmlTimePrimitive",["./KmlObject"],(function(t){"use strict";var e=function(e){t.call(this,e)};return(e.prototype=Object.create(t.prototype)).kmlTimeRange=function(){var t,e;return this.kmlBegin&&(e=t=this.kmlBegin.valueOf()),this.kmlEnd&&(e=this.kmlEnd.valueOf(),t||(t=e)),this.kmlWhen&&(e=t=this.kmlWhen.valueOf()),{from:t,to:e}},e.prototype.getTagNames=function(){return["TimeSpan","TimeStamp"]},e})),i("formats/kml/KmlAbstractView",["./KmlObject","./KmlElements","./KmlTimePrimitive"],(function(t,e,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlTimePrimitive:{get:function(){return this._factory.any(this,{name:n.prototype.getTagNames()})}}}),r.prototype.getTagNames=function(){return["Camera","LookAt"]},r})),i("formats/kml/styles/KmlSubStyle",["./../KmlObject"],(function(t){"use strict";var e=function(e){t.call(this,e)};return(e.prototype=Object.create(t.prototype)).getTagNames=function(){return["LineStyle","PolyStyle","IconStyle","LabelStyle","BalloonStyle","ListStyle"]},e})),i("formats/kml/styles/KmlBalloonStyle",["../KmlElements","./KmlSubStyle","../util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlBgColor:{get:function(){return this._factory.specific(this,{name:"bgColor",transformer:n.string})}},kmlTextColor:{get:function(){return this._factory.specific(this,{name:"textColor",transformer:n.string})}},kmlText:{get:function(){return this._factory.specific(this,{name:"text",transformer:n.string})}},kmlDisplayMode:{get:function(){return this._factory.specific(this,{name:"displayMode",transformer:n.string})}}}),r.update=function(){},r.prototype.getTagNames=function(){return["BalloonStyle"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/KmlCamera",["./KmlElements","./KmlAbstractView","./util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlLongitude:{get:function(){return this._factory.specific(this,{name:"longitude",transformer:n.string})}},kmlLatitude:{get:function(){return this._factory.specific(this,{name:"latitude",transformer:n.string})}},kmlAltitude:{get:function(){return this._factory.specific(this,{name:"altitude",transformer:n.string})}},kmlHeading:{get:function(){return this._factory.specific(this,{name:"heading",transformer:n.string})}},kmlTilt:{get:function(){return this._factory.specific(this,{name:"tilt",transformer:n.string})}},kmlRoll:{get:function(){return this._factory.specific(this,{name:"roll",transformer:n.string})}},kmlAltitudeMode:{get:function(){return this._factory.specific(this,{name:"altitudeMode",transformer:n.string})}}}),r.prototype.getTagNames=function(){return["Camera"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/util/KmlChange",["../KmlElements","../KmlObject"],(function(t,e){var n=function(t){e.call(this,t)};return n.prototype=Object.create(e.prototype),Object.defineProperties(n.prototype,{shapes:{get:function(){return this._factory.all(this)}}}),n.prototype.getTagNames=function(){return["Change"]},t.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/styles/KmlColorStyle",["./KmlSubStyle","../util/KmlNodeTransformers"],(function(t,e){"use strict";var n=function(e){t.call(this,e)};return n.prototype=Object.create(t.prototype),Object.defineProperties(n.prototype,{kmlColor:{get:function(){return this._factory.specific(this,{name:"color",transformer:e.string})}},kmlColorMode:{get:function(){return this._factory.specific(this,{name:"colorMode",transformer:e.string})}}}),n.prototype.getTagNames=function(){return["LineStyle","PolyStyle","IconStyle","LabelStyle"]},n})),i("formats/kml/KmlFileCache",[],(function(){"use strict";var t=function(){this._rootFile=null,this._map={}};return t.prototype.retrieve=function(t){if(0!=t.indexOf("kmz;")&&0!=t.indexOf("href;")&&(0==t.indexOf("#")||null==t||0!=t.indexOf("http")))return this._rootFile;var e=t;return-1!=t.indexOf("#")&&(e=t.substr(0,t.indexOf("#")-1)),this._map[e]?this._map[e]:null},t.prototype.add=function(t,e,n){n?this._rootFile=e:this._map[t]=e},t})),i("formats/kml/styles/KmlStyleSelector",["./../KmlObject"],(function(t){"use strict";var e=function(e){t.call(this,e)};return(e.prototype=Object.create(t.prototype)).getTagNames=function(){return["Style","StyleMap"]},e})),i("formats/kml/styles/KmlPolyStyle",["../../../util/Color","./KmlColorStyle","./../KmlElements","../util/KmlNodeTransformers"],(function(t,e,n,r){"use strict";var i=function(t){e.call(this,t)};return i.prototype=Object.create(e.prototype),Object.defineProperties(i.prototype,{kmlFill:{get:function(){return this._factory.specific(this,{name:"fill",transformer:r.boolean})}},kmlOutline:{get:function(){return this._factory.specific(this,{name:"outline",transformer:r.boolean})}}}),i.update=function(e,n){e=e||{};var r=n||{};return r._drawInterior=e.kmlFill||!0,r._drawOutline=e.kmlOutline||!1,r._outlineColor=n._outlineColor||t.WHITE,r._interiorColor=e.kmlColor&&t.colorFromKmlHex(e.kmlColor)||t.WHITE,r._colorMode=e.kmlColorMode||"normal",r},i.prototype.getTagNames=function(){return["PolyStyle"]},n.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/util/KmlHrefResolver",["../../../util/Promise","../../../util/WWUtil"],(function(t,e){var n=function(t,e){this._url=t,this._fileCache=e};return n.prototype.url=function(){if(e.startsWith(this._url,"http://")||e.startsWith(this._url,"https://"))return this._url;var t=this._fileCache.retrieve("kmz;"+this._url);return t||(t=this._fileCache.retrieve("href;"+this._url))||this._url},n})),i("formats/kml/KmlLink",["./util/KmlHrefResolver","./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(t,e,n,r){"use strict";var i=function(t){n.call(this,t),this.onChangeListeners=[]};return i.prototype=Object.create(n.prototype),Object.defineProperties(i.prototype,{kmlRefreshMode:{get:function(){return this._factory.specific(this,{name:"refreshMode",transformer:r.string})}},kmlRefreshInterval:{get:function(){return this._factory.specific(this,{name:"refreshInterval",transformer:r.number})}},kmlViewRefreshMode:{get:function(){return this._factory.specific(this,{name:"viewRefreshMode",transformer:r.string})}},kmlViewRefreshTime:{get:function(){return this._factory.specific(this,{name:"viewRefreshTime",transformer:r.number})}},kmlViewBoundScale:{get:function(){return this._factory.specific(this,{name:"viewBoundScale",transformer:r.number})}},kmlViewFormat:{get:function(){return this._factory.specific(this,{name:"viewFormat",transformer:r.string})}},kmlHttpQuery:{get:function(){return this._factory.specific(this,{name:"httpQuery",transformer:r.string})}}}),i.prototype.kmlHref=function(e){return new t(this._factory.specific(this,{name:"href",transformer:r.string}),e).url()},i.prototype.getTagNames=function(){return["Link"]},e.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/KmlIcon",["./KmlLink","./KmlElements","./util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlX:{get:function(){return this._factory.specific(this,{name:"gx:x",transformer:n.number})}},kmlY:{get:function(){return this._factory.specific(this,{name:"gx:y",transformer:n.number})}},kmlW:{get:function(){return this._factory.specific(this,{name:"gx:w",transformer:n.number})}},kmlH:{get:function(){return this._factory.specific(this,{name:"gx:h",transformer:n.number})}}}),r.prototype.getTagNames=function(){return["Icon"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/styles/KmlIconStyle",["./KmlColorStyle","./../KmlElements","../KmlIcon","../util/KmlNodeTransformers"],(function(t,e,n,r){"use strict";var i=function(e){t.call(this,e)};return i.prototype=Object.create(t.prototype),Object.defineProperties(i.prototype,{kmlScale:{get:function(){return this._factory.specific(this,{name:"scale",transformer:r.number})}},kmlHeading:{get:function(){return this._factory.specific(this,{name:"heading",transformer:r.number})}},kmlIcon:{get:function(){return this._factory.any(this,{name:n.prototype.getTagNames()})}},kmlHotSpotX:{get:function(){return this._factory.specific(this,{name:"hotSpot",transformer:r.attribute("x")})}},kmlHotSpotY:{get:function(){return this._factory.specific(this,{name:"hotSpot",transformer:r.attribute("y")})}},kmlHotSpotXUnits:{get:function(){return this._factory.specific(this,{name:"hotSpot",transformer:r.attribute("xunits")})}},kmlHotSpotYUnits:{get:function(){return this._factory.specific(this,{name:"hotSpot",transformer:r.attribute("yunits")})}}}),i.update=function(t,e,n){t=t||{};var r=e||{};return r._imageScale=t.kmlScale||1,r._imageSource=t.kmlIcon&&t.kmlIcon.kmlHref(n)||null,r},i.prototype.getTagNames=function(){return["IconStyle"]},e.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/styles/KmlLabelStyle",["./KmlColorStyle","../KmlElements","../util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlScale:{get:function(){return this._factory.specific(this,{name:"scale",transformer:n.number})}}}),r.update=function(){},r.prototype.getTagNames=function(){return["LabelStyle"]},e.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/styles/KmlLineStyle",["../../../util/Color","./KmlColorStyle","./../KmlElements","../util/KmlNodeTransformers"],(function(t,e,n,r){"use strict";var i=function(t){e.call(this,t)};return i.prototype=Object.create(e.prototype),Object.defineProperties(i.prototype,{kmlWidth:{get:function(){return this._factory.specific(this,{name:"width",transformer:r.number})}},kmlOuterColor:{get:function(){return this._factory.specific(this,{name:"gx:outerColor",transformer:r.string})}},kmlOuterWidth:{get:function(){return this._factory.specific(this,{name:"gx:outerWidth",transformer:r.number})}},kmlPhysicalWidth:{get:function(){return this._factory.specific(this,{name:"gx:physicalWidth",transformer:r.number})}},kmlLabelVisibility:{get:function(){return this._factory.specific(this,{name:"gx:labelVisibility",transformer:r.boolean})}}}),i.update=function(e,n){var r=n||{};return e=e||{},r._outlineColor=e.kmlColor&&t.colorFromKmlHex(e.kmlColor)||t.WHITE,r._outlineWidth=e.kmlWidth||10,r},i.prototype.getTagNames=function(){return["LineStyle"]},n.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/util/KmlItemIcon",["./KmlHrefResolver","./../KmlElements","../KmlObject","./KmlNodeTransformers"],(function(t,e,n,r){"use strict";var i=function(t){n.call(this,t)};return i.prototype=Object.create(n.prototype),Object.defineProperties(i.prototype,{kmlState:{get:function(){return this._factory.specific(this,{name:"state",transformer:r.string})}}}),i.prototype.kmlHref=function(e){return new t(this._factory.specific(this,{name:"href",transformer:r.string}),e).url()},i.prototype.getTagNames=function(){return["ItemIcon"]},e.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/styles/KmlListStyle",["../util/KmlItemIcon","../KmlElements","./KmlSubStyle","../util/KmlNodeTransformers"],(function(t,e,n,r){"use strict";var i=function(t){n.call(this,t)};return i.prototype=Object.create(n.prototype),Object.defineProperties(i.prototype,{kmlBgColor:{get:function(){return this._factory.specific(this,{name:"bgColor",transformer:r.string})}},kmlListItemType:{get:function(){return this._factory.specific(this,{name:"listItemType",transformer:r.string})}},kmlItemIcon:{get:function(){return this._factory.any(this,{name:t.prototype.getTagNames()})}}}),i.update=function(){},i.prototype.getTagNames=function(){return["ListStyle"]},e.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/styles/KmlStyle",["../../../util/Color","../../../util/Font","./KmlStyleSelector","./../KmlElements","./KmlPolyStyle","./KmlIconStyle","./KmlLabelStyle","./KmlLineStyle","./KmlListStyle","./KmlBalloonStyle","../../../util/Offset","../../../util/Promise","../../../shapes/ShapeAttributes","../../../shapes/TextAttributes"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p){"use strict";var d=function(t){n.call(this,t)};return d.prototype=Object.create(n.prototype),Object.defineProperties(d.prototype,{kmlIconStyle:{get:function(){return this._factory.any(this,{name:o.prototype.getTagNames()})}},kmlLabelStyle:{get:function(){return this._factory.any(this,{name:a.prototype.getTagNames()})}},kmlLineStyle:{get:function(){return this._factory.any(this,{name:s.prototype.getTagNames()})}},kmlPolyStyle:{get:function(){return this._factory.any(this,{name:i.prototype.getTagNames()})}},kmlBalloonStyle:{get:function(){return this._factory.any(this,{name:l.prototype.getTagNames()})}},kmlListStyle:{get:function(){return this._factory.any(this,{name:u.prototype.getTagNames()})}}}),d.prototype.generate=function(t,e){t=t||{};var n=this||{};return n.kmlIconStyle&&o.update(n.kmlIconStyle,t,e),n.kmlListStyle&&u.update(n.kmlListStyle,t),n.kmlBalloonStyle&&l.update(n.kmlBalloonStyle,t),n.kmlLabelStyle&&a.update(n.kmlLabelStyle,t),n.kmlPolyStyle&&i.update(n.kmlPolyStyle,t),n.kmlLineStyle&&s.update(n.kmlLineStyle,t),t},d.prototype.getStyle=function(){var t=this;return new h((function(e){window.setTimeout((function(){e(t)}),0)}))},d.prototype.getTagNames=function(){return["Style"]},r.addKey(d.prototype.getTagNames()[0],d),d.placemarkAttributes=function(e){return(e=e||{})._imageColor=e._imageColor||new t(1,1,1,1),e._imageOffset=e._imageOffset||new c(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,.5),e._imageScale=e._imageScale||1,e._imageSource=e._imageSource||null,e._depthTest=e._depthTest||!0,e._labelAttributes=e._labelAttributes||new p(d.textAttributes()),e._drawLeaderLine=e._drawLeaderLine||!1,e._leaderLineAttributes=e._leaderLineAttributes||new f(d.shapeAttributes()),e},d.textAttributes=function(n){return(n=n||{})._color=n._color||new t(1,1,1,1),n._font=n._font||new e(14),n._offset=n._offset||new c(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,0),n._scale=n._scale||1,n._depthTest=n._depthTest||!1,n._outlineColor=n._outlineColor||t.RED,n},d.shapeAttributes=function(e){return(e=e||{})._drawInterior=e._drawInterior||!0,e._drawOutline=e._drawOutline||!0,e._enableLighting=e._enableLighting||!1,e._interiorColor=e._interiorColor||t.WHITE,e._outlineColor=e._outlineColor||t.RED,e._outlineWidth=e._outlineWidth||1,e._outlineStippleFactor=e._outlineStippleFactor||0,e._outlineStipplePattern=e._outlineStipplePattern||61680,e._imageSource=e._imageSource||null,e._depthTest=e._depthTest||!0,e._drawVerticals=e._drawVerticals||!1,e._applyLighting=e._applyLighting||!1,e},d.default=function(){return new d({objectNode:document.createElement("Style")})},d})),i("formats/kml/util/KmlPair",["./../KmlElements","../KmlObject","../styles/KmlStyleSelector","./KmlNodeTransformers"],(function(t,e,n,r){"use strict";var i=function(t){e.call(this,t)};return i.prototype=Object.create(e.prototype),Object.defineProperties(i.prototype,{kmlKey:{get:function(){return this._factory.specific(this,{name:"key",transformer:r.string})}},kmlStyleUrl:{get:function(){return this._factory.specific(this,{name:"styleUrl",transformer:r.string})}},kmlStyleSelector:{get:function(){return this._factory.any(this,{name:n.prototype.getTagNames()})}}}),i.prototype.getTagNames=function(){return["Pair"]},i.prototype.getStyle=function(t){return t.handleRemoteStyle(this.kmlStyleUrl,this.kmlStyleSelector)},t.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/styles/KmlStyleMap",["../KmlElements","./KmlSubStyle","../util/KmlPair","../../../util/Promise"],(function(t,e,n,r){"use strict";var i=function(t){e.call(this,t)};return i.prototype=Object.create(e.prototype),Object.defineProperties(i.prototype,{kmlPairs:{get:function(){return this._factory.all(this)}},isMap:{get:function(){return!0}}}),i.prototype.resolve=function(t){var e={},n=this.kmlPairs.map((function(n){var r=n.kmlKey;return n.getStyle(t).then((function(t){e[r]=t.normal}))}));return r.all(n).then((function(){return e.normal||(e.normal=null),e.highlight||(e.highlight=null),e}))},i.prototype.getTagNames=function(){return["StyleMap"]},t.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/KmlTimeSpan",["./KmlElements","./KmlTimePrimitive","./util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(t){t.isTimeSpan=!0,e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlBegin:{get:function(){return this._factory.specific(this,{name:"begin",transformer:n.date})}},kmlEnd:{get:function(){return this._factory.specific(this,{name:"end",transformer:n.date})}}}),r.prototype.getTagNames=function(){return["TimeSpan"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/KmlTimeStamp",["./KmlElements","./KmlTimePrimitive","./util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(t){t.isTimeStamp=!0,e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlWhen:{get:function(){return this._factory.specific(this,{name:"when",transformer:n.date})}}}),r.prototype.getTagNames=function(){return["TimeStamp"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("util/jszip",[],(function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(e){return t[e]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=104)}([function(t,e,n){"use strict";function r(t){return t}function i(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}function o(t){var n=65536,r=e.getTypeOf(t),i=!0;if("uint8array"===r?i=f.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=f.applyCanBeUsed.nodebuffer),i)for(;n>1;)try{return f.stringifyByChunk(t,r,n)}catch(t){n=Math.floor(n/2)}return f.stringifyByChar(t)}function a(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}var s=n(3),u=n(44),l=n(12),c=n(88),h=n(8);e.newBlob=function(t,n){e.checkSupport("blob");try{return new Blob([t],{type:n})}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(t),r.getBlob(n)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(t,e,n){var r=[],i=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;i<o;)"array"===e||"nodebuffer"===e?r.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&1===String.fromCharCode.apply(null,l.allocBuffer(1)).length}catch(t){return!1}}()}};e.applyFromCharCode=o;var p={};p.string={string:r,array:function(t){return i(t,new Array(t.length))},arraybuffer:function(t){return p.string.uint8array(t).buffer},uint8array:function(t){return i(t,new Uint8Array(t.length))},nodebuffer:function(t){return i(t,l.allocBuffer(t.length))}},p.array={string:o,array:r,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l.newBufferFrom(t)}},p.arraybuffer={string:function(t){return o(new Uint8Array(t))},array:function(t){return a(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:r,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l.newBufferFrom(new Uint8Array(t))}},p.uint8array={string:o,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:r,nodebuffer:function(t){return l.newBufferFrom(t)}},p.nodebuffer={string:o,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return p.nodebuffer.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},nodebuffer:r},e.transformTo=function(t,n){if(n||(n=""),!t)return n;e.checkSupport(t);var r=e.getTypeOf(n);return p[r][t](n)},e.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":s.nodebuffer&&l.isBuffer(t)?"nodebuffer":s.uint8array&&t instanceof Uint8Array?"uint8array":s.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(t){if(!s[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},e.delay=function(t,e,n){c((function(){t.apply(n||null,e||[])}))},e.inherits=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n},e.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},e.prepareContent=function(t,n,r,o,a){return h.Promise.resolve(n).then((function(t){return s.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new h.Promise((function(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=function(t){n(t.target.error)},r.readAsArrayBuffer(t)})):t})).then((function(n){var l=e.getTypeOf(n);return l?("arraybuffer"===l?n=e.transformTo("uint8array",n):"string"===l&&(a?n=u.decode(n):r&&!0!==o&&(n=function(t){return i(t,s.uint8array?new Uint8Array(t.length):new Array(t.length))}(n))),n):h.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},function(t,e,n){"use strict";function r(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},t.exports=r},function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},o={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(r)},function(t,e,n){"use strict";(function(t){if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,e.nodebuffer=void 0!==t,e.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)e.blob=!1;else{var r=new ArrayBuffer(0);try{e.blob=0===new Blob([r],{type:"application/zip"}).size}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),e.blob=0===i.getBlob("application/zip").size}catch(t){e.blob=!1}}}try{e.nodestream=!!n(50).Readable}catch(t){e.nodestream=!1}}).call(this,n(10).Buffer)},function(t,e,n){"use strict";function r(t){return this instanceof r?(l.call(this,t),c.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(t)}function i(){this.allowHalfOpen||this._writableState.ended||a.nextTick(o,this)}function o(t){t.end()}var a=n(14),s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=r;var u=n(9);u.inherits=n(6);var l=n(49),c=n(21);u.inherits(r,l);for(var h=s(c.prototype),f=0;f<h.length;f++){var p=h[f];r.prototype[p]||(r.prototype[p]=c.prototype[p])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),r.prototype._destroy=function(t,e){this.push(null),this.end(),a.nextTick(e,t)}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";function r(){u.call(this,"utf-8 decode"),this.leftOver=null}function i(){u.call(this,"utf-8 encode")}for(var o=n(0),a=n(3),s=n(12),u=n(1),l=new Array(256),c=0;c<256;c++)l[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;l[254]=l[254]=1,e.utf8encode=function(t){return a.nodebuffer?s.newBufferFrom(t,"utf-8"):function(t){var e,n,r,i,o,s=t.length,u=0;for(i=0;i<s;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=a.uint8array?new Uint8Array(u):new Array(u),o=0,i=0;o<u;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e}(t)},e.utf8decode=function(t){return a.nodebuffer?o.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,r,i,a=t.length,s=new Array(2*a);for(n=0,e=0;e<a;)if((r=t[e++])<128)s[n++]=r;else if((i=l[r])>4)s[n++]=65533,e+=i-1;else{for(r&=2===i?31:3===i?15:7;i>1&&e<a;)r=r<<6|63&t[e++],i--;i>1?s[n++]=65533:r<65536?s[n++]=r:(r-=65536,s[n++]=55296|r>>10&1023,s[n++]=56320|1023&r)}return s.length!==n&&(s.subarray?s=s.subarray(0,n):s.length=n),o.applyFromCharCode(s)}(t=o.transformTo(a.uint8array?"uint8array":"array",t))},o.inherits(r,u),r.prototype.processChunk=function(t){var n=o.transformTo(a.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var r=n;(n=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),n.set(r,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var i=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+l[t[n]]>e?n:e}(n),s=n;i!==n.length&&(a.uint8array?(s=n.subarray(0,i),this.leftOver=n.subarray(i,n.length)):(s=n.slice(0,i),this.leftOver=n.slice(i,n.length))),this.push({data:e.utf8decode(s),meta:t.meta})},r.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=r,o.inherits(i,u),i.prototype.processChunk=function(t){this.push({data:e.utf8encode(t.data),meta:t.meta})},e.Utf8EncodeWorker=i},function(t,e,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:n(74),t.exports={Promise:r}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(10).Buffer)},function(t,e,n){"use strict";(function(t){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=o.prototype:(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return a(this,t,e,n)}function a(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),o.TYPED_ARRAY_SUPPORT?(t=e).__proto__=o.prototype:t=l(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(e,n),a=(t=i(t,r)).write(e,n);return a!==r&&(t=t.slice(0,a)),t}(t,e,n):function(t,e){if(o.isBuffer(e)){var n=0|c(e.length);return 0===(t=i(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?i(t,0):l(t,e);if("Buffer"===e.type&&B(e.data))return l(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(s(e),t=i(t,e<0?0:0|c(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e){var n=e.length<0?0:0|c(e.length);t=i(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function c(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function h(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return k(t).length;default:if(r)return D(t).length;e=(""+e).toLowerCase(),r=!0}}function f(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function p(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:d(t,e,n,r,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):d(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function d(t,e,n,r,i){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var a,s=1,u=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,u/=2,l/=2,n/=2}if(i){var c=-1;for(a=n;a<u;a++)if(o(t,a)===o(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*s}else-1!==c&&(a-=a-c),c=-1}else for(n+l>u&&(n=u-l),a=n;a>=0;a--){for(var h=!0,f=0;f<l;f++)if(o(t,a+f)!==o(e,f)){h=!1;break}if(h)return a}return-1}function g(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function m(t,e,n,r){return F(D(e,t.length-n),t,n,r)}function y(t,e,n,r){return F(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function v(t,e,n,r){return y(t,e,n,r)}function E(t,e,n,r){return F(k(e),t,n,r)}function _(t,e,n,r){return F(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function b(t,e,n){return 0===e&&n===t.length?V.fromByteArray(t):V.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,l=t[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=U)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=U));return n}(r)}function w(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function x(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function T(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=N(t[o]);return i}function L(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function A(t,e,n,r,i,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function O(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(t,e,n,r,i){return i||O(t,0,n,4),j.write(t,e,n,r,23,4),n+4}function I(t,e,n,r,i){return i||O(t,0,n,8),j.write(t,e,n,r,52,8),n+8}function N(t){return t<16?"0"+t.toString(16):t.toString(16)}function D(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function k(t){return V.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(G,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}var V=n(102),j=n(101),B=n(51);e.Buffer=o,e.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=r(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,n){return a(null,t,e,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,n){return function(t,e,n,r){return s(e),e<=0?i(t,e):void 0!==n?"string"==typeof r?i(t,e).fill(n,r):i(t,e).fill(n):i(t,e)}(null,t,e,n)},o.allocUnsafe=function(t){return u(null,t)},o.allocUnsafeSlow=function(t){return u(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!B(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=o.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=h,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)f(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)f(this,e,e+3),f(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)f(this,e,e+7),f(this,e+1,e+6),f(this,e+2,e+5),f(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return w(this,e,n);case"latin1":case"binary":return x(this,e,n);case"base64":return b(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,n,r,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),u=Math.min(a,s),l=this.slice(r,i),c=t.slice(e,n),h=0;h<u;++h)if(l[h]!==c[h]){a=l[h],s=c[h];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},o.prototype.indexOf=function(t,e,n){return p(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return p(this,t,e,n,!1)},o.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return g(this,t,e,n);case"utf8":case"utf-8":return m(this,t,e,n);case"ascii":return y(this,t,e,n);case"latin1":case"binary":return v(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var U=4096;o.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),o.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=o.prototype;else{var i=e-t;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},o.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},o.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},o.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},o.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),j.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),j.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),j.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),j.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||A(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},o.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||A(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);A(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);A(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,n){return P(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return P(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return I(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return I(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},o.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=o.isBuffer(t)?t:D(new o(t,r).toString()),u=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%u]}return this};var G=/[^+\/0-9A-Za-z-_]/g}).call(this,n(5))},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";(function(e){t.exports={isNode:void 0!==e,newBufferFrom:function(t,n){return new e(t,n)},allocBuffer:function(t){return e.alloc?e.alloc(t):new e(t)},isBuffer:function(t){return e.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}}).call(this,n(10).Buffer)},function(t,e,n){function r(t,e){for(var n in t)e[n]=t[n]}function i(t,e,n){return a(t,e,n)}var o=n(10),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=o:(r(o,e),e.Buffer=i),r(a,i),i.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return a(t,e,n)},i.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=a(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return a(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},function(t,e,n){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,n(15))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(){d&&f&&(d=!1,f.length?p=f.concat(p):g=-1,p.length&&a())}function a(){if(!d){var t=i(o);d=!0;for(var e=p.length;e;){for(f=p,p=[];++g<e;)f&&f[g].run();g=-1,e=p.length}f=null,d=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function s(t,e){this.fun=t,this.array=e}function u(){}var l,c,h=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(t){c=r}}();var f,p=[],d=!1,g=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new s(t,e)),1!==p.length||d||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){"use strict";var r=n(0),i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e){return void 0!==t&&t.length?"string"!==r.getTypeOf(t)?function(t,e,n,r){var o=i,a=0+n;t^=-1;for(var s=0;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}(0|e,t,t.length):function(t,e,n,r){var o=i,a=0+n;t^=-1;for(var s=0;s<a;s++)t=t>>>8^o[255&(t^e.charCodeAt(s))];return-1^t}(0|e,t,t.length):0}},function(t,e,n){"use strict";function r(t,e,n,r,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=r,this.compressedContent=i}var i=n(8),o=n(37),a=n(36),s=n(35);a=n(36),r.prototype={getContentWorker:function(){var t=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},r.createWorkerFrom=function(t,e,n){return t.pipe(new s).pipe(new a("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",e)},t.exports=r},function(t,e,n){t.exports=!n(41)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";(function(e,r,i){function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(void 0),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}function a(){}function s(t,e){m=m||n(4),t=t||{};var r=e instanceof m;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,a=t.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(g.nextTick(i,r),g.nextTick(d,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),d(t,e))}(t,n,r,e,i);else{var o=f(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||h(t,n),r?y(c,t,n,o,i):c(t,n,o,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function u(t){return m=m||n(4),E.call(u,this)||this instanceof m?(this._writableState=new s(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),void b.call(this)):new u(t)}function l(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function c(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),d(t,e)}function h(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),a=e.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,l(t,e,!0,e.length,i,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,h=n.encoding,f=n.callback;if(l(t,e,!1,e.objectMode?1:c.length,c,h,f),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function f(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function p(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),d(t,e)}))}function d(t,e){var n=f(e);return n&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,g.nextTick(p,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}var g=n(14);t.exports=u;var m,y=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:g.nextTick;u.WritableState=s;var v=n(9);v.inherits=n(6);var E,_={deprecate:n(94)},b=n(48),S=n(13).Buffer,w=i.Uint8Array||function(){},x=n(47);v.inherits(u,b),s.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(s.prototype,"buffer",{get:_.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(t){return!!E.call(this,t)||this===u&&t&&t._writableState instanceof s}})):E=function(t){return t instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(t,e,n){var r=this._writableState,i=!1,o=!r.objectMode&&function(t){return S.isBuffer(t)||t instanceof w}(t);return o&&!S.isBuffer(t)&&(t=function(t){return S.from(t)}(t)),"function"==typeof e&&(n=e,e=null),o?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=a),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),g.nextTick(e,n)}(this,n):(o||function(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),g.nextTick(r,o),i=!1),i}(this,r,t,n))&&(r.pendingcb++,i=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=S.from(e,n)),e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else l(t,e,!1,s,r,i,o);return u}(this,r,o,t,e,n)),i},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||h(this,t))},u.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),u.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,d(t,e),n&&(e.finished?g.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),u.prototype.destroy=x.destroy,u.prototype._undestroy=x.undestroy,u.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(15),n(96).setImmediate,n(5))},function(t,e,n){(e=t.exports=n(49)).Stream=e,e.Readable=e,e.Writable=n(21),e.Duplex=n(4),e.Transform=n(45),e.PassThrough=n(93)},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,a,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(l=n.slice()).length,u=0;u<a;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var a;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";function r(t){i.call(this,t)}var i=n(26);n(0).inherits(r,i),r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=r},function(t,e,n){"use strict";function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}var i=n(0);r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},t.exports=r},function(t,e,n){"use strict";function r(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}var i=n(25);n(0).inherits(r,i),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=r},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(26),a=n(54),s=n(53),u=n(24);t.exports=function(t){var e=r.getTypeOf(t);return r.checkSupport(e),"string"!==e||i.uint8array?"nodebuffer"===e?new s(t):i.uint8array?new u(r.transformTo("uint8array",t)):new o(r.transformTo("array",t)):new a(t)}},function(t,e,n){"use strict";e.LOCAL_FILE_HEADER="PK\x03\x04",e.CENTRAL_FILE_HEADER="PK\x01\x02",e.CENTRAL_DIRECTORY_END="PK\x05\x06",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",e.DATA_DESCRIPTOR="PK\x07\b"},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";function r(t,e){if(e<65537&&(t.subarray&&a||!t.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}var i=n(2),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(t){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){a=!1}for(var s=new i.Buf8(256),u=0;u<256;u++)s[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;s[254]=s[254]=1,e.string2buf=function(t){var e,n,r,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=new i.Buf8(u),a=0,o=0;a<u;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},e.buf2binstring=function(t){return r(t,t.length)},e.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,i,o,a,u=e||t.length,l=new Array(2*u);for(i=0,n=0;n<u;)if((o=t[n++])<128)l[i++]=o;else if((a=s[o])>4)l[i++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&n<u;)o=o<<6|63&t[n++],a--;a>1?l[i++]=65533:o<65536?l[i++]=o:(o-=65536,l[i++]=55296|o>>10&1023,l[i++]=56320|1023&o)}return r(l,i)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+s[t[n]]>e?n:e}},function(t,e,n){"use strict";var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,i){var o=r,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},function(t,e,n){"use strict";t.exports=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+e[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},function(t,e,n){"use strict";var r=n(1);e.STORE={magic:"\0\0",compressWorker:function(t){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},e.DEFLATE=n(68)},function(t,e,n){"use strict";function r(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var i=n(1),o=n(17);n(0).inherits(r,i),r.prototype.processChunk=function(t){this.streamInfo.crc32=o(t.data,this.streamInfo.crc32||0),this.push(t)},t.exports=r},function(t,e,n){"use strict";function r(t){o.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}var i=n(0),o=n(1);i.inherits(r,o),r.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}o.prototype.processChunk.call(this,t)},t.exports=r},function(t,e,n){"use strict";function r(t){o.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}var i=n(0),o=n(1);i.inherits(r,o),r.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=r},function(t,e,n){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},function(t,e,n){"use strict";(function(e){function r(t,e,n){var r=e;switch(e){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=e,this._mimeType=n,i.checkSupport(r),this._worker=t.pipe(new o(r)),t.lock()}catch(t){this._worker=new a("error"),this._worker.error(t)}}var i=n(0),o=n(72),a=n(1),s=n(44),u=n(3),l=n(8),c=null;if(u.nodestream)try{c=n(71)}catch(t){}r.prototype={accumulate:function(t){return function(t,n){return new l.Promise((function(r,o){var a=[],u=t._internalType,l=t._outputType,c=t._mimeType;t.on("data",(function(t,e){a.push(t),n&&n(e)})).on("error",(function(t){a=[],o(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return i.newBlob(i.transformTo("arraybuffer",e),n);case"base64":return s.encode(e);default:return i.transformTo(t,e)}}(l,function(t,n){var r,i=0,o=null,a=0;for(r=0;r<n.length;r++)a+=n[r].length;switch(t){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(o=new Uint8Array(a),r=0;r<n.length;r++)o.set(n[r],i),i+=n[r].length;return o;case"nodebuffer":return e.concat(n);default:throw new Error("concat : unsupported type '"+t+"'")}}(u,a),c);r(t)}catch(t){o(t)}a=[]})).resume()}))}(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){i.delay(e,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},t)}},t.exports=r}).call(this,n(10).Buffer)},function(t,e,n){var r=n(20),i=n(11).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(85);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){var n=t.exports={version:"2.3.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";var r=n(0),i=n(3),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(t){for(var e,n,i,a,s,u,l,c=[],h=0,f=t.length,p=f,d="string"!==r.getTypeOf(t);h<t.length;)p=f-h,d?(e=t[h++],n=h<f?t[h++]:0,i=h<f?t[h++]:0):(e=t.charCodeAt(h++),n=h<f?t.charCodeAt(h++):0,i=h<f?t.charCodeAt(h++):0),a=e>>2,s=(3&e)<<4|n>>4,u=p>1?(15&n)<<2|i>>6:64,l=p>2?63&i:64,c.push(o.charAt(a)+o.charAt(s)+o.charAt(u)+o.charAt(l));return c.join("")},e.decode=function(t){var e,n,r,a,s,u,l=0,c=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var h,f=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&f--,t.charAt(t.length-2)===o.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|f):new Array(0|f);l<t.length;)e=o.indexOf(t.charAt(l++))<<2|(a=o.indexOf(t.charAt(l++)))>>4,n=(15&a)<<4|(s=o.indexOf(t.charAt(l++)))>>2,r=(3&s)<<6|(u=o.indexOf(t.charAt(l++))),h[c++]=e,64!==s&&(h[c++]=n),64!==u&&(h[c++]=r);return h}},function(t,e,n){"use strict";function r(t){return this instanceof r?(a.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),void this.on("prefinish",i)):new r(t)}function i(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){o(t,e,n)})):o(this,null,null)}function o(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}t.exports=r;var a=n(4),s=n(9);s.inherits=n(6),s.inherits(r,a),r.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},r.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},r.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},r.prototype._destroy=function(t,e){var n=this;a.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},function(t,e,n){"use strict";function r(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(f.isEncoding===p||!p(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=a,this.end=s,e=4;break;case"utf8":this.fillLast=o,e=4;break;case"base64":this.text=u,this.end=l,e=3;break;default:return this.write=c,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=f.allocUnsafe(e)}function i(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function o(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function a(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function s(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function u(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function l(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function c(t){return t.toString(this.encoding)}function h(t){return t&&t.length?this.write(t):""}var f=n(13).Buffer,p=f.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};e.StringDecoder=r,r.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},r.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},r.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var o=i(e[r]);return o>=0?(o>0&&(t.lastNeed=o-1),o):--r<n||-2===o?0:(o=i(e[r]))>=0?(o>0&&(t.lastNeed=o-2),o):--r<n||-2===o?0:(o=i(e[r]))>=0?(o>0&&(2===o?o=0:t.lastNeed=o-3),o):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},r.prototype.fillLast=function(t){return this.lastNeed<=t.length?(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),void(this.lastNeed-=t.length))}},function(t,e,n){"use strict";function r(t,e){t.emit("error",e)}var i=n(14);t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||i.nextTick(r,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(i.nextTick(r,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){t.exports=n(23).EventEmitter},function(t,e,n){"use strict";(function(e,r){function i(t,e){t=t||{};var r=e instanceof(b=b||n(4));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new O,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(R||(R=n(46).StringDecoder),this.decoder=new R(t.encoding),this.encoding=t.encoding)}function o(t){return b=b||n(4),this instanceof o?(this._readableState=new i(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),void x.call(this)):new o(t)}function a(t,e,n,r,i){var o,a=t._readableState;return null===e?(a.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,l(t)}}(t,a)):(i||(o=function(t,e){var n;return function(t){return T.isBuffer(t)||t instanceof L}(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===T.prototype||(e=function(t){return T.from(t)}(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):s(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?s(t,a,e,!1):h(t,a)):s(t,a,e,!1))):r||(a.reading=!1)),function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function s(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&l(t)),h(t,e)}function u(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=N?t=N:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function l(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(M("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?_.nextTick(c,t):c(t))}function c(t){M("emit readable"),t.emit("readable"),g(t)}function h(t,e){e.readingMore||(e.readingMore=!0,_.nextTick(f,t,e))}function f(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(M("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function p(t){M("readable nexttick read 0"),t.read(0)}function d(t,e){e.reading||(M("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),g(t),e.flowing&&!e.reading&&t.read(0)}function g(t){var e=t._readableState;for(M("flow",e.flowing);e.flowing&&null!==t.read(););}function m(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(i+=a===o.length?o:o.slice(0,t),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=T.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e),r}(t,e.buffer,e.decoder),n);var n}function y(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,_.nextTick(v,e,t))}function v(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function E(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}var _=n(14);t.exports=o;var b,S=n(51);o.ReadableState=i,n(23).EventEmitter;var w=function(t,e){return t.listeners(e).length},x=n(48),T=n(13).Buffer,L=e.Uint8Array||function(){},C=n(9);C.inherits=n(6);var A=n(99),M=void 0;M=A&&A.debuglog?A.debuglog("stream"):function(){};var R,O=n(98),P=n(47);C.inherits(o,x);var I=["error","close","destroy","pause","resume"];Object.defineProperty(o.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),o.prototype.destroy=P.destroy,o.prototype._undestroy=P.undestroy,o.prototype._destroy=function(t,e){this.push(null),e(t)},o.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=T.from(t,e),e=""),n=!0),a(this,t,e,!1,n)},o.prototype.unshift=function(t){return a(this,t,null,!0,!1)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(t){return R||(R=n(46).StringDecoder),this._readableState.decoder=new R(t),this._readableState.encoding=t,this};var N=8388608;o.prototype.read=function(t){M("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return M("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?y(this):l(this),null;if(0===(t=u(t,e))&&e.ended)return 0===e.length&&y(this),null;var r,i=e.needReadable;return M("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&M("length less than watermark",i=!0),e.ended||e.reading?M("reading or ended",i=!1):i&&(M("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=u(n,e))),null===(r=t>0?m(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&y(this)),null!==r&&this.emit("data",r),r},o.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(t,e){function n(){M("onend"),t.end()}function i(e){M("ondata"),d=!1,!1!==t.write(e)||d||((1===c.pipesCount&&c.pipes===t||c.pipesCount>1&&-1!==E(c.pipes,t))&&!p&&(M("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,d=!0),l.pause())}function o(e){M("onerror",e),u(),t.removeListener("error",o),0===w(t,"error")&&t.emit("error",e)}function a(){t.removeListener("finish",s),u()}function s(){M("onfinish"),t.removeListener("close",a),u()}function u(){M("unpipe"),l.unpipe(t)}var l=this,c=this._readableState;switch(c.pipesCount){case 0:c.pipes=t;break;case 1:c.pipes=[c.pipes,t];break;default:c.pipes.push(t)}c.pipesCount+=1,M("pipe count=%d opts=%j",c.pipesCount,e);var h=e&&!1===e.end||t===r.stdout||t===r.stderr?u:n;c.endEmitted?_.nextTick(h):l.once("end",h),t.on("unpipe",(function e(r,h){M("onunpipe"),r===l&&h&&!1===h.hasUnpiped&&(h.hasUnpiped=!0,M("cleanup"),t.removeListener("close",a),t.removeListener("finish",s),t.removeListener("drain",f),t.removeListener("error",o),t.removeListener("unpipe",e),l.removeListener("end",n),l.removeListener("end",u),l.removeListener("data",i),p=!0,!c.awaitDrain||t._writableState&&!t._writableState.needDrain||f())}));var f=function(t){return function(){var e=t._readableState;M("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&w(t,"data")&&(e.flowing=!0,g(t))}}(l);t.on("drain",f);var p=!1,d=!1;return l.on("data",i),function(t,e,n){"function"==typeof t.prependListener?t.prependListener(e,n):t._events&&t._events[e]?S(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",o),t.once("close",a),t.once("finish",s),t.emit("pipe",l),c.flowing||(M("pipe resume"),l.resume()),t},o.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=E(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},o.prototype.on=function(t,e){var n=x.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&l(this):_.nextTick(p,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var t=this._readableState;return t.flowing||(M("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,_.nextTick(d,t,e))}(this,t)),this},o.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(M("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){M("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<I.length;o++)t.on(I[o],this.emit.bind(this,I[o]));return this._read=function(e){M("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(o.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),o._fromList=m}).call(this,n(5),n(15))},function(t,e,n){t.exports=n(100)},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";function r(t,e){this.options=t,this.loadOptions=e}var i=n(27),o=n(0),a=n(18),s=n(17),u=n(7),l=n(34),c=n(3);r.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in l)if(l.hasOwnProperty(e)&&l[e].magic===t)return l[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<i;)e=t.readInt(2),n=t.readInt(2),r=t.readData(n),this.extraFields[e]={id:e,length:n,value:r}},handleUTF8:function(){var t=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=o.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=o.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)||s(this.fileName)!==e.readInt(4)?null:u.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)||s(this.fileComment)!==e.readInt(4)?null:u.utf8decode(e.readData(t.length-5))}return null}},t.exports=r},function(t,e,n){"use strict";function r(t){i.call(this,t)}var i=n(24);n(0).inherits(r,i),r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=r},function(t,e,n){"use strict";function r(t){i.call(this,t)}var i=n(25);n(0).inherits(r,i),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=r},function(t,e,n){"use strict";function r(t){this.files=[],this.loadOptions=t}var i=n(27),o=n(0),a=n(28),s=n(52),u=(n(7),n(3));r.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(e)+", expected "+o.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var r=this.reader.readString(4)===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=u.uint8array?"uint8array":"array",n=o.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(t=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=e-n;if(r>0)this.isSignature(e,a.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=r},function(t,e,n){"use strict";function r(t){return new o.Promise((function(e,n){var r=t.decompressed.getContentWorker().pipe(new u);r.on("error",(function(t){n(t)})).on("end",(function(){r.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}var i=n(0),o=n(8),a=n(7),s=(i=n(0),n(55)),u=n(35),l=n(12);t.exports=function(t,e){var n=this;return e=i.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(t)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new s(e);return n.load(t),n})).then((function(t){var n=[o.Promise.resolve(t)],i=t.files;if(e.checkCRC32)for(var a=0;a<i.length;a++)n.push(r(i[a]));return o.Promise.all(n)})).then((function(t){for(var r=t.shift(),i=r.files,o=0;o<i.length;o++){var a=i[o];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},function(t,e,n){"use strict";function r(t,e){o.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}var i=n(0),o=n(1);i.inherits(r,o),r.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},r.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var i=n(0),o=n(1),a=n(7),s=n(17),u=n(28),l=function(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r},c=function(t,e,n,r,o,c){var h,f,p=t.file,d=t.compression,g=c!==a.utf8encode,m=i.transformTo("string",c(p.name)),y=i.transformTo("string",a.utf8encode(p.name)),v=p.comment,E=i.transformTo("string",c(v)),_=i.transformTo("string",a.utf8encode(v)),b=y.length!==p.name.length,S=_.length!==v.length,w="",x="",T="",L=p.dir,C=p.date,A={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(A.crc32=t.crc32,A.compressedSize=t.compressedSize,A.uncompressedSize=t.uncompressedSize);var M=0;e&&(M|=8),g||!b&&!S||(M|=2048);var R=0,O=0;L&&(R|=16),"UNIX"===o?(O=798,R|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(p.unixPermissions,L)):(O=20,R|=function(t,e){return 63&(t||0)}(p.dosPermissions)),h=C.getUTCHours(),h<<=6,h|=C.getUTCMinutes(),h<<=5,h|=C.getUTCSeconds()/2,f=C.getUTCFullYear()-1980,f<<=4,f|=C.getUTCMonth()+1,f<<=5,f|=C.getUTCDate(),b&&(x=l(1,1)+l(s(m),4)+y,w+="up"+l(x.length,2)+x),S&&(T=l(1,1)+l(s(E),4)+_,w+="uc"+l(T.length,2)+T);var P="";return P+="\n\0",P+=l(M,2),P+=d.magic,P+=l(h,2),P+=l(f,2),P+=l(A.crc32,4),P+=l(A.compressedSize,4),P+=l(A.uncompressedSize,4),P+=l(m.length,2),P+=l(w.length,2),{fileRecord:u.LOCAL_FILE_HEADER+P+m+w,dirRecord:u.CENTRAL_FILE_HEADER+l(O,2)+P+l(E.length,2)+"\0\0\0\0"+l(R,4)+l(r,4)+m+w+E}};i.inherits(r,o),r.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,o.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-r-1))/n:100}}))},r.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=c(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},r.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=c(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return u.DATA_DESCRIPTOR+l(t.crc32,4)+l(t.compressedSize,4)+l(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},r.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,r=function(t,e,n,r,o){var a=i.transformTo("string",o(r));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(t,2)+l(t,2)+l(e,4)+l(n,4)+l(a.length,2)+a}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},r.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},r.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},r.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},r.prototype.error=function(t){var e=this._sources;if(!o.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},r.prototype.lock=function(){o.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},t.exports=r},function(t,e,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,n){"use strict";var r=n(2),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,u,l,c,h,f){var p,d,g,m,y,v,E,_,b,S=f.bits,w=0,x=0,T=0,L=0,C=0,A=0,M=0,R=0,O=0,P=0,I=null,N=0,D=new r.Buf16(16),k=new r.Buf16(16),F=null,V=0;for(w=0;w<=15;w++)D[w]=0;for(x=0;x<u;x++)D[e[n+x]]++;for(C=S,L=15;L>=1&&0===D[L];L--);if(C>L&&(C=L),0===L)return l[c++]=20971520,l[c++]=20971520,f.bits=1,0;for(T=1;T<L&&0===D[T];T++);for(C<T&&(C=T),R=1,w=1;w<=15;w++)if(R<<=1,(R-=D[w])<0)return-1;if(R>0&&(0===t||1!==L))return-1;for(k[1]=0,w=1;w<15;w++)k[w+1]=k[w]+D[w];for(x=0;x<u;x++)0!==e[n+x]&&(h[k[e[n+x]]++]=x);if(0===t?(I=F=h,v=19):1===t?(I=i,N-=257,F=o,V-=257,v=256):(I=a,F=s,v=-1),P=0,x=0,w=T,y=c,A=C,M=0,g=-1,m=(O=1<<C)-1,1===t&&O>852||2===t&&O>592)return 1;for(;;){E=w-M,h[x]<v?(_=0,b=h[x]):h[x]>v?(_=F[V+h[x]],b=I[N+h[x]]):(_=96,b=0),p=1<<w-M,T=d=1<<A;do{l[y+(P>>M)+(d-=p)]=E<<24|_<<16|b|0}while(0!==d);for(p=1<<w-1;P&p;)p>>=1;if(0!==p?(P&=p-1,P+=p):P=0,x++,0==--D[w]){if(w===L)break;w=e[n+h[x]]}if(w>C&&(P&m)!==g){for(0===M&&(M=C),y+=T,R=1<<(A=w-M);A+M<L&&!((R-=D[A+M])<=0);)A++,R<<=1;if(O+=1<<A,1===t&&O>852||2===t&&O>592)return 1;l[g=P&m]=C<<24|A<<16|y-c|0}}return 0!==P&&(l[y+P]=w-M<<24|64<<16|0),f.bits=C,0}},function(t,e,n){"use strict";t.exports=function(t,e){var n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_,b,S,w,x,T,L;n=t.state,r=t.next_in,T=t.input,i=r+(t.avail_in-5),o=t.next_out,L=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=n.dmax,l=n.wsize,c=n.whave,h=n.wnext,f=n.window,p=n.hold,d=n.bits,g=n.lencode,m=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{d<15&&(p+=T[r++]<<d,d+=8,p+=T[r++]<<d,d+=8),E=g[p&y];e:for(;;){if(p>>>=_=E>>>24,d-=_,0===(_=E>>>16&255))L[o++]=65535&E;else{if(!(16&_)){if(0==(64&_)){E=g[(65535&E)+(p&(1<<_)-1)];continue e}if(32&_){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}b=65535&E,(_&=15)&&(d<_&&(p+=T[r++]<<d,d+=8),b+=p&(1<<_)-1,p>>>=_,d-=_),d<15&&(p+=T[r++]<<d,d+=8,p+=T[r++]<<d,d+=8),E=m[p&v];n:for(;;){if(p>>>=_=E>>>24,d-=_,!(16&(_=E>>>16&255))){if(0==(64&_)){E=m[(65535&E)+(p&(1<<_)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(S=65535&E,d<(_&=15)&&(p+=T[r++]<<d,(d+=8)<_&&(p+=T[r++]<<d,d+=8)),(S+=p&(1<<_)-1)>u){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=_,d-=_,S>(_=o-a)){if((_=S-_)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(w=0,x=f,0===h){if(w+=l-_,_<b){b-=_;do{L[o++]=f[w++]}while(--_);w=o-S,x=L}}else if(h<_){if(w+=l+h-_,(_-=h)<b){b-=_;do{L[o++]=f[w++]}while(--_);if(w=0,h<b){b-=_=h;do{L[o++]=f[w++]}while(--_);w=o-S,x=L}}}else if(w+=h-_,_<b){b-=_;do{L[o++]=f[w++]}while(--_);w=o-S,x=L}for(;b>2;)L[o++]=x[w++],L[o++]=x[w++],L[o++]=x[w++],b-=3;b&&(L[o++]=x[w++],b>1&&(L[o++]=x[w++]))}else{w=o-S;do{L[o++]=L[w++],L[o++]=L[w++],L[o++]=L[w++],b-=3}while(b>2);b&&(L[o++]=L[w++],b>1&&(L[o++]=L[w++]))}break}}break}}while(r<i&&o<s);r-=b=d>>3,p&=(1<<(d-=b<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=d}},function(t,e,n){"use strict";function r(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=b,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new f.Buf32(w),e.distcode=e.distdyn=new f.Buf32(x),e.sane=1,e.back=-1,E):_}function o(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,i(t)):_}function a(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,o(t))):_}function s(t,e){var n,r;return t?(r=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},t.state=r,r.window=null,(n=a(t,e))!==E&&(t.state=null),n):_}function u(t){if(T){var e;for(c=new f.Buf32(512),h=new f.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(m(y,t.lens,0,288,c,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;m(v,t.lens,0,32,h,0,t.work,{bits:5}),T=!1}t.lencode=c,t.lenbits=9,t.distcode=h,t.distbits=5}function l(t,e,n,r){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new f.Buf8(o.wsize)),r>=o.wsize?(f.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),f.arraySet(o.window,e,n-r,i,o.wnext),(r-=i)?(f.arraySet(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}var c,h,f=n(2),p=n(33),d=n(32),g=n(61),m=n(60),y=1,v=2,E=0,_=-2,b=1,S=12,w=852,x=592,T=!0;e.inflateReset=o,e.inflateReset2=a,e.inflateResetKeep=i,e.inflateInit=function(t){return s(t,15)},e.inflateInit2=s,e.inflate=function(t,e){var n,i,o,a,s,c,h,w,x,T,L,C,A,M,R,O,P,I,N,D,k,F,V,j,B=0,U=new f.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return _;(n=t.state).mode===S&&(n.mode=13),s=t.next_out,o=t.output,h=t.avail_out,a=t.next_in,i=t.input,c=t.avail_in,w=n.hold,x=n.bits,T=c,L=h,F=E;t:for(;;)switch(n.mode){case b:if(0===n.wrap){n.mode=13;break}for(;x<16;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}if(2&n.wrap&&35615===w){n.check=0,U[0]=255&w,U[1]=w>>>8&255,n.check=d(n.check,U,2,0),w=0,x=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&w)<<8)+(w>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!==(15&w)){t.msg="unknown compression method",n.mode=30;break}if(x-=4,k=8+(15&(w>>>=4)),0===n.wbits)n.wbits=k;else if(k>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<k,t.adler=n.check=1,n.mode=512&w?10:S,w=0,x=0;break;case 2:for(;x<16;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}if(n.flags=w,8!==(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=w>>8&1),512&n.flags&&(U[0]=255&w,U[1]=w>>>8&255,n.check=d(n.check,U,2,0)),w=0,x=0,n.mode=3;case 3:for(;x<32;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}n.head&&(n.head.time=w),512&n.flags&&(U[0]=255&w,U[1]=w>>>8&255,U[2]=w>>>16&255,U[3]=w>>>24&255,n.check=d(n.check,U,4,0)),w=0,x=0,n.mode=4;case 4:for(;x<16;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}n.head&&(n.head.xflags=255&w,n.head.os=w>>8),512&n.flags&&(U[0]=255&w,U[1]=w>>>8&255,n.check=d(n.check,U,2,0)),w=0,x=0,n.mode=5;case 5:if(1024&n.flags){for(;x<16;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}n.length=w,n.head&&(n.head.extra_len=w),512&n.flags&&(U[0]=255&w,U[1]=w>>>8&255,n.check=d(n.check,U,2,0)),w=0,x=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((C=n.length)>c&&(C=c),C&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),f.arraySet(n.head.extra,i,a,C,k)),512&n.flags&&(n.check=d(n.check,i,C,a)),c-=C,a+=C,n.length-=C),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===c)break t;C=0;do{k=i[a+C++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&C<c);if(512&n.flags&&(n.check=d(n.check,i,C,a)),c-=C,a+=C,k)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===c)break t;C=0;do{k=i[a+C++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&C<c);if(512&n.flags&&(n.check=d(n.check,i,C,a)),c-=C,a+=C,k)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;x<16;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}if(w!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}w=0,x=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=S;break;case 10:for(;x<32;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}t.adler=n.check=r(w),w=0,x=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=s,t.avail_out=h,t.next_in=a,t.avail_in=c,n.hold=w,n.bits=x,2;t.adler=n.check=1,n.mode=S;case S:if(5===e||6===e)break t;case 13:if(n.last){w>>>=7&x,x-=7&x,n.mode=27;break}for(;x<3;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}switch(n.last=1&w,x-=1,3&(w>>>=1)){case 0:n.mode=14;break;case 1:if(u(n),n.mode=20,6===e){w>>>=2,x-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}w>>>=2,x-=2;break;case 14:for(w>>>=7&x,x-=7&x;x<32;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}if((65535&w)!=(w>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&w,w=0,x=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(C=n.length){if(C>c&&(C=c),C>h&&(C=h),0===C)break t;f.arraySet(o,i,a,C,s),c-=C,a+=C,h-=C,s+=C,n.length-=C;break}n.mode=S;break;case 17:for(;x<14;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}if(n.nlen=257+(31&w),w>>>=5,x-=5,n.ndist=1+(31&w),w>>>=5,x-=5,n.ncode=4+(15&w),w>>>=4,x-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;x<3;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}n.lens[G[n.have++]]=7&w,w>>>=3,x-=3}for(;n.have<19;)n.lens[G[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,V={bits:n.lenbits},F=m(0,n.lens,0,19,n.lencode,0,n.work,V),n.lenbits=V.bits,F){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;O=(B=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,P=65535&B,!((R=B>>>24)<=x);){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}if(P<16)w>>>=R,x-=R,n.lens[n.have++]=P;else{if(16===P){for(j=R+2;x<j;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}if(w>>>=R,x-=R,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}k=n.lens[n.have-1],C=3+(3&w),w>>>=2,x-=2}else if(17===P){for(j=R+3;x<j;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}x-=R,k=0,C=3+(7&(w>>>=R)),w>>>=3,x-=3}else{for(j=R+7;x<j;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}x-=R,k=0,C=11+(127&(w>>>=R)),w>>>=7,x-=7}if(n.have+C>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;C--;)n.lens[n.have++]=k}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,V={bits:n.lenbits},F=m(y,n.lens,0,n.nlen,n.lencode,0,n.work,V),n.lenbits=V.bits,F){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,V={bits:n.distbits},F=m(v,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,V),n.distbits=V.bits,F){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(c>=6&&h>=258){t.next_out=s,t.avail_out=h,t.next_in=a,t.avail_in=c,n.hold=w,n.bits=x,g(t,L),s=t.next_out,o=t.output,h=t.avail_out,a=t.next_in,i=t.input,c=t.avail_in,w=n.hold,x=n.bits,n.mode===S&&(n.back=-1);break}for(n.back=0;O=(B=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,P=65535&B,!((R=B>>>24)<=x);){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}if(O&&0==(240&O)){for(I=R,N=O,D=P;O=(B=n.lencode[D+((w&(1<<I+N)-1)>>I)])>>>16&255,P=65535&B,!(I+(R=B>>>24)<=x);){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}w>>>=I,x-=I,n.back+=I}if(w>>>=R,x-=R,n.back+=R,n.length=P,0===O){n.mode=26;break}if(32&O){n.back=-1,n.mode=S;break}if(64&O){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&O,n.mode=22;case 22:if(n.extra){for(j=n.extra;x<j;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}n.length+=w&(1<<n.extra)-1,w>>>=n.extra,x-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;O=(B=n.distcode[w&(1<<n.distbits)-1])>>>16&255,P=65535&B,!((R=B>>>24)<=x);){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}if(0==(240&O)){for(I=R,N=O,D=P;O=(B=n.distcode[D+((w&(1<<I+N)-1)>>I)])>>>16&255,P=65535&B,!(I+(R=B>>>24)<=x);){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}w>>>=I,x-=I,n.back+=I}if(w>>>=R,x-=R,n.back+=R,64&O){t.msg="invalid distance code",n.mode=30;break}n.offset=P,n.extra=15&O,n.mode=24;case 24:if(n.extra){for(j=n.extra;x<j;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}n.offset+=w&(1<<n.extra)-1,w>>>=n.extra,x-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===h)break t;if(C=L-h,n.offset>C){if((C=n.offset-C)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}C>n.wnext?(C-=n.wnext,A=n.wsize-C):A=n.wnext-C,C>n.length&&(C=n.length),M=n.window}else M=o,A=s-n.offset,C=n.length;C>h&&(C=h),h-=C,n.length-=C;do{o[s++]=M[A++]}while(--C);0===n.length&&(n.mode=21);break;case 26:if(0===h)break t;o[s++]=n.length,h--,n.mode=21;break;case 27:if(n.wrap){for(;x<32;){if(0===c)break t;c--,w|=i[a++]<<x,x+=8}if(L-=h,t.total_out+=L,n.total+=L,L&&(t.adler=n.check=n.flags?d(n.check,o,L,s-L):p(n.check,o,L,s-L)),L=h,(n.flags?w:r(w))!==n.check){t.msg="incorrect data check",n.mode=30;break}w=0,x=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;x<32;){if(0===c)break t;c--,w+=i[a++]<<x,x+=8}if(w!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}w=0,x=0}n.mode=29;case 29:F=1;break t;case 30:F=-3;break t;case 31:return-4;case 32:default:return _}return t.next_out=s,t.avail_out=h,t.next_in=a,t.avail_in=c,n.hold=w,n.bits=x,(n.wsize||L!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&l(t,t.output,t.next_out,L-t.avail_out)?(n.mode=31,-4):(T-=t.avail_in,L-=t.avail_out,t.total_in+=T,t.total_out+=L,n.total+=L,n.wrap&&L&&(t.adler=n.check=n.flags?d(n.check,o,L,t.next_out-L):p(n.check,o,L,t.next_out-L)),t.data_type=n.bits+(n.last?64:0)+(n.mode===S?128:0)+(20===n.mode||15===n.mode?256:0),(0===T&&0===L||4===e)&&F===E&&(F=-5),F)},e.inflateEnd=function(t){if(!t||!t.state)return _;var e=t.state;return e.window&&(e.window=null),t.state=null,E},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?_:(n.head=e,e.done=!1,E):_},e.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?_:11===n.mode&&p(1,e,r,0)!==n.check?-3:l(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,E):_},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,e.windowBits);if(n!==u.Z_OK)throw new Error(l[n]);this.header=new h,o.inflateGetHeader(this.strm,this.header)}function i(t,e){var n=new r(e);if(n.push(t,!0),n.err)throw n.msg||l[n.err];return n.result}var o=n(62),a=n(2),s=n(31),u=n(29),l=n(16),c=n(30),h=n(59),f=Object.prototype.toString;r.prototype.push=function(t,e){var n,r,i,l,c,h,p=this.strm,d=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;r=e===~~e?e:!0===e?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof t?p.input=s.binstring2buf(t):"[object ArrayBuffer]"===f.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new a.Buf8(d),p.next_out=0,p.avail_out=d),(n=o.inflate(p,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&g&&(h="string"==typeof g?s.string2buf(g):"[object ArrayBuffer]"===f.call(g)?new Uint8Array(g):g,n=o.inflateSetDictionary(this.strm,h)),n===u.Z_BUF_ERROR&&!0===m&&(n=u.Z_OK,m=!1),n!==u.Z_STREAM_END&&n!==u.Z_OK)return this.onEnd(n),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&n!==u.Z_STREAM_END&&(0!==p.avail_in||r!==u.Z_FINISH&&r!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(i=s.utf8border(p.output,p.next_out),l=p.next_out-i,c=s.buf2string(p.output,i),p.next_out=l,p.avail_out=d-l,l&&a.arraySet(p.output,p.output,i,l,0),this.onData(c)):this.onData(a.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((p.avail_in>0||0===p.avail_out)&&n!==u.Z_STREAM_END);return n===u.Z_STREAM_END&&(r=u.Z_FINISH),r===u.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u.Z_OK):r!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),p.avail_out=0,!0)},r.prototype.onData=function(t){this.chunks.push(t)},r.prototype.onEnd=function(t){t===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=r,e.inflate=i,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},e.ungzip=i},function(t,e,n){"use strict";function r(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return t<256?B[t]:B[256+(t>>>7)]}function s(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function u(t,e,n){t.bi_valid>M-n?(t.bi_buf|=e<<t.bi_valid&65535,s(t,t.bi_buf),t.bi_buf=e>>M-t.bi_valid,t.bi_valid+=n-M):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function l(t,e,n){u(t,n[2*e],n[2*e+1])}function c(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function h(t,e,n){var r,i,o=new Array(A+1),a=0;for(r=1;r<=A;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=c(o[s]++,s))}}function f(t){var e;for(e=0;e<x;e++)t.dyn_ltree[2*e]=0;for(e=0;e<T;e++)t.dyn_dtree[2*e]=0;for(e=0;e<L;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*R]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function p(t){t.bi_valid>8?s(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function d(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function g(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&d(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!d(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function m(t,e,n){var r,i,o,s,c=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],i=t.pending_buf[t.l_buf+c],c++,0===r?l(t,i,e):(l(t,(o=U[i])+w+1,e),0!==(s=N[o])&&u(t,i-=G[o],s),l(t,o=a(--r),n),0!==(s=D[o])&&u(t,r-=Y[o],s))}while(c<t.last_lit);l(t,R,e)}function y(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=C,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,n=t.heap_len>>1;n>=1;n--)g(t,o,n);i=u;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],g(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,g(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,a,s,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,g=0;for(o=0;o<=A;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<C;n++)(o=u[2*u[2*(r=t.heap[n])+1]+1]+1)>d&&(o=d,g++),u[2*r+1]=o,r>l||(t.bl_count[o]++,a=0,r>=p&&(a=f[r-p]),s=u[2*r],t.opt_len+=s*(o+a),h&&(t.static_len+=s*(c[2*r+1]+a)));if(0!==g){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,g-=2}while(g>0);for(o=d;0!==o;o--)for(r=t.bl_count[o];0!==r;)(i=t.heap[--n])>l||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(t,e),h(o,l,t.bl_count)}function v(t,e,n){var r,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<u&&i===a||(s<l?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*O]++):s<=10?t.bl_tree[2*P]++:t.bl_tree[2*I]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function E(t,e,n){var r,i,o=-1,a=e[1],s=0,c=7,h=4;for(0===a&&(c=138,h=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<c&&i===a)){if(s<h)do{l(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(l(t,i,t.bl_tree),s--),l(t,O,t.bl_tree),u(t,s-3,2)):s<=10?(l(t,P,t.bl_tree),u(t,s-3,3)):(l(t,I,t.bl_tree),u(t,s-11,7));s=0,o=i,0===a?(c=138,h=3):i===a?(c=6,h=3):(c=7,h=4)}}function _(t,e,n,r){u(t,(S<<1)+(r?1:0),3),function(t,e,n,r){p(t),s(t,n),s(t,~n),b.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}var b=n(2),S=0,w=256,x=w+1+29,T=30,L=19,C=2*x+1,A=15,M=16,R=256,O=16,P=17,I=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(x+2));r(V);var j=new Array(2*T);r(j);var B=new Array(512);r(B);var U=new Array(256);r(U);var G=new Array(29);r(G);var K,W,z,Y=new Array(T);r(Y);var H=!1;e._tr_init=function(t){H||(function(){var t,e,n,r,o,a=new Array(A+1);for(n=0,r=0;r<28;r++)for(G[r]=n,t=0;t<1<<N[r];t++)U[n++]=r;for(U[n-1]=r,o=0,r=0;r<16;r++)for(Y[r]=o,t=0;t<1<<D[r];t++)B[o++]=r;for(o>>=7;r<T;r++)for(Y[r]=o<<7,t=0;t<1<<D[r]-7;t++)B[256+o++]=r;for(e=0;e<=A;e++)a[e]=0;for(t=0;t<=143;)V[2*t+1]=8,t++,a[8]++;for(;t<=255;)V[2*t+1]=9,t++,a[9]++;for(;t<=279;)V[2*t+1]=7,t++,a[7]++;for(;t<=287;)V[2*t+1]=8,t++,a[8]++;for(h(V,x+1,a),t=0;t<T;t++)j[2*t+1]=5,j[2*t]=c(t,5);K=new i(V,N,w+1,x,A),W=new i(j,D,0,T,A),z=new i(new Array(0),k,0,L,7)}(),H=!0),t.l_desc=new o(t.dyn_ltree,K),t.d_desc=new o(t.dyn_dtree,W),t.bl_desc=new o(t.bl_tree,z),t.bi_buf=0,t.bi_valid=0,f(t)},e._tr_stored_block=_,e._tr_flush_block=function(t,e,n,r){var i,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<w;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),y(t,t.l_desc),y(t,t.d_desc),a=function(t){var e;for(v(t,t.dyn_ltree,t.l_desc.max_code),v(t,t.dyn_dtree,t.d_desc.max_code),y(t,t.bl_desc),e=L-1;e>=3&&0===t.bl_tree[2*F[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==e?_(t,e,n,r):4===t.strategy||o===i?(u(t,2+(r?1:0),3),m(t,V,j)):(u(t,4+(r?1:0),3),function(t,e,n,r){var i;for(u(t,e-257,5),u(t,n-1,5),u(t,r-4,4),i=0;i<r;i++)u(t,t.bl_tree[2*F[i]+1],3);E(t,t.dyn_ltree,e-1),E(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),m(t,t.dyn_ltree,t.dyn_dtree)),f(t),r&&p(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(U[n]+w+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){u(t,2,3),l(t,R,V),function(t){16===t.bi_valid?(s(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,n){"use strict";function r(t,e){return t.msg=x[e],e}function i(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(_.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function s(t,e){b._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function u(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function c(t,e,n,r){var i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,_.arraySet(e,t.input,t.next_in,i,n),1===t.state.wrap?t.adler=S(t.adler,e,i,n):2===t.state.wrap&&(t.adler=w(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)}function h(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-G?t.strstart-(t.w_size-G):0,l=t.window,c=t.w_mask,h=t.prev,f=t.strstart+U,p=l[o+a-1],d=l[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(l[(n=e)+a]===d&&l[n+a-1]===p&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<f);if(r=U-(f-o),o=f-U,r>a){if(t.match_start=e,a=r,r>=s)break;p=l[o+a-1],d=l[o+a]}}}while((e=h[e&c])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function f(t){var e,n,r,i,o,a=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-G)){_.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=a?r-a:0}while(--n);e=n=a;do{r=t.prev[--e],t.prev[e]=r>=a?r-a:0}while(--n);i+=a}if(0===t.strm.avail_in)break;if(n=c(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=n,t.lookahead+t.insert>=B)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+B-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<B)););}while(t.lookahead<G&&0!==t.strm.avail_in)}function p(t,e){for(var n,r;;){if(t.lookahead<G){if(f(t),t.lookahead<G&&e===T)return z;if(0===t.lookahead)break}if(n=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-G&&(t.match_length=h(t,n)),t.match_length>=B)if(r=b._tr_tally(t,t.strstart-t.match_start,t.match_length-B),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=B){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=b._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(s(t,!1),0===t.strm.avail_out))return z}return t.insert=t.strstart<B-1?t.strstart:B-1,e===L?(s(t,!0),0===t.strm.avail_out?H:q):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?z:Y}function d(t,e){for(var n,r,i;;){if(t.lookahead<G){if(f(t),t.lookahead<G&&e===T)return z;if(0===t.lookahead)break}if(n=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=B-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-G&&(t.match_length=h(t,n),t.match_length<=5&&(t.strategy===R||t.match_length===B&&t.strstart-t.match_start>4096)&&(t.match_length=B-1)),t.prev_length>=B&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-B,r=b._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-B),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=B-1,t.strstart++,r&&(s(t,!1),0===t.strm.avail_out))return z}else if(t.match_available){if((r=b._tr_tally(t,0,t.window[t.strstart-1]))&&s(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return z}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=b._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<B-1?t.strstart:B-1,e===L?(s(t,!0),0===t.strm.avail_out?H:q):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?z:Y}function g(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function m(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=P,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?K:W,t.adler=2===e.wrap?0:1,e.last_flush=T,b._tr_init(e),C):r(t,A)}function y(t){var e=m(t);return e===C&&function(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=E[t.level].max_lazy,t.good_match=E[t.level].good_length,t.nice_match=E[t.level].nice_length,t.max_chain_length=E[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=B-1,t.match_available=0,t.ins_h=0}(t.state),e}function v(t,e,n,i,a,s){if(!t)return A;var u=1;if(e===M&&(e=6),i<0?(u=0,i=-i):i>15&&(u=2,i-=16),a<1||a>N||n!==I||i<8||i>15||e<0||e>9||s<0||s>O)return r(t,A);8===i&&(i=9);var l=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=I,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new _.Buf16(2*V),this.dyn_dtree=new _.Buf16(2*(2*k+1)),this.bl_tree=new _.Buf16(2*(2*F+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new _.Buf16(j+1),this.heap=new _.Buf16(2*D+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new _.Buf16(2*D+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return t.state=l,l.strm=t,l.wrap=u,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+B-1)/B),l.window=new _.Buf8(2*l.w_size),l.head=new _.Buf16(l.hash_size),l.prev=new _.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new _.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=n,y(t)}var E,_=n(2),b=n(64),S=n(33),w=n(32),x=n(16),T=0,L=4,C=0,A=-2,M=-1,R=1,O=4,P=2,I=8,N=9,D=286,k=30,F=19,V=2*D+1,j=15,B=3,U=258,G=U+B+1,K=42,W=113,z=1,Y=2,H=3,q=4;E=[new g(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(f(t),0===t.lookahead&&e===T)return z;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,s(t,!1),0===t.strm.avail_out))return z;if(t.strstart-t.block_start>=t.w_size-G&&(s(t,!1),0===t.strm.avail_out))return z}return t.insert=0,e===L?(s(t,!0),0===t.strm.avail_out?H:q):(t.strstart>t.block_start&&(s(t,!1),t.strm.avail_out),z)})),new g(4,4,8,4,p),new g(4,5,16,8,p),new g(4,6,32,32,p),new g(4,4,16,16,d),new g(8,16,32,32,d),new g(8,16,128,128,d),new g(8,32,128,256,d),new g(32,128,258,1024,d),new g(32,258,258,4096,d)],e.deflateInit=function(t,e){return v(t,e,I,15,8,0)},e.deflateInit2=v,e.deflateReset=y,e.deflateResetKeep=m,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?A:(t.state.gzhead=e,C):A},e.deflate=function(t,e){var n,c,h,p;if(!t||!t.state||e>5||e<0)return t?r(t,A):A;if(c=t.state,!t.output||!t.input&&0!==t.avail_in||666===c.status&&e!==L)return r(t,0===t.avail_out?-5:A);if(c.strm=t,n=c.last_flush,c.last_flush=e,c.status===K)if(2===c.wrap)t.adler=0,u(c,31),u(c,139),u(c,8),c.gzhead?(u(c,(c.gzhead.text?1:0)+(c.gzhead.hcrc?2:0)+(c.gzhead.extra?4:0)+(c.gzhead.name?8:0)+(c.gzhead.comment?16:0)),u(c,255&c.gzhead.time),u(c,c.gzhead.time>>8&255),u(c,c.gzhead.time>>16&255),u(c,c.gzhead.time>>24&255),u(c,9===c.level?2:c.strategy>=2||c.level<2?4:0),u(c,255&c.gzhead.os),c.gzhead.extra&&c.gzhead.extra.length&&(u(c,255&c.gzhead.extra.length),u(c,c.gzhead.extra.length>>8&255)),c.gzhead.hcrc&&(t.adler=w(t.adler,c.pending_buf,c.pending,0)),c.gzindex=0,c.status=69):(u(c,0),u(c,0),u(c,0),u(c,0),u(c,0),u(c,9===c.level?2:c.strategy>=2||c.level<2?4:0),u(c,3),c.status=W);else{var d=I+(c.w_bits-8<<4)<<8;d|=(c.strategy>=2||c.level<2?0:c.level<6?1:6===c.level?2:3)<<6,0!==c.strstart&&(d|=32),d+=31-d%31,c.status=W,l(c,d),0!==c.strstart&&(l(c,t.adler>>>16),l(c,65535&t.adler)),t.adler=1}if(69===c.status)if(c.gzhead.extra){for(h=c.pending;c.gzindex<(65535&c.gzhead.extra.length)&&(c.pending!==c.pending_buf_size||(c.gzhead.hcrc&&c.pending>h&&(t.adler=w(t.adler,c.pending_buf,c.pending-h,h)),a(t),h=c.pending,c.pending!==c.pending_buf_size));)u(c,255&c.gzhead.extra[c.gzindex]),c.gzindex++;c.gzhead.hcrc&&c.pending>h&&(t.adler=w(t.adler,c.pending_buf,c.pending-h,h)),c.gzindex===c.gzhead.extra.length&&(c.gzindex=0,c.status=73)}else c.status=73;if(73===c.status)if(c.gzhead.name){h=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>h&&(t.adler=w(t.adler,c.pending_buf,c.pending-h,h)),a(t),h=c.pending,c.pending===c.pending_buf_size)){p=1;break}p=c.gzindex<c.gzhead.name.length?255&c.gzhead.name.charCodeAt(c.gzindex++):0,u(c,p)}while(0!==p);c.gzhead.hcrc&&c.pending>h&&(t.adler=w(t.adler,c.pending_buf,c.pending-h,h)),0===p&&(c.gzindex=0,c.status=91)}else c.status=91;if(91===c.status)if(c.gzhead.comment){h=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>h&&(t.adler=w(t.adler,c.pending_buf,c.pending-h,h)),a(t),h=c.pending,c.pending===c.pending_buf_size)){p=1;break}p=c.gzindex<c.gzhead.comment.length?255&c.gzhead.comment.charCodeAt(c.gzindex++):0,u(c,p)}while(0!==p);c.gzhead.hcrc&&c.pending>h&&(t.adler=w(t.adler,c.pending_buf,c.pending-h,h)),0===p&&(c.status=103)}else c.status=103;if(103===c.status&&(c.gzhead.hcrc?(c.pending+2>c.pending_buf_size&&a(t),c.pending+2<=c.pending_buf_size&&(u(c,255&t.adler),u(c,t.adler>>8&255),t.adler=0,c.status=W)):c.status=W),0!==c.pending){if(a(t),0===t.avail_out)return c.last_flush=-1,C}else if(0===t.avail_in&&i(e)<=i(n)&&e!==L)return r(t,-5);if(666===c.status&&0!==t.avail_in)return r(t,-5);if(0!==t.avail_in||0!==c.lookahead||e!==T&&666!==c.status){var g=2===c.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(f(t),0===t.lookahead)){if(e===T)return z;break}if(t.match_length=0,n=b._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(s(t,!1),0===t.strm.avail_out))return z}return t.insert=0,e===L?(s(t,!0),0===t.strm.avail_out?H:q):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?z:Y}(c,e):3===c.strategy?function(t,e){for(var n,r,i,o,a=t.window;;){if(t.lookahead<=U){if(f(t),t.lookahead<=U&&e===T)return z;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=B&&t.strstart>0&&(r=a[i=t.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=t.strstart+U;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);t.match_length=U-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=B?(n=b._tr_tally(t,1,t.match_length-B),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=b._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(s(t,!1),0===t.strm.avail_out))return z}return t.insert=0,e===L?(s(t,!0),0===t.strm.avail_out?H:q):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?z:Y}(c,e):E[c.level].func(c,e);if(g!==H&&g!==q||(c.status=666),g===z||g===H)return 0===t.avail_out&&(c.last_flush=-1),C;if(g===Y&&(1===e?b._tr_align(c):5!==e&&(b._tr_stored_block(c,0,0,!1),3===e&&(o(c.head),0===c.lookahead&&(c.strstart=0,c.block_start=0,c.insert=0))),a(t),0===t.avail_out))return c.last_flush=-1,C}return e!==L?C:c.wrap<=0?1:(2===c.wrap?(u(c,255&t.adler),u(c,t.adler>>8&255),u(c,t.adler>>16&255),u(c,t.adler>>24&255),u(c,255&t.total_in),u(c,t.total_in>>8&255),u(c,t.total_in>>16&255),u(c,t.total_in>>24&255)):(l(c,t.adler>>>16),l(c,65535&t.adler)),a(t),c.wrap>0&&(c.wrap=-c.wrap),0!==c.pending?C:1)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==K&&69!==e&&73!==e&&91!==e&&103!==e&&e!==W&&666!==e?r(t,A):(t.state=null,e===W?r(t,-3):C):A},e.deflateSetDictionary=function(t,e){var n,r,i,a,s,u,l,c,h=e.length;if(!t||!t.state)return A;if(2===(a=(n=t.state).wrap)||1===a&&n.status!==K||n.lookahead)return A;for(1===a&&(t.adler=S(t.adler,e,h,0)),n.wrap=0,h>=n.w_size&&(0===a&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new _.Buf8(n.w_size),_.arraySet(c,e,h-n.w_size,n.w_size,0),e=c,h=n.w_size),s=t.avail_in,u=t.next_in,l=t.input,t.avail_in=h,t.next_in=0,t.input=e,f(n);n.lookahead>=B;){r=n.strstart,i=n.lookahead-(B-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+B-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=B-1,f(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=B-1,n.match_available=0,t.next_in=u,t.input=l,t.avail_in=s,n.wrap=a,C},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);this.options=a.assign({level:f,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==h)throw new Error(u[n]);if(e.header&&o.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=o.deflateSetDictionary(this.strm,i))!==h)throw new Error(u[n]);this._dict_set=!0}}function i(t,e){var n=new r(e);if(n.push(t,!0),n.err)throw n.msg||u[n.err];return n.result}var o=n(65),a=n(2),s=n(31),u=n(16),l=n(30),c=Object.prototype.toString,h=0,f=-1,p=0,d=8;r.prototype.push=function(t,e){var n,r,i=this.strm,u=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=s.string2buf(t):"[object ArrayBuffer]"===c.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new a.Buf8(u),i.next_out=0,i.avail_out=u),1!==(n=o.deflate(i,r))&&n!==h)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(i.output,i.next_out))):this.onData(a.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=o.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===h):2!==r||(this.onEnd(h),i.avail_out=0,!0)},r.prototype.onData=function(t){this.chunks.push(t)},r.prototype.onEnd=function(t){t===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=r,e.deflate=i,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},function(t,e,n){"use strict";var r={};(0,n(2).assign)(r,n(66),n(63),n(29)),t.exports=r},function(t,e,n){"use strict";function r(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=n(67),a=n(0),s=n(1),u=i?"uint8array":"array";e.magic="\b\0",a.inherits(r,s),r.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(u,t.data),!1)},r.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},r.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},r.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},e.compressWorker=function(t){return new r("Deflate",t)},e.uncompressWorker=function(){return new r("Inflate",{})}},function(t,e,n){"use strict";var r=n(34),i=n(58);e.generateWorker=function(t,e,n){var o=new i(e.streamFiles,n,e.platform,e.encodeFileName),a=0;try{t.forEach((function(t,n){a++;var i=function(t,e){var n=t||e,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,e.compression),s=n.options.compressionOptions||e.compressionOptions||{},u=n.dir,l=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:t,dir:u,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(t){o.error(t)}return o}},function(t,e,n){"use strict";var r=n(39),i=n(37),o=n(7),a=n(18),s=n(1),u=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};u.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var i="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var a=!this._dataBinary;a&&!i&&(e=e.pipe(new o.Utf8EncodeWorker)),!a&&i&&(e=e.pipe(new o.Utf8DecodeWorker))}catch(t){(e=new s("error")).error(t)}return new r(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof s?this._data:new i(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)u.prototype[l[h]]=c;t.exports=u},function(t,e,n){"use strict";function r(t,e,n){i.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),n&&n(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}var i=n(50).Readable;n(0).inherits(r,i),r.prototype._read=function(){this._helper.resume()},t.exports=r},function(t,e,n){"use strict";function r(t){i.call(this,"ConvertWorker to "+t),this.destType=t}var i=n(1),o=n(0);o.inherits(r,i),r.prototype.processChunk=function(t){this.push({data:o.transformTo(this.destType,t.data),meta:t.meta})},t.exports=r},function(t,e,n){"use strict";(function(e){function n(){var t,e;i=!0;for(var n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}i=!1}var r,i,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var a=0,s=new o(n),u=e.document.createTextNode("");s.observe(u,{characterData:!0}),r=function(){u.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){n(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(n,0)};else{var l=new e.MessageChannel;l.port1.onmessage=n,r=function(){l.port2.postMessage(0)}}var c=[];t.exports=function(t){1!==c.push(t)||i||r()}}).call(this,n(5))},function(t,e,n){"use strict";function r(){}function i(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,t!==r&&u(this,t)}function o(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function a(t,e,n){c((function(){var r;try{r=e(n)}catch(e){return h.reject(t,e)}r===t?h.reject(t,new TypeError("Cannot resolve promise with itself")):h.resolve(t,r)}))}function s(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function u(t,e){function n(e){i||(i=!0,h.reject(t,e))}function r(e){i||(i=!0,h.resolve(t,e))}var i=!1,o=l((function(){e(r,n)}));"error"===o.status&&n(o.value)}function l(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}var c=n(73),h={},f=["REJECTED"],p=["FULFILLED"],d=["PENDING"];t.exports=i,i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){if("function"!=typeof t&&this.state===p||"function"!=typeof e&&this.state===f)return this;var n=new this.constructor(r);return this.state!==d?a(n,this.state===p?t:e,this.outcome):this.queue.push(new o(n,t,e)),n},o.prototype.callFulfilled=function(t){h.resolve(this.promise,t)},o.prototype.otherCallFulfilled=function(t){a(this.promise,this.onFulfilled,t)},o.prototype.callRejected=function(t){h.reject(this.promise,t)},o.prototype.otherCallRejected=function(t){a(this.promise,this.onRejected,t)},h.resolve=function(t,e){var n=l(s,e);if("error"===n.status)return h.reject(t,n.value);var r=n.value;if(r)u(t,r);else{t.state=p,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},h.reject=function(t,e){t.state=f,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},i.resolve=function(t){return t instanceof this?t:h.resolve(new this(r),t)},i.reject=function(t){var e=new this(r);return h.reject(e,t)},i.all=function(t){function e(t,e){n.resolve(t).then((function(t){a[e]=t,++s!==i||o||(o=!0,h.resolve(l,a))}),(function(t){o||(o=!0,h.reject(l,t))}))}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var a=new Array(i),s=0,u=-1,l=new this(r);++u<i;)e(t[u],u);return l},i.race=function(t){function e(t){n.resolve(t).then((function(t){o||(o=!0,h.resolve(s,t))}),(function(t){o||(o=!0,h.reject(s,t))}))}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var a=-1,s=new this(r);++a<i;)e(t[a]);return s}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){t.exports=n(11).document&&document.documentElement},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r,i,o,a=n(42),s=n(77),u=n(76),l=n(40),c=n(11),h=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,g=0,m={},y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},v=function(t){y.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++g]=function(){s("function"==typeof t?t:Function(t),e)},r(g),g},p=function(t){delete m[t]},"process"==n(75)(h)?r=function(t){h.nextTick(a(y,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=v,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",v,!1)):r="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(a(y,t,1),0)}),t.exports={set:f,clear:p}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(20);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports=!n(19)&&!n(41)((function(){return 7!=Object.defineProperty(n(40)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(20);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(82),i=n(81),o=n(80),a=Object.defineProperty;e.f=n(19)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(83),i=n(79);t.exports=n(19)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(11),i=n(43),o=n(42),a=n(84),s=function t(e,n,s){var u,l,c,h=e&t.F,f=e&t.G,p=e&t.S,d=e&t.P,g=e&t.B,m=e&t.W,y=f?i:i[n]||(i[n]={}),v=y.prototype,E=f?r:p?r[n]:(r[n]||{}).prototype;for(u in f&&(s=n),s)(l=!h&&E&&void 0!==E[u])&&u in y||(c=l?E[u]:s[u],y[u]=f&&"function"!=typeof E[u]?s[u]:g&&l?o(c,r):m&&E[u]==c?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((y.virtual||(y.virtual={}))[u]=c,e&t.R&&v&&!v[u]&&a(v,u,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){var r=n(86),i=n(78);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){n(87),t.exports=n(43).setImmediate},function(t,e,n){t.exports=n(22).PassThrough},function(t,e,n){t.exports=n(22).Transform},function(t,e,n){t.exports=n(4)},function(t,e,n){t.exports=n(21)},function(t,e,n){"use strict";function r(t){return this instanceof r?void i.call(this,t):new r(t)}t.exports=r;var i=n(45),o=n(9);o.inherits=n(6),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(5))},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){delete s[t]}function i(t){if(u)setTimeout(i,0,t);else{var e=s[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{r(t),u=!1}}}}if(!t.setImmediate){var o,a=1,s={},u=!1,l=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?o=function(t){e.nextTick((function(){i(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&i(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),o=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){i(t.data)},o=function(e){t.port2.postMessage(e)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var t=l.documentElement;o=function(e){var n=l.createElement("script");n.onreadystatechange=function(){i(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():o=function(t){setTimeout(i,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return s[a]=r,o(a),a++},c.clearImmediate=r}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(5),n(15))},function(t,e,n){(function(t){function r(t,e){this._id=t,this._clearFn=e}var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;e.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(95),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(5))},function(t,e){},function(t,e,n){"use strict";function r(t,e,n){t.copy(e,n)}var i=n(13).Buffer,o=n(97);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var e=i.allocUnsafe(t>>>0),n=this.head,o=0;n;)r(n.data,e,o),o+=n.data.length,n=n.next;return e},t}(),o&&o.inspect&&o.inspect.custom&&(t.exports.prototype[o.inspect.custom]=function(){var t=o.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){function r(){i.call(this)}t.exports=r;var i=n(23).EventEmitter;n(6)(r,i),r.Readable=n(22),r.Writable=n(92),r.Duplex=n(91),r.Transform=n(90),r.PassThrough=n(89),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&l.pause&&l.pause()}function r(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,t.end())}function a(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function s(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){l.removeListener("data",n),t.removeListener("drain",r),l.removeListener("end",o),l.removeListener("close",a),l.removeListener("error",s),t.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),t.removeListener("close",u)}var l=this;l.on("data",n),t.on("drain",r),t._isStdio||e&&!1===e.end||(l.on("end",o),l.on("close",a));var c=!1;return l.on("error",s),t.on("error",s),l.on("end",u),l.on("close",u),t.on("close",u),t.emit("pipe",l),t}},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*g}},function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function i(t){return a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}function o(t,e,n){for(var r,o=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(i(r));return o.join("")}e.byteLength=function(t){var e=r(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){for(var e,n=r(t),i=n[0],o=n[1],a=new u(function(t,e,n){return 3*(e+n)/4-n}(0,i,o)),l=0,c=o>0?i-4:i,h=0;h<c;h+=4)e=s[t.charCodeAt(h)]<<18|s[t.charCodeAt(h+1)]<<12|s[t.charCodeAt(h+2)]<<6|s[t.charCodeAt(h+3)],a[l++]=e>>16&255,a[l++]=e>>8&255,a[l++]=255&e;return 2===o&&(e=s[t.charCodeAt(h)]<<2|s[t.charCodeAt(h+1)]>>4,a[l++]=255&e),1===o&&(e=s[t.charCodeAt(h)]<<10|s[t.charCodeAt(h+1)]<<4|s[t.charCodeAt(h+2)]>>2,a[l++]=e>>8&255,a[l++]=255&e),a},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i=[],s=0,u=n-r;s<u;s+=16383)i.push(o(t,s,s+16383>u?u:s+16383));return 1===r?(e=t[n-1],i.push(a[e>>2]+a[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"=")),i.join("")};for(var a=[],s=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,h=l.length;c<h;++c)a[c]=l[c],s[l.charCodeAt(c)]=c;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(t,e,n){"use strict";function r(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var i=n(7),o=n(0),a=n(1),s=n(39),u=n(38),l=n(18),c=n(70),h=n(69),f=n(12),p=n(57),d=function(t,e,n){var r,i=o.getTypeOf(e),s=o.extend(n||{},u);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=m(t)),s.createFolders&&(r=g(t))&&y.call(this,r,!0);var h="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!h),(e instanceof l&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e="",s.compression="STORE",i="string");var d=null;d=e instanceof l||e instanceof a?e:f.isNode&&f.isStream(e)?new p(t,e):o.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var v=new c(t,d,s);this.files[t]=v},g=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},m=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},y=function(t,e){return e=void 0!==e?e:u.createFolders,t=m(t),this.files[t]||d.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,r;for(e in this.files)this.files.hasOwnProperty(e)&&(r=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,r))},filter:function(t){var e=[];return this.forEach((function(n,r){t(n,r)&&e.push(r)})),e},file:function(t,e,n){if(1===arguments.length){if(r(t)){var i=t;return this.filter((function(t,e){return!e.dir&&i.test(t)}))}var o=this.files[this.root+t];return o&&!o.dir?o:null}return t=this.root+t,d.call(this,t,e,n),this},folder:function(t){if(!t)return this;if(r(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=y.call(this,e),i=this.clone();return i.root=n.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=o.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";e=h.generateWorker(this,n,r)}catch(t){(e=new a("error")).error(t)}return new s(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};t.exports=v},function(t,e,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}r.prototype=n(103),r.prototype.loadAsync=n(56),r.support=n(3),r.defaults=n(38),r.version="3.1.5",r.loadAsync=function(t,e){return(new r).loadAsync(t,e)},r.external=n(8),t.exports=r}])})),i("formats/kml/KmzFile",["../../util/jszip","../../util/Promise","../../util/WWUtil"],(function(t,e,n){"use strict";var r=function(t,e){this._binary=t,this._fileCache=e};return r.prototype.load=function(){var n=this,r=null,i=!1;return(new t).loadAsync(this._binary).then((function(t){return e.all(Object.keys(t.files).map((function(e){return t.files[e]})).map((function(t){return n.hasExtension("kml",t.name)&&!i?(i=!0,t.async("text").then((function(t){r=t}))):n.hasExtension("kml",t.name)?t.async("base64").then((function(e){return new WorldWind.KmlFile(e).then((function(e){n._fileCache.add("href;"+t.name,e)}))})):t.async("base64").then((function(e){var r="data:image/jpeg;base64,"+e;n._fileCache.add("href;"+t.name,r)}))})))})).then((function(){return r}))},r.prototype.hasExtension=function(t,e){return n.endsWith(e,"."+t)},r})),i("formats/kml/util/KmlRefreshListener",[],(function(){var t=function(){this.currentActiveEvents=[]};return t.prototype.addEvent=function(t){var e=this;setTimeout((function(){e.currentActiveEvents.push(t)}),t.time)},t.prototype.getActiveEvents=function(){var t=this.currentActiveEvents.slice();return this.currentActiveEvents=[],t},t.Event=function(t,e,n){this.type=t,this.payload=n,this.time=e},t})),i("formats/kml/util/KmlRemoteFile",["../../../error/ArgumentError","../../../util/Logger","../../../util/Promise"],(function(t,e,n){"use strict";var r=function(n){if(!n.ajax&&!n.zip)throw new t(e.logMessage(e.LEVEL_SEVERE,"RemoteDocument","constructor","Invalid option for retrieval specified. Use either ajax or zip option."));this.options=n};return r.prototype.get=function(){var n=this.options;if(n.ajax)return this.ajax(n.url,n);if(n.zip)return n.responseType=n.responseType||"arraybuffer",this.ajax(n.url,n);throw new t(e.logMessage(e.LEVEL_SEVERE,"RemoteDocument","constructor","Invalid option for retrieval specified. Use either ajax or zip option."))},r.prototype.ajax=function(t,r){return new n((function(n,i){var o=new XMLHttpRequest;o.open("GET",t,!0),r.responseType&&(o.responseType=r.responseType),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var i;i="arraybuffer"==r.responseType?this.response:this.responseText,n({text:i,headers:o.getAllResponseHeaders()})}else e.log(e.LEVEL_WARNING,"KmlFile retrieval failed ("+o.statusText+"): "+t)},o.onerror=function(){e.log(e.LEVEL_WARNING,"Remote file retrieval failed: "+t),i()}.bind(this),o.ontimeout=function(){e.log(e.LEVEL_WARNING,"Remote file retrieval timed out: "+t),i()}.bind(this),o.send(null)}))},r})),i("formats/kml/util/KmlStyleResolver",["../KmlFile","../styles/KmlStyle","../../../util/Logger","../../../util/Promise"],(function(t,e,n,r){"use strict";var i=function(t){this._fileCache=t};return i.prototype.handleRemoteStyle=function(t,i){return t?this.handleStyleUrl(t):i?this.handleStyleSelector(i):(n.logMessage(n.LEVEL_INFO,"KmlStyleResolver","handleRemoteStyle","Style was null."),r.resolve(e.default()))},i.prototype.handleStyleUrl=function(t){var e=this;return this.handlePromiseOfFile(t).then((function(e){return e.resolveStyle(t)})).then((function(t){return t.isMap?t.resolve(e):r.resolve({normal:t,highlight:null})}))},i.prototype.handlePromiseOfFile=function(t){var e=this._fileCache.retrieve(t);return e?r.resolve(e):new WorldWind.KmlFile({url:t}).then(function(e){return this._fileCache.add(t,e),e}.bind(this))},i.prototype.handleStyleSelector=function(t){return t.isMap?t.resolve(this):new r((function(e){window.setTimeout((function(){e({normal:t,highlight:null})}),0)}))},i})),i("util/XmlDocument",["../error/ArgumentError","../util/Logger"],(function(t,e){var n=function(t){this._document=t};return n.prototype.dom=function(){if(DOMParser){var n=(new DOMParser).parseFromString(this._document,"text/xml");if(n.getElementsByTagName("parsererror").length||!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"XmlDocument","dom","Invalid XML document. "+n.getElementsByTagName("parsererror")[0].innerHTML));return n}var r=new ActiveXObject("Microsoft.XMLDOM");return r.async=!1,r.loadXML(text),r},n.isValid=function(t){try{return new n(t).dom(),!0}catch(t){return!1}},n})),i("formats/kml/KmlFile",["../../error/ArgumentError","./KmlElements","./KmlFileCache","./KmlObject","./styles/KmlStyle","./styles/KmlStyleMap","./KmlTimeSpan","./KmlTimeStamp","./KmzFile","../../util/Logger","../../util/Promise","./util/KmlRefreshListener","./util/KmlRemoteFile","./util/KmlStyleResolver","../../util/XmlDocument","../../util/WWUtil"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g){"use strict";var m=function(e,i){var o=this;if(!e)throw new t(l.logMessage(l.LEVEL_SEVERE,"KmlFile","constructor","invalidDocumentPassed"));return this._controls=i||null,this._fileCache=new n,this._styleResolver=new p(this._fileCache),this._listener=new h,this._headers=null,this.requestRemote(e).then((function(t){var n=t.text;return o._headers=t.headers,o.hasExtension("kmz",e)?new u(n,o._fileCache).load():n})).then((function(t){return o._document=new d(t).dom(),r.call(o,{objectNode:o._document.documentElement,controls:i}),o._fileCache.add(e,o,!0),o}))};return m.prototype=Object.create(r.prototype),Object.defineProperties(m.prototype,{shapes:{get:function(){return this._factory.all(this)}}}),m.prototype.render=function(t,e){var n=this;e=e||{},this.shapes.forEach((function(r){r.render(t,{lastStyle:e.lastStyle||null,lastVisibility:e.lastVisibility||null,timeRange:e.timeRange||null,regionInvisible:e.regionInvisible||null,fileCache:n._fileCache,styleResolver:n._styleResolver,listener:n._listener,activeEvents:n._listener.getActiveEvents()})}))},m.prototype.hasExtension=function(t,e){return g.endsWith(e,"."+t)},m.prototype.requestRemote=function(t){var e={};return e.url=t,this.hasExtension("kmz",t)?e.zip=!0:e.ajax=!0,new f(e).get()},m.prototype.resolveStyle=function(t){var e=this,n=t.substring(t.indexOf("#")+1,t.length);return new c((function(t,r){var a;(a=e._document.querySelector?e._document.querySelector("*[id='"+n+"']"):e._document.getElementById(n))&&null!=a||r(),a.nodeName==i.prototype.getTagNames()[0]?t(new i({objectNode:a},{styleResolver:e._styleResolver})):a.nodeName==o.prototype.getTagNames()[0]?t(new o({objectNode:a},{styleResolver:e._styleResolver})):l.logMessage(l.LEVEL_WARNING,"KmlFile","resolveStyle","Style must contain either Style node or StyleMap node.")}))},m.prototype.getExpired=function(){var t=new Date(this._headers.getRequestHeader("Expires"));return(new Date).getTime-t.getTime()},m})),i("formats/kml/KmlLatLonAltBox",["./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlNorth:{get:function(){return this._factory.specific(this,{name:"north",transformer:n.number})}},kmlSouth:{get:function(){return this._factory.specific(this,{name:"south",transformer:n.number})}},kmlEast:{get:function(){return this._factory.specific(this,{name:"east",transformer:n.number})}},kmlWest:{get:function(){return this._factory.specific(this,{name:"west",transformer:n.number})}},kmlMinAltitude:{get:function(){return this._factory.specific(this,{name:"minAltitude",transformer:n.number})}},kmlMaxAltitude:{get:function(){return this._factory.specific(this,{name:"maxAltitude",transformer:n.number})}}}),r.prototype.getTagNames=function(){return["LatLonAltBox"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/KmlLod",["./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlMinLodPixels:{get:function(){return this._factory.specific(this,{name:"minLodPixels",transformer:n.number})}},kmlMaxLodPixels:{get:function(){return this._factory.specific(this,{name:"maxLodPixels",transformer:n.number})}},kmlMinFadeExtent:{get:function(){return this._factory.specific(this,{name:"minFadeExtent",transformer:n.number})}},kmlMaxFadeExtent:{get:function(){return this._factory.specific(this,{name:"maxFadeExtent",transformer:n.number})}}}),r.prototype.getTagNames=function(){return["Lod"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/KmlRegion",["../../geom/BoundingBox","../../util/Color","./KmlElements","./KmlLatLonAltBox","./KmlLod","./KmlObject","./styles/KmlStyle","./util/KmlNodeTransformers","../../geom/Sector"],(function(t,e,n,r,i,o,a,s,u){"use strict";var l=function(t){o.call(this,t)};return l.prototype=Object.create(o.prototype),Object.defineProperties(l.prototype,{kmlLatLonAltBox:{get:function(){return this._factory.specific(this,{name:r.prototype.getTagNames(),transformer:s.kmlObject})}},kmlLod:{get:function(){return this._factory.specific(this,{name:i.prototype.getTagNames(),transformer:s.kmlObject})}}}),l.prototype.intersectsVisible=function(e){var n=this.kmlLatLonAltBox,r=new t;return r.setToSector(new u(n.kmlSouth,n.kmlNorth,n.kmlWest,n.kmlEast),e.globe,n.kmlMinAltitude,n.kmlMaxAltitude),r.intersectsFrustum(e.frustumInModelCoordinates)&&(!n.kmlMinAltitude||e.eyePosition.altitude>n.kmlMinAltitude)&&(!n.kmlMaxAltitude||e.eyePosition.altitude<n.kmlMaxAltitude)},l.prototype.getTagNames=function(){return["Region"]},n.addKey(l.prototype.getTagNames()[0],l),l})),i("formats/kml/features/KmlFeature",["./../KmlObject","../KmlAbstractView","../KmlFile","../styles/KmlStyleMap","../styles/KmlStyleSelector","../KmlRegion","../KmlTimePrimitive","../util/KmlNodeTransformers","../../../util/Promise"],(function(t,e,n,r,i,o,a,s,u){"use strict";var l=function(e){this.isFeature=e.isFeature=!0,t.call(this,e),this._pStyle=null,this.controlledVisibility=null};return l.prototype=Object.create(t.prototype),Object.defineProperties(l.prototype,{style:{get:function(){return this._pStyle}},kmlName:{get:function(){return this._factory.specific(this,{name:"name",transformer:s.string})}},kmlVisibility:{get:function(){return this._factory.specific(this,{name:"visibility",transformer:s.boolean})}},kmlOpen:{get:function(){return this._factory.specific(this,{name:"open",transformer:s.boolean})}},kmlAddress:{get:function(){return this._factory.specific(this,{name:"address",transformer:s.string})}},kmlPhoneNumber:{get:function(){return this._factory.specific(this,{name:"phoneNumber",transformer:s.string})}},kmlDescription:{get:function(){return this._factory.specific(this,{name:"description",transformer:s.string})}},kmlStyleUrl:{get:function(){return this._factory.specific(this,{name:"styleUrl",transformer:s.string})}},kmlSnippet:{get:function(){return this._factory.specific(this,{name:"Snippet",transformer:s.string})}},kmlAbstractView:{get:function(){return this._factory.any(this,{name:e.prototype.getTagNames()})}},kmlTimePrimitive:{get:function(){return this._factory.any(this,{name:a.prototype.getTagNames()})}},kmlStyleSelector:{get:function(){return this._factory.any(this,{name:i.prototype.getTagNames()})}},kmlRegion:{get:function(){return this._factory.any(this,{name:o.prototype.getTagNames()})}}}),l.prototype.render=function(e,n){t.prototype.render.call(this,e,n),this.solveStyle(e,n),this.solveVisibility(e,n)},l.prototype.solveStyle=function(t,e){this.getStyle(t,e),null!=this.style&&(e.lastStyle=this.style)},l.prototype.solveRegion=function(t){return!this.kmlRegion||this.kmlRegion.intersectsVisible(t)},l.prototype.solveVisibility=function(t,e){var n=!1!==e.lastVisibility,r=this.solveTimeVisibility(t),i=this.solveRegion(t),o=!1!==this.kmlVisibility;!0===this.controlledVisibility?this.enabled=!0:!1===this.controlledVisibility?this.enabled=!1:this.enabled=n&&r&&i&&o,e.lastVisibility=this.enabled,this._renderable&&(this._renderable.enabled=this.enabled)},l.prototype.solveTimeVisibility=function(t){var e=this.kmlTimePrimitive&&this.kmlTimePrimitive.kmlTimeRange(),n=t.currentLayer.timeRange;if(e&&n.length>=2){var r=e.from,i=e.to,o=n[0],a=n[1];if(r<o||i>a)return!1}return!0},l.prototype.getStyle=function(t,e){if(!this._pStyle){var n=this;return e.styleResolver.handleRemoteStyle(n.kmlStyleUrl,n.kmlStyleSelector).then((function(e){n._pStyle=e,t.redrawRequested=!0}))}},l.prototype.getTagNames=function(){return["NetworkLink","Placemark","PhotoOverlay","ScreenOverlay","GroundOverlay","Folder","Document"]},l})),i("formats/kml/features/KmlContainer",["./KmlFeature"],(function(t){"use strict";var e=function(e){t.call(this,e)};return e.prototype=Object.create(t.prototype),Object.defineProperties(e.prototype,{kmlShapes:{get:function(){return this._factory.all(this).filter((function(t){return t.isFeature}))}}}),e.prototype.render=function(e,n){t.prototype.render.call(this,e,n);var r=this;this.kmlShapes.forEach((function(t){t.render(e,{lastStyle:n.lastStyle,lastVisibility:r.enabled,timeRange:n.timeRange,regionInvisible:n.regionInvisible,fileCache:n.fileCache,styleResolver:n.styleResolver,listener:n.listener,activeEvents:n.activeEvents})}))},e.prototype.getTagNames=function(){return["Folder","Document"]},e})),i("formats/kml/controls/KmlControls",["../../../util/Logger"],(function(t){"use strict";var e=function(){};return e.prototype.hook=function(){t.logMessage(t.LEVEL_WARNING,"KmlControls","hook","Every KML controls should override hook method.")},e})),i("formats/kml/util/KmlCreate",["../KmlElements","../KmlObject"],(function(t,e){var n=function(t){e.call(this,t)};return n.prototype=Object.create(e.prototype),Object.defineProperties(n.prototype,{shapes:{get:function(){return this._factory.all(this)}}}),n.prototype.getTagNames=function(){return["Create"]},t.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/util/KmlDelete",["../KmlElements","../KmlObject"],(function(t,e){var n=function(t){e.call(this,t)};return n.prototype=Object.create(e.prototype),Object.defineProperties(n.prototype,{shapes:{get:function(){return this._factory.all(this)}}}),n.prototype.getTagNames=function(){return["Delete"]},t.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/util/KmlSchema",["./../KmlElements","../KmlObject"],(function(t,e){"use strict";var n=function(t){e.call(this,t)};return(n.prototype=Object.create(e.prototype)).getTagNames=function(){return["Schema"]},t.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/features/KmlDocument",["./KmlContainer","../KmlElements","./KmlFeature","../util/KmlSchema"],(function(t,e,n,r){"use strict";var i=function(e){t.call(this,e)};return i.prototype=Object.create(t.prototype),Object.defineProperties(i.prototype,{kmlSchemas:{get:function(){return this._factory.all(this).filter((function(t){return t instanceof r}))}}}),i.prototype.getTagNames=function(){return["Document"]},e.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/features/KmlFolder",["./KmlContainer","./../KmlElements"],(function(t,e){"use strict";var n=function(e){t.call(this,e)};return(n.prototype=Object.create(t.prototype)).getTagNames=function(){return["Folder"]},e.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/geom/KmlGeometry",["../KmlObject"],(function(t){"use strict";var e=function(e){t.call(this,e),this._renderable=null};return(e.prototype=Object.create(t.prototype)).render=function(e,n){t.prototype.render.call(this,e,n),this.enabled=n.lastVisibility},e.prototype.getTagNames=e.getTagNames=function(){return["Point","LinearRing","LineString","MultiGeometry","Polygon"]},e})),i("formats/kml/KmlLatLonBox",["./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlNorth:{get:function(){return this._factory.specific(this,{name:"north",transformer:n.number})}},kmlSouth:{get:function(){return this._factory.specific(this,{name:"south",transformer:n.number})}},kmlEast:{get:function(){return this._factory.specific(this,{name:"east",transformer:n.number})}},kmlWest:{get:function(){return this._factory.specific(this,{name:"west",transformer:n.number})}},kmlRotation:{get:function(){return this._factory.specific(this,{name:"rotation",transformer:n.string})}}}),r.prototype.getTagNames=function(){return["LatLonBox"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/KmlLatLonQuad",["./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlCoordinates:{get:function(){return this._factory.specific(this,{name:"coordinates",transformer:n.string})}}}),r.prototype.getTagNames=function(){return["gx:LatLonQuad"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/features/KmlOverlay",["./KmlFeature","./../KmlIcon","../util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(e){t.call(this,e)};return r.prototype=Object.create(t.prototype),Object.defineProperties(r.prototype,{kmlColor:{get:function(){return this._factory.specific(this,{name:"color",transformer:n.string})}},kmlDrawOrder:{get:function(){return this._factory.specific(this,{name:"drawOrder",transformer:n.string})}},kmlIcon:{get:function(){return this._factory.any(this,{name:e.prototype.getTagNames()})}}}),r.prototype.getTagNames=function(){return["PhotoOverlay","ScreenOverlay","GroundOverlay"]},r})),i("formats/kml/features/KmlGroundOverlay",["./../KmlElements","./KmlFeature","../KmlLatLonBox","../KmlLatLonQuad","./KmlOverlay","../util/KmlNodeTransformers","../../../geom/Sector","../../../shapes/SurfaceImage"],(function(t,e,n,r,i,o,a,s){"use strict";var u=function(t){this.isGroundOverlay=!0,i.call(this,t)};return u.prototype=Object.create(i.prototype),Object.defineProperties(u.prototype,{kmlAltitude:{get:function(){return this._factory.specific(this,{name:"altitude",transformer:o.string})}},kmlAltitudeMode:{get:function(){return this._factory.specific(this,{name:"altitudeMode",transformer:o.string})}},kmlLatLonBox:{get:function(){return this._factory.any(this,{name:n.prototype.getTagNames()})}},kmlLatLonQuad:{get:function(){return this._factory.any(this,{name:r.prototype.getTagNames()})}}}),u.prototype.render=function(t,n){e.prototype.render.call(this,t,n),!this._renderable&&this.enabled&&this.kmlIcon&&this.kmlLatLonBox&&(this._renderable=new s(new a(this.kmlLatLonBox.kmlSouth,this.kmlLatLonBox.kmlNorth,this.kmlLatLonBox.kmlWest,this.kmlLatLonBox.kmlEast),this.kmlIcon.kmlHref(n.fileCache)),t.redrawRequested=!0),this._renderable&&this._renderable.render(t)},u.prototype.getTagNames=function(){return["GroundOverlay"]},t.addKey(u.prototype.getTagNames()[0],u),u})),i("formats/kml/util/KmlImagePyramid",["../KmlElements","../KmlObject","../util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlTileSize:{get:function(){return this._factory.specific(this,{name:"tileSize",transformer:n.number})}},kmlMaxWidth:{get:function(){return this._factory.specific(this,{name:"maxWidth",transformer:n.number})}},kmlMaxHeight:{get:function(){return this._factory.specific(this,{name:"maxHeight",transformer:n.number})}},kmlGridOrigin:{get:function(){return this._factory.specific(this,{name:"gridOrigin",transformer:n.string})}}}),r.prototype.getTagNames=function(){return["ImagePyramid"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("shapes/Path",["../shapes/AbstractShape","../error/ArgumentError","../shaders/BasicTextureProgram","../geom/BoundingBox","../util/Color","../geom/Location","../util/Logger","../geom/Matrix","../pick/PickedObject","../geom/Position","../shapes/ShapeAttributes","../shapes/SurfacePolyline","../geom/Vec2","../geom/Vec3"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p){"use strict";var d=function(n,r){if(!n)throw new e(a.logMessage(a.LEVEL_SEVERE,"Path","constructor","missingPositions"));t.call(this,r),this._positions=n,this._pathType=WorldWind.GREAT_CIRCLE,this._terrainConformance=10,this._numSubSegments=10,this.referencePosition=this.determineReferencePosition(this._positions),this.scratchPoint=new p(0,0,0)};return d.prototype=Object.create(t.prototype),Object.defineProperties(d.prototype,{positions:{get:function(){return this._positions},set:function(t){if(!t)throw new e(a.logMessage(a.LEVEL_SEVERE,"Path","constructor","missingPositions"));this._positions=t,this.referencePosition=this.determineReferencePosition(this._positions),this.reset()}},followTerrain:{get:function(){return this._followTerrain},set:function(t){this._followTerrain=t,this.reset()}},terrainConformance:{get:function(){return this._terrainConformance},set:function(t){this._terrainConformance=t,this.reset()}},numSubSegments:{get:function(){return this._numSubSegments},set:function(t){this._numSubSegments=t>=0?t:0,this.reset()}},pathType:{get:function(){return this._pathType},set:function(t){this._pathType=t,this.reset()}},extrude:{get:function(){return this._extrude},set:function(t){this._extrude=t,this.reset()}}}),d.prototype.determineReferencePosition=function(t){return t.length>0?t[0]:null},d.prototype.mustGenerateGeometry=function(t){return!this.currentData.tessellatedPoints||this.currentData.drawInterior!==this.activeAttributes.drawInterior||this.currentData.drawVerticals!==this.activeAttributes.drawVerticals||!this.followTerrain&&this.currentData.numSubSegments!==this.numSubSegments||!(!this.followTerrain||this.currentData.terrainConformance===this.terrainConformance)||this.altitudeMode!==WorldWind.ABSOLUTE&&this.currentData.isExpired},d.prototype.createSurfaceShape=function(){return new h(this.positions,null)},d.prototype.doMakeOrderedRenderable=function(t){if(!this.referencePosition)return null;if(!this.mustGenerateGeometry(t))return this;var e=this.currentData.referencePoint;t.surfacePointForMode(this.referencePosition.latitude,this.referencePosition.longitude,this.referencePosition.altitude,this._altitudeMode,e),this.currentData.transformationMatrix.setToTranslation(e[0],e[1],e[2]);var n=this.makeTessellatedPositions(t);if(n.length<2)return null;var i=this.computeRenderedPath(t,n);return this.currentData.tessellatedPoints=i,this.currentData.drawInterior=this.activeAttributes.drawInterior,this.currentData.drawVerticals=this.activeAttributes.drawVerticals,this.currentData.numSubSegments=this.numSubSegments,this.currentData.terrainConformance=this.terrainConformance,this.resetExpiration(this.currentData),this.currentData.fillVbo=!0,this.currentData.extent||(this.currentData.extent=new r),this.currentData.extent.setToPoints(i),this.currentData.extent.translate(this.currentData.referencePoint),this},d.prototype.makeTessellatedPositions=function(t){var e,n,r,i=[],o=t.eyePoint,a=this.mustDrawVerticals(t),s=new p(0,0,0),u=new p(0,0,0),l=this._positions[0];a&&(this.currentData.verticalIndices=new Int16Array(2*this.positions.length),this.currentData.verticalIndices[0]=0,this.currentData.verticalIndices[1]=1),i.push(l),t.surfacePointForMode(l.latitude,l.longitude,l.altitude,this._altitudeMode,s);for(var c=1,h=this._positions.length;c<h;c++)if(e=this._positions[c],t.surfacePointForMode(e.latitude,e.longitude,e.altitude,this._altitudeMode,u),n=o.distanceTo(s),r=t.pixelSizeAtDistance(n),s.distanceTo(u)<8*r&&this.altitudeMode!==WorldWind.ABSOLUTE?i.push(e):this.makeSegment(t,l,e,s,u,i),l=e,s.copy(u),a){var f=2*(i.length-1);this.currentData.verticalIndices[2*c]=f,this.currentData.verticalIndices[2*c+1]=f+1}return i},d.prototype.makeSegment=function(t,e,n,r,i,a){var s,u,c,h,f,p,d=t.eyePoint,g=new o(0,0),m=0;if(this._pathType!==WorldWind.LINEAR||this._followTerrain){if(c=this._pathType===WorldWind.LINEAR?o.linearDistance(e,n):this._pathType===WorldWind.RHUMB_LINE?o.rhumbDistance(e,n):o.greatCircleDistance(e,n),this._altitudeMode!==WorldWind.CLAMP_TO_GROUND&&(m=.5*(e.altitude+n.altitude)),!((s=c*(t.globe.equatorialRadius+m*t.verticalExaggeration))<=0)){for(u=this._pathType===WorldWind.LINEAR?o.linearAzimuth(e,n):this._pathType===WorldWind.RHUMB_LINE?o.rhumbAzimuth(e,n):o.greatCircleAzimuth(e,n),this.scratchPoint.copy(r),h=0,f=0;h<1&&!(s<(f+=this._followTerrain?this._terrainConformance*t.pixelSizeAtDistance(this.scratchPoint.distanceTo(d)):s/this._numSubSegments)||s-f<1e-9);)p=(h=f/s)*c,this._pathType===WorldWind.LINEAR?o.linearLocation(e,u,p,g):this._pathType===WorldWind.RHUMB_LINE?o.rhumbLocation(e,u,p,g):o.greatCircleLocation(e,u,p,g),g.altitude=(1-h)*e.altitude+h*n.altitude,a.push(new l(g.latitude,g.longitude,g.altitude)),this._followTerrain&&t.surfacePointForMode(g.latitude,g.longitude,g.altitude,WorldWind.CLAMP_TO_GROUND,this.scratchPoint);a.push(n)}}else r.equals(i)||a.push(n)},d.prototype.computeRenderedPath=function(t,e){var n,r,i,o,a=this.mustDrawInterior(t)||this.mustDrawVerticals(t),s=Number.MAX_VALUE,u=t.eyePoint,l=(a?2:1)*e.length,c=new Float32Array(3*l),h=a?6:3,f=new p(0,0,0);n=this._followTerrain&&this.altitudeMode!==WorldWind.CLAMP_TO_GROUND?WorldWind.RELATIVE_TO_GROUND:this.altitudeMode;for(var d=0,g=e.length;d<g;d++)r=e[d],t.surfacePointForMode(r.latitude,r.longitude,r.altitude,n,f),(o=f.distanceToSquared(u))<s&&(s=o),f.subtract(this.currentData.referencePoint),c[i=h*d]=f[0],c[i+1]=f[1],c[i+2]=f[2],a&&(t.surfacePointForMode(r.latitude,r.longitude,0,WorldWind.CLAMP_TO_GROUND,f),(o=f.distanceToSquared(u))<s&&(s=o),f.subtract(this.currentData.referencePoint),c[i+3]=f[0],c[i+4]=f[1],c[i+5]=f[2]);return this.currentData.pointBufferHasExtrusionPoints=a,this.currentData.eyeDistance=Math.sqrt(s),c},d.prototype.mustDrawInterior=function(t){return this.activeAttributes.drawInterior&&this._extrude&&this._altitudeMode!==WorldWind.CLAMP_TO_GROUND},d.prototype.mustDrawVerticals=function(t){return this.activeAttributes.drawOutline&&this.activeAttributes.drawVerticals&&this.altitudeMode!==WorldWind.CLAMP_TO_GROUND},d.prototype.doRenderOrdered=function(t){var e,n,r,i,o,a=t.currentGlContext,s=t.currentProgram,l=this.currentData,c=l.tessellatedPoints.length/3;if(this.applyMvpMatrix(t),l.vboCacheKey||(l.vboCacheKey=t.gpuResourceCache.generateCacheKey()),(e=t.gpuResourceCache.resourceForKey(l.vboCacheKey))||(e=a.createBuffer(),t.gpuResourceCache.putResource(this.currentData.vboCacheKey,e,4*l.tessellatedPoints.length),l.fillVbo=!0),a.bindBuffer(a.ARRAY_BUFFER,e),l.fillVbo&&(a.bufferData(a.ARRAY_BUFFER,l.tessellatedPoints,a.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1)),s.loadTextureEnabled(a,!1),t.pickingMode&&(r=t.uniquePickColor()),this.mustDrawInterior(t)&&(n=this.activeAttributes.interiorColor,a.depthMask(n.alpha*this.layer.opacity>=1||t.pickingMode),s.loadColor(a,t.pickingMode?r:n),s.loadOpacity(a,t.pickingMode?1:this.layer.opacity),a.vertexAttribPointer(s.vertexPointLocation,3,a.FLOAT,!1,0,0),a.drawArrays(a.TRIANGLE_STRIP,0,c)),this.activeAttributes.drawOutline&&((this.mustDrawVerticals(t)&&this.mustDrawInterior(t)||this.altitudeMode===WorldWind.CLAMP_TO_GROUND)&&this.applyMvpMatrixForOutline(t),n=this.activeAttributes.outlineColor,a.depthMask(n.alpha*this.layer.opacity>=1||t.pickingMode),s.loadColor(a,t.pickingMode?r:n),s.loadOpacity(a,t.pickingMode?1:this.layer.opacity),a.lineWidth(this.activeAttributes.outlineWidth),this.currentData.pointBufferHasExtrusionPoints?(i=24,o=c/2):(i=12,o=c),a.vertexAttribPointer(s.vertexPointLocation,3,a.FLOAT,!1,i,0),a.drawArrays(a.LINE_STRIP,0,o),this.mustDrawVerticals(t)&&(l.verticalIndicesVboCacheKey||(l.verticalIndicesVboCacheKey=t.gpuResourceCache.generateCacheKey()),(e=t.gpuResourceCache.resourceForKey(l.verticalIndicesVboCacheKey))||(e=a.createBuffer(),t.gpuResourceCache.putResource(l.verticalIndicesVboCacheKey,e,4*l.verticalIndices.length),l.fillVbo=!0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e),l.fillVbo&&(a.bufferData(a.ELEMENT_ARRAY_BUFFER,l.verticalIndices,a.STATIC_DRAW),t.frameStatistics.incrementVboLoadCount(1)),a.vertexAttribPointer(s.vertexPointLocation,3,a.FLOAT,!1,0,0),a.drawElements(a.LINES,l.verticalIndices.length,a.UNSIGNED_SHORT,0))),l.fillVbo=!1,t.pickingMode){var h=new u(r,this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);t.resolvePick(h)}},d.prototype.beginDrawing=function(t){var e=t.currentGlContext;this.mustDrawInterior(t)&&e.disable(e.CULL_FACE),t.findAndBindProgram(n),e.enableVertexAttribArray(t.currentProgram.vertexPointLocation)},d.prototype.endDrawing=function(t){var e=t.currentGlContext;e.disableVertexAttribArray(t.currentProgram.vertexPointLocation),e.depthMask(!0),e.lineWidth(1),e.enable(e.CULL_FACE)},d})),i("formats/kml/geom/KmlLineString",["../../../util/Color","../KmlElements","./KmlGeometry","../styles/KmlStyle","../../../geom/Location","../util/KmlNodeTransformers","../../../shapes/Path","../../../geom/Position","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolyline","../../../util/WWUtil"],(function(t,e,n,r,i,o,a,s,u,l,c){"use strict";var h=function(t){n.call(this,t),this._style=null};return h.prototype=Object.create(n.prototype),Object.defineProperties(h.prototype,{kmlExtrude:{get:function(){return this._factory.specific(this,{name:"extrude",transformer:o.boolean})||!1}},kmlTessellate:{get:function(){return this._factory.specific(this,{name:"tessellate",transformer:o.boolean})||!1}},kmlAltitudeMode:{get:function(){return this._factory.specific(this,{name:"altitudeMode",transformer:o.string})||WorldWind.ABSOLUTE}},kmlPositions:{get:function(){return this._factory.specific(this,{name:"coordinates",transformer:o.positions})}},kmlCenter:{get:function(){var t=this.kmlPositions,e=0,n=0,r=0;return t.forEach((function(t){e+=t.latitude,n+=t.longitude,r+=t.altitude})),new s(e/this.kmlPositions.length,n/this.kmlPositions.length,r/this.kmlPositions.length)}}}),h.prototype.createPath=function(t,e){this.kmlAltitudeMode==WorldWind.CLAMP_TO_GROUND?this._renderable=new l(this.prepareLocations(),this.prepareAttributes(t.normal,e)):this._renderable=new a(this.prepareLocations(),this.prepareAttributes(t.normal,e)),t.highlight&&(this._renderable.highlightAttributes=this.prepareAttributes(t.highlight,e)),this.moveValidProperties()},h.prototype.render=function(t,e){n.prototype.render.call(this,t,e),e.lastStyle&&!this._renderable&&(this.createPath(e.lastStyle,e.fileCache),t.redrawRequested=!0),this._renderable&&(this._renderable.enabled=this.enabled,this._renderable.render(t))},h.prototype.prepareAttributes=function(t,e){var n=t&&t.generate(e)||{};return n._applyLighting=!0,n._drawOutline=!0,n._drawInterior=!0,n._drawVerticals=this.kmlExtrude||!1,n._outlineStippleFactor=0,n._outlineStipplePattern=61680,n._enableLighting=!0,new u(r.shapeAttributes(n))},h.prototype.prepareLocations=function(){return this.kmlPositions},h.prototype.moveValidProperties=function(){this._renderable.extrude=this.kmlExtrude||!1,this._renderable.altitudeMode=this.kmlAltitudeMode||WorldWind.ABSOLUTE,this._renderable.tesselate=this.kmlTesselate||!1},h.prototype.equals=function(t){return!!t&&c.arrayEquals(t.kmlPositions,this.kmlPositions)&&t.kmlExtrude==this.kmlExtrude&&t.kmlTessellate==this.kmlTessellate&&t.kmlAltitudeMode==this.kmlAltitudeMode},h.prototype.getTagNames=function(){return["LineString"]},e.addKey(h.prototype.getTagNames()[0],h),h})),i("formats/kml/geom/KmlLinearRing",["./KmlLineString","../KmlElements"],(function(t,e){"use strict";var n=function(e){t.call(this,e)};return(n.prototype=Object.create(t.prototype)).getTagNames=function(){return["LinearRing"]},e.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/KmlLocation",["./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlLongitude:{get:function(){return this._factory.specific(this,{name:"longitude",transformer:n.string})}},kmlLatitude:{get:function(){return this._factory.specific(this,{name:"latitude",transformer:n.string})}},kmlAltitude:{get:function(){return this._factory.specific(this,{name:"altitude",transformer:n.string})}}}),r.prototype.getTagNames=function(){return["Location"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/KmlLookAt",["./KmlAbstractView","./KmlElements","./util/KmlNodeTransformers","../../geom/Position"],(function(t,e,n,r){"use strict";var i=function(e){t.call(this,e)};return i.prototype=Object.create(t.prototype),Object.defineProperties(i.prototype,{kmlLongitude:{get:function(){return this._factory.specific(this,{name:"longitude",transformer:n.number})}},kmlLatitude:{get:function(){return this._factory.specific(this,{name:"latitude",transformer:n.number})}},kmlAltitude:{get:function(){return this._factory.specific(this,{name:"altitude",transformer:n.number})}},kmlHeading:{get:function(){return this._factory.specific(this,{name:"heading",transformer:n.number})}},kmlTilt:{get:function(){return this._factory.specific(this,{name:"tilt",transformer:n.number})}},kmlRange:{get:function(){return this._factory.specific(this,{name:"range",transformer:n.number})}},kmlAltitudeMode:{get:function(){return this._factory.specific(this,{name:"altitudeMode",transformer:n.string})}}}),i.prototype.update=function(t){if(t.wwd){var e=this.kmlAltitude||4e3;t.wwd.goTo(new r(this.kmlLatitude,this.kmlLongitude,e))}},i.prototype.getTagNames=function(){return["LookAt"]},e.addKey(i.prototype.getTagNames()[0],i),i})),i("formats/kml/geom/KmlMultiGeometry",["./../KmlElements","./KmlGeometry","../../../geom/Position"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t),this._style=t.style};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlShapes:{get:function(){return this._factory.all(this)}},kmlCenter:{get:function(){var t=this.kmlShapes.map((function(t){return t.kmlCenter})),e=0,r=0,i=0;return t.forEach((function(t){e+=t.latitude,r+=t.longitude,i+=t.altitude})),new n(e/t.length,r/t.length,i/t.length)}}}),r.prototype.render=function(t,n){e.prototype.render.call(this,t,n),this.kmlShapes.forEach((function(e){e.render(t,n)}))},r.prototype.getTagNames=function(){return["MultiGeometry"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/geom/KmlMultiTrack",["./../KmlElements","./KmlGeometry"],(function(t,e){"use strict";var n=function(t){e.call(this,t)};return(n.prototype=Object.create(e.prototype)).getTagNames=function(){return["gx:MultiTrack"]},t.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/features/KmlNetworkLink",["./../KmlElements","./KmlFeature","../KmlFile","../KmlLink","../util/KmlNodeTransformers","../util/KmlRefreshListener"],(function(t,e,n,r,i,o){"use strict";var a="refreshNetworkLinkEvent",s=function(t){e.call(this,t),this.isFeature=!0,this.resolvedFile=null,this.displayed=!1,this.isDownloading=!1};return s.prototype=Object.create(e.prototype),Object.defineProperties(s.prototype,{kmlRefreshVisibility:{get:function(){return this._factory.specific(this,{name:"refreshVisibility",transformer:i.boolean})}},kmlFlyToView:{get:function(){return this._factory.specific(this,{name:"flyToView",transformer:i.boolean})}},kmlLink:{get:function(){return this._factory.any(this,{name:r.prototype.getTagNames()})}}}),s.prototype.getTagNames=function(){return["NetworkLink"]},s.prototype.render=function(t,r){if(e.prototype.render.call(this,t,r),r.lastVisibility||this.displayed){if(!this.isDownloading&&!this.resolvedFile){this.isDownloading=!0;var i=this;new n(i.buildUrl(r.fileCache)).then((function(t){i.resolvedFile=t,i.isDownloading=!1,i.fireEvent(r)}))}this.resolvedFile&&!this.displayed&&(this.resolvedFile.render(t,r),this.handleRefresh(r))}},s.prototype.buildUrl=function(t){return this.kmlLink.kmlHref(t)},s.prototype.handleRefresh=function(t){var e=t.activeEvents;if((e=e.filter((function(t){return t.type==a}))).length>0){var r=this;new n(r.buildUrl(t.fileCache)).then((function(e){r.resolvedFile=e,r.fireEvent(t)}))}},s.prototype.fireEvent=function(t){var e=0;if("onInterval"==this.kmlLink.kmlRefreshMode)e=1e3*this.kmlLink.kmlRefreshInterval;else{if("onExpire"!=this.kmlLink.kmlRefreshMode)return;if(!this.resolvedFile)return;e=this.resolvedFile.getExpired()}t.listener.addEvent(new o.Event(a,e,null))},t.addKey(s.prototype.getTagNames()[0],s),s})),i("formats/kml/util/KmlUpdate",["./KmlChange","./KmlCreate","./KmlDelete","../KmlElements","../KmlObject","./KmlNodeTransformers"],(function(t,e,n,r,i,o){var a=function(t){i.call(this,t)};return a.prototype=Object.create(i.prototype),Object.defineProperties(a.prototype,{targetHref:{get:function(){return this._factory.specific(this,{name:"minRefreshPeriod",transformer:o.number})}},Change:{get:function(){return this._factory.any(this,{name:t.prototype.getTagNames()})}},Create:{get:function(){return this._factory.any(this,{name:e.prototype.getTagNames()})}},Delete:{get:function(){return this._factory.any(this,{name:n.prototype.getTagNames()})}}}),a.prototype.getTagNames=function(){return["Update"]},r.addKey(a.prototype.getTagNames()[0],a),a})),i("formats/kml/util/KmlNetworkLinkControl",["../KmlAbstractView","../KmlElements","../KmlObject","./KmlNodeTransformers","./KmlUpdate"],(function(t,e,n,r,i){var o=function(t){n.call(this,t)};return o.prototype=Object.create(n.prototype),Object.defineProperties(o.prototype,{minRefreshPeriod:{get:function(){return this._factory.specific(this,{name:"minRefreshPeriod",transformer:r.number})}},maxSessionLength:{get:function(){return this._factory.specific(this,{name:"maxSessionLength",transformer:r.number})}},cookie:{get:function(){return this._factory.specific(this,{name:"cookie",transformer:r.string})}},message:{get:function(){return this._factory.specific(this,{name:"message",transformer:r.string})}},linkName:{get:function(){return this._factory.specific(this,{name:"linkName",transformer:r.string})}},linkDescription:{get:function(){return this._factory.specific(this,{name:"linkDescription",transformer:r.string})}},linkSnippet:{get:function(){return this._factory.specific(this,{name:"linkSnippet",transformer:r.string})}},expires:{get:function(){return this._factory.specific(this,{name:"expires",transformer:r.date})}},Update:{get:function(){return this._factory.any(this,{name:i.prototype.getTagNames()})}},AbstractView:{get:function(){return this._factory.any(this,{name:t.prototype.getTagNames()})}}}),o.prototype.getTagNames=function(){return["NetworkLinkControl"]},e.addKey(o.prototype.getTagNames()[0],o),o})),i("formats/kml/KmlOrientation",["./KmlElements","./KmlObject","./util/KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlHeading:{get:function(){return this._factory.specific(this,{name:"heading",transformer:n.number})}},kmlTilt:{get:function(){return this._factory.specific(this,{name:"tilt",transformer:n.number})}},kmlRoll:{get:function(){return this._factory.specific(this,{name:"roll",transformer:n.number})}}}),r.prototype.getTagNames=function(){return["Orientation"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/geom/KmlPoint",["../../../util/Color","../KmlElements","./KmlGeometry","../../../geom/Location","../util/KmlNodeTransformers","../../../shapes/Polygon","../../../geom/Position"],(function(t,e,n,r,i,o,a){"use strict";var s=function(t){n.call(this,t),this._shape=null};return s.prototype=Object.create(n.prototype),Object.defineProperties(s.prototype,{kmlPosition:{get:function(){var t=this._factory.specific(this,{name:"coordinates",transformer:i.string}).split(",");return new a(t[1],t[0],t[2]||0)}},kmlExtrude:{get:function(){return this._factory.specific(this,{name:"extrude",transformer:i.boolean})}},kmlAltitudeMode:{get:function(){return this._factory.specific(this,{name:"altitudeMode",transformer:i.string})}},kmlCenter:{get:function(){return this.kmlPosition}}}),s.prototype.getTagNames=function(){return["Point"]},e.addKey(s.prototype.getTagNames()[0],s),s})),i("formats/kml/util/KmlViewVolume",["../KmlElements","../KmlObject","./KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlLeftFov:{get:function(){return this._factory.specific(this,{name:"leftFov",transformer:n.number})}},kmlRightFov:{get:function(){return this._factory.specific(this,{name:"rightFov",transformer:n.number})}},kmlBottomFov:{get:function(){return this._factory.specific(this,{name:"bottomFov",transformer:n.number})}},kmlTopFov:{get:function(){return this._factory.specific(this,{name:"topFov",transformer:n.number})}},kmlNear:{get:function(){return this._factory.specific(this,{name:"near",transformer:n.string})}}}),r.prototype.getTagNames=function(){return["ViewVolume"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/features/KmlPhotoOverlay",["../util/KmlImagePyramid","./../KmlElements","./KmlOverlay","../geom/KmlPoint","../util/KmlNodeTransformers","../util/KmlViewVolume"],(function(t,e,n,r,i,o){"use strict";var a=function(t){n.call(this,t)};return a.prototype=Object.create(n.prototype),Object.defineProperties(a.prototype,{kmlRotation:{get:function(){return this._factory.specific(this,{name:"rotation",transformer:i.string})}},kmlShape:{get:function(){return this._factory.specific(this,{name:"shape",transformer:i.string})}},kmlPoint:{get:function(){return this._factory.any(this,{name:r.prototype.getTagNames()})}},kmlViewVolume:{get:function(){return this._factory.any(this,{name:o.prototype.getTagNames()})}},kmlImagePyramid:{get:function(){return this._factory.any(this,{name:t.prototype.getTagNames()})}}}),a.prototype.getTagNames=function(){return["PhotoOverlay"]},e.addKey(a.prototype.getTagNames[0],a),a})),i("formats/kml/features/KmlPlacemark",["./../KmlElements","./KmlFeature","../geom/KmlGeometry","../styles/KmlStyle","../KmlTimeSpan","../KmlTimeStamp","../../../shapes/PlacemarkAttributes","../../../shapes/Placemark","../../../util/Color","../../../shapes/ShapeAttributes","../../../shapes/TextAttributes","../../../util/Offset","../../../util/WWUtil"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f){"use strict";var p=function(t){e.call(this,t)};return p.prototype=Object.create(e.prototype),Object.defineProperties(p.prototype,{kmlGeometry:{get:function(){return this._factory.any(this,{name:n.prototype.getTagNames()})}}}),p.prototype.render=function(t,n){e.prototype.render.call(this,t,n),(n=f.clone(n)).lastStyle&&!this._renderable&&this.kmlGeometry&&(this._renderable=new s(this.kmlGeometry.kmlCenter,!1,this.prepareAttributes(n.lastStyle.normal,n.fileCache)),n.lastStyle.highlight&&(this._renderable.highlightAttributes=this.prepareAttributes(n.lastStyle.highlight,n.fileCache)),this.moveValidProperties(),t.redrawRequested=!0),this._renderable&&this.kmlGeometry&&(this.kmlGeometry.render(t,n),this._renderable.render(t))},p.prototype.prepareAttributes=function(t,e){var n=t&&t.generate({},e)||{normal:{},highlight:{}},i=new a(r.placemarkAttributes(n));return i.imageOffset=new h(WorldWind.OFFSET_FRACTION,.3,WorldWind.OFFSET_FRACTION,0),i.imageColor=u.WHITE,i.labelAttributes=new c(r.textAttributes({_offset:new h(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,1),_color:u.YELLOW})),i.drawLeaderLine=!0,i.leaderLineAttributes=new l(r.shapeAttributes({_outlineColor:u.RED})),i},p.prototype.moveValidProperties=function(){this._renderable.label=this.kmlName||"",this._renderable.altitudeMode=this.kmlAltitudeMode||WorldWind.RELATIVE_TO_GROUND,this._renderable.enableLeaderLinePicking=!0},p.prototype.getTagNames=function(){return["Placemark"]},t.addKey(p.prototype.getTagNames()[0],p),p})),i("formats/kml/geom/KmlPolygon",["../../../util/Color","../KmlElements","./KmlGeometry","./KmlLinearRing","../styles/KmlStyle","../../../geom/Location","../util/KmlNodeTransformers","../../../shapes/Polygon","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolygon"],(function(t,e,n,r,i,o,a,s,u,l){"use strict";var c=function(t){n.call(this,t),this.initialized=!1};return c.prototype=Object.create(n.prototype),Object.defineProperties(c.prototype,{kmlExtrude:{get:function(){return this._factory.specific(this,{name:"extrude",transformer:a.boolean})}},kmlTessellate:{get:function(){return this._factory.specific(this,{name:"tessellate",transformer:a.boolean})}},kmlAltitudeMode:{get:function(){return this._factory.specific(this,{name:"altitudeMode",transformer:a.string})}},kmlOuterBoundary:{get:function(){return this._factory.specific(this,{name:"outerBoundaryIs",transformer:a.linearRing})}},kmlInnerBoundary:{get:function(){return this._factory.specific(this,{name:"innerBoundaryIs",transformer:a.linearRing})}},kmlCenter:{get:function(){return this.kmlOuterBoundary.kmlCenter}}}),c.prototype.createPolygon=function(t,e){this.kmlAltitudeMode===WorldWind.CLAMP_TO_GROUND||this.kmlInnerBoundary&&this.kmlInnerBoundary.kmlAltitudeMode===WorldWind.CLAMP_TO_GROUND||this.kmlOuterBoundary&&this.kmlOuterBoundary.kmlAltitudeMode===WorldWind.CLAMP_TO_GROUND?this._renderable=new l(this.prepareLocations(),this.prepareAttributes(t.normal,e)):this._renderable=new s(this.prepareLocations(),this.prepareAttributes(t.normal,e)),t.highlight&&(this._renderable.highlightAttributes=this.prepareAttributes(t.highlight,e)),this.moveValidProperties()},c.prototype.render=function(t,e){n.prototype.render.call(this,t,e),e.lastStyle&&!this._renderable&&(this.createPolygon(e.lastStyle,e.fileCache),t.redrawRequested=!0),this._renderable&&(this._renderable.enabled=this.enabled,this._renderable.render(t))},c.prototype.moveValidProperties=function(){this._renderable.extrude=this.kmlExtrude||!0,this._renderable.altitudeMode=this.kmlAltitudeMode||WorldWind.CLAMP_TO_GROUND},c.prototype.prepareAttributes=function(t,e){var n=t&&t.generate(e)||{};return n._drawVerticals=this.kmlExtrude||!1,n._applyLighting=!0,n._depthTest=!0,n._outlineStippleFactor=0,n._outlineStipplePattern=61680,n._enableLighting=!0,new u(i.shapeAttributes(n))},c.prototype.prepareLocations=function(){var t=[];return null!=this.kmlInnerBoundary?(t[0]=this.kmlInnerBoundary.kmlPositions,t[1]=this.kmlOuterBoundary.kmlPositions):t=this.kmlOuterBoundary.kmlPositions,t},c.prototype.getStyle=function(){return this._style},c.prototype.getTagNames=function(){return["Polygon"]},e.addKey(c.prototype.getTagNames()[0],c),c})),i("formats/kml/util/KmlScale",["./../KmlElements","../KmlObject","./KmlNodeTransformers"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t)};return r.prototype=Object.create(e.prototype),Object.defineProperties(r.prototype,{kmlX:{get:function(){return this._factory.specific(this,{name:"x",transformer:n.number})}},kmlY:{get:function(){return this._factory.specific(this,{name:"y",transformer:n.number})}},kmlZ:{get:function(){return this._factory.specific(this,{name:"z",transformer:n.number})}}}),r.prototype.getTagNames=function(){return["Scale"]},t.addKey(r.prototype.getTagNames()[0],r),r})),i("formats/kml/features/KmlScreenOverlay",["./../KmlElements","./KmlFeature","./KmlOverlay","../util/KmlNodeTransformers","../../../util/Offset","../../../shapes/ScreenImage"],(function(t,e,n,r,i,o){"use strict";var a=function(t){n.call(this,t)};return a.prototype=Object.create(n.prototype),Object.defineProperties(a.prototype,{kmlRotation:{get:function(){return this._factory.specific(this,{name:"rotation",transformer:r.number})}},kmlOverlayXYx:{get:function(){return this._factory.specific(this,{name:"overlayXY",transformer:r.attribute("x"),attribute:"kmlOverlayXYx"})}},kmlOverlayXYy:{get:function(){return this._factory.specific(this,{name:"overlayXY",transformer:r.attribute("y"),attribute:"kmlOverlayXYy"})}},kmlOverlayXYxunits:{get:function(){return this._factory.specific(this,{name:"overlayXY",transformer:r.attribute("xunits"),attribute:"kmlOverlayXYxunits"})}},kmlOverlayXYyunits:{get:function(){return this._factory.specific(this,{name:"overlayXY",transformer:r.attribute("yunits"),attribute:"kmlOverlayXYyunits"})}},kmlScreenXYx:{get:function(){return this._factory.specific(this,{name:"screenXY",transformer:r.attribute("x"),attribute:"kmlScreenXYx"})}},kmlScreenXYy:{get:function(){return this._factory.specific(this,{name:"screenXY",transformer:r.attribute("y"),attribute:"kmlScreenXYy"})}},kmlScreenXYxunits:{get:function(){return this._factory.specific(this,{name:"screenXY",transformer:r.attribute("xunits"),attribute:"kmlScreenXYxunits"})}},kmlScreenXYyunits:{get:function(){return this._factory.specific(this,{name:"screenXY",transformer:r.attribute("yunits"),attribute:"kmlScreenXYyunits"})}},kmlRotationXYx:{get:function(){return this._factory.specific(this,{name:"rotationXY",transformer:r.attribute("x"),attribute:"kmlRotationXYx"})}},kmlRotationXYy:{get:function(){return this._factory.specific(this,{name:"rotationXY",transformer:r.attribute("y"),attribute:"kmlRotationXYy"})}},kmlRotationXYxunits:{get:function(){return this._factory.specific(this,{name:"rotationXY",transformer:r.attribute("xunits"),attribute:"kmlRotationXYxunits"})}},kmlRotationXYyunits:{get:function(){return this._factory.specific(this,{name:"rotationXY",transformer:r.attribute("yunits"),attribute:"kmlRotationXYyunits"})}},kmlSizex:{get:function(){return this._factory.specific(this,{name:"size",transformer:r.attribute("x"),attribute:"kmlSizex"})}},kmlSizey:{get:function(){return this._factory.specific(this,{name:"size",transformer:r.attribute("y"),attribute:"kmlSizey"})}},kmlSizexunits:{get:function(){return this._factory.specific(this,{name:"size",transformer:r.attribute("xunits"),attribute:"kmlSizexunits"})}},kmlSizeyunits:{get:function(){return this._factory.specific(this,{name:"size",transformer:r.attribute("yunits"),attribute:"kmlSizeyunits"})}}}),a.prototype.render=function(t,n){e.prototype.render.call(this,t,n),this._renderable||this.kmlIcon&&(this._renderable=new o(new i(this.kmlScreenXYxunits,this.kmlScreenXYx,this.kmlScreenXYyunits,this.kmlScreenXYy),this.kmlIcon.kmlHref(n.fileCache)),this._renderable.imageOffset=new i(this.kmlOverlayXYxunits,this.kmlOverlayXYx,this.kmlOverlayXYyunits,this.kmlOverlayXYy),t.redrawRequested=!0),this._renderable&&this._renderable.render(t)},a.prototype.getTagNames=function(){return["ScreenOverlay"]},t.addKey(a.prototype.getTagNames()[0],a),a})),i("formats/kml/features/KmlTour",["./../KmlElements","./KmlFeature"],(function(t,e){"use strict";var n=function(t){e.call(this,t)};return(n.prototype=Object.create(e.prototype)).getTagNames=function(){return["gx:Tour"]},t.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/geom/KmlTrack",["./../KmlElements","./KmlGeometry"],(function(t,e){"use strict";var n=function(t){e.call(this,t)};return(n.prototype=Object.create(e.prototype)).getTagNames=function(){return["gx:Track"]},t.addKey(n.prototype.getTagNames()[0],n),n})),i("formats/kml/controls/KmlTreeVisibility",["../../../util/WWUtil","./KmlControls"],(function(t,e){"use strict";var n=function(t,n){e.apply(this),this._visualElementId=t,this._wwd=n};return(n.prototype=Object.create(e.prototype)).hook=function(t,e){e.isFeature&&this.createControls(t)},n.prototype.createControls=function(e){var n,r=e.kmlName||e.id||t.guid(),i=e.enabled&&!0===e.kmlVisibility,o=document.createElement("div"),a=document.createElement("input");a.setAttribute("type","checkbox"),i&&a.setAttribute("checked","checked"),a.addEventListener("click",(function(){i=!i,s.updateDescendants(e,i)}),!0),o.appendChild(a),(n=e.kmlAbstractView?document.createElement("a"):document.createElement("span")).appendChild(document.createTextNode(r)),n.addEventListener("click",(function(){e.kmlAbstractView&&e.kmlAbstractView.update({wwd:s._wwd})}),!0),o.appendChild(n),document.getElementById(this._visualElementId).appendChild(o);var s=this},n.prototype.updateDescendants=function(t,e){t.controlledVisibility=e,this._wwd.redraw()},n})),i("layer/LandsatRestLayer",["../error/ArgumentError","../geom/Location","../util/Logger","../geom/Sector","../layer/TiledImageLayer","../util/LevelRowColumnUrlBuilder","../util/WWUtil"],(function(t,e,n,r,i,o,a){"use strict";var s=function(t,n,s){var u=a.urlPath(t+"/"+n);i.call(this,r.FULL_SPHERE,new e(36,36),10,"image/png",u,512,512),this.displayName=s,this.pickEnabled=!1,this.urlBuilder=new o(t,n)};return s.prototype=Object.create(i.prototype),s})),i("util/measure/LengthMeasurer",["../../error/ArgumentError","../../geom/Location","../Logger","./MeasurerUtils","../../geom/Position","../../geom/Vec3"],(function(t,e,n,r,i,o){var a=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"LengthMeasurer","constructor","missingWorldWindow"));this.wwd=e,this.DEFAULT_MIN_SEGMENT_LENGTH=30,this._maxSegmentLength=1e5,this._lengthTerrainSamplingSteps=128,this.subdividedPositions=null};return Object.defineProperties(a.prototype,{maxSegmentLength:{get:function(){return this._maxSegmentLength},set:function(t){this._maxSegmentLength=t}},lengthTerrainSamplingSteps:{get:function(){return this._lengthTerrainSamplingSteps},set:function(t){this._lengthTerrainSamplingSteps=t}}}),a.prototype.getLength=function(t,e,n){return n=n||WorldWind.GREAT_CIRCLE,this.subdividedPositions=null,this.computeLength(t,e,n)},a.prototype.getPathLength=function(t){return this.subdividedPositions=null,this.computeLength(t.positions,t.followTerrain,t.pathType)},a.prototype.getGeographicDistance=function(t,n){if(t instanceof WorldWind.Path)var r=t.positions,i=t.pathType;else Array.isArray(t)&&(r=t,i=n||WorldWind.GREAT_CIRCLE);if(!r||r.length<2)return-1;var o=e.greatCircleDistance;i===WorldWind.RHUMB_LINE?o=e.rhumbDistance:i===WorldWind.LINEAR&&(o=e.linearDistance);for(var a=0,s=0,u=r.length-1;s<u;s++)a+=o(r[s],r[s+1]);return a*this.wwd.globe.equatorialRadius},a.prototype.computeLength=function(t,e,n){if(!t||t.length<2)return-1;var i=this.wwd.globe;if(null==this.subdividedPositions){var a=this._maxSegmentLength;e&&(a=this.computeLength(t,!1,n)/this._lengthTerrainSamplingSteps,a=Math.min(Math.max(a,this.DEFAULT_MIN_SEGMENT_LENGTH),this._maxSegmentLength)),this.subdividedPositions=r.subdividePositions(i,t,e,n,a)}var s=0,u=this.subdividedPositions[0],l=new o(0,0,0),c=new o(0,0,0);l=i.computePointFromPosition(u.latitude,u.longitude,u.altitude,l);for(var h=1,f=this.subdividedPositions.length;h<f;h++){var p=this.subdividedPositions[h];c=i.computePointFromPosition(p.latitude,p.longitude,p.altitude,c),s+=l.distanceTo(c),l.copy(c)}return s},a})),i("navigate/Navigator",["../ArcBallCamera","../error/ArgumentError","../FirstPersonCamera","../util/Logger"],(function(t,e,n,r){"use strict";var i=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"Navigator","constructor","Missing camera."));this._camera=t};return Object.defineProperties(i.prototype,{camera:{get:function(){return this._camera},set:function(t){this._camera=t}},lookAtLocation:{get:function(){return this.camera.position},set:function(t){this.camera.position=t}},range:{get:function(){return this.camera.range},set:function(t){this.camera.range=t}},heading:{get:function(){return this.camera.heading},set:function(t){this.camera.heading=t}},tilt:{get:function(){return this.camera.tilt},set:function(t){this.camera.tilt=t}},roll:{get:function(){return this.camera.roll},set:function(t){this.camera.roll=t}}}),i.prototype.getAsFirstPersonCamera=function(t){return t=t||new n(this.camera.wwd),this.camera instanceof n?t.copy(this.camera):this.camera.toFirstPerson(t),t},i.prototype.getAsArcBallCamera=function(e){return e=e||new t(this.camera.wwd),this.camera instanceof n?this.camera.toArcBall(e):e.copy(this.camera),e},i})),i("navigate/LookAtNavigator",["../navigate/Navigator"],(function(t){"use strict";return t})),i("cache/MemoryCacheListener",["../util/Logger","../error/UnsupportedOperationError"],(function(t,e){"use strict";var n=function(){};return n.prototype.entryRemoved=function(n,r){throw new e(t.logMessage(t.LEVEL_SEVERE,"MemoryCacheListener","entryRemoved","abstractInvocation"))},n.prototype.removalError=function(n,r,i){throw new e(t.logMessage(t.LEVEL_SEVERE,"MemoryCacheListener","removalError","abstractInvocation"))},n})),i("util/NominatimGeocoder",["../util/Logger"],(function(t){"use strict";var e=function(){this.service="https://open.mapquestapi.com/nominatim/v1/search/"};return e.prototype.lookup=function(t,e,n){var r=this.service+t.replace(" ","%20")+"?format=json",i=new XMLHttpRequest,o=this;r+="&key="+(n||"lUvVRchXGGDh5Xwk3oidrXeIDAAevOUS"),i.open("GET",r,!0),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var t=JSON.parse(i.responseText);e(o,t)}},i.send(null)},e})),i("ogc/openSearch/OpenSearchConstants",[],(function(){"use strict";return{COLLECTION:"collection",RESULTS:"results"}})),i("ogc/openSearch/OpenSearchNamespaces",[],(function(){"use strict";return{openSearch:"http://a9.com/-/spec/opensearch/1.1/",geo:"http://a9.com/-/opensearch/extensions/geo/1.0/",time:"http://a9.com/-/opensearch/extensions/time/1.0/",parameters:"http://a9.com/-/spec/opensearch/extensions/parameters/1.0/",eo:"http://a9.com/-/opensearch/extensions/eo/1.0/",gml:"http://www.opengis.net/gml",dc:"http://purl.org/dc/elements/1.1/",georss:"http://www.georss.org/georss"}})),i("ogc/openSearch/OpenSearchUtils",["../../util/Promise"],(function(t){"use strict";return{getChildTextContent:function(t,e,n){var r=this.getXmlElements(t,e,n);return r.length?r[0].textContent.trim():""},getTextContent:function(t){return t.textContent.trim()},getXmlElements:function(t,e,n){var r;return n?r=t.getElementsByTagNameNS(n,e):(r=t.getElementsByTagName(e)).length||(r=t.getElementsByTagNameNS("*",e)),r&&r.length?[].slice.call(r):[]},getNodeAttributes:function(t,e){for(var n=0,r=t.attributes.length;n<r;n++){var i=t.attributes[n];e[i.name]=i.value}return e},arrayFind:function(t,e,n){if(!Array.isArray(t))throw new Error("arrayFind - missing array");if("function"!=typeof e)throw new Error("arrayFind - missing predicate");for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t))return t[r]},parseXml:function(t){return(new DOMParser).parseFromString(t,"text/xml").documentElement},fetch:function(e){return new t((function(t,n){var r=new XMLHttpRequest;r.onload=function(){return this.status>=200&&this.status<300?t(this.response):n(new Error(this.status+" "+this.statusText))},r.onerror=function(){return n(new Error("Unable to fetch data"))},r.ontimeout=function(){return n(new Error("Request timed out"))},r.open(e.method,e.url,!0,e.user,e.password),r.withCredentials=e.withCredentials,r.timeout=e.timeout,r.responseType=e.responseType,Object.keys(e.headers).forEach((function(t){r.setRequestHeader(t,e.headers[t])})),r.send(e.body)}))}}})),i("ogc/openSearch/responseFormats/atomParser/OpenSearchGeoRssParser",["../../OpenSearchNamespaces","../../OpenSearchUtils"],(function(t,e){"use strict";var n={parseSimple:function(t){var e={type:"",coordinates:[]};return"polygon"===t.localName?(e.type="Polygon",e.coordinates.push(n.parseLocations(t))):"point"===t.localName?(e.type="Point",e.coordinates=n.parseLocations(t)):"line"===t.localName&&(e.type="LineString",e.coordinates=n.parseLocations(t)),e},parseGml:function(t){var r={type:"",coordinates:[]},i=t.firstElementChild;switch(i.localName){case"Point":r.type="Point";var o=e.getXmlElements(i,"pos")[0];o&&(r.coordinates=n.parseLocations(o));break;case"LineString":r.type="LineString";var a=e.getXmlElements(i,"posList")[0];a&&(r.coordinates=n.parseLocations(a));break;case"Polygon":r.type="Polygon",r.coordinates=n.parseGmlPolygon(i);break;case"MultiSurface":r.type="MultiPolygon",r.coordinates=[n.parseMultiPolygon(i)]}return r},parseBox:function(t){var e=n.parseLocations(t);return[].concat.apply([],e)},parseLocations:function(t){for(var e=t.textContent.trim().replace(/\s+/g," ").split(" "),n=[],r=0;r<e.length;r+=2){var i=+e[r],o=+e[r+1];n.push([o,i])}return n},parseGmlPolygon:function(t){for(var r=e.getXmlElements(t,"posList")[0],i=e.getXmlElements(t,"interior"),o=n.parseLocations(r),a=[],s=0;s<i.length;s++){var u=e.getXmlElements(i[s],"posList")[0];if(u){var l=n.parseLocations(u);a.push(l)}}return o.concat(a)},parseMultiPolygon:function(t){var r=e.getXmlElements(t,"surfaceMember").map((function(t){return e.getXmlElements(t,"Polygon")})),i=e.getXmlElements(t,"surfaceMembers")[0];return i&&(r=r.concat(e.getXmlElements(i,"Polygon"))),r.map((function(t){return n.parseGmlPolygon(t)}))}};return n})),i("ogc/openSearch/responseFormats/atomParser/OpenSearchAtomParser",["../../OpenSearchConstants","./OpenSearchGeoRssParser"],(function(t,e){"use strict";var n={parse:function(t,e){for(var r=(new DOMParser).parseFromString(t,"text/xml").documentElement,i={id:"",type:"FeatureCollection",features:[],properties:{}},o=i.properties,a=0,s=r.childNodes.length;a<s;a++){var u=r.childNodes[a];if(1===u.nodeType)switch(u.localName){case"id":i.id=u.textContent.trim();break;case"title":case"updated":case"rights":o[u.localName]=u.textContent.trim();break;case"generator":o.creator=u.textContent.trim();break;case"totalResults":case"startIndex":case"itemsPerPage":o[u.localName]=+u.textContent.trim();break;case"Query":o.query=n.parseAttributesAsString(u);break;case"link":n.parseFeedLinks(u,o);break;case"entry":i.features.push(n.parseEntry(u,e))}}return i},parseFeedLinks:function(t,e){e.links||(e.links={});var r=e.links,i=t.getAttribute("rel")||"alternate",o=n.parseLink(t);"first"===i||"next"===i||"last"===i?r[i]=o:("alternate"===i&&(i="alternates"),r[i]||(r[i]=[]),r[i].push(o))},parseLink:function(t){var e={},n=t.getAttribute("href"),r=t.getAttribute("type"),i=t.getAttribute("title"),o=t.getAttribute("hreflang");return e.href=n,r&&(e.type=r),i&&(e.title=i),o&&(e.hreflang=o),e},parseAttributesAsString:function(t){for(var e="",n=0,r=t.attributes.length;n<r;n++){var i=t.attributes[n];e+=i.name+'="'+i.value+'"',n<r-1&&(e+=" ")}return e},parseEntry:function(t,r){for(var i={id:"",type:"Feature",bbox:[],geometry:null,properties:{}},o=i.properties,a=0,s=t.childNodes.length;a<s;a++){var u=t.childNodes[a];if(1===u.nodeType)switch(u.localName){case"id":i.id=u.textContent.trim();break;case"title":case"date":case"identifier":case"updated":case"rights":case"published":o[u.localName]=u.textContent.trim();break;case"category":o.categories||(o.categories=[]),o.categories.push({label:u.getAttribute("label"),term:u.getAttribute("term")});break;case"link":n.parseEntryLinks(u,i,r);break;case"polygon":case"point":case"line":i.geometry=e.parseSimple(u);break;case"where":i.geometry=e.parseGml(u);break;case"box":i.bbox=e.parseBox(u)}}return i},parseEntryLinks:function(e,r,i){if(i===t.COLLECTION){r.links||(r.links={});var o=r.links}else r.properties.links||(r.properties.links={}),o=r.properties.links;var a=e.getAttribute("rel")||"alternate";"alternate"===a&&(a="alternates"),o[a]||(o[a]=[]),o[a].push(n.parseLink(e))}};return n})),i("ogc/openSearch/descriptionDocument/OpenSearchParameter",["../OpenSearchUtils"],(function(t){"use strict";var e=function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g){this._internalType=t,this.name=e,this.value=n,this.required=r,this.replaceable=i,this.ns=o||"",this.minimum=a,this.maximum=s,this.pattern=u,this.title=l,this.minExclusive=c,this.maxExclusive=h,this.minInclusive=f,this.maxInclusive=p,this.step=d,this.options=g||[]};return e.fromQuery=function(t){var n=t.split("="),r=n[0],i=n[1],o=!0;if("{"===i[0])var a=i.slice(1,i.length-1);else a=i,o=!1;var s=!0;"?"===a[a.length-1]&&(s=!1,a=a.slice(0,a.length-1));var u=a.split(":"),l="";return u&&2===u.length&&(l=u[0],a=u[1]),new e(e.types.TEMPLATE,r,a,s,o,l)},e.fromNode=function(n){var r=n.getAttribute("name"),i=n.getAttribute("value")||"",o=!0;if("{"===i[0])var a=i.slice(1,i.length-1);else a=i,o=!1;var s="",u=a.split(":");u&&2===u.length&&(s=u[0],a=u[1]);var l,c=n.getAttribute("minimum");c?l=(c=+c)>0:(c=1,l=!1);var h=n.getAttribute("maximum"),f=1;h&&(f="*"===h?h:+h);var p=n.getAttribute("pattern")||"",d=n.getAttribute("title")||"",g=+n.getAttribute("minExclusive")||"",m=+n.getAttribute("maxExclusive")||"",y=+n.getAttribute("minInclusive")||"",v=+n.getAttribute("maxInclusive")||"",E=+n.getAttribute("step")||"",_=t.getXmlElements(n,"Option"),b=[];if(_.length)for(var S=0,w=_.length;S<w;S++)b.push({label:_[S].getAttribute("label")||"",value:_[S].getAttribute("value")});return new e(e.types.NODE,r,a,l,o,s,c,f,p,d,g,m,y,v,E,b)},e.prototype.merge=function(t){var n=t.name,r=t.value,i=t.required,o=t.replaceable,a=t.ns;if(this._internalType===e.types.TEMPLATE&&(n=this.name,r=this.value,i=this.required,o=this.replaceable,a=this.ns),this.options&&t.options)var s=this.options.concat(t.options);else s=this.options||t.options||[];return new e(e.types.MIX,n,r,i,o,a,this.minimum||t.minimum,this.maximum||t.maximum,this.pattern||t.pattern,this.title||t.title,this.minExclusive||t.minExclusive,this.maxExclusive||t.maxExclusive,this.minInclusive||t.minInclusive,this.maxInclusive||t.maxInclusive,this.step||t.step,s)},e.types={TEMPLATE:"TEMPLATE",NODE:"NODE",MIX:"MIX"},e})),i("ogc/openSearch/descriptionDocument/OpenSearchUrl",["../../../util/Logger","../OpenSearchConstants","../OpenSearchNamespaces","./OpenSearchParameter","../OpenSearchUtils"],(function(t,e,n,r,i){"use strict";var o=function(){this._type="",this._method="",this._encType="",this._template="",this._parameters=[],this._indexOffset=1,this._pageOffset=1,this._relations=[],this._baseUrl="",this._paramsByName=Object.create(null),this._staticParams=[]};return Object.defineProperties(o.prototype,{type:{get:function(){return this._type}},method:{get:function(){return this._method}},encType:{get:function(){return this._encType}},template:{get:function(){return this._template}},parameters:{get:function(){return this._parameters}},indexOffset:{get:function(){return this._indexOffset}},pageOffset:{get:function(){return this._pageOffset}},relations:{get:function(){return this._relations}},paramsByName:{get:function(){return this._paramsByName}},staticParams:{get:function(){return this._staticParams}}}),o.prototype.parse=function(t){this.parseAttributes(t);var e=this.parseTemplate(this._template);if(!e)return this;var n=this.parseNodeParams(t),r=n.filter((function(t){return null==i.arrayFind(e,(function(e){return e.name===t.name}))})),o=e.map((function(t){var e=i.arrayFind(n,(function(e){return e.name===t.name}));return e?t.merge(e):t})).concat(r);return this._parameters=o.filter((function(t){return t.replaceable})),this._staticParams=o.filter((function(t){return!t.replaceable})),this._parameters.forEach((function(t){this._paramsByName[t.name]=t}),this),this},o.prototype.parseAttributes=function(t){this._type=t.getAttribute("type"),this._template=t.getAttribute("template");var r=t.getAttribute("rel");this._relations=r?r.split(" "):[e.RESULTS],this._indexOffset=t.getAttribute("indexOffset"),this._indexOffset?this._indexOffset=+this._indexOffset:this._indexOffset=1,this._pageOffset=t.getAttribute("pageOffset"),this._pageOffset?this._pageOffset=+this._pageOffset:this._pageOffset=1,this._method=t.getAttributeNS(n.parameters,"method")||"GET",this._encType=t.getAttributeNS(n.parameters,"enctype")||"application/x-www-form-urlencoded"},o.prototype.parseTemplate=function(t){if(t){var e=[],n=o.createUrlParser();n.href=t;var i=n.search;if(this._baseUrl=n.protocol+"//"+n.host+n.port+n.pathname,this._baseUrl=n.protocol+"//"+n.hostname,n.port&&(this._baseUrl+=":"+n.port),n.pathname&&("/"===n.pathname[0]?this._baseUrl+=n.pathname:this._baseUrl+="/"+n.pathname),!i)return e;"?"===i[0]&&(i=i.slice(1));for(var a=(i=i.replace(/&(?!amp;)/g,"&amp;")).split("&amp;"),s=0;s<a.length;s++)e.push(r.fromQuery(a[s]));return e}},o.prototype.parseNodeParams=function(t){return i.getXmlElements(t,"Parameter").map((function(t){return r.fromNode(t)}))},o.prototype.isCompatible=function(e){if(!e.every((function(t){return t.name in this._paramsByName}),this))return!1;var n=this._parameters.filter((function(t){return t.required&&!e.some((function(e){return e.name===t.name}))}));return n.length>0&&t.logMessage(t.LEVEL_WARNING,"OpenSearchUrl","isCompatible","Missing required params: ",n.map((function(t){return t.name+": "+t.value})).join(",")),0===n.length},o.prototype.createRequestUrl=function(t){t=t||[];var e=this._baseUrl,n=this._staticParams.map((function(t){return t.name+"="+t.value})).concat(t.map((function(t){return t.name+"="+this.serializeParam(t.value)}),this)).join("&");return n.length&&(e+="?"+n),e},o.prototype.createRequestBody=function(t){var e=new FormData;return this.createQueryParts(t).forEach((function(t){e.append(t.name,t.value)})),e},o.prototype.createQueryParts=function(t){return t=t||[],this._staticParams.map((function(t){return{name:t.name,value:this.serializeParam(t.value)}}),this).concat(t.map((function(t){return{name:t.name,value:this.serializeParam(t.value)}}),this))},o.prototype.serializeParam=function(t){return"string"==typeof t?encodeURIComponent(t):"number"==typeof t?t.toString():t instanceof Date?t.toISOString():t&&"object"==typeof t&&null!=t.minLongitude&&null!=t.minLatitude&&null!=t.maxLongitude&&null!=t.maxLatitude?t.minLongitude+","+t.minLatitude+","+t.maxLongitude+","+t.maxLatitude:encodeURIComponent(String(t))},o.createUrlParser=function(){return o.urlParser||(o.urlParser=document.createElement("a")),o.urlParser},o})),i("ogc/openSearch/descriptionDocument/OpenSearchDescriptionDocument",["../../../error/ArgumentError","../../../util/Logger","../OpenSearchNamespaces","./OpenSearchUrl","../OpenSearchUtils"],(function(t,e,n,r,i){"use strict";var o=function(o){if(!o)throw new t(e.logMessage(e.LEVEL_SEVERE,"OpenSearchDescriptionDocument","constructor","missingDomElement"));var a=n.openSearch;this._namespaces=i.getNodeAttributes(o,{}),this._shortName=i.getChildTextContent(o,"ShortName",a),this._description=i.getChildTextContent(o,"Description",a),this._urls=i.getXmlElements(o,"Url",a).map((function(t){return(new r).parse(t)})),this._contact=i.getChildTextContent(o,"Contact",a),this._tags=i.getChildTextContent(o,"Tags",a),this._longName=i.getChildTextContent(o,"LongName",a),this._images=i.getXmlElements(o,"Image",a).map(this.parseImage),this._queries=i.getXmlElements(o,"Query",a).map(this.parseQuery),this._developer=i.getChildTextContent(o,"Developer",a),this._attribution=i.getChildTextContent(o,"Attribution",a),this._syndicationRight=i.getChildTextContent(o,"SyndicationRight",a),this._adultContent=i.getChildTextContent(o,"AdultContent",a),"false"===this._adultContent?this._adultContent=!1:"true"===this._adultContent&&(this._adultContent=!0),this._languages=i.getXmlElements(o,"Language",a).map(i.getTextContent),this._inputEncodings=i.getXmlElements(o,"InputEncoding",a).map(i.getTextContent),this._outputEncodings=i.getXmlElements(o,"OutputEncoding",a).map(i.getTextContent)};return Object.defineProperties(o.prototype,{shortName:{get:function(){return this._shortName}},description:{get:function(){return this._description}},urls:{get:function(){return this._urls}},contact:{get:function(){return this._contact}},tags:{get:function(){return this._tags}},longName:{get:function(){return this._longName}},images:{get:function(){return this._images}},queries:{get:function(){return this._queries}},developer:{get:function(){return this._developer}},attribution:{get:function(){return this._attribution}},syndicationRight:{get:function(){return this._syndicationRight}},adultContent:{get:function(){return this._adultContent}},languages:{get:function(){return this._languages}},inputEncodings:{get:function(){return this._inputEncodings}},outputEncodings:{get:function(){return this._outputEncodings}}}),o.prototype.parseImage=function(t){var e={};return i.getNodeAttributes(t,e),e.src=t.textContent,e.height&&(e.height=Number(e.height)),e.width&&(e.width=Number(e.width)),e},o.prototype.parseQuery=function(t){var e={};return i.getNodeAttributes(t,e),e},o.prototype.findFirstSearchUrl=function(t){return this.findCompatibleUrls(t.searchParams,t.requestOptions,t.supportedFormats)[0]||null},o.prototype.hasExtension=function(t){var e=this._namespaces,n=!1;return Object.keys(e).forEach((function(r){e[r]===t&&(n=!0)})),n},o.prototype.findCompatibleUrls=function(t,e,n){var r=this.urls.filter((function(t){return-1!==n.indexOf(t.type)}));return r=r.filter((function(t){return-1!==t.relations.indexOf(e.relation)})),e.type&&(r=r.filter((function(t){return t.type===e.type}))),e.method&&(r=r.filter((function(t){return t.method===e.method}))),t&&(r=r.filter((function(e){return e.isCompatible(t)}))),r},o})),i("ogc/openSearch/responseFormats/OpenSearchParserRegistry",["../../../error/ArgumentError","../../../util/Logger","../OpenSearchConstants"],(function(t,e,n){"use strict";var r=function(){this._entries=Object.create(null)};return r.prototype.registerParser=function(n,r,i){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"OpenSearchParserRegistry","registerParser","The specified type is missing."));if("string"!=typeof n)throw new t(e.logMessage(e.LEVEL_SEVERE,"OpenSearchParserRegistry","registerParser","The specified type is not a string."));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"OpenSearchParserRegistry","registerParser","The specified rel is missing."));if("string"!=typeof r)throw new t(e.logMessage(e.LEVEL_SEVERE,"OpenSearchParserRegistry","registerParser","The specified rel is not a string"));if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"OpenSearchParserRegistry","registerParser","The specified parser is missing."));if("object"!=typeof i)throw new t(e.logMessage(e.LEVEL_SEVERE,"OpenSearchParserRegistry","registerParser","The specified parser is not an object."));if("function"!=typeof i.parse)throw new t(e.logMessage(e.LEVEL_SEVERE,"OpenSearchParserRegistry","registerParser","The specified parser does not have a parse method."));this._entries[n]||(this._entries[n]=Object.create(null)),this._entries[n][r]=i},r.prototype.getParser=function(t,e){if(t&&"string"==typeof t&&"string"==typeof e&&(e=e||n.RESULTS,this._entries[t]))return this._entries[t][e]},r.prototype.getFormats=function(){return Object.keys(this._entries)},r.prototype.removeParser=function(t,e){this._entries[t]&&(e||delete this._entries[t],delete this._entries[t][e])},r})),i("ogc/openSearch/OpenSearchRequest",["./OpenSearchConstants"],(function(t){var e=function t(e){var n=t.defaultOptions;e=e||n,this.url=e.url||n.url,this.method=e.method||n.method,this.encType=e.encType||n.encType,this.type=e.type||n.type,this.relation=e.relation||n.relation,this.withCredentials=e.withCredentials||n.withCredentials,this.timeout=e.timeout||n.timeout,this.headers=e.headers||{},this.body=e.body||n.body,this.responseType=e.responseType||n.responseType,this.user=e.user||n.user,this.password=e.password||n.password};return e.prototype.addHeader=function(t,e){var n=this.getHeader(t);this.headers[t]=n?n+","+e:e},e.prototype.getHeader=function(t){return this.headers[t]},e.defaultOptions={url:"",method:"",encType:"application/x-www-form-urlencoded",type:"",relation:t.RESULTS,withCredentials:!1,timeout:0,headers:null,body:null,responseType:"text",user:null,password:null},e})),i("ogc/openSearch/OpenSearchService",["../../error/ArgumentError","../../util/Logger","./responseFormats/atomParser/OpenSearchAtomParser","./OpenSearchConstants","./descriptionDocument/OpenSearchDescriptionDocument","./responseFormats/OpenSearchParserRegistry","./OpenSearchRequest","./OpenSearchUtils","../../util/Promise"],(function(t,e,n,r,i,o,a,s,u){"use strict";var l=function(){this._url="",this._descriptionDocument=null,this._rawDescriptionDocument=null,this._parserRegistry=new o,this.registerDefaultParsers()};return Object.defineProperties(l.prototype,{url:{get:function(){return this._url}},descriptionDocument:{get:function(){return this._descriptionDocument}},rawDescriptionDocument:{get:function(){return this._rawDescriptionDocument}},parserRegistry:{get:function(){return this._parserRegistry},set:function(t){this._parserRegistry=t}}}),l.create=function(t){var e=new l,n=new a(t);return n.method=n.method||"GET",n.url?(this._url=n.url,s.fetch(n).then((function(t){var n=s.parseXml(t);return e._rawDescriptionDocument=n,e._descriptionDocument=new i(n),e}))):u.reject(new Error("OpenSearchService discover - no url provided"))},l.prototype.search=function(t,e){if(!this._descriptionDocument)return u.reject(new Error("OpenSearchService search - no descriptionDocument, create the service via create first"));var n=this,r=new a(e),i=this.getSupportedFormats(),o=this._descriptionDocument.findFirstSearchUrl({searchParams:t,requestOptions:r,supportedFormats:i});if(!o)return u.reject(new Error("OpenSearchService - no suitable Url found"));if(r.method=o.method,r.encType=o.encType,"GET"===o.method)r.url=o.createRequestUrl(t);else{if("application/x-www-form-urlencoded"!==o.encType&&"multipart/form-data"!==o.encType)return u.reject(new Error("OpenSearchService search - unsupported encoding"));r.url=o._baseUrl,r.body=o.createRequestBody(t),r.addHeader("Content-Type",o.encType)}return s.fetch(r).then((function(t){var e=n.getParser(o.type,r.relation);if(!e)throw new Error("OpenSearchService search - no suitable response parser found");return e.parse(t,r.relation)}))},l.prototype.findUrl=function(t,e){return s.arrayFind(this._descriptionDocument.urls,t,e)},l.prototype.registerParser=function(t,e,n){this.parserRegistry.registerParser(t,e,n)},l.prototype.getSupportedFormats=function(){return this.parserRegistry.getFormats()},l.prototype.getParser=function(t,e){return this.parserRegistry.getParser(t,e)},l.prototype.removeParser=function(t,e){this.parserRegistry.removeParser(t,e)},l.prototype.registerDefaultParsers=function(){this.registerParser("application/atom+xml",r.RESULTS,n),this.registerParser("application/atom+xml",r.COLLECTION,n),this.registerParser("application/vnd.geo+json",r.RESULTS,window.JSON),this.registerParser("application/vnd.geo+json",r.COLLECTION,window.JSON),this.registerParser("application/geo+json",r.RESULTS,window.JSON),this.registerParser("application/geo+json",r.COLLECTION,window.JSON),this.registerParser("application/json",r.RESULTS,window.JSON),this.registerParser("application/json",r.COLLECTION,window.JSON)},l})),i("ogc/ows/OwsLanguageString",["../../error/ArgumentError","../../util/Logger"],(function(t,e){"use strict";return function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"LanguageString","constructor","missingDomElement"));this.value=n.textContent,this.lang;var r=n.getAttribute("lang");r&&(this.lang=r)}})),i("ogc/ows/OwsDescription",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsLanguageString"],(function(t,e,n){"use strict";return function(r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"OwsDescription","assembleDescriptions","missingDomElement"));for(var i=r.children||r.childNodes,o=0;o<i.length;o++){var a=i[o];if("Title"===a.localName)this.titles=this.titles||[],this.titles.push(new n(a));else if("Abstract"===a.localName)this.abstracts=this.abstracts||[],this.abstracts.push(new n(a));else if("Keywords"===a.localName){this.keywords=this.keywords||[];for(var s=a.children||a.childNodes,u=0;u<s.length;u++){var l=s[u];"Keyword"===l.localName&&this.keywords.push(new n(l))}}}}})),i("ogc/ows/OwsConstraint",["../../error/ArgumentError","../../util/Logger"],(function(t,e){"use strict";return function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"OwsConstraint","constructor","missingDomElement"));this.name=n.getAttribute("name");for(var r=n.children||n.childNodes,i=0;i<r.length;i++){var o=r[i];if("AllowedValues"===o.localName){this.allowedValues=this.allowedValues||[];for(var a=o.children||o.childNodes,s=0;s<a.length;s++)"Value"===a[s].localName&&this.allowedValues.push(a[s].textContent)}else"AnyValue"===o.localName?this.anyValue=!0:"NoValues"===o.localName&&(this.noValues=!0)}}})),i("ogc/ows/OwsOperationsMetadata",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsConstraint"],(function(t,e,n){"use strict";var r=function n(r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"OwsOperationsMetadata","constructor","missingDomElement"));for(var i=r.children||r.childNodes,o=0;o<i.length;o++){var a=i[o];"Operation"===a.localName&&(this.operation=this.operation||[],this.operation.push(n.assembleOperation(a)))}};return r.prototype.getGetCapabilities=function(){return this.getOperationMetadataByName("GetCapabilities")},r.prototype.getGetTile=function(){return this.getOperationMetadataByName("GetTile")},r.prototype.getOperationMetadataByName=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"OwsOperationsMetadata","getOperationsMetadataByName","missingName"));for(var r=0;r<this.operation.length;r++)if(this.operation[r].name===n)return this.operation[r];return null},r.assembleOperation=function(t){var e={};e.name=t.getAttribute("name");for(var n=t.children||t.childNodes,i=0;i<n.length;i++){var o=n[i];"DCP"===o.localName&&(e.dcp=e.dcp||[],e.dcp.push(r.assembleDcp(o)))}return e},r.assembleDcp=function(t){for(var e={},n=t.children||t.childNodes,i=0;i<n.length;i++){var o=n[i];if("HTTP"===o.localName)for(var a=o.children||o.childNodes,s=0;s<a.length;s++){var u=a[s];"Get"===u.localName?(e.getMethods=e.getMethods||[],e.getMethods.push(r.assembleMethod(u))):"Post"===u.localName&&(e.postMethods=e.postMethods||[],e.postMethods.push(r.assembleMethod(u)))}}return e},r.assembleMethod=function(t){var e={};e.url=t.getAttribute("xlink:href");for(var r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];"Constraint"===o.localName&&(e.constraint=e.constraint||[],e.constraint.push(new n(o)))}return e},r})),i("ogc/ows/OwsServiceIdentification",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsDescription"],(function(t,e,n){"use strict";var r=function(r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"OwsServiceIdentification","constructor","missingDomElement"));n.call(this,r);for(var i=r.children||r.childNodes,o=0;o<i.length;o++){var a=i[o];"ServiceType"===a.localName?this.serviceType=a.textContent:"ServiceTypeVersion"===a.localName?(this.serviceTypeVersions=this.serviceTypeVersions||[],this.serviceTypeVersions.push(a.textContent)):"Profile"===a.localName?(this.profile=this.profile||[],this.profile.push(a.textContent)):"Fees"===a.localName?this.fees=a.textContent:"AccessConstraints"===a.localName&&(this.accessConstraints=this.accessConstraints||[],this.accessConstraints.push(a.textContent))}};return r.prototype=Object.create(n.prototype),r})),i("ogc/ows/OwsServiceProvider",["../../error/ArgumentError","../../util/Logger"],(function(t,e){"use strict";var n=function n(r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"OwsServiceProvider","constructor","missingDomElement"));for(var i=r.children||r.childNodes,o=0;o<i.length;o++){var a=i[o];"ProviderName"===a.localName?this.providerName=a.textContent:"ProviderSite"===a.localName?this.providerSiteUrl=a.getAttribute("xlink:href"):"ServiceContact"===a.localName&&(this.serviceContact=n.assembleServiceContact(a))}};return n.assembleServiceContact=function(r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"OwsServiceProvider","assembleServiceContact","missingDomElement"));for(var i={},o=r.children||r.childNodes,a=0;a<o.length;a++){var s=o[a];"IndividualName"===s.localName?i.individualName=s.textContent:"PositionName"===s.localName?i.positionName=s.textContent:"ContactInfo"===s.localName&&(i.contactInfo=n.assembleContacts(s))}return i},n.assembleContacts=function(r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"OwsServiceProvider","assembleContacts","missingDomElement"));for(var i={},o=r.children||r.childNodes,a=0;a<o.length;a++){var s=o[a];"HoursOfService"===s.localName?i.hoursOfService=s.textContent:"ContactInstructions"===s.localName?i.contactInstructions=s.textContent:"Phone"===s.localName?i.phone=n.assemblePhone(s):"Address"===s.localName&&(i.address=n.assembleAddress(s))}return i},n.assemblePhone=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"OwsServiceProvider","assemblePhone","missingDomElement"));for(var r={},i=n.children||n.childNodes,o=0;o<i.length;o++){var a=i[o];"Voice"===a.localName?r.voice=a.textContent:"Facsimile"===a.localName&&(r.facsimile=a.textContent)}return r},n.assembleAddress=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"OwsServiceProvider","assembleAddress","missingDomElement"));for(var r={},i=n.children||n.childNodes,o=0;o<i.length;o++){var a=i[o];"DeliveryPoint"===a.localName?(r.deliveryPoints=r.deliveryPoints||[],r.deliveryPoints.push(a.textContent)):"City"===a.localName?r.city=a.textContent:"AdministrativeArea"===a.localName?r.administrativeArea=a.textContent:"PostalCode"===a.localName?(r.postalCodes=r.postalCodes||[],r.postalCodes.push(a.textContent)):"Country"===a.localName?(r.countries=r.countries||[],r.countries.push(a.textContent)):"ElectronicMailAddress"===a.localName&&(r.electronicMailAddresses=r.electronicMailAddresses||[],r.electronicMailAddresses.push(a.textContent))}return r},n})),i("ogc/wms/WmsLayerCapabilities",["../../error/ArgumentError","../../util/Logger"],(function(t,e){"use strict";var n=function(n,r){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsLayerCapabilities","constructor","Layer element is null or undefined."));this.parent=r,this.layers,this.name,this.title,this.abstract,this.keywordList,this.identifiers,this.metadataUrls,this.dataUrls,this.featureListUrls,this.assembleLayer(n)};return Object.defineProperties(n.prototype,{capability:{get:function(){for(var t=this;t&&t instanceof n;)t=t.parent;return t}},queryable:{get:function(){return n.replace(this,"_queryable")}},cascaded:{get:function(){return n.replace(this,"_cascaded")}},opaque:{get:function(){return n.replace(this,"_opaque")}},noSubsets:{get:function(){return n.replace(this,"_noSubsets")}},fixedWidth:{get:function(){return n.replace(this,"_fixedWidth")}},fixedHeight:{get:function(){return n.replace(this,"_fixedHeight")}},styles:{get:function(){return n.accumulate(this,"_styles",[])}},crses:{get:function(){return n.accumulate(this,"_crses",[])}},srses:{get:function(){return n.accumulate(this,"_srses",[])}},geographicBoundingBox:{get:function(){return n.replace(this,"_geographicBoundingBox")}},latLonBoundingBox:{get:function(){return n.replace(this,"_latLonBoundingBox")}},boundingBoxes:{get:function(){return n.replace(this,"_boundingBoxes")}},dimensions:{get:function(){for(var t=[],e=this;e&&e instanceof n;)e._dimensions&&e._dimensions.length>0&&e._dimensions.forEach((function(e){var n=e.name,r=!0;t.forEach((function(t){t.name===n&&(r=!1)})),r&&t.push(e)})),e=e.parent;return t.length>0?t:void 0}},extents:{get:function(){for(var t=[],e=this;e&&e instanceof n;)e._extents&&e._extents.length>0&&e._extents.forEach((function(e){var n=e.name,r=!0;t.forEach((function(t){t.name===n&&(r=!1)})),r&&t.push(e)})),e=e.parent;return t.length>0?t:void 0}},attribution:{get:function(){return n.replace(this,"_attribution")}},authorityUrls:{get:function(){return n.accumulate(this,"_authorityUrls",[])}},minScaleDenominator:{get:function(){return n.replace(this,"_minScaleDenominator")}},maxScaleDenominator:{get:function(){return n.replace(this,"_maxScaleDenominator")}},scaleHint:{get:function(){return n.replace(this,"_scaleHint")}}}),n.prototype.style=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsLayerCapabilities","style","Style name is null or undefined."));var r=this.styles;if(!r)return null;for(var i,o=0,a=r.length;o<a;o++)if((i=r[o]).name===n)return i},n.accumulate=function(t,e,r){for(;t&&t instanceof n;){var i=t[e];if(i)for(var o=0;o<i.length;o++)r.push(i[o]);t=t.parent}return r.length>0?r:null},n.replace=function(t,e){for(;t&&t instanceof n;){var r=t[e];if(r)return r;t=t.parent}},n.prototype.assembleLayer=function(t){var e,r;(e=t.getAttribute("queryable"))&&(this._queryable="1"===e||"true"===e),(e=t.getAttribute("opaque"))&&(this._opaque="1"===e||"true"===e),(e=t.getAttribute("noSubsets"))&&(this._noSubsets="1"===e||"true"===e),(e=t.getAttribute("cascaded"))&&(this._cascaded=parseInt("10")),(e=t.getAttribute("fixedWidth"))&&(this._fixedWidth=parseInt("10")),(e=t.getAttribute("fixedHeight"))&&(this._fixedHeight=parseInt("10"));var i=t.children||t.childNodes;for(r=0;r<i.length;r++){var o=i[r];if("Layer"===o.localName)this.layers||(this.layers=[]),this.layers.push(new n(o,this));else if("Name"===o.localName)this.name=o.textContent;else if("Title"===o.localName)this.title=o.textContent;else if("Abstract"===o.localName)this.abstract=o.textContent;else if("KeywordList"===o.localName){this.keywordList=this.keywordList||[];for(var a=o.children||o.childNodes,s=0;s<a.length;s++){var u=a[s];"Keyword"===u.localName&&this.keywordList.push(u.textContent)}}else"Style"===o.localName?(this._styles||(this._styles=[]),this._styles.push(n.assembleStyle(o))):"CRS"===o.localName?(this._crses||(this._crses=[]),this._crses.push(o.textContent)):"SRS"===o.localName?(this._srses||(this._srses=[]),this._srses.push(o.textContent)):"EX_GeographicBoundingBox"===o.localName?this._geographicBoundingBox=n.assembleGeographicBoundingBox(o):"LatLonBoundingBox"===o.localName?this._geographicBoundingBox=n.assembleLatLonBoundingBox(o):"BoundingBox"===o.localName?(this._boundingBoxes||(this._boundingBoxes=[]),this._boundingBoxes.push(n.assembleBoundingBox(o))):"Dimension"===o.localName?(this._dimensions||(this._dimensions=[]),this._dimensions.push(n.assembleDimension(o))):"Extent"===o.localName?(this._extents||(this._extents=[]),this._extents.push(n.assembleDimension(o))):"Attribution"===o.localName?this._attribution=n.assembleAttribution(o):"AuthorityURL"===o.localName?(this._authorityUrls||(this._authorityUrls=[]),this._authorityUrls.push(n.assembleAuthorityUrl(o))):"Identifier"===o.localName?(this.identifiers||(this.identifiers=[]),this.identifiers.push(n.assembleIdentifier(o))):"MetadataURL"===o.localName?(this.metadataUrls||(this.metadataUrls=[]),this.metadataUrls.push(n.assembleMetadataUrl(o))):"DataURL"===o.localName?(this.dataUrls||(this.dataUrls=[]),this.dataUrls.push(n.assembleUrl(o))):"FeatureListURL"===o.localName?(this.featureListUrls||(this.featureListUrls=[]),this.featureListUrls.push(n.assembleUrl(o))):"MinScaleDenominator"===o.localName?this._minScaleDenominator=parseFloat(o.textContent):"MaxScaleDenominator"===o.localName?this._maxScaleDenominator=parseFloat(o.textContent):"ScaleHint"===o.localName&&(this._scaleHint={},this._scaleHint.min=n.getFloatAttribute(o,"min"),this._scaleHint.max=n.getFloatAttribute(o,"max"))}},n.assembleStyle=function(t){for(var e={},r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];"Name"===o.localName?e.name=o.textContent:"Title"===o.localName?e.title=o.textContent:"Abstract"===o.localName?e.abstract=o.textContent:"LegendURL"===o.localName?(e.legendUrls||(e.legendUrls=[]),e.legendUrls.push(n.assembleLegendUrl(o))):"StyleSheetURL"===o.localName?e.styleSheetUrl=n.assembleUrl(o):"StyleURL"===o.localName&&(e.styleUrl=n.assembleUrl(o))}return e},n.assembleGeographicBoundingBox=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"westBoundLongitude"===i.localName?e.westBoundLongitude=parseFloat(i.textContent):"eastBoundLongitude"===i.localName?e.eastBoundLongitude=parseFloat(i.textContent):"southBoundLatitude"===i.localName?e.southBoundLatitude=parseFloat(i.textContent):"northBoundLatitude"===i.localName&&(e.northBoundLatitude=parseFloat(i.textContent))}return e},n.assembleLatLonBoundingBox=function(t){var e={};return e.minx=n.getFloatAttribute(t,"minx"),e.miny=n.getFloatAttribute(t,"miny"),e.maxx=n.getFloatAttribute(t,"maxx"),e.maxy=n.getFloatAttribute(t,"maxy"),e},n.assembleBoundingBox=function(t){var e={};return e.crs=t.getAttribute("CRS"),e.minx=n.getFloatAttribute(t,"minx"),e.miny=n.getFloatAttribute(t,"miny"),e.maxx=n.getFloatAttribute(t,"maxx"),e.maxy=n.getFloatAttribute(t,"maxy"),e.resx=n.getFloatAttribute(t,"resx"),e.resy=n.getFloatAttribute(t,"resy"),e},n.assembleDimension=function(t){var e={};return e.name=t.getAttribute("name"),e.units=t.getAttribute("units"),e.unitSymbol=t.getAttribute("unitSymbol"),e.default=t.getAttribute("default"),e.multipleValues=t.getAttribute("multipleValues"),e.multipleValues&&(e.multipleValues="true"===e.multipleValues||"1"===e.multipleValues),e.nearestValue=t.getAttribute("nearestValue"),e.nearestValue&&(e.nearestValue="true"===e.nearestValue||"1"===e.nearestValue),e.current=t.getAttribute("current"),e.current&&(e.current="true"===e.current||"1"===e.current),e.content=t.textContent,e},n.assembleAttribution=function(t){for(var e={},r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];"Title"===o.localName?e.title=o.textContent:"OnlineResource"===o.localName?e.url=o.getAttribute("xlink:href"):"LogoUrul"===o.localName&&(e.logoUrl=n.assembleLogoUrl(o))}return e},n.assembleAuthorityUrl=function(t){var e={};e.name=t.getAttribute("name");for(var n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"OnlineResource"===i.localName&&(e.url=i.getAttribute("xlink:href"))}return e},n.assembleIdentifier=function(t){var e={};return e.authority=t.getAttribute("authority"),e.content=t.textContent,e},n.assembleMetadataUrl=function(t){var e={};e.type=t.getAttribute("type");for(var n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Format"===i.localName?e.format=i.textContent:"OnlineResource"===i.localName&&(e.url=i.getAttribute("xlink:href"))}return e},n.assembleLegendUrl=function(t){var e={};e.width=n.getIntegerAttribute(t,"width"),e.height=n.getIntegerAttribute(t,"height");for(var r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];"Format"===o.localName?e.format=o.textContent:"OnlineResource"===o.localName&&(e.url=o.getAttribute("xlink:href"))}return e},n.assembleLogoUrl=function(t){var e={};e.width=n.getIntegerAttribute(t,"width"),e.height=n.getIntegerAttribute(t,"height");for(var r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];"Format"===o.localName?e.format=o.textContent:"OnlineResource"===o.localName&&(e.url=o.getAttribute("xlink:href"))}return e},n.assembleUrl=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Format"===i.localName?e.format=i.textContent:"OnlineResource"===i.localName&&(e.url=i.getAttribute("xlink:href"))}return e},n.getIntegerAttribute=function(t,e){var n=t.getAttribute(e);return n?parseInt(n):void 0},n.getFloatAttribute=function(t,e){var n=t.getAttribute(e);return n?parseFloat(n):void 0},n})),i("ogc/wms/WmsCapabilities",["../../error/ArgumentError","../../util/Logger","../../ogc/wms/WmsLayerCapabilities"],(function(t,e,n){"use strict";var r=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsCapabilities","constructor","No XML DOM specified."));this.assembleDocument(n)};return r.prototype.getNamedLayers=function(){return this.accumulateNamedLayers(this.capability.layers)},r.prototype.accumulateNamedLayers=function(t,e){var n=e||[];if(!t)return n;for(var r=0,i=t.length;r<i;r++){var o=t[r];o.name&&n.push(o),o.layers&&this.accumulateNamedLayers(o.layers,n)}return n},r.prototype.getNamedLayer=function(n){if(!n||0===n.length)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsCapabilities","getNamedLayer","No WMS layer name provided."));for(var r=this.getNamedLayers(),i=0,o=r.length;i<o;i++)if(n===r[i].name)return r[i];return null},r.prototype.assembleDocument=function(t){var e=t.documentElement;this.version=e.getAttribute("version"),this.updateSequence=e.getAttribute("updateSequence");for(var n=e.children||e.childNodes,r=0;r<n.length;r++){var i=n[r];"Service"===i.localName?this.service=this.assembleService(i):"Capability"===i.localName&&(this.capability=this.assembleCapability(i))}},r.prototype.assembleService=function(t){for(var e={capsDoc:this},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Name"===i.localName?e.name=i.textContent:"Title"===i.localName?e.title=i.textContent:"Abstract"===i.localName?e.abstract=i.textContent:"KeywordList"===i.localName?e.keywordList=this.assembleKeywordList(i):"OnlineResource"===i.localName?e.url=i.getAttribute("xlink:href"):"Fees"===i.localName?e.fees=i.textContent:"AccessConstraints"===i.localName?e.accessConstraints=i.textContent:"LayerLimit"==i.localName?e.layerLimit=parseInt(i.textContent):"MaxWidth"==i.localName?e.maxWidth=parseInt(i.textContent):"MaxHeight"==i.localName?e.maxHeight=parseInt(i.textContent):"ContactInformation"===i.localName&&(e.contactInformation=this.assembleContactInformation(i))}return e},r.prototype.assembleKeywordList=function(t){for(var e=[],n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Keyword"===i.localName&&e.push(i.textContent)}return e},r.prototype.assembleContactInformation=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"ContactPersonPrimary"===i.localName?e.contactPersonPrimary=this.assembleContactPersonPrimary(i):"ContactPosition"===i.localName?e.contactPosition=i.textContent:"ContactVoiceTelephone"===i.localName?e.contactVoiceTelephone=i.textContent:"ContactFacsimileTelephone"===i.localName?e.contactFacsimileTelephone=i.textContent:"ContactElectronicMailAddress"===i.localName?e.contactElectronicMailAddress=i.textContent:"ContactAddress"===i.localName&&(e.contactAddress=this.assembleContactAddress(i))}return e},r.prototype.assembleContactPersonPrimary=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"ContactPerson"===i.localName?e.contactPerson=i.textContent:"ContactOrganization"===i.localName&&(e.contactOrganization=i.textContent)}return e},r.prototype.assembleContactAddress=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"AddressType"===i.localName?e.addressType=i.textContent:"Address"===i.localName?e.address=i.textContent:"City"===i.localName?e.city=i.textContent:"StateOrProvince"===i.localName?e.stateOrProvince=i.textContent:"PostCode"===i.localName?e.postCode=i.textContent:"Country"===i.localName&&(e.country=i.textContent)}return e},r.prototype.assembleCapability=function(t){for(var e={capsDoc:this},r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];"Request"===o.localName?e.request=this.assembleRequests(o):"Exception"===o.localName?e.exception=this.assembleException(o):"Layer"===o.localName&&(e.layers=e.layers||[],e.layers.push(new n(o,e)))}return e},r.prototype.assembleRequests=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"GetCapabilities"===i.localName?e.getCapabilities=this.assembleRequest(i):"GetMap"===i.localName?e.getMap=this.assembleRequest(i):"GetFeatureInfo"===i.localName&&(e.getFeatureInfo=this.assembleRequest(i))}return e},r.prototype.assembleRequest=function(t){for(var e={name:t.localName},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];if("Format"===i.localName)e.formats=e.formats||[],e.formats.push(i.textContent);else if("DCPType"===i.localName)for(var o=i.children||i.childNodes,a=0;a<o.length;a++){var s=o[a];if("HTTP"===s.localName)for(var u=s.children||s.childNodes,l=0;l<u.length;l++){var c=u[l];if("Get"===c.localName)for(var h=c.children||c.childNodes,f=0;f<h.length;f++){var p=h[f];"OnlineResource"===p.localName&&(e.getUrl=p.getAttribute("xlink:href"))}}}}return e},r.prototype.assembleException=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Format"===i.localName&&(e.formats=e.formats||[],e.formats.push(i.textContent))}return e},r})),i("ogc/wmts/WmtsLayerCapabilities",["../../error/ArgumentError","../../geom/Sector","../../ogc/ows/OwsDescription","../../util/Logger"],(function(t,e,n,r){"use strict";var i=function(e,i){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"WmtsLayerCapabilities","constructor","missingDomElement"));n.call(this,e),this.capabilities=i,this.identifier,this.title,this.abstract,this.keywords,this.wgs84BoundingBox,this.boundingBox,this.styles,this.formats,this.infoFormat,this.dimension,this.metadata,this.tileMatrixSetLink,this.resourceUrl,this.assembleLayer(e)};return(i.prototype=Object.create(n.prototype)).getLayerSupportedTileMatrixSets=function(){for(var t=[],e=0,n=this.tileMatrixSetLink.length;e<n;e++)for(var r=this.tileMatrixSetLink[e].tileMatrixSet,i=0,o=this.capabilities.contents.tileMatrixSet.length;i<o;i++)this.capabilities.contents.tileMatrixSet[i].identifier===r&&t.push(this.capabilities.contents.tileMatrixSet[i]);return t},i.prototype.assembleLayer=function(t){for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n];"Identifier"===r.localName?this.identifier=r.textContent:"WGS84BoundingBox"===r.localName?this.wgs84BoundingBox=i.assembleBoundingBox(r):"BoundingBox"===r.localName?(this.boundingBox=this.boundingBox||[],this.boundingBox.push(i.assembleBoundingBox(r))):"Style"===r.localName?(this.style=this.style||[],this.style.push(i.assembleStyle(r))):"Format"===r.localName?(this.format=this.format||[],this.format.push(r.textContent)):"InfoFormat"===r.localName?(this.infoFormat=this.infoFormat||[],this.infoFormat.push(r.textContent)):"Dimension"===r.localName?(this.dimension=this.dimension||[],this.dimension.push(i.assembleDimension(r))):"Metadata"===r.localName?(this.metadata=this.metadata||[],this.metadata.push(i.assembleMetadata(r))):"ResourceURL"===r.localName?(this.resourceUrl=this.resourceUrl||[],this.resourceUrl.push(i.assembleResourceUrl(r))):"TileMatrixSetLink"===r.localName&&(this.tileMatrixSetLink=this.tileMatrixSetLink||[],this.tileMatrixSetLink.push(i.assembleTileMatrixSetLink(r)))}},i.assembleStyle=function(t){var e=new n(t);e.isDefault=t.getAttribute("isDefault");for(var r=t.children||t.childNodes,o=0;o<r.length;o++){var a=r[o];"Identifier"===a.localName?e.identifier=a.textContent:"LegendURL"===a.localName&&(e.legendUrl=e.legendUrl||[],e.legendUrl.push(i.assembleLegendUrl(a)))}return e},i.assembleBoundingBox=function(t){var n={},r=t.getAttribute("crs");r&&(n.crs=r);for(var i=t.children||t.childNodes,o=0;o<i.length;o++){var a=i[o];if("LowerCorner"===a.localName){var s=a.textContent.split(" ");n.lowerCorner=[parseFloat(s[0]),parseFloat(s[1])]}else if("UpperCorner"===a.localName){var u=a.textContent.split(" ");n.upperCorner=[parseFloat(u[0]),parseFloat(u[1])]}}return"WGS84BoundingBox"===t.localName&&(n.getSector=function(){return new e(n.lowerCorner[1],n.upperCorner[1],n.lowerCorner[0],n.upperCorner[0])}),n},i.assembleDimension=function(t){for(var e=new n(t),r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];"Identifier"===o.localName?e.identifier=o.textContent:"UOM"===o.localName?e.uom={name:o.getAttribute("name"),reference:o.getAttribute("reference")}:"UnitSymbol"==o.localName?e.unitSymbol=o.textContent:"Default"===o.localName?e.default=o.textContent:"Current"===o.localName?e.current="true"===o.textContent:"Value"===o.localName&&(e.value=e.value||[],e.value.push(o.textContent))}return e},i.assembleMetadata=function(t){var e={},n=t.getAttribute("xlink:href");n&&(e.url=n);var r=t.getAttribute("about");n&&(e.about=r);var i=t.getAttribute("xlink:type");i&&(e.type=i);var o=t.getAttribute("xlink:role");o&&(e.role=o);var a=t.getAttribute("xlink:title");a&&(e.title=a);for(var s=t.children||t.childNodes,u=0;u<s.length;u++){var l=s[u];"Metadata"===l.localName&&(e.metadata=WmsLayerCapabilities.assembleMetadata(l))}return e},i.assembleResourceUrl=function(t){var e={};return e.format=t.getAttribute("format"),e.resourceType=t.getAttribute("resourceType"),e.template=t.getAttribute("template"),e},i.assembleLegendUrl=function(t){var e={};return e.format=t.getAttribute("format"),e.minScaleDenominator=t.getAttribute("minScaleDenominator"),e.maxScaleDenominator=t.getAttribute("maxScaleDenominator"),e.href=t.getAttribute("xlink:href"),e.width=t.getAttribute("width"),e.height=t.getAttribute("height"),e},i.assembleTileMatrixSetLink=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var o=n[r];"TileMatrixSet"===o.localName?e.tileMatrixSet=o.textContent:"TileMatrixSetLimits"===o.localName&&(e.tileMatrixSetLimits=i.assembleTileMatrixSetLimits(o))}return e},i.assembleTileMatrixSetLimits=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var o=n[r];"TileMatrixLimits"===o.localName&&(e.tileMatrixLimits=e.tileMatrixLimits||[],e.tileMatrixLimits.push(i.assembleTileMatrixLimits(o)))}return e},i.assembleTileMatrixLimits=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"TileMatrix"===i.localName?e.tileMatrix=i.textContent:"MinTileRow"===i.localName?e.minTileRow=parseInt(i.textContent):"MaxTileRow"===i.localName?e.maxTileRow=parseInt(i.textContent):"MinTileCol"===i.localName?e.minTileCol=parseInt(i.textContent):"maxTileCol"===i.localName&&(e.maxTileCol=parseInt(i.textContent))}return e},i})),i("ogc/wmts/WmtsCapabilities",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsDescription","../../ogc/ows/OwsLanguageString","../../ogc/ows/OwsOperationsMetadata","../../ogc/ows/OwsServiceIdentification","../../ogc/ows/OwsServiceProvider","../../ogc/wms/WmsCapabilities","../../ogc/wmts/WmtsLayerCapabilities"],(function(t,e,n,r,i,o,a,s,u){"use strict";var l=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmtsCapabilities","constructor","No XML DOM specified."));this.assembleDocument(n)};return l.prototype.getLayers=function(){return this.contents.layer},l.prototype.getLayer=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmtsCapabilities","getLayer","empty identifier"));for(var r=0,i=this.contents.layer.length;r<i;r++){var o=this.contents.layer[r];if(o.identifier===n)return o}return null},l.prototype.assembleDocument=function(t){var e=t.documentElement;this.version=e.getAttribute("version"),this.updateSequence=e.getAttribute("updateSequence");for(var n=e.children||e.childNodes,r=0;r<n.length;r++){var s=n[r];"ServiceIdentification"===s.localName?this.serviceIdentification=new o(s):"ServiceProvider"===s.localName?this.serviceProvider=new a(s):"OperationsMetadata"===s.localName?this.operationsMetadata=new i(s):"Contents"===s.localName?this.contents=this.assembleContents(s):"Themes"===s.localName?this.themes=l.assembleThemes(s):"ServiceMetadataURL"===s.localName&&(this.serviceMetadataUrls=this.serviceMetadataUrls||[],this.serviceMetadataUrls.push(l.assembleServiceMetadataURL(s)))}},l.prototype.assembleContents=function(t){for(var n={},r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];if("Layer"===o.localName){n.layer=n.layer||[];try{n.layer.push(new u(o,this))}catch(t){e.logMessage(e.LEVEL_SEVERE,"WmtsCapabilities","constructor","Exception reading WMTS layer description: "+t.message)}}else if("TileMatrixSet"===o.localName){n.tileMatrixSet=n.tileMatrixSet||[];try{n.tileMatrixSet.push(l.assembleTileMatrixSet(o))}catch(t){e.logMessage(e.LEVEL_SEVERE,"WmtsCapabilities","constructor","Exception reading WMTS tile matrix set description: "+t.message)}}}return n},l.assembleTileMatrixSet=function(t){for(var e=new n(t),r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];"Identifier"===o.localName?e.identifier=o.textContent:"SupportedCRS"===o.localName?e.supportedCRS=o.textContent:"WellKnownScaleSet"===o.localName?e.wellKnownScaleSet=o.textContent:"BoundingBox"===o.localName?e.boundingBox=u.assembleBoundingBox(o):"TileMatrix"===o.localName&&(e.tileMatrix=e.tileMatrix||[],e.tileMatrix.push(l.assembleTileMatrix(o)))}l.sortTileMatrices(e);for(var a=0;a<e.tileMatrix.length;a++)e.tileMatrix[a].levelNumber=a;return e},l.assembleTileMatrix=function(t){for(var e=new n(t),r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];if("Identifier"===o.localName)e.identifier=o.textContent;else if("ScaleDenominator"===o.localName)e.scaleDenominator=parseFloat(o.textContent);else if("TileWidth"===o.localName)e.tileWidth=parseFloat(o.textContent);else if("TileHeight"===o.localName)e.tileHeight=parseFloat(o.textContent);else if("MatrixWidth"===o.localName)e.matrixWidth=parseFloat(o.textContent);else if("MatrixHeight"===o.localName)e.matrixHeight=parseFloat(o.textContent);else if("TopLeftCorner"===o.localName){var a=o.textContent.split(" ");e.topLeftCorner=[parseFloat(a[0]),parseFloat(a[1])]}}return e},l.assembleThemes=function(t){for(var e,n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Theme"===i.localName&&(e=e||[]).push(l.assembleTheme(i))}return e},l.assembleTheme=function(t){for(var e=new n(t),r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];"Identifier"===o.localName?e.identifier=o.textContent:"LayerRef"===o.localName?(e.layerRef=e.layerRef||[],e.layerRef.push(o.textContent)):"Theme"===o.localName&&(e.themes=e.themes||[],e.themes.push(l.assembleTheme(o)))}return e},l.assembleServiceMetadataURL=function(t){var e={},n=t.getAttribute("xlink:href");return n&&(e.url=n),e},l.sortTileMatrices=function(t){t.tileMatrix.sort((function(t,e){return e.scaleDenominator-t.scaleDenominator}))},l.prototype.getGetTileKvpAddress=function(){for(var t=0;t<this.operationsMetadata.operation.length;t++){var e=this.operationsMetadata.operation[t];if("GetTile"===e.name)return e.dcp[0].getMethods[0].url}return null},l})),i("layer/WmtsLayerTile",["../geom/Angle","../error/ArgumentError","../geom/BoundingBox","../util/Logger","../geom/Vec3","../util/WWUtil"],(function(t,e,n,r,i,o){"use strict";var a=function(e,n,r,i,o){this.sector=e,this.tileMatrix=n,this.row=r,this.column=i,this.imagePath=o,this.texelSize=e.deltaLatitude()*t.DEGREES_TO_RADIANS/n.tileHeight,this.tileKey=n.levelNumber.toString()+"."+r.toString()+"."+i.toString(),this.gpuCacheKey=o};return a.prototype.isEqual=function(t){return!!t&&!!t.tileKey&&this.tileKey==t.tileKey},a.prototype.distanceTo=function(t){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"Tile","distanceTo","missingVector"));for(var n,i,o,a=t[0],s=t[1],u=t[2],l=this.samplePoints,c=Number.POSITIVE_INFINITY,h=0,f=l.length;h<f;h+=3)n=a-l[h],i=s-l[h+1],o=u-l[h+2],c=Math.min(c,n*n+i*i+o*o);return Math.sqrt(c)},a.prototype.subdivide=function(t,n){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"WmtsLayerTile","subdivide","The specified tile matrix is null or undefined."));if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"WmtsLayerTile","subdivide","The specified tile factory is null or undefined."));for(var i,o,a=[],s=t.matrixHeight/this.tileMatrix.matrixHeight,u=t.matrixWidth/this.tileMatrix.matrixWidth,l=0;l<s;l++)for(var c=0;c<u;c++)i=s*this.row+l,o=u*this.column+c,a.push(n.createTile(t,i,o));return a},a.prototype.subdivideToCache=function(t,n,i){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"Tile","subdivideToCache","The specified tile matrix is null or undefined."));if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"Tile","subdivideToCache","The specified tile factory is null or undefined."));var o=i?i.entryForKey(this.tileKey):null;return o||(o=this.subdivide(t,n))&&i&&i.putEntry(this.tileKey,o,o.length),o},a.prototype.mustSubdivide=function(t,e){var n=t.globe.equatorialRadius*this.texelSize,r=this.distanceTo(t.eyePoint),i=t.pixelSizeAtDistance(r);return n>Math.max(e*i,.5)},a.prototype.update=function(t){var e=t.globe.elevationTimestamp(),n=t.verticalExaggeration,r=t.globeStateKey;this.updateTimestamp==e&&this.updateVerticalExaggeration==n&&this.updateGlobeStateKey==r||(this.doUpdate(t),t.frameStatistics.incrementTileUpdateCount(1),this.updateTimestamp=e,this.updateVerticalExaggeration=n,this.updateGlobeStateKey=r)},a.prototype.doUpdate=function(t){var e=t.globe,r=t.verticalExaggeration,a=e.minAndMaxElevationsForSector(this.sector),s=a[0]*r,u=a[1]*r;s===u&&(s=u+10),this.extent||(this.extent=new n),this.extent.setToSector(this.sector,e,s,u),this.samplePoints||(this.sampleElevations=new Float64Array(9),this.samplePoints=new Float64Array(3*this.sampleElevations.length)),o.fillArray(this.sampleElevations,.5*(s+u)),e.computePointsForGrid(this.sector,3,3,this.sampleElevations,i.ZERO,this.samplePoints),this.referencePoint||(this.referencePoint=new i(0,0,0)),e.computePointFromPosition(this.sector.centroidLatitude(),this.sector.centroidLongitude(),0,this.referencePoint)},a.prototype.bind=function(t){var e=t.gpuResourceCache.resourceForKey(this.gpuCacheKey);return!(!e||!e.bind(t))||!!this.fallbackTile&&this.fallbackTile.bind(t)},a.prototype.applyInternalTransform=function(t,e){},a})),i("layer/WmtsLayer",["../util/AbsentResourceList","../error/ArgumentError","../util/Logger","../geom/Matrix","../geom/Sector","../layer/Layer","../cache/MemoryCache","../render/Texture","../util/WmsUrlBuilder","../layer/WmtsLayerTile","../util/WWMath","../util/WWUtil"],(function(t,e,n,r,i,o,a,s,u,l,c,h){"use strict";var f=function s(u,l){if(!u)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","constructor","No layer configuration specified."));if(o.call(this,"WMTS Layer"),this.layerIdentifier=u.identifier,this.styleIdentifier=u.style,this.timeString=l,this.imageFormat=u.format,this.resourceUrl=u.resourceUrl,this.serviceUrl=u.service,this.tileMatrixSet=u.tileMatrixSet,this.lasTtMVP=r.fromIdentity(),u.wgs84BoundingBox||u.boundingBox){if(u.wgs84BoundingBox)this.sector=u.wgs84BoundingBox.getSector();else if(this.tileMatrixSet.boundingBox&&s.isEpsg4326Crs(this.tileMatrixSet.boundingBox.crs))this.sector=new i(this.tileMatrixSet.boundingBox.lowerCorner[1],this.tileMatrixSet.boundingBox.upperCorner[1],this.tileMatrixSet.boundingBox.lowerCorner[0],this.tileMatrixSet.boundingBox.upperCorner[0]);else if(s.isEpsg4326Crs(this.tileMatrixSet.supportedCRS))throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","constructor","No EPSG:4326 bounding box was specified in the layer or tile matrix set capabilities."))}else{if(!this.tileMatrixSet.boundingBox)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","constructor","No bounding box was specified in the layer or tile matrix set capabilities."));this.sector=new i(u.tileMatrixSet.boundingBox.lowerCorner[1],u.tileMatrixSet.boundingBox.upperCorner[1],u.tileMatrixSet.boundingBox.lowerCorner[0],u.tileMatrixSet.boundingBox.upperCorner[0])}if(!s.isTileSubdivisionCompatible(this.tileMatrixSet))throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","constructor","TileMatrixSet level division not compatible."));var c=this.tileMatrixSet.supportedCRS;if(!(s.isEpsg3857Crs(c)||s.isEpsg4326Crs(c)||s.isOGCCrs84(c)))throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","constructor","Provided CRS is not compatible."));this.cachePath=(this.resourceUrl||this.serviceUrl)+this.layerIdentifier+this.styleIdentifier+this.tileMatrixSet.identifier,l&&(this.cachePath=this.cachePath+l),this.displayName=u.title,this.currentTiles=[],this.currentTilesInvalid=!0,this.tileCache=new a(1e3,850),this.currentRetrievals=[],this.absentResourceList=new t(3,5e4),this.pickEnabled=!1,this.detailControl=1.75,this.retrievalQueueSize=WorldWind.configuration.layerRetrievalQueueSize};return f.isTileSubdivisionCompatible=function(t){if(!t||!t.tileMatrix||t.tileMatrix.length<1)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","isTileSubdivisionCompatible","Empty tile matrix set"));for(var r,i,o,a=t.tileMatrix[0],s=1,u=t.tileMatrix.length;s<u;s++)if(r=(o=t.tileMatrix[s]).matrixHeight/a.matrixHeight,i=o.matrixWidth/a.matrixWidth,a=o,2!==r||2!==i)return!1;return!0},f.createTileMatrixSet=function(t){if(!t.matrixSet)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","No matrixSet provided."));if(!t.projection)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","No projection provided."));if(!t.extent||4!=t.extent.length)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","No extent provided."));var r={lowerCorner:[t.extent[0],t.extent[1]],upperCorner:[t.extent[2],t.extent[3]]};if(!t.resolutions)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","No resolutions provided."));if(!t.tileSize)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","No tile size provided."));if(!t.topLeftCorner||2!=t.topLeftCorner.length)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","No extent provided."));if(void 0===t.prefix)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","Prefix not provided."));if(!(f.isEpsg4326Crs(t.projection)||f.isOGCCrs84(t.projection)||f.isEpsg3857Crs(t.projection)))throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","createTileMatrixSet","Projection provided not supported."));for(var i,o=[],a=0;a<t.resolutions.length;a++){f.isEpsg4326Crs(t.projection)||f.isOGCCrs84(t.projection)?i=6378137*t.resolutions[a]*2*Math.PI/360/28e-5:f.isEpsg3857Crs(t.projection)&&(i=t.resolutions[a]/28e-5);var s=t.tileSize*t.resolutions[a],u=t.tileSize*t.resolutions[a],l=Math.ceil((t.extent[2]-t.extent[0]-.01*s)/s),c=Math.ceil((t.extent[3]-t.extent[1]-.01*u)/u),h={identifier:t.prefix?t.matrixSet+":"+a:a,levelNumber:a,matrixHeight:c,matrixWidth:l,tileHeight:t.tileSize,tileWidth:t.tileSize,topLeftCorner:t.topLeftCorner,scaleDenominator:i};o.push(h)}return{identifier:t.matrixSet,supportedCRS:t.projection,boundingBox:r,tileMatrix:o}},f.formLayerConfiguration=function(t,r,i,o){var a={};if(a.identifier=t.identifier,o){for(var s=!1,l=0;l<t.format.length;l++)if(t.format[l]===o){s=!0,a.format=t.format[l];break}s||(n.logMessage(n.LEVEL_WARNING,"WmtsLayer","formLayerConfiguration","The specified image format is not available. Another one will be used."),a.format=null)}if(a.format||(t.format.indexOf("image/png")>=0?a.format="image/png":t.format.indexOf("image/jpeg")>=0?a.format="image/jpeg":t.format.indexOf("image/tiff")>=0?a.format="image/tiff":t.format.indexOf("image/gif")>=0?a.format="image/gif":a.format=t.format[0]),!a.format)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","formLayerConfiguration","Layer does not provide a supported image format."));if(t.resourceUrl&&t.resourceUrl.length>=1){for(l=0;l<t.resourceUrl.length;l++)if(a.format===t.resourceUrl[l].format){a.resourceUrl=t.resourceUrl[l].template;break}}else a.service=t.capabilities.getGetTileKvpAddress(),a.service&&(a.service=u.fixGetMapString(a.service));if(!a.resourceUrl&&!a.service)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","formLayerConfiguration","No resource URL or KVP GetTile service URL specified in WMTS capabilities."));if(r){var c=!1;for(l=0;l<t.style.length;l++)if(t.style[l].identifier===r){c=!0,a.style=t.style[l].identifier;break}c||(n.logMessage(n.LEVEL_WARNING,"WmtsLayer","formLayerConfiguration","The specified style identifier is not available. The server's default style will be used."),a.style=null)}if(!a.style)for(l=0;l<t.style.length;l++)if(t.style[l].isDefault){a.style=t.style[l].identifier;break}a.style||n.logMessage(n.LEVEL_WARNING,"WmtsLayer","formLayerConfiguration","No default style available. A style will not be specified in tile requests.");var h=t.getLayerSupportedTileMatrixSets();if(i){l=0;for(var p=h.length;l<p;l++)if(h[l].identifier===i&&f.isTileSubdivisionCompatible(h[l])){a.tileMatrixSet=h[l];break}a.tileMatrixSet||(n.logMessage(n.LEVEL_WARNING,"WmtsLayer","formLayerConfiguration","The specified tileMatrixSet is not available. Another one will be used."),a.tileMatrixSet=null)}if(!a.tileMatrixSet){var d,g=null,m=null,y=null;for(l=0,p=h.length;l<p;l++)d=h[l],f.isTileSubdivisionCompatible(d)&&(f.isEpsg4326Crs(d.supportedCRS)?g=g||d:f.isEpsg3857Crs(d.supportedCRS)?m=m||d:f.isOGCCrs84(d.supportedCRS)&&(y=y||d));a.tileMatrixSet=g||m||y}if(!a.tileMatrixSet)throw new e(n.logMessage(n.LEVEL_SEVERE,"WmtsLayer","formLayerConfiguration","No supported Tile Matrix Set could be found."));return a.boundingBox=t.boundingBox,a.wgs84BoundingBox=t.wgs84BoundingBox,t.titles.length>0?a.title=t.titles[0].value:a.title=t.identifier,a},(f.prototype=Object.create(o.prototype)).doRender=function(t){t.terrain&&(!this.currentTilesInvalid&&t.modelviewProjection.equals(this.lasTtMVP)&&t.globeStateKey===this.lastGlobeStateKey||(this.currentTilesInvalid=!1,this.assembleTiles(t)),this.lasTtMVP.copy(t.modelviewProjection),this.lastGlobeStateKey=t.globeStateKey,this.currentTiles.length>0&&(t.surfaceTileRenderer.renderTiles(t,this.currentTiles,this.opacity),t.frameStatistics.incrementImageTileCount(this.currentTiles.length),this.inCurrentFrame=!0))},f.prototype.isLayerInView=function(t){return t.terrain&&t.terrain.sector&&t.terrain.sector.intersects(this.sector)},f.prototype.isTileVisible=function(t,e){return!(t.globe.projectionLimits&&!e.sector.overlaps(t.globe.projectionLimits))&&e.extent.intersectsFrustum(t.frustumInModelCoordinates)},f.prototype.assembleTiles=function(t){this.currentTiles=[],this.topLevelTiles&&0!==this.topLevelTiles.length||this.createTopLevelTiles(t);for(var e=0,n=this.topLevelTiles.length;e<n;e++){var r=this.topLevelTiles[e];r.update(t),this.currentAncestorTile=null,this.isTileVisible(t,r)&&this.addTileOrDescendants(t,r)}},f.prototype.addTileOrDescendants=function(t,e){if(e.column>=e.tileMatrix.matrixWidth&&(e.column=e.column-e.tileMatrix.matrixWidth),e.column<0&&(e.column=e.column+e.tileMatrix.matrixWidth),this.tileMeetsRenderingCriteria(t,e))this.addTile(t,e);else{var n=null;try{(this.isTileTextureInMemory(t,e)||0===e.tileMatrix.levelNumber)&&(n=this.currentAncestorTile,this.currentAncestorTile=e);for(var r=this.tileMatrixSet.tileMatrix[e.tileMatrix.levelNumber+1],i=e.subdivideToCache(r,this,this.tileCache),o=0,a=i.length;o<a;o++){var s=i[o];s.update(t),this.sector.intersects(s.sector)&&this.isTileVisible(t,s)&&this.addTileOrDescendants(t,s)}}finally{n&&(this.currentAncestorTile=n)}}},f.prototype.addTile=function(t,e){e.fallbackTile=null;var n=t.gpuResourceCache.resourceForKey(e.imagePath);return n?(this.currentTiles.push(e),void(this.expiration&&this.isTextureExpired(n)&&this.retrieveTileImage(t,e))):(this.retrieveTileImage(t,e),void(this.currentAncestorTile&&this.isTileTextureInMemory(t,this.currentAncestorTile)&&this.currentTiles.push(this.currentAncestorTile)))},f.prototype.isTextureExpired=function(t){return this.expiration&&t.creationTime.getTime()<=this.expiration.getTime()},f.prototype.isTileTextureInMemory=function(t,e){return t.gpuResourceCache.containsResource(e.imagePath)},f.prototype.tileMeetsRenderingCriteria=function(t,e){var n=this.detailControl;return(e.sector.minLatitude>=75||e.sector.maxLatitude<=-75)&&(n*=1.2),e.tileMatrix.levelNumber===this.tileMatrixSet.tileMatrix.length-1||!e.mustSubdivide(t,n)},f.prototype.retrieveTileImage=function(t,e){if(this.currentRetrievals.indexOf(e.imagePath)<0){if(this.currentRetrievals.length>this.retrievalQueueSize)return;if(this.absentResourceList.isResourceAbsent(e.imagePath))return;var r=this.resourceUrlForTile(e,this.imageFormat),i=new Image,o=e.imagePath,a=t.gpuResourceCache,s=t.currentGlContext.canvas,u=this;if(!r)return void(this.currentTilesInvalid=!0);i.onload=function(){n.log(n.LEVEL_INFO,"Image retrieval succeeded: "+r);var l=u.createTexture(t,e,i);if(u.removeFromCurrentRetrievals(o),l){a.putResource(o,l,l.size),u.currentTilesInvalid=!0,u.absentResourceList.unmarkResourceAbsent(o);var c=document.createEvent("Event");c.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),s.dispatchEvent(c)}},i.onerror=function(){u.removeFromCurrentRetrievals(o),u.absentResourceList.markResourceAbsent(o),n.log(n.LEVEL_WARNING,"Image retrieval failed: "+r)},this.currentRetrievals.push(o),i.crossOrigin="anonymous",i.src=r}},f.prototype.resourceUrlForTile=function(t,e){var n;return this.resourceUrl?(n=this.resourceUrl.replace("{Style}",this.styleIdentifier).replace("{TileMatrixSet}",this.tileMatrixSet.identifier).replace("{TileMatrix}",t.tileMatrix.identifier).replace("{TileCol}",t.column).replace("{TileRow}",t.row),this.timeString&&(n=n.replace("{Time}",this.timeString))):(n=this.serviceUrl+"service=WMTS&request=GetTile&version=1.0.0",n+="&Layer="+this.layerIdentifier,this.styleIdentifier&&(n+="&Style="+this.styleIdentifier),n+="&Format="+e,this.timeString&&(n+="&Time="+this.timeString),n+="&TileMatrixSet="+this.tileMatrixSet.identifier,n+="&TileMatrix="+t.tileMatrix.identifier,n+="&TileRow="+t.row,n+="&TileCol="+t.column),n},f.prototype.removeFromCurrentRetrievals=function(t){var e=this.currentRetrievals.indexOf(t);e>-1&&this.currentRetrievals.splice(e,1)},f.prototype.createTopLevelTiles=function(t){var e=this.tileMatrixSet.tileMatrix[0];this.topLevelTiles=[];for(var n=0;n<e.matrixHeight;n++)for(var r=0;r<e.matrixWidth;r++)this.topLevelTiles.push(this.createTile(e,n,r))},f.prototype.createTile=function(t,e,n){return f.isEpsg4326Crs(this.tileMatrixSet.supportedCRS)?this.createTile4326(t,e,n):f.isEpsg3857Crs(this.tileMatrixSet.supportedCRS)?this.createTile3857(t,e,n):f.isOGCCrs84(this.tileMatrixSet.supportedCRS)?this.createTileCrs84(t,e,n):void 0},f.prototype.createTileCrs84=function(t,e,n){var r=this.sector.deltaLatitude()/t.matrixHeight,o=this.sector.deltaLongitude()/t.matrixWidth,a=t.topLeftCorner[1]-e*r,s=a-r,u=t.topLeftCorner[0]+o*n,l=new i(s,a,u,u+o);return this.makeTile(l,t,e,n)},f.prototype.createTile4326=function(t,e,n){var r=this.sector.deltaLatitude()/t.matrixHeight,o=this.sector.deltaLongitude()/t.matrixWidth,a=t.topLeftCorner[0]-e*r,s=a-r,u=t.topLeftCorner[1]+o*n,l=new i(s,a,u,u+o);return this.makeTile(l,t,e,n)},f.prototype.createTile3857=function(t,e,n){t.mapWidth||this.computeTileMatrixValues3857(t);var r,o,a,s,u,l,h=c.clamp(n*t.tileWidth-.5,0,t.mapWidth),f=c.clamp(e*t.tileHeight-.5,0,t.mapHeight),p=c.clamp(h+t.tileWidth+.5,0,t.mapWidth),d=c.clamp(f+t.tileHeight+.5,0,t.mapHeight);r=h/t.mapWidth,o=d/t.mapHeight,s=t.topLeftCorner[0]+r*t.tileMatrixDeltaX,a=t.topLeftCorner[1]-o*t.tileMatrixDeltaY;var g=c.epsg3857ToEpsg4326(s,a);r=p/t.mapWidth,o=f/t.mapHeight,l=t.topLeftCorner[0]+r*t.tileMatrixDeltaX,u=t.topLeftCorner[1]-o*t.tileMatrixDeltaY;var m=c.epsg3857ToEpsg4326(l,u),y=new i(g[0],m[0],g[1],m[1]);return this.makeTile(y,t,e,n)},f.prototype.computeTileMatrixValues3857=function(t){var e=28e-5*t.scaleDenominator,n=t.tileWidth*e,r=t.tileHeight*e,i=[t.topLeftCorner[0]+n*t.matrixWidth,t.topLeftCorner[1]-r*t.matrixHeight],o=t.topLeftCorner;t.tileMatrixDeltaX=i[0]-o[0],t.tileMatrixDeltaY=o[1]-i[1],t.mapWidth=t.tileWidth*t.matrixWidth,t.mapHeight=t.tileHeight*t.matrixHeight},f.prototype.makeTile=function(t,e,n,r){var i=this.cachePath+"-layer/"+e.identifier+"/"+n+"/"+r+"."+h.suffixForMimeType(this.imageFormat);return new l(t,e,n,r,i)},f.prototype.createTexture=function(t,e,n){return f.isEpsg4326Crs(this.tileMatrixSet.supportedCRS)?new s(t.currentGlContext,n):f.isEpsg3857Crs(this.tileMatrixSet.supportedCRS)?this.createTexture3857(t,e,n):f.isOGCCrs84(this.tileMatrixSet.supportedCRS)?new s(t.currentGlContext,n):void 0},f.prototype.createTexture3857=function(t,e,n){this.destCanvas||(this.destCanvas=document.createElement("canvas"),this.destContext=this.destCanvas.getContext("2d"));var r,i,o,a,u,l,h=t.canvas2D,f=t.ctx2D,p=this.destCanvas,d=this.destContext,g=d.createImageData(n.width,n.height),m=e.sector,y=c.gudermannianInverse(m.minLatitude),v=c.gudermannianInverse(m.maxLatitude);h.width=n.width,h.height=n.height,p.width=n.width,p.height=n.height,f.drawImage(n,0,0,n.width,n.height),r=f.getImageData(0,0,n.width,n.height);for(var E=0;E<1;E++)for(var _=0;_<n.height;_++){i=(1-_/(n.height-1))*m.deltaLatitude()+m.minLatitude,l=1-(c.gudermannianInverse(i)-y)/(v-y),l=c.clamp(l,0,1),o=Math.floor(l*(n.height-1));for(var b=0;b<n.width;b++)a=4*(b+o*n.width),u=4*(b+_*n.width),g.data[u]=r.data[a],g.data[u+1]=r.data[a+1],g.data[u+2]=r.data[a+2],g.data[u+3]=r.data[a+3]}return d.putImageData(g,0,0),new s(t.currentGlContext,p)},f.isEpsg4326Crs=function(t){return t.indexOf("EPSG")>=0&&t.indexOf("4326")>=0},f.isEpsg3857Crs=function(t){return t.indexOf("EPSG")>=0&&(t.indexOf("3857")>=0||t.indexOf("900913")>=0)},f.isOGCCrs84=function(t){return t.indexOf("OGC")>=0&&t.indexOf("CRS84")>=0},f})),i("layer/OpenStreetMapImageLayer",["../util/Color","../layer/Layer","../util/Logger","../ogc/wmts/WmtsCapabilities","../layer/WmtsLayer"],(function(t,e,n,r,i){"use strict";var o=function(t){e.call(this,this.displayName),this.displayName=t||"Open Street Map",this.layer=null,this.xhr=null,this.pickEnabled=!0};return(o.prototype=Object.create(e.prototype)).doRender=function(e){this.configureLayer(e),this.layer&&(this.layer.opacity=this.opacity,this.layer.doRender(e),this.inCurrentFrame=this.layer.inCurrentFrame,this.inCurrentFrame&&(e.screenCreditController.addCredit("OpenStreetMap \xa9",t.DARK_GRAY),e.screenCreditController.addCredit("EOX.at \xa9",t.DARK_GRAY)))},o.prototype.configureLayer=function(t){if(!this.xhr){var e=this,o=t.currentGlContext.canvas;this.xhr=new XMLHttpRequest,this.xhr.open("GET","https://tiles.maps.eox.at/wmts/1.0.0/WMTSCapabilities.xml",!0),this.xhr.onreadystatechange=function(){if(4===e.xhr.readyState)if(200===e.xhr.status){var t=new r(e.xhr.responseXML).getLayer("osm"),a=i.formLayerConfiguration(t);a.title=e.displayName,e.layer=new i(a);var s=document.createEvent("Event");s.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),o.dispatchEvent(s)}else n.log(n.LEVEL_WARNING,"OSM retrieval failed ("+xhr.statusText+"): "+url)},this.xhr.onerror=function(){n.log(n.LEVEL_WARNING,"OSM retrieval failed: "+url)},this.xhr.ontimeout=function(){n.log(n.LEVEL_WARNING,"OSM retrieval timed out: "+url)},this.xhr.send(null)}},o})),i("projections/ProjectionGnomonic",["../geom/Angle","../error/ArgumentError","../projections/GeographicProjection","../util/Logger","../geom/Sector","../util/WWMath"],(function(t,e,n,r,i,o){"use strict";var a=function(t){this.north=!("South"===t);var e=this.north?new i(30,90,-180,180):new i(-90,-30,-180,180);n.call(this,"Polar Gnomonic",!1,e),this._pole=t,this.displayName=this.north?"North Gnomonic":"South Gnomonic",this._stateKey="projection polar gnomonic "+this._pole+" "};return a.prototype=Object.create(n.prototype),Object.defineProperties(a.prototype,{pole:{get:function(){return this._pole},set:function(t){this._pole=t,this.north=!("South"===this._pole),this.projectionLimits=this.north?new i(30,90,-180,180):new i(-90,-30,-180,180),this._stateKey="projection polar gnomonic "+this._pole+" "}},stateKey:{get:function(){return this._stateKey}}}),a.prototype.geographicToCartesian=function(n,i,o,a,s,u){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","geographicToCartesian","missingGlobe"));if(!u)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","geographicToCartesian","missingResult"));if(this.north&&90===i||!this.north&&-90===i)u[0]=0,u[1]=0,u[2]=a;else{var l=this.north?1:-1,c=n.equatorialRadius/Math.tan(i*t.DEGREES_TO_RADIANS);u[0]=c*Math.sin(o*t.DEGREES_TO_RADIANS)*l,u[1]=c*-Math.cos(o*t.DEGREES_TO_RADIANS),u[2]=a}return u},a.prototype.geographicToCartesianGrid=function(n,i,a,s,u,l,c,h){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","geographicToCartesianGrid","missingGlobe"));if(!i)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","geographicToCartesianGrid","missingSector"));if(!u||u.length<a*s)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","geographicToCartesianGrid","The specified elevations array is null, undefined or insufficient length"));if(!h)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","geographicToCartesianGrid","missingResult"));var f,p,d,g,m,y,v=i.minLatitude*t.DEGREES_TO_RADIANS,E=i.maxLatitude*t.DEGREES_TO_RADIANS,_=i.minLongitude*t.DEGREES_TO_RADIANS,b=i.maxLongitude*t.DEGREES_TO_RADIANS,S=(E-v)/(a>1?a-1:1),w=(b-_)/(s>1?s-1:1),x=this.projectionLimits.minLatitude*t.DEGREES_TO_RADIANS,T=this.projectionLimits.maxLatitude*t.DEGREES_TO_RADIANS,L=this.north?1:-1,C=l||new Vec3(0,0,0),A=0,M=0;for(f=0,d=v;f<a;f++,d+=S)for(f===a-1&&(d=E),m=o.clamp(d,x,T),y=n.equatorialRadius/Math.tan(m),(this.north&&m===Math.PI/2||!this.north&&m===-Math.PI/2)&&(y=0),p=0,g=_;p<s;p++,g+=w)p===s-1&&(g=b),h[M++]=y*Math.sin(g)*L-C[0],h[M++]=y*-Math.cos(g)-C[1],h[M++]=u[A++]-C[2];return h},a.prototype.cartesianToGeographic=function(n,i,o,a,s,u){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","cartesianToGeographic","missingGlobe"));if(!u)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","cartesianToGeographic","missingResult"));var l,c=Math.sqrt(i*i+o*o);return c<1e-4?(u.latitude=this.north?90:-90,u.longitude=0,u.altitude=a):((l=Math.atan2(c,n.equatorialRadius))>Math.PI&&(l=Math.PI),u.latitude=Math.asin(Math.cos(l)*(this.north?1:-1))*t.RADIANS_TO_DEGREES,u.longitude=Math.atan2(i,o*(this.north?-1:1))*t.RADIANS_TO_DEGREES,u.altitude=a),u},a.prototype.northTangentAtLocation=function(n,i,o,a){if(!a)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","northTangentAtLocation","missingResult"));return a[0]=Math.sin(o*t.DEGREES_TO_RADIANS)*(this.north?-1:1),a[1]=Math.cos(o*t.DEGREES_TO_RADIANS),a[2]=0,a},a.prototype.northTangentAtPoint=function(t,n,i,o,a,s){if(!s)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionGnomonic","northTangentAtLocation","missingResult"));var u=Math.sqrt(n*n+i*i);return u<1e-4?(s[0]=0,s[1]=1,s[2]=0):(s[0]=n/u*(this.north?-1:1),s[1]=i/u*(this.north?-1:1),s[2]=0),s},a})),i("projections/ProjectionMercator",["../geom/Angle","../error/ArgumentError","../projections/GeographicProjection","../util/Logger","../geom/Sector","../geom/Vec3","../util/WWMath"],(function(t,e,n,r,i,o,a){"use strict";var s=function(){n.call(this,"Mercator",!0,new i(-78,78,-180,180))};return(s.prototype=Object.create(n.prototype)).geographicToCartesian=function(n,i,o,a,s,u){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","geographicToCartesian","missingGlobe"));if(!u)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","geographicToCartesian","missingResult"));i>this.projectionLimits.maxLatitude&&(i=this.projectionLimits.maxLatitude),i<this.projectionLimits.minLatitude&&(i=this.projectionLimits.minLatitude);var l=Math.sqrt(n.eccentricitySquared),c=Math.sin(i*t.DEGREES_TO_RADIANS),h=(1+c)/(1-c)*Math.pow((1-l*c)/(1+l*c),l);return u[0]=n.equatorialRadius*o*t.DEGREES_TO_RADIANS+(s?s[0]:0),u[1]=.5*n.equatorialRadius*Math.log(h),u[2]=a,u},Object.defineProperties(s.prototype,{stateKey:{get:function(){return"projection mercator "}}}),s.prototype.geographicToCartesianGrid=function(n,i,s,u,l,c,h,f){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","geographicToCartesianGrid","missingGlobe"));if(!i)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","geographicToCartesianGrid","missingSector"));if(!l||l.length<s*u)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","geographicToCartesianGrid","The specified elevations array is null, undefined or insufficient length"));if(!f)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","geographicToCartesianGrid","missingResult"));var p,d,g,m,y,v,E,_,b=n.equatorialRadius,S=Math.sqrt(n.eccentricitySquared),w=i.minLatitude*t.DEGREES_TO_RADIANS,x=i.maxLatitude*t.DEGREES_TO_RADIANS,T=i.minLongitude*t.DEGREES_TO_RADIANS,L=i.maxLongitude*t.DEGREES_TO_RADIANS,C=(x-w)/(s>1?s-1:1),A=(L-T)/(u>1?u-1:1),M=this.projectionLimits.minLatitude*t.DEGREES_TO_RADIANS,R=this.projectionLimits.maxLatitude*t.DEGREES_TO_RADIANS,O=c||new o(0,0,0),P=h?h[0]:0,I=0,N=0;for(p=0,g=w;p<s;p++,g+=C)for(p===s-1&&(g=x),y=a.clamp(g,M,R),E=(1+(v=Math.sin(y)))/(1-v)*Math.pow((1-S*v)/(1+S*v),S),_=b*Math.log(E)*.5-O[1],d=0,m=T;d<u;d++,m+=A)d===u-1&&(m=L),f[N++]=b*m-O[0]+P,f[N++]=_,f[N++]=l[I++]-O[2];return f},s.prototype.cartesianToGeographic=function(n,i,o,a,s,u){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","cartesianToGeographic","missingGlobe"));if(!u)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionMercator","cartesianToGeographic","missingResult"));var l=n.eccentricitySquared,c=l*l,h=c*l,f=h*l,p=Math.pow(Math.E,-o/n.equatorialRadius),d=Math.PI/2-2*Math.atan(p),g=7*c/48+29*h/240+811*f/11520,m=7*h/120+81*f/1120,y=4279*f/161280,v=d-g+y,E=l/2+5*c/24+h/12+13*f/360-3*m,_=2*g-8*y,b=4*m,S=8*y,w=Math.sin(2*d),x=v+w*(E+w*(_+w*(b+S*w)));return u.latitude=x*t.RADIANS_TO_DEGREES,u.longitude=(i-(s?s[0]:0))/n.equatorialRadius*t.RADIANS_TO_DEGREES,u.altitude=a,u},s})),i("projections/ProjectionPolarEquidistant",["../geom/Angle","../error/ArgumentError","../projections/GeographicProjection","../util/Logger"],(function(t,e,n,r){"use strict";var i=function(t){n.call(this,"Polar Equidistant",!1,null),this._pole=t,this.north=!("South"===t),this.displayName=this.north?"North Polar":"South Polar",this._stateKey="projection polar equidistant "+this._pole+" "};return i.prototype=Object.create(n.prototype),Object.defineProperties(i.prototype,{pole:{get:function(){return this._pole},set:function(t){this._pole=t,this.north=!("South"===this._pole),this._stateKey="projection polar equidistant "+this._pole+" "}},stateKey:{get:function(){return this._stateKey}}}),i.prototype.geographicToCartesian=function(n,i,o,a,s,u){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","geographicToCartesian","missingGlobe"));if(!u)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","geographicToCartesian","missingResult"));if(this.north&&90===i||!this.north&&-90===i)u[0]=0,u[1]=0,u[2]=a;else{var l=this.north?-1:1,c=n.equatorialRadius*(Math.PI/2+i*t.DEGREES_TO_RADIANS*l);u[0]=c*Math.sin(o*t.DEGREES_TO_RADIANS),u[1]=c*Math.cos(o*t.DEGREES_TO_RADIANS)*l,u[2]=a}return u},i.prototype.geographicToCartesianGrid=function(n,i,o,a,s,u,l,c){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","geographicToCartesianGrid","missingGlobe"));if(!i)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","geographicToCartesianGrid","missingSector"));if(!s||s.length<o*a)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","geographicToCartesianGrid","The specified elevations array is null, undefined or insufficient length"));if(!c)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","geographicToCartesianGrid","missingResult"));var h,f,p,d,g,m=n.equatorialRadius,y=i.minLatitude*t.DEGREES_TO_RADIANS,v=i.maxLatitude*t.DEGREES_TO_RADIANS,E=i.minLongitude*t.DEGREES_TO_RADIANS,_=i.maxLongitude*t.DEGREES_TO_RADIANS,b=(v-y)/(o>1?o-1:1),S=(_-E)/(a>1?a-1:1),w=this.north?-1:1,x=u||new Vec3(0,0,0),T=Math.PI/2,L=0,C=0,A=new Float64Array(a),M=new Float64Array(a);for(f=0,d=E;f<a;f++,d+=S)f===a-1&&(d=_),A[f]=Math.cos(d),M[f]=Math.sin(d);for(h=0,p=y;h<o;h++,p+=b)for(h===o-1&&(p=v),g=m*(T+p*w),(this.north&&p===T||!this.north&&p===-T)&&(g=0),f=0;f<a;f++)c[C++]=g*M[f]-x[0],c[C++]=g*A[f]*w-x[1],c[C++]=s[L++]-x[2];return c},i.prototype.cartesianToGeographic=function(n,i,o,a,s,u){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","cartesianToGeographic","missingGlobe"));if(!u)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","cartesianToGeographic","missingResult"));var l,c=Math.sqrt(i*i+o*o);return c<1e-4?(u.latitude=this.north?90:-90,u.longitude=0,u.altitude=a):((l=c/n.equatorialRadius)>Math.PI&&(l=Math.PI),u.latitude=Math.asin(Math.cos(l)*(this.north?1:-1))*t.RADIANS_TO_DEGREES,u.longitude=Math.atan2(i,o*(this.north?-1:1))*t.RADIANS_TO_DEGREES,u.altitude=a),u},i.prototype.northTangentAtLocation=function(n,i,o,a){if(!a)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","northTangentAtLocation","missingResult"));return a[0]=Math.sin(o*t.DEGREES_TO_RADIANS)*(this.north?-1:1),a[1]=Math.cos(o*t.DEGREES_TO_RADIANS),a[2]=0,a},i.prototype.northTangentAtPoint=function(t,n,i,o,a,s){if(!s)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","northTangentAtLocation","missingResult"));var u=Math.sqrt(n*n+i*i);return u<1e-4?(s[0]=0,s[1]=1,s[2]=0):(s[0]=n/u*(this.north?-1:1),s[1]=i/u*(this.north?-1:1),s[2]=0),s},i})),i("projections/ProjectionUPS",["../geom/Angle","../error/ArgumentError","../projections/GeographicProjection","../util/Logger","../geom/Sector","../geom/Vec3","../util/WWMath"],(function(t,e,n,r,i,o,a){"use strict";var s=function(t){this.north=!("South"===t);var e=this.north?new i(0,90,-180,180):new i(-90,0,-180,180);n.call(this,"Uniform Polar Stereographic",!1,e),this._pole=t,this.displayName=this.north?"North UPS":"South UPS",this._stateKey="projection ups "+this._pole+" "};return s.prototype=Object.create(n.prototype),Object.defineProperties(s.prototype,{pole:{get:function(){return this._pole},set:function(t){this._pole=t,this.north=!("South"===this._pole),this.projectionLimits=this.north?new i(0,90,-180,180):new i(-90,0,-180,180),this._stateKey="projection ups "+this._pole+" "}},stateKey:{get:function(){return this._stateKey}}}),s.prototype.geographicToCartesian=function(n,i,o,a,s,u){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","geographicToCartesian","missingGlobe"));if(!u)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","geographicToCartesian","missingResult"));if(this.north&&90===i||!this.north&&-90===i)u[0]=0,u[1]=0,u[2]=a;else{var l,c,h,f=this.north?1:-1,p=i*t.DEGREES_TO_RADIANS,d=o*t.DEGREES_TO_RADIANS,g=Math.sqrt(n.eccentricitySquared),m=Math.sqrt(Math.pow(1+g,1+g)*Math.pow(1-g,1-g));(this.north&&p<0||!this.north&&p>0)&&(p=0),l=Math.sin(p*f),c=Math.sqrt((1-l)/(1+l)*Math.pow((1+g*l)/(1-g*l),g)),h=2*n.equatorialRadius*.994*c/m,u[0]=h*Math.sin(d),u[1]=-h*Math.cos(d)*f,u[2]=a}return u},s.prototype.geographicToCartesianGrid=function(n,i,s,u,l,c,h,f){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","geographicToCartesianGrid","missingGlobe"));if(!i)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","geographicToCartesianGrid","missingSector"));if(!l||l.length<s*u)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","geographicToCartesianGrid","The specified elevations array is null, undefined or insufficient length"));if(!f)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","geographicToCartesianGrid","missingResult"));var p,d,g,m,y,v,E,_=n.equatorialRadius,b=i.minLatitude*t.DEGREES_TO_RADIANS,S=i.maxLatitude*t.DEGREES_TO_RADIANS,w=i.minLongitude*t.DEGREES_TO_RADIANS,x=i.maxLongitude*t.DEGREES_TO_RADIANS,T=(S-b)/(s>1?s-1:1),L=(x-w)/(u>1?u-1:1),C=this.projectionLimits.minLatitude*t.DEGREES_TO_RADIANS,A=this.projectionLimits.maxLatitude*t.DEGREES_TO_RADIANS,M=Math.sqrt(n.eccentricitySquared),R=Math.sqrt(Math.pow(1+M,1+M)*Math.pow(1-M,1-M)),O=this.north?1:-1,P=c||new o(0,0,0),I=0,N=0;for(p=0,g=b;p<s;p++,g+=T)for(p===s-1&&(g=S),y=a.clamp(g,C,A),v=Math.sin(y*O),E=2*_*.994*Math.sqrt((1-v)/(1+v)*Math.pow((1+M*v)/(1-M*v),M))/R,d=0,m=w;d<u;d++,m+=L)d===u-1&&(m=x),f[N++]=E*Math.sin(m)-P[0],f[N++]=-E*Math.cos(m)*O-P[1],f[N++]=l[I++]-P[2];return f},s.prototype.cartesianToGeographic=function(n,i,o,a,s,u){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","cartesianToGeographic","missingGlobe"));if(!u)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","cartesianToGeographic","missingResult"));var l=Math.atan2(i,o*(this.north?-1:1)),c=Math.sqrt(n.eccentricitySquared),h=Math.sqrt(i*i+o*o)*Math.sqrt(Math.pow(1+c,1+c)*Math.pow(1-c,1-c))/(2*n.equatorialRadius*.994),f=n.eccentricitySquared,p=f*f,d=p*f,g=d*f,m=Math.PI/2-2*Math.atan(h),y=7*p/48+29*d/240+811*g/11520,v=7*d/120+81*g/1120,E=4279*g/161280,_=m-y+E,b=f/2+5*p/24+d/12+13*g/360-3*v,S=2*y-8*E,w=4*v,x=8*E,T=Math.sin(2*m),L=_+T*(b+T*(S+T*(w+x*T)));return L*=this.north?1:-1,u.latitude=L*t.RADIANS_TO_DEGREES,u.longitude=l*t.RADIANS_TO_DEGREES,u.altitude=a,u},s.prototype.northTangentAtLocation=function(n,i,o,a){if(!a)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionUPS","northTangentAtLocation","missingResult"));return a[0]=Math.sin(o*t.DEGREES_TO_RADIANS)*(this.north?-1:1),a[1]=Math.cos(o*t.DEGREES_TO_RADIANS),a[2]=0,a},s.prototype.northTangentAtPoint=function(t,n,i,o,a,s){if(!s)throw new e(r.logMessage(r.LEVEL_SEVERE,"ProjectionPolarEquidistant","northTangentAtLocation","missingResult"));var u=Math.sqrt(n*n+i*i);return u<1e-4?(s[0]=0,s[1]=1,s[2]=0):(s[0]=n/u*(this.north?-1:1),s[1]=i/u*(this.north?-1:1),s[2]=0),s},s})),i("layer/WmsLayer",["../error/ArgumentError","../geom/Location","../util/Logger","../util/PeriodicTimeSequence","../geom/Sector","../layer/TiledImageLayer","../util/WmsUrlBuilder"],(function(t,e,n,r,i,o,a){"use strict";var s=function(e,r){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmsLayer","constructor","No configuration specified."));var i=e.service+e.layerNames+e.styleNames;r&&(i+=r),o.call(this,e.sector,e.levelZeroDelta,e.numLevels,e.format,i,e.size,e.size),this.displayName=e.title,this.pickEnabled=!1,this.urlBuilder=new a(e.service,e.layerNames,e.styleNames,e.version,r),e.coordinateSystem&&(this.urlBuilder.crs=e.coordinateSystem),this.timeString=r};return s.prototype=Object.create(o.prototype),s.formLayerConfiguration=function(t){var n={title:t.title,version:t.capability.capsDoc.version},r=t.geographicBoundingBox||t.latLonBoundingBox;r&&r.westBoundLongitude?n.sector=new i(r.southBoundLatitude,r.northBoundLatitude,r.westBoundLongitude,r.eastBoundLongitude):r&&r.minx?n.sector=new i(r.miny,r.maxy,r.minx,r.maxx):n.sector=i.FULL_SPHERE,n.levelZeroDelta=new e(36,36),n.numLevels=19,n.size=256,n.layerNames=t.name;var o=t.capability.request.getMap,a=o.formats;a.indexOf("image/png")>=0?n.format="image/png":a.indexOf("image/jpeg")>=0?n.format="image/jpeg":a.indexOf("image/tiff")>=0?n.format="image/tiff":a.indexOf("image/gif")>=0&&(n.format="image/gif"),n.service=o.getUrl;var u=t.crses;u||(u=t.srses),u&&(u.indexOf("EPSG:4326")>=0||u.indexOf("epsg:4326")>=0?n.coordinateSystem="EPSG:4326":(u.indexOf("CRS84")>=0||u.indexOf("CRS:84")>=0)&&(n.coordinateSystem="CRS:84"));var l=s.parseTimeDimensions(t);return l&&l.length>0&&(n.timeSequences=l),n},s.parseTimeDimensions=function(t){var e=t.extents||t.dimensions,n=null;if(e){n=[];for(var i=0;i<e.length;i++){var o=e[i];if("time"===o.name.toLowerCase()&&(!o.units||"iso8601"===o.units.toLowerCase()))for(var a=o.content.split(","),s=0;s<a.length;s++){var u=a[s],l=u.split("/");1===l.length?n.push(new Date(u)):3===l.length&&n.push(new r(u))}}}return n},s})),i("layer/Sentinel2CloudlessLayer",["../geom/Location","../geom/Sector","../layer/WmsLayer","../util/Color"],(function(t,e,n,r){"use strict";var i=function(){n.call(this,{service:"https://tiles.maps.eox.at/wms",layerNames:"s2cloudless-2018",title:"Sentinel-2 Cloudless Layer",sector:e.FULL_SPHERE,levelZeroDelta:new t(45,45),numLevels:7,format:"image/jpeg",opacity:1,size:256,version:"1.3.0"},null)};return(i.prototype=Object.create(n.prototype)).doRender=function(t){n.prototype.doRender.call(this,t),this.inCurrentFrame&&t.screenCreditController.addCredit("Sentinel-2 cloudless - https://s2maps.eu by EOX IT Services GmbH (Contains modified Copernicus Sentinel data 2017 & 2018)",r.DARK_GRAY)},i})),i("util/editor/ShapeEditorConstants",[],(function(){"use strict";return{LOCATION:"location",ROTATION:"rotation",WIDTH:"width",HEIGHT:"height",RADIUS:"radius",DRAG:"drag",MIN_CORNER:"min_corner",MAX_CORNER:"max_corner",SHADOW:"shadow"}})),i("util/editor/BaseSurfaceEditorFragment",["../../geom/Angle","../../geom/Line","../../geom/Location","../Logger","../../shapes/Path","../../shapes/Placemark","../../shapes/PlacemarkAttributes","../../geom/Position","../../shapes/ShapeAttributes","./ShapeEditorConstants","../../error/UnsupportedOperationError","../../geom/Vec3"],(function(t,e,n,r,i,o,a,s,u,l,c,h){"use strict";var f=function(){};return f.prototype.canHandle=function(t){throw new c(r.logMessage(r.LEVEL_SEVERE,"BaseSurfaceEditorFragment","canHandle","abstractInvocation"))},f.prototype.createShadowShape=function(t){throw new c(r.logMessage(r.LEVEL_SEVERE,"BaseSurfaceEditorFragment","createShadowShape","abstractInvocation"))},f.prototype.getShapeCenter=function(t,e){throw new c(r.logMessage(r.LEVEL_SEVERE,"BaseSurfaceEditorFragment","getShapeCenter","abstractInvocation"))},f.prototype.initializeControlElements=function(t,e,n,i,o,a,s,u){throw new c(r.logMessage(r.LEVEL_SEVERE,"BaseSurfaceEditorFragment","initializeControlElements","abstractInvocation"))},f.prototype.updateControlElements=function(t,e,n,i,o){throw new c(r.logMessage(r.LEVEL_SEVERE,"BaseSurfaceEditorFragment","updateControlElements","abstractInvocation"))},f.prototype.reshape=function(t,e,n,i,o,a){throw new c(r.logMessage(r.LEVEL_SEVERE,"BaseSurfaceEditorFragment","reshape","abstractInvocation"))},f.prototype.addNewVertex=function(t,e,n){},f.prototype.createControlPoint=function(t,e,r,i){var s=new o(new n(0,0),!1,e),u=new a(null);switch(u.imageScale=.15,s.altitudeMode=WorldWind.CLAMP_TO_GROUND,s.userProperties.purpose=r,s.userProperties.purpose){case l.ROTATION:u.imageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFcklEQVR4AeXbS2xVVRvG8c0l4buE7zPqwIsOHGBwIBpN1DBwYAzRBEdG4wyIF0YmiIkTjTHxsnqRtkqFBhVCIQUU0VaEVC4iUCtgqphKGgqlBaS00MNp5ZzSy96P/8HaycpJofee7uXzyxsIdNB37b32WXvtfYLJjqRZ1ELqlVDhB73q/SqrbEOf+joiRSE1eE3XUvzbyYwyP/L/mwY1+JqkBdTMIImRNId6miYrBzTQrTGGgbmWUqqewWFAdEsSGn+IX7aGI9g7wgY1iJGEnwvb1V53SqcWTcfG7+XU3anr5CKOYAc2Yg2KYaxSrEMVqnEQ5xBhqHSp62KnOpdImpHvxu/iNN8UKYrkJEITdqAUZozKUI1GZJEbBqH5rM4+kI/GZ9D4q6HCATnJoA7lMBOsCLvRjZypETEtdlH/m6rm/8Pc/VJO+rAPRTA5pmog0kpfbVHLw5Pd/Lx+9TfLyR9YDTPFirAHA3AuquFpnV42Wc0v5nTLyuYqtsDk2XpcQZwIrWpdO6EXSOb6IiqUTTvKYaaJUpyEmzM6UztRR/4Rjnyfe8oXw0wzBfgBbpgOG8bb/H003yObozDT3D64aVPbm2Nt/m6ab5dNIwpgEqABcUJ0qOOF0TY/k+brnFNJhTAJUYjTiMMqtZ+V5R2jGYDlsunAKpiEKUEn4jAATSNt/k5Om6siIdbDJNQaDCDOeZ1fPuwSl6qWzWGYhKuDMxV6Jd18owF4VjaXUASTcCXIwJnSFdc9+pGiBtlUwXiiFs5Z0Md9xL+HGoBH3ft345FCdCEOq8aSoQZgo2xqYDzzNeJwBqTl3itIupXTv0+kB4UwnilGP5yp8IQ7AG/I5icYTzXBmeZV7gAcls02GE/VwJkGnXHzs6msbEphPFWKEHGYErcHkhbI5jKM51oQh42T1wNJL8rmOIznDsC5Vd4cSKqQzW4Yz30LZ2erPpD0s2w+g/FcFeKwl3gukNQgmzIYz1UgTlbZTCDpqGw+gvFcMdz7gkBSvWxWw/hPWdjnCIOBpEOyKYfxn/6CXQcwANIB2XwC4z8NgIg/BwJJe2WzBv+kawBPt9KBpFrZVMB4rhxxUkq1BJK2y2YHjOc2wdkeYyEkrZDNMRjP7UecC7qwNZB0f+5WmM9OwnlW8HK8Fd7h/e2wlYETtsiJpC2y+QLGU+sRh7VAh7sj9JJs6mE89QucG6Ft7gDc426KFMDHz/9eOC9XLczdFm+RzTcwnqmGc/qnJM3IHYC3ZdMFn7bGC3ARzqddWZAbSXOpTtl8B+OJnXBfuZV0WzBU3EVRN3x4OPoheuCc/hU3ejr8L6pNNt/DJNwhONvgvZJuGu4dgWWyySDJmySVCOHc/b0VDBf7oKRRNhdQDJMwZeiG0/yfkuaM9DWZ+VRaNieQtKv+KRDFGx9c/OaP9k2xp6hQNgeRxBWf3ftbOtZ3BVfKyV6Yae4Y3LD6qxzX9wKoDXLyK6brIuko3PDxVyNp1kR8AeqAnLRiOt02r8IJuEkptWvCvnVmB2GDnKSwESbPPkUX3GSU2TpRzedOhxVUKCe/42Pk40q/G/1w3guOmPPv2OYnJ5IWRYrSctKH/ZiqpfMWdCDnqF9hMB4LpiKS5lHHlZMe1GEtJuOIb0YzcpNWmvmuucFUxn4ldgl1VkOkFTUogRmHz1GPbuSGo97Eaf9kkM/YG6iVTIuUrpMuNGIPKrEapShGAQyKsA7bsR+/4RKcuHd0bSxunnE2NfIfSf+n3qcuaZQZRIRhfqafKbaHI744/40PPzUep0qpVo0jNNufVbZW0nPUf4OkxX50Pkgtpd6lqqgjHO3LVDdHNcWV+zJ1nr830/BOSe9Rz9sbstnBJOdvB05s7/twc1gAAAAASUVORK5CYII=";break;case l.LOCATION:u.imageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAF9ElEQVR4AeWbS2xUXx3HL48EH0GNuvChCxcYXIhGEzUsXBhDNMGV0bgD4oOVCWDiRh2KQPEhD8UHSqQKyoNClIpoRbQES5H/n6EtLX0Upi19lOm005lpZ+7cxzmf/zRzTnJPGOiDtjNz+STfXRfz/faec37nd3/XWm6ANcBm4FtCUpvzuFxQ1PGJC4koyM/7JLMevTMuN22PM75kN7AJWG1VI8A64It5n9OuIM0iyfvkJ2xash67gXdVg/FP5DwaPIE9T4N4knnhCcRIluaeFFsq0fiHbY+rlEACo1lojsO5x/Dbbjj8APbdhx/cg0hBB1vhF51wqhfq++HGKAxOg6Q0EzZP4zm2AavKbfwDeZ8zQiIJICR0ThUN17bNGl2cDrXBxRi0TkLW4xniOfoGpvlYOYyvcny+7Us8Asx40DQGP23XJpZONVG4MggpBwNfIntSXCvobStl/i15n3oCOAL+MQT7oktvvFQQDSWCmHKY6UvzyeU2v8Hx6SNAexJ+ov/jK6jZsP8+BJ5Ag+0jetPsWC7zW31BDsW0C3/o1T+ofPp1FyTz5v4Ty/CbJd0ghWRLQQLFSFav8wqQOkW6Uhg8ztBoLQXAp3yBE3zkf6iOsEpSpKB/DZtHZ1+aupc1/xFfkEHRHIdIhRk3VdyMg/Rn+N5izX/Ql4yhaJ2sfPP6SbibMI5JxrJ8baHmV/uCZhS9aajRR1wVaG+0+Js1OQ93cJr3LSSAnSie5mC/XvNVpAOtxd+uKQTQPV/z7xeSGX2k/Oph9ZnXmr1zuMIIYeecJS5wBcV/R6vXvFbTGBpsDxt454sC+DKKuF26tK3GpTDjoWEsx4nn/velJIqiTld5IdDfnhgbopNyeHOpAD6NYjQLkZCY1xeohA2arimOlArgjyjq+8NjXutCDDQph5RxVwDeLSUOQNrVZ364NFu+u8LYED8XDOC7KG6Ohc+8VucUBJb52WAA/0Nxui+8AdT3G8tgXJtfC+RQ1LaG07y+NvvS6GS91wI2oUjY4TWv1ZcGTSzDdyzg6yiiE+EP4PqIcVX+kwWcQPHXwfAHcKkfAp2tFgu4g+L4w/AHcKoXNJN5hiwgiuJQW/gDONoBmqxH1gLuovhRyAPQBZHG9nAsoAWF7u+HXfo1m+3jW8AtFLrVHXZlXF0HFANoQvGzB69GAPptkivwLODfKA4/eLX2gGmXlAU0ojjWEf4AZpe5ZiJPzAIuoTj3OPwBnOwBzZgqhHahuB0PfwCNw6AZmuG8BXw0cEcOfQBdKaNN/k3dCo8DSOBgiK/DkXtmhxjdIgfOoTjzKJzm9SyBJuMStzTAN1DcehreAO6MgyaZ50IwgA+hGLchEtLz3/aNt8abrSBADMXFWLj7gRmX5DMjNEAkUCCwNxquzW80a3SEj1kaDbAeGEfxl4HwBHB5wHj0BfAeqwRGUZRywvFydHa2Ie0aj/8J63kAbwIGUVx9Uv0B/GcUNI6PDbzDehHAjuDoazU3SX7XDUIat7/vW3MBrAU6AvVy+cfiFjlonXIM8yPAOms+ABuBVHA2MFJlu35PCjSewCtoo7UQgC8AAsWN0eox3zKOQd5nu7UYgD0EuDYEkQo3fzuOQc7j9Et9FwDUEeC1BNREq8N82qEBWLMUH0A1YQ4iU9tWWYNQ7UkMJvNcW6qvznQIdWD00wrHTPnNH++EhI3BjMv5JTNvLgd2AYIA9yfgx+3lGYdtGDTHXoRE5jxqtPllAdgiJSnMXZZ/Dq/c3lDXa4zB6qJtyhV8xloJgA1AG5ik3eJk5pGO5dnkft8D3SmeYaq43tdbKwmwBtgGPKEEsQxc6n/5HuMvHxa7VLqqw1zr3ULyeauM6AvUHilJQmkSNrROFuuIk93F+0Vta7HEjgSGGX/eCX9+VFxOrycgblOSjMtg3udLuqlREQBvBw4CCRaIL0HO/Tdu2uG6kGwtv/G5l8ZngaPAAItEm856NAJfAd5qVRn66Pw4sB3YD5wF/i8lE0KS9gVJVzBR0LAv6BOSq8AB4KvARmCttcy8ATcx2ly6HrMtAAAAAElFTkSuQmCC";break;case l.SHADOW:u.imageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAACBFBMVEUAAAD////////////////////////+/v7////////////9/f3////////////////////////+/v79/f3////////////////////////+/v7////////////////9/f3////////9/f3////////+/v7+/v7////////+/v7+/v79/f3+/v7////////////+/v7////+/v7////////////+/v7+/v7////+/v7////9/f3////////////9/f3////9/f3////+/v7////+/v7////9/f3////9/f3+/v7////+/v7////////////+/v79/f3////+/v79/f3+/v7////9/f3////////+/v7+/v79/f3+/v7////////9/f3+/v7+/v7+/v7////+/v7////+/v7+/v79/f3+/v79/f3+/v7////+/v7////////+/v7////////+/v7+/v7////////////////+/v7////////////9/f3+/v7+/v7+/v7+/v7////////+/v7////////+/v7+/v7+/v7+/v7+/v7+/v7////+/v7////////+/v7+/v7+/v7+/v7////+/v7+/v7+/v7+/v7+/v7////+/v7+/v7+/v7+/v7+/v7+/v7+/v7////+/v76+vr7+/v8/Pz9/f3+/v7///+XJ/0FAAAApnRSTlMAAQIDBAcICQoLDQ4PEBITFBgZGhscHSElJigoKS0uLzAyMzY3ODo6PkJERkZGSElMTE1TVVZYX19gYGFhY2RlZmdnbXBxcnN2e3x+gIOEhYaOj5CXmJifn6Gio6SmpqeoqKmrrK2xsrS2trm5ubu8wMHDxMXHx8jJys7O0dTY2Nrb3t7g4eHi4+Tl5+jp6erq6+zu7/Dw8fL09fb29/j5+vv8/f3+K7BQkAAAApBJREFUeAGl1/df01AUBfCTlqKi4lYUxb333htw7w3uIYhDVHDgUNxDHFREVCxQSF7e+Sdt36efQkdo8vL9/dzce18zCifB2VsOXmloinaFX9ypLCsJwJPQ4opWpvhXXzYMbk2tamcW0br5cGN8NRVpC8syYyxLCEnl82oDOYyp7GGMLcw0wmZc42T0x9jeqeKWmY3qo+faYDgaeIkxiYs7lmibBgdFjcmrOxIko+uR1dI/JC0zB0uS8qiBTAuipFT5HGyS15FheoS0TVcEyRNIM/GXyruvsAspxn7ykFdTyFXoI1BHStMDSXaMQq9tKu+xwjMkjW5T5+eFRXIrEoyryQV4WkN7IRQs9zqAQvIYFKPB6wCKICMDEDdDqwG1x0OIO6VuQK0WWgwAwyMaDSgk5wLYqY5Ah02eAXBPrVBzhq9A3l/S1ERyJEr0zkCR5A5s1F6BmuE0jpPCR4F6PNDboWKR7/GYNH0U+I1HpKmNjOC+vwJduKu5A0WyC7V+CpCduO2vQAtu+jvGl7hMCh8F6lHq76d8HpN83Ew2uRnGF1+3cyFwjrS0V9AEYJOfR9pFAOPo46E6CzGv9B/rYQMxe/RfLEcQV/CNFFoNREdAKdVqQSZfrsh/Swqd1/tQJGwg6f03wN1AQt5TnU+cjyEkFf8kbY/5zgnoY1E3KTwtgGuRopyk8JKvQCrjJEnbfb4qiDShWpLSbb4mgAyheA/S1ec+LwSQhVHanXsMQbJnbwDZLWxhjMhx+R8z4ajoCWOkbTnHWVOAfgTXvKOqITLStoo/n4cc8svDvX88E1khVJp8s8xAbkMOfGc2HbeWGHAnOOfw6/T0jRWD4IUxZd2+sw+bW8PNHxqr968szoOD/0KVHzHYRB3yAAAAAElFTkSuQmCC";break;case l.WIDTH:case l.HEIGHT:case l.RADIUS:case l.MIN_CORNER:u.imageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFl0lEQVR4AeWbS2xV1RrHN4+E+wj33tx7B/ehAwcYHIhGEzUMHBhDNMGR0TgD4oORCWLiRGNMfAylUIQqYkN5a4nysLVCsIhQqqGKYmis0FJooA9Lex57n/1Y309OYGd92TmWlvb09Gx+yX9I6P9/9vrWt769tlNugDnAYuAFxLyDeHuuqgMJ+hExiESIP4xxf8HkjyCFrYh5CVgEzHaqEWAe8DjiNyDhKDeL+AXMlTbEKwbyr2owfh/i7UMib5wGgYhxIZEhunyMsHvJTDR+J1I4wB8R9YN/Etz9kNsJ2c0wWntVa64pswGyWyDfCG4zFI5D1AcIJTFXLhMNLQNmVdr4bYi/FREBjUDQBfn9kNlojU5UxX/rNkFwBsQrEexQF+HFeyphfBbiv4iYEI3kodAO2U3WxJRpHXiHwGSSS0MIu5uu6m/TZf4viP8JGgnAO1L8I8c2Uc4gzGiOsOf+cptfgARdaIJOyHxQfuMlg/gKCCFGCoawe0W5zC9FIhf9uOf3VMB4QrntYEZUCAJh78YpLZCIWYIYo6u6XecVld1FwrOgCc+3TI15eACJfPXI2y1sRqkGCkcTIfTUT9b8XUhkq41/cgYaT8g7kgjhwqs3a/52xFwiJjhTTHkmm7fyT0GMGIgGnpmo+dlIdMym2A2ja2e8cau1EHarELyAsO9/EwlgJTHRIGTWV4t5q8x7YAbVUujrHK/5/yMmBwAGctuqzbxVdjMQ6hBW3rjFhb3EFE5Uq3mrQrtulDzgn2MF8CQxZqhUa1udS0Fc1JKuG+OAIx3E5Bur3byVd1gXRB+T+XOpAB5UnV5azNtdwQxDTHD23VIBbCHGbU6LeSv3c2IwmRH0WQH4NyI+AJK1e36qVAsS6oL4iA7gFVv529Nm3kqf5KOBHTqAb2zx+zS9AbjNehkMxObnAi4xmQ3pDaDoDaMnWf91gEU2ld/Sat4q7CGGsPdlB3iWmOB0+gMoHNNH5W0OUEeMdzD9AbhfoPqdNgc4QUy2If0B5BuJwYxccADb/mbq0h9Atl63xXkH+NYG8H5qjVvV6mbId4A2Yux8P90SLw4gcoCjNoBNt0gAubgPKAZAqy2CH94KAdgpkYShAxyyAWy+tWqAyY84QIsNoD79AWQ26XsG5xzAboz5/ekPILdbnwiLjRCriPE70h+A97UK4NIuB7g7OQpLtcJf9Zj8+XgU3p/y47CVnhDHI3Jgp60Dn6V4/W8nBpPt1xOh54jxv0tvAP4P+iC0WwdwB+ihSE1Kh6IF/dZ4saMBzhHjNqV8HpgbBmYlA3idGDOcstF4DUT9ev+vcZIA84EBYtwvU/Trt6Cv3AL/cUqhmyJMJiUvR9eDZHX1rxvr7fCfgPPEeIdTMARt02NwD/iHMxbACn0XsKqHJLldgNGnv9fGNK9elJxW/XIlr8VN7qK1yWjzfcA8ZzwAC4ERdTew+qp+aHd1JAyRaKEzEYDH9PND4XgVdXzfo0H85c7NAKxG47VWgfmOhPlCw+S+C4B6NP6PxSapOsyb7D5gzlR8ANWKJuwtFpmZdREq6Ex+VtM0NV+d2RDqE/9BcZupvPlsg73/Yyv+rikzn1gOqwCDJvi5Qr1CDXiHEtdejCCFN6z5MgAsQWQkUWWLs7bpa53zjRANgsa4V5DwIWc6ABYAp0histc/mvqoPL947mO7v2vMaBMw35lOgDnAMqAXjS6UbvPkZ4y5rcUple7q9FrvRMyjTsWwB6jViAyTRM8XgjPgtRYLZ7FmXA+mVk2f1l3/eHLvteUU/ARmiJKY3HnEf0IPNSoO8HfgbWCQCRMBwphIFGCyBxGztPLGb7w0HgbWAD1MBjEB4rUATwF/daoKu3XeCywH3gR2AO2IDCEyikTDSDCEhBeRqAsxB4C3gKeBhcBcp8z8DjRUCbmVu2RWAAAAAElFTkSuQmCC";break;case l.MAX_CORNER:u.imageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFl0lEQVR4AeWbS2xV1RrHN4+E+wj33tx7B/ehAwcYHIhGEzUMHBhDNMGR0TgD4oORCWLiRGNMfAylUIQqYkN5a4nysLVCsIhQqqGKYmis0FJooA9Lex57n/1Y309OYGd92TmWlvb09Gx+yX9I6P9/9vrWt769tlNugDnAYuAFxLyDeHuuqgMJ+hExiESIP4xxf8HkjyCFrYh5CVgEzHaqEWAe8DjiNyDhKDeL+AXMlTbEKwbyr2owfh/i7UMib5wGgYhxIZEhunyMsHvJTDR+J1I4wB8R9YN/Etz9kNsJ2c0wWntVa64pswGyWyDfCG4zFI5D1AcIJTFXLhMNLQNmVdr4bYi/FREBjUDQBfn9kNlojU5UxX/rNkFwBsQrEexQF+HFeyphfBbiv4iYEI3kodAO2U3WxJRpHXiHwGSSS0MIu5uu6m/TZf4viP8JGgnAO1L8I8c2Uc4gzGiOsOf+cptfgARdaIJOyHxQfuMlg/gKCCFGCoawe0W5zC9FIhf9uOf3VMB4QrntYEZUCAJh78YpLZCIWYIYo6u6XecVld1FwrOgCc+3TI15eACJfPXI2y1sRqkGCkcTIfTUT9b8XUhkq41/cgYaT8g7kgjhwqs3a/52xFwiJjhTTHkmm7fyT0GMGIgGnpmo+dlIdMym2A2ja2e8cau1EHarELyAsO9/EwlgJTHRIGTWV4t5q8x7YAbVUujrHK/5/yMmBwAGctuqzbxVdjMQ6hBW3rjFhb3EFE5Uq3mrQrtulDzgn2MF8CQxZqhUa1udS0Fc1JKuG+OAIx3E5Bur3byVd1gXRB+T+XOpAB5UnV5azNtdwQxDTHD23VIBbCHGbU6LeSv3c2IwmRH0WQH4NyI+AJK1e36qVAsS6oL4iA7gFVv529Nm3kqf5KOBHTqAb2zx+zS9AbjNehkMxObnAi4xmQ3pDaDoDaMnWf91gEU2ld/Sat4q7CGGsPdlB3iWmOB0+gMoHNNH5W0OUEeMdzD9AbhfoPqdNgc4QUy2If0B5BuJwYxccADb/mbq0h9Atl63xXkH+NYG8H5qjVvV6mbId4A2Yux8P90SLw4gcoCjNoBNt0gAubgPKAZAqy2CH94KAdgpkYShAxyyAWy+tWqAyY84QIsNoD79AWQ26XsG5xzAboz5/ekPILdbnwiLjRCriPE70h+A97UK4NIuB7g7OQpLtcJf9Zj8+XgU3p/y47CVnhDHI3Jgp60Dn6V4/W8nBpPt1xOh54jxv0tvAP4P+iC0WwdwB+ihSE1Kh6IF/dZ4saMBzhHjNqV8HpgbBmYlA3idGDOcstF4DUT9ev+vcZIA84EBYtwvU/Trt6Cv3AL/cUqhmyJMJiUvR9eDZHX1rxvr7fCfgPPEeIdTMARt02NwD/iHMxbACn0XsKqHJLldgNGnv9fGNK9elJxW/XIlr8VN7qK1yWjzfcA8ZzwAC4ERdTew+qp+aHd1JAyRaKEzEYDH9PND4XgVdXzfo0H85c7NAKxG47VWgfmOhPlCw+S+C4B6NP6PxSapOsyb7D5gzlR8ANWKJuwtFpmZdREq6Ex+VtM0NV+d2RDqE/9BcZupvPlsg73/Yyv+rikzn1gOqwCDJvi5Qr1CDXiHEtdejCCFN6z5MgAsQWQkUWWLs7bpa53zjRANgsa4V5DwIWc6ABYAp0histc/mvqoPL947mO7v2vMaBMw35lOgDnAMqAXjS6UbvPkZ4y5rcUple7q9FrvRMyjTsWwB6jViAyTRM8XgjPgtRYLZ7FmXA+mVk2f1l3/eHLvteUU/ARmiJKY3HnEf0IPNSoO8HfgbWCQCRMBwphIFGCyBxGztPLGb7w0HgbWAD1MBjEB4rUATwF/daoKu3XeCywH3gR2AO2IDCEyikTDSDCEhBeRqAsxB4C3gKeBhcBcp8z8DjRUCbmVu2RWAAAAAElFTkSuQmCC"}s.highlightAttributes=u,"undefined"!=typeof i&&(s.userProperties.index=i),t.push(s)},f.prototype.computeControlPointDelta=function(t,e,n){var r=t.computePointFromPosition(e.latitude,e.longitude,0,new h(0,0,0)),i=t.computePointFromPosition(n.latitude,n.longitude,0,new h(0,0,0));return r.subtract(i)},f.prototype.createRotationAccessory=function(t,e){var n=new u(null);n.outlineColor=e.imageColor,n.outlineWidth=2;var r=new i([],n);r.altitudeMode=WorldWind.CLAMP_TO_GROUND,r.followTerrain=!0,t.push(r)},f.prototype.updateRotationAccessory=function(t,e,n){n[0].positions=[t,e]},f.prototype.normalizedHeading=function(e,n){var r=e*t.DEGREES_TO_RADIANS+n*t.DEGREES_TO_RADIANS;return Math.abs(r)>t.TWO_PI&&(r%=t.TWO_PI),t.RADIANS_TO_DEGREES*(r>=0?r:r+t.TWO_PI)},f.prototype.deepCopyLocations=function(t){var e=[];if(t.length>0&&Array.isArray(t[0]))for(var r=0,i=t.length;r<i;r++){for(var o=[],a=0,s=t[r].length;a<s;a++)o.push(new n(t[r][a].latitude,t[r][a].longitude));e.push(o)}else{r=0;for(var u=t.length;r<u;r++)e.push(new n(t[r].latitude,t[r].longitude))}return e},f.prototype.getCenterFromLocations=function(t,e){var n=0,r=new h(0,0,0),i=new h(0,0,0);if(e.length>0&&Array.isArray(e[0]))for(var o=0,a=e.length;o<a;o++)for(var u=0,l=e[o].length;u<l;u++)r.add(t.computePointFromPosition(e[o][u].latitude,e[o][u].longitude,0,i)),n++;else{o=0;for(var c=e.length;o<c;o++)r.add(t.computePointFromPosition(e[o].latitude,e[o].longitude,0,i)),n++}return r.divide(n),t.computePositionFromPoint(r[0],r[1],r[2],new s(0,0,0))},f.prototype.getAverageDistance=function(t,e,n){for(var r=t.computePointFromLocation(e.latitude,e.longitude,new h(0,0,0)),i=n.length,o=0,a=new h(0,0,0),s=0;s<i;s++)o+=t.computePointFromLocation(n[s].latitude,n[s].longitude,a).distanceTo(r)/i;return o/t.equatorialRadius},f.prototype.moveLocation=function(t,e,n,r,i){var o=t.computePointFromPosition(n.latitude,n.longitude,0,new h(0,0,0));return t.computePositionFromPoint(o[0],o[1],o[2],i)},f.prototype.rotateLocations=function(t,e,r,i){var o=this.getCenterFromLocations(t,i),a=n.greatCircleAzimuth(o,r),s=n.greatCircleAzimuth(o,e)-a;if(i.length>0&&Array.isArray(i[0]))for(var u=0,l=i.length;u<l;u++)for(var c=0,h=i[u].length;c<h;c++){var f=n.greatCircleAzimuth(o,i[u][c]),p=n.greatCircleDistance(o,i[u][c]);n.greatCircleLocation(o,f+s,p,i[u][c])}else{u=0;for(var d=i.length;u<d;u++)f=n.greatCircleAzimuth(o,i[u]),p=n.greatCircleDistance(o,i[u]),n.greatCircleLocation(o,f+s,p,i[u])}return s},f.prototype.closestPointOnSegment=function(t,n,r){var i=n.subtract(t),o=new h(0,0,0);o.copy(i);var a=o.normalize(),s=new h(0,0,0);s.copy(r);var u=s.subtract(t).dot(a);return u<0?o.copy(t):u>i.magnitude()?o.copy(n):new e(t,a).pointAt(u,o)},f.prototype.computeShadowPointLocations=function(t,e,r,i){var o=null,a=null;t.pathType===WorldWind.LINEAR?e.position=new n((r.latitude+i.latitude)/2,(r.longitude+i.longitude)/2):t.pathType===WorldWind.RHUMB_LINE?(null==o&&(o=n.rhumbAzimuth(r,i),a=n.rhumbDistance(r,i)),n.rhumbLocation(r,o,.5*a,e.position)):(null==o&&(o=n.greatCircleAzimuth(r,i),a=n.greatCircleDistance(r,i)),n.greatCircleLocation(r,o,.5*a,e.position))},f})),i("util/editor/PlacemarkEditorFragment",["./BaseSurfaceEditorFragment","../../geom/Location","./ShapeEditorConstants","../../shapes/Placemark"],(function(t,e,n,r){"use strict";var i=function(){};return(i.prototype=Object.create(t.prototype)).canHandle=function(t){return t instanceof Function?"Placemark"===t.name:t instanceof r},i.prototype.createShadowShape=function(t){return new r(t.position,null,t.attributes)},i.prototype.getShapeCenter=function(t){return t.position},i.prototype.isRegularShape=function(){return!0},i.prototype.initializeControlElements=function(t,e,r,i,o,a,s){s&&(t.userProperties.purpose=n.DRAG,e.push(t))},i.prototype.updateControlElements=function(t,e,n){n[0].position=t.position},i.prototype.reshape=function(t,e,n,r,i){return!1},i})),i("shapes/SurfaceEllipse",["../geom/Angle","../error/ArgumentError","../geom/Location","../util/Logger","../shapes/ShapeAttributes","../shapes/SurfaceShape","../util/WWMath"],(function(t,e,n,r,i,o,a){"use strict";var s=function t(n,i,a,s,u){if(!n)throw new e(r.logMessage(r.LEVEL_SEVERE,"SurfaceEllipse","constructor","missingLocation"));if(i<0||a<0)throw new e(r.logMessage(r.LEVEL_SEVERE,"SurfaceEllipse","constructor","Radius is negative."));o.call(this,u),this._center=n,this._majorRadius=i,this._minorRadius=a,this._heading=s,this._intervals=t.DEFAULT_NUM_INTERVALS};return s.prototype=Object.create(o.prototype),Object.defineProperties(s.prototype,{center:{get:function(){return this._center},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._center=t}},majorRadius:{get:function(){return this._majorRadius},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._majorRadius=t}},minorRadius:{get:function(){return this._minorRadius},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._minorRadius=t}},heading:{get:function(){return this._heading},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._heading=t}},intervals:{get:function(){return this._intervals},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._intervals=t}}}),s.staticStateKey=function(t){return o.staticStateKey(t)+" ce "+t.center.toString()+" ma "+t.majorRadius.toString()+" mi "+t.minorRadius.toString()+" he "+t.heading.toString()+" in "+t.intervals.toString()},s.prototype.computeStateKey=function(){return s.staticStateKey(this)},s.prototype.computeBoundaries=function(e){if(0==this.majorRadius&&0==this.minorRadius)return null;var r=e.globe,i=1+Math.max(s.MIN_NUM_INTERVALS,this.intervals),o=2*Math.PI/(i-1),u=r.radiusAt(this.center.latitude,this.center.longitude);this._boundaries=new Array(i);for(var l=0;l<i;l++){var c=l!=i-1?l*o:0,h=this.majorRadius*Math.cos(c),f=this.minorRadius*Math.sin(c),p=Math.sqrt(h*h+f*f),d=Math.PI/2-(Math.acos(h/p)*a.signum(f)-this.heading*t.DEGREES_TO_RADIANS);this._boundaries[l]=n.greatCircleLocation(this.center,d*t.RADIANS_TO_DEGREES,p/u,new n(0,0))}},s.prototype.getReferencePosition=function(){return this.center},s.prototype.moveTo=function(t,e){this.center=e},s.MIN_NUM_INTERVALS=8,s.DEFAULT_NUM_INTERVALS=64,s})),i("util/editor/SurfaceEllipseEditorFragment",["./BaseSurfaceEditorFragment","../../geom/Location","./ShapeEditorConstants","../../shapes/SurfaceEllipse"],(function(t,e,n,r){"use strict";var i=function(){};return(i.prototype=Object.create(t.prototype)).canHandle=function(t){return t instanceof Function?"SurfaceEllipse"===t.name:t instanceof r},i.prototype.createShadowShape=function(t){return new r(t.center,t.majorRadius,t.minorRadius,t.heading,t.attributes)},i.prototype.getShapeCenter=function(t){return t.center},i.prototype.isRegularShape=function(){return!0},i.prototype.initializeControlElements=function(t,e,r,i,o,a){o&&(this.createControlPoint(e,o,n.WIDTH),this.createControlPoint(e,o,n.HEIGHT)),a&&(this.createControlPoint(e,a,n.ROTATION),this.createRotationAccessory(i,a))},i.prototype.updateControlElements=function(t,r,i,o,a){var s=i.length;if(s>0)for(var u=0;u<s;u++)i[u].userProperties.purpose===n.WIDTH&&(e.greatCircleLocation(t.center,90+t.heading,t.majorRadius/r.equatorialRadius,i[u].position),i[u].userProperties.size=t.majorRadius),i[u].userProperties.purpose===n.HEIGHT&&(e.greatCircleLocation(t.center,t.heading,t.minorRadius/r.equatorialRadius,i[u].position),i[u].userProperties.size=t.minorRadius),i[u].userProperties.purpose===n.ROTATION&&(e.greatCircleLocation(t.center,t.heading,1.6*t.minorRadius/r.equatorialRadius,i[u].position),i[u].userProperties.rotation=t.heading,this.updateRotationAccessory(t.center,i[u].position,a))},i.prototype.reshape=function(t,r,i,o,a){var s=this.computeControlPointDelta(r,o,a),u=this.computeControlPointDelta(r,i.position,t.center).normalize();if(i.userProperties.purpose===n.WIDTH){var l=t.majorRadius+s.dot(u);l>0&&(t.majorRadius=l)}else if(i.userProperties.purpose===n.HEIGHT){var c=t.minorRadius+s.dot(u);c>0&&(t.minorRadius=c)}else if(i.userProperties.purpose===n.ROTATION){var h=e.greatCircleAzimuth(t.center,a),f=e.greatCircleAzimuth(t.center,o)-h;t.heading=this.normalizedHeading(t.heading,f)}},i})),i("shapes/SurfaceCircle",["../error/ArgumentError","../geom/Location","../util/Logger","../shapes/ShapeAttributes","../shapes/SurfaceShape"],(function(t,e,n,r,i){"use strict";var o=function e(r,o,a){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"SurfaceCircle","constructor","missingLocation"));if(o<0)throw new t(n.logMessage(n.LEVEL_SEVERE,"SurfaceCircle","constructor","Radius is negative"));i.call(this,a),this._center=r,this._radius=o,this._intervals=e.DEFAULT_NUM_INTERVALS};return o.prototype=Object.create(i.prototype),Object.defineProperties(o.prototype,{center:{get:function(){return this._center},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._center=t}},radius:{get:function(){return this._radius},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._radius=t}},intervals:{get:function(){return this._intervals},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._intervals=t}}}),o.staticStateKey=function(t){return i.staticStateKey(t)+" ce "+t.center.toString()+" ra "+t.radius.toString()},o.prototype.computeStateKey=function(){return o.staticStateKey(this)},o.prototype.computeBoundaries=function(t){if(0===this.radius)return null;var n=1+Math.max(o.MIN_NUM_INTERVALS,this.intervals),r=360/(n-1),i=this.radius/t.globe.radiusAt(this.center.latitude,this.center.longitude);this._boundaries=new Array(n);for(var a=0;a<n;a++){var s=a!==n-1?a*r:0;this._boundaries[a]=e.greatCircleLocation(this.center,s,i,new e(0,0))}},o.prototype.getReferencePosition=function(){return this.center},o.prototype.moveTo=function(t,e){this.center=e},o.MIN_NUM_INTERVALS=8,o.DEFAULT_NUM_INTERVALS=64,o})),i("util/editor/SurfaceCircleEditorFragment",["./BaseSurfaceEditorFragment","../../geom/Location","./ShapeEditorConstants","../../shapes/SurfaceCircle"],(function(t,e,n,r){"use strict";var i=function(){};return(i.prototype=Object.create(t.prototype)).canHandle=function(t){return t instanceof Function?"SurfaceCircle"===t.name:t instanceof r},i.prototype.createShadowShape=function(t){return new r(t.center,t.radius,t.attributes)},i.prototype.getShapeCenter=function(t){return t.center},i.prototype.isRegularShape=function(){return!0},i.prototype.initializeControlElements=function(t,e,r,i,o){o&&this.createControlPoint(e,o,n.RADIUS)},i.prototype.updateControlElements=function(t,n,r){r.length>0&&(e.greatCircleLocation(t.center,90,t.radius/n.equatorialRadius,r[0].position),r[0].userProperties.size=t.radius)},i.prototype.reshape=function(t,e,r,i,o){if(r.userProperties.purpose===n.RADIUS){var a=this.computeControlPointDelta(e,i,o),s=this.computeControlPointDelta(e,r.position,t.center).normalize(),u=t.radius+a.dot(s);u>0&&(t.radius=u)}},i})),i("util/editor/SurfacePolygonEditorFragment",["./BaseSurfaceEditorFragment","../../geom/Location","../../geom/Position","./ShapeEditorConstants","../../shapes/SurfacePolygon","../../geom/Vec3"],(function(t,e,n,r,i,o){"use strict";var a=function(){this.currentHeading=0,this.moveControlPointAttributes=null,this.shadowControlPointAttributes=null};return(a.prototype=Object.create(t.prototype)).canHandle=function(t){return t instanceof Function?"SurfacePolygon"===t.name:t instanceof i},a.prototype.createShadowShape=function(t){return new i(this.deepCopyLocations(t.boundaries),t.attributes)},a.prototype.getShapeCenter=function(t,e){return this.getCenterFromLocations(e,t.boundaries)},a.prototype.isRegularShape=function(){return!1},a.prototype.initializeCreationControlElements=function(t,e,n){var i=this.getLocations(t);this.currentHeading=0,this.moveControlPointAttributes=n;for(var o=0,a=i.length;o<a;o++)this.createControlPoint(e,n,r.LOCATION,o)},a.prototype.initializeControlElements=function(t,e,n,i,o,a,s,u){var l=this.getLocations(t);if(this.currentHeading=0,s){this.moveControlPointAttributes=s,this.shadowControlPointAttributes=u;for(var c=0,h=l.length;c<h;c++)this.createControlPoint(e,s,r.LOCATION,c)}if(a&&(this.createControlPoint(e,a,r.ROTATION),this.createRotationAccessory(i,a)),u)for(c=0,h=l.length;c<h;c++)this.createControlPoint(n,u,r.SHADOW,c)},a.prototype.updateCreationControlElements=function(t,e,n){for(var i=this.getLocations(t),o=n.length,a=i.length,s=0;s<a;s++)s>=o&&this.createControlPoint(n,this.moveControlPointAttributes,r.LOCATION,s),n[s].position=i[s];o>a&&n.splice(a,o-a)},a.prototype.updateControlElements=function(t,n,i,o,a){for(var s=this.getLocations(t),u=s.length,l=[],c=null,h=i.length-1;h>-1;h--){if(null!==i[h])if(i[h].userProperties.purpose===r.ROTATION){c=i[h];var f=this.getCenterFromLocations(n,s),p=1.2*this.getAverageDistance(n,f,s);e.greatCircleLocation(f,this.currentHeading,p,c.position),c.userProperties.rotation=this.currentHeading,this.updateRotationAccessory(f,c.position,a)}else l.push(i[h]);i.pop()}l.reverse();var d=l.length;for(h=0;h<u;h++)h>=d&&(this.createControlPoint(l,this.moveControlPointAttributes,r.LOCATION,h),this.createControlPoint(o,this.shadowControlPointAttributes,r.SHADOW,h)),l[h].position=s[h];for(l.length>u&&(l.splice(u,l.length-u),o.splice(u,o.length-u)),h=0;h<l.length;h++)i.push(l[h]);if(t.boundaries.length>0&&Array.isArray(t.boundaries[0]))for(var g=0,m=(h=0,t.boundaries.length);h<m;h++)for(var y=0,v=t.boundaries[h].length-1;y<v;y++)this.computeShadowPointLocations(t,o[g],t.boundaries[h][y],t.boundaries[h][y+1]),y==v-1&&(this.computeShadowPointLocations(t,o[g+1],t.boundaries[h][y+1],t.boundaries[h][0]),g+=1),g+=1;else for(h=0;h<i.length-1;h++)this.computeShadowPointLocations(t,o[h],s[h],s[h+1]),h==i.length-2&&this.computeShadowPointLocations(t,o[h+1],s[h+1],s[0]);null!==c&&i.push(c)},a.prototype.reshape=function(t,e,n,o,a,s){var u=this.getLocations(t);if(n.userProperties.purpose===r.ROTATION){var l=this.rotateLocations(e,o,a,u);this.currentHeading=this.normalizedHeading(this.currentHeading,l),t.resetBoundaries(),t._stateId=i.stateId++,t.stateKeyInvalid=!0}else if(n.userProperties.purpose===r.LOCATION||n.userProperties.purpose===r.SHADOW){var c=n.userProperties.index,h=t.boundaries,f=h.length,p=this.getRingAndLocationIndex(t,c);if(s)if(-1!==p.ringIndex){var d=h[p.ringIndex];d.length>3?d.splice(p.locationIndex,1):f>2&&h.splice(p.ringIndex,1)}else h.length>3&&h.splice(c,1);else n.userProperties.purpose===r.SHADOW?-1!==p.ringIndex?this.moveLocation(e,n,a,o,h[p.ringIndex][p.locationIndex+1]):this.moveLocation(e,n,a,o,u[c+1]):this.moveLocation(e,n,a,o,u[c]);t.resetBoundaries(),t._stateId=i.stateId++,t.stateKeyInvalid=!0}},a.prototype.getRingAndLocationIndex=function(t,e){var n=t.boundaries,r=n.length,i={locationIndex:-1,ringIndex:-1};if(r>0&&Array.isArray(t.boundaries[0]))for(var o=0,a=0;a<r&&-1==i.ringIndex;a++){var s=n[a].length;o+s>e&&(i.ringIndex=a,i.locationIndex=e-o),o+=s}return i},a.prototype.convertShadowControlPoint=function(t,e,n,r){var o=t.boundaries,a=this.getRingAndLocationIndex(t,n);-1!==a.ringIndex?o[a.ringIndex].splice(a.locationIndex+1,0,r):o.splice(n+1,0,r),t.resetBoundaries(),t._stateId=i.stateId++,t.stateKeyInvalid=!0},a.prototype.addNewVertex=function(t,e,r){var a=new o(0,0,0),s=new o(0,0,0),u=new o(0,0,0),l=t.boundaries,c=e.computePointFromPosition(r.latitude,r.longitude,0,new o(0,0,0)),h=new o(0,0,0),f=-1,p=Number.MAX_VALUE;if(Array.isArray(t.boundaries[0])){for(var d=-1,g=0,m=l.length;g<m;g++)for(var y=1,v=l[g].length;y<=v;y++){var E=l[g][y-1],_=l[g][y==v?0:y];e.computePointFromPosition(E.latitude,E.longitude,0,a),e.computePointFromPosition(_.latitude,_.longitude,0,s),u.copy(c),(w=(u=this.closestPointOnSegment(a,s,c)).distanceTo(c))<p&&(h.copy(u),d=g,f=y,p=w)}var b=e.computePositionFromPoint(h[0],h[1],h[2],new n(0,0,0));f==l[d].length?l[d].push(b):l[d].splice(f,0,b),t.resetBoundaries(),t._stateId=i.stateId++,t.stateKeyInvalid=!0}else{g=1;for(var S=l.length;g<=S;g++){var w;E=l[g-1],_=l[g==S?0:g],e.computePointFromPosition(E.latitude,E.longitude,0,a),e.computePointFromPosition(_.latitude,_.longitude,0,s),u.copy(c),(w=(u=this.closestPointOnSegment(a,s,c)).distanceTo(c))<p&&(h.copy(u),f=g,p=w)}b=e.computePositionFromPoint(h[0],h[1],h[2],new n(0,0,0)),f==l.length?l.push(b):l.splice(f,0,b),t.resetBoundaries(),t._stateId=i.stateId++,t.stateKeyInvalid=!0}},a.prototype.createNewVertex=function(t,n,r){t.boundaries.push(new e(r.latitude,r.longitude)),t.resetBoundaries(),t._stateId=i.stateId++,t.stateKeyInvalid=!0},a.prototype.getLocations=function(t){var e=[];if(t.boundaries.length>0&&Array.isArray(t.boundaries[0]))for(var n=0,r=t.boundaries.length;n<r;n++)for(var i=0,o=t.boundaries[n].length;i<o;i++)e.push(t.boundaries[n][i]);else{n=0;for(var a=t.boundaries.length;n<a;n++)e.push(t.boundaries[n])}return e},a})),i("util/editor/SurfacePolylineEditorFragment",["./BaseSurfaceEditorFragment","../../geom/Location","../../geom/Position","./ShapeEditorConstants","../../shapes/SurfacePolyline","../../geom/Vec3"],(function(t,e,n,r,i,o){"use strict";var a=function(){this.currentHeading=0,this.moveControlPointAttributes=null,this.shadowControlPointAttributes=null};return(a.prototype=Object.create(t.prototype)).canHandle=function(t){return t instanceof Function?"SurfacePolyline"===t.name:t instanceof i},a.prototype.createShadowShape=function(t){return new i(this.deepCopyLocations(t.boundaries),t.attributes)},a.prototype.getShapeCenter=function(t,e){return this.getCenterFromLocations(e,t.boundaries)},a.prototype.isRegularShape=function(){return!1},a.prototype.initializeCreationControlElements=function(t,e,n){this.currentHeading=0,this.moveControlPointAttributes=n;for(var i=0,o=t.boundaries.length;i<o;i++)this.createControlPoint(e,n,r.LOCATION,i)},a.prototype.initializeControlElements=function(t,e,n,i,o,a,s,u){if(this.currentHeading=0,s){this.moveControlPointAttributes=s,this.shadowControlPointAttributes=u;for(var l=t.boundaries,c=0,h=l.length;c<h;c++)this.createControlPoint(e,s,r.LOCATION,c)}if(a&&(this.createControlPoint(e,a,r.ROTATION),this.createRotationAccessory(i,a)),u)for(c=0,h=l.length-1;c<h;c++)this.createControlPoint(n,u,r.SHADOW,c)},a.prototype.updateCreationControlElements=function(t,e,n){for(var i=t.boundaries,o=n.length,a=i.length,s=0;s<a;s++)s>=o&&this.createControlPoint(n,this.moveControlPointAttributes,r.LOCATION,s),n[s].position=i[s];o>a&&n.splice(a,o-a)},a.prototype.updateControlElements=function(t,n,i,o,a){for(var s=t.boundaries,u=s.length,l=[],c=null,h=i.length-1;h>-1;h--){if(null!==i[h])if(i[h].userProperties.purpose===r.ROTATION){c=i[h];var f=this.getCenterFromLocations(n,s),p=1.2*this.getAverageDistance(n,f,s);e.greatCircleLocation(f,this.currentHeading,p,c.position),c.userProperties.rotation=this.currentHeading,this.updateRotationAccessory(f,c.position,a)}else l.push(i[h]);i.pop()}l.reverse();var d=l.length;for(h=0;h<u;h++)h>=d&&(this.createControlPoint(l,this.moveControlPointAttributes,r.LOCATION,h),this.createControlPoint(o,this.shadowControlPointAttributes,r.SHADOW,h-1)),l[h].position=s[h];for(l.length>u&&(l.splice(u,l.length-u),o.splice(u-1,o.length-u-1)),h=0;h<l.length;h++)i.push(l[h]);for(h=0;h<i.length-1;h++)this.computeShadowPointLocations(t,o[h],s[h],s[h+1]);null!==c&&i.push(c)},a.prototype.reshape=function(t,e,n,o,a,s){var u=t.boundaries;if(n.userProperties.purpose===r.ROTATION){var l=this.rotateLocations(e,o,a,u);this.currentHeading=this.normalizedHeading(this.currentHeading,l),t.resetBoundaries(),t._stateId=i.stateId++,t.stateKeyInvalid=!0}else if(n.userProperties.purpose===r.LOCATION||n.userProperties.purpose===r.SHADOW){var c=n.userProperties.index;s?u.length>2&&u.splice(c,1):n.userProperties.purpose===r.SHADOW?this.moveLocation(e,n,a,o,u[c+1]):this.moveLocation(e,n,a,o,u[c]),t.resetBoundaries(),t._stateId=i.stateId++,t.stateKeyInvalid=!0}},a.prototype.convertShadowControlPoint=function(t,e,n,r){t.boundaries.splice(n+1,0,r),t.resetBoundaries(),t._stateId=i.stateId++,t.stateKeyInvalid=!0},a.prototype.addNewVertex=function(t,e,r){for(var a=new o(0,0,0),s=new o(0,0,0),u=new o(0,0,0),l=t.boundaries,c=e.computePointFromPosition(r.latitude,r.longitude,0,new o(0,0,0)),h=new o(0,0,0),f=-1,p=Number.MAX_VALUE,d=1,g=l.length;d<g;d++){var m=l[d-1],y=l[d];e.computePointFromPosition(m.latitude,m.longitude,0,a),e.computePointFromPosition(y.latitude,y.longitude,0,s),u.copy(c);var v=(u=this.closestPointOnSegment(a,s,c)).distanceTo(c);v<p&&(h.copy(u),f=d,p=v)}var E=e.computePositionFromPoint(h[0],h[1],h[2],new n(0,0,0));f==l.length?l.push(E):l.splice(f,0,E),t.resetBoundaries(),t._stateId=i.stateId++,t.stateKeyInvalid=!0},a.prototype.createNewVertex=function(t,n,r){t.boundaries.push(new e(r.latitude,r.longitude)),t.resetBoundaries(),t._stateId=i.stateId++,t.stateKeyInvalid=!0},a})),i("shapes/SurfaceRectangle",["../geom/Angle","../error/ArgumentError","../geom/Location","../util/Logger","../shapes/ShapeAttributes","../shapes/SurfaceShape","../util/WWMath"],(function(t,e,n,r,i,o,a){"use strict";var s=function(t,n,i,a,s){if(!t)throw new e(r.logMessage(r.LEVEL_SEVERE,"SurfaceRectangle","constructor","missingLocation"));if(n<0||i<0)throw new e(r.logMessage(r.LEVEL_SEVERE,"SurfaceRectangle","constructor","Size is negative."));o.call(this,s),this._center=t,this._width=n,this._height=i,this._heading=a};return s.prototype=Object.create(o.prototype),Object.defineProperties(s.prototype,{center:{get:function(){return this._center},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._center=t}},width:{get:function(){return this._width},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._width=t}},height:{get:function(){return this._height},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._height=t}},heading:{get:function(){return this._heading},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._heading=t}}}),s.staticStateKey=function(t){return o.staticStateKey(t)+" ce "+t.center.toString()+" wi "+t.width.toString()+" he "+t.height.toString()+" hd "+t.heading.toString()},s.prototype.computeStateKey=function(){return s.staticStateKey(this)},s.prototype.computeBoundaries=function(t){var e=.5*this.width,n=.5*this.height,r=t.globe.radiusAt(this.center.latitude,this.center.longitude);this._boundaries=new Array(4),this.addLocation(0,-e,-n,r),this.addLocation(1,e,-n,r),this.addLocation(2,e,n,r),this.addLocation(3,-e,n,r)},s.prototype.addLocation=function(e,r,i,o){var s=Math.sqrt(r*r+i*i),u=Math.PI/2-(Math.acos(r/s)*a.signum(i)-this.heading*t.DEGREES_TO_RADIANS);this._boundaries[e]=n.greatCircleLocation(this.center,u*t.RADIANS_TO_DEGREES,s/o,new n(0,0))},s.prototype.getReferencePosition=function(){return this.center},s.prototype.moveTo=function(t,e){this.center=this.computeShiftedLocations(t,this.getReferencePosition(),e,[this.center])[0]},s})),i("util/editor/SurfaceRectangleEditorFragment",["./BaseSurfaceEditorFragment","../../geom/Location","./ShapeEditorConstants","../../shapes/SurfaceRectangle"],(function(t,e,n,r){"use strict";var i=function(){};return(i.prototype=Object.create(t.prototype)).canHandle=function(t){return t instanceof Function?"SurfaceRectangle"===t.name:t instanceof r},i.prototype.createShadowShape=function(t){return new r(t.center,t.width,t.height,t.heading,t.attributes)},i.prototype.getShapeCenter=function(t){return t.center},i.prototype.isRegularShape=function(){return!0},i.prototype.initializeControlElements=function(t,e,r,i,o,a){o&&(this.createControlPoint(e,o,n.WIDTH),this.createControlPoint(e,o,n.HEIGHT)),a&&(this.createControlPoint(e,a,n.ROTATION),this.createRotationAccessory(i,a))},i.prototype.updateControlElements=function(t,r,i,o,a){var s=i.length;if(s>0)for(var u=0;u<s;u++)i[u].userProperties.purpose===n.WIDTH&&(e.greatCircleLocation(t.center,90+t.heading,.5*t.width/r.equatorialRadius,i[u].position),i[u].userProperties.size=t.width),i[u].userProperties.purpose===n.HEIGHT&&(e.greatCircleLocation(t.center,t.heading,.5*t.height/r.equatorialRadius,i[u].position),i[u].userProperties.size=t.height),i[u].userProperties.purpose===n.ROTATION&&(e.greatCircleLocation(t.center,t.heading,.8*t.height/r.equatorialRadius,i[u].position),i[u].userProperties.rotation=t.heading,this.updateRotationAccessory(t.center,i[u].position,a))},i.prototype.reshape=function(t,r,i,o,a){var s=this.computeControlPointDelta(r,o,a),u=this.computeControlPointDelta(r,i.position,t.center).normalize();if(i.userProperties.purpose===n.WIDTH){var l=t.width+2*s.dot(u);l>0&&(t.width=l)}else if(i.userProperties.purpose===n.HEIGHT){var c=t.height+2*s.dot(u);c>0&&(t.height=c)}else if(i.userProperties.purpose===n.ROTATION){var h=e.greatCircleAzimuth(t.center,a),f=e.greatCircleAzimuth(t.center,o)-h;t.heading=this.normalizedHeading(t.heading,f)}},i})),i("shapes/SurfaceSector",["../error/ArgumentError","../geom/Location","../util/Logger","../shapes/ShapeAttributes","../shapes/SurfaceShape"],(function(t,e,n,r,i){"use strict";var o=function(e,r){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"SurfaceSector","constructor","missingSector"));i.call(this,r),this._sector=e,this._pathType=WorldWind.LINEAR};return o.prototype=Object.create(i.prototype),Object.defineProperties(o.prototype,{sector:{get:function(){return this._sector},set:function(t){this.stateKeyInvalid=!0,this.resetBoundaries(),this._sector=t}}}),o.staticStateKey=function(t){return i.staticStateKey(t)},o.prototype.computeStateKey=function(){return o.staticStateKey(this)},o.prototype.computeBoundaries=function(t){var n=this._sector;this._boundaries=new Array(4),this._boundaries[0]=new e(n.minLatitude,n.minLongitude),this._boundaries[1]=new e(n.maxLatitude,n.minLongitude),this._boundaries[2]=new e(n.maxLatitude,n.maxLongitude),this._boundaries[3]=new e(n.minLatitude,n.maxLongitude)},o.prototype.getReferencePosition=function(){return new e(this.sector.centroidLatitude(),this.sector.centroidLongitude())},o.prototype.moveTo=function(t,n){var r=this._sector,i=new Array(3);i[0]=new e(r.minLatitude,r.minLongitude),i[1]=new e(r.maxLatitude,r.minLongitude),i[2]=new e(r.maxLatitude,r.maxLongitude),i=this.computeShiftedLocations(t,this.getReferencePosition(),n,i),this.sector=new WorldWind.Sector(i[0].latitude,i[1].latitude,i[1].longitude,i[2].longitude)},o})),i("util/editor/SurfaceSectorEditorFragment",["./BaseSurfaceEditorFragment","../../geom/Location","../../geom/Position","../../geom/Sector","./ShapeEditorConstants","../../shapes/SurfaceSector"],(function(t,e,n,r,i,o){"use strict";var a=function(){};return(a.prototype=Object.create(t.prototype)).canHandle=function(t){return t instanceof Function?"SurfaceSector"===t.name:t instanceof o},a.prototype.createShadowShape=function(t){return new o(new r(t._boundaries[0].latitude,t._boundaries[1].latitude,t._boundaries[0].longitude,t._boundaries[2].longitude),t.attributes)},a.prototype.getShapeCenter=function(t,e){return this.getCenterFromLocations(e,t._boundaries)},a.prototype.isRegularShape=function(){return!0},a.prototype.initializeControlElements=function(t,e,n,r,o){o&&(this.createControlPoint(e,o,i.MIN_CORNER),this.createControlPoint(e,o,i.MAX_CORNER))},a.prototype.updateControlElements=function(t,n,r){r.length>0&&(r[0].position=new e(t._sector.minLatitude,t._sector.minLongitude),r[1].position=new e(t._sector.maxLatitude,t._sector.maxLongitude))},a.prototype.reshape=function(t,e,n,o,a){n.userProperties.purpose===i.MIN_CORNER?t.sector=new r(o.latitude,t._sector.maxLatitude,o.longitude,t._sector.maxLongitude):n.userProperties.purpose===i.MAX_CORNER&&(t.sector=new r(t._sector.minLatitude,o.latitude,t._sector.minLongitude,o.longitude))},a})),i("util/editor/ShapeEditor",["../../shapes/Annotation","../../shapes/AnnotationAttributes","../../error/ArgumentError","../Color","../Font","../Insets","../../geom/Location","../Logger","../../shapes/Placemark","../../shapes/PlacemarkAttributes","./PlacemarkEditorFragment","../../geom/Position","../../layer/RenderableLayer","../../shapes/ShapeAttributes","./ShapeEditorConstants","./SurfaceEllipseEditorFragment","./SurfaceCircleEditorFragment","../../shapes/SurfacePolygon","../../shapes/SurfacePolyline","./SurfacePolygonEditorFragment","./SurfacePolylineEditorFragment","./SurfaceRectangleEditorFragment","./SurfaceSectorEditorFragment","../../geom/Vec2","../../geom/Vec3"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_,b,S,w,x){"use strict";var T=function(t){if(!t)throw new n(s.logMessage(s.LEVEL_SEVERE,"ShapeEditor","constructor","missingWorldWindow"));this._worldWindow=t,this._shape=null,this._allowMove=!0,this._allowReshape=!0,this._allowRotate=!0,this._allowManageControlPoint=!0,this._highlightedItems=[],this._moveControlPointAttributes=new l(null),this._moveControlPointAttributes.imageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAG1klEQVR42uVbaWxUVRSelsoishPDGpeIKVERNRHEhEQkRCL6QyLBBcpWisi+KhDCLsawiEshRECKFAIYisgmIIRChbAVK0sboAulC22n20w77917juddcjrXcaB7p/P4ki+vue++eT3fu+s55zrqG4jYhNiPON4UsKKgFPbkl8DF0nLIERIkURS7oSCvBJJziuCk0wUxhoDpiNiLGOoIRiBiM+Lg4jLY6vZAEdYQRW4oT8mGBBLHEqRDMBj+an4p7Cs3oaxqBiKWm1gl0G/K87fg9IHLclBjNPx5arr70Q8AEC+mAq46KHHoOoF9Fpn41HQTm48x0DHCwJCRBraNMrDnXBPfWmHixz8KXLhHYHwyoAT0i+QsyE7KgAhEDAm04d2omccICYAahETcfU7iB98KbD/BMrRm7PCZgR+RIDGnJeaV4P/wdwaknLohXw6E4SElZTDZEGCihpwixKV7JXabaloG1CmbjjZw/CaBaXmAOjwmAHWLA8TWDWX84zQ47UINJWWIM34R2Gx0JYbUkRBRJER6PqCO1HtQeviKfK2+je9B01cKath+RmKXKeqLNySV2FNiBJYZWIFCN8hDiXJ0fRk/hJqbm1+WXYg4cKUyPKB8ZYGJN3MAGVICHr8qo+t0gDQFDDIlSH7J+dvg7eeBp5pF4i5I1HE0SR6uqy//On15j97kW4y1Xty4GErT6dydAvX56NAVubm2xvck44v5B1cflDRvWy9stFSDsY4T1+T8mhrf3RCQhfeh5uLQRm48L6yij0lkmALwchoMr67xofTlT/OPHEwEfGyU9YLgYNgoQ/3PDNqAGfE3ZJfqCBDFDyemAz4RGTzGM1uPN/BKuleE08nyelWN72pKKL3ffBB7z1ejfVDyadpzuD1YgTPJMqrSJS4xjh9YslcGrfHMZXESGU6X2qW2f5gAQ7ly0h3ws7QNzq6QW4yoden1D/z6EuAiVxzwlWr6tuDELUIfED20j2jhT4A+qKD27zzf24FqBrt+F5BBq8bV/gT4mSt8Ei2sB23FYd8LZKTnQaHV4nXjO0oADxLuFPCcbyuq5bvLg/qAOEAXYA7fWB6nRn47UnmpGJdSYbsuQDzfGPyNaVcBVNdmkGcpl40PI7r5RrsJ9jSet82GwAqQc6ezJUAvLrh2F6yKtuahK4AMcpzMtAQYywWbTkrbCzBvl9C3ytssAdZzQeRPwvYCjFjvFeDCbUiwBPiLC1780rS7ACr4wiBfYoYlQMXyt+NEw/YCPDfLKwAFaV2WAOe44MnP7S8ALYj0xZDHEiCBCzpPtirZn3klFXEEYQlwigXoygEOmzOzAHgdoAQ4wQJ0n/poCMDRJLcHTEuAoywAuZAeqTEguxAKLQEOc0GP2bYXQHVzBmWf3LIE2M0FFM+3vQBvLvEKcDnt/kJoGhesPWT/pfDsWIGMszflDkuAlzRXmO0F2KsFUeOTZSS7wnM4n6dtlH2NDxmpPMQ62rNPIJZL3l1lz4GQcwkYmU7I0T1C4/jG1/vtOw58d0TqG6GdugDP8I2rmUBRYHvO/04XVsAQ0M/XLX6Lbw7/wXbToco/ZNx1QgG7xXUBFnKFG1mAYTZyjVOLtmY43SO81l9gpBUxlyuN2WifVhCxQeh5hZIunR4UH5zmdRvbIzjacpxhBXv00X/9w6LDzS3bufKkrcHfChb9KnU3eBld2laWIzDam/oa3E6SNxabaArUd38LHJWAAyVJ3vUyBDAtrnaJ1hQG143PpEuzqqbJhBML+eHYBCs9LrhG/d8ve40vM8AsNyC8upli7xC5A1k5/EGz3l93RPqePBlV01zBGahh2jZBL2jUxqstvQ6nC7bW6lwAcTNq2HBcUv5A4zR+jY/xGfmwjy5N6uIA1AnUcOwf0E6CBJ6tIg01ThF0d9eBujp1xiJs9jm3g30XB37r/MIXppb/w9M37Ki98f67wzSiRA1bTknsNKnhDW8SoU6O/CftxZQAzlJY5Gt8XQsxSAIUoobiMsRZsQKbNtDS+e2Vpkrh1ZFbDE6XB/o21LmhHsREou+gow5NPTvTrJe5vf8yE3+7BOiL1Huqv7dyNCD4SGwEMR394PhVwE+jBbappY+x1zzT8lLpqzq9r183BQx0BBC8gZohAQrQP6xBSp03mErriH5LTLW/aDdBeWnY+6S6T/gcE99fI1R32vinVOm6/pDlhDRa3Lzn69QItBBtiMuJ97Ca8JiIEiqrAwYFNf8wBQwJvOGVd43+xDXEVKwFDAEGJTFYobsPiS0dQQaeOnsTRxGXErcTz0qAPCGhiL5qgasc8tweuEN/pwipzh8vIw4jhhPDHPWMfwG/nw93W8wmlQAAAABJRU5ErkJggg==",this._moveControlPointAttributes.imageScale=.15,this._shadowControlPointAttributes=new l(null),this._shadowControlPointAttributes.imageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAACx1BMVEUAAAD////////////////////////6+vr////////////y8vL////////////////////////9/f309PT////////////////////////9/f3////////////////09PT////////y8vL////////9/f3+/v7////////8/Pz+/v7y8vL+/v7////////////+/v7////8/Pz////////////39/f39/f////8/Pz////y8vL////////////09PT////19fX////8/Pz////7+/v+/v7////z8/P////09PT7+/v////8/Pz////////////+/v7x8fH////29vbz8/P39/f6+vr////y8vL////////8/Pz8/Pz09PT29vb////////19fX7+/v5+fn8/Pz////8/Pz////6+vr8/Pz8/Pz+/v7y8vL4+Pj5+fnz8/P7+/v////6+vr////////7+/v////////29vb+/v729vb39/f4+Pj////////////////8/Pz+/v7////////////19fX7+/v7+/v39/f9/f34+Pj////////6+vr////////5+fn9/f37+/v+/v74+Pj6+vr9/f3////5+fn////////9/f3+/v76+vr8/Pz+/v77+/v6+vr7+/v+/v7////9/f3+/v7+/v75+fn+/v77+/v+/v7////8/Pz9/f38/Pz8/Pz+/v78/Pz+/v79/f3+/v78/Pz9/f3+/v78/Pz9/f3+/v7////+/v7T09PU1NTV1dXW1tbX19fY2NjZ2dna2trb29vc3Nzd3d3e3t7f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojp6enq6urr6+vs7Ozt7e3u7u7v7+/w8PDx8fHy8vLz8/P09PT19fX29vb39/f4+Pj5+fn6+vr7+/v8/Pz9/f3+/v7///+ggSSQAAAAwHRSTlMAAQIDBAcICQoLDQ4PEBITFBgZGhscHSElJigoKS0uLzAyMzY3ODo6PkJERkZGSElMTE1TVVZYX19gYGFhY2RlZmdnbXBxcXJzdnt8foCDhIWGjo+Ql5iYmJ+foaKjpKamp6ioqausrbGysrS0tra2ubm5u7zAwcPExcXHx8fHyMnKzs7O0dTY2Nrb297e4OHh4uPk5efo6enp6urr7Ozu7u7v8PDw8PHx8vT09fb29/f4+fn6+vv7/Pz8/f39/f6yTS27AAADH0lEQVR4AZ3X93dUVRTF8f0SgoqKXVEUe++99yj2XhTB3nsRe++KvXfF3kUQLBpy3nspMYEkJCEJkBJkhplkvn+EZEgwQzLl3c/vZ6/7w1n7rqNsinc+5uzrnni37M9Pn79nyokTihRJyd6TvybDLw+fsJ4Kte2NMxjUl2LQ3/fvrkJsfhNpsfb6fyp9s7C6rrH1X9LePthTHptMKQdSXfWhZQgbOnoBXthauXjH/wYk2yptBH5TAii/ZW1lteY1QF+Lb2nZIr7bTlmMmwZ0VlgOfnMK/jpcI9r3R0jOszxqlkPqfE/D7VEGyyotr7AbuF3DbD8LOgMrxELgYq1my2+h3QrUApyiDJu+BR1WsMWQOkhDFD0APb4VzO+BXzfS/46DWGARBDF4Vqts/D2pGoukqg+O1QDvemi1iNrg57FaaX+I+xZRkIQLlOY9CXUWWRPMXEP9doCYRefH4Rz1uwQazUEDfO5JWn8WCd8cBH2wq6SToc2cdMFlku6D+eakEd6XRv0EoTkJU7ChJkDcHPXASToSlpijhXCpLoIF5qgRHtSjUGOO6uB1PQWhOaqCH/Q4VJijAGbqEdwDrJffdS9Umqskf2gquAekmKO7ococBfCF7sQ9oBJe1LVQb45q4SGVwiJz1AJXaiuImaMuOFree+6rmISx0hXOhVID70g6CtrNySK4WtJmro0S9MJOWuElaHBsg088rXAaxH2LLgbnqd+YD2CB0wPKNlBaKQ5fS5CAC7XS6Feh2SJqhRnrasARkKywSGpTcKoGjXoGlgUWQZiAN0u0yvivoNMi6IY5W2iIveZCa6Qd5FBlmAg0R5mfrEzeJGCxX/D8DcVaTclUYGloeQWdwK1FGqZkErC81vKojgNXFWkEXulcoCP3wdHUB+WnF2lke36Z++SxeTHgsx2V1binARJtVTaSum6A28Yoh+JDXgNgaWNomWraEwDP7aY8Rk+cTlq8o7m2IgzM/Or5LUviALyyn6f81jnrQ4ZIMWD2Xft4KkzxLue+TKbZdxywlqLwtjnsjMsf+/ib6R+9Me3mMw8cP0pZ/AewF57BEV8rHgAAAABJRU5ErkJggg==",this._shadowControlPointAttributes.imageScale=.15,this._resizeControlPointAttributes=new l(null),this._resizeControlPointAttributes.imageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAF9klEQVR4AeXbW2xUWx3H8cUlOV5y1KgPXvTBh2PwwaNSDxDUgooVBTVeIPCgQNDigxouxiglhAS8RKNgYkKjJCh3o5hAACWSWIVSAVMkEi60AVpg7jOdmU5nz+y91/raCay99i4t9NJpZzaf5P8GaX7/dl32WnuLagNmAQuBZpTzE2Tu+GB1IotxlJSD5SILGWTfHdz0P5H5gyhnE/AqMFPUI+Al4HPIwgFUKcd4yUIJp7cDmd0EvK0egs9F5k6iyhajoQqgyoyKsiXlG+1YF5pqMfj7kflTDEuBfRP6D0L6+5D8OsQ+D5H58OgjgzUXoo0Q/wqkmiGzFfJ7oXwVkAzL6Ylhd68BZkx38PcgCwdRUhEgwToH6S0QXVwJOr6q/N/Mj6B4GmSWp9jdXZQ6PzQdwWcgB76Lchz8ZBryv4PYUhNisioyD/p2ghslQNkK68KZwXrTVIV/A7LwJ/zUAOR+af6sq1SmEbvAjRHgRApYFxuqHf4VZLELv+JfIdZU/eBDq9Ls7M+Dk6jsl1jt66oVfjnKLqLJFKS+PfXBh1ZiNbgP8SgJpSt7J3WCRLlNgyXR7BtmnNdCRRvBaiOgdOmsmAzAPJRdDvzJRxbUTHhTDZD7NaDwWO37Jxr+Ayg7j9Z/qLJu12B4U5XJOKD0n5bxhn8vyomiFU9XulzL4c3Gyr9IKQfs26vGGn4mym43XWyHyGs1H97UR6HUjkfmbMpX3zWWBmxAs+9A5GP1Et5U5ONgd+Ep//fWaMO/G+UWAMCFxKp6C28qtgxUCU/52obnb3HhBFr+t/Ua3lR+Hx6Zt4C3PqsBX0Vzuofb2tbnUJAZMEO6deTfvlKdaKnmeg9vKvtT/4RYxo29frgGzEezb5r1PgxVWcGce3istl8N14A/oGVawhLeVOYHeNxoNvCsALwdpcoAuHGz5oepIgtAWf4J8VP+Bpj29O8LW3hT1jk89q0j/gZcQEt9J7wNyLT4h0FCh58NFNGii8LbgGgjKAePLL5TAK+iOffCGt5U6SKe0pUtAliPNnAi/A3I/cb/qHxIAK1ofTvD34DMNjzlGx0C+DdafEX4G5BqxuM8eCCATrToJ8PfgPgX8cjsgAAumwZ8OszhzYZIk/myADrQYp8Jc3hTMqvvEVwBnDcN+OyL0QA3ofcBrgDa0MxZf5jL3CapkiOAc6YBy16sOcBNZQVwFi3+pfA3oDLMNaf3rgD+jJbeEv4GJNfhsW93CGAjWuEw4d8K78FTvn5MAB/EHIWFvwHWP/x3Bd/SR+FxAFAQbQxxA+YGT4j1ETlwFC39vfA2ILEaj5uICw34Jlr/78PbgMIxPM7DP/ob8D405665BQ7b+i/zeJSzUPgBd9EyPwzhOcBWPG4y89QrNMB2NOd+5Yo5RA1oAPum/0R4jxgKeBlIoPXtCE8D+rYHX7mFd4hhBDdFbjQkl6MLwY37Z/9WMRLgdUAPWvZnIbgeb8UjixbwFvEswDo0ma7vQ5LkGsD1P/1tE88DzAauo5X/Z16Lq6eKLg6+TuumHwEvidEA5gBZtOLf6uy6vAGs83hU2RmsOWIsgKWARMvvrZ/9fuEoAbKwVowHsBm/7C8qP6DGwx8mQOYPTOy7ANiP38BxiLxWH+Hd+Elg1mR8ANWGX+lyZZKprRehKvOUn9N7Bpg5mV+B7cfP6YHkN2rgpudr5v0fM+Mfm7TwQ4bDRkDiN3ASokumZ6bv2wXKwqNchczvMOGrAGhCqSx+qgC53RCZN0UXnBvAvkOAm+lDWQvEVABeAa4xlBt78tHU8ur8xpPrwfoXT3EiZ4CXxVQCZgFrgF6CzESZaYHoJyZ4jLWyckpldnXBsX4L5SwR08Y8QG1GqQwjce5B8fTjfURy7ePni+iiJ1vsBvM1WPzLkN74eDgN/AWcboblJnuQhS8AM0StAN4M/BhIMlbKBuTz/o2Nm/g7yl1eU8FHGBqNwG7gPhOhHBuZPQusAN4o6opZOj8MrAV2AkeASyiVQskcys6grNRgPUTZXSj3FLALWAnMAWaLKvs/oZa/z/rHkBoAAAAASUVORK5CYII=",this._resizeControlPointAttributes.imageScale=.15,this._rotateControlPointAttributes=new l(null),this._rotateControlPointAttributes.imageColor=WorldWind.Color.GREEN,this._rotateControlPointAttributes.imageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFp0lEQVR4AeXba2xUaR3H8f9ML926wnbLxiwLG1cjho2Ku5q4Kyab7Lohblx9sRs3664GUKGJ8YIVNVFDiIAJLwSiL8CYiFIDGDERxEIjkhootQYKSKO1EwltuTC1d8q0czn9+X3xnOQJGei9nTl+P/knhPTNcy5nzjmTsblOUgmzmtmYVfbH/er/fZ/6Wkc0kswpFzC5YQ3396q3I6nkXwc0UJdR5luSVjFxK8YkVTCvsLADKaWGNM2GNDSWUKKZjcMG0ZJiWPhH2LvHxjQ2OskFagyTib8Lzut8U73q1xTiwt/PoXtceRpHK36C1/Ec3o2HYIihCk/jRbyFLTiLAPnqUMftNrWtlRRb6IUv5zCv4zwel1cOR/AaqmHTtASfRx16cW9XdCVxRmc+vBALj93Rna9nlMnKK4ltWA6bZeXYiE74pZUe57SoZxbP1+Lfwbn7O3ndQS0qYHOsHDXogt81XRtpUMNH53rxK/j4SsjrIJ6AzbMKfAOjCBvUYHBSJ9fP1eJf5XBLyXUbL8MW2LP4D8ICnNbpvbN6gcwqu4YJ5DqP5bACUYWj8DulUw2ztec/xp5P+4d8JazAxPE9jCOM02H/TBf/NIsflmsXYrACVgu/RjX+YLqLfzKjzC256hCHFbgY9iIsi0u69OZUFx9nzzfJdQJlsCJRihMI4wEsw53lE1PZADVyXcY7YUVmMf6BsCY1tU928cs4bEZEWTwDK1JPIYWwczpXM+EtLnNUrh/Bitx2hPHANiqp+kEb4HW52lABK3KL0QPvlN53370fKGiV6yVYRHwV3gUxzXNEZb4N8JxcrYjBIqIM7QjjrnFXvg3wa7nehkXMGwjjCBiUFPMX/1igIC26jjJYxFTiLrwL4kv+BviuXDtgEXUEYRd18aC/Ac7K9Qosot5GGG+WesLFlzIpuR6FRVQVMgjj5c5Sk7RKrn/BIu4kwnhx8m2T9GW5fgmLuO/De1T+jUnaJ9cGWMR9EWEXdKHZJP1Nrg/CIu5FhPEusdsktcr1GCzi3oewPvXdNUl/l+tdsIirhHczlDZJzXIthUWfeuG+R8iZpDNyLYNFn27A3QfkTFKjXE/Cok+jIKWUypqkU3I9hf+nawDfbg2apAa5VsAibhnCEkpcNUlH5HoNFnGfQBjfFzSbpE1y7YFF3HcQ1qKWwybpQ3K1wiLuDwjjy5IN4avwpGgcVbCIiqEHXtVmJOmQXJ+GRdSzCONeIGlhkr4i105YRP0M3oPQb/0N8B65/ok4ovj5P4CwjDKrzU/SVbnehEXMWwi7qZv9kmLmJ2mLXP9GKSwi4miF90Z4j92bpEVMj1xfgkXEWoSllQ4kPW758m+KOhGFL0cfxnV4V/99dr8kPcR0yvU1WJHbCu81+KikKntQktbLlUQxvyT5OLLwnv5+aBPlvihpk6sFlbAiswRd8BZ/Q1KFTSZJK5lBuQ4hhmK66v8JYaMazY5pbKVNJUmfYgK5tsCKQAw/hd+QhtbZdJJUK69NiKGQF78Hftz9HZjR7wKY/fL6OcpQiIvfDb9udR+TVDIbP4BqlNdfUA0rEItwCH4JJeolxWfzV2D75dWB52EL7ANoh19SycMzX3z+02ETE8jrV3gcNs9KUIO7CMsqO845v9Utfm6StCZQMCivYWxGOWwefBKX4cebngE2xvM2H0lawVzWPXVjG96LufhsfwF/hMv/vVC9pEU2n0kqYdYyXcrTaXwBj8BmYBV2ogsu/1xv57B/2RYy9wBVGyjo131qRx2+idVYikdRiTgM5ViJz2IzfoE25OuWbnVyc/MZSTErlCQ9wuxg/qsplkaACf4mw6Psn9njry78wic+NV5gdjPXNIMyymT61Ncg6XPMw1ZsSYoxzzDrmG3MQaYlUNCbU26IvdrPlbs3pdR1/p3g/45L2s684R7ISm2O+x9CToBE+3EIiAAAAABJRU5ErkJggg==",this._rotateControlPointAttributes.imageScale=.15,this._annotationAttributes=new e(null),this._annotationAttributes.altitudeMode=WorldWind.CLAMP_TO_GROUND,this._annotationAttributes.cornerRadius=5,this._annotationAttributes.backgroundColor=new r(.67,.67,.67,.8),this._annotationAttributes.leaderGapHeight=0,this._annotationAttributes.drawLeader=!1,this._annotationAttributes.scale=1,this._annotationAttributes.textAttributes.color=r.BLACK,this._annotationAttributes.textAttributes.font=new i(10),this._annotationAttributes.insets=new o(5,5,5,5),this.annotation=new WorldWind.Annotation(new WorldWind.Position(0,0,0),this._annotationAttributes),this.editorFragments=[new c,new m,new g,new E,new _,new b,new S],this.controlPointsLayer=new f("Shape Editor Control Points"),this.shadowControlPointsLayer=new f("Shape Editor Shadow Control Points"),this.accessoriesLayer=new f("Shape Editor Accessories"),this.accessoriesLayer.pickEnabled=!1,this.annotationLayer=new f("Shape Editor Annotation"),this.annotationLayer.pickEnabled=!1,this.annotationLayer.enabled=!1,this.annotationLayer.addRenderable(this.annotation),this.shadowShapeLayer=new f("Shape Editor Shadow Shape"),this.shadowShapeLayer.pickEnabled=!1,this.creatorShapeLayer=new f("Shape Creator Initial Shape"),this.creatorShapeLayer.pickEnabled=!1,this.activeEditorFragment=null,this.actionType=null,this.actionControlPoint=null,this.actionControlPosition=null,this.actionSecondaryBehavior=!1,this.actionCurrentX=null,this.actionCurrentY=null,this.originalHighlightAttributes=new p(null),this.originalPlacemarkHighlightAttributes=new l(null),this._clicked0X=null,this._clicked0Y=null,this._clicked1X=null,this._clicked1Y=null,this._click0Time=0,this._click1Time=0,this._dbclickTimeout=0,this._clickDelay=200,this.creatorEnabled=!1,this.creatorShapeProperties=null,this.promisedShape=null,this._worldWindow.worldWindowController.addGestureListener(this)};return Object.defineProperties(T.prototype,{worldWindow:{get:function(){return this._worldWindow}},shape:{get:function(){return this._shape}},moveControlPointAttributes:{get:function(){return this._moveControlPointAttributes},set:function(t){this._moveControlPointAttributes=t}},shadowControlPointAttributes:{get:function(){return this._shadowControlPointAttributes},set:function(t){this._shadowControlPointAttributes=t}},resizeControlPointAttributes:{get:function(){return this._resizeControlPointAttributes},set:function(t){this._resizeControlPointAttributes=t}},rotateControlPointAttributes:{get:function(){return this._rotateControlPointAttributes},set:function(t){this._rotateControlPointAttributes=t}},annotationAttributes:{get:function(){return this._annotationAttributes},set:function(t){this._annotationAttributes=t,this.annotation.attributes=t}}}),T.prototype.create=function(t,e){var n,r;this.stop(),this.setCreatorEnabled(!0);for(var i=0,o=this.editorFragments.length;i<o;i++){var a=this.editorFragments[i];a.canHandle(t)&&(this.activeEditorFragment=a,this.creatorShapeProperties=e)}if(null!=this.activeEditorFragment){var s=new Promise((function(t,e){n=t,r=e}));return s.resolve=n,s.reject=r,this.promisedShape=s,s}return null},T.prototype.isCreatorEnabled=function(){return this.creatorEnabled},T.prototype.setCreatorEnabled=function(t){this.creatorEnabled!=t&&(this.creatorEnabled=t)},T.prototype.edit=function(t,e){this.stop(),this._allowMove=Object.prototype.hasOwnProperty.call(e,"move")?e.move:this._allowMove,this._allowReshape=Object.prototype.hasOwnProperty.call(e,"reshape")?e.reshape:this._allowReshape,this._allowRotate=Object.prototype.hasOwnProperty.call(e,"rotate")?e.rotate:this._allowRotate,this._allowManageControlPoint=Object.prototype.hasOwnProperty.call(e,"manageControlPoint")?e.manageControlPoint:this._allowManageControlPoint,this._allowReshape||(this._allowManageControlPoint=!1);for(var n=0,r=this.editorFragments.length;n<r;n++){var i=this.editorFragments[n];i.canHandle(t)&&(this.activeEditorFragment=i)}return null!=this.activeEditorFragment&&(this._shape=t,this._shape.highlighted=!0,this.initializeControlElements(),!0)},T.prototype.stop=function(){this.removeControlElements(),this.activeEditorFragment=null,this._allowMove=!0,this._allowReshape=!0,this._allowRotate=!0,this._allowManageControlPoint=!0;var t=this._shape;return this._shape=null,null!==t&&(t.highlighted=!1),t},T.prototype.initializeControlElements=function(){var t=this._moveControlPointAttributes,e=this._resizeControlPointAttributes,n=this._rotateControlPointAttributes,r=this._shadowControlPointAttributes;this._allowMove||(t=null),this._allowReshape||(e=null),this._allowRotate||(n=null),this._allowManageControlPoint||(r=null),-1==this._worldWindow.indexOfLayer(this.shadowShapeLayer)&&this._worldWindow.insertLayer(0,this.shadowShapeLayer),-1==this._worldWindow.indexOfLayer(this.creatorShapeLayer)&&this._worldWindow.addLayer(this.creatorShapeLayer),-1==this._worldWindow.indexOfLayer(this.controlPointsLayer)&&this._worldWindow.addLayer(this.controlPointsLayer),-1==this._worldWindow.indexOfLayer(this.shadowControlPointsLayer)&&this._worldWindow.addLayer(this.shadowControlPointsLayer),-1==this._worldWindow.indexOfLayer(this.accessoriesLayer)&&this._worldWindow.addLayer(this.accessoriesLayer),-1==this._worldWindow.indexOfLayer(this.annotationLayer)&&this._worldWindow.addLayer(this.annotationLayer),this.isCreatorEnabled()&&(this.activeEditorFragment instanceof _||this.activeEditorFragment instanceof E)?this.activeEditorFragment.initializeCreationControlElements(this._shape,this.controlPointsLayer.renderables,t):this.activeEditorFragment.initializeControlElements(this._shape,this.controlPointsLayer.renderables,this.shadowControlPointsLayer.renderables,this.accessoriesLayer.renderables,e,n,t,r),this.updateControlElements()},T.prototype.removeControlElements=function(){this._worldWindow.removeLayer(this.controlPointsLayer),this.controlPointsLayer.removeAllRenderables(),this._worldWindow.removeLayer(this.creatorShapeLayer),this.creatorShapeLayer.removeAllRenderables(),this._worldWindow.removeLayer(this.shadowControlPointsLayer),this.shadowControlPointsLayer.removeAllRenderables(),this._worldWindow.removeLayer(this.accessoriesLayer),this.accessoriesLayer.removeAllRenderables(),this._worldWindow.removeLayer(this.shadowShapeLayer),this.shadowShapeLayer.removeAllRenderables(),this._worldWindow.removeLayer(this.annotationLayer)},T.prototype.updateControlElements=function(){this.isCreatorEnabled()&&(this.activeEditorFragment instanceof _||this.activeEditorFragment instanceof E)?this.activeEditorFragment.updateCreationControlElements(this._shape,this._worldWindow.globe,this.controlPointsLayer.renderables):this.activeEditorFragment.updateControlElements(this._shape,this._worldWindow.globe,this.controlPointsLayer.renderables,this.shadowControlPointsLayer.renderables,this.accessoriesLayer.renderables)},T.prototype.onGestureEvent=function(t){(null!==this._shape||this.isCreatorEnabled())&&("pointerup"===t.type||"mouseup"===t.type?this.handleMouseUp(t):"pointerdown"===t.type||"mousedown"===t.type?this.handleMouseDown(t):"pointermove"!==t.type&&"mousemove"!==t.type||this.handleMouseMove(t))},T.prototype.handleMouseDown=function(t){var e=t.clientX,n=t.clientY;this.actionCurrentX=e,this.actionCurrentY=n;var i=this._worldWindow.canvasCoordinates(e,n),o=0;null===this._shape||this.isCreatorEnabled()||(o=this._shape.highlightAttributes.outlineWidth,this._shape.highlightAttributes.outlineWidth=5);var s=this._worldWindow.pick(i);0!==o&&(this._shape.highlightAttributes.outlineWidth=o);var u=s.terrainObject();this._click0Time&&!this._click1Time?(this._clicked1X=e,this._clicked1Y=n,this._click1Time=Date.now()-this._click0Time):(this._clicked0X=e,this._clicked0Y=n,this._click0Time=Date.now(),this._click1Time=0,clearTimeout(this._dbclickTimeout),this._dbclickTimeout=setTimeout((function(){this._click0Time=0}),this._clickDelay));for(var h=0,f=s.objects.length;h<f;h++){var d=s.objects[h];if(d.isTerrain||this.isCreatorEnabled()){if(this.isCreatorEnabled()&&null!==this.activeEditorFragment&&null===this._shape){var g=new p(null);g.outlineColor=r.BLACK,g.interiorColor=new r(.8,.9,.9,1),g.outlineWidth=5;var m=new WorldWind.ShapeAttributes(g);if(m.outlineColor=WorldWind.Color.RED,m.outlineWidth=5,this.activeEditorFragment.isRegularShape())if(this.activeEditorFragment instanceof c?this.creatorShapeProperties.position=u.position:this.creatorShapeProperties.center=u.position,this.creatorShapeProperties.radius=3,this.creatorShapeProperties._boundaries=[{latitude:u.position.latitude-.5,longitude:u.position.longitude-.5},{latitude:u.position.latitude+.5,longitude:u.position.longitude-.5},{latitude:u.position.latitude+.5,longitude:u.position.longitude+.5}],this._shape=this.activeEditorFragment.createShadowShape(this.creatorShapeProperties),this.activeEditorFragment instanceof c){var y=new l(null);y.imageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAACd1JREFUeNrkm01sXNUVx3/33vfmjT0Zz/gLxw4fk1BSY1XCLNqyqXCkLkrVFmdTRJuEUDYU2hCLFhEhEbJo6aI0FLW7ojibBHUBQQpfVamdqN2UUhwVEjQpMInjOCY4GXvssWfmvXu6eDMmcZw2TsZkXP+lWcz4fdzzP//zcc97ViLCSoaz2BOUUlW5cbqzKwn0AvcCyXl/zgBHgMH1Hx4dWsx1F+tQtegTqkBAurOrG3gFSOl4nMYHtpDcshkdj1903Mzf36GQTmdm3n33wNSbb+29EjIWrWgRWdSnSt4fSHd2SbqzS8b27ZcrweyxYzL+u98PpDu7eqpqzxdNwLZ4ortifLqzS/789oAsBsVTp+T09r6BdGdXqhoE6OuQd3pzQTD35Xz2/KJOdtesoX33b3padzz5Sbqza/u1LuZ6EHD3sXx+7svkK68yOnpm0RdJbtlM2y9/sTvd2bVnuRHQfWRqiooK7jx6lP0v7mHs07OLvlDDxl6af/Lo1nRn18ByIoCCtbw+Pk7RWlblp/nGG6/z6r6XGB8/t+hrNT36CO6aNT3pzq7dy4WAIYBzvs8b589TFCF57hx37d/HwJ69HPswje/7i2tm1nQAbL9cYqw1AvYCGKXIBj5/ymaZCALqJie548U/kNu9m38c/htnxsaw1v7Pi01NTzM7Pl75+ljNE/BCbqIfGBJAK8WMCH/NTXG8UMAXofHwYZp+/jOyv36O4feOMJWfIbgMEZO5HO+/9Efko4/n8suSt8JVwoOByIAVkqpMxEixxGRguSni0pLPYw6+RvHga5xdv576r32V2F1fx8QbAPCDgOl8nok336L54MFLwqvmW+FKQxTReqAhEknGjUPMGGJGU6c1q7SmyRhiWmOu8H65IOBT31/7rY//nan5KlAOhaGitf0TxSL5wMcXIRCwAoFA3lomA8ustYgCKp8Luz6gJMKZks8/8zP993zyUWa5hADb4okUsD0QYbJUwhdBe1FcpfARfAEXwReFFiGiVWi/Cg33rZAPLBNBwIliMTsVBH1fyHa4itgDENGaRCRCwnHI+yVmAp8WN4JyDFoJylpAIwK6rICSFQpWmLQBp4ul7IQfbOg7M5JdNgRsiyd6gR6jFJ7R1BlDwji0eFESWjNpfcZLJUaspcl1SWhDRCmUCiU/bS25wJILgsFc4Pc9MTY6dLVrca6D8Ulgd8X7dcahXhvqtKZeKxpcQ4d2oS48fqRY5MOZWcZKpV3q8ySQQTH45Nho5lrXcz0UsB1Ihd431JWNj2pFVGm8eVm/xXFpcPzMj0aGn1mKxejrkPgeU4CnNVFjqDOGOq2oVxpPK5x5BOStJW9lcKnW9EWXwd1A0iiF51zofU1UKaJGX1TpBJiylhlrDy17ArbFEz1ArwI8Y/D0hd5XeFrjzvO+L8KEHyDwf6GAPQCO1kSMpk4bolrjlePe0woz74SiFabFDj08cjKzrAnYFk88A6SUUkS0xtOGqDFElaJOKzyliehLW96ZJY7/qlWBZ1puSEW07o0b5+6YMUlXqZ7Qo4q8DTLvZLNJAFcpIkYT1YaoDr0eLXt/vvwDIBe2wodqloDHE42pmDE7Gxxna4sbYZXR1KswoTkKHKU4lJ1KUd7xVYyvM6H0o0oTKf8+3/++CBM2gCWM/2si4LF4otfTek+LF002OQ6rjGFV2aMRFSa0T0tFRgoF5ryvw+TnqUrdL8tfLTw2y1sZenjkZLbmCHgi2dQjIq8kIxFixuBphadU6M2yV12jOHw2XLtRCtfosPZrPXe8pxSRcqjM3+VNB8KMtYNLnZ/0VSS0ZCEI9njG4CqNKUvdKDCEmdxoxVixODf5dbX+3Pu6Iv8yYQskv0CEKRtQFDlUcwQAvSiV0krN7c8XGqlUDDNK4eqwznvlltfTnxvvLDDwKIgwGdglj/+rJeDeipd8Gw4xAhEqgyUhfDzV7LrcGPUu8n5Uh+HhVWLf6AUXMGsFraAr6g28ve5LyVojIIkIgVh8sRTFEgj4CAGCvUAR32xqJOaYcu2vGB82Pq5SuAskv6Bc/1cZQ6vrdEeVXlISroaAQ5WJTNFaSlYoSjjB8UWwItjyaCtuDPc2N9PquuUQCKXvoYiYS5NfpfzlAkuD0Tha0RJxuj2lloyEqyGgH8CKzCmgIJaSWErCnAIqn5jR3J2Is86LlFvfivcVC407i1bI2YBGJ2yMtYKWiNtdr/XOmiDghdxEBui3QGCFgrUUrVAQoYhQQi7KCRXc5Ll8OerR6Bpcc2nnV8kfM9bS6l5cnY2CuDHb/7Lutp5a2Qv0CWTCRGgpWkuhHAoFkYtC4aKbqVARdUYTIARcrBiLUG80ayLuJTf0jMIotbMmCHghN5F1lNookLUIJbGhAsoklBBKNiThchAgQPDLqimVCVmoL6hglVE9L6fWpWpiN/jcxPkhDRusSNYXoWTDXFAQYbasAt8K1XwHrd5oTPhiVW1sh3+VPTekldpgRYZ8Cb1fUUEBoSRhPqgWjFI4SiVrhgCAXZ+dHYpovUGQA37Z+FkbqqBghWJQPRWIQMHKHTU3EHlibDT7+JnTG1Fs9EUypXIyLJRJ8G11KChXmyM1OxF6ZGT4gKPUnQGyq2glOytCQSyzQdgyXyvO+z7ZIKjqeGzJng6/nFqXHO+8/b2bT2RS8WIpfPDhaPRVPlzO+5Zjs4XsWb+09qenT2UvHyaLs2fJHoy888NNyVgslrr5Kz9mzVSOiX37mU2n8Uy4hV4MZgPLaMmnINL334yvqaGoUmpnc3MzHbfeyo33fR959lmyt3fd6Vvps3Jl29xAYMq3jJeCwVlkwwPDmf6aHIrOx46nnk5GIpHe9vZ22m5oJbCW06dP99/z6stDhG9xPA9wvKurm/C1lhSQ4IJXXALh0KxvswVrB3s+Pj5U01PhhYYmiUQi2dHRTiLRwJkzY5w9+9ne+QfddvRohZDrhiUJAWPMzra2NlavbsNxHD7JnBjasun+QWoQegnk3xOLxVIdHe00NSaZmJhgdPTMb6lRVJ0ArfUDra2ttLe3U1dXRyZzMlssFg+sCAJ2PPV0yvO8re3tq2ltbaFUKnFy+FT/lk33Z1eKAnobGxvp6OggHotx4sQwk5OTNSv/qhNgjLmlqbmJ1avbUFpxamRkcMum+zMrhgDXdbubGhsREd7/4Fg2l8v1UeOoKgGxWKy7ra2N6ek8/3r/g1293/vO0IohYMdTTyebm5uTzc1NHD167MDmH9z3PMsAuorx3712bYqTw6eyn42PP8gyQdUISCaTPQ0NDaTTxzc+tHVzdsURsH79bbcMD596/qGtmwdZRqgaAYVCMXvvd7/dxzJD1QiYzOV2sQyhVvp/j2tWOP4zALpvVRZ7s65VAAAAAElFTkSuQmCC",y.imageScale=1,y.imageColor=r.WHITE,y.drawLeaderLine=!0,y.leaderLineAttributes.outlineColor=r.RED;var v=new l(null);v.imageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAACd1JREFUeNrkm01sXNUVx3/33vfmjT0Zz/gLxw4fk1BSY1XCLNqyqXCkLkrVFmdTRJuEUDYU2hCLFhEhEbJo6aI0FLW7ojibBHUBQQpfVamdqN2UUhwVEjQpMInjOCY4GXvssWfmvXu6eDMmcZw2TsZkXP+lWcz4fdzzP//zcc97ViLCSoaz2BOUUlW5cbqzKwn0AvcCyXl/zgBHgMH1Hx4dWsx1F+tQtegTqkBAurOrG3gFSOl4nMYHtpDcshkdj1903Mzf36GQTmdm3n33wNSbb+29EjIWrWgRWdSnSt4fSHd2SbqzS8b27ZcrweyxYzL+u98PpDu7eqpqzxdNwLZ4ortifLqzS/789oAsBsVTp+T09r6BdGdXqhoE6OuQd3pzQTD35Xz2/KJOdtesoX33b3padzz5Sbqza/u1LuZ6EHD3sXx+7svkK68yOnpm0RdJbtlM2y9/sTvd2bVnuRHQfWRqiooK7jx6lP0v7mHs07OLvlDDxl6af/Lo1nRn18ByIoCCtbw+Pk7RWlblp/nGG6/z6r6XGB8/t+hrNT36CO6aNT3pzq7dy4WAIYBzvs8b589TFCF57hx37d/HwJ69HPswje/7i2tm1nQAbL9cYqw1AvYCGKXIBj5/ymaZCALqJie548U/kNu9m38c/htnxsaw1v7Pi01NTzM7Pl75+ljNE/BCbqIfGBJAK8WMCH/NTXG8UMAXofHwYZp+/jOyv36O4feOMJWfIbgMEZO5HO+/9Efko4/n8suSt8JVwoOByIAVkqpMxEixxGRguSni0pLPYw6+RvHga5xdv576r32V2F1fx8QbAPCDgOl8nok336L54MFLwqvmW+FKQxTReqAhEknGjUPMGGJGU6c1q7SmyRhiWmOu8H65IOBT31/7rY//nan5KlAOhaGitf0TxSL5wMcXIRCwAoFA3lomA8ustYgCKp8Luz6gJMKZks8/8zP993zyUWa5hADb4okUsD0QYbJUwhdBe1FcpfARfAEXwReFFiGiVWi/Cg33rZAPLBNBwIliMTsVBH1fyHa4itgDENGaRCRCwnHI+yVmAp8WN4JyDFoJylpAIwK6rICSFQpWmLQBp4ul7IQfbOg7M5JdNgRsiyd6gR6jFJ7R1BlDwji0eFESWjNpfcZLJUaspcl1SWhDRCmUCiU/bS25wJILgsFc4Pc9MTY6dLVrca6D8Ulgd8X7dcahXhvqtKZeKxpcQ4d2oS48fqRY5MOZWcZKpV3q8ySQQTH45Nho5lrXcz0UsB1Ihd431JWNj2pFVGm8eVm/xXFpcPzMj0aGn1mKxejrkPgeU4CnNVFjqDOGOq2oVxpPK5x5BOStJW9lcKnW9EWXwd1A0iiF51zofU1UKaJGX1TpBJiylhlrDy17ArbFEz1ArwI8Y/D0hd5XeFrjzvO+L8KEHyDwf6GAPQCO1kSMpk4bolrjlePe0woz74SiFabFDj08cjKzrAnYFk88A6SUUkS0xtOGqDFElaJOKzyliehLW96ZJY7/qlWBZ1puSEW07o0b5+6YMUlXqZ7Qo4q8DTLvZLNJAFcpIkYT1YaoDr0eLXt/vvwDIBe2wodqloDHE42pmDE7Gxxna4sbYZXR1KswoTkKHKU4lJ1KUd7xVYyvM6H0o0oTKf8+3/++CBM2gCWM/2si4LF4otfTek+LF002OQ6rjGFV2aMRFSa0T0tFRgoF5ryvw+TnqUrdL8tfLTw2y1sZenjkZLbmCHgi2dQjIq8kIxFixuBphadU6M2yV12jOHw2XLtRCtfosPZrPXe8pxSRcqjM3+VNB8KMtYNLnZ/0VSS0ZCEI9njG4CqNKUvdKDCEmdxoxVixODf5dbX+3Pu6Iv8yYQskv0CEKRtQFDlUcwQAvSiV0krN7c8XGqlUDDNK4eqwznvlltfTnxvvLDDwKIgwGdglj/+rJeDeipd8Gw4xAhEqgyUhfDzV7LrcGPUu8n5Uh+HhVWLf6AUXMGsFraAr6g28ve5LyVojIIkIgVh8sRTFEgj4CAGCvUAR32xqJOaYcu2vGB82Pq5SuAskv6Bc/1cZQ6vrdEeVXlISroaAQ5WJTNFaSlYoSjjB8UWwItjyaCtuDPc2N9PquuUQCKXvoYiYS5NfpfzlAkuD0Tha0RJxuj2lloyEqyGgH8CKzCmgIJaSWErCnAIqn5jR3J2Is86LlFvfivcVC407i1bI2YBGJ2yMtYKWiNtdr/XOmiDghdxEBui3QGCFgrUUrVAQoYhQQi7KCRXc5Ll8OerR6Bpcc2nnV8kfM9bS6l5cnY2CuDHb/7Lutp5a2Qv0CWTCRGgpWkuhHAoFkYtC4aKbqVARdUYTIARcrBiLUG80ayLuJTf0jMIotbMmCHghN5F1lNookLUIJbGhAsoklBBKNiThchAgQPDLqimVCVmoL6hglVE9L6fWpWpiN/jcxPkhDRusSNYXoWTDXFAQYbasAt8K1XwHrd5oTPhiVW1sh3+VPTekldpgRYZ8Cb1fUUEBoSRhPqgWjFI4SiVrhgCAXZ+dHYpovUGQA37Z+FkbqqBghWJQPRWIQMHKHTU3EHlibDT7+JnTG1Fs9EUypXIyLJRJ8G11KChXmyM1OxF6ZGT4gKPUnQGyq2glOytCQSyzQdgyXyvO+z7ZIKjqeGzJng6/nFqXHO+8/b2bT2RS8WIpfPDhaPRVPlzO+5Zjs4XsWb+09qenT2UvHyaLs2fJHoy888NNyVgslrr5Kz9mzVSOiX37mU2n8Uy4hV4MZgPLaMmnINL334yvqaGoUmpnc3MzHbfeyo33fR959lmyt3fd6Vvps3Jl29xAYMq3jJeCwVlkwwPDmf6aHIrOx46nnk5GIpHe9vZ22m5oJbCW06dP99/z6stDhG9xPA9wvKurm/C1lhSQ4IJXXALh0KxvswVrB3s+Pj5U01PhhYYmiUQi2dHRTiLRwJkzY5w9+9ne+QfddvRohZDrhiUJAWPMzra2NlavbsNxHD7JnBjasun+QWoQegnk3xOLxVIdHe00NSaZmJhgdPTMb6lRVJ0ArfUDra2ttLe3U1dXRyZzMlssFg+sCAJ2PPV0yvO8re3tq2ltbaFUKnFy+FT/lk33Z1eKAnobGxvp6OggHotx4sQwk5OTNSv/qhNgjLmlqbmJ1avbUFpxamRkcMum+zMrhgDXdbubGhsREd7/4Fg2l8v1UeOoKgGxWKy7ra2N6ek8/3r/g1293/vO0IohYMdTTyebm5uTzc1NHD167MDmH9z3PMsAuorx3712bYqTw6eyn42PP8gyQdUISCaTPQ0NDaTTxzc+tHVzdsURsH79bbcMD596/qGtmwdZRqgaAYVCMXvvd7/dxzJD1QiYzOV2sQyhVvp/j2tWOP4zALpvVRZ7s65VAAAAAElFTkSuQmCC",v.imageScale=1,v.imageColor=r.RED,this._shape.attributes=y,this._shape.highlightAttributes=v}else this._shape.attributes=g,this._shape.highlightAttributes=m;else null==this.creatorShapeProperties.boundaries&&(this.creatorShapeProperties.boundaries=[]),this.creatorShapeProperties.boundaries.length<2&&(this.creatorShapeProperties.boundaries.push(new a(u.position.latitude,u.position.longitude)),this.creatorShapeProperties.boundaries.push(new a(u.position.latitude,u.position.longitude)),this._shape=this.editorFragments[4].createShadowShape(this.creatorShapeProperties),this._shape.attributes=g,this._shape.highlightAttributes=m);this._shape.highlighted=!0,this.initializeControlElements(),this.beginAction(u.position,this._allowManageControlPoint,this.controlPointsLayer.renderables[0]),t.preventDefault()}}else{var E=d.userObject;if(E===this._shape){this.beginAction(u.position,this._allowManageControlPoint),t.preventDefault();break}if(-1!==this.controlPointsLayer.renderables.indexOf(E)){this.beginAction(u.position,this._allowManageControlPoint,E),t.preventDefault();break}if(-1!==this.shadowControlPointsLayer.renderables.indexOf(E)){this.beginAction(u.position,this._allowManageControlPoint,E),"shadow"==this.actionType&&this._allowManageControlPoint&&(this.activeEditorFragment.convertShadowControlPoint(this._shape,this._worldWindow.globe,E.userProperties.index,u.position),this.updateControlElements()),t.preventDefault();break}}}},T.prototype.handleMouseMove=function(t){var e=this._highlightedItems.length>0,n=this._worldWindow.canvasCoordinates(t.clientX,t.clientY);this._click0Time&&!this._click1Time&&(this._clicked1X=t.clientX,this._clicked1Y=t.clientY),this._clicked0X===this._clicked1X&&this._clicked0Y===this._clicked1Y||(clearTimeout(this._dbclickTimeout),this._click0Time=0,this._click1Time=0);for(var r=0;r<this._highlightedItems.length;r++)this._highlightedItems[r].highlighted=!1;this._highlightedItems=[];var i=this._worldWindow.pick(this._worldWindow.canvasCoordinates(t.clientX,t.clientY));if(i.objects.length>0&&(e=!0),i.objects.length>0)for(var o=0;o<i.objects.length;o++)!i.objects[o].isTerrain&&i.objects[o].userObject.userProperties.purpose&&(i.objects[o].userObject.highlighted=!0,this._highlightedItems.push(i.objects[o].userObject));if(e&&this._worldWindow.redraw(),this.actionType&&null!==this._shape){var a=this._worldWindow.pickTerrain(n).terrainObject();a&&(this.actionType===d.DRAG?this._allowMove?this.drag(t.clientX,t.clientY):s.logMessage(s.LEVEL_INFO,"ShapeEditor","handleMouseMove","Disabled action for selected shape."):this._allowReshape||this._allowRotate?(this.actionSecondaryBehavior=!1,this.actionControlPoint.highlighted=!0,this.reshape(a.position)):s.logMessage(s.LEVEL_INFO,"ShapeEditor","handleMouseMove","Disabled action for selected shape."),t.preventDefault())}},T.prototype.handleMouseUp=function(t){var e=this._worldWindow.canvasCoordinates(t.clientX,t.clientY),n=this._worldWindow.pickTerrain(e).terrainObject();if(this.isCreatorEnabled()&&null!==this.activeEditorFragment&&null!==this._shape)if(this.activeEditorFragment.isRegularShape())this.setCreatorEnabled(!1),this.promisedShape.resolve(this._shape);else{if(this.activeEditorFragment.createNewVertex(this._shape,this._worldWindow.globe,n.position),this.activeEditorFragment instanceof _){this.updateControlElements();var i=this.controlPointsLayer.renderables.length-1;this.actionControlPoint=this.controlPointsLayer.renderables[i]}if(this.activeEditorFragment instanceof E&&this._shape instanceof v&&3===this._shape.boundaries.length){var o=new p(null);o.outlineColor=r.BLACK,o.interiorColor=new r(.8,.9,.9,1),o.outlineWidth=5;var a=new p(o);a.outlineColor=r.RED,a.outlineWidth=5,this._shape=this.activeEditorFragment.createShadowShape(this._shape),this._shape.attributes=o,this._shape.highlightAttributes=a,this._shape.highlighted=!0,this.initializeControlElements(),this.beginAction(n.position,this._allowManageControlPoint,this.controlPointsLayer.renderables[0])}this.updateControlElements(),this.updateAnnotation(this.actionControlPoint),this._worldWindow.redraw()}if(this.actionType){if(this._click0Time&&this._click1Time){if(this._click1Time<=this._clickDelay&&this.actionControlPoint&&"location"==this.actionType&&n&&this._allowManageControlPoint){if(this.isCreatorEnabled()&&null!==this.activeEditorFragment){this.activeEditorFragment instanceof _?this._shape.boundaries<2?this._shape=null:(this._shape.boundaries.splice(-2,2),this._shape.boundaries.shift(),this.controlPointsLayer.renderables.pop(),this.updateControlElements(),this.updateAnnotation(this.actionControlPoint),this._worldWindow.redraw()):this.activeEditorFragment instanceof E?this._shape.boundaries<3?this._shape=null:(this._shape.boundaries.pop(),this._shape.boundaries.shift(),this.controlPointsLayer.renderables.pop(),this.updateControlElements(),this.updateAnnotation(this.actionControlPoint),this._worldWindow.redraw()):this._shape=null;var s=this;this.promisedShape.resolve(this._shape),this.promisedShape.then((function(t){s.setCreatorEnabled(!1),s.endAction()})).finally((function(){s.stop()}))}this.actionSecondaryBehavior=!0,this.reshape(n.position)}clearTimeout(this._dbclickTimeout),this._click0Time=0,this._click1Time=0}this.isCreatorEnabled()||null===this.activeEditorFragment||this.endAction()}},T.prototype.beginAction=function(t,e,n){this.actionType=n?n.userProperties.purpose:d.DRAG,this.actionControlPoint=n,this.actionControlPosition=t,this.actionSecondaryBehavior=e;var r=null;this.isCreatorEnabled()&&this.creatorShapeLayer.addRenderable(this._shape),this.activeEditorFragment instanceof c?(this.originalHighlightAttributes=null,this.originalPlacemarkHighlightAttributes=this._shape.highlightAttributes,(r=new l(this.originalPlacemarkHighlightAttributes)).imageColor.alpha=.7*r.imageColor.alpha):(this.originalHighlightAttributes=this._shape.highlightAttributes,this.originalPlacemarkHighlightAttributes=null,(r=new p(this.originalHighlightAttributes)).interiorColor.alpha=.7*r.interiorColor.alpha,r.outlineColor.alpha=.7*r.outlineColor.alpha),this._shape.highlightAttributes=r;var i=this.activeEditorFragment.createShadowShape(this._shape);this.activeEditorFragment instanceof c?(i.altitudeMode=WorldWind.CLAMP_TO_GROUND,i.highlightAttributes=new l(this.originalPlacemarkHighlightAttributes)):i.highlightAttributes=new p(this.originalHighlightAttributes),i.highlighted=!0,this.shadowShapeLayer.addRenderable(i),this._worldWindow.redraw()},T.prototype.endAction=function(){this.creatorShapeLayer.removeAllRenderables(),this.shadowShapeLayer.removeAllRenderables(),this.activeEditorFragment instanceof c?this._shape.highlightAttributes=this.originalPlacemarkHighlightAttributes:this._shape.highlightAttributes=this.originalHighlightAttributes,this.hideAnnotation(),this.actionControlPoint&&(this.actionControlPoint.highlighted=!1),this.actionControlPoint=null,this.actionType=null,this.actionControlPosition=null,this._worldWindow.redraw()},T.prototype.reshape=function(t){var e=this.actionControlPoint.userProperties.purpose;(e===d.ROTATION&&this._allowRotate||e!==d.ROTATION&&this._allowReshape||e===d.LOCATION&&this._allowManageControlPoint&&this.actionSecondaryBehavior||e===d.SHADOW&&this._allowManageControlPoint&&this.actionSecondaryBehavior)&&(this.activeEditorFragment.reshape(this._shape,this._worldWindow.globe,this.actionControlPoint,t,this.actionControlPosition,this.actionSecondaryBehavior),this.actionControlPosition=t,this.updateControlElements(),this.updateAnnotation(this.actionControlPoint),this._worldWindow.redraw())},T.prototype.drag=function(t,e){var n=this._shape.getReferencePosition(),r=this._worldWindow.globe.computePointFromPosition(n.latitude,n.longitude,0,new x(0,0,0)),i=new x(0,0,0);this._worldWindow.drawContext.project(r,i);var o=t-this.actionCurrentX,s=e-this.actionCurrentY;this.actionCurrentX=t,this.actionCurrentY=e;var u=i[0]+o,l=this._worldWindow.canvas.height-i[1]+s,c=this._worldWindow.rayThroughScreenPoint(new w(u,l)),f=new x(0,0,0);if(this._worldWindow.globe.intersectsLine(c,f)){var p=new h(0,0,0);this._worldWindow.globe.computePositionFromPoint(f[0],f[1],f[2],p),this._shape.moveTo(this._worldWindow.globe,new a(p.latitude,p.longitude))}this.updateControlElements(),this.updateShapeAnnotation(),this._worldWindow.redraw()},T.prototype.updateAnnotation=function(t){var e;this.annotationLayer.enabled=!0,this.annotation.position=new h(t.position.latitude,t.position.longitude,0),e=void 0!==t.userProperties.size?this.formatLength(t.userProperties.size):void 0!==t.userProperties.rotation?this.formatRotation(t.userProperties.rotation):this.formatLatitude(t.position.latitude)+" "+this.formatLongitude(t.position.longitude),this.annotation.text=e},T.prototype.hideAnnotation=function(t){this.annotationLayer.enabled=!1},T.prototype.updateShapeAnnotation=function(){var t=this.activeEditorFragment.getShapeCenter(this._shape,this._worldWindow.globe),e=new u(new h(t.latitude,t.longitude,0),null);this.updateAnnotation(e)},T.prototype.formatLatitude=function(t){var e=t<0?"\xb0S":"\xb0N";return Math.abs(t).toFixed(4)+e},T.prototype.formatLongitude=function(t){var e=t<0?"\xb0W":"\xb0E";return Math.abs(t).toFixed(4)+e},T.prototype.formatLength=function(t){return Math.abs(t/1e3).toFixed(3)+" km"},T.prototype.formatRotation=function(t){return t.toFixed(4)+"\xb0"},T})),i("util/ByteBuffer",["../error/ArgumentError","../util/Logger"],(function(t,e){"use strict";var n=function n(r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"ByteBuffer","constructor","missingArray"));this.array=r,this.data=new DataView(r),this.position=0,this._order=n.LITTLE_ENDIAN};return n.prototype.getByte=function(){var t=this.data.getUint8(this.position);return this.position+=n.BYTE_SIZE,t},n.prototype.getByteArray=function(t){var e=new Uint8Array(this.array,this.position,t);return this.position+=n.BYTE_SIZE*t,e},n.prototype.getInt16=function(){var t=this.data.getInt16(this.position,this._order);return this.position+=n.INT16_SIZE,t},n.prototype.getInt16Array=function(t){var e=new Int16Array(this.array,this.position,t);return this.position+=n.INT16_SIZE*t,e},n.prototype.getInt32=function(){var t=this.data.getInt32(this.position,this._order);return this.position+=n.INT32_SIZE,t},n.prototype.getInt32Array=function(t){var e=new Int32Array(this.array,this.position,t);return this.position+=n.INT32_SIZE*t,e},n.prototype.getFloat=function(){var t=this.data.getFloat32(this.position,this._order);return this.position+=n.FLOAT_SIZE,t},n.prototype.getFloatArray=function(t){var e=new Float32Array(this.array,this.position,t);return this.position+=n.FLOAT_SIZE*t,e},n.prototype.getDouble=function(){var t=this.data.getFloat64(this.position,this._order);return this.position+=n.DOUBLE_SIZE,t},n.prototype.getDoubleArray=function(t){var e;if(this.position%8!=0){var r=this.array.slice(this.position,this.position+t*n.DOUBLE_SIZE);e=new Float64Array(r)}else e=new Float64Array(this.array,this.position,t);return this.position+=n.DOUBLE_SIZE*t,e},n.prototype.skipBytes=function(t){this.position+=t*n.BYTE_SIZE},n.prototype.skipInt16s=function(t){this.position+=t*n.INT16_SIZE},n.prototype.skipInt32s=function(t){this.position+=t*n.INT32_SIZE},n.prototype.skipFloats=function(t){this.position+=t*n.FLOAT_SIZE},n.prototype.skipDoubles=function(t){this.position+=t*n.DOUBLE_SIZE},n.prototype.seek=function(t){this.position=t},n.prototype.order=function(t){this._order=t},n.prototype.limit=function(){return this.data.byteLength},n.prototype.hasRemaining=function(){return this.position<this.data.byteLength},n.BIG_ENDIAN=!1,n.LITTLE_ENDIAN=!0,n.BYTE_SIZE=1,n.INT16_SIZE=2,n.INT32_SIZE=4,n.FLOAT_SIZE=4,n.DOUBLE_SIZE=8,n})),i("formats/shapefile/DBaseField",["../../error/ArgumentError","../../util/ByteBuffer","../../formats/shapefile/DBaseFile","../../util/Logger"],(function(t,e,n,r){"use strict";var i=function(e,n){if(!e)throw new t(r.logMessage(r.LEVEL_SEVERE,"DBaseField","constructor","missingAttributeName"));if(!n)throw new t(r.logMessage(r.LEVEL_SEVERE,"DBaseField","constructor","missingBuffer"));this.name=null,this.type=null,this.typeCode=-1,this.length=-1,this.decimals=-1,this.readFieldDescriptor(e,n)};return i.prototype.getName=function(){return this.name},i.prototype.getType=function(){return this.type},i.prototype.getLength=function(){return this.length},i.prototype.getDecimals=function(){return this.decimals},i.prototype.readFieldDescriptor=function(t,n){n.order(e.LITTLE_ENDIAN);var o=n.position;if(this.name=t.readNullTerminatedString(n,i.FIELD_NAME_LENGTH),n.seek(o+i.FIELD_NAME_LENGTH),this.typeCode=String.fromCharCode(n.getByte()),this.type=i.getFieldType(this.typeCode),null==this.type)throw new Error(r.log(r.LEVEL_SEVERE,"Shapefile dBase encountered unsupported field type: "+this.typeCode));n.skipBytes(4),this.length=n.getByte(),this.decimals=n.getByte(),n.seek(o+i.FIELD_DESCRIPTOR_LENGTH)},i.getFieldType=function(t){switch(t){case"C":return i.TYPE_CHAR;case"D":return i.TYPE_DATE;case"F":return i.TYPE_NUMBER;case"L":return i.TYPE_BOOLEAN;case"N":return i.TYPE_NUMBER;default:return null}},i.prototype.toString=function(){return this.name+"("+this.typeCode+")"},i.TYPE_CHAR="DBase.FieldTypeChar",i.TYPE_NUMBER="DBase.FieldTypeNumber",i.TYPE_DATE="DBase.FieldTypeDate",i.TYPE_BOOLEAN="DBase.FieldTypeBoolean",i.FIELD_NAME_LENGTH=11,i.FIELD_DESCRIPTOR_LENGTH=32,i})),i("formats/shapefile/DBaseRecord",["../../error/ArgumentError","../../util/ByteBuffer","../../formats/shapefile/DBaseField","../../formats/shapefile/DBaseFile","../../util/Logger"],(function(t,e,n,r,i){"use strict";var o=function(e,n,r){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"DBaseRecord","constructor","missingAttributeName"));if(!n)throw new t(i.logMessage(i.LEVEL_SEVERE,"DBaseRecord","constructor","missingBuffer"));this.deleted=!1,this.recordNumber=r,this.values=null,this.readFromBuffer(e,n,r)};return o.prototype.isDeleted=function(){return this.deleted},o.prototype.getRecordNumber=function(){return this.recordNumber},o.prototype.readFromBuffer=function(t,r,o){r.order(e.LITTLE_ENDIAN),this.recordNumber=o;var a=r.getByte();this.deleted=42==a;var s=t.getFields();this.values={};for(var u=0,l=s.length;u<l;u+=1){var c=s[u],h=c.getName(),f=t.readNullTerminatedString(r,c.getLength()).trim();try{if(c.getType()==n.TYPE_BOOLEAN){var p=f.charAt(0);this.values[h]="t"==p||"T"==p||"Y"==p||"y"==p}else c.getType()==n.TYPE_CHAR?this.values[h]=f:c.getType()==n.TYPE_DATE?this.values[h]=new Date(f):c.getType()==n.TYPE_NUMBER&&(this.values[h]=+f)}catch(t){i.log(i.LEVEL_WARNING,"Shapefile attribute parsing error:"+c.toString()+" -> "+f.toString()+" ["+t+"]")}}},o})),i("formats/shapefile/DBaseFile",["../../error/ArgumentError","../../util/ByteBuffer","../../formats/shapefile/DBaseField","../../formats/shapefile/DBaseRecord","../../util/Logger"],(function(t,e,n,r,i){"use strict";var o=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"DBaseFile","constructor","missingUrl"));this.url=e,this.header=null,this.fields=null,this.buffer=null,this.boolean=!0,this.numRecordsRead=0,this._completionCallback=null};return o.prototype.getLastModificationDate=function(){return this.header.lastModificationDate},o.prototype.getNumberOfRecords=function(){return this.header.numberOfRecords},o.prototype.getHeaderLength=function(){return this.header.headerLength},o.prototype.getRecordLength=function(){return this.header.recordLength},o.prototype.getNumberOfFields=function(){return(this.header.headerLength-1-o.FIXED_HEADER_LENGTH)/o.FIELD_DESCRIPTOR_LENGTH},o.prototype.getFields=function(){return this.fields},o.prototype.hasNext=function(){return this.numRecordsRead<this.header.numberOfRecords},o.prototype.nextRecord=function(){return this.numRecordsRead>=this.getNumberOfRecords()?null:this.readNextRecord(this._buffer,++this.numRecordsRead)},o.prototype.load=function(t){this._completionCallback=t,this.requestUrl(this.url)},o.prototype.requestUrl=function(t){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){4===n.readyState&&(200===n.status?(this._buffer=new e(n.response),this.parse(),this._completionCallback&&this._completionCallback(this)):(i.log(i.LEVEL_WARNING,"DBaseFile retrieval failed ("+n.statusText+"): "+t),this._completionCallback&&this._completionCallback(this)))}.bind(this),n.onerror=function(){i.log(i.LEVEL_WARNING,"DBaseFile retrieval failed: "+t),this._completionCallback&&this._completionCallback(this)},n.ontimeout=function(){i.log(i.LEVEL_WARNING,"DBaseFile retrieval timed out: "+t),this._completionCallback&&this._completionCallback(this)},n.send(null)},o.prototype.parse=function(){this.header=this.readHeader(this._buffer),this.fields=this.readFieldDescriptors(this._buffer,this.getNumberOfFields())},o.prototype.readHeader=function(t){var n=t.position;t.order(e.LITTLE_ENDIAN);var r=t.getByte();if(r>5)throw new Error("???");var i={fileCode:r,lastModificationDate:{year:1900+t.getByte(),month:t.getByte()-1,day:t.getByte()},numberOfRecords:t.getInt32(),headerLength:t.getInt16(),recordLength:t.getInt16()};return t.seek(n+o.FIXED_HEADER_LENGTH),i},o.prototype.readFieldDescriptors=function(t,e){for(var r=t.position,i=[],a=0;a<e;a+=1)i[a]=new n(this,t);var s=this.header.headerLength-o.FIXED_HEADER_LENGTH;return t.seek(r+s),i},o.prototype.readNextRecord=function(t,e){return new r(this,t,e)},o.prototype.readNullTerminatedString=function(t,e){if(e<=0)return 0;for(var n="",r=0;r<e;r+=1){var i=t.getByte();if(0==i)break;n+=String.fromCharCode(i)}return this.isStringEmpty(n)?"":n},o.prototype.isStringEmpty=function(t){return t.length<=0||o.isStringFilled(t,32)||o.isStringFilled(t,42)},o.isStringFilled=function(t,e){if(t.length<=0)return!1;for(var n=0;n<t.length;n++)if(t.charAt(n)!=e)return!1;return!0},o.FIXED_HEADER_LENGTH=32,o.FIELD_DESCRIPTOR_LENGTH=32,o})),i("formats/shapefile/PrjFile",["../../error/ArgumentError","../../util/Logger","../../error/NotYetImplementedError"],(function(t,e,n){"use strict";var r=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"DBaseFile","constructor","missingUrl"));this._url=n,this._completionCallback=null,this._params=null};return Object.defineProperties(r.prototype,{url:{get:function(){return this._url}},coordinateSystem:{get:function(){return this.params?this.params[r.COORDINATE_SYSTEM]:null}},params:{get:function(){return this._params}}}),r.prototype.load=function(t){this._completionCallback=t,this.requestUrl(this._url)},r.prototype.requestUrl=function(t){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){if(4===n.readyState){if(200===n.status){var r=String.fromCharCode.apply(null,new Uint8Array(n.response));this._params=this.decodeOGCCoordinateSystem(r)}else e.log(e.LEVEL_WARNING,"PrjFile retrieval failed ("+n.statusText+"): "+t);this._completionCallback&&this._completionCallback(this)}}.bind(this),n.onerror=function(){e.log(e.LEVEL_WARNING,"PrjFile retrieval failed: "+t),this._completionCallback&&this._completionCallback(this)}.bind(this),n.ontimeout=function(){e.log(e.LEVEL_WARNING,"PrjFile retrieval timed out: "+t),this._completionCallback&&this._completionCallback(this)}.bind(this),n.send(null)},r.prototype.decodeOGCCoordinateSystem=function(i){i||new t(e.logMessage(e.LEVEL_SEVERE,"PrjFile","decodeOGCCoordinateSystem","missingText"));var o={};if(i=i.trim().toUpperCase(),r.GEOGCS_WKT_PATTERN.test(i))o[r.COORDINATE_SYSTEM]=r.COORDINATE_SYSTEM_GEOGRAPHIC;else{if(i.match(r.PROJCS_WKT_PATTERN))throw o[PrfFile.COORDINATE_SYSTEM]=r.COORDINATE_SYSTEM_PROJECTED,new n(e.log(e.LEVEL_SEVERE,"PrjFile implementation  for projected coordinate systems in incomplete."));o[r.COORDINATE_SYSTEM]=r.COORDINATE_SYSTEM_UNKNOWN}return o},r.prototype.isUnknownCoordinateSystem=function(){return!this.params||this.params.coordinateSystem===r.COORDINATE_SYSTEM_UNKNOWN},r.prototype.isKnownCoordinateSystem=function(){return!!this.params&&this.params.coordinateSystem!==r.COORDINATE_SYSTEM_UNKNOWN},r.prototype.isGeographicCoordinateSystem=function(){return!!this.params&&this.params.coordinateSystem===r.COORDINATE_SYSTEM_GEOGRAPHIC},r.prototype.isProjectedCoordinateSystem=function(){return!!this.params&&this.params.coordinateSystem===r.COORDINATE_SYSTEM_PROJECTED},r.GEOGCS_WKT_PATTERN=new RegExp("\\{*GEOGCS[\\[\\(](.*)[\\]\\)]\\}*"),r.PROJCS_WKT_PATTERN=new RegExp("\\{*PROJCS[\\[\\(](.*)[\\]\\)]\\}*"),r.UTM_NAME_WKT_PATTERN=new RegExp(".*UTM.*ZONE.*?(\\d+).*?([\\w\\s]+).*?"),r.COORDINATE_SYSTEM="Coordinate_system",r.COORDINATE_SYSTEM_GEOGRAPHIC="Coordinate_system_geographic",r.COORDINATE_SYSTEM_PROJECTED="Coordinate_system_projected",r.COORDINATE_SYSTEM_UNKNOWN="Coordinate_system_unknown",r.PROJECTION_NAME="Projection_name",r.PROJECTION_UTM="Projection_UTM",r.PROJECTION_ZONE="Projection_zone",r.PROJECTION_HEMISPHERE="Projection_hemisphere",r.PROJECTION_HEMISPHERE_NORTH="Projection_hemisphere_north",r.PROJECTION_HEMISPHERE_SOUTH="Projection_hemisphere_south",r})),i("formats/shapefile/ShapefileRecord",["../../geom/Angle","../../error/ArgumentError","../../util/ByteBuffer","../../geom/Location","../../util/Logger","../../formats/shapefile/Shapefile"],(function(t,e,n,r,i,o){"use strict";var a=function(t,n){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"ShapefileRecord","constructor","The specified shapefile is null or undefined"));if(!n)throw new e(i.logMessage(i.LEVEL_SEVERE,"ShapefileRecord","constructor","The specified buffer is null or undefined"));this._shapefile=t,this._recordNumber=-1,this._attributes={},this._numberOfParts=0,this._firstPartNumber=0,this._lastPartNumber=0,this._numberOfPoints=0,this._boundingRectangle=[],this._zRange=null,this._zValues=null,this._mRange=null,this._mValues=null,this._contentLengthInBytes=-1,this._buffer=n,this._isNormalized=!1,this._parts=[],this.readRecord()};return Object.defineProperties(a.prototype,{shapefile:{get:function(){return this._shapefile}},recordNumber:{get:function(){return this._recordNumber}},attributes:{get:function(){return this._attributes}},numberOfParts:{get:function(){return this._numberOfParts}},firstPartNumber:{get:function(){return this._firstPartNumber}},lastPartNumber:{get:function(){return this._lastPartNumber}},numberOfPoints:{get:function(){return this._numberOfPoints}},boundingRectangle:{get:function(){return this._boundingRectangle}},zRange:{get:function(){return this._zRange}},zValues:{get:function(){return this._zValues}},mRange:{get:function(){return this._mRange}},mValues:{get:function(){return this._mValues}}}),a.prototype.pointBuffer=function(t){return t>=0&&t<this._parts.length?this._parts[t]:null},a.prototype.readRecord=function(){this.readHeader(),this._buffer.order(n.LITTLE_ENDIAN);var t=this._buffer.getInt32(),e=this.shapefile.getShapeType(t);this.validateShapeType(e),this.readContents()},a.prototype.readHeader=function(){this._buffer.order(n.BIG_ENDIAN),this._recordNumber=this._buffer.getInt32(),this._contentLengthInBytes=2*this._buffer.getInt32()},a.prototype.validateShapeType=function(t){if(t!==this.shapefile.NULL&&t!==this.shapefile.shapeType)throw new Error(i.log(i.LEVEL_SEVERE,"Shapefile record is not supported."))},a.prototype.readNullContents=function(){this._numberOfParts=0,this._numberOfPoints=0,this._parts=null,this._boundingRectangle=null,this._buffer.seek(this._contentLengthInBytes-n.INT32_SIZE)},a.prototype.readPointContents=function(){this._numberOfParts=1,this._firstPartNumber=0,this._lastPartNumber=this._numberOfParts-1,this._numberOfPoints=1,this._parts=[this._buffer.getDoubleArray(2)];var t=this._parts[0][1],e=this._parts[0][0];this._boundingRectangle=[t,t,e,e],this.isZType()&&this.readZ(!0),this.isMeasureType()&&this.readOptionalMeasures(!0)},a.prototype.readPolylineContents=function(){var t=this.shapefile.readBoundingRectangle(this._buffer);if(this._boundingRectangle=t.coords,this._isNormalized=t.isNormalized,this._numberOfParts=this._buffer.getInt32(),this._firstPartNumber=0,this._lastPartNumber=this._numberOfParts-1,this._numberOfPoints=this._buffer.getInt32(),this._numberOfParts>0&&this._numberOfPoints>0)for(var e=this._buffer.getInt32Array(this.numberOfParts),n=0;n<this.numberOfParts;n+=1){var r=n==this.numberOfParts-1?this._numberOfPoints-e[n]:e[n+1]-e[n];this._parts[n]=this._buffer.getDoubleArray(2*r),a.normalizeLocations(this._parts[n])}this.isZType()&&this.readZ(!1),this.isMeasureType()&&this.readOptionalMeasures(!1)},a.prototype.readMultiPointContents=function(){var t=this.shapefile.readBoundingRectangle(this._buffer);this._boundingRectangle=t.coords,this._isNormalized=t.isNormalized,this._numberOfParts=1,this._numberOfPoints=this._buffer.getInt32(),this._parts=[this._buffer.getDoubleArray(2*this._numberOfPoints)],a.normalizeLocations(this._parts[0]),this.isZType()&&this.readZ(!1),this.isMeasureType()&&this.readOptionalMeasures(!1)},a.prototype.readZ=function(t){if(t){this._zValues=this._buffer.getDoubleArray(1);var e=this._zValues[0];this._zRange=[e,e]}else this._zRange=this._buffer.getDoubleArray(2),this._zValues=this._buffer.getDoubleArray(this.numberOfPoints)},a.prototype.readOptionalMeasures=function(t){if(this._buffer.hasRemaining()&&this._buffer.limit()-this._buffer.position>=8*this.numberOfPoints)if(t){this._mValues=this._buffer.getDoubleArray(1);var e=this._mValues[0];this._mRange=[e,e]}else this._mRange=this._buffer.getDoubleArray(2),this._mValues=this._buffer.getDoubleArray(this.numberOfPoints)},a.normalizeLocations=function(e){for(var n=0,r=e.length;n<r;n+=2){var i=e[n],o=e[n+1];e[n]=t.normalizedDegreesLongitude(i),e[n+1]=t.normalizedDegreesLatitude(o)}},a.prototype.isPointType=function(){return this.shapefile.isPointType()},a.prototype.isMultiPointType=function(){return this.shapefile.isMultiPointType()},a.prototype.isPolylineType=function(){return this.shapefile.isPolylineType()},a.prototype.isPolygonType=function(){return this.shapefile.isPolygonType()},a.prototype.isZType=function(){return this.shapefile.isZType()},a.prototype.isMeasureType=function(){return this.shapefile.isMeasureType()},a.prototype.setAttributes=function(t){this._attributes=t},a.RECORD_HEADER_LENGTH=8,a})),i("formats/shapefile/ShapefileRecordMultiPoint",["../../util/ByteBuffer","../../formats/shapefile/Shapefile","../../formats/shapefile/ShapefileRecord"],(function(t,e,n){"use strict";var r=function(t,e){n.call(this,t,e)};return(r.prototype=Object.create(n.prototype)).readContents=function(){this.readMultiPointContents()},r})),i("formats/shapefile/ShapefileRecordNull",["../../formats/shapefile/Shapefile","../../formats/shapefile/ShapefileRecord"],(function(t,e){"use strict";var n=function(t,n){e.call(this,t,n)};return(n.prototype=Object.create(e.prototype)).readContents=function(){this.readNullContents()},n})),i("formats/shapefile/ShapefileRecordPoint",["../../formats/shapefile/Shapefile","../../formats/shapefile/ShapefileRecord"],(function(t,e){"use strict";var n=function(t,n){e.call(this,t,n)};return(n.prototype=Object.create(e.prototype)).readContents=function(){this.readPointContents()},n})),i("formats/shapefile/ShapefileRecordPolygon",["../../formats/shapefile/Shapefile","../../formats/shapefile/ShapefileRecord"],(function(t,e){"use strict";var n=function(t,n){e.call(this,t,n)};return(n.prototype=Object.create(e.prototype)).readContents=function(){this.readPolylineContents()},n})),i("formats/shapefile/ShapefileRecordPolyline",["../../formats/shapefile/Shapefile","../../formats/shapefile/ShapefileRecord"],(function(t,e){"use strict";var n=function(t,n){e.call(this,t,n)};return(n.prototype=Object.create(e.prototype)).readContents=function(){this.readPolylineContents()},n})),i("formats/shapefile/Shapefile",["../../geom/Angle","../../error/ArgumentError","../../util/ByteBuffer","../../util/Color","../../formats/shapefile/DBaseFile","../../geom/Location","../../util/Logger","../../error/NotYetImplementedError","../../shapes/Path","../../shapes/Placemark","../../shapes/PlacemarkAttributes","../../shapes/Polygon","../../geom/Position","../../formats/shapefile/PrjFile","../../layer/RenderableLayer","../../shapes/ShapeAttributes","../../formats/shapefile/ShapefileRecord","../../formats/shapefile/ShapefileRecordMultiPoint","../../formats/shapefile/ShapefileRecordNull","../../formats/shapefile/ShapefileRecordPoint","../../formats/shapefile/ShapefileRecordPolygon","../../formats/shapefile/ShapefileRecordPolyline","../../shapes/SurfacePolygon","../../shapes/SurfacePolyline"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_,b,S,w){"use strict";var x=function(t){if(!t)throw new e(a.logMessage(a.LEVEL_SEVERE,"Shapefile","constructor","missingUrl"));this._url=t,this._shapeType=null,this._layer=null,this._shapeConfigurationCallback=this.defaultShapeConfigurationCallback,this._parserCompletionCallback=this.defaultParserCompletionCallback,this._buffer=null,this.attributeFile=new i(t.replace(".shp",".dbf")),this.projectionFile=new p(t.replace(".shp",".prj")),this.defaultPlacemarkAttributes=new c(null),this.defaultShapeAttributes=new g(null)};return Object.defineProperties(x.prototype,{url:{get:function(){return this._url}},shapeType:{get:function(){return this._shapeType}},layer:{get:function(){return this._layer}},parserCompletionCallback:{get:function(){return this._parserCompletionCallback}},shapeConfigurationCallback:{get:function(){return this._shapeConfigurationCallback}}}),x.prototype.load=function(t,e,n){t&&(this._parserCompletionCallback=t),e&&(this._shapeConfigurationCallback=e),this._layer=n||new d;var r=function(){var t=function(){this.requestUrl(this.url)}.bind(this);this.attributeFile.load(t)}.bind(this);this.projectionFile.load(r)},x.prototype.defaultParserCompletionCallback=function(t){this.addRenderablesForShapefile(this.layer)},x.prototype.defaultShapeConfigurationCallback=function(t,e){var n={},r=t.values.name||t.values.Name||t.values.NAME;if(r&&(n.name=r),e.isPointType())n.attributes=this.defaultPlacemarkAttributes;else if(e.isMultiPointType())n.attributes=this.defaultPlacemarkAttributes;else if(e.isPolylineType())n.attributes=this.defaultShapeAttributes;else if(e.isPolygonType()){n.attributes=this.defaultShapeAttributes;var i=t.values.height||t.values.Height||t.values.HEIGHT;i&&(n.height=i)}return n},x.prototype.addRenderablesForShapefile=function(t){if(!t)throw new e(a.logMessage(a.LEVEL_SEVERE,"Shapefile","addRenderablesForShapefile","missingLayer"));this.isPointType()?this.addRenderablesForPoints(t):this.isMultiPointType()?this.addRenderablesForMultiPoints(t):this.isPolylineType()?this.addRenderablesForPolylines(t):this.isPolygonType()&&this.addRenderablesForPolygons(t)},x.prototype.addRenderablesForPoints=function(t){if(!t)throw new e(a.logMessage(a.LEVEL_SEVERE,"Shapefile","addRenderablesForPoints","missingLayer"));for(var n=this.next();n;n=this.next()){var r=this.shapeConfigurationCallback(n.attributes,n),i=r&&r.altitude?r.altitude:0;if(r)for(var o=0,s=n.numberOfParts;o<s;o+=1)for(var u=n.pointBuffer(o),c=0,h=u.length;c<h;c+=2){var p=u[c],d=u[c+1],g=new f(d,p,i),m=new l(g,!1,r.attributes);m.altitudeMode=r.altitudeMode||WorldWind.RELATIVE_TO_GROUND,r.highlightAttributes&&(m.highlightAttributes=r.highlightAttributes),r.name&&(m.label=r.name),r.pickDelegate&&(m.pickDelegate=r.pickDelegate),r.userProperties&&(m.userProperties=r.userProperties),r.timeRange&&(m.timeRange=r.timeRange),t.addRenderable(m)}}},x.prototype.addRenderablesForMultiPoints=function(t){if(!t)throw new e(a.logMessage(a.LEVEL_SEVERE,"Shapefile","addRenderablesForMultiPoints","missingLayer"));for(var n=this.next();n;n=this.next()){var r=this.shapeConfigurationCallback(n.attributes,n),i=r&&r.altitude?r.altitude:0;if(r)for(var o=0,s=n.numberOfParts;o<s;o+=1)for(var u=n.pointBuffer(o),c=0,h=u.length;c<h;c+=2){var p=u[c],d=u[c+1],g=new f(d,p,i),m=new l(g,!1,r.attributes);m.altitudeMode=r.altitudeMode||WorldWind.RELATIVE_TO_GROUND,r.highlightAttributes&&(m.highlightAttributes=r.highlightAttributes),r.name&&(m.label=r.name),r.pickDelegate&&(m.pickDelegate=r.pickDelegate),r.userProperties&&(m.userProperties=r.userProperties),r.timeRange&&(m.timeRange=r.timeRange),t.addRenderable(m)}}},x.prototype.addRenderablesForPolylines=function(t){if(!t)throw new e(a.logMessage(a.LEVEL_SEVERE,"Shapefile","addRenderablesForPolylines","missingLayer"));for(var n=this.next();n;n=this.next()){var r=this.shapeConfigurationCallback(n.attributes,n),i=r&&r.altitude?r.altitude:0;if(r)for(var s=0,l=n.numberOfParts;s<l;s+=1){for(var c=n.pointBuffer(s),h=[],p=0,d=c.length;p<d;p+=2){var g=c[p],m=c[p+1],y=i?new f(m,g,i):new o(m,g);h.push(y)}var v;i?(v=new u(h,r.attributes)).altitudeMode=r.altitudeMode||WorldWind.RELATIVE_TO_GROUND:v=new w(h,r.attributes),r.highlightAttributes&&(v.highlightAttributes=r.highlightAttributes),r.name&&(v.displayName=r.name),r.pickDelegate&&(v.pickDelegate=r.pickDelegate),r.userProperties&&(v.userProperties=r.userProperties),r.timeRange&&(v.timeRange=r.timeRange),t.addRenderable(v)}}},x.prototype.addRenderablesForPolygons=function(t){if(!t)throw new e(a.logMessage(a.LEVEL_SEVERE,"Shapefile","addRenderablesForPolygons","missingLayer"));for(var n=this.next();n;n=this.next()){for(var r,i=this.shapeConfigurationCallback(n.attributes,n),s=[],u=i.height,l=i.altitude,c=0,p=n.numberOfParts;c<p;c+=1){for(var d=n.pointBuffer(c),g=[],m=0,y=d.length-2;m<y;m+=2){var v=d[m],E=d[m+1];r=u?new f(E,v,u):l?new f(E,v,l):new o(E,v),g.push(r)}s.push(g)}var _;u?((_=new h(s,i.attributes)).extrude=!0,_.altitudeMode=i.altitudeMode||WorldWind.RELATIVE_TO_GROUND):l?(_=new h(s,i.attributes)).altitudeMode=i.altitudeMode||WorldWind.RELATIVE_TO_GROUND:_=new S(s,i.attributes),i.highlightAttributes&&(_.highlightAttributes=i.highlightAttributes),i.name&&(_.displayName=i.name),i.pickDelegate&&(_.pickDelegate=i.pickDelegate),i.userProperties&&(_.userProperties=i.userProperties),i.timeRange&&(_.timeRange=i.timeRange),t.addRenderable(_)}},x.prototype.next=function(){for(;this._buffer.position<this._buffer.limit();){var t=this.readRecord(this._buffer);if(!(t instanceof v))return t}return null},x.prototype.requestUrl=function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onreadystatechange=function(){4===e.readyState&&(200===e.status?(this._buffer=new n(e.response),this.parse()):a.log(a.LEVEL_WARNING,"Shapefile retrieval failed ("+e.statusText+"): "+t),this._parserCompletionCallback&&this._parserCompletionCallback(this))}.bind(this),e.onerror=function(){a.log(a.LEVEL_WARNING,"Shapefile retrieval failed: "+t),this._parserCompletionCallback&&this._parserCompletionCallback(this)},e.ontimeout=function(){a.log(a.LEVEL_WARNING,"Shapefile retrieval timed out: "+t),this._parserCompletionCallback&&this._parserCompletionCallback(this)},e.send(null)},x.prototype.parse=function(){try{var t=this.readHeader(this._buffer);this._shapeType=t.shapeType}catch(t){console.log(t)}},x.prototype.readHeader=function(t){if(t.order(n.BIG_ENDIAN),t.getInt32()!=x.FILE_CODE)throw new Error(a.log(a.LEVEL_SEVERE,"Shapefile header is invalid"));t.skipInt32s(5);var e=t.getInt32();t.order(n.LITTLE_ENDIAN);var r=t.getInt32(),i=t.getInt32(),o=this.readBoundingRectangle(t),s=this.getShapeType(i);if(null==s)throw new Error(a.log(a.LEVEL_SEVERE,"Shapefile type is unsupported: "+i.toString()));var u={fileLength:2*e,version:r,shapeType:s,boundingRectangle:o.coords,normalizePoints:o.isNormalized};return t.skipDoubles(4),u},x.prototype.readBoundingRectangle=function(t){return this.projectionFile?this.projectionFile.isGeographicCoordinateSystem()?this.readGeographicBoundingRectangle(t):this.projectionFile.isProjectedCoordinateSystem()?this.readProjectedBoundingRectangle(t):this.readUnspecifiedBoundingRectangle(t):this.readUnspecifiedBoundingRectangle(t)},x.prototype.readUnspecifiedBoundingRectangle=function(t){return{coords:this.readBoundingRectangleCoordinates(t),isNormalized:!1}},x.prototype.readGeographicBoundingRectangle=function(e){var n=this.readBoundingRectangleCoordinates(e),r=!1,i=0;return n[0]<-90&&(i=t.normalizedDegreesLatitude(n[0]),n[0]=90,r=!0,n[1]<i&&(n[1]=i)),n[1]>90&&(i=t.normalizedDegreesLatitude(n[1]),n[1]=90,r=!0,n[0]>i&&(n[0]=i)),(n[2]<-180||n[3]>180)&&(n[2]=-180,n[3]=180,r=!0),{coords:n,isNormalized:r}},x.prototype.readProjectedBoundingRectangle=function(t){throw new s(a.log(a.LEVEL_SEVERE,"Shapefile.readProjectedBoundingRectangle() not yet implemented"))},x.prototype.readBoundingRectangleCoordinates=function(t){var e=t.getDouble(),n=t.getDouble(),r=t.getDouble();return[n,t.getDouble(),e,r]},x.prototype.readRecord=function(t){var e=this.createRecord(t);if(null!=e&&null!=this.attributeFile&&this.attributeFile.hasNext()){var n=this.attributeFile.nextRecord();e.setAttributes(n)}return e},x.prototype.createRecord=function(t){return this.isNullType()?this.createNull(t):this.isPointType()?this.createPoint(t):this.isMultiPointType()?this.createMultiPoint(t):this.isPolygonType()?this.createPolygon(t):this.isPolylineType()?this.createPolyline(t):null},x.prototype.createNull=function(t){return new v(this,t)},x.prototype.createPoint=function(t){return new E(this,t)},x.prototype.createMultiPoint=function(t){return new y(this,t)},x.prototype.createPolyline=function(t){return new b(this,t)},x.prototype.createPolygon=function(t){return new _(this,t)},x.prototype.getShapeType=function(t){switch(t){case 0:return x.NULL;case 1:return x.POINT;case 3:return x.POLYLINE;case 5:return x.POLYGON;case 8:return x.MULTI_POINT;case 11:return x.POINT_Z;case 13:return x.POLYLINE_Z;case 15:return x.POLYGON_Z;case 18:return x.MULTI_POINT_Z;case 21:return x.POINT_M;case 23:return x.POLYLINE_M;case 25:return x.POLYGON_M;case 28:return x.MULTI_POINT_M;default:return null}},x.prototype.isMeasureType=function(){return x.measureTypes.hasOwnProperty(this._shapeType)},x.prototype.isZType=function(){return x.zTypes.hasOwnProperty(this._shapeType)},x.prototype.isNullType=function(){return this._shapeType===x.NULL},x.prototype.isPointType=function(){return x.pointTypes.hasOwnProperty(this._shapeType)},x.prototype.isMultiPointType=function(){return x.multiPointTypes.hasOwnProperty(this._shapeType)},x.prototype.isPolylineType=function(){return x.polylineTypes.hasOwnProperty(this._shapeType)},x.prototype.isPolygonType=function(){return x.polygonTypes.hasOwnProperty(this._shapeType)},x.NULL="null",x.POINT="point",x.MULTI_POINT="multiPoint",x.POLYLINE="polyline",x.POLYGON="polygon",x.POINT_M=x.POINT+"M",x.MULTI_POINT_M=x.MULTI_POINT+"M",x.POLYLINE_M=x.POLYLINE+"M",x.POLYGON_M=x.POLYGON+"M",x.POINT_Z=x.POINT+"Z",x.MULTI_POINT_Z=x.MULTI_POINT+"Z",x.POLYLINE_Z=x.POLYLINE+"Z",x.POLYGON_Z=x.POLYGON+"Z",x.SHAPE_MULTI_PATCH="multiPatch",x.measureTypes={pointM:x.POINT_M,pointZ:x.POINT_Z,multiPointM:x.MULTI_POINT_M,multiPointZ:x.MULTI_POINT_Z,polylineM:x.POLYLINE_M,polylineZ:x.POLYLINE_Z,polygonM:x.POLYGON_M,polygonZ:x.POLYGON_Z},x.zTypes={pointZ:x.POINT_Z,multiPointZ:x.MULTI_POINT_Z,polylineZ:x.POLYLINE_Z,polygonZ:x.POLYGON_Z},x.pointTypes={point:x.POINT,pointZ:x.POINT_Z,pointM:x.POINT_M},x.multiPointTypes={multiPoint:x.MULTI_POINT,multiPointZ:x.MULTI_POINT_Z,multiPointM:x.MULTI_POINT_M},x.polylineTypes={polyline:x.POLYLINE,polylineZ:x.POLYLINE_Z,polylineM:x.POLYLINE_M},x.polygonTypes={polygon:x.POLYGON,polygonZ:x.POLYGON_Z,polygonM:x.POLYGON_M},x.FILE_CODE=9994,x})),i("layer/ShowTessellationLayer",["../shaders/BasicProgram","../layer/Layer"],(function(t,e){"use strict";var n=function(){e.call(this,"Show Tessellation"),this.enableTerrainGeometry=!0,this.enableTerrainExtent=!1};return(n.prototype=Object.create(e.prototype)).doRender=function(t){try{this.beginRendering(t),this.enableTerrainGeometry&&this.drawTerrainGeometry(t),this.enableTerrainExtent&&this.drawTerrainExtent(t)}finally{this.endRendering(t)}},n.prototype.beginRendering=function(t){t.currentGlContext.depthMask(!1)},n.prototype.endRendering=function(t){t.currentGlContext.depthMask(!0)},n.prototype.drawTerrainGeometry=function(e){if(e.terrain&&e.terrain.tessellator){var n,r,i=e.currentGlContext,o=e.terrain,a=o.tessellator,s=o.surfaceGeometry;try{n=e.findAndBindProgram(t),a.beginRendering(e);for(var u=0,l=s.length;u<l;u++)r=s[u],a.beginRenderingTile(e,r),n.loadColorComponents(i,1,1,1,.3),a.renderWireframeTile(e,r),n.loadColorComponents(i,1,0,0,.6),a.renderTileOutline(e,r),a.endRenderingTile(e,r)}finally{a.endRendering(e)}}},n.prototype.drawTerrainExtent=function(t){for(var e=t.terrain.surfaceGeometry,n=0,r=e.length;n<r;n++)e[n].extent.render(t)},n})),i("shaders/StarFieldProgram",["../error/ArgumentError","../shaders/GpuProgram","../util/Logger"],(function(t,e,n){"use strict";var r=function(t){e.call(this,t,"attribute vec4 vertexPoint;\nuniform mat4 mvpMatrix;\nuniform float numDays;\nuniform vec2 magnitudeRange;\nvarying float magnitudeWeight;\nfloat normalizeAngle(float angle) {\n   float angleDivisions = angle / 360.0;\n   return 360.0 * (angleDivisions - floor(angleDivisions));\n}\nvec3 computePosition(float dec, float ra) {\n   float GMST = normalizeAngle(280.46061837 + 360.98564736629 * numDays);\n   float GHA = normalizeAngle(GMST - ra);\n   float lon = -GHA + 360.0 * step(180.0, GHA);\n   float latRad = radians(dec);\n   float lonRad = radians(lon);\n   float radCosLat = cos(latRad);\n   return vec3(radCosLat * sin(lonRad), sin(latRad), radCosLat * cos(lonRad));\n}\nfloat normalizeScalar(float value, float minValue, float maxValue){\n   return (value - minValue) / (maxValue - minValue);\n}\nvoid main() {\n   vec3 vertexPosition = computePosition(vertexPoint.x, vertexPoint.y);\n   gl_Position = mvpMatrix * vec4(vertexPosition.xyz, 1.0);\n   gl_Position.z = gl_Position.w - 0.00001;\n   gl_PointSize = vertexPoint.z;\n   magnitudeWeight = normalizeScalar(vertexPoint.w, magnitudeRange.x, magnitudeRange.y);\n}","precision mediump float;\nuniform sampler2D textureSampler;\nuniform int textureEnabled;\nvarying float magnitudeWeight;\nconst vec4 white = vec4(1.0, 1.0, 1.0, 1.0);\nconst vec4 grey = vec4(0.5, 0.5, 0.5, 1.0);\nvoid main() {\n   if (textureEnabled == 1) {\n       gl_FragColor = texture2D(textureSampler, gl_PointCoord);\n   }\n   else {\n       gl_FragColor = mix(white, grey, magnitudeWeight);\n   }\n}",["vertexPoint"]),this.vertexPointLocation=this.attributeLocation(t,"vertexPoint"),this.mvpMatrixLocation=this.uniformLocation(t,"mvpMatrix"),this.numDaysLocation=this.uniformLocation(t,"numDays"),this.magnitudeRangeLocation=this.uniformLocation(t,"magnitudeRange"),this.textureUnitLocation=this.uniformLocation(t,"textureSampler"),this.textureEnabledLocation=this.uniformLocation(t,"textureEnabled")};return r.key="WorldWindGpuStarFieldProgram",(r.prototype=Object.create(e.prototype)).loadModelviewProjection=function(e,r){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"StarFieldProgram","loadModelviewProjection","missingMatrix"));this.loadUniformMatrix(e,r,this.mvpMatrixLocation)},r.prototype.loadNumDays=function(e,r){if(null==r)throw new t(n.logMessage(n.LEVEL_SEVERE,"StarFieldProgram","loadNumDays","missingNumDays"));e.uniform1f(this.numDaysLocation,r)},r.prototype.loadMagnitudeRange=function(e,r,i){if(null==r)throw new t(n.logMessage(n.LEVEL_SEVERE,"StarFieldProgram","loadMagRange","missingMinMag"));if(null==i)throw new t(n.logMessage(n.LEVEL_SEVERE,"StarFieldProgram","loadMagRange","missingMaxMag"));e.uniform2f(this.magnitudeRangeLocation,r,i)},r.prototype.loadTextureUnit=function(t,e){t.uniform1i(this.textureUnitLocation,e-t.TEXTURE0)},r.prototype.loadTextureEnabled=function(t,e){t.uniform1i(this.textureEnabledLocation,e?1:0)},r})),i("layer/StarFieldLayer",["./Layer","../util/Logger","../geom/Matrix","../shaders/StarFieldProgram","../util/SunPosition"],(function(t,e,n,r,i){"use strict";var o=function(e){t.call(this,"StarField"),this.pickEnabled=!1,this.sunSize=128,this.showSun=!0,this._starDataSource=e||WorldWind.configuration.baseUrl+"images/stars.json",this._sunImageSource=WorldWind.configuration.baseUrl+"images/sunTexture.png",this._matrix=n.fromIdentity(),this._starsPositionsVboCacheKey=null,this._numStars=0,this._starData=null,this._minMagnitude=Number.MAX_VALUE,this._maxMagnitude=Number.MIN_VALUE,this._loadStarted=!1,this._scale=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,this._sunPositionsCacheKey="",this._sunBufferView=new Float32Array(4),this._MAX_GL_POINT_SIZE=0};return o.prototype=Object.create(t.prototype),Object.defineProperties(o.prototype,{starDataSource:{get:function(){return this._starDataSource},set:function(t){this._starDataSource=t,this.invalidateStarData()}},sunImageSource:{get:function(){return this._sunImageSource},set:function(t){this._sunImageSource=t}}}),o.prototype.doRender=function(t){if(!t.globe.is2D()){if(!this.haveResources(t))return void this.loadResources(t);this.beginRendering(t);try{this.doDraw(t)}finally{this.endRendering(t)}}},o.prototype.haveResources=function(t){var e=t.gpuResourceCache.resourceForKey(this._sunImageSource);return null!=this._starData&&null!=e},o.prototype.loadResources=function(t){var e=t.currentGlContext,n=t.gpuResourceCache;this._starData||this.fetchStarData(),n.resourceForKey(this._sunImageSource)||n.retrieveTexture(e,this._sunImageSource)},o.prototype.beginRendering=function(t){var e=t.currentGlContext;t.findAndBindProgram(r),e.enableVertexAttribArray(0),e.depthMask(!1)},o.prototype.doDraw=function(t){this.loadCommonUniforms(t),this.renderStars(t),this.showSun&&this.renderSun(t)},o.prototype.loadCommonUniforms=function(t){var e=t.currentGlContext,n=t.currentProgram;this._matrix.copy(t.modelviewProjection),this._matrix.multiplyByScale(this._scale,this._scale,this._scale),n.loadModelviewProjection(e,this._matrix);var r=i.computeJulianDate(this.time||new Date);n.loadNumDays(e,r-2451545)},o.prototype.renderStars=function(t){var e=t.currentGlContext,n=t.gpuResourceCache,r=t.currentProgram;this._starsPositionsVboCacheKey||(this._starsPositionsVboCacheKey=n.generateCacheKey());var i=n.resourceForKey(this._starsPositionsVboCacheKey);if(i)e.bindBuffer(e.ARRAY_BUFFER,i);else{i=e.createBuffer();var o=this.createStarsGeometry();n.putResource(this._starsPositionsVboCacheKey,i,4*o.length),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW)}t.frameStatistics.incrementVboLoadCount(1),e.vertexAttribPointer(0,4,e.FLOAT,!1,0,0),r.loadMagnitudeRange(e,this._minMagnitude,this._maxMagnitude),r.loadTextureEnabled(e,!1),e.drawArrays(e.POINTS,0,this._numStars)},o.prototype.renderSun=function(t){var n=t.currentGlContext,r=t.currentProgram,o=t.gpuResourceCache;this._MAX_GL_POINT_SIZE||(this._MAX_GL_POINT_SIZE=n.getParameter(n.ALIASED_POINT_SIZE_RANGE)[1]),this.sunSize>this._MAX_GL_POINT_SIZE&&e.log(e.LEVEL_WARNING,"StarFieldLayer - sunSize is to big, max size allowed is: "+this._MAX_GL_POINT_SIZE);var a=i.getAsCelestialLocation(this.time||new Date);this._sunBufferView[0]=a.declination,this._sunBufferView[1]=a.rightAscension,this._sunBufferView[2]=Math.min(this.sunSize,this._MAX_GL_POINT_SIZE),this._sunBufferView[3]=1,this._sunPositionsCacheKey||(this._sunPositionsCacheKey=o.generateCacheKey());var s=o.resourceForKey(this._sunPositionsCacheKey);s?(n.bindBuffer(n.ARRAY_BUFFER,s),n.bufferSubData(n.ARRAY_BUFFER,0,this._sunBufferView)):(s=n.createBuffer(),o.putResource(this._sunPositionsCacheKey,s,4*this._sunBufferView.length),n.bindBuffer(n.ARRAY_BUFFER,s),n.bufferData(n.ARRAY_BUFFER,this._sunBufferView,n.DYNAMIC_DRAW)),t.frameStatistics.incrementVboLoadCount(1),n.vertexAttribPointer(0,4,n.FLOAT,!1,0,0),r.loadTextureEnabled(n,!0),t.gpuResourceCache.resourceForKey(this._sunImageSource).bind(t),n.drawArrays(n.POINTS,0,1)},o.prototype.endRendering=function(t){var e=t.currentGlContext;e.depthMask(!0),e.disableVertexAttribArray(0)},o.prototype.fetchStarData=function(){if(!this._loadStarted){this._loadStarted=!0;var t=this,n=new XMLHttpRequest;n.onload=function(){if(this.status>=200&&this.status<300)try{t._starData=JSON.parse(this.response),t.sendRedrawRequest()}catch(t){e.log(e.LEVEL_SEVERE,"StarFieldLayer unable to parse JSON for star data "+t.toString())}else e.log(e.LEVEL_SEVERE,"StarFieldLayer unable to fetch star data. Status: "+this.status+" "+this.statusText);t._loadStarted=!1},n.onerror=function(){e.log(e.LEVEL_SEVERE,"StarFieldLayer unable to fetch star data"),t._loadStarted=!1},n.ontimeout=function(){e.log(e.LEVEL_SEVERE,"StarFieldLayer fetch star data has timeout"),t._loadStarted=!1},n.open("GET",this._starDataSource,!0),n.send()}},o.prototype.createStarsGeometry=function(){var t=this.parseStarsMetadata(this._starData.metadata);if(-1===t.raIndex)throw new Error(e.logMessage(e.LEVEL_SEVERE,"StarFieldLayer","createStarsGeometry","Missing ra field in star data."));if(-1===t.decIndex)throw new Error(e.logMessage(e.LEVEL_SEVERE,"StarFieldLayer","createStarsGeometry","Missing dec field in star data."));if(-1===t.magIndex)throw new Error(e.logMessage(e.LEVEL_SEVERE,"StarFieldLayer","createStarsGeometry","Missing vmag field in star data."));var n=this._starData.data,r=[];this._minMagnitude=Number.MAX_VALUE,this._maxMagnitude=Number.MIN_VALUE;for(var i=0,o=n.length;i<o;i++){var a=n[i],s=a[t.decIndex],u=a[t.raIndex],l=a[t.magIndex],c=l<2?2:1;r.push(s,u,c,l),this._minMagnitude=Math.min(this._minMagnitude,l),this._maxMagnitude=Math.max(this._maxMagnitude,l)}return this._numStars=Math.floor(r.length/4),r},o.prototype.parseStarsMetadata=function(t){for(var e=-1,n=-1,r=-1,i=0,o=t.length;i<o;i++){var a=t[i];"ra"===a.name&&(e=i),"dec"===a.name&&(n=i),"vmag"===a.name&&(r=i)}return{raIndex:e,decIndex:n,magIndex:r}},o.prototype.invalidateStarData=function(){this._starData=null,this._starsPositionsVboCacheKey=null},o.prototype.sendRedrawRequest=function(){var t=document.createEvent("Event");t.initEvent(WorldWind.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(t)},o})),i("render/SurfaceRenderable",["../util/Logger","../error/UnsupportedOperationError"],(function(t,e){"use strict";var n=function(){throw this.displayName="Renderable",this.enabled=!0,new e(t.logMessage(t.LEVEL_SEVERE,"SurfaceRenderable","constructor","abstractInvocation"))};return n.prototype.renderSurface=function(n){throw new e(t.logMessage(t.LEVEL_SEVERE,"SurfaceRenderable","renderSurface","abstractInvocation"))},n})),i("layer/TectonicPlatesLayer",["../error/ArgumentError","../util/Color","../geom/Location","../util/Logger","../layer/RenderableLayer","../shapes/ShapeAttributes","../shapes/SurfacePolygon"],(function(t,e,n,r,i,o,a){"use strict";var s=function(t){i.call(this,"Tectonic Plates"),t?this._attributes=t:(this._attributes=new o(null),this._attributes.drawInterior=!1,this._attributes.drawOutline=!0,this._attributes.outlineColor=e.RED),this.loadPlateData()};return s.prototype=Object.create(i.prototype),Object.defineProperties(s.prototype,{attributes:{get:function(){return this._attributes},set:function(t){t&&this.renderables.map((function(e,n,r){e.attributes=t}))}}}),s.prototype.loadPlateData=function(){var t=WorldWind.configuration.baseUrl+"images/TectonicPlates.json",e=new XMLHttpRequest;e.open("GET",t,!0),e.onreadystatechange=function(){4===e.readyState&&(200===e.status?this.parse(e.responseText):r.log(r.LEVEL_WARNING,"Tectonic plate data retrieval failed ("+e.statusText+"): "+t))}.bind(this),e.onerror=function(){r.log(r.LEVEL_WARNING,"Tectonic plate data retrieval failed: "+t)},e.ontimeout=function(){r.log(r.LEVEL_WARNING,"Tectonic plate data retrieval timed out: "+t)},e.send(null)},s.prototype.parse=function(t){var e=JSON.parse(t),r=this;e.features.map((function(t,e,i){var o=[];t.geometry.coordinates.map((function(t,e,r){o.push(new n(t[1],t[0]))}));var s=new a(o,r._attributes);r.addRenderable(s)}))},s})),i("util/TileFactory",["../util/Logger","../error/UnsupportedOperationError"],(function(t,e){"use strict";var n=function(){};return n.prototype.createTile=function(n,r,i,o){throw new e(t.logMessage(t.LEVEL_SEVERE,"TileFactory","createTile","abstractInvocation"))},n})),i("shapes/TriangleMesh",["../shapes/AbstractMesh","../error/ArgumentError","../shaders/BasicTextureProgram","../geom/BoundingBox","../util/Color","../util/ImageSource","../geom/Location","../util/Logger","../geom/Matrix","../pick/PickedObject","../geom/Position","../shapes/ShapeAttributes","../shapes/SurfacePolygon","../geom/Vec2","../geom/Vec3"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d){"use strict";var g=function(n,r,i){if(!n)throw new e(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","constructor","missingPositions"));if(n.length<1)throw new e(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","constructor","missingPositions"));if(n.length>65536)throw new e(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","constructor","Too many positions. Must be fewer than 65537. Use TriangleMesh.split to split the shape."));if(!r)throw new e(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","constructor","Indices array is null or undefined"));if(r.length<3)throw new e(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","constructor","Too few indices."));t.call(this,i),this._positions=n,this._indices=r,this.referencePosition=this._positions[0]};return g.prototype=Object.create(t.prototype),Object.defineProperties(g.prototype,{positions:{get:function(){return this._positions},set:function(t){if(!t)throw new e(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","positions","missingPositions"));this._positions=t,this.referencePosition=this._positions[0],this.reset()}},indices:{get:function(){return this._indices},set:function(t){if(!t)throw new e(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","indices","Indices array is null or undefined"));this._indices=t,this.meshIndices=null,this.reset()}},outlineIndices:{get:function(){return this._outlineIndices},set:function(t){this._outlineIndices=t,this.meshOutlineIndices=null,this.reset()}},textureCoordinates:{get:function(){return this._textureCoordinates},set:function(t){if(t&&t.length!=this._positions.length)throw new e(s.logMessage(s.LEVEL_SEVERE,"TriangleMesh","textureCoordinates","Number of texture coordinates is inconsistent with the currently specified positions."));this._textureCoordinates=t,this.reset(),this.texCoords=null}}}),g.prototype.createSurfaceShape=function(){if(this._outlineIndices){for(var t=[],e=0;e<this._outlineIndices.length;e++)t.push(this._positions[this._outlineIndices[e]]);return new f(t,null)}return null},g.prototype.computeMeshPoints=function(t,e){for(var n,r,i=Number.MAX_VALUE,o=t.eyePoint,a=new Float32Array(3*this._positions.length),s=new d(0,0,0),u=0,l=0;l<this._positions.length;l++)n=this._positions[l],t.surfacePointForMode(n.latitude,n.longitude,n.altitude*this._altitudeScale,this.altitudeMode,s),(r=s.distanceToSquared(o))<i&&(i=r),s.subtract(this.currentData.referencePoint),a[u++]=s[0],a[u++]=s[1],a[u++]=s[2];return e.eyeDistance=Math.sqrt(i),a},g.prototype.computeTexCoords=function(){if(this._textureCoordinates){for(var t=new Float32Array(2*this._textureCoordinates.length),e=0,n=0,r=this._textureCoordinates.length;n<r;n++){var i=this._textureCoordinates[n];t[e++]=i[0],t[e++]=i[1]}return t}return null},g.prototype.computeMeshIndices=function(){for(var t=new Uint16Array(this._indices.length),e=0,n=this._indices.length;e<n;e++)t[e]=this._indices[e];return t},g.prototype.computeOutlineIndices=function(){if(this._outlineIndices){for(var t=new Uint16Array(this._outlineIndices.length),e=0;e<this._outlineIndices.length;e++)t[e]=this._outlineIndices[e];return t}return null},g.split=function(t,e,n,r){for(var i,o,a=[],s=[],u=[],l=[],c=[],h=0;h<=e.length;h++){if(h===e.length||a.length>65533&&u.length%3===0){if(a.length>0){var f={positions:a,indices:u};if(n&&(f.textureCoords=s),r){for(var p=[],d=0;d<r.length;d++)(o=l[i=r[d]])&&p.push(l[r[d]]);f.outlineIndices=p}c.push(f)}if(h===e.length)break;a=[],u=[],l=[]}(o=l[i=e[h]])||(o=a.length,l[i]=o,a.push(t[i]),n&&s.push(n[i])),u.push(o)}return c},g})),i("util/UrlBuilder",["../util/Logger","../error/UnsupportedOperationError"],(function(t,e){"use strict";var n=function(){};return n.prototype.urlForTile=function(n,r){throw new e(t.logMessage(t.LEVEL_SEVERE,"UrlBuilder","urlForTile","abstractInvocation"))},n})),i("layer/ViewControlsLayer",["../geom/Angle","../error/ArgumentError","../layer/Layer","../geom/Location","../util/Logger","../util/Offset","../shapes/ScreenImage","../geom/Vec2"],(function(t,e,n,r,i,o,a,s){"use strict";var u=function(t){if(!t)throw new e(i.logMessage(i.LEVEL_SEVERE,"ViewControlsLayer","constructor","missingWorldWindow"));n.call(this,"View Controls"),this.wwd=t,this.placement=new o(WorldWind.OFFSET_PIXELS,11,WorldWind.OFFSET_PIXELS,11),this.alignment=new o(WorldWind.OFFSET_FRACTION,0,WorldWind.OFFSET_FRACTION,0),this.exaggerationIncrement=.01,this.zoomIncrement=.04,this.headingIncrement=1,this.tiltIncrement=1,this.fieldOfViewIncrement=.1,this.panIncrement=.001,this._inactiveOpacity=.5,this._activeOpacity=1;var r=new o(WorldWind.OFFSET_PIXELS,0,WorldWind.OFFSET_PIXELS,0),u=WorldWind.configuration.baseUrl+"images/view/";this.panControl=new a(r.clone(),u+"view-pan-64x64.png"),this.zoomInControl=new a(r.clone(),u+"view-zoom-in-32x32.png"),this.zoomOutControl=new a(r.clone(),u+"view-zoom-out-32x32.png"),this.headingLeftControl=new a(r.clone(),u+"view-heading-left-32x32.png"),this.headingRightControl=new a(r.clone(),u+"view-heading-right-32x32.png"),this.tiltUpControl=new a(r.clone(),u+"view-pitch-up-32x32.png"),this.tiltDownControl=new a(r.clone(),u+"view-pitch-down-32x32.png"),this.exaggerationUpControl=new a(r.clone(),u+"view-elevation-up-32x32.png"),this.exaggerationDownControl=new a(r.clone(),u+"view-elevation-down-32x32.png"),this.fovNarrowControl=new a(r.clone(),u+"view-fov-narrow-32x32.png"),this.fovWideControl=new a(r.clone(),u+"view-fov-wide-32x32.png"),this.fovNarrowControl.enabled=!1,this.fovWideControl.enabled=!1,this.controls=[this.panControl,this.zoomInControl,this.zoomOutControl,this.headingLeftControl,this.headingRightControl,this.tiltUpControl,this.tiltDownControl,this.exaggerationUpControl,this.exaggerationDownControl,this.fovNarrowControl,this.fovWideControl];for(var l=0;l<this.controls.length;l++)this.controls[l].imageOffset=r.clone(),this.controls[l].opacity=this._inactiveOpacity,this.controls[l]===this.panControl?this.controls[l].size=64:this.controls[l].size=32;this.panControlCenter=new s(0,0),this.pickEnabled=!1,this.wwd.worldWindowController.addGestureListener(this)};return u.prototype=Object.create(n.prototype),Object.defineProperties(u.prototype,{showPanControl:{get:function(){return this.panControl.enabled},set:function(t){this.panControl.enabled=t}},showZoomControl:{get:function(){return this.zoomInControl.enabled},set:function(t){this.zoomInControl.enabled=t,this.zoomOutControl.enabled=t}},showHeadingControl:{get:function(){return this.headingLeftControl.enabled},set:function(t){this.headingLeftControl.enabled=t,this.headingRightControl.enabled=t}},showTiltControl:{get:function(){return this.tiltUpControl.enabled},set:function(t){this.tiltUpControl.enabled=t,this.tiltDownControl.enabled=t}},showExaggerationControl:{get:function(){return this.exaggerationUpControl.enabled},set:function(t){this.exaggerationUpControl.enabled=t,this.exaggerationDownControl.enabled=t}},showFieldOfViewControl:{get:function(){return this.fovNarrowControl.enabled},set:function(t){this.fovNarrowControl.enabled=t,this.fovWideControl.enabled=t}},inactiveOpacity:{get:function(){return this._inactiveOpacity},set:function(t){this._inactiveOpacity=t;for(var e=0;e<this.controls.length;e++)this.controls[e].opacity=t}},activeOpacity:{get:function(){return this._activeOpacity},set:function(t){this._activeOpacity=t;for(var e=0;e<this.controls.length;e++)this.controls[e].opacity=t}}}),u.prototype.doRender=function(t){var e,n,r,i,o=0;this.inCurrentFrame=!1,this.showPanControl&&(o+=this.panControl.size,this.inCurrentFrame=!0),this.showZoomControl&&(o+=this.zoomInControl.size,this.inCurrentFrame=!0),this.showHeadingControl&&(o+=this.headingLeftControl.size,this.inCurrentFrame=!0),this.showTiltControl&&(o+=this.tiltDownControl.size,this.inCurrentFrame=!0),this.showExaggerationControl&&(o+=this.exaggerationDownControl.size,this.inCurrentFrame=!0),this.showFieldOfViewControl&&(o+=this.fovNarrowControl.size,this.inCurrentFrame=!0),n=this.placement.offsetForSize(t.viewport.width,t.viewport.height),e=this.alignment.offsetForSize(o,64),r=n[0]-e[0],i=n[1]-e[1],this.showPanControl&&(this.panControl.screenOffset.x=r,this.panControl.screenOffset.y=i,this.panControl.render(t),this.panControlCenter[0]=r+this.panControl.size/2,this.panControlCenter[1]=i+this.panControl.size/2,r+=this.panControl.size),this.showZoomControl&&(this.zoomOutControl.screenOffset.x=r,this.zoomOutControl.screenOffset.y=i,this.zoomInControl.screenOffset.x=r,this.zoomInControl.screenOffset.y=i+this.zoomOutControl.size,this.zoomOutControl.render(t),this.zoomInControl.render(t),r+=this.zoomOutControl.size),this.showHeadingControl&&(this.headingRightControl.screenOffset.x=r,this.headingRightControl.screenOffset.y=i,this.headingLeftControl.screenOffset.x=r,this.headingLeftControl.screenOffset.y=i+this.headingLeftControl.size,this.headingRightControl.render(t),this.headingLeftControl.render(t),r+=this.headingLeftControl.size),this.showTiltControl&&(this.tiltDownControl.screenOffset.x=r,this.tiltDownControl.screenOffset.y=i,this.tiltUpControl.screenOffset.x=r,this.tiltUpControl.screenOffset.y=i+this.tiltDownControl.size,this.tiltDownControl.render(t),this.tiltUpControl.render(t),r+=this.tiltDownControl.size),this.showExaggerationControl&&(this.exaggerationDownControl.screenOffset.x=r,this.exaggerationDownControl.screenOffset.y=i,this.exaggerationUpControl.screenOffset.x=r,this.exaggerationUpControl.screenOffset.y=i+this.exaggerationDownControl.size,this.exaggerationUpControl.render(t),this.exaggerationDownControl.render(t),r+=this.exaggerationDownControl.size),this.showFieldOfViewControl&&(this.fovNarrowControl.screenOffset.x=r,this.fovNarrowControl.screenOffset.y=i,this.fovWideControl.screenOffset.x=r,this.fovWideControl.screenOffset.y=i+this.fovNarrowControl.size,this.fovNarrowControl.render(t),this.fovWideControl.render(t))},u.prototype.isPointerDown=function(t){return"pointerdown"===t.type||"mousedown"===t.type&&1===t.which},u.prototype.isPointerUp=function(t){return"pointerup"===t.type||"mouseup"===t.type&&1===t.which},u.prototype.isPointerMove=function(t){return"pointermove"===t.type||"mousemove"===t.type},u.prototype.isTouchStart=function(t){return"touchstart"===t.type},u.prototype.isTouchEnd=function(t){return"touchend"===t.type||"touchcancel"===t.type},u.prototype.isTouchMove=function(t){return"touchmove"===t.type},u.prototype.onGestureEvent=function(t){var e,n=!1;if(!this.enabled)return n;this.highlightedControl&&(this.highlight(this.highlightedControl,!1),this.wwd.redraw());var r=!1;if(t.type&&this.activeControl&&(this.isPointerUp(t)||this.isTouchEnd(t)&&this.isCurrentTouch(t)?r=!0:(e=this.pickControl(t),this.activeControl!==e&&(r=!0))),r)this.activeControl=null,this.activeOperation=null,t.preventDefault();else{if(this.activeOperation)n=this.activeOperation.call(this,t,null),t.preventDefault();else if(e=this.pickControl(t)){var i=this.determineOperation(t,e);i&&(n=i.call(this,t,e))}this.handleHighlight(t,e),this.wwd.redraw()}return n},u.prototype.isControl=function(t){for(var e=0;e<this.controls.length;e++)if(this.controls[e]==t)return!0;return!1},u.prototype.pickControl=function(t){var e,n;if(t.changedTouches){var r=t.changedTouches.item(0);e=r.clientX,n=r.clientY}else e=t.clientX,n=t.clientY;for(var i,o=this.wwd.canvasCoordinates(e,n),a=o[0],s=this.wwd.canvas.height-o[1],u=0;u<this.controls.length;u++)if((i=this.controls[u]).enabled&&a>=i.screenOffset.x&&a<=i.screenOffset.x+i.size&&s>=i.screenOffset.y&&s<=i.screenOffset.y+i.size)return i;return null},u.prototype.determineOperation=function(t,e){var n=null;return e&&e instanceof a&&(e===this.panControl?n=this.handlePan:e===this.zoomInControl||e===this.zoomOutControl?n=this.handleZoom:e===this.headingLeftControl||e===this.headingRightControl?n=this.handleHeading:e===this.tiltUpControl||e===this.tiltDownControl?n=this.handleTilt:e===this.exaggerationUpControl||e===this.exaggerationDownControl?n=this.handleExaggeration:e!==this.fovNarrowControl&&e!==this.fovWideControl||(n=this.handleFov)),n},u.prototype.isCurrentTouch=function(t){for(var e=0;e<t.changedTouches.length;e++)if(t.changedTouches.item(e).identifier===this.currentTouchId)return!0;return!1},u.prototype.handlePan=function(e,n){var i=!1;if(this.isPointerDown(e)||this.isPointerMove(e))this.currentEventPoint=this.wwd.canvasCoordinates(e.clientX,e.clientY);else if(this.isTouchStart(e)||this.isTouchMove(e)){var o=e.changedTouches.item(0);this.currentEventPoint=this.wwd.canvasCoordinates(o.clientX,o.clientY)}if(this.isPointerDown(e)||this.isTouchStart(e)){this.activeControl=n,this.activeOperation=this.handlePan,e.preventDefault(),this.isTouchStart(e)&&(this.currentTouchId=e.changedTouches.item(0).identifier);var a=this;setTimeout((function e(){if(a.activeControl){var n=a.panControlCenter[0]-a.currentEventPoint[0],i=a.panControlCenter[1]-(a.wwd.viewport.height-a.currentEventPoint[1]),o=a.wwd.navigator.lookAtLocation.latitude,s=a.wwd.navigator.lookAtLocation.longitude,u=a.panIncrement*(a.wwd.navigator.range/a.wwd.globe.radiusAt(o,s)),l=a.wwd.navigator.heading+Math.atan2(n,i)*t.RADIANS_TO_DEGREES,c=u*Math.sqrt(n*n+i*i);r.greatCircleLocation(a.wwd.navigator.lookAtLocation,l,-c,a.wwd.navigator.lookAtLocation),a.wwd.redraw(),setTimeout(e,50)}}),50),i=!0}return i},u.prototype.handleZoom=function(t,e){var n=!1;if(this.isPointerDown(t)||this.isTouchStart(t)){this.activeControl=e,this.activeOperation=this.handleZoom,t.preventDefault(),this.isTouchStart(t)&&(this.currentTouchId=t.changedTouches.item(0).identifier);var r=this;setTimeout((function t(){r.activeControl&&(r.activeControl===r.zoomInControl?r.wwd.navigator.range*=1-r.zoomIncrement:r.activeControl===r.zoomOutControl&&(r.wwd.navigator.range*=1+r.zoomIncrement),r.wwd.redraw(),setTimeout(t,50))}),50),n=!0}return n},u.prototype.handleHeading=function(t,e){var n=!1;if(this.isPointerDown(t)||this.isTouchStart(t)){this.activeControl=e,this.activeOperation=this.handleHeading,t.preventDefault(),this.isTouchStart(t)&&(this.currentTouchId=t.changedTouches.item(0).identifier);var r=this;setTimeout((function t(){r.activeControl&&(r.activeControl===r.headingLeftControl?r.wwd.navigator.heading+=r.headingIncrement:r.activeControl===r.headingRightControl&&(r.wwd.navigator.heading-=r.headingIncrement),r.wwd.redraw(),setTimeout(t,50))}),50),n=!0}return n},u.prototype.handleTilt=function(t,e){var n=!1;if(this.isPointerDown(t)||this.isTouchStart(t)){this.activeControl=e,this.activeOperation=this.handleTilt,t.preventDefault(),this.isTouchStart(t)&&(this.currentTouchId=t.changedTouches.item(0).identifier);var r=this;setTimeout((function t(){r.activeControl&&(r.activeControl===r.tiltUpControl?r.wwd.navigator.tilt=Math.max(0,r.wwd.navigator.tilt-r.tiltIncrement):r.activeControl===r.tiltDownControl&&(r.wwd.navigator.tilt=Math.min(90,r.wwd.navigator.tilt+r.tiltIncrement)),r.wwd.redraw(),setTimeout(t,50))}),50),n=!0}return n},u.prototype.handleExaggeration=function(t,e){var n=!1;if(this.isPointerDown(t)||this.isTouchStart(t)){this.activeControl=e,this.activeOperation=this.handleExaggeration,t.preventDefault(),this.isTouchStart(t)&&(this.currentTouchId=t.changedTouches.item(0).identifier);var r=this;setTimeout((function t(){r.activeControl&&(r.activeControl===r.exaggerationUpControl?r.wwd.verticalExaggeration+=r.exaggerationIncrement:r.activeControl===r.exaggerationDownControl&&(r.wwd.verticalExaggeration=Math.max(1,r.wwd.verticalExaggeration-r.exaggerationIncrement)),r.wwd.redraw(),setTimeout(t,50))}),50),n=!0}return n},u.prototype.handleFov=function(t,e){var n=!1;if(this.isPointerDown(t)||this.isTouchStart(t)){this.activeControl=e,this.activeOperation=this.handleFov,t.preventDefault(),this.isTouchStart(t)&&(this.currentTouchId=t.changedTouches.item(0).identifier);var r=this;setTimeout((function t(){r.activeControl&&(r.activeControl===r.fovWideControl?r.wwd.navigator.fieldOfView=Math.max(90,r.wwd.navigator.fieldOfView+r.fieldOfViewIncrement):r.activeControl===r.fovNarrowControl&&(r.wwd.navigator.fieldOfView=Math.min(0,r.wwd.navigator.fieldOfView-r.fieldOfViewIncrement)),r.wwd.redraw(),setTimeout(t,50))}),50),n=!0}return n},u.prototype.handleHighlight=function(t,e){this.activeControl?this.highlight(this.activeControl,!0):e&&this.isControl(e)&&this.highlight(e,!0)},u.prototype.highlight=function(t,e){t.opacity=e?this._activeOpacity:this._inactiveOpacity,this.highlightedControl=e?t:null},u})),i("ogc/ows/OwsBoundingBox",["../../error/ArgumentError","../../util/Logger","../../geom/Sector"],(function(t,e,n){"use strict";var r=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"OwsBoundingBox","constructor","missingDomElement"));this.assembleElement(n)};return r.prototype.assembleElement=function(t){this.crs="WGS84BoundingBox"===t.localName?"WGS84":t.getAttribute("crs"),this.dimensions=t.getAttribute("dimensions");for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n];"LowerCorner"===r.localName?this.lowerCorner=r.textContent:"UpperCorner"===r.localName&&(this.upperCorner=r.textContent)}},r.prototype.getSector=function(){var t,e,r,i,o;return-1!==this.crs.indexOf("WGS84")||-1!==this.crs.indexOf("EPSG:4326")?(e=(o=this.lowerCorner.split(/\s+/))[0],t=o[1],i=(o=this.upperCorner.split(/\s+/))[0],r=o[1],new n(t,r,e,i)):null},r})),i("ogc/ows/OwsKeywords",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsLanguageString"],(function(t,e,n){"use strict";return function(r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"OwsKeywords","constructor","missingDomElement"));for(var i=r.children||r.childNodes,o=0;o<i.length;o++){var a=i[o];"keyword"===a.localName&&(this.keywords=this.keywords||[],this.keywords.push(new n(a)))}}})),i("ogc/ows/OwsDatasetSummary",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsBoundingBox","../../ogc/ows/OwsKeywords","../../ogc/ows/OwsLanguageString"],(function(t,e,n,r,i){"use strict";var o=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"OwsDatasetSummary","constructor","missingDomElement"));this.assembleElement(n)};return o.prototype.assembleElement=function(t){for(var e=t.children||t.childNodes,o=0;o<e.length;o++){var a=e[o];"Title"===a.localName?(this.titles=this.titles||[],this.titles.push(new i(a))):"Abstract"===a.localName?(this.abstracts=this.abtracts||[],this.abstracts.push(new i(a))):"Keywords"===a.localName?(this.keywords=this.keywords||[],this.keywords.push(new r(a))):"Identifier"===a.localName?this.identifier=a.textContent:"WGS84BoundingBox"===a.localName?this.wgs84BoundingBox=new n(a):"BoundingBox"===a.localName?(this.boundingBox=this.boundingBox||[],this.boundingBox.push(new n(a))):"OutputFormat"===a.localName?(this.outputFormat=this.outputFormat||[],this.outputFormat.push(a.textContent)):"AvailableCRS"===a.localName&&(this.availableCrs=this.availableCrs||[],this.availableCRS.push(a.textContent))}},o})),i("ogc/wcs/WcsCapabilities",["../../error/ArgumentError","../../util/Logger","../../ogc/ows/OwsDatasetSummary","../../ogc/ows/OwsKeywords","../../ogc/ows/OwsOperationsMetadata","../../ogc/ows/OwsServiceIdentification","../../ogc/ows/OwsServiceProvider"],(function(t,e,n,r,i,o,a){"use strict";var s=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WcsCapabilities","constructor","missingDom"));this.xmlDom=n,this.assembleDocument()};return s.prototype.getCoverageBaseUrl=function(){return"1.0.0"===this.version?this.capability.request.getCoverage.get:"2.0.1"===this.version||"2.0.0"===this.version?this.operationsMetadata.getOperationMetadataByName("GetCoverage").dcp[0].getMethods[0].url:null},s.prototype.assembleDocument=function(){var n=this.xmlDom.documentElement;if(this.version=n.getAttribute("version"),this.updateSequence=n.getAttribute("updateSequence"),"1.0.0"===this.version)this.assembleDocument100(n);else{if("2.0.0"!==this.version&&"2.0.1"!==this.version)throw new t(e.logMessage(e.LEVEL_SEVERE,"WcsCapabilities","assembleDocument","unsupportedVersion"));this.assembleDocument20x(n)}},s.prototype.assembleDocument100=function(t){for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n];"Service"===r.localName?this.service=this.assembleService100(r):"Capability"===r.localName?this.capability=this.assembleCapability100(r):"ContentMetadata"===r.localName&&this.assembleContents100(r)}},s.prototype.assembleDocument20x=function(t){for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n];"ServiceIdentification"===r.localName?this.serviceIdentification=new o(r):"ServiceProvider"===r.localName?this.serviceProvider=new a(r):"OperationsMetadata"===r.localName?this.operationsMetadata=new i(r):"ServiceMetadata"===r.localName?this.serviceMetadata=this.assembleServiceMetadata(r):"Contents"===r.localName&&this.assembleContents20x(r)}},s.prototype.assembleContents100=function(t){for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n];"CoverageOfferingBrief"===r.localName&&(this.coverages=this.coverages||[],this.coverages.push(this.assembleCoverages100(r)))}},s.prototype.assembleContents20x=function(t){for(var e,r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];"CoverageSummary"===o.localName&&(e=new n(o),this.assembleDatasetAugment20x(o,e),this.coverages=this.coverages||[],this.coverages.push(e))}},s.prototype.assembleDatasetAugment20x=function(t,e){for(var n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"CoverageId"===i.localName?e.coverageId=i.textContent:"CoverageSubtype"===i.localName&&(e.subType=e.subType||[],e.subType.push(i.textContent))}},s.prototype.assembleCoverages100=function(t){for(var e=t.children||t.childNodes,n={},i=0;i<e.length;i++){var o=e[i];"name"===o.localName?n.name=o.textContent:"description"===o.localName?n.description=o.textContent:"label"===o.localName?n.label=o.textContent:"Keywords"===o.localName?(n.keywords=n.keywords||[],n.keywords.push(new r(o))):"lonLatEnvelope"===o.localName&&(n.wgs84BoundingBox=this.assembleLatLonBoundingBox(o))}return n},s.prototype.assembleService100=function(t){for(var e=t.children||t.childNodes,n={},i=0;i<e.length;i++){var o=e[i];"description"===o.localName?n.description=o.textContent:"name"===o.localName?n.name=o.textContent:"label"===o.localName?n.label=o.textContent:"fees"===o.localName?n.fees=o.textContent:"accessConstraints"===o.localName?(n.accessConstraints=n.accessConstraints||[],n.accessConstraints.push(o.textContent)):"Keywords"===o.localName&&(n.keywords=new r(o))}return n},s.prototype.assembleCapability100=function(t){for(var e=t.children||t.childNodes,n={},r=0;r<e.length;r++){var i=e[r];"Request"===i.localName?n.request=this.assembleRequestCapabilities100(i):"Exception"===i.localName&&(i=(i=i.children||i.childNodes)[0],n.exception=n.exception||[],n.exception.push(i.textContent))}return n},s.prototype.assembleRequestCapabilities100=function(t){for(var e=t.children||t.childNodes,n={},r=0;r<e.length;r++){var i=e[r];"GetCapabilities"===i.localName?n.getCapabilities=this.assembleDCPType100(i):"DescribeCoverage"===i.localName?n.describeCoverage=this.assembleDCPType100(i):"GetCoverage"===i.localName&&(n.getCoverage=this.assembleDCPType100(i))}return n},s.prototype.assembleDCPType100=function(t){for(var e=t.children||t.childNodes,n={},r=0;r<e.length;r++){var i=e[r];"DCPType"===i.localName&&this.assembleHttp100(i,n)}return n},s.prototype.assembleHttp100=function(t,e){for(var n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];if("HTTP"===i.localName)return this.assembleMethod100(i,e)}},s.prototype.assembleMethod100=function(t,e){for(var n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Get"===i.localName?e.get=this.assembleOnlineResource100(i):"Post"===i.localName&&(e.post=this.assembleOnlineResource100(i))}},s.prototype.assembleOnlineResource100=function(t){for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n];if("OnlineResource"===r.localName)return r.getAttribute("xlink:href")}},s.prototype.assembleLatLonBoundingBox=function(t){for(var e,n,r=t.children||t.childNodes,i={},o=0;o<r.length;o++){var a=r[o];"pos"===a.localName&&(e?n<parseFloat(a.textContent.split(/\s+/)[0])?(i.lowerCorner=e,i.upperCorner=a.textContent):(i.lowerCorner=a.textContent,i.upperCorner=e):(e=a.textContent,n=parseFloat(e.split(/\s+/)[0])))}return i},s.prototype.assembleServiceMetadata=function(t){for(var e=t.children||t.childNodes,n={},r=0;r<e.length;r++){var i=e[r];"formatSupported"===i.localName?(n.formatsSupported=n.formatsSupported||[],n.formatsSupported.push(i.textContent)):"Extension"===i.localName&&(n.extension=this.assembleServiceMetadataExtension(i))}return n},s.prototype.assembleServiceMetadataExtension=function(t){for(var e=t.children||t.childNodes,n=e.length,r={},i=0;i<n;i++){var o=e[i];"crsSupported"===o.localName?(r.crsSupported=r.crsSupported||[],r.crsSupported.push(o.textContent)):"interpolationSupported"===o.localName&&(r.interpolationSupported=r.interpolationSupported||[],r.interpolationSupported.push(o.textContent))}return r},s})),i("ogc/wcs/WcsUrlBuilder",["../../error/ArgumentError","../../util/Logger"],(function(t,e){"use strict";var n=function(n,r){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WcsUrlBuilder","constructor","missingId"));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"WcsUrlBuilder","constructor","missingWebCoverageService"));this.coverageId=n,this.service=r};return n.prototype.urlForTile=function(n,r){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WcsUrlBuilder","urlForTile","missingTile"));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"WcsUrlBuilder","urlForTile","The specified format is null or undefined."));var i=this.service.capabilities.version,o=this.fixGetCoverageString(this.service.capabilities.getCoverageBaseUrl());return o+="SERVICE=WCS",o+="&REQUEST=GetCoverage","1.0.0"===i?this.buildUrl100(n,r,o):"2.0.1"===i||"2.0.0"===i?this.buildUrl20x(n,r,o):void 0},n.prototype.buildUrl100=function(t,e,n){var r=t.sector;return n+="&VERSION=1.0.0",n+="&COVERAGE="+this.coverageId,n+="&CRS=EPSG:4326",n+="&WIDTH="+t.tileWidth,n+="&HEIGHT="+t.tileHeight,n+="&FORMAT="+e,n+="&BBOX="+r.minLongitude+","+r.minLatitude+","+r.maxLongitude+","+r.maxLatitude,encodeURI(n)},n.prototype.buildUrl20x=function(t,e,n){for(var r,i,o,a,s,u=t.sector,l=0,c=this.service.coverageDescriptions.coverages.length;l<c;l++)if(this.coverageId===this.service.coverageDescriptions.coverages[l].coverageId){o=this.service.coverageDescriptions.coverages[l];break}return a=o.domainSet.rectifiedGrid.axisLabels,(s=o.boundedBy.envelope.axisLabels)[0].toLowerCase().indexOf("lat")>=0?(r=s[0],i=s[1]):(r=s[1],i=s[0]),n+="&VERSION="+this.service.capabilities.version,n+="&COVERAGEID="+this.coverageId,n+="&FORMAT="+e,n+="&SCALESIZE="+a[0]+"("+t.tileWidth+"),",n+=a[1]+"("+t.tileHeight+")",n+="&OVERVIEWPOLICY=NEAREST",n+="&SUBSET="+r+"("+u.minLatitude+","+u.maxLatitude+")",n+="&SUBSET="+i+"("+u.minLongitude+","+u.maxLongitude+")",encodeURI(n)},n.prototype.fixGetCoverageString=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WmsUrlBuilder","fixGetMapString","The specified service address is null or undefined."));var r=n.indexOf("?");return r<0?n+="?":r!==n.length-1&&(r=n.search(/&$/))<0&&(n+="&"),n},n})),i("ogc/wcs/WcsCoverage",["../../error/ArgumentError","../../util/Logger","../../ogc/wcs/WcsUrlBuilder"],(function(t,e,n){"use strict";var r=function(n,r){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WcsCoverage","constructor","missingId"));if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"WcsCoverage","constructor","missingWebCoverageService"));this.coverageId=n,this.service=r,this.sector=this.service.coverageDescriptions.getSector(this.coverageId),this.resolution=this.service.coverageDescriptions.getResolution(this.coverageId),this.elevationConfig=this.createElevationConfig()};return r.PREFERRED_FORMATS={GeoTIFF:!0,"image/tiff":!0,TIFF:!0},r.DEFAULT_FORMAT="image/tiff",r.prototype.createElevationConfig=function(){return{resolution:this.resolution,coverageSector:this.sector,retrievalImageFormat:this.determineFormatFromService(),urlBuilder:new n(this.coverageId,this.service)}},r.prototype.determineFormatFromService=function(){var t,e,n,i=this.service.capabilities.version;if("1.0.0"===i){for(e=0,n=this.service.coverageDescriptions.coverages.length;e<n;e++)if(this.coverageId===this.service.coverageDescriptions.coverages[e].name){t=this.service.coverageDescriptions.coverages[e].supportedFormats.formats;break}}else"2.0.1"!==i&&"2.0.0"!==i||(t=this.service.capabilities.serviceMetadata.formatsSupported);if(!t)return r.DEFAULT_FORMAT;for(e=0,n=t.length;e<n;e++)if(r.PREFERRED_FORMATS.hasOwnProperty(t[e]))return t[e];return r.DEFAULT_FORMAT},r})),i("ogc/gml/GmlBoundedBy",["../../error/ArgumentError","../../util/Logger"],(function(t,e){"use strict";var n=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"GmlAbstractGeometry","constructor","missingDom"));this.assembleElement(n)};return n.prototype.assembleElement=function(t){var e=t.children||t.childNodes;this.nilReason=t.getAttribute("nilReason");for(var n=0;n<e.length;n++){var r=e[n];"Envelope"===r.localName&&(this.envelope=this.assembleEnvelope(r))}},n.prototype.assembleEnvelope=function(t){var e=t.children||t.childNodes,n={};n.srsName=t.getAttribute("srsName"),n.srsDimension=parseInt(t.getAttribute("srsDimension")),n.axisLabels=t.getAttribute("axisLabels"),n.axisLabels&&(n.axisLabels=n.axisLabels.split(/\s+/)),n.uomLabels=t.getAttribute("uomLabels"),n.uomLabels&&(n.uomLabels=n.uomLabels.split(/\s+/));for(var r=0;r<e.length;r++){var i=e[r];if("lowerCorner"===i.localName){n.lower=i.textContent.split(/\s+/);for(var o=0;o<n.lower.length;o++)n.lower[o]=parseFloat(n.lower[o])}else if("upperCorner"===i.localName)for(n.upper=i.textContent.split(/\s+/),o=0;o<n.upper.length;o++)n.upper[o]=parseFloat(n.upper[o])}return n},n})),i("ogc/gml/GmlRectifiedGrid",["../../error/ArgumentError","../../util/Logger"],(function(t,e){"use strict";var n=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"GmlRectifiedGrid","constructor","missingDom"));this.assembleElement(n)};return n.prototype.assembleElement=function(t){var e=t.children||t.childNodes;this.captureAttributes(t);for(var n=0;n<e.length;n++){var r=e[n];"description"===r.localName?this.description=r.textContent:"descriptionReference"===r.localName?this.descriptionReference=r.getAttribute("xlink:href"):"identifier"===r.localName?this.identifier=r.textContent:"name"===r.localName?(this.names=this.names||[],this.names.push(r.textContent)):"limits"===r.localName?this.limits=this.assembleLimits(r):"axisLabels"===r.localName?this.axisLabels=r.textContent.split(/\s+/):"axisName"===r.localName?(this.axisNames=this.axisNames||[],this.axisNames.push(r.textContent)):"origin"===r.localName?this.origin=this.assembleOrigin(r):"offsetVector"===r.localName&&(this.offsetVector=this.offsetVector||[],this.offsetVector.push(this.assembleOffsetVector(r)))}},n.prototype.captureAttributes=function(t){this.id=t.getAttribute("gml:id"),this.srsName=t.getAttribute("srsName"),this.srsDimension=t.getAttribute("srsDimension"),this.axisLabels=t.getAttribute("axisLabels"),this.axisLabels&&(this.axisLabels=this.axisLabels.split(/\s+/)),this.uomLabels=t.getAttribute("uomLabels"),this.uomLabels&&(this.uomLabels=this.uomLabels.split(/\s+/)),this.dimension=parseInt(t.getAttribute("dimension"))},n.prototype.assembleLimits=function(t){for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n];if("GridEnvelope"===r.localName)return this.assembleGridEnvelope(r)}},n.prototype.assembleGridEnvelope=function(t){for(var e=t.children||t.childNodes,n={},r=0;r<e.length;r++){var i=e[r];n[i.localName]=i.textContent.split(/\s+/)}return n},n.prototype.assembleOrigin=function(t){var e={};e.type=t.getAttribute("xlink:type"),e.href=t.getAttribute("xlink:href"),e.role=t.getAttribute("xlink:role"),e.arcrole=t.getAttribute("xlink:arcrole"),e.title=t.getAttribute("xlink:title"),e.show=t.getAttribute("xlink:show"),e.actuate=t.getAttribute("xlink:actuate"),e.nilReason=t.getAttribute("nilReason"),e.remoteSchema=t.getAttribute("gml:remoteSchema"),e.owns=t.getAttribute("owns");for(var n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Point"===i.localName?e.point=this.assemblePoint(i):"pos"===i.localName&&(e.pos=this.assemblePos(i))}return e},n.prototype.assemblePoint=function(t){var e={};e.id=t.getAttribute("gml:id"),e.srsName=t.getAttribute("srsName"),e.srsDimension=t.getAttribute("srsDimension"),e.axisLabels=t.getAttribute("axisLabels"),e.axisLabels&&(e.axisLabels=e.axisLabels.split(/\s+/)),e.uomLabels=t.getAttribute("uomLabels"),e.uomLabels&&(e.uomLabels=e.uomLabels.split(/\s+/));for(var n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"description"===i.localName?e.description=i.textContent:"descriptionReference"===i.localName?e.descriptionReference=this.assembleOrigin(i):"identifier"===i.localName?e.identifier=i.textContent:"name"===i.localName?e.name=i.textContent:"pos"===i.localName&&(e.pos=this.assemblePos(i))}return e},n.prototype.assemblePos=function(t){var e={};if(e.srsName=t.getAttribute("srsName"),e.srsDimension=parseInt(t.getAttribute("srsDimension")),e.axisLabels=t.getAttribute("axisLabels"),e.axisLabels&&(e.axisLabels=e.axisLabels.split(/\s+/)),e.uomLabels=t.getAttribute("uomLabels"),e.uomLabels&&(e.uomLabels=e.uomLabels.split(/\s+/)),e.pos=t.textContent,e.pos){e.pos=e.pos.split(/\s+/);for(var n=0;n<e.pos.length;n++)e.pos[n]=parseFloat(e.pos[n])}return e},n.prototype.assembleOffsetVector=function(t){var e,n=(t.children||t.childNodes,{});n.srsName=t.getAttribute("srsName"),n.srsDimension=parseInt(t.getAttribute("srsDimension")),n.axisLabels=t.getAttribute("axisLabels"),n.axisLabels&&(n.axisLabels=n.axisLabels.split(/\s+/)),n.uomLabels=t.getAttribute("uomLabels"),n.uomLabels&&(n.uomLabels=n.uomLabels.split(/\s+/)),e=t.textContent.split(/\s+/),n.values=[];for(var r=0;r<e.length;r++)n.values.push(parseFloat(e[r]));return n},n})),i("ogc/gml/GmlDomainSet",["../../error/ArgumentError","../../ogc/gml/GmlRectifiedGrid","../../util/Logger"],(function(t,e,n){"use strict";var r=function(e){if(!e)throw new t(n.logMessage(n.LEVEL_SEVERE,"GmlAbstractGeometry","constructor","missingDom"));this.assembleElement(e)};return r.prototype.assembleElement=function(t){for(var n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"RectifiedGrid"===i.localName&&(this.rectifiedGrid=new e(i))}},r})),i("ogc/wcs/WcsCoverageDescriptions",["../../error/ArgumentError","../../ogc/gml/GmlBoundedBy","../../ogc/gml/GmlDomainSet","../../ogc/gml/GmlRectifiedGrid","../../util/Logger","../../ogc/ows/OwsKeywords","../../geom/Sector"],(function(t,e,n,r,i,o,a){"use strict";var s=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"WcsCoverageDescriptions","constructor","missingDom"));this.xmlDom=e,this.assembleDocument()};return s.prototype.getSector=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"WcsCoverageDescriptions","getSector","missingId"));var n,r=this.getCoverage(e);return r?"1.0.0"===this.version?(n=r.lonLatEnvelope.pos,new a(n[0][1],n[1][1],n[0][0],n[1][0])):"2.0.1"===this.version||"2.0.0"===this.version?(n=r.boundedBy.envelope,new a(n.lower[0],n.upper[0],n.lower[1],n.upper[1])):null:null},s.prototype.getResolution=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"WcsCoverageDescriptions","getResolution","missingId"));var n,r,o,a,s,u,l=this.getCoverage(e),c=this.getSector(e);return l?("1.0.0"===this.version?(n=l.domainSet.spatialDomain.rectifiedGrid.limits.low[0],r=l.domainSet.spatialDomain.rectifiedGrid.limits.low[1],o=l.domainSet.spatialDomain.rectifiedGrid.limits.high[0],a=l.domainSet.spatialDomain.rectifiedGrid.limits.high[1]):"2.0.1"!==this.version&&"2.0.0"!==this.version||(n=l.domainSet.rectifiedGrid.limits.low[0],r=l.domainSet.rectifiedGrid.limits.low[1],o=l.domainSet.rectifiedGrid.limits.high[0],a=l.domainSet.rectifiedGrid.limits.high[1]),s=c.deltaLongitude()/(o-n),u=c.deltaLatitude()/(a-r),Math.max(s,u)):null},s.prototype.getSupportedCrs=function(e){if(!e)throw new t(i.logMessage(i.LEVEL_SEVERE,"WcsCoverageDescriptions","getSupportedCrs","missingId"));var n=this.getCoverage(e),r=[];return n?"1.0.0"===this.version?n.supportedCrs.requests:"2.0.1"===this.version||"2.0.0"===this.version?(r.push(n.boundedBy.envelope.srsName),r):null:null},s.prototype.getCoverage=function(t){for(var e=0,n=this.coverages.length;e<n;e++)if(t===(this.coverages[e].coverageId||this.coverages[e].name))return this.coverages[e];return null},s.prototype.assembleDocument=function(){var e=this.xmlDom.documentElement;if("CoverageDescription"===e.localName)this.assembleDocument100(e),this.version="1.0.0";else{if("CoverageDescriptions"!==e.localName)throw new t(i.logMessage(i.LEVEL_SEVERE,"WcsCapabilities","assembleDocument","unsupportedVersion"));this.assembleDocument20x(e),this.version=e.getAttribute("version")||"2.0.1"}},s.prototype.assembleDocument100=function(t){this.version=t.getAttribute("version");for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n];"CoverageOffering"===r.localName&&(this.coverages=this.coverages||[],this.coverages.push(this.assembleCoverages100(r)))}},s.prototype.assembleDocument20x=function(t){for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n];"CoverageDescription"===r.localName&&(this.coverages=this.coverages||[],this.coverages.push(this.assembleCoverages20x(r)))}},s.prototype.assembleCoverages100=function(t){for(var e=t.children||t.childNodes,n={},r=0;r<e.length;r++){var i=e[r];"name"===i.localName?n.name=i.textContent:"description"===i.localName?n.description=i.textContent:"label"===i.localName?n.label=i.textContent:"keywords"===i.localName?n.keywords=new o(i).keywords:"lonLatEnvelope"===i.localName?n.lonLatEnvelope=this.assembleLonLatEnvelope100(i):"supportedCRSs"===i.localName?n.supportedCrs=this.assembleSupportedCrs100(i):"supportedFormats"===i.localName?n.supportedFormats=this.assembleSupportedFormats100(i):"supportedInterpolations"===i.localName?n.supportedInterpolations=this.assembleSupportedInterpolations100(i):"domainSet"===i.localName?n.domainSet=this.assembleDomainSet100(i):"rangeSet"===i.localName&&(n.rangeSet=this.assembleRangeSet100(i))}return n},s.prototype.assembleCoverages20x=function(t){for(var r=t.children||t.childNodes,i={},o=0;o<r.length;o++){var a=r[o];"CoverageId"===a.localName?i.coverageId=a.textContent:"domainSet"===a.localName?i.domainSet=new n(a):"boundedBy"===a.localName?i.boundedBy=new e(a):"ServiceParameters"===a.localName?i.serviceParameters=this.assembleServiceParameters20x(a):"rangeType"===a.localName&&(i.rangeType=a)}return i},s.prototype.assembleServiceParameters20x=function(t){for(var e=t.children||t.childNodes,n={},r=0;r<e.length;r++){var i=e[r];"nativeFormat"===i.localName?n.nativeFormat=i.textContent:"CoverageSubtype"===i.localName&&(n.coverageSubtype=i.textContent)}return n},s.prototype.assembleLonLatEnvelope100=function(t){var e=t.children||t.childNodes,n={};n.srsName=t.getAttribute("srsName");for(var r=0;r<e.length;r++){var i=e[r];"pos"===i.localName&&(n.pos=n.pos||[],n.pos.push(s.parseSpacedFloatArray(i.textContent)))}return n},s.prototype.assembleSupportedCrs100=function(t){for(var e=t.children||t.childNodes,n={},r=0;r<e.length;r++){var i=e[r];"requestResponseCRSs"===i.localName?(n.requests=n.requests||[],n.requests.push(i.textContent),n.responses=n.responses||[],n.responses.push(i.textContent)):"requestCRSs"===i.localName?(n.requests=n.requests||[],n.push(i.textContent)):"responseCRSs"===i.localName?(n.responses=n.responses||[],n.push(i.textContent)):"NativeCRSs"===i.localName&&(n.nativeCrs=n.nativeCrs||[],n.push(i.textContent))}return n},s.prototype.assembleSupportedFormats100=function(t){var e=t.children||t.childNodes,n={};n.nativeFormat=t.getAttribute("nativeFormat");for(var r=0;r<e.length;r++){var i=e[r];"formats"===i.localName&&(n.formats=n.formats||[],n.formats.push(i.textContent))}return n},s.prototype.assembleSupportedInterpolations100=function(t){var e=t.children||t.childNodes,n={};n.default=t.getAttribute("default");for(var r=0;r<e.length;r++){var i=e[r];"interpolationMethod"===i.localName&&(n.methods=n.methods||[],n.methods.push(i.textContent))}return n},s.prototype.assembleDomainSet100=function(t){for(var e=t.children||t.childNodes,n={},r=0;r<e.length;r++){var i=e[r];"spatialDomain"===i.localName&&(n.spatialDomain=this.assembleSpatialDomain100(i))}return n},s.prototype.assembleSpatialDomain100=function(t){for(var e=t.children||t.childNodes,n={},i=0;i<e.length;i++){var o=e[i];"Envelope"===o.localName?n.envelope=this.assembleLonLatEnvelope100(o):"RectifiedGrid"===o.localName&&(n.rectifiedGrid=new r(o))}return n},s.prototype.assembleRangeSet100=function(t){for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n];if("RangeSet"===r.localName)return this.assembleRangeSetElement100(r)}},s.prototype.assembleRangeSetElement100=function(t){var e=t.children||t.childNodes,n={};n.semantic=t.getAttribute("semantic"),n.refSys=t.getAttribute("refSys"),n.refSysLable=t.getAttribute("refSysLabel");for(var r=0;r<e.length;r++){var i=e[r];"name"===i.localName?n.name=i.textContent:"label"===i.localName?n.label=i.textContent:"axisDescription"===i.localName&&(n.axisDescriptions=this.assembleRangeSetAxisDescription100(i))}return n},s.prototype.assembleRangeSetAxisDescription100=function(t){for(var e=t.children||t.childNodes,n=[],r=0;r<e.length;r++){var i=e[r];"AxisDescription"===i.localName&&n.push(this.assembleRangeSetAxisDescriptionElement100(i))}return n},s.prototype.assembleRangeSetAxisDescriptionElement100=function(t){for(var e=t.children||t.childNodes,n={},r=0;r<e.length;r++){var i=e[r];"name"===i.localName?n.name=i.textContent:"label"===i.localName?n.label=i.textContent:"values"===i.localName&&(n.values=this.assembleRangeSetValues100(i))}return n},s.prototype.assembleRangeSetValues100=function(t){for(var e=t.children||t.childNodes,n={},r=0;r<e.length;r++){var i=e[r];"singleValue"===i.localName&&(n.singleValue=i.textContent)}return n},s.parseSpacedFloatArray=function(t){for(var e=[],n=t.split(/\s+/),r=0;r<n.length;r++)e.push(parseFloat(n[r]));return e},s})),i("util/WcsTileUrlBuilder",["../error/ArgumentError","../util/Logger"],(function(t,e){"use strict";var n=function(n,r,i){if(!n||0===n.length)throw new t(e.logMessage(e.LEVEL_SEVERE,"WcsTileUrlBuilder","constructor","The WCS service address is missing."));if(!r||0===r.length)throw new t(e.logMessage(e.LEVEL_SEVERE,"WcsTileUrlBuilder","constructor","The WCS coverage name is missing."));this.serviceAddress=n,this.coverageName=r,this.wcsVersion=i&&i.length>0?i:"1.0.0",this.crs="EPSG:4326"};return n.prototype.urlForTile=function(r,i){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"WcsUrlBuilder","urlForTile","missingTile"));if(!i)throw new t(e.logMessage(e.LEVEL_SEVERE,"WcsUrlBuilder","urlForTile","The coverage format is null or undefined."));var o=n.fixGetCoverageString(this.serviceAddress);return o.search(/service=wcs/i)<0&&(o+="SERVICE=WCS"),o+="&REQUEST=GetCoverage",o+="&VERSION="+this.wcsVersion,o+="&FORMAT="+i,"1.0.0"===this.wcsVersion?this.buildUrl100(r,o):"2.0.1"===this.wcsVersion||"2.0.0"===this.wcsVersion?this.buildUrl20x(r,o):void 0},n.prototype.buildUrl100=function(t,e){var n=t.sector;return e+="&COVERAGE="+this.coverageName,e+="&CRS="+this.crs,e+="&WIDTH="+t.tileWidth,e+="&HEIGHT="+t.tileHeight,e+="&BBOX="+n.minLongitude+","+n.minLatitude+","+n.maxLongitude+","+n.maxLatitude,encodeURI(e)},n.prototype.buildUrl20x=function(t,e){var n=t.sector;return e+="&coverageId="+this.coverageName,e+="&outputCRS=http://www.opengis.net/def/crs/EPSG/0/4326",e+="&size=x("+t.tileWidth+")",e+="&size=y("+t.tileHeight+")",e+="&subset=x,http://www.opengis.net/def/crs/EPSG/0/4326("+n.minLongitude+","+n.maxLongitude+")",e+="&subset=y,http://www.opengis.net/def/crs/EPSG/0/4326("+n.minLatitude+","+n.maxLatitude+")",encodeURI(e)},n.fixGetCoverageString=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WcsTileUrlBuilder","fixGetCoverageString","The specified service address is null or undefined."));var r=n.indexOf("?");return r<0?n+="?":r!==n.length-1&&(r=n.search(/&$/))<0&&(n+="&"),n},n})),i("globe/WcsEarthElevationCoverage",["../geom/Location","../geom/Sector","../globe/TiledElevationCoverage","../util/WcsTileUrlBuilder"],(function(t,e,n,r){"use strict";var i=function(){n.call(this,{coverageSector:e.FULL_SPHERE,resolution:.008333333333333,retrievalImageFormat:"image/tiff",minElevation:-11e3,maxElevation:8850,urlBuilder:new r("https://worldwind26.arc.nasa.gov/wms2","NASA_SRTM30_900m_Tiled","1.0.0")}),this.displayName="WCS Earth Elevation Coverage"};return i.prototype=Object.create(n.prototype),i})),i("ogc/wcs/WebCoverageService",["../../error/ArgumentError","../../util/Logger","../../util/Promise","../../ogc/wcs/WcsCapabilities","../../ogc/wcs/WcsCoverage","../../ogc/wcs/WcsCoverageDescriptions"],(function(t,e,n,r,i,o){"use strict";var a=function(){this.serviceAddress=null,this.coverages=[],this.capabilities=null,this.coverageDescriptions=null};return a.WCS_XLMNS="http://www.opengis.net/wcs",a.WCS_2_XLMNS="http://www.opengis.net/wcs/2.0",a.create=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WebCoverageService","constructor","missingUrl"));var r=new a;return r.serviceAddress=n,r.retrieveCapabilities().then((function(t){return r.capabilities=t,r.retrieveCoverageDescriptions(t)})).then((function(t){return r.parseCoverages(t),r}))},a.prototype.getCoverage=function(t){},a.prototype.retrieveCapabilities=function(){var t,e=this;return e.retrieveXml(e.buildCapabilitiesXmlRequest("2.0.1")).then((function(n){return"2.0.1"===(t=n.documentElement.getAttribute("version"))||"2.0.0"===t?n:e.retrieveXml(e.buildCapabilitiesXmlRequest("1.0.0"))})).then((function(t){return new r(t)}))},a.prototype.retrieveCoverageDescriptions=function(){return this.retrieveXml(this.buildDescribeCoverageXmlRequest())},a.prototype.parseCoverages=function(t){this.coverageDescriptions=new o(t);for(var e,n,r=this.coverageDescriptions.coverages.length,a=0;a<r;a++)e=this.coverageDescriptions.coverages[a].coverageId||this.coverageDescriptions.coverages[a].name,n=new i(e,this),this.coverages.push(n)},a.prototype.retrieveXml=function(t){return new n((function(n,r){var i=new XMLHttpRequest;i.open("POST",t.url),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?n(i.responseXML):r(new Error(e.logMessage(e.LEVEL_WARNING,"XML retrieval failed ("+i.statusText+"): "+t.url))))},i.onerror=function(){r(new Error(e.logMessage(e.LEVEL_WARNING,"XML retrieval failed: "+t.url)))},i.ontimeout=function(){r(new Error(e.logMessage(e.LEVEL_WARNING,"XML retrieval timed out: "+t.url)))},i.send(t.body)}))},a.prototype.buildCapabilitiesXmlRequest=function(t){var e=this.createBaseWcsElement("GetCapabilities",t);return{url:this.serviceAddress,body:(new XMLSerializer).serializeToString(e)}},a.prototype.buildDescribeCoverageXmlRequest=function(){var t,e,n,r=this.capabilities.version,i=this.capabilities.coverages.length;t=this.createBaseWcsElement("DescribeCoverage",r),"1.0.0"===r?n=this.capabilities.capability.request.describeCoverage.get:"2.0.1"!==r&&"2.0.0"!==r||(n=this.capabilities.operationsMetadata.getOperationMetadataByName("DescribeCoverage").dcp[0].getMethods[0].url);for(var o=0;o<i;o++)"1.0.0"===r?(e=document.createElementNS(a.WCS_XLMNS,"Coverage")).appendChild(document.createTextNode(this.capabilities.coverages[o].name)):"2.0.1"!==r&&"2.0.0"!==r||(e=document.createElementNS(a.WCS_2_XLMNS,"CoverageId")).appendChild(document.createTextNode(this.capabilities.coverages[o].coverageId)),t.appendChild(e);return{url:n,body:(new XMLSerializer).serializeToString(t)}},a.prototype.createBaseWcsElement=function(t,e){var n;return"1.0.0"===e?(n=document.createElementNS(a.WCS_XLMNS,t)).setAttribute("version","1.0.0"):"2.0.1"!==e&&"2.0.0"!==e||(n=document.createElementNS(a.WCS_2_XLMNS,t)).setAttribute("version",e),n.setAttribute("service","WCS"),n},a})),i("ogc/WfsCapabilities",["../error/ArgumentError","../util/Logger","../ogc/ows/OwsLanguageString","../ogc/ows/OwsOperationsMetadata","../ogc/ows/OwsServiceIdentification","../ogc/ows/OwsServiceProvider"],(function(t,e,n,r,i,o){"use strict";var a=function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WfsCapabilities","constructor","No XML DOM specified."));this.assembleDocument(n)};return a.prototype.assembleDocument=function(t){var e=t.documentElement;this.version=e.getAttribute("version"),this.updateSequence=e.getAttribute("updateSequence");for(var n=e.children||e.childNodes,a=0;a<n.length;a++){var s=n[a];"ServiceIdentification"===s.localName?this.serviceIdentification=new i(s):"ServiceProvider"===s.localName?this.serviceProvider=new o(s):"OperationsMetadata"===s.localName?this.operationsMetadata=new r(s):"FeatureTypeList"===s.localName?this.featureTypeList=this.assembleFeatureTypeList(s):"Filter_Capabilities"===s.localName&&(this.filterCapabilities=this.assembleFilterCapabilities(s))}},a.prototype.assembleFeatureTypeList=function(t){for(var n={},r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];if("Operations"==o.localName){n.operations=n.operations||[];try{n.operations=a.assembleOperations(o)}catch(t){e.logMessage(e.LEVEL_SEVERE,"WfsCapabilities","constructor","Exception reading WFS operations description: "+t.message)}}else if("FeatureType"==o.localName){n.featureType=n.featureType||[];try{n.featureType.push(a.assembleFeatureType(o))}catch(t){e.logMessage(e.LEVEL_SEVERE,"WfsCapabilities","constructor","Exception reading WFS operations description: "+t.message)}}}return n},a.prototype.assembleFilterCapabilities=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Conformance"===i.localName?e.conformance=a.assembleConformance(i):"Id_Capabilities"===i.localName?e.idCapabilities=a.assembleIdCapabilities(i):"Scalar_Capabilities"===i.localName?e.scalarCapabilities=a.assembleScalarCapabilities(i):"Spatial_Capabilities"===i.localName?e.spatialCapabilities=a.assembleSpatialCapabilities(i):"Functions"===i.localName&&(e.functions=a.assembleFunctions(i))}return e},a.assembleOperations=function(t){for(var e=[],n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Operation"==i.localName&&e.push(i.textContent)}return e},a.assembleFeatureType=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Name"==i.localName?e.name=i.textContent:"Title"==i.localName?e.title=i.textContent:"Abstract"==i.localName?e.abstract=i.textContent:"Keywords"==i.localName?(e.keywords=e.keywords||[],e.keywords=a.assembleKeywords(i)):"DefaultSRS"==i.localName?e.defaultSRS=i.textContent:"OtherSRS"==i.localName?(e.otherSRS=e.otherSRS||[],e.otherSRS.push(i.textContent)):"WGS84BoundingBox"==i.localName?e.wgs84BoundingBox=a.assembleBoundingBox(i):"DefaultCRS"==i.localName?e.defaultCRS=i.textContent:"OtherCRS"==i.localName?(e.otherCRS=e.otherCRS||[],e.otherCRS.push(i.textContent)):"OutputFormats"==i.localName?e.outputFormats=a.assembleOutputFormats(i):"MetadataURL"==i.localName&&(e.metadataUrl=a.assembleMetadataUrl(i))}return e},a.assembleBoundingBox=function(t){var e={},n=t.getAttribute("crs");n&&(e.crs=n);for(var r=t.children||t.childNodes,i=0;i<r.length;i++){var o=r[i];if("LowerCorner"===o.localName){var a=o.textContent.split(" ");e.lowerCorner=[parseFloat(a[0]),parseFloat(a[1])]}else if("UpperCorner"===o.localName){var s=o.textContent.split(" ");e.upperCorner=[parseFloat(s[0]),parseFloat(s[1])]}}return e},a.assembleOutputFormats=function(t){for(var e=[],n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Format"===i.localName&&e.push(i.textContent)}return e},a.assembleMetadataUrl=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"MetadataURL"===i.localName&&(e.format=i.getAttribute("format"),e.type=i.getAttribute("type"))}return outputFormats},a.assembleKeywords=function(t){for(var e=[],n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Keyword"===i.localName&&e.push(i.textContent)}return e},a.assembleConformance=function(t){for(var e=[],n=t.children||t.childNodes,r=0;r<n.length;r++){var i,o=n[r];"Constraint"===o.localName&&((i=a.assembleConstraint(o)).name=o.getAttribute("name"),e.push(i))}return e},a.assembleConstraint=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"DefaultValue"===i.localName&&(e.defaultValue=i.textContent)}return e},a.assembleIdCapabilities=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"ResourceIdentifier"===i.localName&&(e.resourceIdentifier=i.getAttribute("name"))}return e},a.assembleScalarCapabilities=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"ComparisonOperators"===i.localName?e.comparisonOperators=a.assembleComparisonOperators(i):"ArithmeticOperators"===i.localName&&(e.arithmeticOperators=a.assembleArithmeticOperators(i))}return e},a.assembleComparisonOperators=function(t){for(var e=[],n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"ComparisonOperator"===i.localName&&e.push(i.textContent)}return e},a.assembleArithmeticOperators=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Functions"===i.localName&&(e.functions=a.assembleArithmeticFunctions(i))}return e},a.assembleArithmeticFunctions=function(t){for(var e=[],n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"FunctionNames"===i.localName&&(e=a.assembleFunctionNames(i))}return e},a.assembleFunctionNames=function(t){for(var e=[],n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];if("FunctionName"===i.localName){var o={name:i.textContent,nArgs:i.getAttribute("nArgs")};e.push(o)}}return e},a.assembleSpatialCapabilities=function(t){for(var e={},n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"GeometryOperands"===i.localName?e.geometryOperands=a.assembleGeometryOperands(i):"SpatialOperators"===i.localName&&(e.spatialOperators=a.assembleSpatialOperators(i))}return e},a.assembleGeometryOperands=function(t){for(var e=[],n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"GeometryOperand"===i.localName&&e.push(i.getAttribute("name"))}return e},a.assembleSpatialOperators=function(t){for(var e=[],n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"SpatialOperator"===i.localName&&e.push(i.getAttribute("name"))}return e},a.assembleFunctions=function(t){for(var e=[],n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Function"===i.localName&&e.push(a.assembleFunction(i))}return e},a.assembleFunction=function(t){var e={};e.name=t.getAttribute("name");for(var n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Returns"===i.localName?e.returns=i.textContent:"Arguments"===i.localName&&(e.arguments=a.assembleArguments(i))}return e},a.assembleArguments=function(t){for(var e=[],n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Argument"===i.localName&&e.push(a.assembleArgument(i))}return e},a.assembleArgument=function(t){var e={};e.name=t.getAttribute("name");for(var n=t.children||t.childNodes,r=0;r<n.length;r++){var i=n[r];"Type"===i.localName&&(e.type=i.textContent)}return e},a})),i("formats/wkt/WktElements",[],(function(){return{}})),i("formats/wkt/WktType",[],(function(){var t=function(){};return t.SupportedGeometries={LINE_STRING:"LINESTRING",MULTI_LINE_STRING:"MULTILINESTRING",POLYGON:"POLYGON",MULTI_POLYGON:"MULTIPOLYGON",POINT:"POINT",MULTI_POINT:"MULTIPOINT",TRIANGLE:"TRIANGLE",GEOMETRY_COLLECTION:"GEOMETRYCOLLECTION"},t.TokenType={LEFT_PARENTHESIS:0,COMMA:1,RIGHT_PARENTHESIS:2,NUMBER:3,TEXT:4},t})),i("formats/wkt/geom/WktObject",["../../../geom/Location","../../../geom/Position","../WktElements","../WktType"],(function(t,e,n,r){var i=function(t){this.type=t,this._is3d=!1,this._isLrs=!1,this.coordinates=[],this.options={coordinates:[],leftParenthesis:0,rightParenthesis:0,tokens:[]}};return i.prototype.set3d=function(){this._is3d=!0},i.prototype.setLrs=function(){this._isLrs=!0},i.prototype.addCoordinates=function(n){this._is3d?this.coordinates.push(new e(n[1],n[0],n[2]||0)):this.coordinates.push(new t(n[1],n[0]))},i.prototype.shapes=function(){return[]},i.prototype.handleToken=function(t){var e=t.value,n=this.options;t.type===r.TokenType.TEXT?this.text(n,e):t.type===r.TokenType.LEFT_PARENTHESIS?this.leftParenthesis(n):t.type===r.TokenType.RIGHT_PARENTHESIS?this.rightParenthesis(n):t.type===r.TokenType.NUMBER?this.number(n,e):t.type===r.TokenType.COMMA&&this.comma(n),n.tokens.push(t)},i.prototype.text=function(t,e){if((e=e.toUpperCase()).length<=2)this.setOptions(e,this);else if(0===e.indexOf("EMPTY"))t.leftParenthesis=1,t.rightParenthesis=1;else{var r=e.match("[M]?[Z]?$");r&&r.length>0&&""!=r[0]&&this.setOptions(r,null);var o=n[e]&&new n[e];o||(o=new i),r&&r.length>0&&""!=r[0]&&o.setOptions(r[0],o),this.add(o)}},i.prototype.rightParenthesis=function(t){t.rightParenthesis++,t.coordinates&&(this.addCoordinates(t.coordinates),t.coordinates=null)},i.prototype.leftParenthesis=function(t){t.leftParenthesis++},i.prototype.comma=function(t){t.coordinates?(this.addCoordinates(t.coordinates),t.coordinates=null):this.commaWithoutCoordinates(t)},i.prototype.commaWithoutCoordinates=function(t){},i.prototype.number=function(t,e){t.coordinates=t.coordinates||[],t.coordinates.push(e)},i.prototype.setOptions=function(t,e){"Z"==t?e.set3d():"M"==t?e.setLrs():"MZ"==t&&(e.set3d(),e.setLrs())},i.prototype.isFinished=function(){return this.options.leftParenthesis===this.options.rightParenthesis&&this.options.leftParenthesis>0},i})),i("formats/wkt/WktTokens",["./WktElements","./geom/WktObject","./WktType"],(function(t,e,n){var r=function(t){this.sourceText=t};return r.prototype.objects=function(){var n,r=[];return this.tokenize(this.sourceText).forEach((function(i){if(n&&n.isFinished()||!n){var o=i.value,a=o.match("[M]?[Z]?$");a&&a.length>0&&""!=a[0]&&(o=o.substring(0,o.length-a.length)),(n=t[o]&&new t[o])||(n=new e),a&&a.length>0&&""!=a[0]&&n.setOptions(a[0],n),r.push(n)}else n.handleToken(i)})),r},r.prototype.tokenize=function(t){this.currentPosition=0;for(var e=[];this.currentPosition<t.length;this.currentPosition++){var r=t.charAt(this.currentPosition);if("("==r)e.push({type:n.TokenType.LEFT_PARENTHESIS});else if(","==r)e.push({type:n.TokenType.COMMA});else if(")"==r)e.push({type:n.TokenType.RIGHT_PARENTHESIS});else if(this.isAlpha(r)){var i=this.readText(t);e.push({type:n.TokenType.TEXT,value:i})}else{if(!this.isNumeric(r)){if(this.isWhiteSpace(r))continue;throw new Error("Invalid character: {{",r,"}}")}var o=this.readNumeric(t);e.push({type:n.TokenType.NUMBER,value:o})}}return e},r.prototype.isAlpha=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},r.prototype.isNumeric=function(t){return t>="0"&&t<="9"||"."==t||"-"==t||"e"==t||"E"==t},r.prototype.isWhiteSpace=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},r.prototype.readText=function(t){for(var e="";this.isAlpha(t.charAt(this.currentPosition));)e+=t.charAt(this.currentPosition),this.currentPosition++;return this.currentPosition--,e},r.prototype.readNumeric=function(t){for(var e="";this.isNumeric(t.charAt(this.currentPosition));)e+=t.charAt(this.currentPosition),this.currentPosition++;return this.currentPosition--,Number(e)},r})),i("formats/wkt/Wkt",["../../error/ArgumentError","../../util/Logger","./WktTokens"],(function(t,e,n){var r=function(t){this.textRepresentation=t,this._parserCompletionCallback=this.defaultParserCompletionCallback,this._shapeConfigurationCallback=this.defaultShapeConfigurationCallback,this._layer=null};return Object.defineProperties(r.prototype,{parserCompletionCallback:{get:function(){return this._parserCompletionCallback}},shapeConfigurationCallback:{get:function(){return this._shapeConfigurationCallback}},layer:{get:function(){return this._layer}}}),r.prototype.load=function(t,e,r){r&&(this._layer=r),t&&(this._parserCompletionCallback=t),e&&(this._shapeConfigurationCallback=e),this.parserCompletionCallback(this,new n(this.textRepresentation).objects())},r.prototype.defaultShapeConfigurationCallback=function(t){},r.prototype.defaultParserCompletionCallback=function(t,e){var n=t.shapeConfigurationCallback,r=[];e.forEach((function(t){t.shapes().forEach((function(e){var i=n(t);i&&i.name&&(e.displayName=i.name),i&&i.attributes&&(e.attributes=i.attributes),i&&i.highlightAttributes&&(e.highlightAttributes=i.highlightAttributes),i&&i.pickDelegate&&(e.pickDelegate=i.pickDelegate),i&&i.userProperties&&(e.userProperties=i.userProperties),i&&i.timeRange&&(e.timeRange=i.timeRange),r.push(e)}))})),t.layer&&t.layer.addRenderables(r)},r})),i("formats/wkt/WktExporter",["../../error/ArgumentError","../../util/Logger","./WktType"],(function(t,e,n){"use strict";return{exportRenderable:function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WktExporter","exportRenderable","missingRenderable"));return n instanceof WorldWind.Placemark?this.exportPlacemark(n):n instanceof WorldWind.Path?this.exportPath(n):n instanceof WorldWind.Polygon?this.exportPolygon(n):n instanceof WorldWind.SurfacePolyline?this.exportSurfacePolyline(n):n instanceof WorldWind.SurfacePolygon?this.exportSurfacePolygon(n):n instanceof WorldWind.SurfaceEllipse?this.exportSurfaceEllipse(n):n instanceof WorldWind.SurfaceCircle?this.exportSurfaceCircle(n):n instanceof WorldWind.SurfaceRectangle?this.exportSurfaceRectangle(n):n instanceof WorldWind.SurfaceSector?this.exportSurfaceSector(n):(e.log(e.LEVEL_WARNING,"Export renderable not implemented: "+n),null)},exportRenderables:function(r){if(!r)throw new t(e.logMessage(e.LEVEL_SEVERE,"WktExporter","exportRenderables","missingRenderables"));if(0!=r.length){if(r.length>1){for(var i=n.SupportedGeometries.GEOMETRY_COLLECTION+"(",o=0;o<r.length;o++){var a=this.exportRenderable(r[o]);a&&(i+=a,i+=",")}return(i=i.substring(0,i.length-1))+")"}return this.exportRenderable(r[0])}},exportLayer:function(n){if(!n)throw new t(e.logMessage(e.LEVEL_SEVERE,"WktExporter","exportLayer","missingLayer"));return this.exportRenderables(n.renderables)},exportPlacemark:function(r){if(!(r instanceof WorldWind.Placemark))throw new t(e.logMessage(e.LEVEL_SEVERE,"WktExporter","exportPlacemark","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POINT+"(";return(i=i+r.position.longitude+" "+r.position.latitude)+")"},exportPath:function(r){if(!(r instanceof WorldWind.Path))throw new t(e.logMessage(e.LEVEL_SEVERE,"WktExporter","exportPath","invalidTypeOfRenderable"));for(var i=n.SupportedGeometries.LINE_STRING+"(",o=0;o<r.positions.length;o++)i=i+r.positions[o].longitude+" "+r.positions[o].latitude;return(i=i.substring(0,i.length-2))+")"},exportPolygon:function(r){if(!(r instanceof WorldWind.Polygon))throw new t(e.logMessage(e.LEVEL_SEVERE,"WktExporter","exportPolygon","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POLYGON+"(";if(r.boundaries.length>0&&r.boundaries[0].length>2){for(var o=0;o<r.boundaries.length;o++){i+="(";for(var a=0;a<r.boundaries[o].length;a++)i=i+r.boundaries[o][a].longitude+" "+r.boundaries[o][a].latitude,i+=", ";i=i.substring(0,i.length-2),i+=")",i+=", "}i=i.substring(0,i.length-2)}else{for(i+="(",o=0;o<r.boundaries.length;o++)i=i+r.boundaries[o].longitude+" "+r.boundaries[o].latitude,i+=", ";i=i.substring(0,i.length-2),i+=")"}return i+")"},exportSurfacePolyline:function(r){if(!(r instanceof WorldWind.SurfacePolyline))throw new t(e.logMessage(e.LEVEL_SEVERE,"WktExporter","exportSurfacePolyline","invalidTypeOfRenderable"));for(var i=n.SupportedGeometries.LINE_STRING+"(",o=0;o<r.boundaries.length;o++)i=i+r.boundaries[o].longitude+" "+r.boundaries[o].latitude,i+=", ";return(i=i.substring(0,i.length-2))+")"},exportSurfacePolygon:function(r){if(!(r instanceof WorldWind.SurfacePolygon))throw new t(e.logMessage(e.LEVEL_SEVERE,"WktExporter","exportSurfacePolygon","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POLYGON+"(";if(r.boundaries.length>0&&r.boundaries[0].length>2){for(var o=0;o<r.boundaries.length;o++){i+="(";for(var a=0;a<r.boundaries[o].length;a++)i=i+r.boundaries[o][a].longitude+" "+r.boundaries[o][a].latitude,i+=", ";i=i.substring(0,i.length-2),i+=")",i+=", "}i=i.substring(0,i.length-2)}else{for(i+="(",o=0;o<r.boundaries.length;o++)i=i+r.boundaries[o].longitude+" "+r.boundaries[o].latitude,i+=", ";i=i.substring(0,i.length-2),i+=")"}return i+")"},exportSurfaceEllipse:function(r){if(!(r instanceof WorldWind.SurfaceEllipse))throw new t(e.logMessage(e.LEVEL_SEVERE,"WktExporter","exportSurfaceEllipse","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POLYGON+"(";i+="(";for(var o=0;o<r._boundaries.length;o++)i=i+r._boundaries[o].longitude+" "+r._boundaries[o].latitude,i+=", ";return i=i.substring(0,i.length-2),(i+=")")+")"},exportSurfaceCircle:function(r){if(!(r instanceof WorldWind.SurfaceCircle))throw new t(e.logMessage(e.LEVEL_SEVERE,"WktExporter","exportSurfaceCircle","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POLYGON+"(";i+="(";for(var o=0;o<r._boundaries.length;o++)i=i+r._boundaries[o].longitude+" "+r._boundaries[o].latitude,i+=", ";return i=i.substring(0,i.length-2),(i+=")")+")"},exportSurfaceRectangle:function(r){if(!(r instanceof WorldWind.SurfaceRectangle))throw new t(e.logMessage(e.LEVEL_SEVERE,"WktExporter","exportSurfaceRectangle","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POLYGON+"(";i+="(";for(var o=0;o<r._boundaries.length;o++)i=i+r._boundaries[o].longitude+" "+r._boundaries[o].latitude,i+=", ";return i=i.substring(0,i.length-2),(i+=")")+")"},exportSurfaceSector:function(r){if(!(r instanceof WorldWind.SurfaceSector))throw new t(e.logMessage(e.LEVEL_SEVERE,"WktExporter","exportSurfaceSector","invalidTypeOfRenderable"));var i=n.SupportedGeometries.POLYGON+"(";i+="(";for(var o=0;o<r._boundaries.length;o++)i=i+r._boundaries[o].longitude+" "+r._boundaries[o].latitude,i+=", ";return i=i.substring(0,i.length-2),(i+=")")+")"}}})),i("formats/wkt/geom/WktGeometryCollection",["../../../geom/Location","../../../geom/Position","../WktElements","./WktObject","../WktType"],(function(t,e,n,r,i){var o=function(){r.call(this,i.SupportedGeometries.GEOMETRY_COLLECTION),this.objects=[]};return(o.prototype=Object.create(r.prototype)).add=function(t){this.objects.push(t)},o.prototype.addCoordinates=function(n){var r=this.objects[this.objects.length-1];this._is3d?r.coordinates.push(new e(n[0],n[1],n[2]||0)):r.coordinates.push(new t(n[0],n[1]))},o.prototype.shapes=function(){var t=[];return this.objects.forEach((function(e){e.shapes().forEach((function(e){t.push(e)}))})),t},n.GEOMETRYCOLLECTION=o,o})),i("formats/wkt/geom/WktLineString",["../../../shapes/Path","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolyline","../WktElements","./WktObject","../WktType"],(function(t,e,n,r,i,o){var a=function(){i.call(this,o.SupportedGeometries.LINE_STRING)};return(a.prototype=Object.create(i.prototype)).shapes=function(){return this._is3d?[new t(this.coordinates,new e(null))]:[new n(this.coordinates,new e(null))]},r.LINESTRING=a,a})),i("formats/wkt/geom/WktMultiLineString",["../../../shapes/Path","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolyline","../WktElements","./WktObject","../WktType"],(function(t,e,n,r,i,o){var a=function(){i.call(this,o.SupportedGeometries.MULTI_LINE_STRING),this.objectBoundaries=[]};return(a.prototype=Object.create(i.prototype)).commaWithoutCoordinates=function(){this.objectBoundaries.push(this.coordinates.slice()),this.coordinates=[]},a.prototype.shapes=function(){return this.commaWithoutCoordinates(),this._is3d?this.objectBoundaries.map(function(n){return new t(n,new e(null))}.bind(this)):this.objectBoundaries.map(function(t){return new n(t,new e(null))}.bind(this))},r.MULTILINESTRING=a,a})),i("formats/wkt/geom/WktPoint",["../../../shapes/Placemark","../../../shapes/PlacemarkAttributes","../WktElements","./WktObject","../WktType"],(function(t,e,n,r,i){var o=function(){r.call(this,i.SupportedGeometries.POINT)};return(o.prototype=Object.create(r.prototype)).shapes=function(){return[o.placemark(this.coordinates[0])]},o.placemark=function(n){var r=new e(null);r.imageScale=1,r.imageOffset=new WorldWind.Offset(WorldWind.OFFSET_FRACTION,.3,WorldWind.OFFSET_FRACTION,0),r.imageColor=WorldWind.Color.WHITE,r.labelAttributes.offset=new WorldWind.Offset(WorldWind.OFFSET_FRACTION,.5,WorldWind.OFFSET_FRACTION,1),r.labelAttributes.color=WorldWind.Color.YELLOW,r.drawLeaderLine=!0,r.leaderLineAttributes.outlineColor=WorldWind.Color.RED,r.imageSource=WorldWind.configuration.baseUrl+"images/pushpins/castshadow-purple.png";var i=new t(n,!0,r);return i.altitudeMode=WorldWind.RELATIVE_TO_GROUND,i},n.POINT=o,o})),i("formats/wkt/geom/WktMultiPoint",["../../../shapes/Placemark","../../../shapes/PlacemarkAttributes","../WktElements","./WktObject","./WktPoint","../WktType"],(function(t,e,n,r,i,o){var a=function(){r.call(this,o.SupportedGeometries.MULTI_POINT)};return(a.prototype=Object.create(r.prototype)).commaWithoutCoordinates=function(){},a.prototype.shapes=function(){return this.coordinates.map(function(t){return i.placemark(t)}.bind(this))},n.MULTIPOINT=a,a})),i("formats/wkt/geom/WktMultiPolygon",["../../../shapes/Polygon","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolygon","../WktElements","./WktObject","../WktType"],(function(t,e,n,r,i,o){var a=function(){i.call(this,o.SupportedGeometries.MULTI_POLYGON),this.objectBoundaries=[],this.currentIndex=0};return(a.prototype=Object.create(i.prototype)).rightParenthesis=function(t){i.prototype.rightParenthesis.call(this,t),t.tokens[t.tokens.length-1].type!=o.TokenType.RIGHT_PARENTHESIS?this.addBoundaries():t.tokens[t.tokens.length-1].type==o.TokenType.RIGHT_PARENTHESIS&&t.tokens[t.tokens.length-2].type!=o.TokenType.RIGHT_PARENTHESIS&&this.addObject()},a.prototype.addBoundaries=function(){this.objectBoundaries[this.currentIndex]||(this.objectBoundaries[this.currentIndex]=[]),this.objectBoundaries[this.currentIndex].push(this.coordinates.slice()),this.coordinates=[]},a.prototype.addObject=function(){this.currentIndex++},a.prototype.shapes=function(){return this._is3d?this.objectBoundaries.map(function(n){return new t(n,new e(null))}.bind(this)):this.objectBoundaries.map(function(t){return new n(t,new e(null))}.bind(this))},r.MULTIPOLYGON=a,a})),i("formats/wkt/geom/WktPolygon",["../../../shapes/Polygon","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolygon","../WktElements","./WktObject","../WktType"],(function(t,e,n,r,i,o){var a=function(){i.call(this,o.SupportedGeometries.POLYGON),this._renderable=null};return(a.prototype=Object.create(i.prototype)).commaWithoutCoordinates=function(){this.outerBoundaries=this.coordinates.slice(),this.coordinates=[]},a.prototype.shapes=function(){return this._is3d?this.outerBoundaries?[new t([this.outerBoundaries,this.coordinates],new e(null))]:[new t(this.coordinates,new e(null))]:this.outerBoundaries?[new n([this.outerBoundaries,this.coordinates],new e(null))]:[new n(this.coordinates,new e(null))]},r.POLYGON=a,a})),i("formats/wkt/geom/WktTriangle",["../../../shapes/Polygon","../../../shapes/ShapeAttributes","../../../shapes/SurfacePolygon","../WktElements","./WktObject","../WktType"],(function(t,e,n,r,i,o){var a=function(){i.call(this,o.SupportedGeometries.TRIANGLE),this._renderable=null};return(a.prototype=Object.create(i.prototype)).shapes=function(){return this._is3d?[new t(this.coordinates,new e(null))]:[new n(this.coordinates,new e(null))]},r.TRIANGLE=a,a})),i("layer/WmsTimeDimensionedLayer",["../error/ArgumentError","../layer/Layer","../util/Logger","../layer/WmsLayer"],(function(t,e,n,r){"use strict";var i=function(r){if(!r)throw new t(n.logMessage(n.LEVEL_SEVERE,"WmsTimeDimensionedLayer","constructor","No configuration specified."));e.call(this,"WMS Time Dimensioned Layer"),this.config=r,this.displayName=r.title,this.pickEnabled=!1,this.layers={}};return(i.prototype=Object.create(e.prototype)).doRender=function(t){if(this.time){var e=this.time.toISOString(),n=this.layers[e];n||(n=new r(this.config,e),this.layers[e]=n),n.opacity=this.opacity,n.doRender(t),this.inCurrentFrame=n.inCurrentFrame}},i})),i("WorldWindow",["./ArcBallCamera","./error/ArgumentError","./BasicWorldWindowController","./render/DrawContext","./globe/EarthElevationModel","./util/FrameStatistics","./geom/Frustum","./globe/Globe","./globe/Globe2D","./util/GoToAnimator","./cache/GpuResourceCache","./geom/Line","./util/Logger","./navigate/LookAtNavigator","./geom/Matrix","./navigate/Navigator","./pick/PickedObjectList","./geom/Position","./geom/Rectangle","./geom/Sector","./shapes/SurfaceShape","./shapes/SurfaceShapeTileBuilder","./globe/Terrain","./geom/Vec2","./geom/Vec3","./util/WWMath"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_,b,S,w,x,T){"use strict";var L=function(a,u){function c(t){t.preventDefault()}function h(t){E.onGestureEvent(t)}function p(t){E.handleRedrawEvent(t)}if(!window.WebGLRenderingContext)throw new e(f.logMessage(f.LEVEL_SEVERE,"WorldWindow","constructor","webglNotSupported"));var m;if(a instanceof HTMLCanvasElement)m=a;else if(!(m=document.getElementById(a)))throw new e(f.logMessage(f.LEVEL_SEVERE,"WorldWindow","constructor","The specified canvas ID is not in the document."));var y=this.createContext(m);if(!y)throw new e(f.logMessage(f.LEVEL_SEVERE,"WorldWindow","constructor","webglNotSupported"));this.drawContext=new r(y),this.eventListeners={},this.redrawRequested=!0,this.redrawRequestId=null,this.scratchModelview=d.fromIdentity(),this.scratchProjection=d.fromIdentity(),this.hasStencilBuffer=y.getContextAttributes().stencil,this.canvas=m,this.depthBits=y.getParameter(y.DEPTH_BITS),this.viewport=new v(0,0,y.drawingBufferWidth,y.drawingBufferHeight),this.globe=new s(u||new i),this.layers=[],this.navigator=new g(new t(this)),this.worldWindowController=new n(this),this.verticalExaggeration=1,this.deepPicking=!1,this.subsurfaceMode=!1,this.surfaceOpacity=1,this.frameStatistics=new o,this.goToAnimator=new l(this),this._redrawCallbacks=[],this._orderedRenderingFilters=[function(t){E.declutter(t,1)},function(t){E.declutter(t,2)}],this.pixelScale=1,this.addEventListener("mousedown",c),this.addEventListener("touchstart",c),this.addEventListener("contextmenu",c),this.addEventListener("wheel",c);var E=this;window.PointerEvent?(this.canvas.style.setProperty("touch-action","none"),this.addEventListener("pointerdown",h,!1),window.addEventListener("pointermove",h,!1),window.addEventListener("pointercancel",h,!1),window.addEventListener("pointerup",h,!1)):(this.addEventListener("mousedown",h,!1),window.addEventListener("mousemove",h,!1),window.addEventListener("mouseup",h,!1),this.addEventListener("touchstart",h,!1),this.addEventListener("touchmove",h,!1),this.addEventListener("touchend",h,!1),this.addEventListener("touchcancel",h,!1)),this.addEventListener("wheel",(function(t){h(t)})),this.canvas.addEventListener("webglcontextlost",(function(t){E.handleContextLost(t)}),!1),this.canvas.addEventListener("webglcontextrestored",(function(t){E.handleContextRestored(t)}),!1),this.canvas.addEventListener(WorldWind.REDRAW_EVENT_TYPE,p,!1),window.addEventListener(WorldWind.REDRAW_EVENT_TYPE,p,!1),this.animationFrameLoop()};return Object.defineProperties(L.prototype,{orderedRenderingFilters:{get:function(){return this._orderedRenderingFilters}},redrawCallbacks:{get:function(){return this._redrawCallbacks}}}),L.prototype.canvasCoordinates=function(t,e){var n=this.canvas.getBoundingClientRect(),r=t-(n.left+this.canvas.clientLeft),i=e-(n.top+this.canvas.clientTop);return new w(r,i)},L.prototype.onGestureEvent=function(t){this.worldWindowController.onGestureEvent(t)},L.prototype.addEventListener=function(t,n){if(!t)throw new e(f.logMessage(f.LEVEL_SEVERE,"WorldWindow","addEventListener","missingType"));if(!n)throw new e(f.logMessage(f.LEVEL_SEVERE,"WorldWindow","addEventListener","missingListener"));var r=this,i=this.eventListeners[t];i||(i={listeners:[],callback:function(t){t.worldWindow=r;for(var e=0,n=i.listeners.length;e<n;e++)i.listeners[e](t)}},this.eventListeners[t]=i),-1==i.listeners.indexOf(n)&&(i.listeners.splice(0,0,n),1==i.listeners.length&&this.canvas.addEventListener(t,i.callback,!1))},L.prototype.removeEventListener=function(t,n){if(!t)throw new e(f.logMessage(f.LEVEL_SEVERE,"WorldWindow","removeEventListener","missingType"));if(!n)throw new e(f.logMessage(f.LEVEL_SEVERE,"WorldWindow","removeEventListener","missingListener"));var r=this.eventListeners[t];if(r){var i=r.listeners.indexOf(n);-1!=i&&(r.listeners.splice(i,1),0==r.listeners.length&&this.canvas.removeEventListener(t,r.callback,!1))}},L.prototype.redraw=function(){this.redrawRequested=!0},L.prototype.pick=function(t){if(!t)throw new e(f.logMessage(f.LEVEL_SEVERE,"WorldWindow","pick","missingPoint"));return this.drawContext.currentGlContext.isContextLost()?new m:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.pickPoint=t,this.drawContext.pickRay=this.rayThroughScreenPoint(t),this.drawFrame(),this.drawContext.objectsAtPickPoint)},L.prototype.pickTerrain=function(t){if(!t)throw new e(f.logMessage(f.LEVEL_SEVERE,"WorldWindow","pickTerrain","missingPoint"));return this.drawContext.currentGlContext.isContextLost()?new m:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.pickTerrainOnly=!0,this.drawContext.pickPoint=t,this.drawContext.pickRay=this.rayThroughScreenPoint(t),this.drawFrame(),this.drawContext.objectsAtPickPoint)},L.prototype.pickShapesInRegion=function(t){if(!t)throw new e(f.logMessage(f.LEVEL_SEVERE,"WorldWindow","pickShapesInRegion","missingRectangle"));return this.drawContext.currentGlContext.isContextLost()?new m:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.regionPicking=!0,this.drawContext.pickRectangle=new v(t.x,this.canvas.height-t.y,t.width,t.height),this.drawFrame(),this.drawContext.objectsAtPickPoint)},L.prototype.createContext=function(t){var e={antialias:!1,stencil:!0},n=t.getContext("webgl",e);return n||(n=t.getContext("experimental-webgl",e)),n},L.prototype.handleContextLost=function(t){f.log(f.LEVEL_INFO,"WebGL context event: "+t.statusMessage),t.preventDefault(),this.drawContext.contextLost(),window.cancelAnimationFrame(this.redrawRequestId)},L.prototype.handleContextRestored=function(t){f.log(f.LEVEL_INFO,"WebGL context event: "+t.statusMessage),this.drawContext.contextRestored(),this.redraw(),this.animationFrameLoop()},L.prototype.handleRedrawEvent=function(t){this.redraw()},L.prototype.animationFrameLoop=function(){this.redrawIfNeeded();var t=this;this.redrawRequestId=window.requestAnimationFrame((function(){t.animationFrameLoop()}))},L.prototype.redrawIfNeeded=function(){if(this.resize(),this.redrawRequested)try{this.redrawRequested=!1,this.drawContext.previousRedrawTimestamp=this.drawContext.timestamp,this.callRedrawCallbacks(WorldWind.BEFORE_REDRAW),this.resetDrawContext(),this.drawFrame()}catch(t){f.logMessage(f.LEVEL_SEVERE,"WorldWindow","redrawIfNeeded","Exception occurred during redrawing.\n"+t.toString())}finally{this.callRedrawCallbacks(WorldWind.AFTER_REDRAW),this.drawContext.redrawRequested&&(this.redrawRequested=!0)}},L.prototype.resize=function(){var t=this.drawContext.currentGlContext,e=t.canvas.clientWidth*this.pixelScale,n=t.canvas.clientHeight*this.pixelScale;t.canvas.width==e&&t.canvas.height==n||(t.canvas.width=e,t.canvas.height=n,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),this.viewport=new v(0,0,t.drawingBufferWidth,t.drawingBufferHeight),this.redrawRequested=!0)},L.prototype.computeViewingTransform=function(t,n){if(!n)throw new e(f.logMessage(f.LEVEL_SEVERE,"WorldWindow","computeViewingTransform","missingModelview"));var r=this.globe;if(this.navigator.camera.createViewMatrix(n),t){t.setToIdentity();var i=T.max(r.equatorialRadius,r.polarRadius),o=n.extractEyePoint(new x(0,0,0)),a=r.computePositionFromPoint(o[0],o[1],o[2],new y(0,0,0)),s=T.horizonDistanceForGlobeRadius(i,a.altitude),u=T.horizonDistanceForGlobeRadius(i,16e4),l=this.viewport,c=s+u;c<1e3&&(c=1e3);var h=T.perspectiveNearDistanceForFarDistance(c,10,this.depthBits),p=a.altitude-r.elevationAtLocation(a.latitude,a.longitude);if(p>0){var d=T.perspectiveNearDistance(l.width,l.height,p);h>d&&(h=d)}h<1&&(h=1),t.setToPerspectiveProjection(l.width,l.height,h,c)}},L.prototype.computePixelMetrics=function(t){var e=d.fromIdentity();e.invertMatrix(t);var n=new x(-1,-1,-1),r=new x(1,1,-1),i=new x(-1,-1,1),o=new x(1,1,1);n.multiplyByMatrix(e),r.multiplyByMatrix(e),i.multiplyByMatrix(e),o.multiplyByMatrix(e);var a=T.fabs(r[0]-n[0]),s=T.fabs(o[0]-i[0]),u=-n[2],l=(s-a)/(-i[2]-u),c=a-l*u;return{pixelSizeFactor:l/this.viewport.width,pixelSizeOffset:c/this.viewport.height}},L.prototype.pixelSizeAtDistance=function(t){this.computeViewingTransform(this.scratchProjection,this.scratchModelview);var e=this.computePixelMetrics(this.scratchProjection);return e.pixelSizeFactor*t+e.pixelSizeOffset},L.prototype.computeDrawContext=function(){var t=this.drawContext;this.computeViewingTransform(t.projection,t.modelview),t.viewport=this.viewport,t.eyePoint=t.modelview.extractEyePoint(new x(0,0,0)),t.modelviewProjection.setToIdentity(),t.modelviewProjection.setToMultiply(t.projection,t.modelview);var e=this.computePixelMetrics(t.projection);t.pixelSizeFactor=e.pixelSizeFactor,t.pixelSizeOffset=e.pixelSizeOffset;var n=d.fromIdentity();n.invertOrthonormalMatrix(t.modelview),t.modelviewNormalTransform=d.fromIdentity().setToTransposeOfMatrix(n.upper3By3());var r=d.fromIdentity();r.setToTransposeOfMatrix(t.modelview),t.frustumInModelCoordinates=a.fromProjectionMatrix(t.projection),t.frustumInModelCoordinates.transformByMatrix(r),t.frustumInModelCoordinates.normalize()},L.prototype.resetDrawContext=function(){this.globe.offset=0;var t=this.drawContext;t.reset(),t.globe=this.globe,t.navigator=this.navigator,t.layers=this.layers.slice(),t.layers.push(t.screenCreditController),this.computeDrawContext(),t.verticalExaggeration=this.verticalExaggeration,t.surfaceOpacity=this.surfaceOpacity,t.deepPicking=this.deepPicking,t.frameStatistics=this.frameStatistics,t.pixelScale=this.pixelScale,t.update()},L.prototype.drawFrame=function(){try{this.drawContext.frameStatistics.beginFrame(),this.beginFrame(),this.drawContext.globe.is2D()&&this.drawContext.globe.continuous?this.do2DContiguousRepaint():this.doNormalRepaint()}finally{this.endFrame(),this.drawContext.frameStatistics.endFrame()}},L.prototype.doNormalRepaint=function(){this.createTerrain(),this.clearFrame(),this.deferOrderedRendering=!1,this.drawContext.pickingMode?this.drawContext.makePickFrustum()&&(this.doPick(),this.resolvePick()):(this.doDraw(),this.subsurfaceMode&&this.hasStencilBuffer&&(this.redrawSurface(),this.drawScreenRenderables()))},L.prototype.do2DContiguousRepaint=function(){this.createTerrain2DContiguous(),this.clearFrame(),this.drawContext.pickingMode?this.drawContext.makePickFrustum()&&(this.pick2DContiguous(),this.resolvePick()):this.draw2DContiguous()},L.prototype.resolvePick=function(){this.drawContext.pickTerrainOnly?this.resolveTerrainPick():this.drawContext.regionPicking?this.resolveRegionPick():this.resolveTopPick()},L.prototype.beginFrame=function(){var t=this.drawContext.currentGlContext;t.enable(t.BLEND),t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.depthFunc(t.LEQUAL),this.drawContext.pickingMode&&(this.drawContext.makePickFramebuffer(),this.drawContext.bindFramebuffer(this.drawContext.pickFramebuffer))},L.prototype.endFrame=function(){var t=this.drawContext.currentGlContext;t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.blendFunc(t.ONE,t.ZERO),t.depthFunc(t.LESS),t.clearColor(0,0,0,1),this.drawContext.bindFramebuffer(null),this.drawContext.bindProgram(null)},L.prototype.clearFrame=function(){var t=this.drawContext,e=t.currentGlContext;e.clearColor(t.clearColor.red,t.clearColor.green,t.clearColor.blue,t.clearColor.alpha),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)},L.prototype.doDraw=function(){this.drawContext.renderShapes=!0,this.subsurfaceMode&&this.hasStencilBuffer?(this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawContext.currentGlContext.clear(this.drawContext.currentGlContext.DEPTH_BUFFER_BIT|this.drawContext.currentGlContext.STENCIL_BUFFER_BIT),this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.ALWAYS,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE),this.drawOrderedRenderables())):(this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawOrderedRenderables(),this.drawScreenRenderables()))},L.prototype.redrawSurface=function(){this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.EQUAL,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.KEEP,this.drawContext.currentGlContext.KEEP,this.drawContext.currentGlContext.KEEP),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!1),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST)},L.prototype.doPick=function(){this.drawContext.terrain&&this.drawContext.terrain.pick(this.drawContext),this.drawContext.pickTerrainOnly||(this.subsurfaceMode&&this.hasStencilBuffer?(this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawContext.currentGlContext.clear(this.drawContext.currentGlContext.DEPTH_BUFFER_BIT|this.drawContext.currentGlContext.STENCIL_BUFFER_BIT),this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.ALWAYS,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE),this.drawOrderedRenderables(),this.drawContext.terrain.pick(this.drawContext),this.drawScreenRenderables())):(this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawOrderedRenderables(),this.drawScreenRenderables())))},L.prototype.createTerrain=function(){var t=this.drawContext;t.terrain=this.globe.tessellator.tessellate(t),t.frameStatistics.setTerrainTileCount(t.terrain?t.terrain.surfaceGeometry.length:0)},L.prototype.makeCurrent=function(t){var e=this.drawContext;switch(e.globe.offset=t,e.globeStateKey=e.globe.stateKey,t){case-1:e.terrain=this.terrainLeft;break;case 0:e.terrain=this.terrainCenter;break;case 1:e.terrain=this.terrainRight}},L.prototype.createTerrain2DContiguous=function(){var t=this.drawContext;this.terrainCenter=null,t.globe.offset=0,t.globeStateKey=t.globe.stateKey,t.globe.intersectsFrustum(t.frustumInModelCoordinates)&&(this.terrainCenter=t.globe.tessellator.tessellate(t)),this.terrainRight=null,t.globe.offset=1,t.globeStateKey=t.globe.stateKey,t.globe.intersectsFrustum(t.frustumInModelCoordinates)&&(this.terrainRight=t.globe.tessellator.tessellate(t)),this.terrainLeft=null,t.globe.offset=-1,t.globeStateKey=t.globe.stateKey,t.globe.intersectsFrustum(t.frustumInModelCoordinates)&&(this.terrainLeft=t.globe.tessellator.tessellate(t))},L.prototype.draw2DContiguous=function(){this.terrainCenter&&(this.makeCurrent(0),this.deferOrderedRendering=this.terrainLeft||this.terrainRight,this.doDraw()),this.terrainRight&&(this.makeCurrent(1),this.deferOrderedRendering=this.terrainLeft||this.terrainLeft,this.doDraw()),this.deferOrderedRendering=!1,this.terrainLeft&&(this.makeCurrent(-1),this.doDraw()),this.subsurfaceMode&&this.hasStencilBuffer&&(this.deferOrderedRendering=!0,this.terrainCenter&&(this.makeCurrent(0),this.redrawSurface()),this.terrainRight&&(this.makeCurrent(1),this.redrawSurface()),this.terrainLeft&&(this.makeCurrent(-1),this.redrawSurface())),this.drawScreenRenderables()},L.prototype.pick2DContiguous=function(){this.terrainCenter&&(this.makeCurrent(0),this.deferOrderedRendering=this.terrainLeft||this.terrainRight,this.doPick()),this.terrainRight&&(this.makeCurrent(1),this.deferOrderedRendering=this.terrainLeft||this.terrainLeft,this.doPick()),this.deferOrderedRendering=!1,this.terrainLeft&&(this.makeCurrent(-1),this.doPick())},L.prototype.drawLayers=function(t){var e,n=Date.now(),r=this.drawContext,i=r.layers;r.accumulateOrderedRenderables=t;for(var o=0,a=i.length;o<a;o++)if(e=i[o]){r.currentLayer=e;try{e.render(r)}catch(t){f.log(f.LEVEL_SEVERE,"Error while rendering layer "+e.displayName+".\n"+t.toString())}}r.currentLayer=null;var s=Date.now();r.frameStatistics.layerRenderingTime=s-n},L.prototype.addLayer=function(t){t&&this.layers.push(t)},L.prototype.removeLayer=function(t){var e=this.indexOfLayer(t);e>=0&&this.layers.splice(e,1)},L.prototype.insertLayer=function(t,e){e&&this.layers.splice(t,0,e)},L.prototype.indexOfLayer=function(t){return this.layers.indexOf(t)},L.prototype.drawSurfaceRenderables=function(){var t,e=this.drawContext;for(e.reverseSurfaceRenderables();t=e.popSurfaceRenderable();)try{t.renderSurface(e)}catch(t){f.logMessage(f.LEVEL_WARNING,"WorldWindow","drawSurfaceRenderables","Error while rendering a surface renderable.\n"+t.message)}},L.prototype.drawOrderedRenderables=function(){var t,e=Date.now(),n=this.drawContext;if(n.sortOrderedRenderables(),this._orderedRenderingFilters)for(var r=0;r<this._orderedRenderingFilters.length;r++)this._orderedRenderingFilters[r](this.drawContext);for(n.orderedRenderingMode=!0;t=n.popOrderedRenderable();)try{t.renderOrdered(n)}catch(t){f.logMessage(f.LEVEL_WARNING,"WorldWindow","drawOrderedRenderables","Error while rendering an ordered renderable.\n"+t.message)}n.orderedRenderingMode=!1,n.frameStatistics.orderedRenderingTime=Date.now()-e},L.prototype.drawScreenRenderables=function(){for(var t,e=this.drawContext;t=e.nextScreenRenderable();)try{t.renderOrdered(e)}catch(t){f.logMessage(f.LEVEL_WARNING,"WorldWindow","drawOrderedRenderables","Error while rendering a screen renderable.\n"+t.message)}},L.prototype.resolveTopPick=function(){if(0!=this.drawContext.objectsAtPickPoint.objects.length){var t=this.drawContext.objectsAtPickPoint,e=this.drawContext.readPickColor(this.drawContext.pickPoint),n=null,r=null;if(e){for(var i=0,o=t.objects.length;i<o;i++){var a=t.objects[i];if(a.isTerrain&&(r=a),a.color.equals(e)&&(a.isOnTop=!0,n=a,r))break}this.drawContext.deepPicking||(t.clear(),n&&t.add(n),r&&r!=n&&t.add(r))}else t.clear()}},L.prototype.resolveTerrainPick=function(){for(var t,e=this.drawContext.objectsAtPickPoint,n=0,r=e.objects.length;n<r;n++)if((t=e.objects[n]).isTerrain){t.isOnTop=!0;break}},L.prototype.resolveRegionPick=function(){if(0!=this.drawContext.objectsAtPickPoint.objects.length)for(var t,e=this.drawContext.objectsAtPickPoint,n=this.drawContext.readPickColors(this.drawContext.pickRectangle),r=0,i=e.objects.length;r<i;r++)(t=e.objects[r])&&(n[t.color.toByteString()]?t.isOnTop=!0:t.userObject instanceof _&&(e.objects.splice(r,1),r-=1))},L.prototype.callRedrawCallbacks=function(t){for(var e=0,n=this._redrawCallbacks.length;e<n;e++)try{this._redrawCallbacks[e](this,t)}catch(t){f.log(f.LEVEL_SEVERE,"Exception calling redraw callback.\n"+t.toString())}},L.prototype.goTo=function(t,e){this.goToAnimator.goTo(t,e)},L.prototype.declutter=function(t,n){if(!n)throw new e(f.logMessage(f.LEVEL_SEVERE,"WorldWindow","declutter","Group ID is null, undefined or 0."));for(var r=[],i=0;i<t.orderedRenderables.length;i++){var o=t.orderedRenderables[i].orderedRenderable;o.declutterGroup===n&&r.push(o)}for(var a=[],s=0;s<r.length;s++){var u=r[s],l=u.screenBounds;l&&l.intersectsRectangles(a)?u.targetVisibility=0:(u.targetVisibility=1,l&&a.push(l))}},L.prototype.rayThroughScreenPoint=function(t){if(!t)throw new e(f.logMessage(f.LEVEL_SEVERE,"WorldWindow","rayThroughScreenPoint","missingPoint"));var n=new x(t[0],this.viewport.height-t[1],0),r=new x(0,0,0),i=new x(0,0,0);this.computeViewingTransform(this.scratchProjection,this.scratchModelview);var o=d.fromIdentity();o.setToMultiply(this.scratchProjection,this.scratchModelview);var a=d.fromIdentity();if(a.invertMatrix(o),!a.unProject(n,this.viewport,r))return null;if(n[2]=1,!a.unProject(n,this.viewport,i))return null;var s=this.scratchModelview.extractEyePoint(new x(0,0,0)),u=new x(s[0],s[1],s[2]),l=new x(i[0],i[1],i[2]);return l.subtract(r),l.normalize(),new h(u,l)},L})),i("util/WWMessage",[],(function(){"use strict";return function(t,e){this.type=t,this.source=e}})),i("WorldWind",["./formats/aaigrid/AAIGridConstants","./formats/aaigrid/AAIGridMetadata","./formats/aaigrid/AAIGridReader","./error/AbstractError","./geom/Angle","./shapes/Annotation","./shapes/AnnotationAttributes","./ArcBallCamera","./util/measure/AreaMeasurer","./error/ArgumentError","./globe/AsterV2ElevationCoverage","./layer/AtmosphereLayer","./shaders/AtmosphereProgram","./shaders/BasicProgram","./shaders/BasicTextureProgram","./util/BasicTimeSequence","./BasicWorldWindowController","./layer/BingAerialLayer","./layer/BingAerialWithLabelsLayer","./layer/BingRoadsLayer","./layer/BingWMSLayer","./layer/BMNGLandsatLayer","./layer/BMNGLayer","./layer/BMNGOneImageLayer","./layer/BMNGRestLayer","./geom/BoundingBox","./gesture/ClickRecognizer","./formats/collada/ColladaLoader","./formats/collada/ColladaScene","./util/Color","./shapes/Compass","./layer/CompassLayer","./layer/CoordinatesDisplayLayer","./util/Date","./layer/DigitalGlobeTiledImageLayer","./render/DoubleBufferedFbo","./gesture/DragRecognizer","./render/DrawContext","./globe/EarthElevationModel","./globe/EarthRestElevationCoverage","./globe/ElevationCoverage","./globe/ElevationModel","./FirstPersonCamera","./gesture/FlingRecognizer","./util/Font","./util/FrameStatistics","./layer/FrameStatisticsLayer","./render/FramebufferTexture","./render/FramebufferTile","./render/FramebufferTileController","./geom/Frustum","./globe/GebcoElevationCoverage","./shapes/GeographicMesh","./projections/GeographicProjection","./shapes/GeographicText","./formats/geojson/GeoJSONExporter","./formats/geojson/GeoJSONGeometry","./formats/geojson/GeoJSONGeometryCollection","./formats/geojson/GeoJSONGeometryLineString","./formats/geojson/GeoJSONGeometryMultiLineString","./formats/geojson/GeoJSONGeometryMultiPoint","./formats/geojson/GeoJSONGeometryMultiPolygon","./formats/geojson/GeoJSONGeometryPoint","./formats/geojson/GeoJSONGeometryPolygon","./formats/geojson/GeoJSONParser","./formats/geotiff/GeoTiffReader","./gesture/GestureRecognizer","./globe/Globe","./globe/Globe2D","./util/GoToAnimator","./shaders/GpuProgram","./cache/GpuResourceCache","./shaders/GpuShader","./layer/GriddedDataLayer","./shaders/GridParticleProgram","./shaders/GridParticleSimProgram","./shaders/GroundProgram","./util/HashMap","./layer/heatmap/HeatMapColoredTile","./layer/heatmap/HeatMapIntervalType","./layer/heatmap/HeatMapLayer","./layer/heatmap/HeatMapTile","./util/HighlightController","./util/ImageSource","./render/ImageTile","./util/Insets","./formats/kml/KmlAbstractView","./formats/kml/util/KmlAttribute","./formats/kml/styles/KmlBalloonStyle","./formats/kml/KmlCamera","./formats/kml/util/KmlChange","./formats/kml/styles/KmlColorStyle","./formats/kml/features/KmlContainer","./formats/kml/controls/KmlControls","./formats/kml/util/KmlCreate","./formats/kml/util/KmlDelete","./formats/kml/features/KmlDocument","./formats/kml/KmlElements","./formats/kml/util/KmlElementsFactory","./formats/kml/util/KmlElementsFactoryCached","./formats/kml/features/KmlFeature","./formats/kml/KmlFile","./formats/kml/KmlFileCache","./formats/kml/features/KmlFolder","./formats/kml/geom/KmlGeometry","./formats/kml/features/KmlGroundOverlay","./formats/kml/util/KmlHrefResolver","./formats/kml/KmlIcon","./formats/kml/styles/KmlIconStyle","./formats/kml/util/KmlImagePyramid","./formats/kml/util/KmlItemIcon","./formats/kml/styles/KmlLabelStyle","./formats/kml/KmlLatLonAltBox","./formats/kml/KmlLatLonBox","./formats/kml/KmlLatLonQuad","./formats/kml/geom/KmlLinearRing","./formats/kml/geom/KmlLineString","./formats/kml/styles/KmlLineStyle","./formats/kml/KmlLink","./formats/kml/styles/KmlListStyle","./formats/kml/KmlLocation","./formats/kml/KmlLod","./formats/kml/KmlLookAt","./formats/kml/geom/KmlMultiGeometry","./formats/kml/geom/KmlMultiTrack","./formats/kml/features/KmlNetworkLink","./formats/kml/util/KmlNetworkLinkControl","./formats/kml/util/KmlNodeTransformers","./formats/kml/KmlObject","./formats/kml/KmlOrientation","./formats/kml/features/KmlOverlay","./formats/kml/util/KmlPair","./formats/kml/features/KmlPhotoOverlay","./formats/kml/features/KmlPlacemark","./formats/kml/geom/KmlPoint","./formats/kml/geom/KmlPolygon","./formats/kml/styles/KmlPolyStyle","./formats/kml/util/KmlRefreshListener","./formats/kml/KmlRegion","./formats/kml/util/KmlRemoteFile","./formats/kml/util/KmlScale","./formats/kml/util/KmlSchema","./formats/kml/features/KmlScreenOverlay","./formats/kml/styles/KmlStyle","./formats/kml/styles/KmlStyleMap","./formats/kml/util/KmlStyleResolver","./formats/kml/styles/KmlStyleSelector","./formats/kml/styles/KmlSubStyle","./formats/kml/KmlTimePrimitive","./formats/kml/KmlTimeSpan","./formats/kml/KmlTimeStamp","./formats/kml/features/KmlTour","./formats/kml/geom/KmlTrack","./formats/kml/util/KmlTreeKeyValueCache","./formats/kml/controls/KmlTreeVisibility","./formats/kml/util/KmlUpdate","./formats/kml/util/KmlViewVolume","./formats/kml/KmzFile","./layer/LandsatRestLayer","./layer/Layer","./util/measure/LengthMeasurer","./util/Level","./util/LevelRowColumnUrlBuilder","./util/LevelSet","./geom/Line","./geom/Location","./util/Logger","./navigate/LookAtNavigator","./geom/Matrix","./geom/MeasuredLocation","./util/measure/MeasurerUtils","./cache/MemoryCache","./cache/MemoryCacheListener","./layer/MercatorTiledImageLayer","./navigate/Navigator","./util/NominatimGeocoder","./error/NotYetImplementedError","./util/Offset","./ogc/openSearch/responseFormats/atomParser/OpenSearchAtomParser","./ogc/openSearch/OpenSearchConstants","./ogc/openSearch/descriptionDocument/OpenSearchDescriptionDocument","./ogc/openSearch/responseFormats/atomParser/OpenSearchGeoRssParser","./ogc/openSearch/OpenSearchNamespaces","./ogc/openSearch/descriptionDocument/OpenSearchParameter","./ogc/openSearch/responseFormats/OpenSearchParserRegistry","./ogc/openSearch/OpenSearchRequest","./ogc/openSearch/OpenSearchService","./ogc/openSearch/descriptionDocument/OpenSearchUrl","./ogc/openSearch/OpenSearchUtils","./layer/OpenStreetMapImageLayer","./gesture/PanRecognizer","./shapes/Path","./util/PeriodicTimeSequence","./pick/PickedObject","./pick/PickedObjectList","./gesture/PinchRecognizer","./shapes/Placemark","./shapes/PlacemarkAttributes","./geom/Plane","./shapes/Polygon","./util/PolygonSplitter","./geom/Position","./projections/ProjectionEquirectangular","./projections/ProjectionGnomonic","./projections/ProjectionMercator","./projections/ProjectionPolarEquidistant","./projections/ProjectionUPS","./projections/ProjectionWgs84","./geom/Rectangle","./render/Renderable","./layer/RenderableLayer","./layer/RestTiledImageLayer","./gesture/RotationRecognizer","./shapes/ScreenImage","./shapes/ScreenText","./geom/Sector","./layer/Sentinel2CloudlessLayer","./shapes/ShapeAttributes","./util/editor/ShapeEditor","./formats/shapefile/Shapefile","./layer/ShowTessellationLayer","./shaders/SkyProgram","./layer/StarFieldLayer","./shaders/StarFieldProgram","./util/SunPosition","./shapes/SurfaceImage","./shapes/SurfaceCircle","./shapes/SurfaceEllipse","./shapes/SurfacePolygon","./shapes/SurfacePolyline","./shapes/SurfaceRectangle","./render/SurfaceRenderable","./shapes/SurfaceSector","./shapes/SurfaceShape","./shapes/SurfaceShapeTile","./shapes/SurfaceShapeTileBuilder","./render/SurfaceTile","./render/SurfaceTileRenderer","./shaders/SurfaceTileRendererProgram","./gesture/TapRecognizer","./layer/TectonicPlatesLayer","./globe/Terrain","./globe/TerrainTile","./globe/TerrainTileList","./globe/Tessellator","./shapes/Text","./shapes/TextAttributes","./render/TextRenderer","./render/Texture","./render/TextureTile","./util/Tile","./globe/TiledElevationCoverage","./layer/TiledImageLayer","./util/TileFactory","./gesture/TiltRecognizer","./gesture/Touch","./shapes/TriangleMesh","./error/UnsupportedOperationError","./globe/UsgsNedElevationCoverage","./globe/UsgsNedHiElevationCoverage","./util/UrlBuilder","./geom/Vec2","./geom/Vec3","./layer/ViewControlsLayer","./ogc/wcs/WcsCapabilities","./ogc/wcs/WcsCoverage","./ogc/wcs/WcsCoverageDescriptions","./globe/WcsEarthElevationCoverage","./util/WcsTileUrlBuilder","./ogc/wcs/WebCoverageService","./ogc/WfsCapabilities","./formats/wkt/Wkt","./formats/wkt/WktElements","./formats/wkt/WktExporter","./formats/wkt/geom/WktGeometryCollection","./formats/wkt/geom/WktLineString","./formats/wkt/geom/WktMultiLineString","./formats/wkt/geom/WktMultiPoint","./formats/wkt/geom/WktMultiPolygon","./formats/wkt/geom/WktObject","./formats/wkt/geom/WktPoint","./formats/wkt/geom/WktPolygon","./formats/wkt/WktTokens","./formats/wkt/geom/WktTriangle","./formats/wkt/WktType","./ogc/wms/WmsCapabilities","./layer/WmsLayer","./ogc/wms/WmsLayerCapabilities","./layer/WmsTimeDimensionedLayer","./util/WmsUrlBuilder","./ogc/wmts/WmtsCapabilities","./layer/WmtsLayer","./ogc/wmts/WmtsLayerCapabilities","./WorldWindow","./WorldWindowController","./util/WWMath","./util/WWMessage","./util/WWUtil","./util/XmlDocument"],(function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_,b,S,w,x,T,L,C,A,M,R,O,P,I,N,D,k,F,V,j,B,U,G,K,W,z,Y,H,q,X,Z,J,Q,$,tt,et,nt,rt,it,ot,at,st,ut,lt,ct,ht,ft,pt,dt,gt,mt,yt,vt,Et,_t,bt,St,wt,xt,Tt,Lt,Ct,At,Mt,Rt,Ot,Pt,It,Nt,Dt,kt,Ft,Vt,jt,Bt,Ut,Gt,Kt,Wt,zt,Yt,Ht,qt,Xt,Zt,Jt,Qt,$t,te,ee,ne,re,ie,oe,ae,se,ue,le,ce,he,fe,pe,de,ge,me,ye,ve,Ee,_e,be,Se,we,xe,Te,Le,Ce,Ae,Me,Re,Oe,Pe,Ie,Ne,De,ke,Fe,Ve,je,Be,Ue,Ge,Ke,We,ze,Ye,He,qe,Xe,Ze,Je,Qe,$e,tn,en,nn,rn,on,an,sn,un,ln,cn,hn,fn,pn,dn,gn,mn,yn,vn,En,_n,bn,Sn,wn,xn,Tn,Ln,Cn,An,Mn,Rn,On,Pn,In,Nn,Dn,kn,Fn,Vn,jn,Bn,Un,Gn,Kn,Wn,zn,Yn,Hn,qn,Xn,Zn,Jn,Qn,$n,tr,er,nr,rr,ir,or,ar,sr,ur,lr,cr,hr,fr,pr,dr,gr,mr,yr,vr,Er,_r,br,Sr,wr,xr,Tr,Lr,Cr,Ar,Mr,Rr,Or,Pr,Ir,Nr,Dr,kr,Fr,Vr,jr,Br,Ur,Gr,Kr,Wr,zr,Yr,Hr,qr,Xr,Zr,Jr,Qr,$r,ti,ei,ni,ri,ii,oi,ai,si,ui,li,ci,hi,fi,pi,di,gi,mi,yi,vi,Ei,_i,bi,Si,wi,xi,Ti,Li,Ci,Ai,Mi,Ri){"use strict";var Oi={VERSION:"0.9.0",ABSOLUTE:"absolute",AFTER_REDRAW:"afterRedraw",BEFORE_REDRAW:"beforeRedraw",BEGAN:"began",CANCELLED:"cancelled",CHANGED:"changed",CLAMP_TO_GROUND:"clampToGround",EARTH_RADIUS:6371e3,EAST:"east",ENDED:"ended",FAILED:"failed",FILTER_LINEAR:"filter_linear",FILTER_NEAREST:"filter_nearest",GREAT_CIRCLE:"greatCircle",LINEAR:"linear",MULTI_POINT:"multiPoint",NORTH:"north",NULL:"null",OFFSET_FRACTION:"fraction",OFFSET_INSET_PIXELS:"insetPixels",OFFSET_PIXELS:"pixels",POINT:"point",POLYLINE:"polyline",POLYGON:"polygon",POSSIBLE:"possible",RECOGNIZED:"recognized",REDRAW_EVENT_TYPE:"WorldWindRedraw",RELATIVE_TO_GLOBE:"relativeToGlobe",RELATIVE_TO_GROUND:"relativeToGround",RELATIVE_TO_SCREEN:"relativeToScreen",RHUMB_LINE:"rhumbLine",SOUTH:"south",WEST:"west",WGS84_SEMI_MAJOR_AXIS:6378137,WGS84_INVERSE_FLATTENING:298.257223563};return Oi.AAIGridConstants=t,Oi.AAIGridMetadata=e,Oi.AAIGridReader=n,Oi.AbstractError=r,Oi.Angle=i,Oi.Annotation=o,Oi.AnnotationAttributes=a,Oi.ArcBallCamera=s,Oi.AreaMeasurer=u,Oi.ArgumentError=l,Oi.AsterV2ElevationCoverage=c,Oi.AtmosphereLayer=h,Oi.AtmosphereProgram=f,Oi.BasicProgram=p,Oi.BasicTextureProgram=d,Oi.BasicTimeSequence=g,Oi.BasicWorldWindowController=m,Oi.BingAerialLayer=y,Oi.BingAerialWithLabelsLayer=v,Oi.BingRoadsLayer=E,Oi.BingWMSLayer=_,Oi.BMNGLandsatLayer=b,Oi.BMNGLayer=S,Oi.BMNGOneImageLayer=w,Oi.BMNGRestLayer=x,Oi.BoundingBox=T,Oi.ClickRecognizer=L,Oi.ColladaLoader=C,Oi.ColladaScene=A,Oi.Color=M,Oi.Compass=R,Oi.CompassLayer=O,Oi.CoordinatesDisplayLayer=P,Oi.DateWW=I,Oi.DigitalGlobeTiledImageLayer=N,Oi.DoubleBufferedFbo=D,Oi.DragRecognizer=k,Oi.DrawContext=F,Oi.EarthElevationModel=V,Oi.EarthRestElevationCoverage=j,Oi.ElevationCoverage=B,Oi.ElevationModel=U,Oi.FirstPersonCamera=G,Oi.FlingRecognizer=K,Oi.Font=W,Oi.FrameStatistics=z,Oi.FrameStatisticsLayer=Y,Oi.FramebufferTexture=H,Oi.FramebufferTile=q,Oi.FramebufferTileController=X,Oi.Frustum=Z,Oi.GebcoElevationCoverage=J,Oi.GeographicMesh=Q,Oi.GeographicProjection=$,Oi.GeographicText=tt,Oi.GeoJSONExporter=et,Oi.GeoJSONGeometry=nt,Oi.GeoJSONGeometryCollection=rt,Oi.GeoJSONGeometryLineString=it,Oi.GeoJSONGeometryMultiLineString=ot,Oi.GeoJSONGeometryMultiPoint=at,Oi.GeoJSONGeometryMultiPolygon=st,Oi.GeoJSONGeometryPoint=ut,Oi.GeoJSONGeometryPolygon=lt,Oi.GeoJSONParser=ct,Oi.GeoTiffReader=ht,Oi.GestureRecognizer=ft,Oi.Globe=pt,Oi.Globe2D=dt,Oi.GoToAnimator=gt,Oi.GpuProgram=mt,Oi.GpuResourceCache=yt,Oi.GpuShader=vt,Oi.GriddedDataLayer=Et,Oi.GridParticleProgram=_t,Oi.GridParticleSimProgram=bt,Oi.GroundProgram=St,Oi.HashMap=wt,Oi.HeatMapColoredTile=xt,Oi.HeatMapIntervalType=Tt,Oi.HeatMapLayer=Lt,Oi.HeatMapTile=Ct,Oi.HighlightController=At,Oi.ImageSource=Mt,Oi.ImageTile=Rt,Oi.Insets=Ot,Oi.KmlAbstractView=Pt,Oi.KmlAttribute=It,Oi.KmlBalloonStyle=Nt,Oi.KmlCamera=Dt,Oi.KmlChange=kt,Oi.KmlColorStyle=Ft,Oi.KmlContainer=Vt,Oi.KmlControls=jt,Oi.KmlCreate=Bt,Oi.KmlDelete=Ut,Oi.KmlDocument=Gt,Oi.KmlElements=Kt,Oi.KmlElementsFactory=Wt,Oi.KmlElementsFactoryCached=zt,Oi.KmlFeature=Yt,Oi.KmlFile=Ht,Oi.KmlFileCache=qt,Oi.KmlFolder=Xt,Oi.KmlGeometry=Zt,Oi.KmlGroundOverlay=Jt,Oi.KmlHrefResolver=Qt,Oi.KmlIcon=$t,Oi.KmlIconStyle=te,Oi.KmlImagePyramid=ee,Oi.KmlItemIcon=ne,Oi.KmlLabelStyle=re,Oi.KmlLatLonAltBox=ie,Oi.KmlLatLonBox=oe,Oi.KmlLatLonQuad=ae,Oi.KmlLinearRing=se,Oi.KmlLineString=ue,Oi.KmlLineStyle=le,Oi.KmlListStyle=he,Oi.KmlLink=ce,Oi.KmlLocation=fe,Oi.KmlLod=pe,Oi.KmlLookAt=de,Oi.KmlMultiGeometry=ge,Oi.KmlMultiTrack=me,Oi.KmlNetworkLink=ye,Oi.KmlNetworkLinkControl=ve,Oi.KmlNodeTransformers=Ee,Oi.KmlObject=_e,Oi.KmlOrientation=be,Oi.KmlOverlay=Se,Oi.KmlPair=we,Oi.KmlPhotoOverlay=xe,Oi.KmlPlacemark=Te,Oi.KmlPoint=Le,Oi.KmlPolygon=Ce,Oi.KmlPolyStyle=Ae,Oi.KmlRefreshListener=Me,Oi.KmlRegion=Re,Oi.KmlRemoteFile=Oe,Oi.KmlScale=Pe,Oi.KmlSchema=Ie,Oi.KmlScreenOverlay=Ne,Oi.KmlStyle=De,Oi.KmlStyleMap=ke,Oi.KmlStyleResolver=Fe,Oi.KmlStyleSelector=Ve,Oi.KmlSubStyle=je,Oi.KmlTimePrimitive=Be,Oi.KmlTimeSpan=Ue,Oi.KmlTimeStamp=Ge,Oi.KmlTour=Ke,Oi.KmlTrack=We,Oi.KmlTreeKeyValueCache=ze,Oi.KmlTreeVisibility=Ye,Oi.KmlUpdate=He,Oi.KmlViewVolume=qe,Oi.KmzFile=Xe,Oi.LandsatRestLayer=Ze,Oi.Layer=Je,Oi.LengthMeasurer=Qe,Oi.Level=$e,Oi.LevelRowColumnUrlBuilder=tn,Oi.LevelSet=en,Oi.Line=nn,Oi.Location=rn,Oi.Logger=on,Oi.LookAtNavigator=an,Oi.Matrix=sn,Oi.MeasuredLocation=un,Oi.MeasurerUtils=ln,Oi.MemoryCache=cn,Oi.MemoryCacheListener=hn,Oi.MercatorTiledImageLayer=fn,Oi.Navigator=pn,Oi.NominatimGeocoder=dn,Oi.NotYetImplementedError=gn,Oi.Offset=mn,Oi.OpenSearchAtomParser=yn,Oi.OpenSearchConstants=vn,Oi.OpenSearchDescriptionDocument=En,Oi.OpenSearchGeoRssParser=_n,Oi.OpenSearchNamespaces=bn,Oi.OpenSearchParameter=Sn,Oi.OpenSearchParserRegistry=wn,Oi.OpenSearchRequest=xn,Oi.OpenSearchService=Tn,Oi.OpenSearchUrl=Ln,Oi.OpenSearchUtils=Cn,Oi.OpenStreetMapImageLayer=An,Oi.PanRecognizer=Mn,Oi.Path=Rn,Oi.PeriodicTimeSequence=On,Oi.PickedObject=Pn,Oi.PickedObjectList=In,Oi.PinchRecognizer=Nn,Oi.Placemark=Dn,Oi.PlacemarkAttributes=kn,Oi.Plane=Fn,Oi.Polygon=Vn,Oi.PolygonSplitter=jn,Oi.Position=Bn,Oi.ProjectionEquirectangular=Un,Oi.ProjectionGnomonic=Gn,Oi.ProjectionMercator=Kn,Oi.ProjectionPolarEquidistant=Wn,Oi.ProjectionUPS=zn,Oi.ProjectionWgs84=Yn,Oi.Rectangle=Hn,Oi.Renderable=qn,Oi.RenderableLayer=Xn,Oi.RestTiledImageLayer=Zn,Oi.RotationRecognizer=Jn,Oi.ScreenText=$n,Oi.ScreenImage=Qn,Oi.Sector=tr,Oi.Sentinel2CloudlessLayer=er,Oi.ShapeAttributes=nr,Oi.ShapeEditor=rr,Oi.Shapefile=ir,Oi.ShowTessellationLayer=or,Oi.SkyProgram=ar,Oi.StarFieldLayer=sr,Oi.StarFieldProgram=ur,Oi.SunPosition=lr,Oi.SurfaceImage=cr,Oi.SurfaceCircle=hr,Oi.SurfaceEllipse=fr,Oi.SurfacePolygon=pr,Oi.SurfacePolyline=dr,Oi.SurfaceRectangle=gr,Oi.SurfaceRenderable=mr,Oi.SurfaceSector=yr,Oi.SurfaceShape=vr,Oi.SurfaceShapeTile=Er,Oi.SurfaceShapeTileBuilder=_r,Oi.SurfaceTile=br,Oi.SurfaceTileRenderer=Sr,Oi.SurfaceTileRendererProgram=wr,Oi.TapRecognizer=xr,Oi.TectonicPlatesLayer=Tr,Oi.Terrain=Lr,Oi.TerrainTile=Cr,Oi.TerrainTileList=Ar,Oi.Tessellator=Mr,Oi.Text=Rr,Oi.TextAttributes=Or,Oi.TextRenderer=Pr,Oi.Texture=Ir,Oi.TextureTile=Nr,Oi.Tile=Dr,Oi.TiledElevationCoverage=kr,Oi.TiledImageLayer=Fr,Oi.TileFactory=Vr,Oi.TiltRecognizer=jr,Oi.Touch=Br,Oi.TriangleMesh=Ur,Oi.UsgsNedElevationCoverage=Gr,Oi.UsgsNedHiElevationCoverage=Kr,Oi.UnsupportedOperationError=Wr,Oi.UrlBuilder=zr,Oi.Vec2=Yr,Oi.Vec3=Hr,Oi.ViewControlsLayer=qr,Oi.WcsCapabilities=Xr,Oi.WcsCoverage=Zr,Oi.WcsCoverageDescriptions=Jr,Oi.WcsEarthElevationCoverage=Qr,Oi.WcsTileUrlBuilder=$r,Oi.WebCoverageService=ti,Oi.WfsCapabilities=ei,Oi.Wkt=ni,Oi.WktElements=ri,Oi.WktExporter=ii,Oi.WktGeometryCollection=oi,Oi.WktLineString=ai,Oi.WktMultiLineString=si,Oi.WktMultiPoint=ui,Oi.WktMultiPolygon=li,Oi.WktObject=ci,Oi.WktPoint=hi,Oi.WktPolygon=fi,Oi.WktTokens=pi,Oi.WktTriangle=di,Oi.WktType=gi,Oi.WmsCapabilities=mi,Oi.WmsLayer=yi,Oi.WmsLayerCapabilities=vi,Oi.WmsTimeDimensionedLayer=Ei,Oi.WmsUrlBuilder=_i,Oi.WmtsCapabilities=bi,Oi.WmtsLayer=Si,Oi.WmtsLayerCapabilities=wi,Oi.WWMath=Li,Oi.WWMessage=Ci,Oi.WWUtil=Ai,Oi.WorldWindow=xi,Oi.WorldWindowController=Ti,Oi.configuration={gpuCacheSize:25e7,baseUrl:Ai.worldwindlibLocation()||Ai.currentUrlSansFilePart()+"/../",layerRetrievalQueueSize:16,coverageRetrievalQueueSize:16,bingLogoPlacement:new mn(Oi.OFFSET_INSET_PIXELS,7,Oi.OFFSET_PIXELS,7),bingLogoAlignment:new mn(Oi.OFFSET_FRACTION,1,Oi.OFFSET_FRACTION,0)},Oi.BingMapsKey=null,window.WorldWind=Oi,Oi})),r("WorldWind")}()}).call(this,n(127))},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(150);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(193),i=n(66),o=n(473),a=n(151),s=n(113),u=Math.max;t.exports=function(t,e,n,l){t=i(t)?t:s(t),n=n&&!l?a(n):0;var c=t.length;return n<0&&(n=u(c+n,0)),o(t)?n<=c&&t.indexOf(e,n)>-1:!!c&&r(t,e,n)>-1}},function(t,e,n){var r=n(190),i=n(271),o=n(126);t.exports=function(t,e){return null==t?t:r(t,i(e),o)}},function(t,e,n){!function(t){"use strict";function e(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&T(r),i&&L(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var i,a=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(a&&T(a),t){case"Point":i=r(e).geometry;break;case"LineString":i=s(e).geometry;break;case"Polygon":i=o(e).geometry;break;case"MultiPoint":i=h(e).geometry;break;case"MultiLineString":i=c(e).geometry;break;case"MultiPolygon":i=f(e).geometry;break;default:throw new Error(t+" is invalid")}return a&&(i.bbox=a),i}function r(t,n,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!w(t[0])||!w(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,r)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map((function(t){return r(t,e)})),n)}function o(t,n,r){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===i&&0===a&&!w(o[0][0])||!w(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,r)}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map((function(t){return o(t,e)})),n)}function s(t,n,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!w(t[0][1])||!w(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,r)}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map((function(t){return s(t,e)})),n)}function l(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&T(n),r&&L(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function c(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,r)}function h(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,r)}function f(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,r)}function p(t,n,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,r)}function d(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function g(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=wo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function m(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=wo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function y(t,e){return E(m(t,e))}function v(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function E(t){if(null===t||void 0===t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function _(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function b(t,e,n){if(null===t||void 0===t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return g(m(t,e),n||"kilometers")}function S(t,e,n){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var r=To[e||"meters"];if(!r)throw new Error("invalid original units");var i=To[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function w(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function x(t){return!!t&&t.constructor===Object}function T(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!w(t))throw new Error("bbox must only contain numbers")}))}function L(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function C(t,e,n){if(null!==t)for(var r,i,o,a,s,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,m=d?t.features.length:1,y=0;y<m;y++){s=(c=!!(l=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<s;v++){var E=0,_=0;if(null!==(a=c?l.geometries[v]:l)){u=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":e(u,f,y,E,_),f++,E++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],f,y,E,_),f++,"MultiPoint"===b&&E++;"LineString"===b&&E++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++)e(u[r][i],f,y,E,_),f++;"MultiLineString"===b&&E++,"Polygon"===b&&_++}"Polygon"===b&&E++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===b&&(_=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++)e(u[r][i][o],f,y,E,_),f++;_++}E++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)C(a.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function A(t,e,n,r){var i=n;return C(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r),i}function M(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function R(t,e,n){var r=n;return M(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function O(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function P(t,e,n){var r=n;return O(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function I(t){var e=[];return C(t,(function(t){e.push(t)})),e}function N(t,e){var n,r,i,o,a,s,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,l=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,f,l,c,h);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],f,l,c,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,f,l,c,h);f++}}function D(t,e,n){var r=n;return N(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r}function k(t,n){N(t,(function(t,r,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,i,{bbox:o,id:a}),r,0)}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}t.coordinates.forEach((function(t,o){n(e({type:s,coordinates:t},i),r,o)}))}))}function F(t,e,n){var r=n;return k(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r}function V(t,e){k(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&A(t,(function(o,a,u,l,c,h){var f=s([o,a],t.properties);return e(f,n,r,h,i),i++,a}))}}))}function j(t,e,n){var r=n,i=!1;return V(t,(function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0})),r}function B(t,e){if(!t)throw new Error("geojson is required");k(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":e(t,n,r,0,0);break;case"Polygon":for(var a=0;a<o.length;a++)e(s(o[a],t.properties),n,r,a)}}}))}function U(t,e,n){var r=n;return B(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r}function G(t){var e=[1/0,1/0,-1/0,-1/0];return C(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function K(t){if(!t)throw new Error("obj is required");var e=W(t);if(e.length>1&&w(e[0])&&w(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function W(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return z(e),e;throw new Error("No valid coordinates")}function z(t){if(t.length>1&&w(t[0])&&w(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return z(t[0]);throw new Error("coordinates must only contain numbers")}function Y(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function H(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function q(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function X(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function Z(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function J(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function Q(t,e,n){n=n||{};for(var r=Object.keys(Mo),i=0;i<r.length;i++){var o=r[i],a=n[o];a=void 0!==a&&null!==a?a:Mo[o],Ro[o]=a}Ro.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var s=function(t){var e=[],n=0;return t.rows,t.cols,t.cells.forEach((function(r,i){r.forEach((function(r,o){if(void 0!==r&&!function(t){return 5===t.cval||10===t.cval}(r)&&!tt(r)){var a=function(t,e,n){var r,i,o,a=t.length,s=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],l=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=(t[e][n],t[e][n]),f=h.cval,p=nt(h,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][f]);s.push([n+p[0],e+p[1]]),p=nt(h,o=c[f]),s.push([n+p[0],e+p[1]]),et(h);for(var d=n+u[f],g=e+l[f],m=f;d>=0&&g>=0&&g<a&&(d!=n||g!=e)&&void 0!==(h=t[g][d]);){if(0===(f=h.cval)||15===f)return{path:s,info:"mergeable"};o=c[f],r=u[f],i=l[f],5!==f&&10!==f||(5===f?h.flipped?-1===l[m]?(o="left",r=-1,i=0):(o="right",r=1,i=0):-1===u[m]&&(o="bottom",r=0,i=-1):10===f&&(h.flipped?-1===u[m]?(o="top",r=0,i=1):(o="bottom",r=0,i=-1):1===l[m]&&(o="left",r=-1,i=0))),p=nt(h,o),s.push([d+p[0],g+p[1]]),et(h),d+=r,g+=i,m=f}return{path:s,info:"closed"}}(t.cells,i,o),s=!1;if("mergeable"===a.info)for(var u=a.path[a.path.length-1][0],l=a.path[a.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-u)<=1e-7&&Math.abs(e[c][0][1]-l)<=1e-7){for(var h=a.path.length-2;h>=0;--h)e[c].unshift(a.path[h]);s=!0;break}s||(e[n++]=a.path)}}))})),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var a=0;a<r;++a){var s=0,u=t[o+1][a],l=t[o+1][a+1],c=t[o][a+1],h=t[o][a];if(!(isNaN(u)||isNaN(l)||isNaN(c)||isNaN(h))){s|=u>=e?8:0,s|=l>=e?4:0,s|=c>=e?2:0;var f,p,d,g,m=!1;if(5===(s|=h>=e?1:0)||10===s){var y=(u+l+c+h)/4;5===s&&y<e?(s=10,m=!0):10===s&&y<e&&(s=5,m=!0)}0!==s&&15!==s&&(f=p=d=g=.5,1===s?(d=1-$(e,u,h),p=1-$(e,c,h)):2===s?(p=$(e,h,c),g=1-$(e,l,c)):3===s?(d=1-$(e,u,h),g=1-$(e,l,c)):4===s?(f=$(e,u,l),g=$(e,c,l)):5===s?(f=$(e,u,l),g=$(e,c,l),p=1-$(e,c,h),d=1-$(e,u,h)):6===s?(p=$(e,h,c),f=$(e,u,l)):7===s?(d=1-$(e,u,h),f=$(e,u,l)):8===s?(d=$(e,h,u),f=1-$(e,l,u)):9===s?(p=1-$(e,c,h),f=1-$(e,l,u)):10===s?(f=1-$(e,l,u),g=1-$(e,l,c),p=$(e,h,c),d=$(e,h,u)):11===s?(f=1-$(e,l,u),g=1-$(e,l,c)):12===s?(d=$(e,h,u),g=$(e,c,l)):13===s?(p=1-$(e,c,h),g=$(e,c,l)):14===s?(d=$(e,h,u),p=$(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),i.cells[o][a]={cval:s,flipped:m,top:f,right:g,bottom:p,left:d})}}}return i}(t,e));return"function"==typeof Ro.successCallback&&Ro.successCallback(s),s}function $(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function rt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function it(t,e){if(!(this instanceof it))return new it(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function ot(t,e){at(t,0,t.children.length,e,t)}function at(t,e,n,r,i){i||(i=dt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],st(i,t.leaf?r(o):o);return i}function st(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ut(t,e){return t.minX-e.minX}function lt(t,e){return t.minY-e.minY}function ct(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ht(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ft(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function pt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function dt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gt(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,Oo(t,o,e,n,i),a.push(e,o,o,n))}function mt(t,e){return t(e={exports:{}},e.exports),e.exports}function yt(t,e){if(!(this instanceof yt))return new yt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function vt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var s=[e,n,r,i],u=s.slice();for(o=0;o<t.length;o++)Wo(t[o],s)||u.push(t[o]);var l=Bo(u),c=[];for(o=0;o<l.length;o++)c.push(u[l[o]]);return c}(t),o=Po(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<i.length;s++){var u=i[s];o.remove(u),r=wt(u,r),a.push(r)}var l=Po(16);for(s=0;s<a.length;s++)l.insert(St(a[s]));for(var c=e*e,h=n*n;a.length;){var f=a.shift(),p=f.p,d=f.next.p,g=xt(p,d);if(!(g<h)){var m=g/c;(u=function(t,e,n,r,i,o,a){for(var s=new Go(null,Et),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],h=u.leaf?Tt(c,n,r):function(t,e,n){if(_t(t,n)||_t(e,n))return 0;var r=Lt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=Lt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=Lt(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=Lt(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}(n,r,c);h>o||s.push({node:c,dist:h})}for(;s.length&&!s.peek().node.children;){var f=s.pop(),p=f.node,d=Tt(p,e,n),g=Tt(p,r,i);if(f.dist<d&&f.dist<g&&bt(n,p,a)&&bt(r,p,a))return p}(u=s.pop())&&(u=u.node)}return null}(o,f.prev.p,p,d,f.next.next.p,m,l))&&Math.min(xt(u,p),xt(u,d))<=m&&(a.push(f),a.push(wt(u,f)),o.remove(u),l.remove(f),l.insert(St(f)),l.insert(St(f.next)))}}f=r;var y=[];do{y.push(f.p),f=f.next}while(f!==r);return y.push(f.p),y}function Et(t,e){return t.dist-e.dist}function _t(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function bt(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),s=n.search({minX:r,minY:i,maxX:o,maxY:a}),u=0;u<s.length;u++)if(function(t,e,n,r){return t!==r&&e!==n&&zo(t,e,n)>0!=zo(t,e,r)>0&&zo(n,r,t)>0!=zo(n,r,e)>0}(s[u].p,s[u].next.p,t,e))return!1;return!0}function St(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function wt(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function xt(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Tt(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function Lt(t,e,n,r,i,o,a,s){var u,l,c,h,f=n-t,p=r-e,d=a-i,g=s-o,m=t-i,y=e-o,v=f*f+p*p,E=f*d+p*g,_=d*d+g*g,b=f*m+p*y,S=d*m+g*y,w=v*_-E*E,x=w,T=w;0===w?(l=0,x=1,h=S,T=_):(h=v*S-E*b,(l=E*S-_*b)<0?(l=0,h=S,T=_):l>x&&(l=x,h=S+E,T=_)),h<0?(h=0,-b<0?l=0:-b>v?l=x:(l=-b,x=v)):h>T&&(h=T,-b+E<0?l=0:-b+E>v?l=x:(l=-b+E,x=v));var L=(1-(c=0===h?0:h/T))*i+c*a-((1-(u=0===l?0:l/x))*t+u*n),C=(1-c)*o+c*s-((1-u)*e+u*r);return L*L+C*C}function Ct(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(C(t,(function(t){r.push([t[0],t[1]])})),!r.length)return null;var i=Yo(r,n);return i.length>3?o([i]):null}function At(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=K(t),o=W(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===a&&(o=[o]);for(var u=0,l=!1;u<o.length&&!l;u++)if(Mt(i,o[u][0],r)){for(var c=!1,h=1;h<o[u].length&&!c;)Mt(i,o[u][h],!r)&&(c=!0),h++;c||(l=!0)}return l}function Mt(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+l*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!n;s>t[1]!=l>t[1]&&t[0]<(u-a)*(t[1]-s)/(l-s)+a&&(r=!r)}return r}function Rt(t,e){var n=[];return N(e,(function(e){O(t,(function(t){At(t,e)&&n.push(t)}))})),l(n)}function Ot(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return l(function(t){if(t.length<3)return[];t.sort(It);for(var e,n,r,i,o,a,s=t.length-1,u=t[s].x,l=t[0].x,c=t[s].y,h=c;s--;)t[s].y<c&&(c=t[s].y),t[s].y>h&&(h=t[s].y);var f,p=l-u,d=h-c,g=p>d?p:d,m=.5*(l+u),y=.5*(h+c),v=[new Pt({x:m-20*g,y:y-g,__sentinel:!0},{x:m,y:y+20*g,__sentinel:!0},{x:m+20*g,y:y-g,__sentinel:!0})],E=[],_=[];for(s=t.length;s--;){for(_.length=0,f=v.length;f--;)(p=t[s].x-v[f].x)>0&&p*p>v[f].r?(E.push(v[f]),v.splice(f,1)):p*p+(d=t[s].y-v[f].y)*d>v[f].r||(_.push(v[f].a,v[f].b,v[f].b,v[f].c,v[f].c,v[f].a),v.splice(f,1));for(Nt(_),f=_.length;f;)n=_[--f],e=_[--f],r=t[s],i=n.x-e.x,o=n.y-e.y,a=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(a)>1e-12&&v.push(new Pt(e,n,r))}for(Array.prototype.push.apply(E,v),s=E.length;s--;)(E[s].a.__sentinel||E[s].b.__sentinel||E[s].c.__sentinel)&&E.splice(s,1);return E}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],a={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):a={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,r,i,e]],a)})))}function Pt(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,u=n.y-t.y,l=o*(t.x+e.x)+a*(t.y+e.y),c=s*(t.x+n.x)+u*(t.y+n.y),h=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(u*l-a*c)/h,this.y=(o*c-s*l)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i}function It(t,e){return e.x-t.x}function Nt(t){var e,n,r,i,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],r=a;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(a,2),t.splice(r,2),a-=2;continue t}}function Dt(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.units,i=K(t),o=K(e),a=_(o[1]-i[1]),s=_(o[0]-i[0]),u=_(i[1]),l=_(o[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(l);return g(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r)}function kt(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Ft(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Ft(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Vt(t);default:throw new Error("unknown GeoJSON type")}}function Ft(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=function t(e){var n={};return e?(Object.keys(e).forEach((function(r){var i=e[r];"object"==typeof i?null===i?n[r]=null:i.length?n[r]=i.map((function(t){return t})):n[r]=t(i):n[r]=i})),n):n}(t.properties),e.geometry=Vt(t.geometry),e}function Vt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Vt(t)})),e):(e.coordinates=function t(e){return"object"!=typeof e[0]?e.slice():e.map((function(e){return t(e)}))}(t.coordinates),e)}function jt(t,e){function n(t,e){e.length&&e.pop();for(var n=u[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(s(n[r],r));t<0&&Zo(e,i)}function r(t){return s(t)}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function a(t){return t.map(o)}var s=Xo(t.transform),u=t.arcs;return function t(e){var n,o=e.type;switch(o){case"GeometryCollection":return{type:o,geometries:e.geometries.map(t)};case"Point":n=r(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(r);break;case"LineString":n=i(e.arcs);break;case"MultiLineString":n=e.arcs.map(i);break;case"Polygon":n=a(e.arcs);break;case"MultiPolygon":n=e.arcs.map(a);break;default:return null}return{type:o,coordinates:n}}(e)}function Bt(t,e){function n(t){t.forEach((function(e){e.forEach((function(e){(i[e=e<0?~e:e]||(i[e]=[])).push(t)}))})),o.push(t)}function r(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(jt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var i={},o=[],a=[];return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}})),o.forEach((function(t){if(!t._){var e=[],n=[t];for(t._=1,a.push(e);t=n.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){i[t<0?~t:t].forEach((function(t){t._||(t._=1,n.push(t))}))}))}))}})),o.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:a.map((function(e){var n,o=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){i[t<0?~t:t].length<2&&o.push(t)}))}))})),(n=(o=Jo(t,o)).length)>1)for(var a,s,u=1,l=r(o[0]);u<n;++u)(a=r(o[u]))>l&&(s=o[0],o[0]=o[u],o[u]=s,l=a);return o}))}}function Ut(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Gt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(Kt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?Kt:Wt)(t)}function Kt(t){var e,n=Wt(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Wt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Wt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function zt(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Yt(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}function Ht(t){return t[0].toString()+","+t[1].toString()}function qt(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=kt(t));var r=function(t){var e={};k(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return function(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=kt(t));var r=[],i=U(t,(function(t,e){return function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Ht(r[0]),a=Ht(r[r.length-1]),u=Ht(i[0]),l=Ht(i[i.length-1]);if(o===l)n=i.concat(r.slice(1));else if(u===a)n=r.concat(i.slice(1));else if(o===u)n=r.slice(1).reverse().concat(i);else{if(a!==l)return null;n=r.concat(i.reverse().slice(1))}return s(n)}(t,e)||(r.push(t),e)}));return i&&r.push(i),r.length?1===r.length?r[0]:c(r.map((function(t){return t.coordinates}))):null}(t,e);case"Polygon":return function(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=kt(t));var r=[];k(t,(function(t){r.push(t.geometry)}));var i=aa({geoms:p(r).geometry});return Qo(i,i.objects.geoms.geometries)}(t,e);default:throw new Error(r+" is not supported")}}function Xt(t,n){var r="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var i=J(t),o=[];switch(i){case"LineString":o=Zt(t);break;case"MultiLineString":case"Polygon":W(t).forEach((function(t){o.push(Zt(t))}));break;case"MultiPolygon":W(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(Zt(t))})),o.push(e)}));break;case"Point":return t;case"MultiPoint":var a={};W(t).forEach((function(t){var e=t.join("-");a.hasOwnProperty(e)||(o.push(t),a[e]=!0)}));break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=o,t):{type:i,coordinates:o}:!0===r?(t.geometry.coordinates=o,t):e({type:i,coordinates:o},t.properties,t.bbox,t.id)}function Zt(t){var e=W(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,r,i,o=[],a=e.length-1;o.push(e[0]);for(var s=1;s<a;s++)n=e[s-1],r=e[s],function(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],u=e[1],l=s-o,c=u-a;return(r-o)*c-(i-a)*l==0&&(Math.abs(l)>=Math.abs(c)?l>0?o<=r&&r<=s:s<=r&&r<=o:c>0?a<=i&&i<=u:u<=i&&i<=a)}(n,i=e[s+1],r)||o.push(r);return o.push(i),o}function Jt(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function Qt(t,e,n){var r=e.x,i=e.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return(o=t.x-r)*o+(a=t.y-i)*a}function $t(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return function(t,e){var n=t.length-1,r=[t[0]];return function t(e,n,r,i,o){for(var a,s=i,u=n+1;u<r;u++){var l=Qt(e[u],e[n],e[r]);l>s&&(a=u,s=l)}s>i&&(a-n>1&&t(e,n,a,i,o),o.push(e[a]),r-a>1&&t(e,a,r,i,o))}(t,0,n,e,r),r.push(t[n]),r}(t=n?t:function(t,e){for(var n,r=t[0],i=[r],o=1,a=t.length;o<a;o++)Jt(n=t[o],r)>e&&(i.push(n),r=n);return r!==n&&i.push(n),i}(t,r),r)}function te(t,e,n){return $t(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function ee(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var i=$t(r,e,n).map((function(t){return[t.x,t.y]}));!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(i);)i=$t(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function ne(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!w(n))throw new Error("resolution must be an number");if(!w(r))throw new Error("sharpness must be an number");for(var i=[],o=new sa({points:X(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),duration:n,sharpness:r}),a=0;a<o.duration;a+=10){var u=o.pos(a);Math.floor(a/100)%2==0&&i.push([u.x,u.y])}return s(i,t.properties)}function re(t){T(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[e,n];return o([[a,[r,n],[r,i],[e,i],a]])}function ie(t){return re(G(t))}function oe(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(Dt(t.slice(0,2),[r,n])>=Dt(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var a=(e+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}function ae(t,e,n,i){if(!x(i=i||{}))throw new Error("options is invalid");var o=i.units,a=i.properties,s=K(t),u=_(s[0]),l=_(s[1]),c=_(n),h=m(e,o),f=Math.asin(Math.sin(l)*Math.cos(h)+Math.cos(l)*Math.sin(h)*Math.cos(c));return r([E(u+Math.atan2(Math.sin(c)*Math.sin(h)*Math.cos(l),Math.cos(h)-Math.sin(l)*Math.sin(f))),E(f)],a)}function se(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var a=[],s=0;s<r;s++)a.push(ae(t,e,-360*s/r,n).geometry.coordinates);return a.push(a[0]),o([a],i)}function ue(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return function(t,e){var n=ue(e,t);return(n+180)%360}(t,e);var r=K(t),i=K(e),o=_(r[0]),a=_(i[0]),s=_(r[1]),u=_(i[1]),l=Math.sin(a-o)*Math.cos(u),c=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o);return E(Math.atan2(l,c))}function le(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var i=G(t);return r([(i[0]+i[2])/2,(i[1]+i[3])/2],n)}function ce(t,e){var n=0,i=0,o=0;return C(t,(function(t){n+=t[0],i+=t[1],o++}),!0),r([n/o,i/o],e)}function he(t){var e=[];return"FeatureCollection"===t.type?O(t,(function(t){C(t,(function(n){e.push(r(n,t.properties))}))})):C(t,(function(n){e.push(r(n,t.properties))})),l(e)}function fe(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,h=c?e[0]*n:t.length,f=pe(t,0,h,n,!0),p=[];if(!f)return p;if(c&&(f=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=pe(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(a));for(s.sort(ge),i=0;i<s.length;i++)!function(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&ye(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&be(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=Se(e,t);de(n,n.next)}}(s[i],n),n=de(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<r&&(r=s),(u=t[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return function t(e,n,r,i,o,a,s){if(e){!s&&a&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=me(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,i,o,a);for(var u,l,c=e;e.prev!==e.next;)if(u=e.prev,l=e.next,a?function(t,e,n,r){var i=t.prev,o=t,a=t.next;if(ve(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=me(s,u,e,n,r),f=me(l,c,e,n,r),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&ye(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ve(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&ye(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ve(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}(e,i,o,a):function(t){var e=t.prev,n=t,r=t.next;if(ve(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(ye(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&ve(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}(e))n.push(u.i/r),n.push(e.i/r),n.push(l.i/r),xe(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?t(e=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Ee(i,o)&&_e(i,r,r.next,o)&&be(i,o)&&be(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),xe(r),xe(r.next),r=t=o),r=r.next}while(r!==t);return r}(e,n,r),n,r,i,o,a,2):2===s&&function(e,n,r,i,o,a){var s=e;do{for(var u=s.next.next;u!==s.prev;){if(s.i!==u.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&_e(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&be(t,e)&&be(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}(s,u)){var l=Se(s,u);return s=de(s,s.next),l=de(l,l.next),t(s,n,r,i,o,a),void t(l,n,r,i,o,a)}u=u.next}s=s.next}while(s!==e)}(e,n,r,i,o,a):t(de(e),n,r,i,o,a,1);break}}}(f,p,n,r,i,l),p}function pe(t,e,n,r,i){var o,a;if(i===Le(t,e,n,r)>0)for(o=e;o<n;o+=r)a=we(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=we(o,t[o],t[o+1],a);return a&&Ee(a,a.next)&&(xe(a),a=a.next),a}function de(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Ee(r,r.next)&&0!==ve(r.prev,r,r.next))r=r.next;else{if(xe(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function ge(t,e){return t.x-e.x}function me(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ye(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function ve(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ee(t,e){return t.x===e.x&&t.y===e.y}function _e(t,e,n,r){return!!(Ee(t,e)&&Ee(n,r)||Ee(t,r)&&Ee(n,e))||ve(t,e,n)>0!=ve(t,e,r)>0&&ve(n,r,t)>0!=ve(n,r,e)>0}function be(t,e){return ve(t.prev,t,t.next)<0?ve(t,e,t.next)>=0&&ve(t,t.prev,e)>=0:ve(t,e,t.prev)<0||ve(t,t.next,e)<0}function Se(t,e){var n=new Te(t.i,t.x,t.y),r=new Te(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function we(t,e,n,r){var i=new Te(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function xe(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Te(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Le(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Ce(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=ua(e.vertices,e.holes,2),r=[],i=[];n.forEach((function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var a=0;a<i.length;a+=3){var s=i.slice(a,a+3);s.push(i[a]),r.push(o([s]))}return r}function Ae(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0;return O(e,(function(e,i){var o=Dt(t,e);o<r&&((n=kt(e)).properties.featureIndex=i,n.properties.distanceToPoint=o,r=o)})),n}function Me(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var h=e[n],f=r,p=i;for(Re(e,r,n),o(e[i],h)>0&&Re(e,r,i);f<p;){for(Re(e,f,p),f++,p--;o(e[f],h)<0;)f++;for(;o(e[p],h)>0;)p--}0===o(e[r],h)?Re(e,r,p):Re(e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}(t,e,n||0,r||t.length-1,i||function(t,e){return t<e?-1:t>e?1:0})}function Re(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Oe(t,e){if(!(this instanceof Oe))return new Oe(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Pe(t,e){Ie(t,0,t.children.length,e,t)}function Ie(t,e,n,r,i){i||(i=Ue(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],Ne(i,t.leaf?r(o):o);return i}function Ne(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function De(t,e){return t.minX-e.minX}function ke(t,e){return t.minY-e.minY}function Fe(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Ve(t){return t.maxX-t.minX+(t.maxY-t.minY)}function je(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Be(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ue(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ge(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(Me(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),a.push(e,o,o,n))}function Ke(t){var e=Oe(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=We(e)).bbox=e}else t.bbox=t.bbox?t.bbox:ze(t);return Oe.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var n=We(t);n.bbox=t,e.push(n)})):O(t,(function(t){t.bbox=t.bbox?t.bbox:ze(t),e.push(t)})),Oe.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=We(e)).bbox=e}return Oe.prototype.remove.call(this,t)},e.clear=function(){return Oe.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Oe.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Oe.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Oe.prototype.all.call(this)}},e.toJSON=function(){return Oe.prototype.toJSON.call(this)},e.fromJSON=function(t){return Oe.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:ze(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function We(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function ze(t){var e=[1/0,1/0,-1/0,-1/0];return C(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function Ye(t){if(!t)throw new Error("geojson is required");var e=[];return k(t,(function(t){!function(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=W(r);break;case"LineString":n=[W(r)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,r){var i=s([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),l(e)}function He(t,n){var r={},i=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=qe(t,n);return o&&i.push(o),l(i)}var a=Ke();return a.load(Ye(n)),O(Ye(t),(function(t){O(a.search(t),(function(e){var n=qe(t,e);if(n){var o=W(n).join(",");r[o]||(r[o]=!0,i.push(n))}}))})),l(i)}function qe(t,e){var n=W(t),i=W(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],a=n[0][1],s=n[1][0],u=n[1][1],l=i[0][0],c=i[0][1],h=i[1][0],f=i[1][1],p=(f-c)*(s-o)-(h-l)*(u-a);if(0===p)return null;var d=((h-l)*(a-c)-(f-c)*(o-l))/p,g=((s-o)*(a-c)-(u-a)*(o-l))/p;return d>=0&&d<=1&&g>=0&&g<=1?r([o+d*(s-o),a+d*(u-a)]):null}function Xe(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var o=r([1/0,1/0],{dist:1/0}),a=0;return k(t,(function(t){for(var i=W(t),u=0;u<i.length-1;u++){var l=r(i[u]);l.properties.dist=Dt(e,l,n);var c=r(i[u+1]);c.properties.dist=Dt(e,c,n);var h=Dt(l,c,n),f=Math.max(l.properties.dist,c.properties.dist),p=ue(l,c),d=ae(e,f,p+90,n),g=ae(e,f,p-90,n),m=He(s([d.geometry.coordinates,g.geometry.coordinates]),s([l.geometry.coordinates,c.geometry.coordinates])),y=null;m.features.length>0&&((y=m.features[0]).properties.dist=Dt(e,y,n),y.properties.location=a+Dt(l,y,n)),l.properties.dist<o.properties.dist&&((o=l).properties.index=u,o.properties.location=a),c.properties.dist<o.properties.dist&&((o=c).properties.index=u+1,o.properties.location=a+h),y&&y.properties.dist<o.properties.dist&&((o=y).properties.index=u),a+=h}})),o}function Ze(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r,i=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return(r=i?Je(K(e),K(t)):Je(K(t),K(e)))>180?-(360-r):r}function Je(t,e){var n=_(t[1]),r=_(e[1]),i=_(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(E(Math.atan2(i,o))+360)%360}function Qe(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=K(t),o=K(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,b(function(t,e,n){var r=n=void 0===n?So:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,a=o-i,s=Math.abs(e[0]-t[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),l=Math.abs(u)>1e-11?a/u:Math.cos(i);return Math.sqrt(a*a+l*l*s*s)*r}(i,o),"meters",r)}function $e(t,e){return en(t,"mercator",e)}function tn(t,e){return en(t,"wgs84",e)}function en(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&w(t[0])?t="mercator"===e?nn(t):rn(t):(!0!==r&&(t=kt(t)),C(t,(function(t){var n="mercator"===e?nn(t):rn(t);t[0]=n[0],t[1]=n[1]}))),t}function nn(t){var e=Math.PI/180,n=20037508.342789244,r=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>n&&(r[0]=n),r[0]<-n&&(r[0]=-n),r[1]>n&&(r[1]=n),r[1]<-n&&(r[1]=-n),r}function rn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function on(t,n,i){if(!x(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=r(t):"Point"===t.type?t=e(t):H(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=s(n):"LineString"===n.type?n=e(n):H(n,"LineString","line");var o=1/0,a=t.geometry.coordinates;return V(n,(function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],s=function(t,e,n,i){var o=i.mercator,a=!0!==o?Dt(e,t,i):an(e,t,i),s=v(!0!==o?ue(e,t):Ze(e,t)),u=v(!0!==o?ue(e,n):Ze(e,n)),l=Math.abs(s-u);if(l>90)return a;var c=(u+180)%360,h=v(!0!==o?ue(n,t):Ze(n,t)),f=Math.abs(h-c);return f>180&&(f=Math.abs(f-360)),f>90?!0!==o?Dt(t,n,i):an(t,n,i):!0!==o?a*Math.sin(_(l)):function(t,e,n,i){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var a=r(n),s=tn(function(t,e,n){var r=t[0],i=t[1],o=e[0]-r,a=e[1]-i,s=((n[0]-r)*o+(n[1]-i)*a)/(o*o+a*a);return[r+s*o,i+s*a]}($e([t[0]+o,t[1]]),$e([e[0]+o,e[1]]),$e([n[0]+o,n[1]])));return 0!==o&&(s[0]-=o),Qe(a,s,i)}(e,n,t,i)}(a,e,n,i);o>s&&(o=s)})),o}function an(t,e,n){var r=n.units,i=0;Math.abs(t[0])>=180&&(i=t[0]>0?-180:180),Math.abs(e[0])>=180&&(i=e[0]>0?-180:180);var o=$e([t[0]+i,t[1]]),a=$e([e[0]+i,e[1]]),s=function(t){return t*t},u=s(o[0]-a[0])+s(o[1]-a[1]);return b(Math.sqrt(u),"meters",r)}function sn(t){for(var n=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?l([e(t)]):l([t]):t}(t),i=le(n),o=!1,a=0;!o&&a<n.features.length;){var s,u=n.features[a].geometry,c=!1;if("Point"===u.type)i.geometry.coordinates[0]===u.coordinates[0]&&i.geometry.coordinates[1]===u.coordinates[1]&&(o=!0);else if("MultiPoint"===u.type){var h=!1;for(s=0;!h&&s<u.coordinates.length;)i.geometry.coordinates[0]===u.coordinates[s][0]&&i.geometry.coordinates[1]===u.coordinates[s][1]&&(o=!0,h=!0),s++}else if("LineString"===u.type)for(s=0;!c&&s<u.coordinates.length-1;)un(i.geometry.coordinates[0],i.geometry.coordinates[1],u.coordinates[s][0],u.coordinates[s][1],u.coordinates[s+1][0],u.coordinates[s+1][1])&&(c=!0,o=!0),s++;else if("MultiLineString"===u.type)for(var f=0;f<u.coordinates.length;){c=!1,s=0;for(var p=u.coordinates[f];!c&&s<p.length-1;)un(i.geometry.coordinates[0],i.geometry.coordinates[1],p[s][0],p[s][1],p[s+1][0],p[s+1][1])&&(c=!0,o=!0),s++;f++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||At(i,u)&&(o=!0);a++}if(o)return i;var d=l([]);for(a=0;a<n.features.length;a++)d.features=d.features.concat(he(n.features[a]).features);return r(Ae(i,d).geometry.coordinates)}function un(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function ln(t){return D(t,(function(t,e){return t+function t(e){var n,r=0;switch(e.type){case"Polygon":return cn(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=cn(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}}(e)}),0)}function cn(t){var e=0;if(t&&t.length>0){e+=Math.abs(hn(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(hn(t[n]))}return e}function hn(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(fn(t[o][0])-fn(e[0]))*Math.sin(fn(n[1]));s=s*ha*ha/2}return s}function fn(t){return t*Math.PI/180}function pn(t,e){if(!x(e=e||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return j(t,(function(t,n){var r=n.geometry.coordinates;return t+Dt(r[0],r[1],e)}),0)}function dn(t,e,n,r){if(!x(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var a,u,l,c=0,h=0;h<i.length&&!(e>=c&&h===i.length-1);h++){if(c>e&&0===o.length){if(!(a=e-c))return o.push(i[h]),s(o);u=ue(i[h],i[h-1])-180,l=ae(i[h],a,u,r),o.push(l.geometry.coordinates)}if(c>=n)return(a=n-c)?(u=ue(i[h],i[h-1])-180,l=ae(i[h],a,u,r),o.push(l.geometry.coordinates),s(o)):(o.push(i[h]),s(o));if(c>=e&&o.push(i[h]),h===i.length-1)return s(o);c+=Dt(i[h],i[h+1],r)}return s(i[i.length-1])}function gn(t,e,n){var r=(n=n||{}).ignoreEndVertices;if(!x(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var i=K(t),o=W(e),a=0;a<o.length-1;a++){var s=!1;if(r&&(0===a&&(s="start"),a===o.length-2&&(s="end"),0===a&&a+1===o.length-1&&(s="both")),function(t,e,n,r){var i=n[0],o=n[1],a=t[0],s=t[1],u=e[0],l=e[1],c=u-a,h=l-s;return(n[0]-a)*h-(n[1]-s)*c==0&&(r?"start"===r?Math.abs(c)>=Math.abs(h)?c>0?a<i&&i<=u:u<=i&&i<a:h>0?s<o&&o<=l:l<=o&&o<s:"end"===r?Math.abs(c)>=Math.abs(h)?c>0?a<=i&&i<u:u<i&&i<=a:h>0?s<=o&&o<l:l<o&&o<=s:"both"===r?Math.abs(c)>=Math.abs(h)?c>0?a<i&&i<u:u<i&&i<a:h>0?s<o&&o<l:l<o&&o<s:void 0:Math.abs(c)>=Math.abs(h)?c>0?a<=i&&i<=u:u<=i&&i<=a:h>0?s<=o&&o<=l:l<=o&&o<=s)}(o[a],o[a+1],i,s))return!0}return!1}function mn(t,e){var n=J(t),r=J(e),i=X(t),o=X(e);switch(n){case"Point":switch(r){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(vn(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"LineString":return gn(i,o,{ignoreEndVertices:!0});case"Polygon":return At(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)vn(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!gn(t.coordinates[r],e))return!1;n||(n=gn(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(i,o);case"Polygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=At(t.coordinates[1],e);if(!i){n=!1;break}i=At(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!gn(t.coordinates[n],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){if(!yn(G(e),G(t)))return!1;for(var n=!1,r=0;r<t.coordinates.length-1;r++){if(!At(t.coordinates[r],e))return!1;n||(n=At(t.coordinates[r],e,{ignoreBoundary:!0})),n||(n=At(function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0}))}return n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(t,e){var n=G(t);if(!yn(G(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!At(t.coordinates[0][r],e))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function yn(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function vn(t,e){return t[0]===e[0]&&t[1]===e[1]}function En(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var i=n.mask,o=n.properties,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!w(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],c=t[2],h=t[3],f=e/Dt([s,u],[c,u],n)*(c-s),p=e/Dt([s,u],[s,h],n)*(h-u),d=c-s,g=h-u,m=Math.floor(d/f),y=(g-Math.floor(g/p)*p)/2,v=s+(d-m*f)/2;v<=c;){for(var E=u+y;E<=h;){var _=r([v,E],o);i?mn(_,i)&&a.push(_):a.push(_),E+=p}v+=f}return l(a)}function _n(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=void 0===n||null===n||isNaN(n)?6:n,r=void 0===r||null===r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return C(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t}function bn(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!bn(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function Sn(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function wn(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!wn(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function xn(t,e){var n=[],r=Ke();return k(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var i=r.search(e);if(i.features.length){var o=Ln(e,i);n=n.filter((function(t){return t.id!==o.id})),r.remove(o),O(Tn(o,e),(function(t){n.push(t),r.insert(t)}))}}else(n=Tn(t,e).features).forEach((function(t){t.bbox||(t.bbox=oe(G(t)))})),r.load(l(n))})),l(n)}function Tn(t,e){var n=[],r=W(t)[0],i=W(t)[t.geometry.coordinates.length-1];if(Cn(r,K(e))||Cn(i,K(e)))return l([t]);var o=Ke(),a=Ye(t);o.load(a);var u=o.search(e);if(!u.features.length)return l([t]);var c=Ln(e,u),h=P(a,(function(t,r,i){var o=W(r)[1],a=K(e);return i===c.id?(t.push(a),n.push(s(t)),Cn(a,o)?[a]:[a,o]):(t.push(o),t)}),[r]);return h.length>1&&n.push(s(h)),l(n)}function Ln(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return O(e,(function(e){var i=Xe(e,t).properties.dist;i<r&&(n=e,r=i)})),n}function Cn(t,e){return t[0]===e[0]&&t[1]===e[1]}function An(t,e,n,r,i){if(!x(i=i||{}))throw new Error("options is invalid");var o=i.steps,a=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var u=Mn(n),l=Mn(r),c=t.properties;if(u===l)return s(se(t,e,i).geometry.coordinates[0],c);for(var h=u,f=u<l?l:l+360,p=h,d=[],g=0;p<f;)d.push(ae(t,e,p,a).geometry.coordinates),p=h+360*++g/o;return p>f&&d.push(ae(t,e,f,a).geometry.coordinates),s(d,c)}function Mn(t){var e=t%360;return e<0&&(e+=360),e}function Rn(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=J(t),i=W(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return On(i,n);case"MultiPolygon":var o=[];return i.forEach((function(t){o.push(On(t,n))})),l(o);default:throw new Error("geom "+r+" not supported")}}function On(t,e){return t.length>1?c(t,e):s(t[0],e)}function Pn(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,J(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach((function(t){o.push(W(In(t,{},r,i)))})),f(o,n)}return In(t,n,r,i)}function In(t,e,n,r){e=e||t.properties||{};var i=W(t),a=J(t);if(!i.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(i=Nn(i)),o([i],e);case"MultiLineString":var u=[],l=0;return i.forEach((function(t){if(n&&(t=Nn(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(G(s(t)));e>l?(u.unshift(t),l=e):u.push(t)}else u.push(t)})),o(u,e);default:throw new Error("geometry type "+a+" is not supported")}}function Nn(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],a=i[1];return n===o&&r===a||t.push(e),t}function Dn(t,e,n){var r,i,o,a,s,u=t.length,l=Fn(t[0],e),c=[];for(n||(n=[]),r=1;r<u;r++){for(i=t[r-1],a=s=Fn(o=t[r],e);;){if(!(l|a)){c.push(i),a!==s?(c.push(o),r<u-1&&(n.push(c),c=[])):r===u-1&&c.push(o);break}if(l&a)break;l?l=Fn(i=kn(i,o,l,e),e):a=Fn(o=kn(i,o,a,e),e)}l=s}return c.length&&n.push(c),n}function kn(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Fn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Vn(t,e){for(var n=[],r=0;r<t.length;r++){var i=ba.polygon(t[r],e);i.length>0&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),i.length>=4&&n.push(i))}return n}function jn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Bn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(n.strict,t===e):function(t,e,n){var r,i;if(Un(t)||Un(e))return!1;if(t.prototype!==e.prototype)return!1;if(jn(t))return!!jn(e)&&Bn(t=Sa.call(t),e=Sa.call(e),n);if(Gn(t)){if(!Gn(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),a=Object.keys(e)}catch(t){return!1}if(o.length!==a.length)return!1;for(o.sort(),a.sort(),r=o.length-1;r>=0;r--)if(o[r]!==a[r])return!1;for(r=o.length-1;r>=0;r--)if(!Bn(t[i=o[r]],e[i],n))return!1;return typeof t==typeof e}(t,e,n))}function Un(t){return null===t||void 0===t}function Gn(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}function Kn(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],a=Ke();return a.load(Ye(t)),V(e,(function(t){var e=!1;O(a.search(t),(function(n){if(!1===e){var o=W(t).sort(),a=W(n).sort();Bn(o,a)||(0===i?gn(o[0],n)&&gn(o[1],n):Xe(n,o[0]).properties.dist<=i&&Xe(n,o[1]).properties.dist<=i)?(e=!0,r=r?Wn(r,t):t):(0===i?gn(a[0],t)&&gn(a[1],t):Xe(t,a[0]).properties.dist<=i&&Xe(t,a[1]).properties.dist<=i)&&(r=r?Wn(r,n):n)}})),!1===e&&r&&(o.push(r),r=void 0)})),r&&o.push(r),l(o)}function Wn(t,e){var n=W(e),r=W(t),i=r[0],o=r[r.length-1],a=t.geometry.coordinates;return Bn(n[0],i)?a.unshift(n[1]):Bn(n[0],o)?a.push(n[1]):Bn(n[1],i)?a.unshift(n[0]):Bn(n[1],o)&&a.push(n[0]),t}function zn(t){var e=t%360;return e<0&&(e+=360),e}function Yn(t,e,n,i){if(!x(i=i||{}))throw new Error("options is invalid");var o=i.units,a=i.properties;if(!t)throw new Error("origin is required");if(void 0===e||null===e)throw new Error("distance is required");if(void 0===n||null===n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var s=b(e,o,"meters"),u=K(t),l=function(t,e,n,r){var i=e/(r=void 0===r?So:Number(r)),o=t[0]*Math.PI/180,a=_(t[1]),s=_(n),u=i*Math.cos(s),l=a+u;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var c=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),h=Math.abs(c)>1e-11?u/c:Math.cos(a);return[(180*(o+i*Math.sin(s)/h)/Math.PI+540)%360-180,180*l/Math.PI]}(u,s,n);return l[0]+=l[0]-u[0]>180?-360:u[0]-l[0]>180?360:0,r(l,a)}function Hn(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=t[a],u=t[a+1];a===t.length-1&&(u=t[0]),r=qn(s,u,e),n<=0&&r>0?function(t,e,n){return qn(t,e,n)<0}(e,s,i)||(i=s):n>0&&r<=0&&(function(t,e,n){return qn(t,e,n)>0}(e,s,o)||(o=s)),n=r}return[i,o]}function qn(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Xn(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=W(t),o=0,a=1;a<i.length;)n=r||i[0],o+=((r=i[a])[0]-n[0])*(r[1]+n[1]),a++;return o>0}function Zn(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return N(t,(function(t){Zn(t,e)})),t;case"LineString":return Jn(W(t),e),t;case"Polygon":return Qn(W(t),e),t;case"MultiLineString":return W(t).forEach((function(t){Jn(t,e)})),t;case"MultiPolygon":return W(t).forEach((function(t){Qn(t,e)})),t;case"Point":case"MultiPoint":return t}}function Jn(t,e){Xn(t)===e&&t.reverse()}function Qn(t,e){Xn(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Xn(t[n])===e&&t[n].reverse()}function $n(t,e,n,r){r=r||{};for(var i=Object.keys(wa),o=0;o<i.length;o++){var a=i[o],s=r[a];s=void 0!==s&&null!==s?s:wa[a],xa[a]=s}xa.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,l=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},a=e+Math.abs(n),s=0;s<r;++s){o.cells[s]=[];for(var u=0;u<i;++u){var l=0,c=t[s+1][u],h=t[s+1][u+1],f=t[s][u+1],p=t[s][u];if(!(isNaN(c)||isNaN(h)||isNaN(f)||isNaN(p))){l|=c<e?0:c>a?128:64,l|=h<e?0:h>a?32:16,l|=f<e?0:f>a?8:4;var d=+(l|=p<e?0:p>a?2:1),g=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var m=(c+h+f+p)/4;g=m>a?2:m<e?0:1,34===l?1===g?l=35:0===g&&(l=136):136===l?1===g?(l=35,g=4):0===g&&(l=34):17===l?1===g?(l=155,g=4):0===g&&(l=153):68===l?1===g?(l=103,g=4):0===g&&(l=102):153===l?1===g&&(l=155):102===l?1===g&&(l=103):152===l?g<2&&(l=156,g=1):137===l?g<2&&(l=139,g=1):98===l?g<2&&(l=99,g=1):38===l?g<2&&(l=39,g=1):18===l?g>0?(l=156,g=4):l=152:33===l?g>0?(l=139,g=4):l=137:72===l?g>0?(l=99,g=4):l=98:132===l&&(g>0?(l=39,g=4):l=38)}if(0!=l&&170!=l){var y,v,E,_,b,S,w,x;y=v=E=_=b=S=w=x=.5;var T=[];1===l?(E=1-tr(e,f,p),x=1-tr(e,c,p),T.push(cs[l])):169===l?(E=tr(a,p,f),x=tr(a,p,c),T.push(cs[l])):4===l?(S=1-tr(e,h,f),_=tr(e,p,f),T.push(us[l])):166===l?(S=tr(a,f,h),_=1-tr(a,f,p),T.push(us[l])):16===l?(b=tr(e,f,h),v=tr(e,c,h),T.push(ss[l])):154===l?(b=1-tr(a,h,f),v=1-tr(a,h,c),T.push(ss[l])):64===l?(w=tr(e,p,c),y=1-tr(e,h,c),T.push(fs[l])):106===l?(w=1-tr(a,c,p),y=tr(a,c,h),T.push(fs[l])):168===l?(_=tr(a,p,f),E=tr(e,p,f),x=tr(e,p,c),w=tr(a,p,c),T.push(ls[l]),T.push(cs[l])):2===l?(_=1-tr(e,f,p),E=1-tr(a,f,p),x=1-tr(a,c,p),w=1-tr(e,c,p),T.push(ls[l]),T.push(cs[l])):162===l?(b=tr(a,f,h),S=tr(e,f,h),_=1-tr(e,f,p),E=1-tr(a,f,p),T.push(ls[l]),T.push(cs[l])):8===l?(b=1-tr(e,h,f),S=1-tr(a,h,f),_=tr(a,p,f),E=tr(e,p,f),T.push(ss[l]),T.push(us[l])):138===l?(b=1-tr(e,h,f),S=1-tr(a,h,f),y=1-tr(a,h,c),v=1-tr(e,h,c),T.push(ss[l]),T.push(us[l])):32===l?(b=tr(a,f,h),S=tr(e,f,h),y=tr(e,c,h),v=tr(a,c,h),T.push(ss[l]),T.push(us[l])):42===l?(x=1-tr(a,c,p),w=1-tr(e,c,p),y=tr(e,c,h),v=tr(a,c,h),T.push(hs[l]),T.push(fs[l])):128===l&&(x=tr(e,p,c),w=tr(a,p,c),y=1-tr(a,h,c),v=1-tr(e,h,c),T.push(hs[l]),T.push(fs[l])),5===l?(S=1-tr(e,h,f),x=1-tr(e,c,p),T.push(us[l])):165===l?(S=tr(a,f,h),x=tr(a,p,c),T.push(us[l])):20===l?(_=tr(e,p,f),v=tr(e,c,h),T.push(ls[l])):150===l?(_=1-tr(a,f,p),v=1-tr(a,h,c),T.push(ls[l])):80===l?(b=tr(e,f,h),w=tr(e,p,c),T.push(ss[l])):90===l?(b=1-tr(a,h,f),w=1-tr(a,c,p),T.push(ss[l])):65===l?(E=1-tr(e,f,p),y=1-tr(e,h,c),T.push(cs[l])):105===l?(E=tr(a,p,f),y=tr(a,c,h),T.push(cs[l])):160===l?(b=tr(a,f,h),S=tr(e,f,h),x=tr(e,p,c),w=tr(a,p,c),T.push(ss[l]),T.push(us[l])):10===l?(b=1-tr(e,h,f),S=1-tr(a,h,f),x=1-tr(a,c,p),w=1-tr(e,c,p),T.push(ss[l]),T.push(us[l])):130===l?(_=1-tr(e,f,p),E=1-tr(a,f,p),y=1-tr(a,h,c),v=1-tr(e,h,c),T.push(ls[l]),T.push(cs[l])):40===l?(_=tr(a,p,f),E=tr(e,p,f),y=tr(e,c,h),v=tr(a,c,h),T.push(ls[l]),T.push(cs[l])):101===l?(S=tr(a,f,h),y=tr(a,c,h),T.push(us[l])):69===l?(S=1-tr(e,h,f),y=1-tr(e,h,c),T.push(us[l])):149===l?(x=tr(a,p,c),v=1-tr(a,h,c),T.push(hs[l])):21===l?(x=1-tr(e,c,p),v=tr(e,c,h),T.push(hs[l])):86===l?(_=1-tr(a,f,p),w=1-tr(a,c,p),T.push(ls[l])):84===l?(_=tr(e,p,f),w=tr(e,p,c),T.push(ls[l])):89===l?(b=1-tr(a,h,f),E=tr(a,p,f),T.push(cs[l])):81===l?(b=tr(e,f,h),E=1-tr(e,f,p),T.push(cs[l])):96===l?(b=tr(a,f,h),S=tr(e,f,h),w=tr(e,p,c),y=tr(a,c,h),T.push(ss[l]),T.push(us[l])):74===l?(b=1-tr(e,h,f),S=1-tr(a,h,f),w=1-tr(a,c,p),y=1-tr(e,h,c),T.push(ss[l]),T.push(us[l])):24===l?(b=1-tr(a,h,f),_=tr(a,p,f),E=tr(e,p,f),v=tr(e,c,h),T.push(ss[l]),T.push(cs[l])):146===l?(b=tr(e,f,h),_=1-tr(e,f,p),E=1-tr(a,f,p),v=1-tr(a,h,c),T.push(ss[l]),T.push(cs[l])):6===l?(S=1-tr(e,h,f),_=1-tr(a,f,p),x=1-tr(a,c,p),w=1-tr(e,c,p),T.push(us[l]),T.push(ls[l])):164===l?(S=tr(a,f,h),_=tr(e,p,f),x=tr(e,p,c),w=tr(a,p,c),T.push(us[l]),T.push(ls[l])):129===l?(E=1-tr(e,f,p),x=tr(a,p,c),y=1-tr(a,h,c),v=1-tr(e,h,c),T.push(cs[l]),T.push(hs[l])):41===l?(E=tr(a,p,f),x=1-tr(e,c,p),y=tr(e,c,h),v=tr(a,c,h),T.push(cs[l]),T.push(hs[l])):66===l?(_=1-tr(e,f,p),E=1-tr(a,f,p),w=1-tr(a,c,p),y=1-tr(e,h,c),T.push(ls[l]),T.push(cs[l])):104===l?(_=tr(a,p,f),E=tr(e,p,f),w=tr(e,p,c),y=tr(a,c,h),T.push(cs[l]),T.push(ps[l])):144===l?(b=tr(e,f,h),x=tr(e,p,c),w=tr(a,p,c),v=1-tr(a,h,c),T.push(ss[l]),T.push(fs[l])):26===l?(b=1-tr(a,h,f),x=1-tr(a,c,p),w=1-tr(e,c,p),v=tr(e,c,h),T.push(ss[l]),T.push(fs[l])):36===l?(S=tr(a,f,h),_=tr(e,p,f),y=tr(e,c,h),v=tr(a,c,h),T.push(us[l]),T.push(ls[l])):134===l?(S=1-tr(e,h,f),_=1-tr(a,f,p),y=1-tr(a,h,c),v=1-tr(e,h,c),T.push(us[l]),T.push(ls[l])):9===l?(b=1-tr(e,h,f),S=1-tr(a,h,f),E=tr(a,p,f),x=1-tr(e,c,p),T.push(ss[l]),T.push(us[l])):161===l?(b=tr(a,f,h),S=tr(e,f,h),E=1-tr(e,f,p),x=tr(a,p,c),T.push(ss[l]),T.push(us[l])):37===l?(S=tr(a,f,h),x=1-tr(e,c,p),y=tr(e,c,h),v=tr(a,c,h),T.push(us[l]),T.push(hs[l])):133===l?(S=1-tr(e,h,f),x=tr(a,p,c),y=1-tr(a,h,c),v=1-tr(e,h,c),T.push(us[l]),T.push(hs[l])):148===l?(_=tr(e,p,f),x=tr(e,p,c),w=tr(a,p,c),v=1-tr(a,h,c),T.push(ls[l]),T.push(fs[l])):22===l?(_=1-tr(a,f,p),x=1-tr(a,c,p),w=1-tr(e,c,p),v=tr(e,c,h),T.push(ls[l]),T.push(fs[l])):82===l?(b=tr(e,f,h),_=1-tr(e,f,p),E=1-tr(a,f,p),w=1-tr(a,c,p),T.push(ss[l]),T.push(cs[l])):88===l?(b=1-tr(a,h,f),_=tr(a,p,f),E=tr(e,p,f),w=tr(e,p,c),T.push(ss[l]),T.push(cs[l])):73===l?(b=1-tr(e,h,f),S=1-tr(a,h,f),E=tr(a,p,f),y=1-tr(e,h,c),T.push(ss[l]),T.push(us[l])):97===l?(b=tr(a,f,h),S=tr(e,f,h),E=1-tr(e,f,p),y=tr(a,c,h),T.push(ss[l]),T.push(us[l])):145===l?(b=tr(e,f,h),E=1-tr(e,f,p),x=tr(a,p,c),v=1-tr(a,h,c),T.push(ss[l]),T.push(hs[l])):25===l?(b=1-tr(a,h,f),E=tr(a,p,f),x=1-tr(e,c,p),v=tr(e,c,h),T.push(ss[l]),T.push(hs[l])):70===l?(S=1-tr(e,h,f),_=1-tr(a,f,p),w=1-tr(a,c,p),y=1-tr(e,h,c),T.push(us[l]),T.push(ls[l])):100===l?(S=tr(a,f,h),_=tr(e,p,f),w=tr(e,p,c),y=tr(a,c,h),T.push(us[l]),T.push(ls[l])):34===l?(0===g?(b=1-tr(e,h,f),S=1-tr(a,h,f),_=tr(a,p,f),E=tr(e,p,f),x=tr(e,p,c),w=tr(a,p,c),y=1-tr(a,h,c),v=1-tr(e,h,c)):(b=tr(a,f,h),S=tr(e,f,h),_=1-tr(e,f,p),E=1-tr(a,f,p),x=1-tr(a,c,p),w=1-tr(e,c,p),y=tr(e,c,h),v=tr(a,c,h)),T.push(ss[l]),T.push(us[l]),T.push(hs[l]),T.push(fs[l])):35===l?(4===g?(b=1-tr(e,h,f),S=1-tr(a,h,f),_=tr(a,p,f),E=tr(e,p,f),x=tr(e,p,c),w=tr(a,p,c),y=1-tr(a,h,c),v=1-tr(e,h,c)):(b=tr(a,f,h),S=tr(e,f,h),_=1-tr(e,f,p),E=1-tr(a,f,p),x=1-tr(a,c,p),w=1-tr(e,c,p),y=tr(e,c,h),v=tr(a,c,h)),T.push(ss[l]),T.push(us[l]),T.push(cs[l]),T.push(fs[l])):136===l?(0===g?(b=tr(a,f,h),S=tr(e,f,h),_=1-tr(e,f,p),E=1-tr(a,f,p),x=1-tr(a,c,p),w=1-tr(e,c,p),y=tr(e,c,h),v=tr(a,c,h)):(b=1-tr(e,h,f),S=1-tr(a,h,f),_=tr(a,p,f),E=tr(e,p,f),x=tr(e,p,c),w=tr(a,p,c),y=1-tr(a,h,c),v=1-tr(e,h,c)),T.push(ss[l]),T.push(us[l]),T.push(hs[l]),T.push(fs[l])):153===l?(0===g?(b=tr(e,f,h),E=1-tr(e,f,p),x=1-tr(e,c,p),v=tr(e,c,h)):(b=1-tr(a,h,f),E=tr(a,p,f),x=tr(a,p,c),v=1-tr(a,h,c)),T.push(ss[l]),T.push(cs[l])):102===l?(0===g?(S=1-tr(e,h,f),_=tr(e,p,f),w=tr(e,p,c),y=1-tr(e,h,c)):(S=tr(a,f,h),_=1-tr(a,f,p),w=1-tr(a,c,p),y=tr(a,c,h)),T.push(us[l]),T.push(fs[l])):155===l?(4===g?(b=tr(e,f,h),E=1-tr(e,f,p),x=1-tr(e,c,p),v=tr(e,c,h)):(b=1-tr(a,h,f),E=tr(a,p,f),x=tr(a,p,c),v=1-tr(a,h,c)),T.push(ss[l]),T.push(hs[l])):103===l?(4===g?(S=1-tr(e,h,f),_=tr(e,p,f),w=tr(e,p,c),y=1-tr(e,h,c)):(S=tr(a,f,h),_=1-tr(a,f,p),w=1-tr(a,c,p),y=tr(a,c,h)),T.push(us[l]),T.push(ls[l])):152===l?(0===g?(b=tr(e,f,h),_=1-tr(e,f,p),E=1-tr(a,f,p),x=1-tr(a,c,p),w=1-tr(e,c,p),v=tr(e,c,h)):(b=1-tr(a,h,f),_=tr(a,p,f),E=tr(e,p,f),x=tr(e,p,c),w=tr(a,p,c),v=1-tr(a,h,c)),T.push(ss[l]),T.push(ls[l]),T.push(cs[l])):156===l?(4===g?(b=tr(e,f,h),_=1-tr(e,f,p),E=1-tr(a,f,p),x=1-tr(a,c,p),w=1-tr(e,c,p),v=tr(e,c,h)):(b=1-tr(a,h,f),_=tr(a,p,f),E=tr(e,p,f),x=tr(e,p,c),w=tr(a,p,c),v=1-tr(a,h,c)),T.push(ss[l]),T.push(cs[l]),T.push(fs[l])):137===l?(0===g?(b=tr(a,f,h),S=tr(e,f,h),E=1-tr(e,f,p),x=1-tr(e,c,p),y=tr(e,c,h),v=tr(a,c,h)):(b=1-tr(e,h,f),S=1-tr(a,h,f),E=tr(a,p,f),x=tr(a,p,c),y=1-tr(a,h,c),v=1-tr(e,h,c)),T.push(ss[l]),T.push(us[l]),T.push(cs[l])):139===l?(4===g?(b=tr(a,f,h),S=tr(e,f,h),E=1-tr(e,f,p),x=1-tr(e,c,p),y=tr(e,c,h),v=tr(a,c,h)):(b=1-tr(e,h,f),S=1-tr(a,h,f),E=tr(a,p,f),x=tr(a,p,c),y=1-tr(a,h,c),v=1-tr(e,h,c)),T.push(ss[l]),T.push(us[l]),T.push(hs[l])):98===l?(0===g?(b=1-tr(e,h,f),S=1-tr(a,h,f),_=tr(a,p,f),E=tr(e,p,f),w=tr(e,p,c),y=1-tr(e,h,c)):(b=tr(a,f,h),S=tr(e,f,h),_=1-tr(e,f,p),E=1-tr(a,f,p),w=1-tr(a,c,p),y=tr(a,c,h)),T.push(ss[l]),T.push(us[l]),T.push(fs[l])):99===l?(4===g?(b=1-tr(e,h,f),S=1-tr(a,h,f),_=tr(a,p,f),E=tr(e,p,f),w=tr(e,p,c),y=1-tr(e,h,c)):(b=tr(a,f,h),S=tr(e,f,h),_=1-tr(e,f,p),E=1-tr(a,f,p),w=1-tr(a,c,p),y=tr(a,c,h)),T.push(ss[l]),T.push(us[l]),T.push(cs[l])):38===l?(0===g?(S=1-tr(e,h,f),_=tr(e,p,f),x=tr(e,p,c),w=tr(a,p,c),y=1-tr(a,h,c),v=1-tr(e,h,c)):(S=tr(a,f,h),_=1-tr(a,f,p),x=1-tr(a,c,p),w=1-tr(e,c,p),y=tr(e,c,h),v=tr(a,c,h)),T.push(us[l]),T.push(hs[l]),T.push(fs[l])):39===l?(4===g?(S=1-tr(e,h,f),_=tr(e,p,f),x=tr(e,p,c),w=tr(a,p,c),y=1-tr(a,h,c),v=1-tr(e,h,c)):(S=tr(a,f,h),_=1-tr(a,f,p),x=1-tr(a,c,p),w=1-tr(e,c,p),y=tr(e,c,h),v=tr(a,c,h)),T.push(us[l]),T.push(ls[l]),T.push(fs[l])):85===l&&(b=1,S=0,_=1,E=0,x=0,w=1,y=0,v=1),(y<0||y>1||v<0||v>1||b<0||b>1||_<0||_>1||x<0||x>1||w<0||w>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+d+" "+c+","+h+","+f+","+p+" "+g+" "+y+" "+v+" "+b+" "+S+" "+_+" "+E+" "+x+" "+w),o.cells[s][u]={cval:l,cval_real:d,flipped:g,topleft:y,topright:v,righttop:b,rightbottom:S,bottomright:_,bottomleft:E,leftbottom:x,lefttop:w,edges:T}}}}}return o}(t,e,n);return xa.polygons?(xa.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach((function(t,r){t.forEach((function(t,i){if(void 0!==t){var o=gs[t.cval](t);"object"==typeof o&&er(o)?"object"==typeof o[0]&&er(o[0])?"object"==typeof o[0][0]&&er(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=t})):(o.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(l)):(xa.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var a=0;a<r;a++)if(void 0!==t.cells[o][a]&&t.cells[o][a].edges.length>0){var s=function(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&La?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&Ca?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&Ca?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&Aa?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&La?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&Ca?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&Ca?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&Aa?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&Ca?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&Aa?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&Aa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&Ta?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&Ca?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&Aa?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&Aa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&Ta?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&Ca?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&Ta?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&Aa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&Ta?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&Ta?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&La?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&Ta?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&La?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(t.cells[o][a]),u=null,l=a,c=o;null!==s&&i.push([s.p[0]+l,s.p[1]+c]);do{if(null===(u=function(t,e,n,r){var i,o,a,s,u,l=t.cval;switch(e){case-1:switch(r){case 0:i=us[l],a=Va[l],s=ja[l],u=Ba[l];break;default:i=ss[l],a=Da[l],s=ka[l],u=Fa[l]}break;case 1:switch(r){case 0:i=hs[l],a=Za[l],s=Ja[l],u=Qa[l];break;default:i=fs[l],a=Ha[l],s=qa[l],u=Xa[l]}break;default:switch(n){case-1:switch(r){case 0:i=ps[l],a=Ma[l],s=Ra[l],u=Oa[l];break;default:i=ds[l],a=Pa[l],s=Ia[l],u=Na[l]}break;case 1:switch(r){case 0:i=cs[l],a=Ua[l],s=Ga[l],u=Ka[l];break;default:i=ls[l],a=Wa[l],s=za[l],u=Ya[l]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),l=t.cval_real,i){case 0:l&La?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:l&Ca?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:l&Ca?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:l&Aa?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:l&La?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:l&Ca?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:l&Ca?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:l&Aa?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:l&Ca?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:l&Aa?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:l&Aa?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:l&Ta?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:l&Ca?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:l&Aa?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:l&Aa?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:l&Ta?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:l&Ca?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:l&Ta?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:l&Aa?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:l&Ta?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:l&Ta?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:l&La?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:l&Ta?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:l&La?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+s+" "+u)),{p:[e,n],x:a,y:s,o:u}}(t.cells[c][l],s.x,s.y,s.o)))break;if(i.push([u.p[0]+l,u.p[1]+c]),l+=u.x,s=u,(c+=u.y)<0||c>=n||l<0||l>=r||void 0===t.cells[c][l]){var h=function(t,e,n,r,i,o){for(var a=t.cells[n][e],s=a.cval_real,u=e+r,l=n+i,c=[],h=!1;!h;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(l-=i,u-=r,s=(a=t.cells[l][u]).cval_real,-1===i)if(0===o)if(s&Aa)c.push([u,l]),r=-1,i=0,o=0;else{if(!(s&Ca)){c.push([u+a.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u+1,l]),r=1,i=0,o=0}else{if(!(s&Aa)){if(s&Ca){c.push([u+a.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u+a.bottomleft,l]),r=0,i=1,o=0,h=!0;break}c.push([u,l]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(s&La)){if(s&Ta){c.push([u+a.topleft,l+1]),r=0,i=-1,o=0,h=!0;break}c.push([u+a.topright,l+1]),r=0,i=-1,o=1,h=!0;break}c.push([u+1,l+1]),r=1,i=0,o=1}else c.push([u+1,l+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(s&Ta)){if(s&Aa){c.push([u,l+a.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([u,l+a.lefttop]),r=1,i=0,o=1,h=!0;break}c.push([u,l+1]),r=0,i=1,o=0}else{if(!(s&Ta)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([u,l+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(s&Ca)){c.push([u+1,l+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}else{if(!(s&Ca)){if(s&La){c.push([u+1,l+a.righttop]),r=-1,i=0,o=1;break}c.push([u+1,l+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}}else if(s=(a=t.cells[l][u]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])r=0,i=-1,o=1;else{if(!(s&Aa)){c.push([u+a.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u,l])}else{if(!(s&Ta)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])r=0,i=1,o=0;else{if(!(s&La)){c.push([u+a.topleft,l+1]),r=0,i=-1,o=0,h=!0;break}c.push([u+1,l+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])r=1,i=0,o=1;else{if(!(s&Ca)){c.push([u+1,l+a.righttop]),r=-1,i=0,o=1,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])r=-1,i=0,o=0;else{if(!(s&Ta)){c.push([u,l+a.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([u,l+1]),r=0,i=1,o=0}}if(l+=i,(u+=r)===e&&l===n)break}return{path:c,i:u,j:l,x:r,y:i,o:o}}(t,l-=u.x,c-=u.y,u.x,u.y,u.o);if(null===h)break;h.path.forEach((function(t){i.push(t)})),l=h.i,c=h.j,s=h}}while(void 0!==t.cells[c][l]&&t.cells[c][l].edges.length>0);e.push(i),i=[],t.cells[o][a].edges.length>0&&a--}return e}(l)),"function"==typeof xa.successCallback&&xa.successCallback(u),u}function tr(t,e,n){return(t-e)/(n-e)}function er(t){return t.constructor.toString().indexOf("Array")>-1}function nr(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=ce(t)),!1!==i&&void 0!==i||(t=kt(t)),C(t,(function(t){var n=Ze(r,t)+e,i=Qe(r,t),o=W(Yn(r,i,n));t[0]=o[0],t[1]=o[1]}))),t}function rr(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=kt(t)),"FeatureCollection"!==t.type||o?ir(t,e,r):(O(t,(function(n,i){t.features[i]=ir(n,e,r)})),t)}function ir(t,e,n){var i="Point"===J(t);return n=function(t,e){if(void 0!==e&&null!==e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return K(e);var n=t.bbox?t.bbox:G(t),i=n[0],o=n[1],a=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return r([i,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return r([a,o]);case"nw":case"northwest":case"westnorth":case"topleft":return r([i,s]);case"ne":case"northeast":case"eastnorth":case"topright":return r([a,s]);case"center":return le(t);case void 0:case null:case"centroid":return ce(t);default:throw new Error("invalid origin")}}(t,n),1===e||i||C(t,(function(t){var r=Qe(n,t),i=Ze(n,t),o=W(Yn(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function or(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function ar(t,e){return t[0]*e[1]-e[0]*t[1]}function sr(t,e,n){var r=[],i=y(e,n),o=W(t),a=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=function(t,e,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),i=t[0]+n*(e[1]-t[1])/r,o=e[0]+n*(e[1]-t[1])/r;return[[i,t[1]+n*(t[0]-e[0])/r],[o,e[1]+n*(t[0]-e[0])/r]]}(t,o[e+1],i);if(r.push(n),e>0){var s=r[e-1],u=function(t,e){return!function(t,e){return 0===ar(or(t),or(e))}(t,e)&&function(t,e){var n=t[0],r=or(t),i=e[0],o=or(e),a=ar(r,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(ar(function(t,e){return[t[0]-e[0],t[1]-e[1]]}(i,n),o)/a,r))}(t,e)}(n,s);!1!==u&&(s[1]=u,n[0]=u),a.push(s[0]),e===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}})),s(a,t.properties)}function ur(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0],a=n[1]-e[1];return Math.sign(r*a-o*i)}function lr(t,e){return e.geometry.coordinates[0].every((function(e){return At(r(e),t)}))}function cr(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1];return r*a-i*o==0&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function hr(t,e){return He(e,Rn(t)).features.length>0}function fr(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function pr(t,e){return t[0]===e[0]&&t[1]===e[1]}function dr(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),yr(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?n=!0:r=!0}o++}return n&&r}function gr(t,e){return He(t,Rn(e)).features.length>0}function mr(t,e){for(var n=!1,i=!1,o=t.coordinates[0].length,a=0;a<o&&n&&i;)At(r(t.coordinates[0][a]),e)?n=!0:i=!0,a++;return i&&i}function yr(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],a=e[0]-t[0],s=e[1]-t[1];return 0==i*s-o*a&&(r?Math.abs(a)>=Math.abs(s)?a>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(a)>=Math.abs(s)?a>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:s>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function vr(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function Er(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function _r(t,e){return ws(t,e,{strict:!0})}function br(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=J(t);if(n!==J(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new Ts({precision:6}).compare(t,e))return!1;var r=0;switch(n){case"MultiPoint":var i=I(t),o=I(e);i.forEach((function(t){o.forEach((function(e){t[0]===e[0]&&t[1]===e[1]&&r++}))}));break;case"LineString":case"MultiLineString":V(t,(function(t){V(e,(function(e){Kn(t,e).features.length&&r++}))}));break;case"Polygon":case"MultiPolygon":V(t,(function(t){V(e,(function(e){He(t,e).features.length&&r++}))}))}return r>0}function Sr(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function wr(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function xr(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function Tr(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Lr(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Lr(t,e,n){this.x=t,this.y=e,this.weight=n}function Cr(t){this.content=[],this.scoreFunction=t}function Ar(t){return t[0]}function Mr(t){return t[1]}function Rr(){this._=null}function Or(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Pr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ir(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Nr(t){for(;t.L;)t=t.L;return t}function Dr(t,e,n,r){var i=[null,null],o=Gs.push(i)-1;return i.left=t,i.right=e,n&&Fr(i,t,e,n),r&&Fr(i,e,t,r),Bs[t.index].halfedges.push(o),Bs[e.index].halfedges.push(o),i}function kr(t,e,n){var r=[e,n];return r.left=t,r}function Fr(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Vr(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],l=a[1],c=0,h=1,f=s[0]-u,p=s[1]-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}if(o=n-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*f,l+c*p]),h<1&&(t[1]=[u+h*f,l+h*p]),!0)}}}}}function jr(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],p=c[0],d=c[1],g=(h+p)/2,m=(f+d)/2;if(d===f){if(g<e||g>=r)return;if(h>p){if(u){if(u[1]>=i)return}else u=[g,n];o=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];o=[g,n]}}else if(s=m-(a=(h-p)/(d-f))*g,a<-1||a>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<d){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function Br(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Ur(t,e){return e[+(e.left!==t.site)]}function Gr(t,e){return e[+(e.left===t.site)]}function Kr(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,l=r[1]-s,c=o[0]-a,h=o[1]-s,f=2*(u*h-l*c);if(!(f>=-Ys)){var p=u*u+l*l,d=c*c+h*h,g=(h*p-l*d)/f,m=(u*d-c*p)/f,y=Ks.pop()||new function(){Or(this),this.x=this.y=this.arc=this.site=this.cy=null};y.arc=t,y.site=i,y.x=g+a,y.y=(y.cy=m+s)+Math.sqrt(g*g+m*m),t.circle=y;for(var v=null,E=Us._;E;)if(y.y<E.y||y.y===E.y&&y.x<=E.x){if(!E.L){v=E.P;break}E=E.L}else{if(!E.R){v=E;break}E=E.R}Us.insert(v,y),v||(Vs=y)}}}}function Wr(t){var e=t.circle;e&&(e.P||(Vs=e.N),Us.remove(e),Ks.push(e),Or(e),t.circle=null)}function zr(t){var e=Ws.pop()||new function(){Or(this),this.edge=this.site=this.circle=null};return e.site=t,e}function Yr(t){Wr(t),js.remove(t),Ws.push(t),Or(t)}function Hr(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];Yr(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<zs&&Math.abs(r-u.circle.cy)<zs;)o=u.P,s.unshift(u),Yr(u),u=o;s.unshift(u),Wr(u);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<zs&&Math.abs(r-l.circle.cy)<zs;)a=l.N,s.push(l),Yr(l),l=a;s.push(l),Wr(l);var c,h=s.length;for(c=1;c<h;++c)l=s[c],u=s[c-1],Fr(l.edge,u.site,l.site,i);u=s[0],(l=s[h-1]).edge=Dr(u.site,l.site,null,i),Kr(u),Kr(l)}function qr(t){for(var e,n,r,i,o=t[0],a=t[1],s=js._;s;)if((r=Xr(s,a)-o)>zs)s=s.L;else{if(!((i=o-function(t,e){var n=t.N;if(n)return Xr(n,e);var r=t.site;return r[1]===e?r[0]:1/0}(s,a))>zs)){r>-zs?(e=s.P,n=s):i>-zs?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){Bs[t.index]={site:t,halfedges:[]}}(t);var u=zr(t);if(js.insert(e,u),e||n){if(e===n)return Wr(e),n=zr(e.site),js.insert(u,n),u.edge=n.edge=Dr(e.site,u.site),Kr(e),void Kr(n);if(n){Wr(e),Wr(n);var l=e.site,c=l[0],h=l[1],f=t[0]-c,p=t[1]-h,d=n.site,g=d[0]-c,m=d[1]-h,y=2*(f*m-p*g),v=f*f+p*p,E=g*g+m*m,_=[(m*v-p*E)/y+c,(f*E-g*v)/y+h];Fr(n.edge,l,d,_),u.edge=Dr(l,t,null,_),n.edge=Dr(t,d,null,_),Kr(e),Kr(n)}else u.edge=Dr(e.site,u.site)}}function Xr(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],l=u-e;if(!l)return s;var c=s-r,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+r:(r+s)/2}function Zr(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Jr(t,e){return e[1]-t[1]||e[0]-t[0]}function Qr(t,e){var n,r,i,o=t.sort(Jr).pop();for(Gs=[],Bs=new Array(t.length),js=new Rr,Us=new Rr;;)if(i=Vs,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(qr(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Hr(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Bs.length;i<o;++i)if((t=Bs[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=Br(t,Gs[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,o=Gs.length;o--;)jr(i=Gs[o],t,e,n,r)&&Vr(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>zs||Math.abs(i[0][1]-i[1][1])>zs)||delete Gs[o]}(a,s,u,l),function(t,e,n,r){var i,o,a,s,u,l,c,h,f,p,d,g,m=Bs.length,y=!0;for(i=0;i<m;++i)if(o=Bs[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)Gs[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)d=(p=Gr(o,Gs[u[s]]))[0],g=p[1],h=(c=Ur(o,Gs[u[++s%l]]))[0],f=c[1],(Math.abs(d-h)>zs||Math.abs(g-f)>zs)&&(u.splice(s,0,Gs.push(kr(a,p,Math.abs(d-t)<zs&&r-g>zs?[t,Math.abs(h-t)<zs?f:r]:Math.abs(g-r)<zs&&n-d>zs?[Math.abs(f-r)<zs?h:n,r]:Math.abs(d-n)<zs&&g-e>zs?[n,Math.abs(h-n)<zs?f:e]:Math.abs(g-e)<zs&&d-t>zs?[Math.abs(f-e)<zs?h:t,e]:null))-1),++l);l&&(y=!1)}if(y){var v,E,_,b=1/0;for(i=0,y=null;i<m;++i)(o=Bs[i])&&(_=(v=(a=o.site)[0]-t)*v+(E=a[1]-e)*E)<b&&(b=_,y=o);if(y){var S=[t,e],w=[t,r],x=[n,r],T=[n,e];y.halfedges.push(Gs.push(kr(a=y.site,S,w))-1,Gs.push(kr(a,w,x))-1,Gs.push(kr(a,x,T))-1,Gs.push(kr(a,T,S))-1)}}for(i=0;i<m;++i)(o=Bs[i])&&(o.halfedges.length||delete Bs[i])}(a,s,u,l)}this.edges=Gs,this.cells=Bs,js=Us=Gs=Bs=null}function $r(t){return(t=t.slice()).push(t[0]),o([t])}function ti(t,e,n,r){var i=(r=r||{}).steps||64,a=r.units||"kilometers",s=r.angle||0,u=r.pivot||t,l=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!x(r))throw new Error("options must be an object");if(!w(i))throw new Error("steps must be a number");if(!w(s))throw new Error("angle must be a number");var c=K(t);if("degrees"===a)var h=_(s);else e=Yn(t,e,90,{units:a}),n=Yn(t,n,0,{units:a}),e=K(e)[0]-c[0],n=K(n)[1]-c[1];for(var f=[],p=0;p<i;p+=1){var d=-360*p/i,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(ei(d),2)),m=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(ei(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(m=-m),"degrees"===a){var y=g*Math.cos(h)+m*Math.sin(h),v=m*Math.cos(h)-g*Math.sin(h);g=y,m=v}f.push([g+c[0],m+c[1]])}return f.push(f[0]),"degrees"===a?o([f],l):nr(o([f],l),s,{pivot:u})}function ei(t){var e=t*Math.PI/180;return Math.tan(e)}function ni(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,a=0,s=0;return N(t,(function(t,e,n){var r=n[i];if(!w(r=void 0===r||null===r?1:r))throw new Error("weight value must be a number for feature index "+e);(r=Number(r))>0&&C(t,(function(t){o+=t[0]*r,a+=t[1]*r,s+=r}))})),r([o/s,a/s],n)}function ri(t,e,n,i){var o=n.properties.tolerance||.001,a=0,s=0,u=0,l=0;if(O(n,(function(e){var n=e.properties.weight,r=void 0===n||null===n?1:n;if(!w(r=Number(r)))throw new Error("weight value must be a number");if(r>0){l+=1;var i=r*Dt(e,t);0===i&&(i=1);var o=r/i;a+=e.geometry.coordinates[0]*o,s+=e.geometry.coordinates[1]*o,u+=o}})),l<1)throw new Error("no features to measure");var c=a/u,h=s/u;return 1===l||0===i||Math.abs(c-e[0])<o&&Math.abs(h-e[1])<o?r([c,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([c,h]),ri([c,h],t,n,i-1))}function ii(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function oi(t){if(x(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*li(),180*li()]}function ai(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.bbox;void 0!==t&&null!==t||(t=1);for(var i=[],o=0;o<t;o++)i.push(r(oi(n)));return l(i)}function si(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_radial_length;void 0!==t&&null!==t||(t=1),w(r)||(r=10),w(i)||(i=10);for(var a=[],s=0;s<t;s++){var u=[],c=Array.apply(null,new Array(r+1)).map(Math.random);c.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),c.forEach((function(t){t=2*t*Math.PI/c[c.length-1];var e=Math.random();u.push([e*i*Math.sin(t),e*i*Math.cos(t)])})),u[u.length-1]=u[0],u=u.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(oi(n))),a.push(o([u]))}return l(a)}function ui(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;void 0!==t&&null!==t||(t=1),(!w(r)||r<2)&&(r=10),w(i)||(i=1e-4),w(o)||(o=Math.PI/8);for(var a=[],u=0;u<t;u++){for(var c=[oi(n)],h=0;h<r-1;h++){var f=(0===h?2*Math.random()*Math.PI:Math.tan((c[h][1]-c[h-1][1])/(c[h][0]-c[h-1][0])))+(Math.random()-.5)*o*2,p=Math.random()*i;c.push([c[h][0]+p*Math.cos(f),c[h][1]+p*Math.sin(f)])}a.push(s(c))}return l(a)}function li(){return Math.random()-.5}function ci(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("filter is required");var n=[];return O(t,(function(t){di(t.properties,e)&&n.push(t)})),l(n)}function hi(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("property is required");for(var r=pi(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var a=i[o],s=r[a],u=[],c=0;c<s.length;c++)u.push(t.features[s[c]]);n(l(u),a,o)}}function fi(t,e,n,r){var i=r;return hi(t,e,(function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)})),i}function pi(t,e){var n={};return O(t,(function(t,r){var i=t.properties||{};if(i.hasOwnProperty(e)){var o=i[e];n.hasOwnProperty(o)?n[o].push(r):n[o]=[r]}})),n}function di(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!di(t,e[r]))return!1;return!0}return gi(t,e)}function gi(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function mi(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function yi(){}function vi(t){this.message=t||""}function Ei(t){this.message=t||""}function _i(){}function bi(t){return null===t?pl:t.color}function Si(t){return null===t?null:t.parent}function wi(t,e){null!==t&&(t.color=e)}function xi(t){return null===t?null:t.left}function Ti(t){return null===t?null:t.right}function Li(){this.root_=null,this.size_=0}function Ci(){}function Ai(){this.array_=[],arguments[0]instanceof Qu&&this.addAll(arguments[0])}function Mi(){}function Ri(t){this.message=t||""}function Oi(){this.array_=[]}function Pi(t){switch(t.type){case"Polygon":return ln(t)>1?t:null;case"MultiPolygon":var e=[];if(k(t,(function(t){ln(t)>1&&e.push(t.geometry.coordinates)})),e.length)return{type:"MultiPolygon",coordinates:e}}}function Ii(){this.reset()}function Ni(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function Di(t){return t>1?Ep:t<-1?-Ep:Math.asin(t)}function ki(){}function Fi(t,e){t&&Np.hasOwnProperty(t.type)&&Np[t.type](t,e)}function Vi(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ji(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Vi(t[n],e,1);e.polygonEnd()}function Bi(t){return[Lp(t[1],t[0]),Di(t[2])]}function Ui(t){var e=t[0],n=t[1],r=Cp(n);return[r*Cp(e),r*Rp(e),Rp(n)]}function Gi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ki(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Wi(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function zi(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Yi(t){var e=Op(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Hi(t,e){return[t>vp?t-bp:t<-vp?t+bp:t,e]}function qi(t,e,n){return(t%=bp)?e||n?kp(Zi(t),Ji(e,n)):Zi(t):e||n?Ji(e,n):Hi}function Xi(t){return function(e,n){return[(e+=t)>vp?e-bp:e<-vp?e+bp:e,n]}}function Zi(t){var e=Xi(t);return e.invert=Xi(-t),e}function Ji(t,e){function n(t,e){var n=Cp(e),s=Cp(t)*n,u=Rp(t)*n,l=Rp(e),c=l*r+s*i;return[Lp(u*o-c*a,s*r-l*i),Di(c*o+u*a)]}var r=Cp(t),i=Rp(t),o=Cp(e),a=Rp(e);return n.invert=function(t,e){var n=Cp(e),s=Cp(t)*n,u=Rp(t)*n,l=Rp(e),c=l*o-u*a;return[Lp(u*o+l*a,s*r+c*i),Di(c*r-s*i)]},n}function Qi(t,e){(e=Ui(e))[0]-=t,Yi(e);var n=function(t){return t>1?0:t<-1?vp:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+bp-yp)%bp}function $i(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function to(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function eo(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==h);else l.point(o[0],o[1])}function a(r,i){return xp(r[0]-t)<yp?i>0?0:3:xp(r[0]-n)<yp?i>0?2:1:xp(r[1]-e)<yp?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t,e){i(t,e)&&b.point(t,e)}function l(o,a){var s=i(o,a);if(h&&f.push([o,a]),E)p=o,d=a,g=s,E=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&v)b.point(o,a);else{var u=[m=Math.max(Wp,Math.min(Kp,m)),y=Math.max(Wp,Math.min(Kp,y))],l=[o=Math.max(Wp,Math.min(Kp,o)),a=Math.max(Wp,Math.min(Kp,a))];Vp(u,l,t,e,n,r)?(v||(b.lineStart(),b.point(u[0],u[1])),b.point(l[0],l[1]),s||b.lineEnd(),_=!1):s&&(b.lineStart(),b.point(o,a),_=!1)}m=o,y=a,v=s}var c,h,f,p,d,g,m,y,v,E,_,b=a,S=Fp(),w={point:u,lineStart:function(){w.point=l,h&&h.push(f=[]),E=!0,v=!1,m=y=NaN},lineEnd:function(){c&&(l(p,d),g&&v&&S.rejoin(),c.push(S.result())),w.point=u,v&&b.lineEnd()},polygonStart:function(){b=S,c=[],h=[],_=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=h.length;n<i;++n)for(var o,a,s=h[n],u=1,l=s.length,c=s[0],f=c[0],p=c[1];u<l;++u)o=f,a=p,f=(c=s[u])[0],p=c[1],a<=r?p>r&&(f-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(f-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=_&&e,i=(c=Gp(c)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Bp(c,s,e,o,a),a.polygonEnd()),b=a,c=h=f=null}};return w}}function no(t){return t.length>1}function ro(t,e){return((t=t.x)[0]<0?t[1]-Ep-yp:Ep-t[1])-((e=e.x)[0]<0?e[1]-Ep-yp:Ep-e[1])}function io(t){return function(e){var n=new oo;for(var r in t)n[r]=t[r];return n.stream=e,n}}function oo(){}function ao(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Dp(n,t.stream(Jp));var a=Jp.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,l=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,l])}function so(t,e){return[t,Mp(Pp((Ep+e)/2))]}function uo(t,e){return[Mp(Pp((Ep+e)/2)),-t]}function lo(t,n,r,i){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var s=[];return N(t,(function(t){var e=lo(t,n,r,i);e&&s.push(e)})),l(s)}var u,c=G(t),h=c[1]>50&&c[3]>50;u=h?{type:a.type,coordinates:co(a.coordinates,fo(a))}:$e(a);var f,p=(new nc).read(u),d=g(m(n,r),"meters"),y=Hh.bufferOp(p,d);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((y=(new rc).write(y)).coordinates))return(f=h?{type:y.type,coordinates:ho(y.coordinates,fo(a))}:tn(y)).geometry?f:e(f,o)}function co(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return co(t,e)}))}function ho(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return ho(t,e)}))}function fo(t){var e=le(t).geometry.coordinates.reverse(),n=e.map((function(t){return-t}));return id().center(e).rotate(n).scale(So)}function po(){for(var t=new nc,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=dp.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new rc).write(e),properties:arguments[0].properties}}function go(t,n){var r=X(t),i=X(n);if(Xt(_n(i,{precision:4})).coordinates[0].length<4)return null;if(Xt(_n(r,{precision:4})).coordinates[0].length<4)return null;var o=new nc,a=o.read(_n(r)),s=o.read(_n(i)),u=op.intersection(a,s);return u.isEmpty()?null:e((new rc).write(u))}function mo(t,e){return function(t,e,n){var r,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach((function(e,n){var o=function(t,e){return t-e}(e,t);o>=0&&(void 0===i||o<i)&&(i=o,r=n)})),r}(t,e)}function yo(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,a=n.mask;if(null===e||void 0===e)throw new Error("cellSide is required");if(!w(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(a&&-1===["Polygon","MultiPolygon"].indexOf(J(a)))throw new Error("options.mask must be a (Multi)Polygon");var s=t[0],u=t[1],c=t[2],h=t[3],f=(u+h)/2,p=(s+c)/2,d=2*e/Dt([s,f],[c,f],n)*(c-s),g=2*e/Dt([p,u],[p,h],n)*(h-u),m=d/2,y=2*m,v=Math.sqrt(3)/2*g,E=c-s,_=h-u,b=.75*y,S=v,T=(E-y)/(y-m/2),L=Math.floor(T),C=(L*b-m/2-E)/2-m/2+b/2,A=Math.floor((_-v)/v),M=(_-A*v)/2,R=A*v-_>v/2;R&&(M-=v/4);for(var O=[],P=[],I=0;I<6;I++){var N=2*Math.PI/6*I;O.push(Math.cos(N)),P.push(Math.sin(N))}for(var D=[],k=0;k<=L;k++)for(var F=0;F<=A;F++){var V=k%2==1;if((0!==F||!V)&&(0!==F||!R)){var j=k*b+s-C,B=F*S+u+M;if(V&&(B-=v/2),!0===i)(function(t,e,n,r,i,a){for(var s=[],u=0;u<6;u++){var l=[];l.push(t),l.push([t[0]+e*i[u],t[1]+n*a[u]]),l.push([t[0]+e*i[(u+1)%6],t[1]+n*a[(u+1)%6]]),l.push(t),s.push(o([l],r))}return s})([j,B],d/2,g/2,r,O,P).forEach((function(t){a?go(a,t)&&D.push(t):D.push(t)}));else{var U=function(t,e,n,r,i,a){for(var s=[],u=0;u<6;u++){var l=t[0]+e*i[u],c=t[1]+n*a[u];s.push([l,c])}return s.push(s[0].slice()),o([s],r)}([j,B],d/2,g/2,r,O,P);a?go(a,U)&&D.push(U):D.push(U)}}}return l(D)}function vo(t){if(t.features.length<=1)return t;var e=function(t){var e=Po(),n=[];return k(t,(function(t,e){var r=G(t);n.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})})),e.load(n),e}(t),n=[],r={};return k(t,(function(t,i){if(r[i])return!0;for(e.remove({index:i},Eo),r[i]=!0;;){var o=G(t),a=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(a.length>0){var s=a.map((function(t){return r[t.index]=!0,e.remove({index:t.index},Eo),t.geojson}));s.push(t),t=po.apply(this,s)}if(0===a.length)break}n.push(t)})),l(n)}function Eo(t,e){return t.index===e.index}function _o(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!w(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],c=t[2],h=t[3],f=e/Dt([s,u],[c,u],n)*(c-s),p=e/Dt([s,u],[s,h],n)*(h-u),d=c-s,g=h-u,m=Math.floor(d/f),y=Math.floor(g/p),v=(g-y*p)/2,E=s+(d-m*f)/2,_=0;_<m;_++){for(var b=u+v,S=0;S<y;S++){var T=o([[[E,b],[E,b+p],[E+f,b+p],[E+f,b],[E,b]]],r);i?go(i,T)&&a.push(T):a.push(T),b+=p}E+=f}return l(a)}function bo(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!w(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=e/Dt([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),u=e/Dt([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),c=0,h=t[0];h<=t[2];){for(var f=0,p=t[1];p<=t[3];){var d=null,g=null;c%2==0&&f%2==0?(d=o([[[h,p],[h,p+u],[h+s,p],[h,p]]],r),g=o([[[h,p+u],[h+s,p+u],[h+s,p],[h,p+u]]],r)):c%2==0&&f%2==1?(d=o([[[h,p],[h+s,p+u],[h+s,p],[h,p]]],r),g=o([[[h,p],[h,p+u],[h+s,p+u],[h,p]]],r)):f%2==0&&c%2==1?(d=o([[[h,p],[h,p+u],[h+s,p+u],[h,p]]],r),g=o([[[h,p],[h+s,p+u],[h+s,p],[h,p]]],r)):f%2==1&&c%2==1&&(d=o([[[h,p],[h,p+u],[h+s,p],[h,p]]],r),g=o([[[h,p+u],[h+s,p+u],[h+s,p],[h,p+u]]],r)),i?(go(i,d)&&a.push(d),go(i,g)&&a.push(g)):(a.push(d),a.push(g)),p+=u,f++}c++,h+=s}return l(a)}var So=6371008.8,wo={meters:So,metres:So,millimeters:1e3*So,millimetres:1e3*So,centimeters:100*So,centimetres:100*So,kilometers:So/1e3,kilometres:So/1e3,miles:So/1609.344,nauticalmiles:So/1852,inches:39.37*So,yards:So/1.0936,feet:3.28084*So,radians:1,degrees:So/111325},xo={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/So,degrees:1/111325},To={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},Lo=Object.freeze({earthRadius:So,factors:wo,unitsFactors:xo,areaFactors:To,feature:e,geometry:n,point:r,points:i,polygon:o,polygons:a,lineString:s,lineStrings:u,featureCollection:l,multiLineString:c,multiPoint:h,multiPolygon:f,geometryCollection:p,round:d,radiansToLength:g,lengthToRadians:m,lengthToDegrees:y,bearingToAzimuth:v,radiansToDegrees:E,degreesToRadians:_,convertLength:b,convertArea:S,isNumber:w,isObject:x,validateBBox:T,validateId:L,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),Co=Object.freeze({coordEach:C,coordReduce:A,propEach:M,propReduce:R,featureEach:O,featureReduce:P,coordAll:I,geomEach:N,geomReduce:D,flattenEach:k,flattenReduce:F,segmentEach:V,segmentReduce:j,lineEach:B,lineReduce:U}),Ao=Object.freeze({getCoord:K,getCoords:W,containsNumber:z,geojsonType:Y,featureOf:H,collectionOf:q,getGeom:X,getGeomType:Z,getType:J}),Mo={successCallback:null,verbose:!1},Ro={},Oo=function t(e,n,r,i,o){for(r=r||0,i=i||e.length-1,o=o||function(t,e){return t<e?-1:t>e?1:0};i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var h=e[n],f=r,p=i;for(rt(e,r,n),o(e[i],h)>0&&rt(e,r,i);f<p;){for(rt(e,f,p),f++,p--;o(e[f],h)<0;)f++;for(;o(e[p],h)>0;)p--}0===o(e[r],h)?rt(e,r,p):rt(e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}},Po=it;it.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!pt(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],pt(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):ft(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!pt(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],pt(t,a=e.leaf?n(o):o)){if(e.leaf||ft(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=dt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!ft(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),l.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:ut,compareMinY:lt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return ot(i=dt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=dt([])).leaf=!1,i.height=r;var s,u,l,c,h=Math.ceil(o/a),f=h*Math.ceil(Math.sqrt(a));for(gt(t,e,n,f,this.compareMinX),s=e;s<=n;s+=f)for(gt(t,s,l=Math.min(s+f-1,n),h,this.compareMinY),u=s;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,r-1));return ot(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,l,c,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=ct(a=e.children[i]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<h?(h=l,c=u<c?u:c,s=a):l===h&&u<c&&(c=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),st(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=dt(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,ot(n,this.toBBox),ot(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=dt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ot(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,l,c;for(u=l=1/0,r=e;r<=n-e;r++)a=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=at(t,0,r,this.toBBox),o=at(t,r,n,this.toBBox)),s=ct(i)+ct(o),a<u?(u=a,c=r,l=s<l?s:l):a===u&&s<l&&(l=s,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:ut,i=t.leaf?this.compareMinY:lt;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=at(t,0,e,a),u=at(t,n-e,n,a),l=ht(s)+ht(u);for(i=e;i<n-e;i++)o=t.children[i],st(s,t.leaf?a(o):o),l+=ht(s);for(i=n-e-1;i>=e;i--)o=t.children[i],st(u,t.leaf?a(o):o),l+=ht(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)st(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():ot(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Io=function(t,e,n){var r=t*e,i=No*t,o=i-(i-t),a=t-o,s=No*e,u=s-(s-e),l=e-u,c=a*l-(r-o*u-a*u-o*l);return n?(n[0]=c,n[1]=r,n):[c,r]},No=+(Math.pow(2,27)+1),Do=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,a=new Array(n+r),s=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=e[l],d=c(p);f<d?(o=h,(u+=1)<n&&(f=c(h=t[u]))):(o=p,(l+=1)<r&&(d=c(p=e[l]))),u<n&&f<d||l>=r?(i=h,(u+=1)<n&&(f=c(h=t[u]))):(i=p,(l+=1)<r&&(d=c(p=e[l])));for(var g,m,y=i+o,v=y-i,E=o-v,_=E,b=y;u<n&&l<r;)f<d?(i=h,(u+=1)<n&&(f=c(h=t[u]))):(i=p,(l+=1)<r&&(d=c(p=e[l]))),(E=(o=_)-(v=(y=i+o)-i))&&(a[s++]=E),_=b-((g=b+y)-(m=g-b))+(y-m),b=g;for(;u<n;)(E=(o=_)-(v=(y=(i=h)+o)-i))&&(a[s++]=E),_=b-((g=b+y)-(m=g-b))+(y-m),b=g,(u+=1)<n&&(h=t[u]);for(;l<r;)(E=(o=_)-(v=(y=(i=p)+o)-i))&&(a[s++]=E),_=b-((g=b+y)-(m=g-b))+(y-m),b=g,(l+=1)<r&&(p=e[l]);return _&&(a[s++]=_),b&&(a[s++]=b),s||(a[s++]=0),a.length=s,a},ko=function(t,e,n){var r=t+e,i=r-t,o=e-i,a=t-(r-i);return n?(n[0]=a+o,n[1]=r,n):[a+o,r]},Fo=function(t,e){var n=t.length;if(1===n){var r=Io(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;Io(t[0],e,o),o[0]&&(i[s++]=o[0]);for(var u=1;u<n;++u){Io(t[u],e,a);var l=o[1];ko(l,a[0],o),o[0]&&(i[s++]=o[0]);var c=a[1],h=o[1],f=c+h,p=h-(f-c);o[1]=f,p&&(i[s++]=p)}return o[1]&&(i[s++]=o[1]),0===s&&(i[s++]=0),i.length=s,i},Vo=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,a=new Array(n+r),s=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=-e[l],d=c(p);f<d?(o=h,(u+=1)<n&&(f=c(h=t[u]))):(o=p,(l+=1)<r&&(d=c(p=-e[l]))),u<n&&f<d||l>=r?(i=h,(u+=1)<n&&(f=c(h=t[u]))):(i=p,(l+=1)<r&&(d=c(p=-e[l])));for(var g,m,y=i+o,v=y-i,E=o-v,_=E,b=y;u<n&&l<r;)f<d?(i=h,(u+=1)<n&&(f=c(h=t[u]))):(i=p,(l+=1)<r&&(d=c(p=-e[l]))),(E=(o=_)-(v=(y=i+o)-i))&&(a[s++]=E),_=b-((g=b+y)-(m=g-b))+(y-m),b=g;for(;u<n;)(E=(o=_)-(v=(y=(i=h)+o)-i))&&(a[s++]=E),_=b-((g=b+y)-(m=g-b))+(y-m),b=g,(u+=1)<n&&(h=t[u]);for(;l<r;)(E=(o=_)-(v=(y=(i=p)+o)-i))&&(a[s++]=E),_=b-((g=b+y)-(m=g-b))+(y-m),b=g,(l+=1)<r&&(p=-e[l]);return _&&(a[s++]=_),b&&(a[s++]=b),s||(a[s++]=0),a.length=s,a},jo=mt((function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[r][o]);return n}function n(t){return 1&t?"-":""}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],a=0;a<t.length;++a)o.push(["scale(",r(i(e(t,a))),",",n(a),t[0][a],")"].join(""));return o}function o(t){for(var n=[],o=[],a=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),s=[],u=0;u<t;++u)0==(1&u)?n.push.apply(n,i(e(a,u))):o.push.apply(o,i(e(a,u))),s.push("m"+u);var l=r(n),c=r(o),h="orientation"+t+"Exact",f=["function ",h,"(",s.join(),"){var p=",l,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",f)(Do,Io,Fo,Vo)}var a=o(3),s=o(4),u=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=i-o;if(i>0){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(o>=0)return s;r=-(i+o)}var u=33306690738754716e-32*r;return s>=u||s<=-u?s:a(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],u=t[1]-r[1],l=e[1]-r[1],c=n[1]-r[1],h=t[2]-r[2],f=e[2]-r[2],p=n[2]-r[2],d=o*c,g=a*l,m=a*u,y=i*c,v=i*l,E=o*u,_=h*(d-g)+f*(m-y)+p*(v-E),b=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(h)+(Math.abs(m)+Math.abs(y))*Math.abs(f)+(Math.abs(v)+Math.abs(E))*Math.abs(p));return _>b||-_>b?_:s(t,e,n,r)}];!function(){for(;u.length<=5;)u.push(o(u.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var a=Function.apply(void 0,n);for(t.exports=a.apply(void 0,[function(t){var e=u[t.length];return e||(e=u[t.length]=o(t.length)),e.apply(void 0,t)}].concat(u)),r=0;r<=5;++r)t.exports[r]=u[r]}()})),Bo=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort((function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]}));var o=[i[0],i[1]],a=[i[0],i[1]];for(r=2;r<e;++r){for(var s=i[r],u=t[s],l=o.length;l>1&&Uo(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(s),l=a.length;l>1&&Uo(t[a[l-2]],t[a[l-1]],u)>=0;)l-=1,a.pop();a.push(s)}n=new Array(a.length+o.length-2);for(var c=0,h=(r=0,o.length);r<h;++r)n[c++]=o[r];for(var f=a.length-2;f>0;--f)n[c++]=a[f];return n},Uo=jo[3],Go=yt,Ko=yt;yt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},Go.default=Ko;var Wo=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],u=e[o][1],l=e[a][0],c=e[a][1];u>r!=c>r&&n<(l-s)*(r-u)/(c-u)+s&&(i=!i)}return i},zo=jo[3],Yo=vt,Ho=vt;Yo.default=Ho;var qo=function(t){return t},Xo=function(t){if(null==t)return qo;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+a;u<l;)c[u]=t[u],++u;return c}},Zo=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},Jo=function(t,e){function n(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){r[t<0?~t:t]=1})),a.push(i)}}var r={},i={},o={},a=[],s=-1;return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)})),e.forEach((function(e){var n,r,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),s=a[0],u=a[1];if(n=o[s])if(delete o[n.end],n.push(e),n.end=u,r=i[u]){delete i[r.start];var l=r===n?n:n.concat(r);i[l.start=n.start]=o[l.end=r.end]=l}else i[n.start]=o[n.end]=n;else if(n=i[u])if(delete i[n.start],n.unshift(e),n.start=s,r=o[s]){delete o[r.end];var c=r===n?n:r.concat(n);i[c.start=r.start]=o[c.end=n.end]=c}else i[n.start]=o[n.end]=n;else i[(n=[e]).start=s]=o[n.end=u]=n})),n(o,i),n(i,o),e.forEach((function(t){r[t<0?~t:t]||a.push([t])})),a},Qo=function(t){return jt(t,Bt.apply(this,arguments))},$o=function(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),u=t-1,l=0;l<t;++l)a[l]=i;return{set:function(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l]=o;if(++h>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o},maybeSet:function(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l];if(++h>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o},get:function(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l];if(++h>=t)break;c=a[l=l+1&u]}return o},keys:function(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=i&&t.push(r)}return t}}},ta=function(t,e){return t[0]===e[0]&&t[1]===e[1]},ea=new ArrayBuffer(16),na=new Float64Array(ea),ra=new Uint32Array(ea),ia=function(t){na[0]=t[0],na[1]=t[1];var e=ra[0]^ra[1];return 2147483647&(e<<5^e>>7^ra[2]^ra[3])},oa=function(t){var e,n,r,i=function(t){function e(t,e,n,r){if(f[n]!==t){f[n]=t;var i=p[n];if(i>=0){var o=d[n];i===e&&o===r||i===r&&o===e||(++m,g[n]=1)}else p[n]=e,d[n]=r}}function n(t){return ia(u[t])}function r(t,e){return ta(u[t],u[e])}var i,o,a,s,u=t.coordinates,l=t.lines,c=t.rings,h=function(){for(var t=$o(1.4*u.length,n,r,Int32Array,-1,Int32Array),e=new Int32Array(u.length),i=0,o=u.length;i<o;++i)e[i]=t.maybeSet(i,i);return e}(),f=new Int32Array(u.length),p=new Int32Array(u.length),d=new Int32Array(u.length),g=new Int8Array(u.length),m=0;for(i=0,o=u.length;i<o;++i)f[i]=p[i]=d[i]=-1;for(i=0,o=l.length;i<o;++i){var y=l[i],v=y[0],E=y[1];for(a=h[v],s=h[++v],++m,g[a]=1;++v<=E;)e(i,a,a=s,s=h[v]);++m,g[s]=1}for(i=0,o=u.length;i<o;++i)f[i]=-1;for(i=0,o=c.length;i<o;++i){var _=c[i],b=_[0]+1,S=_[1];for(e(i,h[S-1],a=h[b-1],s=h[b]);++b<=S;)e(i,a,a=s,s=h[b])}f=p=d=null;var w,x=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=i;return{add:function(r){for(var s=e(r)&a,u=o[s],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)throw new Error("full hashset");u=o[s=s+1&a]}return o[s]=r,!0},has:function(r){for(var s=e(r)&a,u=o[s],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)break;u=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*m,ia,ta);for(i=0,o=u.length;i<o;++i)g[w=h[i]]&&x.add(u[w]);return x}(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,r=a.length;n<r;++n)for(var u=a[n],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=s.length;n<r;++n)for(var h=s[n],f=h[0],p=f,d=h[1],g=i.has(o[f]);++p<d;)i.has(o[p])&&(g?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(function(t,e,n,r){Ut(t,e,n),Ut(t,e,e+r),Ut(t,e+r,n)}(o,f,d,d-p),o[d]=o[f],g=!0,p=f));return t},aa=function(t,e){function n(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function r(t){var e=[];do{var n=l.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function i(t){return t.map(r)}var o=function(t){function e(t){null!=t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>s&&(s=e),n<a&&(a=n),n>u&&(u=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,a=1/0,s=-1/0,u=-1/0,l={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var c in t)e(t[c]);return s>=o&&u>=a?[o,a,s,u]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=Gt(t[e]);return n}(t)),a=e>0&&o&&function(t,e,n){function r(t){return[Math.round((t[0]-l)*p),Math.round((t[1]-c)*d)]}function i(t,e){for(var n,r,i,o,a,s=-1,u=0,h=t.length,f=new Array(h);++s<h;)n=t[s],o=Math.round((n[0]-l)*p),a=Math.round((n[1]-c)*d),o===r&&a===i||(f[u++]=[r=o,i=a]);for(f.length=u;u<e;)u=f.push([f[0][0],f[0][1]]);return f}function o(t){return i(t,2)}function a(t){return i(t,4)}function s(t){return t.map(a)}function u(t){null!=t&&g.hasOwnProperty(t.type)&&g[t.type](t)}var l=e[0],c=e[1],h=e[2],f=e[3],p=h-l?(n-1)/(h-l):1,d=f-c?(n-1)/(f-c):1,g={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=s(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(s)}};for(var m in t)u(t[m]);return{scale:[1/p,1/d],translate:[l,c]}}(t,o,e),s=function(t){function e(t){var e,n,r,i,o,a,s,u;if(r=p.get(e=l[t[0]]))for(s=0,u=r.length;s<u;++s)if(function(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!ta(l[n],l[r]))return!1;return!0}(i=r[s],t))return t[0]=i[0],void(t[1]=i[1]);if(o=p.get(n=l[t[1]]))for(s=0,u=o.length;s<u;++s)if(function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,--o)if(!ta(l[n],l[o]))return!1;return!0}(a=o[s],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):p.set(e,[t]),o?o.push(t):p.set(n,[t]),d.push(t)}function n(t,e){var n=t[0],r=e[0],o=t[1]-n;if(o!==e[1]-r)return!1;for(var a=i(t),s=i(e),u=0;u<o;++u)if(!ta(l[n+(u+a)%o],l[r+(u+s)%o]))return!1;return!0}function r(t,e){var n=t[0],r=e[0],o=t[1],a=e[1],s=o-n;if(s!==a-r)return!1;for(var u=i(t),c=s-i(e),h=0;h<s;++h)if(!ta(l[n+(h+u)%s],l[a-(h+c)%s]))return!1;return!0}function i(t){for(var e=t[0],n=t[1],r=e,i=r,o=l[r];++r<n;){var a=l[r];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(i=r,o=a)}return i-e}var o,a,s,u,l=t.coordinates,c=t.lines,h=t.rings,f=c.length+h.length;for(delete t.lines,delete t.rings,s=0,u=c.length;s<u;++s)for(o=c[s];o=o.next;)++f;for(s=0,u=h.length;s<u;++s)for(a=h[s];a=a.next;)++f;var p=$o(2*f*1.4,ia,ta),d=t.arcs=[];for(s=0,u=c.length;s<u;++s){o=c[s];do{e(o)}while(o=o.next)}for(s=0,u=h.length;s<u;++s)if((a=h[s]).next)do{e(a)}while(a=a.next);else!function(t){var e,o,a,s,u;if(o=p.get(l[t[0]]))for(s=0,u=o.length;s<u;++s){if(n(a=o[s],t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}if(o=p.get(e=l[t[0]+i(t)]))for(s=0,u=o.length;s<u;++s){if(n(a=o[s],t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}o?o.push(t):p.set(e,[t]),d.push(t)}(a);return t}(oa(function(t){function e(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function i(t){return t.map(r)}var o=-1,a=[],s=[],u=[],l={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var c in t)e(t[c]);return{type:"Topology",coordinates:u,lines:a,rings:s,objects:t}}(t))),u=s.coordinates,l=$o(1.4*s.arcs.length,zt,Yt);t=s.objects,s.bbox=o,s.arcs=s.arcs.map((function(t,e){return l.set(t,e),u.slice(t[0],t[1]+1)})),delete s.coordinates,u=null;var c={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var h in t)n(t[h]);return a&&(s.transform=a,s.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],a=0,s=1,u=o.length,l=o[0],c=l[0],h=l[1];++a<u;)r=(l=o[a])[0],i=l[1],r===c&&i===h||(o[s++]=[r-c,i-h],c=r,h=i);1===s&&(o[s++]=[0,0]),o.length=s}return t}(s.arcs)),s},sa=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};sa.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},sa.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},sa.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])};var ua=fe,la=fe;fe.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(Le(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(Le(t,l,c,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},fe.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},ua.default=la,Oe.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Be(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],Be(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):je(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Be(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Be(t,a=e.leaf?n(o):o)){if(e.leaf||je(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ue([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!je(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),l.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:De,compareMinY:ke,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return Pe(i=Ue(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=Ue([])).leaf=!1,i.height=r;var s,u,l,c,h=Math.ceil(o/a),f=h*Math.ceil(Math.sqrt(a));for(Ge(t,e,n,f,this.compareMinX),s=e;s<=n;s+=f)for(Ge(t,s,l=Math.min(s+f-1,n),h,this.compareMinY),u=s;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,r-1));return Pe(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,l,c,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=Fe(a=e.children[i]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<h?(h=l,c=u<c?u:c,s=a):l===h&&u<c&&(c=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),Ne(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=Ue(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Pe(n,this.toBBox),Pe(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=Ue([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Pe(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,l,c;for(u=l=1/0,r=e;r<=n-e;r++)a=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=Ie(t,0,r,this.toBBox),o=Ie(t,r,n,this.toBBox)),s=Fe(i)+Fe(o),a<u?(u=a,c=r,l=s<l?s:l):a===u&&s<l&&(l=s,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:De,i=t.leaf?this.compareMinY:ke;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=Ie(t,0,e,a),u=Ie(t,n-e,n,a),l=Ve(s)+Ve(u);for(i=e;i<n-e;i++)o=t.children[i],Ne(s,t.leaf?a(o):o),l+=Ve(s);for(i=n-e-1;i>=e;i--)o=t.children[i],Ne(u,t.leaf?a(o):o),l+=Ve(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Ne(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Pe(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var ca=Object.freeze({toMercator:$e,toWgs84:tn}),ha=6378137,fa=function(t){function e(){for(var t=[],e=0;e<d.features.length;e++)-1==d.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<d.features.length;r++)t[e]!=r&&At(d.features[t[e]].geometry.coordinates[0][0],d.features[r],{ignoreBoundary:!0})&&ln(d.features[r])<1/0&&(n=r);d.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<d.features.length;t++)if(-1==d.features[t].properties.parent){var e=d.features[t].properties.winding;d.features[t].properties.netWinding=e,r(t,e)}}function r(t,e){for(var n=0;n<d.features.length;n++)if(d.features[n].properties.parent==t){var i=e+d.features[n].properties.winding;d.features[n].properties.netWinding=i,r(n,i)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var i=t.geometry.coordinates.length,a=[],s=0;s<i;s++){var u=t.geometry.coordinates[s];wn(u[0],u[u.length-1])||u.push(u[0]),a.push.apply(a,u.slice(0,u.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(a))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var c=a.length,h=function(t,e,n){function r(t,n,r,i){var u,l,c=o[t][n],h=o[t][n+1],f=o[r][i],p=o[r][i+1],d=function(t,e,n,r){if(bn(t,n)||bn(t,r)||bn(e,n)||bn(r,n))return null;var i=t[0],o=t[1],a=e[0],s=e[1],u=n[0],l=n[1],c=r[0],h=r[1],f=(i-a)*(l-h)-(o-s)*(u-c);return 0===f?null:[((i*s-o*a)*(u-c)-(i-a)*(u*h-l*c))/f,((i*s-o*a)*(l-h)-(o-s)*(u*h-l*c))/f]}(c,h,f,p);if(null!==d&&(u=h[0]!==c[0]?(d[0]-c[0])/(h[0]-c[0]):(d[1]-c[1])/(h[1]-c[1]),l=p[0]!==f[0]?(d[0]-f[0])/(p[0]-f[0]):(d[1]-f[1])/(p[1]-f[1]),!(u>=1||u<=0||l>=1||l<=0))){var g=d,m=!s[g];m&&(s[g]=!0),e?a.push(e(d,t,n,c,h,u,r,i,f,p,l,m)):a.push(d)}}function i(t,e){var n,r,i,a,s=o[t][e],u=o[t][e+1];return s[0]<u[0]?(n=s[0],r=u[0]):(n=u[0],r=s[0]),s[1]<u[1]?(i=s[1],a=u[1]):(i=u[1],a=s[1]),{minX:n,minY:i,maxX:r,maxY:a,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,a=[],s={};if(n){for(var u=[],l=0;l<o.length;l++)for(var c=0;c<o[l].length-1;c++)u.push(i(l,c));var h=Po();h.load(u)}for(var f=0;f<o.length;f++)for(var p=0;p<o[f].length-1;p++)if(n)h.search(i(f,p)).forEach((function(t){var e=t.ring,n=t.edge;r(f,p,e,n)}));else for(var d=0;d<o.length;d++)for(var g=0;g<o[d].length-1;g++)r(f,p,d,g);return e||(a={type:"Feature",geometry:{type:"MultiPoint",coordinates:a}}),a}(t,(function(t,e,n,r,i,o,a,s,u,l,c,h){return[t,e,n,r,i,o,a,s,u,l,c,h]})),f=h.length;if(0==f){var p=[];for(s=0;s<i;s++)p.push(o([t.geometry.coordinates[s]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Sn([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else r=-1;return r}(t.geometry.coordinates[s])}));var d=l(p);return e(),n(),d}var g=[],m=[];for(s=0;s<i;s++){g.push([]);for(var y=0;y<t.geometry.coordinates[s].length-1;y++)g[s].push([new pa(t.geometry.coordinates[s][(y+1).modulo(t.geometry.coordinates[s].length-1)],1,[s,y],[s,(y+1).modulo(t.geometry.coordinates[s].length-1)],void 0)]),m.push(new da(t.geometry.coordinates[s][y],[s,(y-1).modulo(t.geometry.coordinates[s].length-1)],[s,y],void 0,void 0,!1,!0))}for(s=0;s<f;s++)g[h[s][1]][h[s][2]].push(new pa(h[s][0],h[s][5],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0)),h[s][11]&&m.push(new da(h[s][0],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0,void 0,!0,!0));var v=m.length;for(s=0;s<g.length;s++)for(y=0;y<g[s].length;y++)g[s][y].sort((function(t,e){return t.param<e.param?-1:1}));var E=[];for(s=0;s<v;s++)E.push({minX:m[s].coord[0],minY:m[s].coord[1],maxX:m[s].coord[0],maxY:m[s].coord[1],index:s});var _=Po();for(_.load(E),s=0;s<g.length;s++)for(y=0;y<g[s].length;y++)for(var b=0;b<g[s][y].length;b++){w=b==g[s][y].length-1?g[s][(y+1).modulo(t.geometry.coordinates[s].length-1)][0].coord:g[s][y][b+1].coord;var S=_.search({minX:w[0],minY:w[1],maxX:w[0],maxY:w[1]})[0];g[s][y][b].nxtIsectAlongEdgeIn=S.index}for(s=0;s<g.length;s++)for(y=0;y<g[s].length;y++)for(b=0;b<g[s][y].length;b++){var w=g[s][y][b].coord,x=(S=_.search({minX:w[0],minY:w[1],maxX:w[0],maxY:w[1]})[0]).index;x<c?m[x].nxtIsectAlongRingAndEdge2=g[s][y][b].nxtIsectAlongEdgeIn:wn(m[x].ringAndEdge1,g[s][y][b].ringAndEdgeIn)?m[x].nxtIsectAlongRingAndEdge1=g[s][y][b].nxtIsectAlongEdgeIn:m[x].nxtIsectAlongRingAndEdge2=g[s][y][b].nxtIsectAlongEdgeIn}var T=[];for(s=0,y=0;y<i;y++){var L=s;for(b=0;b<t.geometry.coordinates[y].length-1;b++)m[s].coord[0]<m[L].coord[0]&&(L=s),s++;var C=m[L].nxtIsectAlongRingAndEdge2;for(b=0;b<m.length;b++)if(m[b].nxtIsectAlongRingAndEdge1==L||m[b].nxtIsectAlongRingAndEdge2==L){var A=b;break}var M=Sn([m[A].coord,m[L].coord,m[C].coord],!0)?1:-1;T.push({isect:L,parent:-1,winding:M})}for(T.sort((function(t,e){return m[t.isect].coord>m[e.isect].coord?-1:1})),p=[];T.length>0;){var R=T.pop(),O=R.isect,P=R.parent,I=R.winding,N=p.length,D=[m[O].coord],k=O;if(m[O].ringAndEdge1Walkable)var F=m[O].ringAndEdge1,V=m[O].nxtIsectAlongRingAndEdge1;else F=m[O].ringAndEdge2,V=m[O].nxtIsectAlongRingAndEdge2;for(;!wn(m[O].coord,m[V].coord);){D.push(m[V].coord);var j=void 0;for(s=0;s<T.length;s++)if(T[s].isect==V){j=s;break}if(void 0!=j&&T.splice(j,1),wn(F,m[V].ringAndEdge1)){if(F=m[V].ringAndEdge2,m[V].ringAndEdge2Walkable=!1,m[V].ringAndEdge1Walkable){var B={isect:V};Sn([m[k].coord,m[V].coord,m[m[V].nxtIsectAlongRingAndEdge2].coord],1==I)?(B.parent=P,B.winding=-I):(B.parent=N,B.winding=I),T.push(B)}k=V,V=m[V].nxtIsectAlongRingAndEdge2}else F=m[V].ringAndEdge1,m[V].ringAndEdge1Walkable=!1,m[V].ringAndEdge2Walkable&&(B={isect:V},Sn([m[k].coord,m[V].coord,m[m[V].nxtIsectAlongRingAndEdge1].coord],1==I)?(B.parent=P,B.winding=-I):(B.parent=N,B.winding=I),T.push(B)),k=V,V=m[V].nxtIsectAlongRingAndEdge1}D.push(m[V].coord),p.push(o([D],{index:N,parent:P,winding:I,netWinding:void 0}))}return d=l(p),e(),n(),d},pa=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},da=function(t,e,n,r,i,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};Number.prototype.modulo=function(t){return(this%t+t)%t};var ga=Math.PI/180,ma=180/Math.PI,ya=function(t,e){this.lon=t,this.lat=e,this.x=ga*t,this.y=ga*e};ya.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},ya.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new ya(e,t)};var va=function(){this.coords=[],this.length=0};va.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Ea=function(t){this.properties=t||{},this.geometries=[]};Ea.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Ea.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var _a=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ya(t.x,t.y),this.end=new ya(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};_a.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=ma*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[ma*Math.atan2(i,r),a]},_a.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,u=0,l=e&&e.offset?e.offset:10,c=180-l,h=-180+l,f=360-l,p=1;p<n.length;++p){var d=n[p-1][0],g=n[p][0],m=Math.abs(g-d);m>f&&(g>c&&d<h||d>c&&g<h)?s=!0:m>u&&(u=m)}var y=[];if(s&&u<l){var v=[];y.push(v);for(var E=0;E<n.length;++E){var _=parseFloat(n[E][0]);if(E>0&&Math.abs(_-n[E-1][0])>f){var b=parseFloat(n[E-1][0]),S=parseFloat(n[E-1][1]),w=parseFloat(n[E][0]),x=parseFloat(n[E][1]);if(b>-180&&b<h&&180===w&&E+1<n.length&&n[E-1][0]>-180&&n[E-1][0]<h){v.push([-180,n[E][1]]),E++,v.push([n[E][0],n[E][1]]);continue}if(b>c&&b<180&&-180===w&&E+1<n.length&&n[E-1][0]>c&&n[E-1][0]<180){v.push([180,n[E][1]]),E++,v.push([n[E][0],n[E][1]]);continue}if(b<h&&w>c){var T=b;b=w,w=T;var L=S;S=x,x=L}if(b>c&&w<h&&(w+=360),b<=180&&w>=180&&b<w){var C=(180-b)/(w-b),A=C*x+(1-C)*S;v.push([n[E-1][0]>c?180:-180,A]),(v=[]).push([n[E-1][0]>c?-180:180,A]),y.push(v)}else v=[],y.push(v);v.push([_,n[E][1]])}else v.push([n[E][0],n[E][1]])}}else{var M=[];y.push(M);for(var R=0;R<n.length;++R)M.push([n[R][0],n[R][1]])}for(var O=new Ea(this.properties),P=0;P<y.length;++P){var I=new va;O.geometries.push(I);for(var N=y[P],D=0;D<N.length;++D)I.move_to(N[D])}return O};var ba=Dn;Dn.polyline=Dn,Dn.polygon=function(t,e){var n,r,i,o,a,s,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Fn(i=t[t.length-1],e)&r),a=0;a<t.length;a++)(u=!(Fn(s=t[a],e)&r))!==o&&n.push(kn(i,s,r,e)),u&&n.push(s),i=s,o=u;if(!(t=n).length)break}return n};var Sa=Array.prototype.slice,wa={successCallback:null,verbose:!1,polygons:!1},xa={},Ta=64,La=16,Ca=4,Aa=1,Ma=[],Ra=[],Oa=[],Pa=[],Ia=[],Na=[],Da=[],ka=[],Fa=[],Va=[],ja=[],Ba=[],Ua=[],Ga=[],Ka=[],Wa=[],za=[],Ya=[],Ha=[],qa=[],Xa=[],Za=[],Ja=[],Qa=[];Da[85]=Va[85]=-1,ka[85]=ja[85]=0,Fa[85]=Ba[85]=1,Ha[85]=Za[85]=1,qa[85]=Ja[85]=0,Xa[85]=Qa[85]=1,Ma[85]=Pa[85]=0,Ra[85]=Ia[85]=-1,Oa[85]=Ka[85]=0,Wa[85]=Ua[85]=0,za[85]=Ga[85]=1,Na[85]=Ya[85]=1,Za[1]=Za[169]=0,Ja[1]=Ja[169]=-1,Qa[1]=Qa[169]=0,Ua[1]=Ua[169]=-1,Ga[1]=Ga[169]=0,Ka[1]=Ka[169]=0,Va[4]=Va[166]=0,ja[4]=ja[166]=-1,Ba[4]=Ba[166]=1,Wa[4]=Wa[166]=1,za[4]=za[166]=0,Ya[4]=Ya[166]=0,Da[16]=Da[154]=0,ka[16]=ka[154]=1,Fa[16]=Fa[154]=1,Pa[16]=Pa[154]=1,Ia[16]=Ia[154]=0,Na[16]=Na[154]=1,Ha[64]=Ha[106]=0,qa[64]=qa[106]=1,Xa[64]=Xa[106]=0,Ma[64]=Ma[106]=-1,Ra[64]=Ra[106]=0,Oa[64]=Oa[106]=1,Ha[2]=Ha[168]=0,qa[2]=qa[168]=-1,Xa[2]=Xa[168]=1,Za[2]=Za[168]=0,Ja[2]=Ja[168]=-1,Qa[2]=Qa[168]=0,Ua[2]=Ua[168]=-1,Ga[2]=Ga[168]=0,Ka[2]=Ka[168]=0,Wa[2]=Wa[168]=-1,za[2]=za[168]=0,Ya[2]=Ya[168]=1,Da[8]=Da[162]=0,ka[8]=ka[162]=-1,Fa[8]=Fa[162]=0,Va[8]=Va[162]=0,ja[8]=ja[162]=-1,Ba[8]=Ba[162]=1,Ua[8]=Ua[162]=1,Ga[8]=Ga[162]=0,Ka[8]=Ka[162]=1,Wa[8]=Wa[162]=1,za[8]=za[162]=0,Ya[8]=Ya[162]=0,Da[32]=Da[138]=0,ka[32]=ka[138]=1,Fa[32]=Fa[138]=1,Va[32]=Va[138]=0,ja[32]=ja[138]=1,Ba[32]=Ba[138]=0,Ma[32]=Ma[138]=1,Ra[32]=Ra[138]=0,Oa[32]=Oa[138]=0,Pa[32]=Pa[138]=1,Ia[32]=Ia[138]=0,Na[32]=Na[138]=1,Za[128]=Za[42]=0,Ja[128]=Ja[42]=1,Qa[128]=Qa[42]=1,Ha[128]=Ha[42]=0,qa[128]=qa[42]=1,Xa[128]=Xa[42]=0,Ma[128]=Ma[42]=-1,Ra[128]=Ra[42]=0,Oa[128]=Oa[42]=1,Pa[128]=Pa[42]=-1,Ia[128]=Ia[42]=0,Na[128]=Na[42]=0,Va[5]=Va[165]=-1,ja[5]=ja[165]=0,Ba[5]=Ba[165]=0,Za[5]=Za[165]=1,Ja[5]=Ja[165]=0,Qa[5]=Qa[165]=0,Wa[20]=Wa[150]=0,za[20]=za[150]=1,Ya[20]=Ya[150]=1,Pa[20]=Pa[150]=0,Ia[20]=Ia[150]=-1,Na[20]=Na[150]=1,Da[80]=Da[90]=-1,ka[80]=ka[90]=0,Fa[80]=Fa[90]=1,Ha[80]=Ha[90]=1,qa[80]=qa[90]=0,Xa[80]=Xa[90]=1,Ua[65]=Ua[105]=0,Ga[65]=Ga[105]=1,Ka[65]=Ka[105]=0,Ma[65]=Ma[105]=0,Ra[65]=Ra[105]=-1,Oa[65]=Oa[105]=0,Da[160]=Da[10]=-1,ka[160]=ka[10]=0,Fa[160]=Fa[10]=1,Va[160]=Va[10]=-1,ja[160]=ja[10]=0,Ba[160]=Ba[10]=0,Za[160]=Za[10]=1,Ja[160]=Ja[10]=0,Qa[160]=Qa[10]=0,Ha[160]=Ha[10]=1,qa[160]=qa[10]=0,Xa[160]=Xa[10]=1,Wa[130]=Wa[40]=0,za[130]=za[40]=1,Ya[130]=Ya[40]=1,Ua[130]=Ua[40]=0,Ga[130]=Ga[40]=1,Ka[130]=Ka[40]=0,Ma[130]=Ma[40]=0,Ra[130]=Ra[40]=-1,Oa[130]=Oa[40]=0,Pa[130]=Pa[40]=0,Ia[130]=Ia[40]=-1,Na[130]=Na[40]=1,Va[37]=Va[133]=0,ja[37]=ja[133]=1,Ba[37]=Ba[133]=1,Za[37]=Za[133]=0,Ja[37]=Ja[133]=1,Qa[37]=Qa[133]=0,Ma[37]=Ma[133]=-1,Ra[37]=Ra[133]=0,Oa[37]=Oa[133]=0,Pa[37]=Pa[133]=1,Ia[37]=Ia[133]=0,Na[37]=Na[133]=0,Wa[148]=Wa[22]=-1,za[148]=za[22]=0,Ya[148]=Ya[22]=0,Za[148]=Za[22]=0,Ja[148]=Ja[22]=-1,Qa[148]=Qa[22]=1,Ha[148]=Ha[22]=0,qa[148]=qa[22]=1,Xa[148]=Xa[22]=1,Pa[148]=Pa[22]=-1,Ia[148]=Ia[22]=0,Na[148]=Na[22]=1,Da[82]=Da[88]=0,ka[82]=ka[88]=-1,Fa[82]=Fa[88]=1,Wa[82]=Wa[88]=1,za[82]=za[88]=0,Ya[82]=Ya[88]=1,Ua[82]=Ua[88]=-1,Ga[82]=Ga[88]=0,Ka[82]=Ka[88]=1,Ha[82]=Ha[88]=0,qa[82]=qa[88]=-1,Xa[82]=Xa[88]=0,Da[73]=Da[97]=0,ka[73]=ka[97]=1,Fa[73]=Fa[97]=0,Va[73]=Va[97]=0,ja[73]=ja[97]=-1,Ba[73]=Ba[97]=0,Ua[73]=Ua[97]=1,Ga[73]=Ga[97]=0,Ka[73]=Ka[97]=0,Ma[73]=Ma[97]=1,Ra[73]=Ra[97]=0,Oa[73]=Oa[97]=1,Da[145]=Da[25]=0,ka[145]=ka[25]=-1,Fa[145]=Fa[25]=0,Ua[145]=Ua[25]=1,Ga[145]=Ga[25]=0,Ka[145]=Ka[25]=1,Za[145]=Za[25]=0,Ja[145]=Ja[25]=1,Qa[145]=Qa[25]=1,Pa[145]=Pa[25]=-1,Ia[145]=Ia[25]=0,Na[145]=Na[25]=0,Va[70]=Va[100]=0,ja[70]=ja[100]=1,Ba[70]=Ba[100]=0,Wa[70]=Wa[100]=-1,za[70]=za[100]=0,Ya[70]=Ya[100]=1,Ha[70]=Ha[100]=0,qa[70]=qa[100]=-1,Xa[70]=Xa[100]=1,Ma[70]=Ma[100]=1,Ra[70]=Ra[100]=0,Oa[70]=Oa[100]=0,Va[101]=Va[69]=0,ja[101]=ja[69]=1,Ba[101]=Ba[69]=0,Ma[101]=Ma[69]=1,Ra[101]=Ra[69]=0,Oa[101]=Oa[69]=0,Za[149]=Za[21]=0,Ja[149]=Ja[21]=1,Qa[149]=Qa[21]=1,Pa[149]=Pa[21]=-1,Ia[149]=Ia[21]=0,Na[149]=Na[21]=0,Wa[86]=Wa[84]=-1,za[86]=za[84]=0,Ya[86]=Ya[84]=1,Ha[86]=Ha[84]=0,qa[86]=qa[84]=-1,Xa[86]=Xa[84]=1,Da[89]=Da[81]=0,ka[89]=ka[81]=-1,Fa[89]=Fa[81]=0,Ua[89]=Ua[81]=1,Ga[89]=Ga[81]=0,Ka[89]=Ka[81]=1,Da[96]=Da[74]=0,ka[96]=ka[74]=1,Fa[96]=Fa[74]=0,Va[96]=Va[74]=-1,ja[96]=ja[74]=0,Ba[96]=Ba[74]=1,Ha[96]=Ha[74]=1,qa[96]=qa[74]=0,Xa[96]=Xa[74]=0,Ma[96]=Ma[74]=1,Ra[96]=Ra[74]=0,Oa[96]=Oa[74]=1,Da[24]=Da[146]=0,ka[24]=ka[146]=-1,Fa[24]=Fa[146]=1,Wa[24]=Wa[146]=1,za[24]=za[146]=0,Ya[24]=Ya[146]=1,Ua[24]=Ua[146]=0,Ga[24]=Ga[146]=1,Ka[24]=Ka[146]=1,Pa[24]=Pa[146]=0,Ia[24]=Ia[146]=-1,Na[24]=Na[146]=0,Va[6]=Va[164]=-1,ja[6]=ja[164]=0,Ba[6]=Ba[164]=1,Wa[6]=Wa[164]=-1,za[6]=za[164]=0,Ya[6]=Ya[164]=0,Za[6]=Za[164]=0,Ja[6]=Ja[164]=-1,Qa[6]=Qa[164]=1,Ha[6]=Ha[164]=1,qa[6]=qa[164]=0,Xa[6]=Xa[164]=0,Ua[129]=Ua[41]=0,Ga[129]=Ga[41]=1,Ka[129]=Ka[41]=1,Za[129]=Za[41]=0,Ja[129]=Ja[41]=1,Qa[129]=Qa[41]=0,Ma[129]=Ma[41]=-1,Ra[129]=Ra[41]=0,Oa[129]=Oa[41]=0,Pa[129]=Pa[41]=0,Ia[129]=Ia[41]=-1,Na[129]=Na[41]=0,Wa[66]=Wa[104]=0,za[66]=za[104]=1,Ya[66]=Ya[104]=0,Ua[66]=Ua[104]=-1,Ga[66]=Ga[104]=0,Ka[66]=Ka[104]=1,Ha[66]=Ha[104]=0,qa[66]=qa[104]=-1,Xa[66]=Xa[104]=0,Ma[66]=Ma[104]=0,Ra[66]=Ra[104]=-1,Oa[66]=Oa[104]=1,Da[144]=Da[26]=-1,ka[144]=ka[26]=0,Fa[144]=Fa[26]=0,Za[144]=Za[26]=1,Ja[144]=Ja[26]=0,Qa[144]=Qa[26]=1,Ha[144]=Ha[26]=0,qa[144]=qa[26]=1,Xa[144]=Xa[26]=1,Pa[144]=Pa[26]=-1,Ia[144]=Ia[26]=0,Na[144]=Na[26]=1,Va[36]=Va[134]=0,ja[36]=ja[134]=1,Ba[36]=Ba[134]=1,Wa[36]=Wa[134]=0,za[36]=za[134]=1,Ya[36]=Ya[134]=0,Ma[36]=Ma[134]=0,Ra[36]=Ra[134]=-1,Oa[36]=Oa[134]=1,Pa[36]=Pa[134]=1,Ia[36]=Ia[134]=0,Na[36]=Na[134]=0,Da[9]=Da[161]=-1,ka[9]=ka[161]=0,Fa[9]=Fa[161]=0,Va[9]=Va[161]=0,ja[9]=ja[161]=-1,Ba[9]=Ba[161]=0,Ua[9]=Ua[161]=1,Ga[9]=Ga[161]=0,Ka[9]=Ka[161]=0,Za[9]=Za[161]=1,Ja[9]=Ja[161]=0,Qa[9]=Qa[161]=1,Da[136]=0,ka[136]=1,Fa[136]=1,Va[136]=0,ja[136]=1,Ba[136]=0,Wa[136]=-1,za[136]=0,Ya[136]=1,Ua[136]=-1,Ga[136]=0,Ka[136]=0,Za[136]=0,Ja[136]=-1,Qa[136]=0,Ha[136]=0,qa[136]=-1,Xa[136]=1,Ma[136]=1,Ra[136]=0,Oa[136]=0,Pa[136]=1,Ia[136]=0,Na[136]=1,Da[34]=0,ka[34]=-1,Fa[34]=0,Va[34]=0,ja[34]=-1,Ba[34]=1,Wa[34]=1,za[34]=0,Ya[34]=0,Ua[34]=1,Ga[34]=0,Ka[34]=1,Za[34]=0,Ja[34]=1,Qa[34]=1,Ha[34]=0,qa[34]=1,Xa[34]=0,Ma[34]=-1,Ra[34]=0,Oa[34]=1,Pa[34]=-1,Ia[34]=0,Na[34]=0,Da[35]=0,ka[35]=1,Fa[35]=1,Va[35]=0,ja[35]=-1,Ba[35]=1,Wa[35]=1,za[35]=0,Ya[35]=0,Ua[35]=-1,Ga[35]=0,Ka[35]=0,Za[35]=0,Ja[35]=-1,Qa[35]=0,Ha[35]=0,qa[35]=1,Xa[35]=0,Ma[35]=-1,Ra[35]=0,Oa[35]=1,Pa[35]=1,Ia[35]=0,Na[35]=1,Da[153]=0,ka[153]=1,Fa[153]=1,Ua[153]=-1,Ga[153]=0,Ka[153]=0,Za[153]=0,Ja[153]=-1,Qa[153]=0,Pa[153]=1,Ia[153]=0,Na[153]=1,Va[102]=0,ja[102]=-1,Ba[102]=1,Wa[102]=1,za[102]=0,Ya[102]=0,Ha[102]=0,qa[102]=1,Xa[102]=0,Ma[102]=-1,Ra[102]=0,Oa[102]=1,Da[155]=0,ka[155]=-1,Fa[155]=0,Ua[155]=1,Ga[155]=0,Ka[155]=1,Za[155]=0,Ja[155]=1,Qa[155]=1,Pa[155]=-1,Ia[155]=0,Na[155]=0,Va[103]=0,ja[103]=1,Ba[103]=0,Wa[103]=-1,za[103]=0,Ya[103]=1,Ha[103]=0,qa[103]=-1,Xa[103]=1,Ma[103]=1,Ra[103]=0,Oa[103]=0,Da[152]=0,ka[152]=1,Fa[152]=1,Wa[152]=-1,za[152]=0,Ya[152]=1,Ua[152]=-1,Ga[152]=0,Ka[152]=0,Za[152]=0,Ja[152]=-1,Qa[152]=0,Ha[152]=0,qa[152]=-1,Xa[152]=1,Pa[152]=1,Ia[152]=0,Na[152]=1,Da[156]=0,ka[156]=-1,Fa[156]=1,Wa[156]=1,za[156]=0,Ya[156]=1,Ua[156]=-1,Ga[156]=0,Ka[156]=0,Za[156]=0,Ja[156]=-1,Qa[156]=0,Ha[156]=0,qa[156]=1,Xa[156]=1,Pa[156]=-1,Ia[156]=0,Na[156]=1,Da[137]=0,ka[137]=1,Fa[137]=1,Va[137]=0,ja[137]=1,Ba[137]=0,Ua[137]=-1,Ga[137]=0,Ka[137]=0,Za[137]=0,Ja[137]=-1,Qa[137]=0,Ma[137]=1,Ra[137]=0,Oa[137]=0,Pa[137]=1,Ia[137]=0,Na[137]=1,Da[139]=0,ka[139]=1,Fa[139]=1,Va[139]=0,ja[139]=-1,Ba[139]=0,Ua[139]=1,Ga[139]=0,Ka[139]=0,Za[139]=0,Ja[139]=1,Qa[139]=0,Ma[139]=-1,Ra[139]=0,Oa[139]=0,Pa[139]=1,Ia[139]=0,Na[139]=1,Da[98]=0,ka[98]=-1,Fa[98]=0,Va[98]=0,ja[98]=-1,Ba[98]=1,Wa[98]=1,za[98]=0,Ya[98]=0,Ua[98]=1,Ga[98]=0,Ka[98]=1,Ha[98]=0,qa[98]=1,Xa[98]=0,Ma[98]=-1,Ra[98]=0,Oa[98]=1,Da[99]=0,ka[99]=1,Fa[99]=0,Va[99]=0,ja[99]=-1,Ba[99]=1,Wa[99]=1,za[99]=0,Ya[99]=0,Ua[99]=-1,Ga[99]=0,Ka[99]=1,Ha[99]=0,qa[99]=-1,Xa[99]=0,Ma[99]=1,Ra[99]=0,Oa[99]=1,Va[38]=0,ja[38]=-1,Ba[38]=1,Wa[38]=1,za[38]=0,Ya[38]=0,Za[38]=0,Ja[38]=1,Qa[38]=1,Ha[38]=0,qa[38]=1,Xa[38]=0,Ma[38]=-1,Ra[38]=0,Oa[38]=1,Pa[38]=-1,Ia[38]=0,Na[38]=0,Va[39]=0,ja[39]=1,Ba[39]=1,Wa[39]=-1,za[39]=0,Ya[39]=0,Za[39]=0,Ja[39]=-1,Qa[39]=1,Ha[39]=0,qa[39]=1,Xa[39]=0,Ma[39]=-1,Ra[39]=0,Oa[39]=1,Pa[39]=1,Ia[39]=0,Na[39]=0;var $a=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ts=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},es=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},ns=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},rs=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},is=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},os=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},as=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},ss=[],us=[],ls=[],cs=[],hs=[],fs=[],ps=[],ds=[];cs[1]=hs[1]=18,cs[169]=hs[169]=18,ls[4]=us[4]=12,ls[166]=us[166]=12,ss[16]=ds[16]=4,ss[154]=ds[154]=4,fs[64]=ps[64]=22,fs[106]=ps[106]=22,ls[2]=fs[2]=17,cs[2]=hs[2]=18,ls[168]=fs[168]=17,cs[168]=hs[168]=18,ss[8]=cs[8]=9,us[8]=ls[8]=12,ss[162]=cs[162]=9,us[162]=ls[162]=12,ss[32]=ds[32]=4,us[32]=ps[32]=1,ss[138]=ds[138]=4,us[138]=ps[138]=1,hs[128]=ds[128]=21,fs[128]=ps[128]=22,hs[42]=ds[42]=21,fs[42]=ps[42]=22,us[5]=hs[5]=14,us[165]=hs[165]=14,ls[20]=ds[20]=6,ls[150]=ds[150]=6,ss[80]=fs[80]=11,ss[90]=fs[90]=11,cs[65]=ps[65]=3,cs[105]=ps[105]=3,ss[160]=fs[160]=11,us[160]=hs[160]=14,ss[10]=fs[10]=11,us[10]=hs[10]=14,ls[130]=ds[130]=6,cs[130]=ps[130]=3,ls[40]=ds[40]=6,cs[40]=ps[40]=3,us[101]=ps[101]=1,us[69]=ps[69]=1,hs[149]=ds[149]=21,hs[21]=ds[21]=21,ls[86]=fs[86]=17,ls[84]=fs[84]=17,ss[89]=cs[89]=9,ss[81]=cs[81]=9,ss[96]=ps[96]=0,us[96]=fs[96]=15,ss[74]=ps[74]=0,us[74]=fs[74]=15,ss[24]=ls[24]=8,cs[24]=ds[24]=7,ss[146]=ls[146]=8,cs[146]=ds[146]=7,us[6]=fs[6]=15,ls[6]=hs[6]=16,us[164]=fs[164]=15,ls[164]=hs[164]=16,cs[129]=ds[129]=7,hs[129]=ps[129]=20,cs[41]=ds[41]=7,hs[41]=ps[41]=20,ls[66]=ps[66]=2,cs[66]=fs[66]=19,ls[104]=ps[104]=2,cs[104]=fs[104]=19,ss[144]=hs[144]=10,fs[144]=ds[144]=23,ss[26]=hs[26]=10,fs[26]=ds[26]=23,us[36]=ds[36]=5,ls[36]=ps[36]=2,us[134]=ds[134]=5,ls[134]=ps[134]=2,ss[9]=hs[9]=10,us[9]=cs[9]=13,ss[161]=hs[161]=10,us[161]=cs[161]=13,us[37]=ds[37]=5,hs[37]=ps[37]=20,us[133]=ds[133]=5,hs[133]=ps[133]=20,ls[148]=hs[148]=16,fs[148]=ds[148]=23,ls[22]=hs[22]=16,fs[22]=ds[22]=23,ss[82]=ls[82]=8,cs[82]=fs[82]=19,ss[88]=ls[88]=8,cs[88]=fs[88]=19,ss[73]=ps[73]=0,us[73]=cs[73]=13,ss[97]=ps[97]=0,us[97]=cs[97]=13,ss[145]=cs[145]=9,hs[145]=ds[145]=21,ss[25]=cs[25]=9,hs[25]=ds[25]=21,us[70]=ps[70]=1,ls[70]=fs[70]=17,us[100]=ps[100]=1,ls[100]=fs[100]=17,ss[34]=cs[34]=9,us[34]=ls[34]=12,hs[34]=ds[34]=21,fs[34]=ps[34]=22,ss[136]=ds[136]=4,us[136]=ps[136]=1,ls[136]=fs[136]=17,cs[136]=hs[136]=18,ss[35]=ds[35]=4,us[35]=ls[35]=12,cs[35]=hs[35]=18,fs[35]=ps[35]=22,ss[153]=ds[153]=4,cs[153]=hs[153]=18,us[102]=ls[102]=12,fs[102]=ps[102]=22,ss[155]=cs[155]=9,hs[155]=ds[155]=23,us[103]=ps[103]=1,ls[103]=fs[103]=17,ss[152]=ds[152]=4,ls[152]=fs[152]=17,cs[152]=hs[152]=18,ss[156]=ls[156]=8,cs[156]=hs[156]=18,fs[156]=ds[156]=23,ss[137]=ds[137]=4,us[137]=ps[137]=1,cs[137]=hs[137]=18,ss[139]=ds[139]=4,us[139]=cs[139]=13,hs[139]=ps[139]=20,ss[98]=cs[98]=9,us[98]=ls[98]=12,fs[98]=ps[98]=22,ss[99]=ps[99]=0,us[99]=ls[99]=12,cs[99]=fs[99]=19,us[38]=ls[38]=12,hs[38]=ds[38]=21,fs[38]=ps[38]=22,us[39]=ds[39]=5,ls[39]=hs[39]=16,fs[39]=ps[39]=22;var gs=[];gs[1]=gs[169]=$a,gs[4]=gs[166]=ts,gs[16]=gs[154]=es,gs[64]=gs[106]=ns,gs[168]=gs[2]=rs,gs[162]=gs[8]=is,gs[138]=gs[32]=os,gs[42]=gs[128]=as,gs[5]=gs[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},gs[20]=gs[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},gs[80]=gs[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},gs[65]=gs[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},gs[160]=gs[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},gs[130]=gs[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},gs[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},gs[101]=gs[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},gs[149]=gs[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},gs[86]=gs[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},gs[89]=gs[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},gs[96]=gs[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},gs[24]=gs[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},gs[6]=gs[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},gs[129]=gs[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},gs[66]=gs[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},gs[144]=gs[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},gs[36]=gs[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},gs[9]=gs[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},gs[37]=gs[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},gs[148]=gs[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},gs[82]=gs[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},gs[73]=gs[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},gs[145]=gs[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},gs[70]=gs[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},gs[34]=function(t){return[as(t),is(t)]},gs[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},gs[136]=function(t){return[os(t),rs(t)]},gs[153]=function(t){return[es(t),$a(t)]},gs[102]=function(t){return[ts(t),ns(t)]},gs[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},gs[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},gs[152]=function(t){return[es(t),rs(t)]},gs[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},gs[137]=function(t){return[os(t),$a(t)]},gs[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},gs[98]=function(t){return[is(t),ns(t)]},gs[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},gs[38]=function(t){return[ts(t),as(t)]},gs[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var ms=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};ms.buildId=function(t){return t.join(",")},ms.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},ms.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},ms.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},ms.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=ur(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},ms.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},ms.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},ms.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var ys=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};ys.prototype.getSymetric=function(){return this.symetric||(this.symetric=new ys(this.to,this.from),this.symetric.symetric=this),this.symetric},ys.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},ys.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},ys.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},ys.prototype.toLineString=function(){return s([this.from.coordinates,this.to.coordinates])},ys.prototype.compareTo=function(t){return ur(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var vs=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},Es={length:{configurable:!0}};vs.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},vs.prototype.get=function(t){return this.edges[t]},Es.length.get=function(){return this.edges.length},vs.prototype.forEach=function(t){this.edges.forEach(t)},vs.prototype.map=function(t){return this.edges.map(t)},vs.prototype.some=function(t){return this.edges.some(t)},vs.prototype.isValid=function(){return!0},vs.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=ur(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},vs.prototype.toMultiPoint=function(){return h(this.edges.map((function(t){return t.from.coordinates})))},vs.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},vs.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ie(this.toPolygon())},vs.findEdgeRingContaining=function(t,e){var n,i,o=t.getEnvelope();return e.forEach((function(e){var a=e.getEnvelope();if(i&&(n=i.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map((function(t){return t[0]})),r=t.geometry.coordinates.map((function(t){return t[1]})),i=e.geometry.coordinates.map((function(t){return t[0]})),o=e.geometry.coordinates.map((function(t){return t[1]}));return Math.max(null,n)===Math.max(null,i)&&Math.max(null,r)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,i)&&Math.min(null,r)===Math.min(null,o)}(a,o)&&lr(a,o)){var s=t.map((function(t){return t.from.coordinates})).find((function(t){return!e.some((function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)}))}));s&&e.inside(r(s))&&(i&&!lr(n,a)||(i=e))}})),i},vs.prototype.inside=function(t){return At(t,this.toPolygon())},Object.defineProperties(vs.prototype,Es);var _s=function(){this.edges=[],this.nodes={}};_s.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new _s;return k(t,(function(t){H(t,"LineString","Graph::fromGeoJson"),A(t,(function(t,n){if(t){var r=e.getNode(t),i=e.getNode(n);e.addEdge(r,i)}return n}))})),e},_s.prototype.getNode=function(t){var e=ms.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new ms(t)),n},_s.prototype.addEdge=function(t,e){var n=new ys(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},_s.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},_s.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},_s.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},_s.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},_s.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,u=void 0,l=void 0;a.label===e&&(u=a),s.label===e&&(l=s),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},_s.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},_s.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},_s.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},_s.prototype._findEdgeRing=function(t){var e=t,n=new vs;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},_s.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},_s.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()};var bs=mt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),Ss=(bs.shim,mt((function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=i?n:r).supported=n,e.unsupported=r}))),ws=(Ss.supported,Ss.unsupported,mt((function(t){function e(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}var r=Array.prototype.slice,i=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,u;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(Ss(t))return!!Ss(o)&&(t=r.call(t),o=r.call(o),i(t,o,a));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var l=bs(t),c=bs(o)}catch(t){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),s=l.length-1;s>=0;s--)if(l[s]!=c[s])return!1;for(s=l.length-1;s>=0;s--)if(u=l[s],!i(t[u],o[u],a))return!1;return typeof t==typeof o}(t,o,a))}}))),xs=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:_r};xs.prototype.compare=function(t,e){if(t.type!==e.type||!Er(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=vr(t),i=vr(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},xs.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},xs.prototype.compareLine=function(t,e,n,r){if(!Er(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},xs.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},xs.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},xs.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},xs.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},xs.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},xs.prototype.removePseudo=function(t){return t};var Ts=xs,Ls=mt((function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Cs=mt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,u=0;u<c;u++)a[u]=0;for(var l=0;l<n;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)a[u]+=this.dataset[l][u];s++}}if(s>0){for(u=0;u<c;u++)a[u]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)})),As=mt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),Ms=mt((function(t){function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}if(t.exports)var n=As;e.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var u=new n(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(s,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Rs=mt((function(t){t.exports&&(t.exports={DBSCAN:Ls,KMEANS:Cs,OPTICS:Ms,PriorityQueue:As})})),Os=(Rs.DBSCAN,Rs.KMEANS,Rs.OPTICS,Rs.PriorityQueue,function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i}),Ps=Os,Is=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},Ns=Os,Ds=function(t,e,n,r){var i=[],o=[],a=[],s=[],u=!1,l=r||1e4,c=t.length,h=t[0].length,f=h>0,p=[];if(n)i="kmrand"==n?function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=t[0].length>0;r.length<e&&i-- >0;){var s=t[Math.floor(Math.random()*o)],u=a?s.join("_"):""+s;n[u]||(n[u]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?Ps:Is,r=[],i=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*i)];for(o&&a.join("_"),r.push(a);r.length<e;){for(var s=[],u=r.length,l=0,c=[],h=0;h<i;h++){for(var f=1/0,p=0;p<u;p++){var d=n(t[h],r[p]);d<=f&&(f=d)}s[h]=f}for(var g=0;g<i;g++)l+=s[g];for(var m=0;m<i;m++)c[m]={i:m,v:t[m],pr:s[m]/l,cs:0};c.sort((function(t,e){return t.pr-e.pr})),c[0].cs=c[0].pr;for(var y=1;y<i;y++)c[y].cs=c[y-1].cs+c[y].pr;for(var v=Math.random(),E=0;E<i-1&&c[E++].cs<v;);r.push(c[E-1].v)}return r}(t,e):n;else for(var d={};i.length<e;){var g=Math.floor(Math.random()*c);d[g]||(d[g]=!0,i.push(t[g]))}do{Sr(e,0,p);for(var m=0;m<c;m++){for(var y=1/0,v=0,E=0;E<e;E++)(s=f?Ns(t[m],i[E]):Math.abs(t[m]-i[E]))<=y&&(y=s,v=E);a[m]=v,p[v]++}for(var _=[],b=(o=[],0);b<e;b++)_[b]=f?Sr(h,0,_[b]):0,o[b]=i[b];if(f){for(var S=0;S<e;S++)i[S]=[];for(var w=0;w<c;w++)for(var x=_[a[w]],T=t[w],L=0;L<h;L++)x[L]+=T[L];u=!0;for(var C=0;C<e;C++){for(var A=i[C],M=_[C],R=o[C],O=p[C],P=0;P<h;P++)A[P]=M[P]/O||0;if(u)for(var I=0;I<h;I++)if(R[I]!=A[I]){u=!1;break}}}else{for(var N=0;N<c;N++)_[a[N]]+=t[N];for(var D=0;D<e;D++)i[D]=_[D]/p[D]||0;u=!0;for(var k=0;k<e;k++)if(o[k]!=i[k]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:a,centroids:i}},ks={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||ks.heuristics.manhattan,o=r.closest||!1,a=new Cr((function(t){return t.f})),s=e;for(e.h=i(e,n),a.push(e);a.size()>0;){var u=a.pop();if(u===n)return xr(u);u.closed=!0;for(var l=t.neighbors(u),c=0,h=l.length;c<h;++c){var f=l[c];if(!f.closed&&!f.isWall()){var p=u.g+f.getCost(u),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=u,f.h=f.h||i(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<s.h||f.h===s.h&&f.g<s.g)&&(s=f),d?a.rescoreElement(f):a.push(f))}}}return o?xr(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};Tr.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)ks.cleanNode(this.nodes[t])},Tr.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)ks.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Tr.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Tr.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Tr.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Lr.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Lr.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Lr.prototype.isWall=function(){return 0===this.weight},Cr.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e){var u=this.content[a];(i=this.scoreFunction(u))<r&&(s=a)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};var Fs=function(t){return function(){return t}};Rr.prototype={constructor:Rr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Nr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Pr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ir(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Ir(this,n),n=(t=n).U),n.C=!1,r.C=!0,Pr(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Nr(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Pr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ir(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Pr(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Ir(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Pr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Ir(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Vs,js,Bs,Us,Gs,Ks=[],Ws=[],zs=1e-6,Ys=1e-12;Qr.prototype={constructor:Qr,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Ur(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,u=-1,l=e[i[o-1]],c=l.left===s?l.right:l.left;++u<o;)a=c,c=(l=e[i[u]]).left===s?l.right:l.left,a&&c&&r<a.index&&r<c.index&&Zr(s,a,c)<0&&t.push([s.data,a.data,c.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],l=e-s[1],h=u*u+l*l;h<c&&(c=h,a=s.index)}}))}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}};var Hs=Object.freeze({randomPosition:oi,randomPoint:ai,randomPolygon:si,randomLineString:ui}),qs=Object.freeze({getCluster:ci,clusterEach:hi,clusterReduce:fi,createBins:pi,applyFilter:di,propertiesContainsFilter:gi,filterProperties:mi});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Xs=function(){};Xs.prototype.interfaces_=function(){return[]},Xs.prototype.getClass=function(){return Xs},Xs.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var Zs=function(){},Js=function(){},Qs={MAX_VALUE:{configurable:!0}};Js.isNaN=function(t){return Number.isNaN(t)},Js.doubleToLongBits=function(t){return t},Js.longBitsToDouble=function(t){return t},Js.isInfinite=function(t){return!Number.isFinite(t)},Qs.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Js,Qs);var $s=function(){},tu=function(){},eu=function(){},nu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},ru={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};nu.prototype.setOrdinate=function(t,e){switch(t){case nu.X:this.x=e;break;case nu.Y:this.y=e;break;case nu.Z:this.z=e;break;default:throw new Zs("Invalid ordinate index: "+t)}},nu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!Xs.equalsWithTolerance(this.x,e.x,n)&&!!Xs.equalsWithTolerance(this.y,e.y,n)}},nu.prototype.getOrdinate=function(t){switch(t){case nu.X:return this.x;case nu.Y:return this.y;case nu.Z:return this.z}throw new Zs("Invalid ordinate index: "+t)},nu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||Js.isNaN(this.z))&&Js.isNaN(t.z)},nu.prototype.equals=function(t){return t instanceof nu&&this.equals2D(t)},nu.prototype.equalInZ=function(t,e){return Xs.equalsWithTolerance(this.z,t.z,e)},nu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},nu.prototype.clone=function(){},nu.prototype.copy=function(){return new nu(this)},nu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},nu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},nu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},nu.prototype.hashCode=function(){var t=17;return 37*(t=37*t+nu.hashCode(this.x))+nu.hashCode(this.y)},nu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},nu.prototype.interfaces_=function(){return[$s,tu,yi]},nu.prototype.getClass=function(){return nu},nu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=Js.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},ru.DimensionalComparator.get=function(){return iu},ru.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},ru.NULL_ORDINATE.get=function(){return Js.NaN},ru.X.get=function(){return 0},ru.Y.get=function(){return 1},ru.Z.get=function(){return 2},Object.defineProperties(nu,ru);var iu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new Zs("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};iu.prototype.compare=function(t,e){var n=t,r=e,i=iu.compare(n.x,r.x);if(0!==i)return i;var o=iu.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:iu.compare(n.z,r.z)},iu.prototype.interfaces_=function(){return[eu]},iu.prototype.getClass=function(){return iu},iu.compare=function(t,e){return t<e?-1:t>e?1:Js.isNaN(t)?Js.isNaN(e)?0:-1:Js.isNaN(e)?1:0};var ou=function(){};ou.prototype.create=function(){},ou.prototype.interfaces_=function(){return[]},ou.prototype.getClass=function(){return ou};var au=function(){},su={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};au.prototype.interfaces_=function(){return[]},au.prototype.getClass=function(){return au},au.toLocationSymbol=function(t){switch(t){case au.EXTERIOR:return"e";case au.BOUNDARY:return"b";case au.INTERIOR:return"i";case au.NONE:return"-"}throw new Zs("Unknown location value: "+t)},su.INTERIOR.get=function(){return 0},su.BOUNDARY.get=function(){return 1},su.EXTERIOR.get=function(){return 2},su.NONE.get=function(){return-1},Object.defineProperties(au,su);var uu=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},lu=function(){},cu={LOG_10:{configurable:!0}};lu.prototype.interfaces_=function(){return[]},lu.prototype.getClass=function(){return lu},lu.log10=function(t){var e=Math.log(t);return Js.isInfinite(e)||Js.isNaN(e)?e:e/lu.LOG_10},lu.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},lu.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},lu.wrap=function(t,e){return t<0?e- -t%e:t%e},lu.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=i;return o>u&&(u=o),a>u&&(u=a),s>u&&(u=s),u}},lu.average=function(t,e){return(t+e)/2},cu.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(lu,cu);var hu=function(t){this.str=t};hu.prototype.append=function(t){this.str+=t},hu.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},hu.prototype.toString=function(t){return this.str};var fu=function(t){this.value=t};fu.prototype.intValue=function(){return this.value},fu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},fu.isNaN=function(t){return Number.isNaN(t)};var pu=function(){};pu.isWhitespace=function(t){return t<=32&&t>=0||127===t},pu.toUpperCase=function(t){return t.toUpperCase()};var du=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},gu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};du.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},du.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=du.magnitude(n._hi),i=du.TEN.pow(r);(n=n.divide(i)).gt(du.TEN)?(n=n.divide(du.TEN),r+=1):n.lt(du.ONE)&&(n=n.multiply(du.TEN),r-=1);for(var o=r+1,a=new hu,s=du.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,a.append(h),n=n.subtract(du.valueOf(l)).multiply(du.TEN),c&&n.selfAdd(du.TEN);var f=!0,p=du.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-u&&(f=!1),!f)break}return e[0]=r,a.toString()},du.prototype.sqr=function(){return this.multiply(this)},du.prototype.doubleValue=function(){return this._hi+this._lo},du.prototype.subtract=function(){if(arguments[0]instanceof du){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},du.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},du.prototype.isZero=function(){return 0===this._hi&&0===this._lo},du.prototype.selfSubtract=function(){if(arguments[0]instanceof du){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},du.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},du.prototype.min=function(t){return this.le(t)?this:t},du.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof du){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null,c=null,h=null;return u=this._hi/n,h=(i=(l=du.SPLIT*u)-(i=l-u))*(a=(h=du.SPLIT*n)-(a=h-n))-(c=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,h=u+(l=(this._hi-c-h+this._lo-u*r)/n),this._hi=h,this._lo=u-h+l,this}},du.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},du.prototype.divide=function(){if(arguments[0]instanceof du){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/t._hi)-(e=(a=du.SPLIT*o)-(e=a-o)),u=e*(r=(u=du.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new du(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var l=arguments[0];return Js.isNaN(l)?du.createNaN():du.copy(this).selfDivide(l,0)}},du.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},du.prototype.pow=function(t){if(0===t)return du.valueOf(1);var e=new du(this),n=du.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},du.prototype.ceil=function(){if(this.isNaN())return du.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new du(t,e)},du.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},du.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},du.prototype.setValue=function(){if(arguments[0]instanceof du){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},du.prototype.max=function(t){return this.ge(t)?this:t},du.prototype.sqrt=function(){if(this.isZero())return du.valueOf(0);if(this.isNegative())return du.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=du.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},du.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof du){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,h=null,f=null,p=null,d=null,g=null,m=null;p=this._hi+u,h=this._lo+l,d=p-(g=p-this._hi),f=h-(m=h-this._lo);var y=(c=p+(g=(d=u-g+(this._hi-d))+h))+(g=(f=l-m+(this._lo-f))+(g+(p-c))),v=g+(c-y);return this._hi=y,this._lo=v,this}},du.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof du){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null;i=(u=du.SPLIT*this._hi)-this._hi,l=du.SPLIT*n,i=u-i,o=this._hi-i,a=l-n;var c=(u=this._hi*n)+(l=i*(a=l-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),h=l+(i=u-c);return this._hi=c,this._lo=h,this}},du.prototype.selfSqr=function(){return this.selfMultiply(this)},du.prototype.floor=function(){if(this.isNaN())return du.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new du(t,e)},du.prototype.negate=function(){return this.isNaN()?this:new du(-this._hi,-this._lo)},du.prototype.clone=function(){},du.prototype.multiply=function(){if(arguments[0]instanceof du){var t=arguments[0];return t.isNaN()?du.createNaN():du.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Js.isNaN(e)?du.createNaN():du.copy(this).selfMultiply(e,0)}},du.prototype.isNaN=function(){return Js.isNaN(this._hi)},du.prototype.intValue=function(){return Math.trunc(this._hi)},du.prototype.toString=function(){var t=du.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},du.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+du.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+du.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},du.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,a=null,s=null;t=(n=1/this._hi)-(i=(a=du.SPLIT*n)-(i=a-n)),o=(s=du.SPLIT*this._hi)-this._hi;var u=n+(a=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new du(u,n-u+a)},du.prototype.toSciNotation=function(){if(this.isZero())return du.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=du.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},du.prototype.abs=function(){return this.isNaN()?du.NaN:this.isNegative()?this.negate():new du(this)},du.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},du.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},du.prototype.add=function(){if(arguments[0]instanceof du){var t=arguments[0];return du.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return du.copy(this).selfAdd(e)}},du.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof du){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},du.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},du.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},du.prototype.trunc=function(){return this.isNaN()?du.NaN:this.isPositive()?this.floor():this.ceil()},du.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},du.prototype.interfaces_=function(){return[yi,$s,tu]},du.prototype.getClass=function(){return du},du.sqr=function(t){return du.valueOf(t).selfMultiply(t)},du.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return du.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new du(e)}},du.sqrt=function(t){return du.valueOf(t).sqrt()},du.parse=function(t){for(var e=0,n=t.length;pu.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new du,a=0,s=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,pu.isDigit(l)){var c=l-"0";o.selfMultiply(du.TEN),o.selfAdd(c),a++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=fu.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-u;if(0===p)f=o;else if(p>0){var d=du.TEN.pow(p);f=o.divide(d)}else if(p<0){var g=du.TEN.pow(-p);f=o.multiply(g)}return r?f.negate():f},du.createNaN=function(){return new du(Js.NaN,Js.NaN)},du.copy=function(t){return new du(t)},du.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},du.stringOfChar=function(t,e){for(var n=new hu,r=0;r<e;r++)n.append(t);return n.toString()},gu.PI.get=function(){return new du(3.141592653589793,12246467991473532e-32)},gu.TWO_PI.get=function(){return new du(6.283185307179586,24492935982947064e-32)},gu.PI_2.get=function(){return new du(1.5707963267948966,6123233995736766e-32)},gu.E.get=function(){return new du(2.718281828459045,14456468917292502e-32)},gu.NaN.get=function(){return new du(Js.NaN,Js.NaN)},gu.EPS.get=function(){return 123259516440783e-46},gu.SPLIT.get=function(){return 134217729},gu.MAX_PRINT_DIGITS.get=function(){return 32},gu.TEN.get=function(){return du.valueOf(10)},gu.ONE.get=function(){return du.valueOf(1)},gu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},gu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(du,gu);var mu=function(){},yu={DP_SAFE_EPSILON:{configurable:!0}};mu.prototype.interfaces_=function(){return[]},mu.prototype.getClass=function(){return mu},mu.orientationIndex=function(t,e,n){var r=mu.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=du.valueOf(e.x).selfAdd(-t.x),o=du.valueOf(e.y).selfAdd(-t.y),a=du.valueOf(n.x).selfAdd(-e.x),s=du.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},mu.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},mu.intersection=function(t,e,n,r){var i=du.valueOf(r.y).selfSubtract(n.y).selfMultiply(du.valueOf(e.x).selfSubtract(t.x)),o=du.valueOf(r.x).selfSubtract(n.x).selfMultiply(du.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=du.valueOf(r.x).selfSubtract(n.x).selfMultiply(du.valueOf(t.y).selfSubtract(n.y)),u=du.valueOf(r.y).selfSubtract(n.y).selfMultiply(du.valueOf(t.x).selfSubtract(n.x)),l=s.subtract(u).selfDivide(a).doubleValue(),c=du.valueOf(t.x).selfAdd(du.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=du.valueOf(e.x).selfSubtract(t.x).selfMultiply(du.valueOf(t.y).selfSubtract(n.y)),f=du.valueOf(e.y).selfSubtract(t.y).selfMultiply(du.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(a).doubleValue(),d=du.valueOf(n.y).selfAdd(du.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new nu(c,d)},mu.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return mu.signum(a);r=i+o}else{if(!(i<0))return mu.signum(a);if(o>=0)return mu.signum(a);r=-i-o}var s=mu.DP_SAFE_EPSILON*r;return a>=s||-a>=s?mu.signum(a):2},mu.signum=function(t){return t>0?1:t<0?-1:0},yu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(mu,yu);var vu=function(){},Eu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Eu.X.get=function(){return 0},Eu.Y.get=function(){return 1},Eu.Z.get=function(){return 2},Eu.M.get=function(){return 3},vu.prototype.setOrdinate=function(t,e,n){},vu.prototype.size=function(){},vu.prototype.getOrdinate=function(t,e){},vu.prototype.getCoordinate=function(){},vu.prototype.getCoordinateCopy=function(t){},vu.prototype.getDimension=function(){},vu.prototype.getX=function(t){},vu.prototype.clone=function(){},vu.prototype.expandEnvelope=function(t){},vu.prototype.copy=function(){},vu.prototype.getY=function(t){},vu.prototype.toCoordinateArray=function(){},vu.prototype.interfaces_=function(){return[tu]},vu.prototype.getClass=function(){return vu},Object.defineProperties(vu,Eu);var _u=function(){},bu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_u),Su=function(){};Su.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},Su.getProperty=function(t){return{"line.separator":"\n"}[t]};var wu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof nu&&arguments[1]instanceof nu){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=h.y-f.y,m=f.x-h.x,y=h.x*f.y-f.x*h.y,v=p.y-d.y,E=d.x-p.x,_=p.x*d.y-d.x*p.y;this.x=m*_-E*y,this.y=v*y-g*_,this.w=g*E-v*m}};wu.prototype.getY=function(){var t=this.y/this.w;if(Js.isNaN(t)||Js.isInfinite(t))throw new bu;return t},wu.prototype.getX=function(){var t=this.x/this.w;if(Js.isNaN(t)||Js.isInfinite(t))throw new bu;return t},wu.prototype.getCoordinate=function(){var t=new nu;return t.x=this.getX(),t.y=this.getY(),t},wu.prototype.interfaces_=function(){return[]},wu.prototype.getClass=function(){return wu},wu.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-s*o,h=(o*l-u*a)/c,f=(s*a-i*l)/c;if(Js.isNaN(h)||Js.isInfinite(h)||Js.isNaN(f)||Js.isInfinite(f))throw new bu;return new nu(h,f)};var xu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof nu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},Tu={serialVersionUID:{configurable:!0}};xu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},xu.prototype.equals=function(t){if(!(t instanceof xu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},xu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new xu;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new xu(e,r,n,i)},xu.prototype.isNull=function(){return this._maxx<this._minx},xu.prototype.getMaxX=function(){return this._maxx},xu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof xu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},xu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof xu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof nu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},xu.prototype.getMinY=function(){return this._miny},xu.prototype.getMinX=function(){return this._minx},xu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof xu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},xu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},xu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},xu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},xu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},xu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},xu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},xu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},xu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},xu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},xu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof xu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof nu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},xu.prototype.centre=function(){return this.isNull()?null:new nu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},xu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof xu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},xu.prototype.getMaxY=function(){return this._maxy},xu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},xu.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+nu.hashCode(this._minx))+nu.hashCode(this._maxx))+nu.hashCode(this._miny))+nu.hashCode(this._maxy)},xu.prototype.interfaces_=function(){return[$s,yi]},xu.prototype.getClass=function(){return xu},xu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u)&&!(c<s)&&(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),!(l>u)&&!(c<s))}},Tu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(xu,Tu);var Lu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Cu=function(t){this.geometryFactory=t||new Zl};Cu.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Lu.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Lu.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Mu[n]&&(e=Mu[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Cu.prototype.write=function(t){return this.extractGeometry(t)},Cu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Au[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Au[e].apply(this,[t])+")"};var Au={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Au.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Au.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Au.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Au.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Au.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Au.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Au.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Au.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Mu={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Lu.spaces);return this.geometryFactory.createPoint(new nu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Lu.trimParens,"$1"),r.push(Mu.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Lu.spaces),r.push(new nu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Lu.spaces),r.push(new nu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Lu.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Lu.trimParens,"$1"),r.push(Mu.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(Lu.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(Lu.trimParens,"$1"),n=Mu.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Lu.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Lu.trimParens,"$1"),r.push(Mu.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Ru=function(t){this.parser=new Cu(t)};Ru.prototype.write=function(t){return this.parser.write(t)},Ru.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Ou=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Pu=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ou),Iu=function(){};Iu.prototype.interfaces_=function(){return[]},Iu.prototype.getClass=function(){return Iu},Iu.shouldNeverReachHere=function(){if(0===arguments.length)Iu.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Pu("Should never reach here"+(null!==t?": "+t:""))}},Iu.isTrue=function(){var t;if(1===arguments.length)Iu.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Pu:new Pu(t)},Iu.equals=function(){var t,e,n;if(2===arguments.length)Iu.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new Pu("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var Nu=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new nu,this._intPt[1]=new nu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Du={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Nu.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Nu.prototype.getTopologySummary=function(){var t=new hu;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Nu.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},Nu.prototype.getIntersectionNum=function(){return this._result},Nu.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Nu.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Nu.prototype.setPrecisionModel=function(t){this._precisionModel=t},Nu.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},Nu.prototype.getIntersection=function(t){return this._intPt[t]},Nu.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Nu.prototype.hasIntersection=function(){return this._result!==Nu.NO_INTERSECTION},Nu.prototype.getEdgeDistance=function(t,e){return Nu.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Nu.prototype.isCollinear=function(){return this._result===Nu.COLLINEAR_INTERSECTION},Nu.prototype.toString=function(){return Ru.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ru.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Nu.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Nu.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Nu.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Nu.prototype.interfaces_=function(){return[]},Nu.prototype.getClass=function(){return Nu},Nu.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return Iu.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Nu.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return Iu.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Du.DONT_INTERSECT.get=function(){return 0},Du.DO_INTERSECT.get=function(){return 1},Du.COLLINEAR.get=function(){return 2},Du.NO_INTERSECTION.get=function(){return 0},Du.POINT_INTERSECTION.get=function(){return 1},Du.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Nu,Du);var ku=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new xu(this._inputLines[0][0],this._inputLines[0][1]),n=new xu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,xu.intersects(n,r,e)&&0===ju.orientationIndex(n,r,e)&&0===ju.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=wu.intersection(t,n,r,i)}catch(a){if(!(a instanceof bu))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new nu(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=mu.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);Su.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&Su.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new nu(t),o=new nu(e),a=new nu(n),s=new nu(r),u=new nu;this.normalizeToEnvCentre(i,o,a,s,u);var l=this.safeHCoordinateIntersection(i,o,a,s);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=xu.intersects(e,n,r),a=xu.intersects(e,n,i),s=xu.intersects(r,i,e),u=xu.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((o>l?o:l)+(s<h?s:h))/2,d=((a>c?a:c)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!xu.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=ju.orientationIndex(e,n,r),a=ju.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=ju.orientationIndex(r,i,e),u=ju.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new nu(r):0===a?this._intPt[0]=new nu(i):0===s?this._intPt[0]=new nu(e):0===u&&(this._intPt[0]=new nu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=ju.distancePointLine(t,n,r),a=ju.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=ju.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=ju.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(Nu),Fu=function(){};Fu.prototype.interfaces_=function(){return[]},Fu.prototype.getClass=function(){return Fu},Fu.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return Fu.signOfDet2x2(r,i,o,a)},Fu.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var Vu=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Vu.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=Fu.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},Vu.prototype.isPointInPolygon=function(){return this.getLocation()!==au.EXTERIOR},Vu.prototype.getLocation=function(){return this._isPointOnSegment?au.BOUNDARY:this._crossingCount%2==1?au.INTERIOR:au.EXTERIOR},Vu.prototype.isOnSegment=function(){return this._isPointOnSegment},Vu.prototype.interfaces_=function(){return[]},Vu.prototype.getClass=function(){return Vu},Vu.locatePointInRing=function(){if(arguments[0]instanceof nu&&uu(arguments[1],vu)){for(var t=arguments[0],e=arguments[1],n=new Vu(t),r=new nu,i=new nu,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof nu&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],u=new Vu(a),l=1;l<s.length;l++){var c=s[l],h=s[l-1];if(u.countSegment(c,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var ju=function(){},Bu={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};ju.prototype.interfaces_=function(){return[]},ju.prototype.getClass=function(){return ju},ju.orientationIndex=function(t,e,n){return mu.orientationIndex(t,e,n)},ju.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(uu(arguments[0],vu)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new nu,l=new nu,c=new nu;a.getCoordinate(0,l),a.getCoordinate(1,c);var h=l.x;c.x-=h;for(var f=0,p=1;p<s-1;p++)u.y=l.y,l.x=c.x,l.y=c.y,a.getCoordinate(p+1,c),c.x-=h,f+=l.x*(u.y-c.y);return f/2}},ju.distanceLineLine=function(t,e,n,r){if(t.equals(e))return ju.distancePointLine(t,n,r);if(n.equals(r))return ju.distancePointLine(r,t,e);var i=!1;if(xu.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?lu.min(ju.distancePointLine(t,n,r),ju.distancePointLine(e,n,r),ju.distancePointLine(n,t,e),ju.distancePointLine(r,t,e)):0},ju.isPointInRing=function(t,e){return ju.locatePointInRing(t,e)!==au.EXTERIOR},ju.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new nu;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,l=s-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=s,o=u}return n},ju.isCCW=function(t){var e=t.length-1;if(e<3)throw new Zs("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],l=t[s];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=ju.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},ju.locatePointInRing=function(t,e){return Vu.locatePointInRing(t,e)},ju.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},ju.computeOrientation=function(t,e,n){return ju.orientationIndex(t,e,n)},ju.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new Zs("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=ju.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),l=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(l<=0)return o.distance(a);if(l>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(c)*Math.sqrt(u)}},ju.isOnLine=function(t,e){for(var n=new ku,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},Bu.CLOCKWISE.get=function(){return-1},Bu.RIGHT.get=function(){return ju.CLOCKWISE},Bu.COUNTERCLOCKWISE.get=function(){return 1},Bu.LEFT.get=function(){return ju.COUNTERCLOCKWISE},Bu.COLLINEAR.get=function(){return 0},Bu.STRAIGHT.get=function(){return ju.COLLINEAR},Object.defineProperties(ju,Bu);var Uu=function(){};Uu.prototype.filter=function(t){},Uu.prototype.interfaces_=function(){return[]},Uu.prototype.getClass=function(){return Uu};var Gu=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Ku={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Gu.prototype.isGeometryCollection=function(){return this.getSortIndex()===Gu.SORTINDEX_GEOMETRYCOLLECTION},Gu.prototype.getFactory=function(){return this._factory},Gu.prototype.getGeometryN=function(t){return this},Gu.prototype.getArea=function(){return 0},Gu.prototype.isRectangle=function(){return!1},Gu.prototype.equals=function(){if(arguments[0]instanceof Gu){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Gu))return!1;var n=e;return this.equalsExact(n)}},Gu.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Gu.prototype.geometryChanged=function(){this.apply(Gu.geometryChangedFilter)},Gu.prototype.geometryChangedAction=function(){this._envelope=null},Gu.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Gu.prototype.getLength=function(){return 0},Gu.prototype.getNumGeometries=function(){return 1},Gu.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},Gu.prototype.getUserData=function(){return this._userData},Gu.prototype.getSRID=function(){return this._SRID},Gu.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Gu.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Gu.SORTINDEX_GEOMETRYCOLLECTION)throw new Zs("This method does not support GeometryCollection arguments")},Gu.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Gu.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Gu.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Gu.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new xu(this._envelope)},Gu.prototype.setSRID=function(t){this._SRID=t},Gu.prototype.setUserData=function(t){this._userData=t},Gu.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},Gu.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Gu.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Gu.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Gu.SORTINDEX_MULTIPOINT||this.getSortIndex()===Gu.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Gu.SORTINDEX_MULTIPOLYGON},Gu.prototype.interfaces_=function(){return[tu,$s,yi]},Gu.prototype.getClass=function(){return Gu},Gu.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Gu.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Ku.serialVersionUID.get=function(){return 0x799ea46522854c00},Ku.SORTINDEX_POINT.get=function(){return 0},Ku.SORTINDEX_MULTIPOINT.get=function(){return 1},Ku.SORTINDEX_LINESTRING.get=function(){return 2},Ku.SORTINDEX_LINEARRING.get=function(){return 3},Ku.SORTINDEX_MULTILINESTRING.get=function(){return 4},Ku.SORTINDEX_POLYGON.get=function(){return 5},Ku.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Ku.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Ku.geometryChangedFilter.get=function(){return Wu},Object.defineProperties(Gu,Ku);var Wu=function(){};Wu.interfaces_=function(){return[Uu]},Wu.filter=function(t){t.geometryChangedAction()};var zu=function(){};zu.prototype.filter=function(t){},zu.prototype.interfaces_=function(){return[]},zu.prototype.getClass=function(){return zu};var Yu=function(){},Hu={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Yu.prototype.isInBoundary=function(t){},Yu.prototype.interfaces_=function(){return[]},Yu.prototype.getClass=function(){return Yu},Hu.Mod2BoundaryNodeRule.get=function(){return qu},Hu.EndPointBoundaryNodeRule.get=function(){return Xu},Hu.MultiValentEndPointBoundaryNodeRule.get=function(){return Zu},Hu.MonoValentEndPointBoundaryNodeRule.get=function(){return Ju},Hu.MOD2_BOUNDARY_RULE.get=function(){return new qu},Hu.ENDPOINT_BOUNDARY_RULE.get=function(){return new Xu},Hu.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Zu},Hu.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ju},Hu.OGC_SFS_BOUNDARY_RULE.get=function(){return Yu.MOD2_BOUNDARY_RULE},Object.defineProperties(Yu,Hu);var qu=function(){};qu.prototype.isInBoundary=function(t){return t%2==1},qu.prototype.interfaces_=function(){return[Yu]},qu.prototype.getClass=function(){return qu};var Xu=function(){};Xu.prototype.isInBoundary=function(t){return t>0},Xu.prototype.interfaces_=function(){return[Yu]},Xu.prototype.getClass=function(){return Xu};var Zu=function(){};Zu.prototype.isInBoundary=function(t){return t>1},Zu.prototype.interfaces_=function(){return[Yu]},Zu.prototype.getClass=function(){return Zu};var Ju=function(){};Ju.prototype.isInBoundary=function(t){return 1===t},Ju.prototype.interfaces_=function(){return[Yu]},Ju.prototype.getClass=function(){return Ju};var Qu=function(){};Qu.prototype.add=function(){},Qu.prototype.addAll=function(){},Qu.prototype.isEmpty=function(){},Qu.prototype.iterator=function(){},Qu.prototype.size=function(){},Qu.prototype.toArray=function(){},Qu.prototype.remove=function(){};var $u=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),tl=function(){};tl.prototype.hasNext=function(){},tl.prototype.next=function(){},tl.prototype.remove=function(){};var el=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Qu);(vi.prototype=new Error).name="NoSuchElementException";var nl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Qu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Qu]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new rl(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new $u;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(el),rl=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new vi;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(tl),il=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=!1,i=e.iterator();i.hasNext();)this.add(i.next(),n),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof nu&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<s.length;l++)this.add(s[l],u);else for(var c=s.length-1;c>=0;c--)this.add(s[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof nu){var h=arguments[0],f=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(h>0&&this.get(h-1).equals2D(f))return null;if(h<p&&this.get(h).equals2D(f))return null}}t.prototype.add.call(this,h,f)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],m=arguments[2],y=arguments[3],v=1;m>y&&(v=-1);for(var E=m;E!==y;E+=v)this.add(d[E],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new nu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(nl),ol=function(){},al={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};al.ForwardComparator.get=function(){return sl},al.BidirectionalComparator.get=function(){return ul},al.coordArrayType.get=function(){return new Array(0).fill(null)},ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},ol.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},ol.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(ol.indexOf(r,e)<0)return r}return null},ol.scroll=function(t,e){var n=ol.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Su.arraycopy(t,n,r,0,t.length-n),Su.arraycopy(t,0,r,t.length-n,n),Su.arraycopy(r,0,t,0,t.length)},ol.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},ol.intersection=function(t,e){for(var n=new il,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},ol.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},ol.removeRepeatedPoints=function(t){return ol.hasRepeatedPoints(t)?new il(t,!1).toCoordinateArray():t},ol.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},ol.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},ol.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new nu(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new nu(r[i+u])},ol.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},ol.envelope=function(t){for(var e=new xu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},ol.toCoordinateArray=function(t){return t.toArray(ol.coordArrayType)},ol.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},ol.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},ol.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},ol.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},ol.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},ol.extract=function(t,e,n){e=lu.clamp(e,0,t.length);var r=(n=lu.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(ol,al);var sl=function(){};sl.prototype.compare=function(t,e){return ol.compare(t,e)},sl.prototype.interfaces_=function(){return[eu]},sl.prototype.getClass=function(){return sl};var ul=function(){};ul.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=ol.compare(n,r);return ol.isEqualReversed(n,r)?0:i},ul.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=ol.increasingDirection(n),o=ol.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(r[s]);if(0!==l)return l;a+=i,s+=o}return 0},ul.prototype.interfaces_=function(){return[eu]},ul.prototype.getClass=function(){return ul};var ll=function(){};ll.prototype.get=function(){},ll.prototype.put=function(){},ll.prototype.size=function(){},ll.prototype.values=function(){},ll.prototype.entrySet=function(){};var cl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ll);(Ei.prototype=new Error).name="OperationNotSupported",(_i.prototype=new Qu).contains=function(){};var hl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Qu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new fl(this)},e}(_i),fl=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new vi;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Ei},e}(tl),pl=0;(Li.prototype=new cl).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Li.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:pl,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:pl,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},Li.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Si(t)===xi(Si(Si(t)))){var e=Ti(Si(Si(t)));1===bi(e)?(wi(Si(t),pl),wi(e,pl),wi(Si(Si(t)),1),t=Si(Si(t))):(t===Ti(Si(t))&&(t=Si(t),this.rotateLeft(t)),wi(Si(t),pl),wi(Si(Si(t)),1),this.rotateRight(Si(Si(t))))}else{var n=xi(Si(Si(t)));1===bi(n)?(wi(Si(t),pl),wi(n,pl),wi(Si(Si(t)),1),t=Si(Si(t))):(t===xi(Si(t))&&(t=Si(t),this.rotateRight(t)),wi(Si(t),pl),wi(Si(Si(t)),1),this.rotateLeft(Si(Si(t))))}this.root_.color=pl},Li.prototype.values=function(){var t=new nl,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Li.successor(e));)t.add(e.value);return t},Li.prototype.entrySet=function(){var t=new hl,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Li.successor(e));)t.add(e);return t},Li.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Li.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Li.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Li.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Li.prototype.size=function(){return this.size_};var dl=function(){};dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl},Ci.prototype=new _i,(Ai.prototype=new Ci).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Ai.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Ai.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Ai.prototype.remove=function(t){throw new Ei},Ai.prototype.size=function(){return this.array_.length},Ai.prototype.isEmpty=function(){return 0===this.array_.length},Ai.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Ai.prototype.iterator=function(){return new gl(this)};var gl=function(t){this.treeSet_=t,this.position_=0};gl.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new vi;return this.treeSet_.array_[this.position_++]},gl.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},gl.prototype.remove=function(){throw new Ei};var ml=function(){};ml.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},ml.asList=function(t){for(var e=new nl,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var yl=function(){},vl={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};vl.P.get=function(){return 0},vl.L.get=function(){return 1},vl.A.get=function(){return 2},vl.FALSE.get=function(){return-1},vl.TRUE.get=function(){return-2},vl.DONTCARE.get=function(){return-3},vl.SYM_FALSE.get=function(){return"F"},vl.SYM_TRUE.get=function(){return"T"},vl.SYM_DONTCARE.get=function(){return"*"},vl.SYM_P.get=function(){return"0"},vl.SYM_L.get=function(){return"1"},vl.SYM_A.get=function(){return"2"},yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl},yl.toDimensionSymbol=function(t){switch(t){case yl.FALSE:return yl.SYM_FALSE;case yl.TRUE:return yl.SYM_TRUE;case yl.DONTCARE:return yl.SYM_DONTCARE;case yl.P:return yl.SYM_P;case yl.L:return yl.SYM_L;case yl.A:return yl.SYM_A}throw new Zs("Unknown dimension value: "+t)},yl.toDimensionValue=function(t){switch(pu.toUpperCase(t)){case yl.SYM_FALSE:return yl.FALSE;case yl.SYM_TRUE:return yl.TRUE;case yl.SYM_DONTCARE:return yl.DONTCARE;case yl.SYM_P:return yl.P;case yl.SYM_L:return yl.L;case yl.SYM_A:return yl.A}throw new Zs("Unknown dimension symbol: "+t)},Object.defineProperties(yl,vl);var El=function(){};El.prototype.filter=function(t){},El.prototype.interfaces_=function(){return[]},El.prototype.getClass=function(){return El};var _l=function(){};_l.prototype.filter=function(t,e){},_l.prototype.isDone=function(){},_l.prototype.isGeometryChanged=function(){},_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l};var bl=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new Zs("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new xu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();ml.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=yl.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=yl.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new Ai(ml.asList(this._geometries)),n=new Ai(ml.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,a=this.getNumGeometries(),s=o.getNumGeometries(),u=0;u<a&&u<s;){var l=this.getGeometryN(u),c=o.getGeometryN(u),h=l.compareToSameClass(c,i);if(0!==h)return h;u++}return u<a?1:u<s?-1:0}},e.prototype.apply=function(){if(uu(arguments[0],zu))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(uu(arguments[0],_l)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(uu(arguments[0],El)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(uu(arguments[0],Uu)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Iu.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Gu),Sl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Gu.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?yl.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new wl(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[dl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(bl),wl=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Yu.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};wl.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},wl.prototype.getBoundary=function(){return this._geom instanceof Al?this.boundaryLineString(this._geom):this._geom instanceof Sl?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},wl.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},wl.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},wl.prototype.computeBoundaryCoordinates=function(t){var e=new nl;this._endpointMap=new Li;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return ol.toCoordinateArray(e)},wl.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new xl,this._endpointMap.put(t,e)),e.count++},wl.prototype.interfaces_=function(){return[]},wl.prototype.getClass=function(){return wl},wl.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new wl(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new wl(e,n).getBoundary()}};var xl=function(){this.count=null};xl.prototype.interfaces_=function(){return[]},xl.prototype.getClass=function(){return xl};var Tl=function(){},Ll={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Tl.prototype.interfaces_=function(){return[]},Tl.prototype.getClass=function(){return Tl},Tl.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Tl.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Tl.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Tl.NEWLINE}catch(t){if(!(t instanceof Mi))throw t;Iu.shouldNeverReachHere()}return o}},Tl.split=function(t,e){for(var n=e.length,r=new nl,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Tl.toString=function(){if(1===arguments.length){var t=arguments[0];return Tl.SIMPLE_ORDINATE_FORMAT.format(t)}},Tl.spaces=function(t){return Tl.chars(" ",t)},Ll.NEWLINE.get=function(){return Su.getProperty("line.separator")},Ll.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Tl,Ll);var Cl=function(){};Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl},Cl.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Cl.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,vu.X)===t.getOrdinate(e-1,vu.X)&&t.getOrdinate(0,vu.Y)===t.getOrdinate(e-1,vu.Y)},Cl.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!Js.isNaN(a)||!Js.isNaN(s)))return!1}return!0},Cl.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Cl.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Cl.copy(e,i-1,r,o,1);return r},Cl.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Cl.swap(t,r,e-r)},Cl.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Cl.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Cl.copyCoord(t,e+o,n,r+o)},Cl.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new hu;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Tl.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Cl.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Cl.createClosedRing(t,e,4):e.getOrdinate(0,vu.X)===e.getOrdinate(n-1,vu.X)&&e.getOrdinate(0,vu.Y)===e.getOrdinate(n-1,vu.Y)?e:Cl.createClosedRing(t,e,n+1)},Cl.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Cl.copy(e,0,r,0,i);for(var o=i;o<n;o++)Cl.copy(e,0,r,o,1);return r};var Al=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new xu:this._points.expandEnvelope(new xu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Cl.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?yl.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return ju.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Cl.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(uu(arguments[0],zu))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(uu(arguments[0],_l)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(uu(arguments[0],El)||uu(arguments[0],Uu))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new wl(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new Zs("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[dl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Gu),Ml=function(){};Ml.prototype.interfaces_=function(){return[]},Ml.prototype.getClass=function(){return Ml};var Rl=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new xu;var t=new xu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return yl.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(uu(arguments[0],zu)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(uu(arguments[0],_l)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(uu(arguments[0],El)||uu(arguments[0],Uu))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Iu.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Ml]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Gu),Ol=function(){};Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol};var Pl=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new Zs("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new Zs("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(ju.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(ju.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),l=t.getY(s);if(u!==o===(l!==a))return!1;o=u,a=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);ml.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);Su.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=ol.minCoordinate(e.getCoordinates());ol.scroll(r,i),Su.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],ju.isCCW(e.getCoordinates())===n&&ol.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,a=this._shell,s=o._shell,u=a.compareToSameClass(s,i);if(0!==u)return u;for(var l=this.getNumInteriorRing(),c=o.getNumInteriorRing(),h=0;h<l&&h<c;){var f=this.getInteriorRingN(h),p=o.getInteriorRingN(h),d=f.compareToSameClass(p,i);if(0!==d)return d;h++}return h<l?1:h<c?-1:0}},e.prototype.apply=function(t){if(uu(t,zu)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(uu(t,_l)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(uu(t,El))t.filter(this);else if(uu(t,Uu)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Ol]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Gu),Il=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Gu.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return yl.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ml]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(bl),Nl=function(t){function e(e,n){e instanceof nu&&n instanceof Zl&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Gu.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return yl.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Cl.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new Zs("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new Zs("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Al),Dl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Gu.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new nl,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ol]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(bl),kl=function(t){this._factory=t||null,this._isUserDataCopied=!1},Fl={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};kl.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},kl.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},kl.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof bl?this.editGeometryCollection(t,e):t instanceof Pl?this.editPolygon(t,e):t instanceof Rl||t instanceof Al?e.edit(t,this._factory):(Iu.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},kl.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new nl,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===Il?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Sl?this._factory.createMultiLineString(r.toArray([])):n.getClass()===Dl?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},kl.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new nl,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},kl.prototype.interfaces_=function(){return[]},kl.prototype.getClass=function(){return kl},kl.GeometryEditorOperation=function(){},Fl.NoOpGeometryOperation.get=function(){return Vl},Fl.CoordinateOperation.get=function(){return jl},Fl.CoordinateSequenceOperation.get=function(){return Bl},Object.defineProperties(kl,Fl);var Vl=function(){};Vl.prototype.edit=function(t,e){return t},Vl.prototype.interfaces_=function(){return[kl.GeometryEditorOperation]},Vl.prototype.getClass=function(){return Vl};var jl=function(){};jl.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof Nl?e.createLinearRing(n):t instanceof Al?e.createLineString(n):t instanceof Rl?n.length>0?e.createPoint(n[0]):e.createPoint():t},jl.prototype.interfaces_=function(){return[kl.GeometryEditorOperation]},jl.prototype.getClass=function(){return jl};var Bl=function(){};Bl.prototype.edit=function(t,e){return t instanceof Nl?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Al?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Rl?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Bl.prototype.interfaces_=function(){return[kl.GeometryEditorOperation]},Bl.prototype.getClass=function(){return Bl};var Ul=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new nu}else if(uu(arguments[0],vu)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new nu}},Gl={serialVersionUID:{configurable:!0}};Ul.prototype.setOrdinate=function(t,e,n){switch(e){case vu.X:this._coordinates[t].x=n;break;case vu.Y:this._coordinates[t].y=n;break;case vu.Z:this._coordinates[t].z=n;break;default:throw new Zs("invalid ordinateIndex")}},Ul.prototype.size=function(){return this._coordinates.length},Ul.prototype.getOrdinate=function(t,e){switch(e){case vu.X:return this._coordinates[t].x;case vu.Y:return this._coordinates[t].y;case vu.Z:return this._coordinates[t].z}return Js.NaN},Ul.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},Ul.prototype.getCoordinateCopy=function(t){return new nu(this._coordinates[t])},Ul.prototype.getDimension=function(){return this._dimension},Ul.prototype.getX=function(t){return this._coordinates[t].x},Ul.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Ul(t,this._dimension)},Ul.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Ul.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Ul(t,this._dimension)},Ul.prototype.toString=function(){if(this._coordinates.length>0){var t=new hu(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Ul.prototype.getY=function(t){return this._coordinates[t].y},Ul.prototype.toCoordinateArray=function(){return this._coordinates},Ul.prototype.interfaces_=function(){return[vu,yi]},Ul.prototype.getClass=function(){return Ul},Gl.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Ul,Gl);var Kl=function(){},Wl={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Kl.prototype.readResolve=function(){return Kl.instance()},Kl.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Ul(t)}if(uu(arguments[0],vu)){var e=arguments[0];return new Ul(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new Ul(n):new Ul(n,r)}},Kl.prototype.interfaces_=function(){return[ou,yi]},Kl.prototype.getClass=function(){return Kl},Kl.instance=function(){return Kl.instanceObject},Wl.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Wl.instanceObject.get=function(){return new Kl},Object.defineProperties(Kl,Wl);var zl=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new nl,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new hl;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(ll),Yl=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ql){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},Hl={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Yl.prototype.equals=function(t){if(!(t instanceof Yl))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},Yl.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new fu(n).compareTo(new fu(r))},Yl.prototype.getScale=function(){return this._scale},Yl.prototype.isFloating=function(){return this._modelType===Yl.FLOATING||this._modelType===Yl.FLOATING_SINGLE},Yl.prototype.getType=function(){return this._modelType},Yl.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Yl.FLOATING?t="Floating":this._modelType===Yl.FLOATING_SINGLE?t="Floating-Single":this._modelType===Yl.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Yl.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return Js.isNaN(t)||this._modelType===Yl.FLOATING_SINGLE?t:this._modelType===Yl.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof nu){var e=arguments[0];if(this._modelType===Yl.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Yl.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Yl.FLOATING?t=16:this._modelType===Yl.FLOATING_SINGLE?t=6:this._modelType===Yl.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Yl.prototype.setScale=function(t){this._scale=Math.abs(t)},Yl.prototype.interfaces_=function(){return[yi,$s]},Yl.prototype.getClass=function(){return Yl},Yl.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Hl.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Hl.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Yl,Hl);var ql=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Xl={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ql.prototype.readResolve=function(){return ql.nameToTypeMap.get(this._name)},ql.prototype.toString=function(){return this._name},ql.prototype.interfaces_=function(){return[yi]},ql.prototype.getClass=function(){return ql},Xl.serialVersionUID.get=function(){return-552860263173159e4},Xl.nameToTypeMap.get=function(){return new zl},Object.defineProperties(ql,Xl),Yl.Type=ql,Yl.FIXED=new ql("FIXED"),Yl.FLOATING=new ql("FLOATING"),Yl.FLOATING_SINGLE=new ql("FLOATING SINGLE");var Zl=function t(){this._precisionModel=new Yl,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?uu(arguments[0],ou)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Yl&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Jl={serialVersionUID:{configurable:!0}};Zl.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new nu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new nu(t.getMinX(),t.getMinY()),new nu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new nu(t.getMinX(),t.getMinY()),new nu(t.getMinX(),t.getMaxY()),new nu(t.getMaxX(),t.getMaxY()),new nu(t.getMaxX(),t.getMinY()),new nu(t.getMinX(),t.getMinY())]),null)},Zl.prototype.createLineString=function(t){return t?t instanceof Array?new Al(this.getCoordinateSequenceFactory().create(t),this):uu(t,vu)?new Al(t,this):void 0:new Al(this.getCoordinateSequenceFactory().create([]),this)},Zl.prototype.createMultiLineString=function(){if(0===arguments.length)return new Sl(null,this);if(1===arguments.length){var t=arguments[0];return new Sl(t,this)}},Zl.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Zl.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Pl)return this.createMultiPolygon(Zl.toPolygonArray(t));if(s instanceof Al)return this.createMultiLineString(Zl.toLineStringArray(t));if(s instanceof Rl)return this.createMultiPoint(Zl.toPointArray(t));Iu.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},Zl.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Zl.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(uu(arguments[0],vu)){var e=arguments[0];return new Rl(e,this)}}},Zl.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Zl.prototype.createPolygon=function(){if(0===arguments.length)return new Pl(null,null,this);if(1===arguments.length){if(uu(arguments[0],vu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Nl){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new Pl(r,i,this)}},Zl.prototype.getSRID=function(){return this._SRID},Zl.prototype.createGeometryCollection=function(){if(0===arguments.length)return new bl(null,this);if(1===arguments.length){var t=arguments[0];return new bl(t,this)}},Zl.prototype.createGeometry=function(t){return new kl(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},Zl.prototype.getPrecisionModel=function(){return this._precisionModel},Zl.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(uu(arguments[0],vu)){var e=arguments[0];return new Nl(e,this)}}},Zl.prototype.createMultiPolygon=function(){if(0===arguments.length)return new Dl(null,this);if(1===arguments.length){var t=arguments[0];return new Dl(t,this)}},Zl.prototype.createMultiPoint=function(){if(0===arguments.length)return new Il(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Il(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(uu(arguments[0],vu)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Cl.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},Zl.prototype.interfaces_=function(){return[yi]},Zl.prototype.getClass=function(){return Zl},Zl.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zl.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Zl.getDefaultCoordinateSequenceFactory=function(){return Kl.instance()},Zl.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zl.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zl.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zl.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zl.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zl.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zl.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Jl.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Zl,Jl);var Ql=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],$l=function(t){this.geometryFactory=t||new Zl};$l.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!tc[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Ql.indexOf(n)?tc[n].apply(this,[e.coordinates]):"GeometryCollection"===n?tc[n].apply(this,[e.geometries]):tc[n].apply(this,[e])},$l.prototype.write=function(t){var e=t.getGeometryType();if(!ec[e])throw new Error("Geometry is not supported");return ec[e].apply(this,[t])};var tc={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!tc[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=tc.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new nu(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new nu(t[0],t[1]),new nu(t[2],t[1]),new nu(t[2],t[3]),new nu(t[0],t[3]),new nu(t[0],t[1])])},Point:function(t){var e=new nu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(tc.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=tc.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(tc.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=tc.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=tc.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(tc.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},ec={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:ec.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=ec.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(ec.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=ec.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=ec.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=ec.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=ec.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(ec[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},nc=function(t){this.geometryFactory=t||new Zl,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new $l(this.geometryFactory)};nc.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Yl.FIXED&&this.reducePrecision(e),e},nc.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var rc=function(){this.parser=new $l(this.geometryFactory)};rc.prototype.write=function(t){return this.parser.write(t)};var ic=function(){},oc={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic},ic.opposite=function(t){return t===ic.LEFT?ic.RIGHT:t===ic.RIGHT?ic.LEFT:t},oc.ON.get=function(){return 0},oc.LEFT.get=function(){return 1},oc.RIGHT.get=function(){return 2},Object.defineProperties(ic,oc),(Ri.prototype=new Error).name="EmptyStackException",(Oi.prototype=new el).add=function(t){return this.array_.push(t),!0},Oi.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Oi.prototype.push=function(t){return this.array_.push(t),t},Oi.prototype.pop=function(t){if(0===this.array_.length)throw new Ri;return this.array_.pop()},Oi.prototype.peek=function(){if(0===this.array_.length)throw new Ri;return this.array_[this.array_.length-1]},Oi.prototype.empty=function(){return 0===this.array_.length},Oi.prototype.isEmpty=function(){return this.empty()},Oi.prototype.search=function(t){return this.array_.indexOf(t)},Oi.prototype.size=function(){return this.array_.length},Oi.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var ac=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};ac.prototype.getCoordinate=function(){return this._minCoord},ac.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},ac.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Iu.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=ju.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===ju.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===ju.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},ac.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=ic.LEFT;return n[e].y<n[e+1].y&&(r=ic.RIGHT),r},ac.prototype.getEdge=function(){return this._orientedDe},ac.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},ac.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},ac.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}Iu.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===ic.LEFT&&(this._orientedDe=this._minDe.getSym())},ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac};var sc=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new nu(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Ou),uc=function(){this.array_=[]};uc.prototype.addLast=function(t){this.array_.push(t)},uc.prototype.removeFirst=function(){return this.array_.shift()},uc.prototype.isEmpty=function(){return 0===this.array_.length};var lc=function(){this._finder=null,this._dirEdgeList=new nl,this._nodes=new nl,this._rightMostCoord=null,this._env=null,this._finder=new ac};lc.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},lc.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},lc.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new sc("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},lc.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(ic.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},lc.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},lc.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(ic.RIGHT)>=1&&e.getDepth(ic.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},lc.prototype.computeDepths=function(t){var e=new hl,n=new uc,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},lc.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},lc.prototype.getEnvelope=function(){if(null===this._env){for(var t=new xu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},lc.prototype.addReachable=function(t){var e=new Oi;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},lc.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(ic.LEFT,t.getDepth(ic.RIGHT)),e.setDepth(ic.RIGHT,t.getDepth(ic.LEFT))},lc.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},lc.prototype.getNodes=function(){return this._nodes},lc.prototype.getDirectedEdges=function(){return this._dirEdgeList},lc.prototype.interfaces_=function(){return[$s]},lc.prototype.getClass=function(){return lc};var cc=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[ic.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[ic.ON]=o,this.location[ic.LEFT]=a,this.location[ic.RIGHT]=s}};cc.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},cc.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==au.NONE)return!1;return!0},cc.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===au.NONE&&(this.location[e]=t)},cc.prototype.isLine=function(){return 1===this.location.length},cc.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[ic.ON]=this.location[ic.ON],e[ic.LEFT]=au.NONE,e[ic.RIGHT]=au.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===au.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},cc.prototype.getLocations=function(){return this.location},cc.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[ic.LEFT];this.location[ic.LEFT]=this.location[ic.RIGHT],this.location[ic.RIGHT]=t},cc.prototype.toString=function(){var t=new hu;return this.location.length>1&&t.append(au.toLocationSymbol(this.location[ic.LEFT])),t.append(au.toLocationSymbol(this.location[ic.ON])),this.location.length>1&&t.append(au.toLocationSymbol(this.location[ic.RIGHT])),t.toString()},cc.prototype.setLocations=function(t,e,n){this.location[ic.ON]=t,this.location[ic.LEFT]=e,this.location[ic.RIGHT]=n},cc.prototype.get=function(t){return t<this.location.length?this.location[t]:au.NONE},cc.prototype.isArea=function(){return this.location.length>1},cc.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===au.NONE)return!0;return!1},cc.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(ic.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},cc.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(au.NONE)},cc.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},cc.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},cc.prototype.interfaces_=function(){return[]},cc.prototype.getClass=function(){return cc};var hc=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new cc(e),this.elt[1]=new cc(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new cc(n.elt[0]),this.elt[1]=new cc(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new cc(au.NONE),this.elt[1]=new cc(au.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new cc(o,a,s),this.elt[1]=new cc(o,a,s)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new cc(au.NONE,au.NONE,au.NONE),this.elt[1]=new cc(au.NONE,au.NONE,au.NONE),this.elt[u].setLocations(l,c,h)}};hc.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},hc.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},hc.prototype.isNull=function(t){return this.elt[t].isNull()},hc.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},hc.prototype.isLine=function(t){return this.elt[t].isLine()},hc.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new cc(t.elt[e]):this.elt[e].merge(t.elt[e])},hc.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},hc.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(ic.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},hc.prototype.toString=function(){var t=new hu;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},hc.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},hc.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},hc.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(ic.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},hc.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},hc.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},hc.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new cc(this.elt[t].location[0]))},hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc},hc.toLineLabel=function(t){for(var e=new hc(au.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var fc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new nl,this._pts=new nl,this._label=new hc(au.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new nl,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};fc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=ju.isCCW(this._ring.getCoordinates())},fc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},fc.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new sc("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new sc("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();Iu.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},fc.prototype.getLinearRing=function(){return this._ring},fc.prototype.getCoordinate=function(t){return this._pts.get(t)},fc.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},fc.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},fc.prototype.isHole=function(){return this._isHole},fc.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},fc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!ju.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},fc.prototype.addHole=function(t){this._holes.add(t)},fc.prototype.isShell=function(){return null===this._shell},fc.prototype.getLabel=function(){return this._label},fc.prototype.getEdges=function(){return this._edges},fc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},fc.prototype.getShell=function(){return this._shell},fc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,ic.RIGHT);if(r===au.NONE)return null;if(this._label.getLocation(n)===au.NONE)return this._label.setLocation(n,r),null}},fc.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},fc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc};var pc=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fc),dc=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new nl,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new pc(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fc),gc=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};gc.prototype.setVisited=function(t){this._isVisited=t},gc.prototype.setInResult=function(t){this._isInResult=t},gc.prototype.isCovered=function(){return this._isCovered},gc.prototype.isCoveredSet=function(){return this._isCoveredSet},gc.prototype.setLabel=function(t){this._label=t},gc.prototype.getLabel=function(){return this._label},gc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},gc.prototype.updateIM=function(t){Iu.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},gc.prototype.isInResult=function(){return this._isInResult},gc.prototype.isVisited=function(){return this._isVisited},gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc};var mc=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new hc(0,au.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=au.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==au.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new hc(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof hc)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===au.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=au.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case au.BOUNDARY:n=au.INTERIOR;break;case au.INTERIOR:default:n=au.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gc),yc=function(){this.nodeMap=new Li,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};yc.prototype.find=function(t){return this.nodeMap.get(t)},yc.prototype.addNode=function(){if(arguments[0]instanceof nu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof mc){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},yc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},yc.prototype.iterator=function(){return this.nodeMap.values().iterator()},yc.prototype.values=function(){return this.nodeMap.values()},yc.prototype.getBoundaryNodes=function(t){for(var e=new nl,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===au.BOUNDARY&&e.add(r)}return e},yc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc};var vc=function(){},Ec={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};vc.prototype.interfaces_=function(){return[]},vc.prototype.getClass=function(){return vc},vc.isNorthern=function(t){return t===vc.NE||t===vc.NW},vc.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},vc.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},vc.isInHalfPlane=function(t,e){return e===vc.SE?t===vc.SE||t===vc.SW:t===e||t===e+1},vc.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Zs("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?vc.NE:vc.SE:e>=0?vc.NW:vc.SW}if(arguments[0]instanceof nu&&arguments[1]instanceof nu){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new Zs("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?vc.NE:vc.SE:r.y>=n.y?vc.NW:vc.SW}},Ec.NE.get=function(){return 0},Ec.NW.get=function(){return 1},Ec.SW.get=function(){return 2},Ec.SE.get=function(){return 3},Object.defineProperties(vc,Ec);var _c=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};_c.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ju.computeOrientation(t._p0,t._p1,this._p1)},_c.prototype.getDy=function(){return this._dy},_c.prototype.getCoordinate=function(){return this._p0},_c.prototype.setNode=function(t){this._node=t},_c.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},_c.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},_c.prototype.getDirectedCoordinate=function(){return this._p1},_c.prototype.getDx=function(){return this._dx},_c.prototype.getLabel=function(){return this._label},_c.prototype.getEdge=function(){return this._edge},_c.prototype.getQuadrant=function(){return this._quadrant},_c.prototype.getNode=function(){return this._node},_c.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},_c.prototype.computeLabel=function(t){},_c.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=vc.quadrant(this._dx,this._dy),Iu.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},_c.prototype.interfaces_=function(){return[$s]},_c.prototype.getClass=function(){return _c};var bc=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new hc(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new sc("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,ic.LEFT)===au.INTERIOR&&this._label.getLocation(e,ic.RIGHT)===au.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[ic.LEFT]+"/"+this._depth[ic.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,au.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,au.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===ic.LEFT&&(r=-1);var i=ic.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===au.EXTERIOR&&e===au.INTERIOR?1:t===au.INTERIOR&&e===au.EXTERIOR?-1:0},e}(_c),Sc=function(){};Sc.prototype.createNode=function(t){return new mc(t,null)},Sc.prototype.interfaces_=function(){return[]},Sc.prototype.getClass=function(){return Sc};var wc=function(){if(this._edges=new nl,this._nodes=null,this._edgeEndList=new nl,0===arguments.length)this._nodes=new yc(new Sc);else if(1===arguments.length){var t=arguments[0];this._nodes=new yc(t)}};wc.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},wc.prototype.find=function(t){return this._nodes.find(t)},wc.prototype.addNode=function(){if(arguments[0]instanceof mc){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof nu){var e=arguments[0];return this._nodes.addNode(e)}},wc.prototype.getNodeIterator=function(){return this._nodes.iterator()},wc.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},wc.prototype.debugPrintln=function(t){Su.out.println(t)},wc.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===au.BOUNDARY},wc.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},wc.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&ju.computeOrientation(t,e,r)===ju.COLLINEAR&&vc.quadrant(t,e)===vc.quadrant(n,r)},wc.prototype.getEdgeEnds=function(){return this._edgeEndList},wc.prototype.debugPrint=function(t){Su.out.print(t)},wc.prototype.getEdgeIterator=function(){return this._edges.iterator()},wc.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},wc.prototype.insertEdge=function(t){this._edges.add(t)},wc.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},wc.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new bc(n,!0),i=new bc(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},wc.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},wc.prototype.getNodes=function(){return this._nodes.values()},wc.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},wc.prototype.interfaces_=function(){return[]},wc.prototype.getClass=function(){return wc},wc.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var xc=function(){this._geometryFactory=null,this._shellList=new nl;var t=arguments[0];this._geometryFactory=t};xc.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},xc.prototype.computePolygons=function(t){for(var e=new nl,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},xc.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new sc("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},xc.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new nl,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},xc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},xc.prototype.buildMaximalEdgeRings=function(t){for(var e=new nl,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new dc(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},xc.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},xc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},xc.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&ju.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=u)}return o},xc.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return Iu.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},xc.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];wc.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new nl,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},xc.prototype.interfaces_=function(){return[]},xc.prototype.getClass=function(){return xc};var Tc=function(){};Tc.prototype.getBounds=function(){},Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc};var Lc=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Lc.prototype.getItem=function(){return this._item},Lc.prototype.getBounds=function(){return this._bounds},Lc.prototype.interfaces_=function(){return[Tc,yi]},Lc.prototype.getClass=function(){return Lc};var Cc=function(){this._size=null,this._items=null,this._size=0,this._items=new nl,this._items.add(null)};Cc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Cc.prototype.size=function(){return this._size},Cc.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Cc.prototype.clear=function(){this._size=0,this._items.clear()},Cc.prototype.isEmpty=function(){return 0===this._size},Cc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc};var Ac=function(){};Ac.prototype.visitItem=function(t){},Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac};var Mc=function(){};Mc.prototype.insert=function(t,e){},Mc.prototype.remove=function(t,e){},Mc.prototype.query=function(){},Mc.prototype.interfaces_=function(){return[]},Mc.prototype.getClass=function(){return Mc};var Rc=function(){if(this._childBoundables=new nl,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Oc={serialVersionUID:{configurable:!0}};Rc.prototype.getLevel=function(){return this._level},Rc.prototype.size=function(){return this._childBoundables.size()},Rc.prototype.getChildBoundables=function(){return this._childBoundables},Rc.prototype.addChildBoundable=function(t){Iu.isTrue(null===this._bounds),this._childBoundables.add(t)},Rc.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Rc.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Rc.prototype.interfaces_=function(){return[Tc,yi]},Rc.prototype.getClass=function(){return Rc},Oc.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Rc,Oc);var Pc=function(){};Pc.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Pc.min=function(t){return Pc.sort(t),t.get(0)},Pc.sort=function(t,e){var n=t.toArray();e?ml.sort(n,e):ml.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Pc.singletonList=function(t){var e=new nl;return e.add(t),e};var Ic=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};Ic.prototype.expandToQueue=function(t,e){var n=Ic.isComposite(this._boundable1),r=Ic.isComposite(this._boundable2);if(n&&r)return Ic.area(this._boundable1)>Ic.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new Zs("neither boundable is composite")},Ic.prototype.isLeaves=function(){return!(Ic.isComposite(this._boundable1)||Ic.isComposite(this._boundable2))},Ic.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},Ic.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new Ic(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},Ic.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Ic.prototype.getDistance=function(){return this._distance},Ic.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Ic.prototype.interfaces_=function(){return[$s]},Ic.prototype.getClass=function(){return Ic},Ic.area=function(t){return t.getBounds().getArea()},Ic.isComposite=function(t){return t instanceof Rc};var Nc=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new nl,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];Iu.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},Dc={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Nc.prototype.getNodeCapacity=function(){return this._nodeCapacity},Nc.prototype.lastNode=function(t){return t.get(t.size()-1)},Nc.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Rc?t+=this.size(n):n instanceof Lc&&(t+=1)}return t}},Nc.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Lc&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},Nc.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new nl:t}if(1===arguments.length){for(var e=arguments[0],n=new nl,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Rc){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Lc?n.add(i.getItem()):Iu.shouldNeverReachHere()}return n.size()<=0?null:n}},Nc.prototype.insert=function(t,e){Iu.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Lc(t,e))},Nc.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new nl;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(Iu.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Rc?this.boundablesAtLevel(n,a,i):(Iu.isTrue(a instanceof Lc),-1===n&&i.add(a))}return null}},Nc.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new nl;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(uu(arguments[2],Ac)&&arguments[0]instanceof Object&&arguments[1]instanceof Rc)for(var i=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),u=0;u<s.size();u++){var l=s.get(u);this.getIntersectsOp().intersects(l.getBounds(),i)&&(l instanceof Rc?this.query(i,l,a):l instanceof Lc?a.visitItem(l.getItem()):Iu.shouldNeverReachHere())}else if(uu(arguments[2],el)&&arguments[0]instanceof Object&&arguments[1]instanceof Rc)for(var c=arguments[0],h=arguments[1],f=arguments[2],p=h.getChildBoundables(),d=0;d<p.size();d++){var g=p.get(d);this.getIntersectsOp().intersects(g.getBounds(),c)&&(g instanceof Rc?this.query(c,g,f):g instanceof Lc?f.add(g.getItem()):Iu.shouldNeverReachHere())}},Nc.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Nc.prototype.getRoot=function(){return this.build(),this._root},Nc.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Rc&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},Nc.prototype.createHigherLevels=function(t,e){Iu.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},Nc.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Rc){var r=this.depth(n);r>t&&(t=r)}}return t+1}},Nc.prototype.createParentBoundables=function(t,e){Iu.isTrue(!t.isEmpty());var n=new nl;n.add(this.createNode(e));var r=new nl(t);Pc.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},Nc.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Nc.prototype.interfaces_=function(){return[yi]},Nc.prototype.getClass=function(){return Nc},Nc.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Dc.IntersectsOp.get=function(){return kc},Dc.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Dc.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Nc,Dc);var kc=function(){},Fc=function(){};Fc.prototype.distance=function(t,e){},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc};var Vc=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){Iu.isTrue(t.length>0);for(var n=new nl,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new jc(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new nl;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(uu(arguments[2],Ac)&&arguments[0]instanceof Object&&arguments[1]instanceof Rc){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(uu(arguments[2],el)&&arguments[0]instanceof Object&&arguments[1]instanceof Rc){var s=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,s,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){Iu.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new nl(t);Pc.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(uu(arguments[0],Fc)){var t=arguments[0],n=new Ic(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof Ic){var r=arguments[0];return this.nearestNeighbour(r,Js.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&uu(arguments[1],Fc)){var i=arguments[0],o=arguments[1],a=new Ic(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof Ic&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],l=null,c=new Cc;for(c.add(s);!c.isEmpty()&&u>0;){var h=c.poll(),f=h.getDistance();if(f>=u)break;h.isLeaves()?(u=f,l=h):h.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[0],d=arguments[1],g=arguments[2],m=new Lc(p,d),y=new Ic(this.getRoot(),m,g);return this.nearestNeighbour(y)[0]}},e.prototype.interfaces_=function(){return[Mc,yi]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return jc},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[eu]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[eu]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(Nc),jc=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new xu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rc),Bc=function(){};Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc},Bc.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Bc.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=Bc.relativeSign(e.x,n.x),i=Bc.relativeSign(e.y,n.y);switch(t){case 0:return Bc.compareValue(r,i);case 1:return Bc.compareValue(i,r);case 2:return Bc.compareValue(i,-r);case 3:return Bc.compareValue(-r,i);case 4:return Bc.compareValue(-r,-i);case 5:return Bc.compareValue(-i,-r);case 6:return Bc.compareValue(-i,r);case 7:return Bc.compareValue(r,-i)}return Iu.shouldNeverReachHere("invalid octant value"),0},Bc.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Uc=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new nu(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};Uc.prototype.getCoordinate=function(){return this.coord},Uc.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Uc.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Bc.compare(this._segmentOctant,this.coord,e.coord)},Uc.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Uc.prototype.isInterior=function(){return this._isInterior},Uc.prototype.interfaces_=function(){return[$s]},Uc.prototype.getClass=function(){return Uc};var Gc=function(){this._nodeMap=new Li,this._edge=null;var t=arguments[0];this._edge=t};Gc.prototype.getSplitCoordinates=function(){var t=new il;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},Gc.prototype.addCollapsedNodes=function(){var t=new nl;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},Gc.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Gc.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new fu(e+1))}},Gc.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new nu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new nu(e.coord))},Gc.prototype.iterator=function(){return this._nodeMap.values().iterator()},Gc.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Gc.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},Gc.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new fu(e[0])),r=i}},Gc.prototype.getEdge=function(){return this._edge},Gc.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Gc.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new nu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new nu(e.coord)),new Yc(o,this._edge.getData())},Gc.prototype.add=function(t,e){var n=new Uc(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(Iu.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},Gc.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Ou("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Ou("bad split edge end point at "+i)},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc};var Kc=function(){};Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc},Kc.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Zs("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof nu&&arguments[1]instanceof nu){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new Zs("Cannot compute the octant for two identical points "+i);return Kc.octant(a,s)}};var Wc=function(){};Wc.prototype.getCoordinates=function(){},Wc.prototype.size=function(){},Wc.prototype.getCoordinate=function(t){},Wc.prototype.isClosed=function(){},Wc.prototype.setData=function(t){},Wc.prototype.getData=function(){},Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc};var zc=function(){};zc.prototype.addIntersection=function(t,e){},zc.prototype.interfaces_=function(){return[Wc]},zc.prototype.getClass=function(){return zc};var Yc=function(){this._nodeList=new Gc(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Yc.prototype.getCoordinates=function(){return this._pts},Yc.prototype.size=function(){return this._pts.length},Yc.prototype.getCoordinate=function(t){return this._pts[t]},Yc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Yc.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Yc.prototype.setData=function(t){this._data=t},Yc.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Kc.octant(t,e)},Yc.prototype.getData=function(){return this._data},Yc.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new nu(n.getIntersection(i));this.addIntersection(o,r)}},Yc.prototype.toString=function(){return Ru.toLineString(new Ul(this._pts))},Yc.prototype.getNodeList=function(){return this._nodeList},Yc.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},Yc.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},Yc.prototype.interfaces_=function(){return[zc]},Yc.prototype.getClass=function(){return Yc},Yc.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new nl;return Yc.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)};var Hc=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new nu,this.p1=new nu;else if(1===arguments.length){var t=arguments[0];this.p0=new nu(t.p0),this.p1=new nu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new nu(e,n),this.p1=new nu(r,i)}},qc={serialVersionUID:{configurable:!0}};Hc.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Hc.prototype.orientationIndex=function(){if(arguments[0]instanceof Hc){var t=arguments[0],e=ju.orientationIndex(this.p0,this.p1,t.p0),n=ju.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof nu){var r=arguments[0];return ju.orientationIndex(this.p0,this.p1,r)}},Hc.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Hc.prototype.isVertical=function(){return this.p0.x===this.p1.x},Hc.prototype.equals=function(t){if(!(t instanceof Hc))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Hc.prototype.intersection=function(t){var e=new ku;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Hc.prototype.project=function(){if(arguments[0]instanceof nu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new nu(t);var e=this.projectionFactor(t),n=new nu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Hc){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new Hc(a,s)}},Hc.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Hc.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Hc.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Hc.prototype.distancePerpendicular=function(t){return ju.distancePointLinePerpendicular(t,this.p0,this.p1)},Hc.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Hc.prototype.midPoint=function(){return Hc.midPoint(this.p0,this.p1)},Hc.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?Js.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},Hc.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=Js.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},Hc.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Hc.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Hc.prototype.getLength=function(){return this.p0.distance(this.p1)},Hc.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Hc.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Hc.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Hc.prototype.lineIntersection=function(t){try{return wu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof bu))throw t}return null},Hc.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Hc.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new nu(n-u,r+s)},Hc.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Hc.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||Js.isNaN(e))&&(e=1),e},Hc.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Hc.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Hc.prototype.distance=function(){if(arguments[0]instanceof Hc){var t=arguments[0];return ju.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof nu){var e=arguments[0];return ju.distancePointLine(e,this.p0,this.p1)}},Hc.prototype.pointAlong=function(t){var e=new nu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Hc.prototype.hashCode=function(){var t=Js.doubleToLongBits(this.p0.x);t^=31*Js.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=Js.doubleToLongBits(this.p1.x);return n^=31*Js.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Hc.prototype.interfaces_=function(){return[$s,yi]},Hc.prototype.getClass=function(){return Hc},Hc.midPoint=function(t,e){return new nu((t.x+e.x)/2,(t.y+e.y)/2)},qc.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Hc,qc);var Xc=function(){this.tempEnv1=new xu,this.tempEnv2=new xu,this._overlapSeg1=new Hc,this._overlapSeg2=new Hc};Xc.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc};var Zc=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};Zc.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Zc.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},Zc.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},Zc.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Zc.prototype.setId=function(t){this._id=t},Zc.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Zc.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new xu(t,e)}return this._env},Zc.prototype.getEndIndex=function(){return this._end},Zc.prototype.getStartIndex=function(){return this._start},Zc.prototype.getContext=function(){return this._context},Zc.prototype.getId=function(){return this._id},Zc.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc};var Jc=function(){};Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc},Jc.getChainStartIndices=function(t){var e=0,n=new nl;n.add(new fu(e));do{var r=Jc.findChainEnd(t,e);n.add(new fu(r)),e=r}while(e<t.length-1);return Jc.toIntArray(n)},Jc.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=vc.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||vc.quadrant(t[i-1],t[i])===r);)i++;return i-1},Jc.getChains=function(){if(1===arguments.length){var t=arguments[0];return Jc.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new nl,i=Jc.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new Zc(e,i[o],i[o+1],n);r.add(a)}return r}},Jc.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Qc=function(){};Qc.prototype.computeNodes=function(t){},Qc.prototype.getNodedSubstrings=function(){},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc};var $c=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};$c.prototype.setSegmentIntersector=function(t){this._segInt=t},$c.prototype.interfaces_=function(){return[Qc]},$c.prototype.getClass=function(){return $c};var th=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new nl,this._index=new Vc,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Yc.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=Jc.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new eh(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return eh},Object.defineProperties(e,n),e}($c),eh=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),a=r.getContext();this._si.processIntersections(o,n,a,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xc),nh=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},rh={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};nh.prototype.getEndCapStyle=function(){return this._endCapStyle},nh.prototype.isSingleSided=function(){return this._isSingleSided},nh.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=nh.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=nh.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==nh.JOIN_ROUND&&(this._quadrantSegments=nh.DEFAULT_QUADRANT_SEGMENTS)},nh.prototype.getJoinStyle=function(){return this._joinStyle},nh.prototype.setJoinStyle=function(t){this._joinStyle=t},nh.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},nh.prototype.getSimplifyFactor=function(){return this._simplifyFactor},nh.prototype.getQuadrantSegments=function(){return this._quadrantSegments},nh.prototype.setEndCapStyle=function(t){this._endCapStyle=t},nh.prototype.getMitreLimit=function(){return this._mitreLimit},nh.prototype.setMitreLimit=function(t){this._mitreLimit=t},nh.prototype.setSingleSided=function(t){this._isSingleSided=t},nh.prototype.interfaces_=function(){return[]},nh.prototype.getClass=function(){return nh},nh.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},rh.CAP_ROUND.get=function(){return 1},rh.CAP_FLAT.get=function(){return 2},rh.CAP_SQUARE.get=function(){return 3},rh.JOIN_ROUND.get=function(){return 1},rh.JOIN_MITRE.get=function(){return 2},rh.JOIN_BEVEL.get=function(){return 3},rh.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},rh.DEFAULT_MITRE_LIMIT.get=function(){return 5},rh.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(nh,rh);var ih=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ju.COUNTERCLOCKWISE,this._inputLine=t||null},oh={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};ih.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},ih.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=ih.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},ih.prototype.isShallowConcavity=function(t,e,n,r){return ju.computeOrientation(t,e,n)===this._angleOrientation&&ju.distancePointLine(e,t,n)<r},ih.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/ih.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},ih.prototype.isConcave=function(t,e,n){return ju.computeOrientation(t,e,n)===this._angleOrientation},ih.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=ju.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},ih.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===ih.DELETE;)e++;return e},ih.prototype.isShallow=function(t,e,n,r){return ju.distancePointLine(e,t,n)<r},ih.prototype.collapseLine=function(){for(var t=new il,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==ih.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih},ih.simplify=function(t,e){return new ih(t).simplify(e)},oh.INIT.get=function(){return 0},oh.DELETE.get=function(){return 1},oh.KEEP.get=function(){return 1},oh.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(ih,oh);var ah=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new nl},sh={COORDINATE_ARRAY_TYPE:{configurable:!0}};ah.prototype.getCoordinates=function(){return this._ptList.toArray(ah.COORDINATE_ARRAY_TYPE)},ah.prototype.setPrecisionModel=function(t){this._precisionModel=t},ah.prototype.addPt=function(t){var e=new nu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},ah.prototype.revere=function(){},ah.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},ah.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},ah.prototype.toString=function(){return(new Zl).createLineString(this.getCoordinates()).toString()},ah.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new nu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},ah.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},ah.prototype.interfaces_=function(){return[]},ah.prototype.getClass=function(){return ah},sh.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(ah,sh);var uh=function(){},lh={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh},uh.toDegrees=function(t){return 180*t/Math.PI},uh.normalize=function(t){for(;t>Math.PI;)t-=uh.PI_TIMES_2;for(;t<=-Math.PI;)t+=uh.PI_TIMES_2;return t},uh.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},uh.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},uh.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},uh.interiorAngle=function(t,e,n){var r=uh.angle(e,t),i=uh.angle(e,n);return Math.abs(i-r)},uh.normalizePositive=function(t){if(t<0){for(;t<0;)t+=uh.PI_TIMES_2;t>=uh.PI_TIMES_2&&(t=0)}else{for(;t>=uh.PI_TIMES_2;)t-=uh.PI_TIMES_2;t<0&&(t=0)}return t},uh.angleBetween=function(t,e,n){var r=uh.angle(e,t),i=uh.angle(e,n);return uh.diff(r,i)},uh.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},uh.toRadians=function(t){return t*Math.PI/180},uh.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?uh.COUNTERCLOCKWISE:n<0?uh.CLOCKWISE:uh.NONE},uh.angleBetweenOriented=function(t,e,n){var r=uh.angle(e,t),i=uh.angle(e,n)-r;return i<=-Math.PI?i+uh.PI_TIMES_2:i>Math.PI?i-uh.PI_TIMES_2:i},lh.PI_TIMES_2.get=function(){return 2*Math.PI},lh.PI_OVER_2.get=function(){return Math.PI/2},lh.PI_OVER_4.get=function(){return Math.PI/4},lh.COUNTERCLOCKWISE.get=function(){return ju.COUNTERCLOCKWISE},lh.CLOCKWISE.get=function(){return ju.CLOCKWISE},lh.NONE.get=function(){return ju.COLLINEAR},Object.defineProperties(uh,lh);var ch=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Hc,this._seg1=new Hc,this._offset0=new Hc,this._offset1=new Hc,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new ku,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===nh.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},hh={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};ch.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ju.computeOrientation(this._s0,this._s1,this._s2),r=n===ju.CLOCKWISE&&this._side===ic.LEFT||n===ju.COUNTERCLOCKWISE&&this._side===ic.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},ch.prototype.addLineEndCap=function(t,e){var n=new Hc(t,e),r=new Hc;this.computeOffsetSegment(n,ic.LEFT,this._distance,r);var i=new Hc;this.computeOffsetSegment(n,ic.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case nh.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,ju.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case nh.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case nh.CAP_SQUARE:var u=new nu;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var l=new nu(r.p1.x+u.x,r.p1.y+u.y),c=new nu(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},ch.prototype.getCoordinates=function(){return this._segList.getCoordinates()},ch.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=wu.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof bu))throw t;o=new nu(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},ch.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===ju.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},ch.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*ch.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===nh.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===nh.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},ch.prototype.createSquare=function(t){this._segList.addPt(new nu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new nu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new nu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new nu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},ch.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},ch.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},ch.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},ch.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},ch.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=uh.angle(i,this._seg0.p0),a=uh.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=uh.normalize(o+a),u=uh.normalize(s+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(a)),h=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),p=new nu(h,f),d=new Hc(i,p),g=d.pointAlongOffset(1,c),m=d.pointAlongOffset(1,-c);this._side===ic.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},ch.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===ic.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,l=i*n*a/s;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},ch.prototype.addFilletArc=function(t,e,n,r,i){var o=r===ju.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=0,c=new nu;l<a;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},ch.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*ch.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new nu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new nu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},ch.prototype.createCircle=function(t){var e=new nu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},ch.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},ch.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new ah,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*ch.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},ch.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===nh.JOIN_BEVEL||this._bufParams.getJoinStyle()===nh.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,ju.CLOCKWISE,this._distance))},ch.prototype.closeRing=function(){this._segList.closeRing()},ch.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch},hh.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},hh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},hh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},hh.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(ch,hh);var fh=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};fh.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&ol.reverse(o),o},fh.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=ih.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],ic.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=ih.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],ic.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment(),n.closeRing()},fh.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===ic.RIGHT&&(r=-r);var i=ih.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},fh.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=ih.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],ic.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=ih.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],ic.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},fh.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case nh.CAP_ROUND:e.createCircle(t);break;case nh.CAP_SQUARE:e.createSquare(t)}},fh.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},fh.prototype.getBufferParameters=function(){return this._bufParams},fh.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},fh.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return fh.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},fh.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=ih.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],ic.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=ih.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],ic.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment()},fh.prototype.getSegGen=function(t){return new ch(this._precisionModel,this._bufParams,t)},fh.prototype.interfaces_=function(){return[]},fh.prototype.getClass=function(){return fh},fh.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new nu(t[n]);return e};var ph=function(){this._subgraphs=null,this._seg=new Hc,this._cga=new ju;var t=arguments[0];this._subgraphs=t},dh={DepthSegment:{configurable:!0}};ph.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new nl,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(uu(arguments[2],el)&&arguments[0]instanceof nu&&arguments[1]instanceof bc){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||ju.computeOrientation(this._seg.p0,this._seg.p1,o)===ju.RIGHT)){var c=a.getDepth(ic.LEFT);this._seg.p0.equals(u[l])||(c=a.getDepth(ic.RIGHT));var h=new gh(this._seg,c);s.add(h)}}else if(uu(arguments[2],el)&&arguments[0]instanceof nu&&uu(arguments[1],el))for(var f=arguments[0],p=arguments[1],d=arguments[2],g=p.iterator();g.hasNext();){var m=g.next();m.isForward()&&this.findStabbedSegments(f,m,d)}},ph.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Pc.min(e)._leftDepth},ph.prototype.interfaces_=function(){return[]},ph.prototype.getClass=function(){return ph},dh.DepthSegment.get=function(){return gh},Object.defineProperties(ph,dh);var gh=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Hc(t),this._leftDepth=e};gh.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},gh.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},gh.prototype.toString=function(){return this._upwardSeg.toString()},gh.prototype.interfaces_=function(){return[$s]},gh.prototype.getClass=function(){return gh};var mh=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};mh.prototype.area=function(){return mh.area(this.p0,this.p1,this.p2)},mh.prototype.signedArea=function(){return mh.signedArea(this.p0,this.p1,this.p2)},mh.prototype.interpolateZ=function(t){if(null===t)throw new Zs("Supplied point is null.");return mh.interpolateZ(t,this.p0,this.p1,this.p2)},mh.prototype.longestSideLength=function(){return mh.longestSideLength(this.p0,this.p1,this.p2)},mh.prototype.isAcute=function(){return mh.isAcute(this.p0,this.p1,this.p2)},mh.prototype.circumcentre=function(){return mh.circumcentre(this.p0,this.p1,this.p2)},mh.prototype.area3D=function(){return mh.area3D(this.p0,this.p1,this.p2)},mh.prototype.centroid=function(){return mh.centroid(this.p0,this.p1,this.p2)},mh.prototype.inCentre=function(){return mh.inCentre(this.p0,this.p1,this.p2)},mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh},mh.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},mh.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},mh.det=function(t,e,n,r){return t*r-e*n},mh.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,l=r.y-o,c=a*l-s*u,h=t.x-i,f=t.y-o,p=(l*h-s*f)/c,d=(-u*h+a*f)/c;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},mh.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},mh.isAcute=function(t,e,n){return!!uh.isAcute(t,e,n)&&!!uh.isAcute(e,n,t)&&!!uh.isAcute(n,t,e)},mh.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,l=2*mh.det(o,a,s,u),c=mh.det(a,o*o+a*a,u,s*s+u*u),h=mh.det(o,o*o+a*a,s,s*s+u*u);return new nu(r-c/l,i+h/l)},mh.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new wu(t.x+n/2,t.y+r/2,1),o=new wu(t.x-r+n/2,t.y+n+r/2,1);return new wu(i,o)},mh.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new nu(t.x+i*o,t.y+i*a)},mh.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,l=i*u-o*s,c=o*a-r*u,h=r*s-i*a,f=l*l+c*c+h*h;return Math.sqrt(f)/2},mh.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new nu(r,i)},mh.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new nu(s,u)};var yh=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new nl;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};yh.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,au.EXTERIOR,au.INTERIOR)},yh.prototype.addPolygon=function(t){var e=this._distance,n=ic.LEFT;this._distance<0&&(e=-this._distance,n=ic.RIGHT);var r=t.getExteriorRing(),i=ol.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,au.EXTERIOR,au.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=ol.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,ic.opposite(n),au.INTERIOR,au.EXTERIOR)}},yh.prototype.isTriangleErodedCompletely=function(t,e){var n=new mh(t[0],t[1],t[2]),r=n.inCentre();return ju.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},yh.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=ol.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,au.EXTERIOR,au.INTERIOR)},yh.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new Yc(t,new hc(0,au.BOUNDARY,e,n));this._curveList.add(r)},yh.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},yh.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<Nl.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=Nl.MINIMUM_VALID_SIZE&&ju.isCCW(t)&&(o=i,a=r,n=ic.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},yh.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Pl?this.addPolygon(t):t instanceof Al?this.addLineString(t):t instanceof Rl?this.addPoint(t):(t instanceof Il||t instanceof Sl||t instanceof Dl||t instanceof bl)&&this.addCollection(t)},yh.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},yh.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh};var vh=function(){};vh.prototype.locate=function(t){},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh};var Eh=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Eh.prototype.next=function(){if(this._atStart)return this._atStart=!1,Eh.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new vi;var t=this._parent.getGeometryN(this._index++);return t instanceof bl?(this._subcollectionIterator=new Eh(t),this._subcollectionIterator.next()):t},Eh.prototype.remove=function(){throw new Error(this.getClass().getName())},Eh.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Eh.prototype.interfaces_=function(){return[tl]},Eh.prototype.getClass=function(){return Eh},Eh.isAtomic=function(t){return!(t instanceof bl)};var _h=function(){this._geom=null;var t=arguments[0];this._geom=t};_h.prototype.locate=function(t){return _h.locate(t,this._geom)},_h.prototype.interfaces_=function(){return[vh]},_h.prototype.getClass=function(){return _h},_h.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&ju.isPointInRing(t,e.getCoordinates())},_h.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!_h.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(_h.isPointInRing(t,i))return!1}return!0},_h.containsPoint=function(t,e){if(e instanceof Pl)return _h.containsPointInPolygon(t,e);if(e instanceof bl)for(var n=new Eh(e);n.hasNext();){var r=n.next();if(r!==e&&_h.containsPoint(t,r))return!0}return!1},_h.locate=function(t,e){return e.isEmpty()?au.EXTERIOR:_h.containsPoint(t,e)?au.INTERIOR:au.EXTERIOR};var bh=function(){this._edgeMap=new Li,this._edgeList=null,this._ptInAreaLocation=[au.NONE,au.NONE]};bh.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},bh.prototype.propagateSideLabels=function(t){for(var e=au.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,ic.LEFT)!==au.NONE&&(e=r.getLocation(t,ic.LEFT))}if(e===au.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,ic.ON)===au.NONE&&s.setLocation(t,ic.ON,i),s.isArea(t)){var u=s.getLocation(t,ic.LEFT),l=s.getLocation(t,ic.RIGHT);if(l!==au.NONE){if(l!==i)throw new sc("side location conflict",a.getCoordinate());u===au.NONE&&Iu.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else Iu.isTrue(s.getLocation(t,ic.LEFT)===au.NONE,"found single null side"),s.setLocation(t,ic.RIGHT,i),s.setLocation(t,ic.LEFT,i)}}},bh.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},bh.prototype.print=function(t){Su.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},bh.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},bh.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,ic.LEFT);Iu.isTrue(r!==au.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();Iu.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,ic.LEFT),u=a.getLocation(t,ic.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},bh.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},bh.prototype.iterator=function(){return this.getEdges().iterator()},bh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new nl(this._edgeMap.values())),this._edgeList},bh.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===au.NONE&&(this._ptInAreaLocation[t]=_h.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},bh.prototype.toString=function(){var t=new hu;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},bh.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},bh.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===au.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=au.NONE;if(e[u])l=au.EXTERIOR;else{var c=a.getCoordinate();l=this.getLocation(u,c,t)}s.setAllLocationsIfNull(u,l)}},bh.prototype.getDegree=function(){return this._edgeMap.size()},bh.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},bh.prototype.interfaces_=function(){return[]},bh.prototype.getClass=function(){return bh};var Sh=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new sc("no outgoing dirEdge found",this.getCoordinate());Iu.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return vc.isNorthern(i)&&vc.isNorthern(o)?n:vc.isNorthern(i)||vc.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(Iu.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Su.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new nl;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(ic.LEFT),r=t.getDepth(ic.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new sc("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=o;u<a;u++){var l=this._edgeList.get(u);l.setEdgeDepths(ic.RIGHT,s),s=l.getDepth(ic.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(Iu.isTrue(null!==e,"found null for first outgoing dirEdge"),Iu.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=au.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=au.INTERIOR;break}if(r.isInResult()){t=au.EXTERIOR;break}}}if(t===au.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===au.INTERIOR):(a.isInResult()&&(i=au.EXTERIOR),s.isInResult()&&(i=au.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new hc(au.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==au.INTERIOR&&o!==au.BOUNDARY||this._label.setLocation(i,au.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(bh),wh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new mc(t,new Sh)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sc),xh=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};xh.prototype.compareTo=function(t){var e=t;return xh.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},xh.prototype.interfaces_=function(){return[$s]},xh.prototype.getClass=function(){return xh},xh.orientation=function(t){return 1===ol.increasingDirection(t)},xh.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=i)===a,f=(l+=o)===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var Th=function(){this._edges=new nl,this._ocaMap=new Li};Th.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Th.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Th.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Th.prototype.iterator=function(){return this._edges.iterator()},Th.prototype.getEdges=function(){return this._edges},Th.prototype.get=function(t){return this._edges.get(t)},Th.prototype.findEqualEdge=function(t){var e=new xh(t.getCoordinates());return this._ocaMap.get(e)},Th.prototype.add=function(t){this._edges.add(t);var e=new xh(t.getCoordinates());this._ocaMap.put(e,t)},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};var Lh=function(){};Lh.prototype.processIntersections=function(t,e,n,r){},Lh.prototype.isDone=function(){},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh};var Ch=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Ch.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Ch.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Ch.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Ch.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Ch.prototype.getLineIntersector=function(){return this._li},Ch.prototype.hasProperIntersection=function(){return this._hasProper},Ch.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Ch.prototype.hasIntersection=function(){return this._hasIntersection},Ch.prototype.isDone=function(){return!1},Ch.prototype.hasInteriorIntersection=function(){return this._hasInterior},Ch.prototype.interfaces_=function(){return[Lh]},Ch.prototype.getClass=function(){return Ch},Ch.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Ah=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new nu(t),this.segmentIndex=e,this.dist=n};Ah.prototype.getSegmentIndex=function(){return this.segmentIndex},Ah.prototype.getCoordinate=function(){return this.coord},Ah.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Ah.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Ah.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Ah.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Ah.prototype.getDistance=function(){return this.dist},Ah.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Ah.prototype.interfaces_=function(){return[$s]},Ah.prototype.getClass=function(){return Ah};var Mh=function(){this._nodeMap=new Li,this.edge=null;var t=arguments[0];this.edge=t};Mh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Mh.prototype.iterator=function(){return this._nodeMap.values().iterator()},Mh.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Mh.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Mh.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new nu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new Nh(o,new hc(this.edge._label))},Mh.prototype.add=function(t,e,n){var r=new Ah(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Mh.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh};var Rh=function(){};Rh.prototype.getChainStartIndices=function(t){var e=0,n=new nl;n.add(new fu(e));do{var r=this.findChainEnd(t,e);n.add(new fu(r)),e=r}while(e<t.length-1);return Rh.toIntArray(n)},Rh.prototype.findChainEnd=function(t,e){for(var n=vc.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&vc.quadrant(t[r-1],t[r])===n;)r++;return r-1},Rh.prototype.interfaces_=function(){return[]},Rh.prototype.getClass=function(){return Rh},Rh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Oh=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new xu,this.env2=new xu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Rh;this.startIndex=e.getChainStartIndices(this.pts)};Oh.prototype.getCoordinates=function(){return this.pts},Oh.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Oh.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Oh.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],h=this.pts[o],f=a.pts[s],p=a.pts[u];if(o-i==1&&u-s==1)return l.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,l),g<u&&this.computeIntersectsForChain(i,d,a,g,u,l)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,l),g<u&&this.computeIntersectsForChain(d,o,a,g,u,l))}},Oh.prototype.getStartIndexes=function(){return this.startIndex},Oh.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh};var Ph=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},Ih={NULL_VALUE:{configurable:!0}};Ph.prototype.getDepth=function(t,e){return this._depth[t][e]},Ph.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Ph.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Ph.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===Ph.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===Ph.NULL_VALUE}},Ph.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},Ph.prototype.getDelta=function(t){return this._depth[t][ic.RIGHT]-this._depth[t][ic.LEFT]},Ph.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?au.EXTERIOR:au.INTERIOR},Ph.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Ph.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==au.EXTERIOR&&r!==au.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=Ph.depthAtLocation(r):this._depth[e][n]+=Ph.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===au.INTERIOR&&this._depth[i][o]++}},Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph},Ph.depthAtLocation=function(t){return t===au.EXTERIOR?0:t===au.INTERIOR?1:Ph.NULL_VALUE},Ih.NULL_VALUE.get=function(){return-1},Object.defineProperties(Ph,Ih);var Nh=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Mh(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Ph,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,hc.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Oh(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new xu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new nu(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new hu;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,ic.ON),e.getLocation(1,ic.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,ic.LEFT),e.getLocation(1,ic.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,ic.RIGHT),e.getLocation(1,ic.RIGHT),2))},e}(gc),Dh=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Th,this._bufParams=t||null};Dh.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},Dh.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new hc(t.getLabel())).flip(),n.merge(r);var i=Dh.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(Dh.depthDelta(t.getLabel()))},Dh.prototype.buildSubgraphs=function(t,e){for(var n=new nl,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new ph(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},Dh.prototype.createSubgraphs=function(t){for(var e=new nl,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new lc;i.create(r),e.add(i)}}return Pc.sort(e,Pc.reverseOrder()),e},Dh.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Dh.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new th,n=new ku;return n.setPrecisionModel(t),e.setSegmentIntersector(new Ch(n)),e},Dh.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new fh(n,this._bufParams),i=new yh(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new wc(new wh),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new xc(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},Dh.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new Nh(i.getCoordinates(),new hc(a));this.insertUniqueEdge(s)}}},Dh.prototype.setNoder=function(t){this._workingNoder=t},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Dh.depthDelta=function(t){var e=t.getLocation(0,ic.LEFT),n=t.getLocation(0,ic.RIGHT);return e===au.INTERIOR&&n===au.EXTERIOR?1:e===au.EXTERIOR&&n===au.INTERIOR?-1:0},Dh.convertSegStrings=function(t){for(var e=new Zl,n=new nl;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var kh=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};kh.prototype.rescale=function(){if(uu(arguments[0],Qu))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&Su.out.println(n)}},kh.prototype.scale=function(){if(uu(arguments[0],Qu)){for(var t=arguments[0],e=new nl,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Yc(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new nu(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return ol.removeRepeatedPoints(o)}},kh.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},kh.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},kh.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},kh.prototype.interfaces_=function(){return[Qc]},kh.prototype.getClass=function(){return kh};var Fh=function(){this._li=new ku,this._segStrings=null;var t=arguments[0];this._segStrings=t},Vh={fact:{configurable:!0}};Fh.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Ou("found endpt/interior pt intersection at index "+o+" :pt "+n)},Fh.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var l=0;l<s.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3];if(c===f&&h===p)return null;var d=c.getCoordinates()[h],g=c.getCoordinates()[h+1],m=f.getCoordinates()[p],y=f.getCoordinates()[p+1];if(this._li.computeIntersection(d,g,m,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,m,y)))throw new Ou("found non-noded intersection at "+d+"-"+g+" and "+m+"-"+y)}},Fh.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Fh.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},Fh.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},Fh.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Ou("found non-noded collapse at "+Fh.fact.createLineString([t,e,n]))},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh},Vh.fact.get=function(){return new Zl},Object.defineProperties(Fh,Vh);var jh=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new Zs("Scale factor must be non-zero");1!==e&&(this._pt=new nu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new nu,this._p1Scaled=new nu),this.initCorners(this._pt)},Bh={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};jh.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return Iu.isTrue(!(a&&s),"Found bad envelope test"),s},jh.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new nu(this._maxx,this._maxy),this._corner[1]=new nu(this._minx,this._maxy),this._corner[2]=new nu(this._minx,this._miny),this._corner[3]=new nu(this._maxx,this._miny)},jh.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},jh.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},jh.prototype.getCoordinate=function(){return this._originalPt},jh.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},jh.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=jh.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new xu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},jh.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},jh.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},jh.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},Bh.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(jh,Bh);var Uh=function(){this.tempEnv1=new xu,this.selectedSegment=new Hc};Uh.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh};var Gh=function(){this._index=null;var t=arguments[0];this._index=t},Kh={HotPixelSnapAction:{configurable:!0}};Gh.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new Wh(e,n,r);return this._index.query(i,{interfaces_:function(){return[Ac]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh},Kh.HotPixelSnapAction.get=function(){return Wh},Object.defineProperties(Gh,Kh);var Wh=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Uh),zh=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new nl};zh.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},zh.prototype.isDone=function(){return!1},zh.prototype.getInteriorIntersections=function(){return this._interiorIntersections},zh.prototype.interfaces_=function(){return[Lh]},zh.prototype.getClass=function(){return zh};var Yh=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new ku,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Yh.prototype.checkCorrectness=function(t){var e=Yc.getNodedSubstrings(t),n=new Fh(e);try{n.checkValid()}catch(t){if(!(t instanceof _u))throw t;t.printStackTrace()}},Yh.prototype.getNodedSubstrings=function(){return Yc.getNodedSubstrings(this._nodedSegStrings)},Yh.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Yh.prototype.findInteriorIntersections=function(t,e){var n=new zh(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Yh.prototype.computeVertexSnaps=function(){if(uu(arguments[0],Qu))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Yc)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new jh(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},Yh.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new th,this._pointSnapper=new Gh(this._noder.getIndex()),this.snapRound(t,this._li)},Yh.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new jh(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},Yh.prototype.interfaces_=function(){return[Qc]},Yh.prototype.getClass=function(){return Yh};var Hh=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new nh,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},qh={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Hh.prototype.bufferFixedPrecision=function(t){var e=new kh(new Yh(new Yl(1)),t.getScale()),n=new Dh(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Hh.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Hh.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof sc))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=Hh.precisionScaleFactor(this._argGeom,this._distance,n),i=new Yl(r);this.bufferFixedPrecision(i)}},Hh.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Yl.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Hh.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Hh.prototype.bufferOriginalPrecision=function(){try{var t=new Dh(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Ou))throw t;this._saveException=t}},Hh.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Hh.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh},Hh.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Hh(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Gu&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Hh(n);return o.setQuadrantSegments(i),o.getResultGeometry(r)}if(arguments[2]instanceof nh&&arguments[0]instanceof Gu&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],u=arguments[2];return new Hh(a,u).getResultGeometry(s)}}else if(4===arguments.length){var l=arguments[0],c=arguments[1],h=arguments[2],f=arguments[3],p=new Hh(l);return p.setQuadrantSegments(h),p.setEndCapStyle(f),p.getResultGeometry(c)}},Hh.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=lu.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},qh.CAP_ROUND.get=function(){return nh.CAP_ROUND},qh.CAP_BUTT.get=function(){return nh.CAP_FLAT},qh.CAP_FLAT.get=function(){return nh.CAP_FLAT},qh.CAP_SQUARE.get=function(){return nh.CAP_SQUARE},qh.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Hh,qh);var Xh=function(){this._pt=[new nu,new nu],this._distance=Js.NaN,this._isNull=!0};Xh.prototype.getCoordinates=function(){return this._pt},Xh.prototype.getCoordinate=function(t){return this._pt[t]},Xh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Xh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Xh.prototype.getDistance=function(){return this._distance},Xh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var Zh=function(){};Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh},Zh.computeDistance=function(){if(arguments[2]instanceof Xh&&arguments[0]instanceof Al&&arguments[1]instanceof nu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new Hc,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Xh&&arguments[0]instanceof Pl&&arguments[1]instanceof nu){var s=arguments[0],u=arguments[1],l=arguments[2];Zh.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)Zh.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Xh&&arguments[0]instanceof Gu&&arguments[1]instanceof nu){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Al)Zh.computeDistance(h,f,p);else if(h instanceof Pl)Zh.computeDistance(h,f,p);else if(h instanceof bl)for(var d=h,g=0;g<d.getNumGeometries();g++){var m=d.getGeometryN(g);Zh.computeDistance(m,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Xh&&arguments[0]instanceof Hc&&arguments[1]instanceof nu){var y=arguments[0],v=arguments[1],E=arguments[2],_=y.closestPoint(v);E.setMinimum(_,v)}};var Jh=function(t){this._maxPtDist=new Xh,this._inputGeom=t||null},Qh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Jh.prototype.computeMaxMidpointDistance=function(t){var e=new tf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Jh.prototype.computeMaxVertexDistance=function(t){var e=new $h(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Jh.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Jh.prototype.getDistancePoints=function(){return this._maxPtDist},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh},Qh.MaxPointDistanceFilter.get=function(){return $h},Qh.MaxMidpointDistanceFilter.get=function(){return tf},Object.defineProperties(Jh,Qh);var $h=function(t){this._maxPtDist=new Xh,this._minPtDist=new Xh,this._geom=t||null};$h.prototype.filter=function(t){this._minPtDist.initialize(),Zh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},$h.prototype.getMaxPointDistance=function(){return this._maxPtDist},$h.prototype.interfaces_=function(){return[zu]},$h.prototype.getClass=function(){return $h};var tf=function(t){this._maxPtDist=new Xh,this._minPtDist=new Xh,this._geom=t||null};tf.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new nu((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),Zh.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},tf.prototype.isDone=function(){return!1},tf.prototype.isGeometryChanged=function(){return!1},tf.prototype.getMaxPointDistance=function(){return this._maxPtDist},tf.prototype.interfaces_=function(){return[_l]},tf.prototype.getClass=function(){return tf};var ef=function(t){this._comps=t||null};ef.prototype.filter=function(t){t instanceof Pl&&this._comps.add(t)},ef.prototype.interfaces_=function(){return[El]},ef.prototype.getClass=function(){return ef},ef.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return ef.getPolygons(t,new nl)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Pl?n.add(e):e instanceof bl&&e.apply(new ef(n)),n}};var nf=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};nf.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof Nl){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Al&&this._lines.add(t)},nf.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},nf.prototype.interfaces_=function(){return[Uu]},nf.prototype.getClass=function(){return nf},nf.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(nf.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(nf.getLines(e,n))}},nf.getLines=function(){if(1===arguments.length){var t=arguments[0];return nf.getLines(t,!1)}if(2===arguments.length){if(uu(arguments[0],Qu)&&uu(arguments[1],Qu)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();nf.getLines(i,n)}return n}if(arguments[0]instanceof Gu&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new nl;return o.apply(new nf(s,a)),s}if(arguments[0]instanceof Gu&&uu(arguments[1],Qu)){var u=arguments[0],l=arguments[1];return u instanceof Al?l.add(u):u.apply(new nf(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&uu(arguments[0],Qu)&&uu(arguments[1],Qu)){for(var c=arguments[0],h=arguments[1],f=arguments[2],p=c.iterator();p.hasNext();){var d=p.next();nf.getLines(d,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Gu&&uu(arguments[1],Qu)){var g=arguments[0],m=arguments[1],y=arguments[2];return g.apply(new nf(m,y)),m}}};var rf=function(){if(this._boundaryRule=Yu.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new Zs("Rule must be non-null");this._boundaryRule=t}};rf.prototype.locateInternal=function(){if(arguments[0]instanceof nu&&arguments[1]instanceof Pl){var t=arguments[0],e=arguments[1];if(e.isEmpty())return au.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===au.EXTERIOR)return au.EXTERIOR;if(r===au.BOUNDARY)return au.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===au.INTERIOR)return au.EXTERIOR;if(a===au.BOUNDARY)return au.BOUNDARY}return au.INTERIOR}if(arguments[0]instanceof nu&&arguments[1]instanceof Al){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return au.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!s.equals(l[0])&&!s.equals(l[l.length-1])?ju.isOnLine(s,l)?au.INTERIOR:au.EXTERIOR:au.BOUNDARY}if(arguments[0]instanceof nu&&arguments[1]instanceof Rl){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?au.INTERIOR:au.EXTERIOR}},rf.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?ju.locatePointInRing(t,e.getCoordinates()):au.EXTERIOR},rf.prototype.intersects=function(t,e){return this.locate(t,e)!==au.EXTERIOR},rf.prototype.updateLocationInfo=function(t){t===au.INTERIOR&&(this._isIn=!0),t===au.BOUNDARY&&this._numBoundaries++},rf.prototype.computeLocation=function(t,e){if(e instanceof Rl&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Al)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Pl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Sl)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof Dl)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof bl)for(var u=new Eh(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},rf.prototype.locate=function(t,e){return e.isEmpty()?au.EXTERIOR:e instanceof Al||e instanceof Pl?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?au.BOUNDARY:this._numBoundaries>0||this._isIn?au.INTERIOR:au.EXTERIOR)},rf.prototype.interfaces_=function(){return[]},rf.prototype.getClass=function(){return rf};var of=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},af={INSIDE_AREA:{configurable:!0}};of.prototype.isInsideArea=function(){return this._segIndex===of.INSIDE_AREA},of.prototype.getCoordinate=function(){return this._pt},of.prototype.getGeometryComponent=function(){return this._component},of.prototype.getSegmentIndex=function(){return this._segIndex},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of},af.INSIDE_AREA.get=function(){return-1},Object.defineProperties(of,af);var sf=function(t){this._pts=t||null};sf.prototype.filter=function(t){t instanceof Rl&&this._pts.add(t)},sf.prototype.interfaces_=function(){return[El]},sf.prototype.getClass=function(){return sf},sf.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Rl?Pc.singletonList(t):sf.getPoints(t,new nl)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Rl?n.add(e):e instanceof bl&&e.apply(new sf(n)),n}};var uf=function(){this._locations=null;var t=arguments[0];this._locations=t};uf.prototype.filter=function(t){(t instanceof Rl||t instanceof Al||t instanceof Pl)&&this._locations.add(new of(t,0,t.getCoordinate()))},uf.prototype.interfaces_=function(){return[El]},uf.prototype.getClass=function(){return uf},uf.getLocations=function(t){var e=new nl;return t.apply(new uf(e)),e};var lf=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new rf,this._minDistanceLocation=null,this._minDistance=Js.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};lf.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=ef.getPolygons(this._geom[e]);if(i.size()>0){var o=uf.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&uu(arguments[0],el)&&uu(arguments[1],el)){for(var a=arguments[0],s=arguments[1],u=arguments[2],l=0;l<a.size();l++)for(var c=a.get(l),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof of&&arguments[1]instanceof Pl){var f=arguments[0],p=arguments[1],d=arguments[2],g=f.getCoordinate();if(au.EXTERIOR!==this._ptLocator.locate(g,p))return this._minDistance=0,d[0]=f,d[1]=new of(p,g),null}},lf.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},lf.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=nf.getLines(this._geom[0]),n=nf.getLines(this._geom[1]),r=sf.getPoints(this._geom[0]),i=sf.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},lf.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},lf.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},lf.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},lf.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Al&&arguments[1]instanceof Rl){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=ju.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new Hc(r[o],r[o+1]).closestPoint(i);n[0]=new of(t,o,s),n[1]=new of(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Al&&arguments[1]instanceof Al){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),f=l.getCoordinates(),p=0;p<h.length-1;p++)for(var d=0;d<f.length-1;d++){var g=ju.distanceLineLine(h[p],h[p+1],f[d],f[d+1]);if(g<this._minDistance){this._minDistance=g;var m=new Hc(h[p],h[p+1]),y=new Hc(f[d],f[d+1]),v=m.closestPoints(y);c[0]=new of(u,p,v[0]),c[1]=new of(l,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},lf.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new of(i,0,i.getCoordinate()),n[1]=new of(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},lf.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Zs("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},lf.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},lf.prototype.interfaces_=function(){return[]},lf.prototype.getClass=function(){return lf},lf.distance=function(t,e){return new lf(t,e).distance()},lf.isWithinDistance=function(t,e,n){return new lf(t,e,n).distance()<=n},lf.nearestPoints=function(t,e){return new lf(t,e).nearestPoints()};var cf=function(){this._pt=[new nu,new nu],this._distance=Js.NaN,this._isNull=!0};cf.prototype.getCoordinates=function(){return this._pt},cf.prototype.getCoordinate=function(t){return this._pt[t]},cf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},cf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},cf.prototype.toString=function(){return Ru.toLineString(this._pt[0],this._pt[1])},cf.prototype.getDistance=function(){return this._distance},cf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf};var hf=function(){};hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf},hf.computeDistance=function(){if(arguments[2]instanceof cf&&arguments[0]instanceof Al&&arguments[1]instanceof nu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new Hc,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof cf&&arguments[0]instanceof Pl&&arguments[1]instanceof nu){var s=arguments[0],u=arguments[1],l=arguments[2];hf.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)hf.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof cf&&arguments[0]instanceof Gu&&arguments[1]instanceof nu){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Al)hf.computeDistance(h,f,p);else if(h instanceof Pl)hf.computeDistance(h,f,p);else if(h instanceof bl)for(var d=h,g=0;g<d.getNumGeometries();g++){var m=d.getGeometryN(g);hf.computeDistance(m,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof cf&&arguments[0]instanceof Hc&&arguments[1]instanceof nu){var y=arguments[0],v=arguments[1],E=arguments[2],_=y.closestPoint(v);E.setMinimum(_,v)}};var ff=function(){this._g0=null,this._g1=null,this._ptDist=new cf,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},pf={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};ff.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},ff.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new Zs("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},ff.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},ff.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},ff.prototype.computeOrientedDistance=function(t,e,n){var r=new df(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new gf(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},ff.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff},ff.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new ff(t,e).distance()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new ff(n,r);return o.setDensifyFraction(i),o.distance()}},pf.MaxPointDistanceFilter.get=function(){return df},pf.MaxDensifiedByFractionDistanceFilter.get=function(){return gf},Object.defineProperties(ff,pf);var df=function(){this._maxPtDist=new cf,this._minPtDist=new cf,this._euclideanDist=new hf,this._geom=null;var t=arguments[0];this._geom=t};df.prototype.filter=function(t){this._minPtDist.initialize(),hf.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},df.prototype.getMaxPointDistance=function(){return this._maxPtDist},df.prototype.interfaces_=function(){return[zu]},df.prototype.getClass=function(){return df};var gf=function(){this._maxPtDist=new cf,this._minPtDist=new cf,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};gf.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,l=new nu(s,u);this._minPtDist.initialize(),hf.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},gf.prototype.isDone=function(){return!1},gf.prototype.isGeometryChanged=function(){return!1},gf.prototype.getMaxPointDistance=function(){return this._maxPtDist},gf.prototype.interfaces_=function(){return[_l]},gf.prototype.getClass=function(){return gf};var mf=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},yf={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};mf.prototype.checkMaximumDistance=function(t,e,n){var r=new ff(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Ru.toLineString(i[0],i[1])+")"}},mf.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=mf.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),mf.VERBOSE&&Su.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},mf.prototype.checkNegativeValid=function(){if(!(this._input instanceof Pl||this._input instanceof Dl||this._input instanceof bl))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},mf.prototype.getErrorIndicator=function(){return this._errorIndicator},mf.prototype.checkMinimumDistance=function(t,e,n){var r=new lf(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Ru.toLineString(i[0],i[1])+" )"}},mf.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},mf.prototype.getErrorLocation=function(){return this._errorLocation},mf.prototype.getPolygonLines=function(t){for(var e=new nl,n=new nf(e),r=ef.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},mf.prototype.getErrorMessage=function(){return this._errMsg},mf.prototype.interfaces_=function(){return[]},mf.prototype.getClass=function(){return mf},yf.VERBOSE.get=function(){return!1},yf.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(mf,yf);var vf=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Ef={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};vf.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},vf.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*vf.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new xu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new xu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},vf.prototype.checkDistance=function(){var t=new mf(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},vf.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},vf.prototype.checkPolygonal=function(){this._result instanceof Pl||this._result instanceof Dl||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},vf.prototype.getErrorIndicator=function(){return this._errorIndicator},vf.prototype.getErrorLocation=function(){return this._errorLocation},vf.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},vf.prototype.report=function(t){if(!vf.VERBOSE)return null;Su.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},vf.prototype.getErrorMessage=function(){return this._errorMsg},vf.prototype.interfaces_=function(){return[]},vf.prototype.getClass=function(){return vf},vf.isValidMsg=function(t,e,n){var r=new vf(t,e,n);return r.isValid()?null:r.getErrorMessage()},vf.isValid=function(t,e,n){return!!new vf(t,e,n).isValid()},Ef.VERBOSE.get=function(){return!1},Ef.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(vf,Ef);var _f=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};_f.prototype.getCoordinates=function(){return this._pts},_f.prototype.size=function(){return this._pts.length},_f.prototype.getCoordinate=function(t){return this._pts[t]},_f.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},_f.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Kc.octant(this.getCoordinate(t),this.getCoordinate(t+1))},_f.prototype.setData=function(t){this._data=t},_f.prototype.getData=function(){return this._data},_f.prototype.toString=function(){return Ru.toLineString(new Ul(this._pts))},_f.prototype.interfaces_=function(){return[Wc]},_f.prototype.getClass=function(){return _f};var bf=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new nl,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};bf.prototype.getInteriorIntersection=function(){return this._interiorIntersection},bf.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},bf.prototype.getIntersectionSegments=function(){return this._intSegments},bf.prototype.count=function(){return this._intersectionCount},bf.prototype.getIntersections=function(){return this._intersections},bf.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},bf.prototype.setKeepIntersections=function(t){this._keepIntersections=t},bf.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},bf.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},bf.prototype.hasIntersection=function(){return null!==this._interiorIntersection},bf.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},bf.prototype.interfaces_=function(){return[Lh]},bf.prototype.getClass=function(){return bf},bf.createAllIntersectionsFinder=function(t){var e=new bf(t);return e.setFindAllIntersections(!0),e},bf.createAnyIntersectionFinder=function(t){return new bf(t)},bf.createIntersectionCounter=function(t){var e=new bf(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Sf=function(){this._li=new ku,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Sf.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Sf.prototype.getIntersections=function(){return this._segInt.getIntersections()},Sf.prototype.isValid=function(){return this.execute(),this._isValid},Sf.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Sf.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new bf(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new th;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Sf.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new sc(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Sf.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Ru.toLineString(t[0],t[1])+" and "+Ru.toLineString(t[2],t[3])},Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf},Sf.computeIntersections=function(t){var e=new Sf(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var wf=function t(){this._nv=null;var e=arguments[0];this._nv=new Sf(t.toSegmentStrings(e))};wf.prototype.checkValid=function(){this._nv.checkValid()},wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf},wf.toSegmentStrings=function(t){for(var e=new nl,n=t.iterator();n.hasNext();){var r=n.next();e.add(new _f(r.getCoordinates(),r))}return e},wf.checkValid=function(t){new wf(t).checkValid()};var xf=function(t){this._mapOp=t};xf.prototype.map=function(t){for(var e=new nl,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(Zl.toGeometryArray(e))},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf},xf.map=function(t,e){return new xf(e).map(t)};var Tf=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new nl,this._resultLineList=new nl;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Tf.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Tf.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Tf.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Tf.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!op.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Tf.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Tf.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Tf.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Tf.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(Iu.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(op.isResultOfOp(r,e)&&e===op.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf};var Lf=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new nl;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Lf.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Lf.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===op.INTERSECTION)){var r=n.getLabel();op.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Lf.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Lf.prototype.interfaces_=function(){return[]},Lf.prototype.getClass=function(){return Lf};var Cf=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Cf.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Cf.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof Nl&&!r.isEmpty()||(n=!1);for(var i=new nl,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof Nl||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new nl;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Cf.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Cf.prototype.getInputGeometry=function(){return this._inputGeom},Cf.prototype.transformMultiLineString=function(t,e){for(var n=new nl,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Cf.prototype.transformCoordinates=function(t,e){return this.copy(t)},Cf.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Cf.prototype.transformMultiPoint=function(t,e){for(var n=new nl,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Cf.prototype.transformMultiPolygon=function(t,e){for(var n=new nl,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Cf.prototype.copy=function(t){return t.copy()},Cf.prototype.transformGeometryCollection=function(t,e){for(var n=new nl,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Zl.toGeometryArray(n)):this._factory.buildGeometry(n)},Cf.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Rl)return this.transformPoint(t,null);if(t instanceof Il)return this.transformMultiPoint(t,null);if(t instanceof Nl)return this.transformLinearRing(t,null);if(t instanceof Al)return this.transformLineString(t,null);if(t instanceof Sl)return this.transformMultiLineString(t,null);if(t instanceof Pl)return this.transformPolygon(t,null);if(t instanceof Dl)return this.transformMultiPolygon(t,null);if(t instanceof bl)return this.transformGeometryCollection(t,null);throw new Zs("Unknown Geometry subtype: "+t.getClass().getName())},Cf.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Cf.prototype.interfaces_=function(){return[]},Cf.prototype.getClass=function(){return Cf};var Af=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Hc,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Al&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};Af.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new nu(o)),0===r&&this._isClosed&&t.set(t.size()-1,new nu(o)))}},Af.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Af.prototype.snapTo=function(t){var e=new il(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Af.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new nu(i),!1)}},Af.prototype.findSegmentIndexToSnap=function(t,e){for(var n=Js.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Af.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af},Af.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Mf=function(t){this._srcGeom=t||null},Rf={SNAP_PRECISION_FACTOR:{configurable:!0}};Mf.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Of(e,n).transform(this._srcGeom)},Mf.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Of(t,n,!0).transform(this._srcGeom),i=r;return e&&uu(i,Ol)&&(i=r.buffer(0)),i},Mf.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Mf.prototype.extractTargetCoordinates=function(t){for(var e=new Ai,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Mf.prototype.computeMinimumSegmentLength=function(t){for(var e=Js.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Mf.prototype.interfaces_=function(){return[]},Mf.prototype.getClass=function(){return Mf},Mf.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Mf(t);r[0]=i.snapTo(e,n);var o=new Mf(e);return r[1]=o.snapTo(r[0],n),r},Mf.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Mf.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Yl.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Mf.computeOverlaySnapTolerance(i),Mf.computeOverlaySnapTolerance(o))}},Mf.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Mf.SNAP_PRECISION_FACTOR},Mf.snapToSelf=function(t,e,n){return new Mf(t).snapToSelf(e,n)},Rf.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Mf,Rf);var Of=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Af(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Cf),Pf=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Pf.prototype.getCommon=function(){return Js.longBitsToDouble(this._commonBits)},Pf.prototype.add=function(t){var e=Js.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Pf.signExpBits(this._commonBits),this._isFirst=!1,null):Pf.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Pf.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Pf.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Pf.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=Js.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+Js.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Pf.prototype.interfaces_=function(){return[]},Pf.prototype.getClass=function(){return Pf},Pf.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Pf.signExpBits=function(t){return t>>52},Pf.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Pf.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Pf.getBit(t,r)!==Pf.getBit(e,r))return n;n++}return 52};var If=function(){this._commonCoord=null,this._ccFilter=new Df},Nf={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};If.prototype.addCommonBits=function(t){var e=new kf(this._commonCoord);t.apply(e),t.geometryChanged()},If.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new nu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new kf(e);return t.apply(n),t.geometryChanged(),t},If.prototype.getCommonCoordinate=function(){return this._commonCoord},If.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},If.prototype.interfaces_=function(){return[]},If.prototype.getClass=function(){return If},Nf.CommonCoordinateFilter.get=function(){return Df},Nf.Translater.get=function(){return kf},Object.defineProperties(If,Nf);var Df=function(){this._commonBitsX=new Pf,this._commonBitsY=new Pf};Df.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Df.prototype.getCommonCoordinate=function(){return new nu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Df.prototype.interfaces_=function(){return[zu]},Df.prototype.getClass=function(){return Df};var kf=function(){this.trans=null;var t=arguments[0];this.trans=t};kf.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},kf.prototype.isDone=function(){return!1},kf.prototype.isGeometryChanged=function(){return!0},kf.prototype.interfaces_=function(){return[_l]},kf.prototype.getClass=function(){return kf};var Ff=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Ff.prototype.selfSnap=function(t){return new Mf(t).snapTo(t,this._snapTolerance)},Ff.prototype.removeCommonBits=function(t){this._cbr=new If,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Ff.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Ff.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=op.overlayOp(e[0],e[1],t);return this.prepareResult(n)},Ff.prototype.checkValid=function(t){t.isValid()||Su.out.println("Snapped geometry is invalid")},Ff.prototype.computeSnapTolerance=function(){this._snapTolerance=Mf.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Ff.prototype.snap=function(t){var e=this.removeCommonBits(t);return Mf.snap(e[0],e[1],this._snapTolerance)},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff},Ff.overlayOp=function(t,e,n){return new Ff(t,e).getResultGeometry(n)},Ff.union=function(t,e){return Ff.overlayOp(t,e,op.UNION)},Ff.intersection=function(t,e){return Ff.overlayOp(t,e,op.INTERSECTION)},Ff.symDifference=function(t,e){return Ff.overlayOp(t,e,op.SYMDIFFERENCE)},Ff.difference=function(t,e){return Ff.overlayOp(t,e,op.DIFFERENCE)};var Vf=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Vf.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=op.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Ou))throw t;r=t}if(!n)try{e=Ff.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Ou?r:t}return e},Vf.prototype.interfaces_=function(){return[]},Vf.prototype.getClass=function(){return Vf},Vf.overlayOp=function(t,e,n){return new Vf(t,e).getResultGeometry(n)},Vf.union=function(t,e){return Vf.overlayOp(t,e,op.UNION)},Vf.intersection=function(t,e){return Vf.overlayOp(t,e,op.INTERSECTION)},Vf.symDifference=function(t,e){return Vf.overlayOp(t,e,op.SYMDIFFERENCE)},Vf.difference=function(t,e){return Vf.overlayOp(t,e,op.DIFFERENCE)};var jf=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};jf.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf};var Bf=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},Uf={INSERT:{configurable:!0},DELETE:{configurable:!0}};Bf.prototype.isDelete=function(){return this._eventType===Bf.DELETE},Bf.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Bf.prototype.getObject=function(){return this._obj},Bf.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},Bf.prototype.getInsertEvent=function(){return this._insertEvent},Bf.prototype.isInsert=function(){return this._eventType===Bf.INSERT},Bf.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Bf.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Bf.prototype.interfaces_=function(){return[$s]},Bf.prototype.getClass=function(){return Bf},Uf.INSERT.get=function(){return 1},Uf.DELETE.get=function(){return 2},Object.defineProperties(Bf,Uf);var Gf=function(){};Gf.prototype.interfaces_=function(){return[]},Gf.prototype.getClass=function(){return Gf};var Kf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};Kf.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Kf.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Kf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Kf.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Kf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Kf.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},Kf.prototype.hasProperIntersection=function(){return this._hasProper},Kf.prototype.hasIntersection=function(){return this._hasIntersection},Kf.prototype.isDone=function(){return this._isDone},Kf.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},Kf.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Kf.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf},Kf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Wf=function(t){function e(){t.call(this),this.events=new nl,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Pc.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Kf&&uu(arguments[0],el)&&uu(arguments[1],el)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&uu(arguments[0],el)&&arguments[1]instanceof Kf){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new jf(n,i),a=new Bf(e,n.getMinX(i),o);this.events.add(a),this.events.add(new Bf(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Gf),zf=function(){this._min=Js.POSITIVE_INFINITY,this._max=Js.NEGATIVE_INFINITY},Yf={NodeComparator:{configurable:!0}};zf.prototype.getMin=function(){return this._min},zf.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},zf.prototype.getMax=function(){return this._max},zf.prototype.toString=function(){return Ru.toLineString(new nu(this._min,0),new nu(this._max,0))},zf.prototype.interfaces_=function(){return[]},zf.prototype.getClass=function(){return zf},Yf.NodeComparator.get=function(){return Hf},Object.defineProperties(zf,Yf);var Hf=function(){};Hf.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},Hf.prototype.interfaces_=function(){return[eu]},Hf.prototype.getClass=function(){return Hf};var qf=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zf),Xf=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zf),Zf=function(){this._leaves=new nl,this._root=null,this._level=0};Zf.prototype.buildTree=function(){Pc.sort(this._leaves,new zf.NodeComparator);for(var t=this._leaves,e=null,n=new nl;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Zf.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new qf(t,e,n))},Zf.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Zf.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Zf.prototype.printNode=function(t){Su.out.println(Ru.toLineString(new nu(t._min,this._level),new nu(t._max,this._level)))},Zf.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Zf.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new Xf(t.get(n),t.get(n+1));e.add(i)}}},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf};var Jf=function(){this._items=new nl};Jf.prototype.visitItem=function(t){this._items.add(t)},Jf.prototype.getItems=function(){return this._items},Jf.prototype.interfaces_=function(){return[Ac]},Jf.prototype.getClass=function(){return Jf};var Qf=function(){this._index=null;var t=arguments[0];if(!uu(t,Ol))throw new Zs("Argument must be Polygonal");this._index=new ep(t)},$f={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Qf.prototype.locate=function(t){var e=new Vu(t),n=new tp(e);return this._index.query(t.y,t.y,n),e.getLocation()},Qf.prototype.interfaces_=function(){return[vh]},Qf.prototype.getClass=function(){return Qf},$f.SegmentVisitor.get=function(){return tp},$f.IntervalIndexedGeometry.get=function(){return ep},Object.defineProperties(Qf,$f);var tp=function(){this._counter=null;var t=arguments[0];this._counter=t};tp.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},tp.prototype.interfaces_=function(){return[Ac]},tp.prototype.getClass=function(){return tp};var ep=function(){this._index=new Zf;var t=arguments[0];this.init(t)};ep.prototype.init=function(t){for(var e=nf.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},ep.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Hc(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},ep.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Jf;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep};var np=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new zl,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new rf,2===arguments.length){var e=arguments[0],n=arguments[1],r=Yu.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,ic.ON)===au.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Kf(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof Nl||this._parentGeom instanceof Pl||this._parentGeom instanceof Dl,u=r||!s;return a.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new Kf(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Rl){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,au.INTERIOR)}else if(arguments[0]instanceof nu){var e=arguments[0];this.insertPoint(this._argIndex,e,au.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),au.EXTERIOR,au.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,au.INTERIOR,au.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],au.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],au.BOUNDARY)},e.prototype.addLineString=function(t){var e=ol.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new Nh(e,new hc(this._argIndex,au.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),Iu.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===au.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=ol.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;ju.isCCW(r)&&(i=n,o=e);var a=new Nh(r,new hc(this._argIndex,au.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],au.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new hc(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new Wf},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof Dl&&(this._useBoundaryDeterminationRule=!1),e instanceof Pl)this.addPolygon(e);else if(e instanceof Al)this.addLineString(e);else if(e instanceof Rl)this.addPoint(e);else if(e instanceof Il)this.addCollection(e);else if(e instanceof Sl)this.addCollection(e);else if(e instanceof Dl)this.addCollection(e);else{if(!(e instanceof bl))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return uu(this._parentGeom,Ol)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Qf(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?au.BOUNDARY:au.INTERIOR},e}(wc),rp=function(){if(this._li=new ku,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new np(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=Yu.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new np(0,e,r),this._arg[1]=new np(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new np(0,i,a),this._arg[1]=new np(1,o,a)}};rp.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},rp.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp};var ip=function(){};ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.map=function(){if(arguments[0]instanceof Gu&&uu(arguments[1],ip.MapOp)){for(var t=arguments[0],e=arguments[1],n=new nl,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(uu(arguments[0],Qu)&&uu(arguments[1],ip.MapOp)){for(var o=arguments[0],a=arguments[1],s=new nl,u=o.iterator();u.hasNext();){var l=u.next(),c=a.map(l);null!==c&&s.add(c)}return s}},ip.MapOp=function(){};var op=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new rf,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Th,this._resultPolyList=new nl,this._resultLineList=new nl,this._resultPointList=new nl,this._graph=new wc(new wh),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new hc(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new nl;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==au.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new nl,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new nl;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),wf.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new xc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Tf(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Lf(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,ic.RIGHT),i.getLocation(1,ic.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(Iu.isTrue(!r.isNull(i,ic.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,ic.LEFT,r.getLocation(i,ic.LEFT)),Iu.isTrue(!r.isNull(i,ic.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,ic.RIGHT,r.getLocation(i,ic.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(rp);op.overlayOp=function(t,e,n){return new op(t,e).getResultGeometry(n)},op.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return op.createEmptyResult(op.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return xf.map(t,{interfaces_:function(){return[ip.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vf.overlayOp(t,e,op.INTERSECTION)},op.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return op.createEmptyResult(op.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vf.overlayOp(t,e,op.SYMDIFFERENCE)},op.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case op.INTERSECTION:o=Math.min(r,i);break;case op.UNION:o=Math.max(r,i);break;case op.DIFFERENCE:o=r;break;case op.SYMDIFFERENCE:o=Math.max(r,i)}return o},op.createEmptyResult=function(t,e,n,r){var i=null;switch(op.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},op.difference=function(t,e){return t.isEmpty()?op.createEmptyResult(op.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vf.overlayOp(t,e,op.DIFFERENCE))},op.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return op.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===au.BOUNDARY&&(i=au.INTERIOR),o===au.BOUNDARY&&(o=au.INTERIOR),a){case op.INTERSECTION:return i===au.INTERIOR&&o===au.INTERIOR;case op.UNION:return i===au.INTERIOR||o===au.INTERIOR;case op.DIFFERENCE:return i===au.INTERIOR&&o!==au.INTERIOR;case op.SYMDIFFERENCE:return i===au.INTERIOR&&o!==au.INTERIOR||i!==au.INTERIOR&&o===au.INTERIOR}return!1}},op.INTERSECTION=1,op.UNION=2,op.DIFFERENCE=3,op.SYMDIFFERENCE=4;var ap=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new rf,this._seg=new Hc;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};ap.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},ap.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?au.BOUNDARY:this._ptLocator.locate(t,this._g)},ap.prototype.extractLinework=function(t){var e=new sp;t.apply(e);var n=e.getLinework(),r=Zl.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},ap.prototype.interfaces_=function(){return[]},ap.prototype.getClass=function(){return ap};var sp=function(){this._linework=null,this._linework=new nl};sp.prototype.getLinework=function(){return this._linework},sp.prototype.filter=function(t){if(t instanceof Pl){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},sp.prototype.interfaces_=function(){return[El]},sp.prototype.getClass=function(){return sp};var up=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};up.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},up.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},up.prototype.getPoints=function(t){for(var e=new nl,n=nf.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},up.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new nu(l-u,c+s);r.add(h)}if(this._doRight){var f=new nu(l+u,c-s);r.add(f)}},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up};var lp=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new nl;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new ap(this._geom[0],this._boundaryDistanceTolerance),new ap(this._geom[1],this._boundaryDistanceTolerance),new ap(this._geom[2],this._boundaryDistanceTolerance)]},cp={TOLERANCE:{configurable:!0}};lp.prototype.reportResult=function(t,e,n){Su.out.println("Overlay result invalid - A:"+au.toLocationSymbol(e[0])+" B:"+au.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+au.toLocationSymbol(e[2]))},lp.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},lp.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!lp.hasLocation(this._location,au.BOUNDARY)||this.isValidResult(r,this._location)}},lp.prototype.addTestPts=function(t){var e=new up(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},lp.prototype.isValidResult=function(t,e){var n=op.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===au.INTERIOR);return r||this.reportResult(t,e,n),r},lp.prototype.getInvalidLocation=function(){return this._invalidLocation},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},lp.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},lp.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Mf.computeSizeBasedSnapTolerance(t),Mf.computeSizeBasedSnapTolerance(e))},lp.isValid=function(t,e,n,r){return new lp(t,e,r).isValid(n)},cp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(lp,cp);var hp=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};hp.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},hp.prototype.combine=function(){for(var t=new nl,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp},hp.combine=function(){if(1===arguments.length){var t=arguments[0];return new hp(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new hp(hp.createList(e,n)).combine()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];return new hp(hp.createList(r,i,o)).combine()}},hp.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},hp.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new nl;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new nl;return a.add(r),a.add(i),a.add(o),a}};var fp=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new nl)},pp={STRTREE_NODE_CAPACITY:{configurable:!0}};fp.prototype.reduceToGeometries=function(t){for(var e=new nl,n=t.iterator();n.hasNext();){var r=n.next(),i=null;uu(r,el)?i=this.unionTree(r):r instanceof Gu&&(i=r),e.add(i)}return e},fp.prototype.extractByEnvelope=function(t,e,n){for(var r=new nl,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},fp.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return hp.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},fp.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Vc(fp.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},fp.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=fp.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(fp.getGeometry(e,n),fp.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},fp.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},fp.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},fp.prototype.unionActual=function(t,e){return fp.restrictToPolygons(t.union(e))},fp.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},fp.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new nl,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),hp.combine(r)},fp.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp},fp.restrictToPolygons=function(t){if(uu(t,Ol))return t;var e=ef.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Zl.toPolygonArray(e))},fp.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},fp.union=function(t){return new fp(t).union()},pp.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(fp,pp);var dp=function(){};dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},dp.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return op.createEmptyResult(op.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vf.overlayOp(t,e,op.UNION)};var gp=function(){return new Ii};Ii.prototype={constructor:Ii,reset:function(){this.s=this.t=0},add:function(t){Ni(mp,t,this.t),Ni(this,mp.s,this.s),this.s?this.t+=mp.t:this.s=mp.t},valueOf:function(){return this.s}};var mp=new Ii,yp=1e-6,vp=Math.PI,Ep=vp/2,_p=vp/4,bp=2*vp,Sp=180/vp,wp=vp/180,xp=Math.abs,Tp=Math.atan,Lp=Math.atan2,Cp=Math.cos,Ap=Math.exp,Mp=Math.log,Rp=Math.sin,Op=Math.sqrt,Pp=Math.tan,Ip={Feature:function(t,e){Fi(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Fi(n[r].geometry,e)}},Np={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Vi(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Vi(n[r],e,0)},Polygon:function(t,e){ji(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ji(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Fi(n[r],e)}},Dp=function(t,e){t&&Ip.hasOwnProperty(t.type)?Ip[t.type](t,e):Fi(t,e)},kp=(gp(),gp(),gp(),function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n});Hi.invert=Hi;var Fp=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:ki,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Vp=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,h=e[0]-s,f=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*h,t[1]=u+l*f),c<1&&(e[0]=s+c*h,e[1]=u+c*f),!0}}}}},jp=function(t,e){return xp(t[0]-e[0])<yp&&xp(t[1]-e[1])<yp},Bp=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(jp(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new $i(r,t,null,!0)),u.push(n.o=new $i(r,null,n,!1)),s.push(n=new $i(a,t,null,!1)),u.push(n.o=new $i(a,null,n,!0))}})),s.length){for(u.sort(e),to(s),to(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}},Up=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Gp=(function(t){1===t.length&&(t=function(t){return function(e,n){return Up(t(e),n)}}(t))}(Up),function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n}),Kp=1e9,Wp=-Kp,zp=gp(),Yp=(gp(),function(t){return t}),Hp=(gp(),gp(),1/0),qp=Hp,Xp=-Hp,Zp=Xp,Jp={point:function(t,e){t<Hp&&(Hp=t),t>Xp&&(Xp=t),e<qp&&(qp=e),e>Zp&&(Zp=e)},lineStart:ki,lineEnd:ki,polygonStart:ki,polygonEnd:ki,result:function(){var t=[[Hp,qp],[Xp,Zp]];return Xp=Zp=-(qp=Hp=1/0),t}},Qp=(gp(),function(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);m.point(n[0],n[1])}function u(){b.point=s,m.lineStart()}function l(){b.point=a,m.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);E.point(n[0],n[1])}function h(){E.lineStart(),g=[]}function f(){c(g[0][0],g[0][1]),E.lineEnd();var t,e,n,r,i=E.clean(),a=v.result(),s=a.length;if(g.pop(),p.push(g),g=null,s)if(1&i){if((e=(n=a[0]).length-1)>0){for(_||(o.polygonStart(),_=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else s>1&&2&i&&a.push(a.pop().concat(a.shift())),d.push(a.filter(no))}var p,d,g,m=e(o),y=i.invert(r[0],r[1]),v=Fp(),E=e(v),_=!1,b={point:a,lineStart:u,lineEnd:l,polygonStart:function(){b.point=c,b.lineStart=h,b.lineEnd=f,d=[],p=[]},polygonEnd:function(){b.point=a,b.lineStart=u,b.lineEnd=l,d=Gp(d);var t=function(t,e){var n=e[0],r=e[1],i=[Rp(n),-Cp(n),0],o=0,a=0;zp.reset();for(var s=0,u=t.length;s<u;++s)if(c=(l=t[s]).length)for(var l,c,h=l[c-1],f=h[0],p=h[1]/2+_p,d=Rp(p),g=Cp(p),m=0;m<c;++m,f=v,d=_,g=b,h=y){var y=l[m],v=y[0],E=y[1]/2+_p,_=Rp(E),b=Cp(E),S=v-f,w=S>=0?1:-1,x=w*S,T=x>vp,L=d*_;if(zp.add(Lp(L*w*Rp(x),g*b+L*Cp(x))),o+=T?S+w*bp:S,T^f>=n^v>=n){var C=Ki(Ui(h),Ui(y));Yi(C);var A=Ki(i,C);Yi(A);var M=(T^S>=0?-1:1)*Di(A[2]);(r>M||r===M&&(C[0]||C[1]))&&(a+=T^S>=0?1:-1)}}return(o<-yp||o<yp&&zp<-yp)^1&a}(p,y);d.length?(_||(o.polygonStart(),_=!0),Bp(d,ro,t,n,o)):t&&(_||(o.polygonStart(),_=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return b}}),$p=Qp((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?vp:-vp,u=xp(o-n);xp(u-vp)<yp?(t.point(n,r=(r+a)/2>0?Ep:-Ep),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=vp&&(xp(n-i)<yp&&(n-=i*yp),xp(o-s)<yp&&(o-=s*yp),r=function(t,e,n,r){var i,o,a=Rp(t-n);return xp(a)>yp?Tp((Rp(e)*(o=Cp(r))*Rp(n)-Rp(r)*(i=Cp(e))*Rp(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Ep,r.point(-vp,i),r.point(0,i),r.point(vp,i),r.point(vp,0),r.point(vp,-i),r.point(0,-i),r.point(-vp,-i),r.point(-vp,0),r.point(-vp,i);else if(xp(t[0]-e[0])>yp){var o=t[0]<e[0]?vp:-vp;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-vp,-Ep]),td=function(t,e){function n(t,e){return Cp(t)*Cp(e)>o}function r(t,e,n){var r=[1,0,0],i=Ki(Ui(t),Ui(e)),a=Gi(i,i),s=i[0],u=a-s*s;if(!u)return!n&&t;var l=o*a/u,c=-o*s/u,h=Ki(r,i),f=zi(r,l);Wi(f,zi(i,c));var p=h,d=Gi(f,p),g=Gi(p,p),m=d*d-g*(Gi(f,f)-1);if(!(m<0)){var y=Op(m),v=zi(p,(-d-y)/g);if(Wi(v,f),v=Bi(v),!n)return v;var E,_=t[0],b=e[0],S=t[1],w=e[1];b<_&&(E=_,_=b,b=E);var x=b-_,T=xp(x-vp)<yp;if(!T&&w<S&&(E=S,S=w,w=E),T||x<yp?T?S+w>0^v[1]<(xp(v[0]-_)<yp?S:w):S<=v[1]&&v[1]<=w:x>vp^(_<=v[0]&&v[0]<=b)){var L=zi(p,(-d+y)/g);return Wi(L,f),[v,Bi(L)]}}}function i(e,n){var r=a?t:vp-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=Cp(t),a=o>0,s=xp(o)>yp;return Qp(n,(function(t){var e,o,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],g=n(h,f),m=a?g?0:i(h,f):g?i(h+(h<0?vp:-vp),f):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(!(p=r(e,d))||jp(e,p)||jp(d,p))&&(d[0]+=yp,d[1]+=yp,g=n(d[0],d[1])),g!==u)c=0,g?(t.lineStart(),p=r(d,e),t.point(p[0],p[1])):(p=r(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(s&&e&&a^g){var y;m&o||!(y=r(d,e,!0))||(c=0,a?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||e&&jp(e,d)||t.point(d[0],d[1]),e=d,u=g,o=m},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var a=Cp(e),s=Rp(e),u=r*n;null==i?(i=e+r*bp,o=e-u/2):(i=Qi(a,i),o=Qi(a,o),(r>0?i<o:i>o)&&(i+=r*bp));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Bi([a,-s*Cp(c),-s*Rp(c)]),t.point(l[0],l[1])}}(o,t,e,i,n,r)}),a?[0,-t]:[-vp,t-vp])};oo.prototype={constructor:oo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ed=Cp(30*wp),nd=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,l,c,h,f,p,d,g,m){var y=l-r,v=c-i,E=y*y+v*v;if(E>4*e&&g--){var _=a+f,b=s+p,S=u+d,w=Op(_*_+b*b+S*S),x=Di(S/=w),T=xp(xp(S)-1)<yp||xp(o-h)<yp?(o+h)/2:Lp(b,_),L=t(T,x),C=L[0],A=L[1],M=C-r,R=A-i,O=v*M-y*R;(O*O/E>e||xp((y*M+v*R)/E-.5)>.3||a*f+s*p+u*d<ed)&&(n(r,i,o,a,s,u,C,A,T,_/=w,b/=w,S,g,m),m.point(C,A),n(C,A,T,_,b,S,l,c,h,f,p,d,g,m))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){y=NaN,S.point=o,e.lineStart()}function o(r,i){var o=Ui([r,i]),a=t(r,i);n(y,v,m,E,_,b,y=a[0],v=a[1],m=r,E=o[0],_=o[1],b=o[2],16,e),e.point(y,v)}function a(){S.point=r,e.lineEnd()}function s(){i(),S.point=u,S.lineEnd=l}function u(t,e){o(c=t,e),h=y,f=v,p=E,d=_,g=b,S.point=o}function l(){n(y,v,m,E,_,b,h,f,c,p,d,g,16,e),S.lineEnd=a,a()}var c,h,f,p,d,g,m,y,v,E,_,b,S={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),S.lineStart=s},polygonEnd:function(){e.polygonEnd(),S.lineStart=i}};return S}}(t,e):function(t){return io({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},rd=io({point:function(t,e){this.stream.point(t*wp,e*wp)}});so.invert=function(t,e){return[t,2*Tp(Ap(e))-Ep]},uo.invert=function(t,e){return[-e,2*Tp(Ap(t))-Ep]};var id=function(){var t=function(t){function e(){var e=vp*s(),a=o(function(t){function e(e){return(e=t(e[0]*wp,e[1]*wp))[0]*=Sp,e[1]*=Sp,e}return t=qi(t[0]*wp,t[1]*wp,t.length>2?t[2]*wp:0),e.invert=function(e){return(e=t.invert(e[0]*wp,e[1]*wp))[0]*=Sp,e[1]*=Sp,e},e}(o.rotate()).invert([0,0]));return l(null==c?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===so?[[Math.max(a[0]-e,c),n],[Math.min(a[0]+e,r),i]]:[[c,Math.max(a[1]-e,n)],[r,Math.min(a[1]+e,i)]])}var n,r,i,o=function(t){return function(t){function e(t){return[(t=l(t[0]*wp,t[1]*wp))[0]*g+a,s-t[1]*g]}function n(t,e){return[(t=o(t,e))[0]*g+a,s-t[1]*g]}function r(){l=kp(u=qi(_,b,S),o);var t=o(v,E);return a=m-t[0]*g,s=y+t[1]*g,i()}function i(){return p=d=null,e}var o,a,s,u,l,c,h,f,p,d,g=150,m=480,y=250,v=0,E=0,_=0,b=0,S=0,w=null,x=$p,T=null,L=Yp,C=.5,A=nd(n,C);return e.stream=function(t){return p&&d===t?p:p=rd(x(u,A(L(d=t))))},e.clipAngle=function(t){return arguments.length?(x=+t?td(w=t*wp,6*wp):(w=null,$p),i()):w*Sp},e.clipExtent=function(t){return arguments.length?(L=null==t?(T=c=h=f=null,Yp):eo(T=+t[0][0],c=+t[0][1],h=+t[1][0],f=+t[1][1]),i()):null==T?null:[[T,c],[h,f]]},e.scale=function(t){return arguments.length?(g=+t,r()):g},e.translate=function(t){return arguments.length?(m=+t[0],y=+t[1],r()):[m,y]},e.center=function(t){return arguments.length?(v=t[0]%360*wp,E=t[1]%360*wp,r()):[v*Sp,E*Sp]},e.rotate=function(t){return arguments.length?(_=t[0]%360*wp,b=t[1]%360*wp,S=t.length>2?t[2]%360*wp:0,r()):[_*Sp,b*Sp,S*Sp]},e.precision=function(t){return arguments.length?(A=nd(n,C=t*t),i()):Op(C)},e.fitExtent=function(t,n){return ao(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return ao(t,[[0,0],e],n)}(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=l.invert((t[0]-a)/g,(s-t[1])/g))&&[t[0]*Sp,t[1]*Sp]},r()}}((function(){return t}))()}(t),a=o.center,s=o.scale,u=o.translate,l=o.clipExtent,c=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?c=n=r=i=null:(c=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==c?null:[[c,n],[r,i]]},e()}(uo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};t.projection=ca,t.random=Hs,t.clusters=qs,t.helpers=Lo,t.invariant=Ao,t.meta=Co,t.isolines=function(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(q(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!x(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=function(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;q(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return O(t,(function(t){var e=W(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return W(t)[0]-W(e)[0]}))})).sort((function(t,n){return e?W(t[0])[1]-W(n[0])[1]:W(n[0])[1]-W(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[n]?l.push(h.properties[n]):l.push(0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(l)}return a}(t,{zProperty:r,flip:!0});return l(function(t,e,n){var r=G(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,f=function(t){t[0]=t[0]*c+a,t[1]=t[1]*h+s};return t.forEach((function(t){C(t,f)})),t}(function(t,e,n,r,i){for(var o=[],a=1;a<e.length;a++){var s=+e[a],u=Object.assign({},r,i[a]);u[n]=s;var l=c(Q(t,s),u);o.push(l)}return o}(a,e,r,i,o),a,t))},t.convex=Ct,t.pointsWithinPolygon=Rt,t.concave=function(t,n){if(!x(n=n||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var r=n.maxEdge||1/0;if(!w(r))throw new Error("maxEdge is invalid");var i=Ot(function(t){var e=[],n={};return O(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");n.hasOwnProperty(r)||(e.push(t),n[r]=!0)}})),l(e)}(t));if(i.features=i.features.filter((function(t){var e=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=Dt(e,i,n),s=Dt(i,o,n),u=Dt(e,o,n);return a<=r&&s<=r&&u<=r})),i.features.length<1)return null;var o=qt(i,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,r){var i=Po(6),o=e.features.map((function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}}));return i.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=G(t),n=[];i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach((function(e){At([e.minX,e.minY],t)&&n.push(e.property)})),t.properties[r]=n})),t},t.flip=function(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=kt(t)),C(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},t.simplify=function(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=kt(t)),N(t,(function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;Xt(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=te(i,e,n);break;case"MultiLineString":t.coordinates=i.map((function(t){return te(t,e,n)}));break;case"Polygon":t.coordinates=ee(i,e,n);break;case"MultiPolygon":t.coordinates=i.map((function(t){return ee(t,e,n)}))}}(t,n,r)})),t},t.bezierSpline=ne,t.tag=function(t,e,n,r){return t=kt(t),e=kt(e),O(t,(function(t){t.properties||(t.properties={}),O(e,(function(e){void 0===t.properties[r]&&At(t,e)&&(t.properties[r]=e.properties[n])}))})),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null===e||void 0===e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return l(function(t,e){for(var n,r,i=t.slice(0),o=t.length,a=o-e;o-- >a;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(a)}(t.features,e))},t.envelope=ie,t.square=oe,t.circle=se,t.midpoint=function(t,e){return ae(t,Dt(t,e)/2,ue(t,e))},t.center=le,t.centerOfMass=function t(e,n){switch(J(e)){case"Point":return e;case"Polygon":var i=[];C(e,(function(t){i.push(t)}));var o,a,s,u,l,c,h,f,p=ce(e,n),d=p.geometry.coordinates,g=0,m=0,y=0,v=i.map((function(t){return[t[0]-d[0],t[1]-d[1]]}));for(o=0;o<i.length-1;o++)u=(a=v[o])[0],c=a[1],l=(s=v[o+1])[0],y+=f=u*(h=s[1])-l*c,g+=(u+l)*f,m+=(c+h)*f;if(0===y)return p;var E=1/(.5*y*6);return r([d[0]+E*g,d[1]+E*m],n);default:var _=Ct(e);return _?t(_,n):ce(e,n)}},t.centroid=ce,t.combine=function(t){function n(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},i=Object.keys(r).reduce((function(t,e){return t[e.replace("Multi","")]=e,t}),{});return O(t,(function(t){t.geometry&&(r[t.geometry.type]?n(t,t.geometry.type,!0):i[t.geometry.type]&&n(t,i[t.geometry.type],!1))})),l(Object.keys(r).filter((function(t){return r[t].coordinates.length})).sort().map((function(t){return e({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})})))},t.distance=Dt,t.explode=he,t.bbox=G,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Ce(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Ce(t))})),e},t.bboxPolygon=re,t.booleanPointInPolygon=At,t.nearestPoint=Ae,t.nearestPointOnLine=Xe,t.nearestPointToLine=function(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return N(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==J(e))throw new Error("line must be a LineString");var o=1/0,a=null;return O(t,(function(t){var n=on(t,e,{units:r});n<o&&(o=n,a=t)})),a&&(a.properties=Object.assign({dist:o},a.properties,i)),a},t.planepoint=function(t,e){var n=K(t),r=X(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,a=i.b,s=i.c,u=n[0],l=n[1],c=r[0][0],h=r[0][1],f=void 0!==o?o:r[0][2],p=r[1][0],d=r[1][1],g=void 0!==a?a:r[1][2],m=r[2][0],y=r[2][1],v=void 0!==s?s:r[2][2];return(v*(u-c)*(l-d)+f*(u-p)*(l-y)+g*(u-m)*(l-h)-g*(u-c)*(l-y)-v*(u-p)*(l-h)-f*(u-m)*(l-d))/((u-c)*(l-d)+(u-p)*(l-y)+(u-m)*(l-h)-(u-c)*(l-y)-(u-p)*(l-h)-(u-m)*(l-d))},t.tin=Ot,t.bearing=ue,t.destination=ae,t.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var a=function(t,e,n,r,i,o,a,s){var u,l,c,h,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(s-o)*(n-t)-(a-i)*(r-e))?null!==f.x&&null!==f.y&&f:(h=(n-t)*(l=e-o)-(r-e)*(c=t-i),l=((a-i)*l-(s-o)*c)/u,c=h/u,f.x=t+l*(n-t),f.y=e+l*(r-e),l>=0&&l<=1&&(f.onLine1=!0),c>=0&&c<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);a&&i.features.push(r([a[0],a[1]]))}}))})),i},t.pointOnFeature=sn,t.area=ln,t.along=function(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var i;if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}if(!w(e))throw new Error("distance must be a number");for(var o=0,a=0;a<i.length&&!(e>=o&&a===i.length-1);a++){if(o>=e){var s=e-o;if(s){var u=ue(i[a],i[a-1])-180;return ae(i[a],s,u,n)}return r(i[a])}o+=Dt(i[a],i[a+1],n)}return r(i[i.length-1])},t.length=pn,t.lineSlice=function(t,e,n){var r=W(n);if("LineString"!==J(n))throw new Error("line must be a LineString");for(var i,o=Xe(n,t),a=Xe(n,e),u=[(i=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],l=i[0].properties.index+1;l<i[1].properties.index+1;l++)u.push(r[l]);return u.push(i[1].geometry.coordinates),s(u,n.properties)},t.lineSliceAlong=dn,t.pointGrid=En,t.truncate=_n,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return k(t,(function(t){e.push(t)})),l(e)},t.lineIntersect=He,t.lineChunk=function(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return k(t,(function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=pn(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++)r(dn(t,e*a,e*(a+1),{units:n}))}(t,e,r,(function(t){o.push(t)}))})),l(o)},t.unkinkPolygon=function(t){var e=[];return k(t,(function(t){"Polygon"===t.geometry.type&&O(fa(t),(function(n){e.push(o(n.geometry.coordinates,t.properties))}))})),l(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=K(t),e=K(e),r=r||{},i=i||100,o=o||10,new _a({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.lineSegment=Ye,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=J(t),r=J(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=_n(e,{precision:7});switch(r){case"Point":return Tn(t,i);case"MultiPoint":return xn(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return xn(t,He(t,i))}},t.lineArc=An,t.polygonToLine=Rn,t.lineToPolygon=Pn,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),r=W(t),i=t.properties;switch(n){case"LineString":case"MultiLineString":var a=[];return"LineString"===n&&(r=[r]),r.forEach((function(t){ba(t,e,a)})),1===a.length?s(a[0],i):c(a,i);case"Polygon":return o(Vn(r,e),i);case"MultiPolygon":return f(r.map((function(t){return Vn(t,e)})),i);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=Kn,t.sector=function(t,e,n,r,i){if(!x(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(zn(n)===zn(r))return se(t,e,i);var a=W(t),s=[[a]];return C(An(t,e,n,r,i),(function(t){s[0].push(t)})),s[0].push(a),o(s)},t.rhumbBearing=Ze,t.rhumbDistance=Qe,t.rhumbDestination=Yn,t.polygonTangents=function(t,e){var n,i,o,a=W(t),s=W(e);switch(J(e)){case"Polygon":n=s[0][0],i=s[0][0],o=qn(s[0][0],s[0][s[0].length-1],a);var u=Hn(s[0],a,o,void 0,n,i);n=u[0],i=u[1];break;case"MultiPolygon":n=s[0][0][0],i=s[0][0][0],o=qn(s[0][0][0],s[0][0][s[0][0].length-1],a),s.forEach((function(t){var e=Hn(t[0],a,o,void 0,n,i);n=e[0],i=e[1]}))}return l([r(n),r(i)])},t.rewind=function(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=kt(t));var i=[];switch(t.type){case"GeometryCollection":return N(t,(function(t){Zn(t,n)})),t;case"FeatureCollection":return O(t,(function(t){O(Zn(t,n),(function(t){i.push(t)}))})),l(i)}return Zn(t,n)},t.isobands=function(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},a=n.breaksProperties||[];if(q(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!x(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(a))throw new Error("breaksProperties is not an Array");var s=function(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;q(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return O(t,(function(t){var e=W(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return W(t)[0]-W(e)[0]}))})).sort((function(t,n){return e?W(t[0])[1]-W(n[0])[1]:W(n[0])[1]-W(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[n]?l.push(h.properties[n]):l.push(0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(l)}return a}(t,{zProperty:r,flip:!0}),u=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var a=+e[i-1],s=+e[i],u=function(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var a=o([e[r].lrCoordinates]),s=r+1;s<e.length;s++)e[s].grouped||function(t,e){for(var n=he(t),r=0;r<n.features.length;r++)if(!At(n.features[r],e))return!1;return!0}(o([e[s].lrCoordinates]),a)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(i)}return n}(function(t){var e=[],n=[];t.forEach((function(t){var r=ln(o([t]));n.push(r),e.push({ring:t,area:r})})),n.sort((function(t,e){return e-t}));var r=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}})),r}($n(t,a,s-a))),l={};l.groupedRings=u,l[n]=a+"-"+s,r.push(l)}return r}(s,e,r);return l((u=function(t,e,n){var r=G(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,f=function(t){t[0]=t[0]*c+a,t[1]=t[1]*h+s};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(f)}))}))})),t}(u,s,t)).map((function(t,e){if(a[e]&&!x(a[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,a[e]);return n[r]=t[r],f(t.groupedRings,n)})))},t.transformRotate=nr,t.transformScale=rr,t.transformTranslate=function(t,e,n,r){if(!x(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,a=r.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==a&&void 0!==a||(t=kt(t)),C(t,(function(t){var r=W(Yn(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t},t.lineOffset=function(t,e,n){if(!x(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");var i=J(t),o=t.properties;switch(i){case"LineString":return sr(t,e,r);case"MultiLineString":var a=[];return k(t,(function(t){a.push(sr(t,e,r).geometry.coordinates)})),c(a,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=_s.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):r.push(t)})),n.forEach((function(t){vs.findEdgeRingContaining(t,r)&&r.push(t)})),l(r.map((function(t){return t.toPolygon()})))},t.booleanDisjoint=function(t,e){var n;return k(t,(function(t){k(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!cr(e,t);case"Polygon":return!At(t,e)}break;case"LineString":switch(e.type){case"Point":return!cr(t,e);case"LineString":return!function(t,e){return He(t,e).features.length>0}(t,e);case"Polygon":return!hr(e,t)}break;case"Polygon":switch(e.type){case"Point":return!At(e,t);case"LineString":return!hr(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(At(t.coordinates[0][n],e))return!0;for(var r=0;r<e.coordinates[0].length;r++)if(At(e.coordinates[0][r],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)}))})),n},t.booleanContains=function(t,e){var n=J(t),r=J(e),i=X(t),o=X(e),a=W(t),s=W(e);switch(n){case"Point":switch(r){case"Point":return pr(a,s);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(pr(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(pr(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return gn(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(gn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!gn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(gn(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!gn(e.coordinates[r],t))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return At(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0;if(!fr(G(t),G(e)))return!1;for(;r<e.coordinates.length-1;r++)if(At({type:"Point",coordinates:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(i,o);case"Polygon":return function(t,e){if(!fr(G(t),G(e)))return!1;for(var n=0;n<e.coordinates[0].length;n++)if(!At(e.coordinates[0][n],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!At(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=J(t),r=J(e),i=X(t),o=X(e);switch(n){case"MultiPoint":switch(r){case"LineString":return dr(i,o);case"Polygon":return mr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return dr(o,i);case"LineString":return function(t,e){if(He(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),yr(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return gr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return mr(o,i);case"LineString":return gr(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=Xn,t.booleanOverlap=br,t.booleanPointOnLine=gn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return J(t)===J(e)&&new Ts({precision:6}).compare(Xt(t),Xt(e))},t.booleanWithin=mn,t.clone=kt,t.cleanCoords=Xt,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.minPoints,i=n.units;if(q(t,"Point","Input must contain Points"),null===e||void 0===e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(void 0===r||null===r||Math.sign(r)>0))throw new Error("Invalid minPoints");t=kt(t),r=r||3;var o=new Rs.DBSCAN,a=-1;return o.run(I(t),b(e,i),r,Dt).forEach((function(e){a++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=a,n.properties.dbscan="core"}))})),o.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;q(t,"Point","Input must contain Points");var i=t.features.length;(n=n||Math.round(Math.sqrt(i/2)))>i&&(n=i),!1!==r&&void 0!==r||(t=kt(t));var o=I(t),a=o.slice(0,n),s=Ds(o,n,a),u={};return s.centroids.forEach((function(t,e){u[e]=t})),O(t,(function(t,e){var n=s.idxs[e];t.properties.cluster=n,t.properties.centroid=u[n]})),t},t.pointToLineDistance=on,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==wr(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==wr(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Ye(Xt(t)).features,r=Ye(Xt(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!function(t,e){return v(Ze(t[0],t[1]))===v(Ze(e[0],e[1]))}(o,r[i].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,i){if(!x(i=i||{}))throw new Error("options is invalid");var o=i.resolution,a=i.minDistance,u=i.obstacles||l([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!w(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(a)throw new Error("options.minDistance is not yet implemented");var c=K(t),h=K(n);switch(t=r(c),n=r(h),J(u)){case"FeatureCollection":if(0===u.features.length)return s([c,h]);break;case"Polygon":u=l([e(X(u))]);break;default:throw new Error("invalid obstacles")}var f=u;f.features.push(t),f.features.push(n);var p=G(rr(re(G(f)),1.15));o||(o=Dt([p[0],p[1]],[p[2],p[1]],i)/100),f.features.pop(),f.features.pop();for(var d=p[0],g=p[1],m=p[2],y=p[3],v=o/Dt([d,g],[m,g],i)*(m-d),E=o/Dt([d,g],[d,y],i)*(y-g),_=m-d,b=y-g,S=(_-Math.floor(_/v)*v)/2,T=[],L=[],C=[],A=[],M=1/0,R=1/0,O=y-(b-Math.floor(b/E)*E)/2,P=0;O>=g;){for(var I=[],N=[],D=d+S,k=0;D<=m;){var F=r([D,O]),V=function(t,e){for(var n=0;n<e.features.length;n++)if(At(t,e.features[n]))return!0;return!1}(F,u);I.push(V?0:1),N.push(D+"|"+O);var j=Dt(F,t);!V&&j<M&&(M=j,C={x:k,y:P});var B=Dt(F,n);!V&&B<R&&(R=B,A={x:k,y:P}),D+=v,k++}L.push(I),T.push(N),O-=E,P++}var U=new Tr(L,{diagonal:!0}),W=U.grid[C.y][C.x],z=U.grid[A.y][A.x],Y=[c];return ks.search(U,W,z).forEach((function(t){var e=T[t.x][t.y].split("|");Y.push([+e[0],+e[1]])})),Y.push(h),Xt(s(Y))},t.voronoi=function(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return q(t,"Point","points"),l(function(){function t(t){return new Qr(t.map((function(r,i){var o=[Math.round(e(r,i,t)/zs)*zs,Math.round(n(r,i,t)/zs)*zs];return o.index=i,o.data=r,o})),r)}var e=Ar,n=Mr,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:Fs(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Fs(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map($r))},t.ellipse=ti,t.centerMean=ni,t.centerMedian=function(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!w(n))throw new Error("counter must be a number");var r=e.weight,i=ni(t,{weight:e.weight}),o=l([]);return O(t,(function(t){o.features.push(ce(t,{weight:t.properties[r]}))})),o.properties={tolerance:e.tolerance,medianCandidates:[]},ri(i.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!w(n))throw new Error("steps must be a number");if(!x(i))throw new Error("properties must be a number");var o=I(t).length,a=ni(t,{weight:r}),s=0,u=0,c=0;O(t,(function(t){var e=t.properties[r]||1,n=ii(W(t),W(a));s+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,c+=n.x*n.y*e}));var h=s-u,f=Math.sqrt(Math.pow(h,2)+4*Math.pow(c,2)),p=2*c,d=Math.atan((h+f)/p),g=180*d/Math.PI,m=0,y=0,v=0;O(t,(function(t){var e=t.properties[r]||1,n=ii(W(t),W(a));m+=Math.pow(n.x*Math.cos(d)-n.y*Math.sin(d),2)*e,y+=Math.pow(n.x*Math.sin(d)+n.y*Math.cos(d),2)*e,v+=e}));var E=Math.sqrt(2*m/v),_=Math.sqrt(2*y/v),b=ti(a,E,_,{units:"degrees",angle:g,steps:n,properties:i}),S=Rt(t,l([b])),T={meanCenterCoordinates:W(a),semiMajorAxis:E,semiMinorAxis:_,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*I(S).length/o};return b.properties.standardDeviationalEllipse=T,b},t.difference=function(t,n){var r=X(t),i=X(n),o=t.properties||{};if(r=Pi(r),i=Pi(i),!r)return null;if(!i)return e(r,o);var a=new nc,s=a.read(r),u=a.read(i),l=op.difference(s,u);return l.isEmpty()?null:e((new rc).write(l),o)},t.buffer=function(t,e,n){var r=(n=n||{}).units,i=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return N(t,(function(t){var n=lo(t,e,r,i);n&&o.push(n)})),l(o);case"FeatureCollection":return O(t,(function(t){var n=lo(t,e,r,i);n&&O(n,(function(t){t&&o.push(t)}))})),l(o)}return lo(t,e,r,i)},t.union=po,t.intersect=go,t.dissolve=function(t,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;q(t,"Polygon","dissolve");var r=kt(t),i=r.features,o=[];i.forEach((function(t,e){t.properties.origIndexPosition=e}));var a=Ke();for(var u in a.load(r),i){var l=i[u],c=!1;if(a.search(l).features.forEach((function(t){l=i[u];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var r=mo(e,o);0!==r&&(e-=r)}if(e!==+u){var h=i[e];h&&l&&(void 0!==n&&h.properties[n]!==l.properties[n]||br(l,h)&&function(t,e){return He(s(I(t)),s(I(e))).features.length>0}(l,h)&&(i[u]=po(l,h),o.push(t.properties.origIndexPosition),o.sort((function(t,e){return t-e})),a.remove(t),i.splice(e,1),l.properties.origIndexPosition=u,a.remove(l,(function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition})),c=!0))}})),c){if(!l)continue;l.properties.origIndexPosition=u,a.insert(l),u--}}return i.forEach((function(t){delete t.properties.origIndexPosition,delete t.bbox})),r},t.hexGrid=yo,t.mask=function(t,e){var n=function(t){return o(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),r=function(t){var e=[],n=[];return k(t,(function(t){var r=t.geometry.coordinates,i=r[0],a=r.slice(1);e.push(o([i])),a.forEach((function(t){n.push(o([t]))}))})),[l(e),l(n)]}(t),i=r[0],a=r[1];return function(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),k(e,(function(t){r.push(t.geometry.coordinates[0])})),k(n,(function(t){r.push(t.geometry.coordinates[0])})),o(r)}(n,i=vo(i),a=vo(a))},t.squareGrid=_o,t.triangleGrid=bo,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(q(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var a,s=G(t);switch(r){case"point":case"points":a=En(s,e,n);break;case"square":case"squares":a=_o(s,e,n);break;case"hex":case"hexes":a=yo(s,e,n);break;case"triangle":case"triangles":a=bo(s,e,n);break;default:throw new Error("invalid gridType")}var u=[];return O(a,(function(e){var a=0,s=0;O(t,(function(t){var u,l=Dt("point"===r?e:ce(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(a=u);var c=1/Math.pow(l,o);s+=c,a+=c*u}));var l=kt(e);l.properties[i]=a/s,u.push(l)})),l(u)},t.pointOnSurface=sn,t.polygonToLineString=Rn,t.lineStringToPolygon=Pn,t.inside=At,t.within=Rt,t.bezier=ne,t.nearest=Ae,t.pointOnLine=Xe,t.lineDistance=pn,t.radians2degrees=E,t.degrees2radians=_,t.distanceToDegrees=y,t.distanceToRadians=m,t.radiansToDistance=g,t.bearingToAngle=v,t.convertDistance=b,t.toMercator=$e,t.toWgs84=tn,t.randomPosition=oi,t.randomPoint=ai,t.randomPolygon=si,t.randomLineString=ui,t.getCluster=ci,t.clusterEach=hi,t.clusterReduce=fi,t.createBins=pi,t.applyFilter=di,t.propertiesContainsFilter=gi,t.filterProperties=mi,t.earthRadius=So,t.factors=wo,t.unitsFactors=xo,t.areaFactors=To,t.feature=e,t.geometry=n,t.point=r,t.points=i,t.polygon=o,t.polygons=a,t.lineString=s,t.lineStrings=u,t.featureCollection=l,t.multiLineString=c,t.multiPoint=h,t.multiPolygon=f,t.geometryCollection=p,t.round=d,t.radiansToLength=g,t.lengthToRadians=m,t.lengthToDegrees=y,t.bearingToAzimuth=v,t.radiansToDegrees=E,t.degreesToRadians=_,t.convertLength=b,t.convertArea=S,t.isNumber=w,t.isObject=x,t.validateBBox=T,t.validateId=L,t.getCoord=K,t.getCoords=W,t.containsNumber=z,t.geojsonType=Y,t.featureOf=H,t.collectionOf=q,t.getGeom=X,t.getGeomType=Z,t.getType=J,t.coordEach=C,t.coordReduce=A,t.propEach=M,t.propReduce=R,t.featureEach=O,t.featureReduce=P,t.coordAll=I,t.geomEach=N,t.geomReduce=D,t.flattenEach=k,t.flattenReduce=F,t.segmentEach=V,t.segmentReduce=j,t.lineEach=B,t.lineReduce=U,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,"a",(function(){return o}))},function(t,e,n){var r=n(270),i=n(104),o=n(271),a=n(9);t.exports=function(t,e){return(a(t)?r:i)(t,o(e))}},function(t,e,n){var r=n(183);t.exports=function(t,e){return r(t,e)}},function(t,e,n){n(494),t.exports=self.fetch.bind(self)},function(t,e,n){var r=n(311);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,i="/"===a.charAt(0))}return(i?"/":"")+(e=n(r(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),a="/"===i(t,-1);return(t=n(r(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&a&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var l=[];for(u=s;u<i.length;u++)l.push("..");return(l=l.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=a+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var i="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(127))},function(t,e,n){var r=n(400),i=n(440),o=n(124),a=n(9),s=n(448);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";(function(t){n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return d}));n(362);var r=n(71),i=n.n(r);function o(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];"string"===typeof e[0]&&(e[0]="react-i18next:: ".concat(e[0])),console.warn.apply(null,e)}}var a={};function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];"string"===typeof e[0]&&a[e[0]]||("string"===typeof e[0]&&(a[e[0]]=new Date),o.apply(void 0,e))}function u(){t&&Object({NODE_ENV:"production",PUBLIC_URL:"/playground",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0})}var l=!1,c=!1;function h(t,e){!c&&t.initialI18nStore&&(t.i18n.services.resourceStore.data=t.initialI18nStore,e&&(t.i18n.options.isInitialSSR=!0),t.i18nOptions&&(t.i18nOptions.wait=!1),c=!0),!l&&t.initialLanguage&&(t.i18n.changeLanguage(t.initialLanguage),l=!0)}Object.entries;var f=Object.prototype.hasOwnProperty;function p(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function d(t,e){if(p(t,e))return!0;if("object"!==i()(t)||null===t||"object"!==i()(e)||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!f.call(e,n[o])||!p(t[n[o]],e[n[o]]))return!1;return!0}}).call(this,n(127))},function(t,e,n){var r=n(71),i=n(76);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?i(t):e}},function(t,e,n){var r=n(549);t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){r(t,e,n[e])}))}return t}},function(t,e,n){var r=n(277);t.exports=function(t){return r(t,5)}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(550);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){"use strict";t.exports=n(495)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return u}));var a=n(94);function s(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?Object(a.a)(t):e}function u(t){return function(){var e,n=r(t);if(i()){var o=r(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return s(this,e)}}},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},function(t,e,n){var r=n(287),i=n(105),o=n(128),a=i((function(t,e){return o(t)?r(t,e):[]}));t.exports=a},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}}(),t.exports=n(387)},function(t,e,n){var r=n(247),i=n(9);t.exports=function(t,e,n,o){return null==t?[]:(i(e)||(e=null==e?[]:[e]),i(n=o?void 0:n)||(n=null==n?[]:[n]),r(t,e,n))}},function(t,e,n){"use strict";function r(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}n.r(e),e.default=function(t,e){var n;void 0===e&&(e=r);var i,o=[],a=!1;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return a&&n===this&&e(r,o)||(i=t.apply(this,r),a=!0,n=this,o=r),i}}},function(t,e,n){var r=n(638)(n(230));t.exports=r},function(t,e,n){var r=n(246),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,"a",(function(){return r}))},function(t,e){t.exports=function(t){return void 0===t}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(181),i=n(187);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(297),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e,n){var r=n(331),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,s,u=a(t),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){function n(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){var r=n(99),i=n(398),o=n(399),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(65),i=n(37),o=n(272),a=n(196);t.exports=function(t,e){if(null==t)return{};var n=r(a(t),(function(t){return[t]}));return e=i(e),o(t,n,(function(t,n){return e(t,n[0])}))}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(207),i=n(302),o=n(85),a=n(25);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},function(t,e,n){(function(t,r){var i;(function(){var o="Expected a function",a="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",l="[object Array]",c="[object Boolean]",h="[object Date]",f="[object Error]",p="[object Function]",d="[object GeneratorFunction]",g="[object Map]",m="[object Number]",y="[object Object]",v="[object RegExp]",E="[object Set]",_="[object String]",b="[object Symbol]",S="[object WeakMap]",w="[object ArrayBuffer]",x="[object DataView]",T="[object Float32Array]",L="[object Float64Array]",C="[object Int8Array]",A="[object Int16Array]",M="[object Int32Array]",R="[object Uint8Array]",O="[object Uint16Array]",P="[object Uint32Array]",I=/\b__p \+= '';/g,N=/\b(__p \+=) '' \+/g,D=/(__e\(.*?\)|\b__t\)) \+\n'';/g,k=/&(?:amp|lt|gt|quot|#39);/g,F=/[&<>"']/g,V=RegExp(k.source),j=RegExp(F.source),B=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,G=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,H=RegExp(Y.source),q=/^\s+|\s+$/g,X=/^\s+/,Z=/\s+$/,J=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Q=/\{\n\/\* \[wrapped with (.+)\] \*/,$=/,? & /,tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,et=/\\(\\)?/g,nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rt=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,ot=/^0b[01]+$/i,at=/^\[object .+?Constructor\]$/,st=/^0o[0-7]+$/i,ut=/^(?:0|[1-9]\d*)$/,lt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ct=/($^)/,ht=/['\n\r\u2028\u2029\\]/g,ft="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",pt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dt="[\\ud800-\\udfff]",gt="["+pt+"]",mt="["+ft+"]",yt="\\d+",vt="[\\u2700-\\u27bf]",Et="[a-z\\xdf-\\xf6\\xf8-\\xff]",_t="[^\\ud800-\\udfff"+pt+yt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",bt="\\ud83c[\\udffb-\\udfff]",St="[^\\ud800-\\udfff]",wt="(?:\\ud83c[\\udde6-\\uddff]){2}",xt="[\\ud800-\\udbff][\\udc00-\\udfff]",Tt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Lt="(?:"+Et+"|"+_t+")",Ct="(?:"+Tt+"|"+_t+")",At="(?:"+mt+"|"+bt+")"+"?",Mt="[\\ufe0e\\ufe0f]?"+At+("(?:\\u200d(?:"+[St,wt,xt].join("|")+")[\\ufe0e\\ufe0f]?"+At+")*"),Rt="(?:"+[vt,wt,xt].join("|")+")"+Mt,Ot="(?:"+[St+mt+"?",mt,wt,xt,dt].join("|")+")",Pt=RegExp("['\u2019]","g"),It=RegExp(mt,"g"),Nt=RegExp(bt+"(?="+bt+")|"+Ot+Mt,"g"),Dt=RegExp([Tt+"?"+Et+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[gt,Tt,"$"].join("|")+")",Ct+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[gt,Tt+Lt,"$"].join("|")+")",Tt+"?"+Lt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Tt+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yt,Rt].join("|"),"g"),kt=RegExp("[\\u200d\\ud800-\\udfff"+ft+"\\ufe0e\\ufe0f]"),Ft=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],jt=-1,Bt={};Bt[T]=Bt[L]=Bt[C]=Bt[A]=Bt[M]=Bt[R]=Bt["[object Uint8ClampedArray]"]=Bt[O]=Bt[P]=!0,Bt[u]=Bt[l]=Bt[w]=Bt[c]=Bt[x]=Bt[h]=Bt[f]=Bt[p]=Bt[g]=Bt[m]=Bt[y]=Bt[v]=Bt[E]=Bt[_]=Bt[S]=!1;var Ut={};Ut[u]=Ut[l]=Ut[w]=Ut[x]=Ut[c]=Ut[h]=Ut[T]=Ut[L]=Ut[C]=Ut[A]=Ut[M]=Ut[g]=Ut[m]=Ut[y]=Ut[v]=Ut[E]=Ut[_]=Ut[b]=Ut[R]=Ut["[object Uint8ClampedArray]"]=Ut[O]=Ut[P]=!0,Ut[f]=Ut[p]=Ut[S]=!1;var Gt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kt=parseFloat,Wt=parseInt,zt="object"==typeof t&&t&&t.Object===Object&&t,Yt="object"==typeof self&&self&&self.Object===Object&&self,Ht=zt||Yt||Function("return this")(),qt=e&&!e.nodeType&&e,Xt=qt&&"object"==typeof r&&r&&!r.nodeType&&r,Zt=Xt&&Xt.exports===qt,Jt=Zt&&zt.process,Qt=function(){try{var t=Xt&&Xt.require&&Xt.require("util").types;return t||Jt&&Jt.binding&&Jt.binding("util")}catch(e){}}(),$t=Qt&&Qt.isArrayBuffer,te=Qt&&Qt.isDate,ee=Qt&&Qt.isMap,ne=Qt&&Qt.isRegExp,re=Qt&&Qt.isSet,ie=Qt&&Qt.isTypedArray;function oe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ae(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function se(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function ue(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function le(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ce(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function he(t,e){return!!(null==t?0:t.length)&&be(t,e,0)>-1}function fe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function pe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function de(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ge(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function me(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ye(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var ve=Te("length");function Ee(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function _e(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function be(t,e,n){return e===e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):_e(t,we,n)}function Se(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function we(t){return t!==t}function xe(t,e){var n=null==t?0:t.length;return n?Ae(t,e)/n:NaN}function Te(t){return function(e){return null==e?void 0:e[t]}}function Le(t){return function(e){return null==t?void 0:t[e]}}function Ce(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ae(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Me(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Re(t){return function(e){return t(e)}}function Oe(t,e){return pe(e,(function(e){return t[e]}))}function Pe(t,e){return t.has(e)}function Ie(t,e){for(var n=-1,r=t.length;++n<r&&be(e,t[n],0)>-1;);return n}function Ne(t,e){for(var n=t.length;n--&&be(e,t[n],0)>-1;);return n}function De(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var ke=Le({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Fe=Le({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ve(t){return"\\"+Gt[t]}function je(t){return kt.test(t)}function Be(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Ue(t,e){return function(n){return t(e(n))}}function Ge(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function Ke(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function We(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function ze(t){return je(t)?function(t){var e=Nt.lastIndex=0;for(;Nt.test(t);)++e;return e}(t):ve(t)}function Ye(t){return je(t)?function(t){return t.match(Nt)||[]}(t):function(t){return t.split("")}(t)}var He=Le({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var qe=function t(e){var n=(e=null==e?Ht:qe.defaults(Ht.Object(),e,qe.pick(Ht,Vt))).Array,r=e.Date,i=e.Error,ft=e.Function,pt=e.Math,dt=e.Object,gt=e.RegExp,mt=e.String,yt=e.TypeError,vt=n.prototype,Et=ft.prototype,_t=dt.prototype,bt=e["__core-js_shared__"],St=Et.toString,wt=_t.hasOwnProperty,xt=0,Tt=function(){var t=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Lt=_t.toString,Ct=St.call(dt),At=Ht._,Mt=gt("^"+St.call(wt).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rt=Zt?e.Buffer:void 0,Ot=e.Symbol,Nt=e.Uint8Array,kt=Rt?Rt.allocUnsafe:void 0,Gt=Ue(dt.getPrototypeOf,dt),zt=dt.create,Yt=_t.propertyIsEnumerable,qt=vt.splice,Xt=Ot?Ot.isConcatSpreadable:void 0,Jt=Ot?Ot.iterator:void 0,Qt=Ot?Ot.toStringTag:void 0,ve=function(){try{var t=Qi(dt,"defineProperty");return t({},"",{}),t}catch(e){}}(),Le=e.clearTimeout!==Ht.clearTimeout&&e.clearTimeout,Xe=r&&r.now!==Ht.Date.now&&r.now,Ze=e.setTimeout!==Ht.setTimeout&&e.setTimeout,Je=pt.ceil,Qe=pt.floor,$e=dt.getOwnPropertySymbols,tn=Rt?Rt.isBuffer:void 0,en=e.isFinite,nn=vt.join,rn=Ue(dt.keys,dt),on=pt.max,an=pt.min,sn=r.now,un=e.parseInt,ln=pt.random,cn=vt.reverse,hn=Qi(e,"DataView"),fn=Qi(e,"Map"),pn=Qi(e,"Promise"),dn=Qi(e,"Set"),gn=Qi(e,"WeakMap"),mn=Qi(dt,"create"),yn=gn&&new gn,vn={},En=Lo(hn),_n=Lo(fn),bn=Lo(pn),Sn=Lo(dn),wn=Lo(gn),xn=Ot?Ot.prototype:void 0,Tn=xn?xn.valueOf:void 0,Ln=xn?xn.toString:void 0;function Cn(t){if(Ka(t)&&!Pa(t)&&!(t instanceof On)){if(t instanceof Rn)return t;if(wt.call(t,"__wrapped__"))return Co(t)}return new Rn(t)}var An=function(){function t(){}return function(e){if(!Ga(e))return{};if(zt)return zt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Mn(){}function Rn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function On(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Pn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function In(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Nn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Dn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Nn;++e<n;)this.add(t[e])}function kn(t){var e=this.__data__=new In(t);this.size=e.size}function Fn(t,e){var n=Pa(t),r=!n&&Oa(t),i=!n&&!r&&ka(t),o=!n&&!r&&!i&&Ja(t),a=n||r||i||o,s=a?Me(t.length,mt):[],u=s.length;for(var l in t)!e&&!wt.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||oo(l,u))||s.push(l);return s}function Vn(t){var e=t.length;return e?t[Dr(0,e-1)]:void 0}function jn(t,e){return wo(mi(t),qn(e,0,t.length))}function Bn(t){return wo(mi(t))}function Un(t,e,n){(void 0!==n&&!Aa(t[e],n)||void 0===n&&!(e in t))&&Yn(t,e,n)}function Gn(t,e,n){var r=t[e];wt.call(t,e)&&Aa(r,n)&&(void 0!==n||e in t)||Yn(t,e,n)}function Kn(t,e){for(var n=t.length;n--;)if(Aa(t[n][0],e))return n;return-1}function Wn(t,e,n,r){return $n(t,(function(t,i,o){e(r,t,n(t),o)})),r}function zn(t,e){return t&&yi(e,Es(e),t)}function Yn(t,e,n){"__proto__"==e&&ve?ve(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Hn(t,e){for(var r=-1,i=e.length,o=n(i),a=null==t;++r<i;)o[r]=a?void 0:ds(t,e[r]);return o}function qn(t,e,n){return t===t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Xn(t,e,n,r,i,o){var a,s=1&e,l=2&e,f=4&e;if(n&&(a=i?n(t,r,i,o):n(t)),void 0!==a)return a;if(!Ga(t))return t;var S=Pa(t);if(S){if(a=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&wt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!s)return mi(t,a)}else{var I=eo(t),N=I==p||I==d;if(ka(t))return ci(t,s);if(I==y||I==u||N&&!i){if(a=l||N?{}:ro(t),!s)return l?function(t,e){return yi(t,to(t),e)}(t,function(t,e){return t&&yi(e,_s(e),t)}(a,t)):function(t,e){return yi(t,$i(t),e)}(t,zn(a,t))}else{if(!Ut[I])return i?t:{};a=function(t,e,n){var r=t.constructor;switch(e){case w:return hi(t);case c:case h:return new r(+t);case x:return function(t,e){var n=e?hi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case T:case L:case C:case A:case M:case R:case"[object Uint8ClampedArray]":case O:case P:return fi(t,n);case g:return new r;case m:case _:return new r(t);case v:return function(t){var e=new t.constructor(t.source,rt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case E:return new r;case b:return i=t,Tn?dt(Tn.call(i)):{}}var i}(t,I,s)}}o||(o=new kn);var D=o.get(t);if(D)return D;o.set(t,a),qa(t)?t.forEach((function(r){a.add(Xn(r,e,n,r,t,o))})):Wa(t)&&t.forEach((function(r,i){a.set(i,Xn(r,e,n,i,t,o))}));var k=S?void 0:(f?l?zi:Wi:l?_s:Es)(t);return se(k||t,(function(r,i){k&&(r=t[i=r]),Gn(a,i,Xn(r,e,n,i,t,o))})),a}function Zn(t,e,n){var r=n.length;if(null==t)return!r;for(t=dt(t);r--;){var i=n[r],o=e[i],a=t[i];if(void 0===a&&!(i in t)||!o(a))return!1}return!0}function Jn(t,e,n){if("function"!=typeof t)throw new yt(o);return Eo((function(){t.apply(void 0,n)}),e)}function Qn(t,e,n,r){var i=-1,o=he,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=pe(e,Re(n))),r?(o=fe,a=!1):e.length>=200&&(o=Pe,a=!1,e=new Dn(e));t:for(;++i<s;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h===h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else o(e,h,r)||u.push(c)}return u}Cn.templateSettings={escape:B,evaluate:U,interpolate:G,variable:"",imports:{_:Cn}},Cn.prototype=Mn.prototype,Cn.prototype.constructor=Cn,Rn.prototype=An(Mn.prototype),Rn.prototype.constructor=Rn,On.prototype=An(Mn.prototype),On.prototype.constructor=On,Pn.prototype.clear=function(){this.__data__=mn?mn(null):{},this.size=0},Pn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Pn.prototype.get=function(t){var e=this.__data__;if(mn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return wt.call(e,t)?e[t]:void 0},Pn.prototype.has=function(t){var e=this.__data__;return mn?void 0!==e[t]:wt.call(e,t)},Pn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=mn&&void 0===e?"__lodash_hash_undefined__":e,this},In.prototype.clear=function(){this.__data__=[],this.size=0},In.prototype.delete=function(t){var e=this.__data__,n=Kn(e,t);return!(n<0)&&(n==e.length-1?e.pop():qt.call(e,n,1),--this.size,!0)},In.prototype.get=function(t){var e=this.__data__,n=Kn(e,t);return n<0?void 0:e[n][1]},In.prototype.has=function(t){return Kn(this.__data__,t)>-1},In.prototype.set=function(t,e){var n=this.__data__,r=Kn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Nn.prototype.clear=function(){this.size=0,this.__data__={hash:new Pn,map:new(fn||In),string:new Pn}},Nn.prototype.delete=function(t){var e=Zi(this,t).delete(t);return this.size-=e?1:0,e},Nn.prototype.get=function(t){return Zi(this,t).get(t)},Nn.prototype.has=function(t){return Zi(this,t).has(t)},Nn.prototype.set=function(t,e){var n=Zi(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Dn.prototype.add=Dn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Dn.prototype.has=function(t){return this.__data__.has(t)},kn.prototype.clear=function(){this.__data__=new In,this.size=0},kn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},kn.prototype.get=function(t){return this.__data__.get(t)},kn.prototype.has=function(t){return this.__data__.has(t)},kn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof In){var r=n.__data__;if(!fn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Nn(r)}return n.set(t,e),this.size=n.size,this};var $n=_i(sr),tr=_i(ur,!0);function er(t,e){var n=!0;return $n(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function nr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a===a&&!Za(a):n(a,s)))var s=a,u=o}return u}function rr(t,e){var n=[];return $n(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function ir(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=io),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?ir(s,e-1,n,r,i):de(i,s):r||(i[i.length]=s)}return i}var or=bi(),ar=bi(!0);function sr(t,e){return t&&or(t,e,Es)}function ur(t,e){return t&&ar(t,e,Es)}function lr(t,e){return ce(e,(function(e){return ja(t[e])}))}function cr(t,e){for(var n=0,r=(e=ai(e,t)).length;null!=t&&n<r;)t=t[To(e[n++])];return n&&n==r?t:void 0}function hr(t,e,n){var r=e(t);return Pa(t)?r:de(r,n(t))}function fr(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Qt&&Qt in dt(t)?function(t){var e=wt.call(t,Qt),n=t[Qt];try{t[Qt]=void 0;var r=!0}catch(o){}var i=Lt.call(t);r&&(e?t[Qt]=n:delete t[Qt]);return i}(t):function(t){return Lt.call(t)}(t)}function pr(t,e){return t>e}function dr(t,e){return null!=t&&wt.call(t,e)}function gr(t,e){return null!=t&&e in dt(t)}function mr(t,e,r){for(var i=r?fe:he,o=t[0].length,a=t.length,s=a,u=n(a),l=1/0,c=[];s--;){var h=t[s];s&&e&&(h=pe(h,Re(e))),l=an(h.length,l),u[s]=!r&&(e||o>=120&&h.length>=120)?new Dn(s&&h):void 0}h=t[0];var f=-1,p=u[0];t:for(;++f<o&&c.length<l;){var d=h[f],g=e?e(d):d;if(d=r||0!==d?d:0,!(p?Pe(p,g):i(c,g,r))){for(s=a;--s;){var m=u[s];if(!(m?Pe(m,g):i(t[s],g,r)))continue t}p&&p.push(g),c.push(d)}}return c}function yr(t,e,n){var r=null==(t=go(t,e=ai(e,t)))?t:t[To(Vo(e))];return null==r?void 0:oe(r,t,n)}function vr(t){return Ka(t)&&fr(t)==u}function Er(t,e,n,r,i){return t===e||(null==t||null==e||!Ka(t)&&!Ka(e)?t!==t&&e!==e:function(t,e,n,r,i,o){var a=Pa(t),s=Pa(e),p=a?l:eo(t),d=s?l:eo(e),S=(p=p==u?y:p)==y,T=(d=d==u?y:d)==y,L=p==d;if(L&&ka(t)){if(!ka(e))return!1;a=!0,S=!1}if(L&&!S)return o||(o=new kn),a||Ja(t)?Gi(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!o(new Nt(t),new Nt(e)));case c:case h:case m:return Aa(+t,+e);case f:return t.name==e.name&&t.message==e.message;case v:case _:return t==e+"";case g:var s=Be;case E:var u=1&r;if(s||(s=Ke),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var p=Gi(s(t),s(e),r,i,o,a);return a.delete(t),p;case b:if(Tn)return Tn.call(t)==Tn.call(e)}return!1}(t,e,p,n,r,i,o);if(!(1&n)){var C=S&&wt.call(t,"__wrapped__"),A=T&&wt.call(e,"__wrapped__");if(C||A){var M=C?t.value():t,R=A?e.value():e;return o||(o=new kn),i(M,R,n,r,o)}}if(!L)return!1;return o||(o=new kn),function(t,e,n,r,i,o){var a=1&n,s=Wi(t),u=s.length,l=Wi(e).length;if(u!=l&&!a)return!1;var c=u;for(;c--;){var h=s[c];if(!(a?h in e:wt.call(e,h)))return!1}var f=o.get(t),p=o.get(e);if(f&&p)return f==e&&p==t;var d=!0;o.set(t,e),o.set(e,t);var g=a;for(;++c<u;){h=s[c];var m=t[h],y=e[h];if(r)var v=a?r(y,m,h,e,t,o):r(m,y,h,t,e,o);if(!(void 0===v?m===y||i(m,y,n,r,o):v)){d=!1;break}g||(g="constructor"==h)}if(d&&!g){var E=t.constructor,_=e.constructor;E==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof E&&E instanceof E&&"function"==typeof _&&_ instanceof _||(d=!1)}return o.delete(t),o.delete(e),d}(t,e,n,r,i,o)}(t,e,n,r,Er,i))}function _r(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=dt(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],l=t[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in t))return!1}else{var h=new kn;if(r)var f=r(l,c,u,t,e,h);if(!(void 0===f?Er(c,l,3,r,h):f))return!1}}return!0}function br(t){return!(!Ga(t)||(e=t,Tt&&Tt in e))&&(ja(t)?Mt:at).test(Lo(t));var e}function Sr(t){return"function"==typeof t?t:null==t?zs:"object"==typeof t?Pa(t)?Ar(t[0],t[1]):Cr(t):tu(t)}function wr(t){if(!co(t))return rn(t);var e=[];for(var n in dt(t))wt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function xr(t){if(!Ga(t))return function(t){var e=[];if(null!=t)for(var n in dt(t))e.push(n);return e}(t);var e=co(t),n=[];for(var r in t)("constructor"!=r||!e&&wt.call(t,r))&&n.push(r);return n}function Tr(t,e){return t<e}function Lr(t,e){var r=-1,i=Na(t)?n(t.length):[];return $n(t,(function(t,n,o){i[++r]=e(t,n,o)})),i}function Cr(t){var e=Ji(t);return 1==e.length&&e[0][2]?fo(e[0][0],e[0][1]):function(n){return n===t||_r(n,t,e)}}function Ar(t,e){return so(t)&&ho(e)?fo(To(t),e):function(n){var r=ds(n,t);return void 0===r&&r===e?gs(n,t):Er(e,r,3)}}function Mr(t,e,n,r,i){t!==e&&or(e,(function(o,a){if(i||(i=new kn),Ga(o))!function(t,e,n,r,i,o,a){var s=yo(t,n),u=yo(e,n),l=a.get(u);if(l)return void Un(t,n,l);var c=o?o(s,u,n+"",t,e,a):void 0,h=void 0===c;if(h){var f=Pa(u),p=!f&&ka(u),d=!f&&!p&&Ja(u);c=u,f||p||d?Pa(s)?c=s:Da(s)?c=mi(s):p?(h=!1,c=ci(u,!0)):d?(h=!1,c=fi(u,!0)):c=[]:Ya(u)||Oa(u)?(c=s,Oa(s)?c=os(s):Ga(s)&&!ja(s)||(c=ro(u))):h=!1}h&&(a.set(u,c),i(c,u,r,o,a),a.delete(u));Un(t,n,c)}(t,e,a,n,Mr,r,i);else{var s=r?r(yo(t,a),o,a+"",t,e,i):void 0;void 0===s&&(s=o),Un(t,a,s)}}),_s)}function Rr(t,e){var n=t.length;if(n)return oo(e+=e<0?n:0,n)?t[e]:void 0}function Or(t,e,n){e=e.length?pe(e,(function(t){return Pa(t)?function(e){return cr(e,1===t.length?t[0]:t)}:t})):[zs];var r=-1;return e=pe(e,Re(Xi())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Lr(t,(function(t,n,i){return{criteria:pe(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;for(;++r<a;){var u=pi(i[r],o[r]);if(u){if(r>=s)return u;var l=n[r];return u*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)}))}function Pr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=cr(t,a);n(s,a)&&Br(o,ai(a,t),s)}return o}function Ir(t,e,n,r){var i=r?Se:be,o=-1,a=e.length,s=t;for(t===e&&(e=mi(e)),n&&(s=pe(t,Re(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&qt.call(s,u,1),qt.call(t,u,1);return t}function Nr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;oo(i)?qt.call(t,i,1):Qr(t,i)}}return t}function Dr(t,e){return t+Qe(ln()*(e-t+1))}function kr(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=Qe(e/2))&&(t+=t)}while(e);return n}function Fr(t,e){return _o(po(t,e,zs),t+"")}function Vr(t){return Vn(As(t))}function jr(t,e){var n=As(t);return wo(n,qn(e,0,n.length))}function Br(t,e,n,r){if(!Ga(t))return t;for(var i=-1,o=(e=ai(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u=To(e[i]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=a){var c=s[u];void 0===(l=r?r(c,u,s):void 0)&&(l=Ga(c)?c:oo(e[i+1])?[]:{})}Gn(s,u,l),s=s[u]}return t}var Ur=yn?function(t,e){return yn.set(t,e),t}:zs,Gr=ve?function(t,e){return ve(t,"toString",{configurable:!0,enumerable:!1,value:Gs(e),writable:!0})}:zs;function Kr(t){return wo(As(t))}function Wr(t,e,r){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=n(o);++i<o;)a[i]=t[i+e];return a}function zr(t,e){var n;return $n(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function Yr(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Za(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Hr(t,e,zs,n)}function Hr(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!==e,s=null===e,u=Za(e),l=void 0===e;i<o;){var c=Qe((i+o)/2),h=n(t[c]),f=void 0!==h,p=null===h,d=h===h,g=Za(h);if(a)var m=r||d;else m=l?d&&(r||f):s?d&&f&&(r||!p):u?d&&f&&!p&&(r||!g):!p&&!g&&(r?h<=e:h<e);m?i=c+1:o=c}return an(o,4294967294)}function qr(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Aa(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Xr(t){return"number"==typeof t?t:Za(t)?NaN:+t}function Zr(t){if("string"==typeof t)return t;if(Pa(t))return pe(t,Zr)+"";if(Za(t))return Ln?Ln.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Jr(t,e,n){var r=-1,i=he,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=fe;else if(o>=200){var l=e?null:ki(t);if(l)return Ke(l);a=!1,i=Pe,u=new Dn}else u=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(c)}else i(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s}function Qr(t,e){return null==(t=go(t,e=ai(e,t)))||delete t[To(Vo(e))]}function $r(t,e,n,r){return Br(t,e,n(cr(t,e)),r)}function ti(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Wr(t,r?0:o,r?o+1:i):Wr(t,r?o+1:0,r?i:o)}function ei(t,e){var n=t;return n instanceof On&&(n=n.value()),ge(e,(function(t,e){return e.func.apply(e.thisArg,de([t],e.args))}),n)}function ni(t,e,r){var i=t.length;if(i<2)return i?Jr(t[0]):[];for(var o=-1,a=n(i);++o<i;)for(var s=t[o],u=-1;++u<i;)u!=o&&(a[o]=Qn(a[o]||s,t[u],e,r));return Jr(ir(a,1),e,r)}function ri(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a}function ii(t){return Da(t)?t:[]}function oi(t){return"function"==typeof t?t:zs}function ai(t,e){return Pa(t)?t:so(t,e)?[t]:xo(as(t))}var si=Fr;function ui(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:Wr(t,e,n)}var li=Le||function(t){return Ht.clearTimeout(t)};function ci(t,e){if(e)return t.slice();var n=t.length,r=kt?kt(n):new t.constructor(n);return t.copy(r),r}function hi(t){var e=new t.constructor(t.byteLength);return new Nt(e).set(new Nt(t)),e}function fi(t,e){var n=e?hi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function pi(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t===t,o=Za(t),a=void 0!==e,s=null===e,u=e===e,l=Za(e);if(!s&&!l&&!o&&t>e||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function di(t,e,r,i){for(var o=-1,a=t.length,s=r.length,u=-1,l=e.length,c=on(a-s,0),h=n(l+c),f=!i;++u<l;)h[u]=e[u];for(;++o<s;)(f||o<a)&&(h[r[o]]=t[o]);for(;c--;)h[u++]=t[o++];return h}function gi(t,e,r,i){for(var o=-1,a=t.length,s=-1,u=r.length,l=-1,c=e.length,h=on(a-u,0),f=n(h+c),p=!i;++o<h;)f[o]=t[o];for(var d=o;++l<c;)f[d+l]=e[l];for(;++s<u;)(p||o<a)&&(f[d+r[s]]=t[o++]);return f}function mi(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function yi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?Yn(n,s,u):Gn(n,s,u)}return n}function vi(t,e){return function(n,r){var i=Pa(n)?ae:Wn,o=e?e():{};return i(n,t,Xi(r,2),o)}}function Ei(t){return Fr((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&ao(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=dt(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))}function _i(t,e){return function(n,r){if(null==n)return n;if(!Na(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=dt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function bi(t){return function(e,n,r){for(var i=-1,o=dt(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Si(t){return function(e){var n=je(e=as(e))?Ye(e):void 0,r=n?n[0]:e.charAt(0),i=n?ui(n,1).join(""):e.slice(1);return r[t]()+i}}function wi(t){return function(e){return ge(js(Os(e).replace(Pt,"")),t,"")}}function xi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=An(t.prototype),r=t.apply(n,e);return Ga(r)?r:n}}function Ti(t){return function(e,n,r){var i=dt(e);if(!Na(e)){var o=Xi(n,3);e=Es(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}function Li(t){return Ki((function(e){var n=e.length,r=n,i=Rn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new yt(o);if(i&&!s&&"wrapper"==Hi(a))var s=new Rn([],!0)}for(r=s?r:n;++r<n;){var u=Hi(a=e[r]),l="wrapper"==u?Yi(a):void 0;s=l&&uo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?s[Hi(l[0])].apply(s,l[3]):1==a.length&&uo(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&Pa(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Ci(t,e,r,i,o,a,s,u,l,c){var h=128&e,f=1&e,p=2&e,d=24&e,g=512&e,m=p?void 0:xi(t);return function y(){for(var v=arguments.length,E=n(v),_=v;_--;)E[_]=arguments[_];if(d)var b=qi(y),S=De(E,b);if(i&&(E=di(E,i,o,d)),a&&(E=gi(E,a,s,d)),v-=S,d&&v<c){var w=Ge(E,b);return Ni(t,e,Ci,y.placeholder,r,E,w,u,l,c-v)}var x=f?r:this,T=p?x[t]:t;return v=E.length,u?E=mo(E,u):g&&v>1&&E.reverse(),h&&l<v&&(E.length=l),this&&this!==Ht&&this instanceof y&&(T=m||xi(T)),T.apply(x,E)}}function Ai(t,e){return function(n,r){return function(t,e,n,r){return sr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Mi(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Zr(n),r=Zr(r)):(n=Xr(n),r=Xr(r)),i=t(n,r)}return i}}function Ri(t){return Ki((function(e){return e=pe(e,Re(Xi())),Fr((function(n){var r=this;return t(e,(function(t){return oe(t,r,n)}))}))}))}function Oi(t,e){var n=(e=void 0===e?" ":Zr(e)).length;if(n<2)return n?kr(e,t):e;var r=kr(e,Je(t/ze(e)));return je(e)?ui(Ye(r),0,t).join(""):r.slice(0,t)}function Pi(t){return function(e,r,i){return i&&"number"!=typeof i&&ao(e,r,i)&&(r=i=void 0),e=es(e),void 0===r?(r=e,e=0):r=es(r),function(t,e,r,i){for(var o=-1,a=on(Je((e-t)/(r||1)),0),s=n(a);a--;)s[i?a:++o]=t,t+=r;return s}(e,r,i=void 0===i?e<r?1:-1:es(i),t)}}function Ii(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=is(e),n=is(n)),t(e,n)}}function Ni(t,e,n,r,i,o,a,s,u,l){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var h=[t,e,i,c?o:void 0,c?a:void 0,c?void 0:o,c?void 0:a,s,u,l],f=n.apply(void 0,h);return uo(t)&&vo(f,h),f.placeholder=r,bo(f,t,e)}function Di(t){var e=pt[t];return function(t,n){if(t=is(t),(n=null==n?0:an(ns(n),292))&&en(t)){var r=(as(t)+"e").split("e");return+((r=(as(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var ki=dn&&1/Ke(new dn([,-0]))[1]==1/0?function(t){return new dn(t)}:Zs;function Fi(t){return function(e){var n=eo(e);return n==g?Be(e):n==E?We(e):function(t,e){return pe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Vi(t,e,r,i,s,u,l,c){var h=2&e;if(!h&&"function"!=typeof t)throw new yt(o);var f=i?i.length:0;if(f||(e&=-97,i=s=void 0),l=void 0===l?l:on(ns(l),0),c=void 0===c?c:ns(c),f-=s?s.length:0,64&e){var p=i,d=s;i=s=void 0}var g=h?void 0:Yi(t),m=[t,e,r,i,s,p,d,u,l,c];if(g&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?di(l,u,e[4]):u,t[4]=l?Ge(t[3],a):e[4]}(u=e[5])&&(l=t[5],t[5]=l?gi(l,u,e[6]):u,t[6]=l?Ge(t[5],a):e[6]);(u=e[7])&&(t[7]=u);128&r&&(t[8]=null==t[8]?e[8]:an(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(m,g),t=m[0],e=m[1],r=m[2],i=m[3],s=m[4],!(c=m[9]=void 0===m[9]?h?0:t.length:on(m[9]-f,0))&&24&e&&(e&=-25),e&&1!=e)y=8==e||16==e?function(t,e,r){var i=xi(t);return function o(){for(var a=arguments.length,s=n(a),u=a,l=qi(o);u--;)s[u]=arguments[u];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:Ge(s,l);if((a-=c.length)<r)return Ni(t,e,Ci,o.placeholder,void 0,s,c,void 0,void 0,r-a);var h=this&&this!==Ht&&this instanceof o?i:t;return oe(h,this,s)}}(t,e,c):32!=e&&33!=e||s.length?Ci.apply(void 0,m):function(t,e,r,i){var o=1&e,a=xi(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=i.length,h=n(c+u),f=this&&this!==Ht&&this instanceof e?a:t;++l<c;)h[l]=i[l];for(;u--;)h[l++]=arguments[++s];return oe(f,o?r:this,h)}}(t,e,r,i);else var y=function(t,e,n){var r=1&e,i=xi(t);return function e(){var o=this&&this!==Ht&&this instanceof e?i:t;return o.apply(r?n:this,arguments)}}(t,e,r);return bo((g?Ur:vo)(y,m),t,e)}function ji(t,e,n,r){return void 0===t||Aa(t,_t[n])&&!wt.call(r,n)?e:t}function Bi(t,e,n,r,i,o){return Ga(t)&&Ga(e)&&(o.set(e,t),Mr(t,e,void 0,Bi,o),o.delete(e)),t}function Ui(t){return Ya(t)?void 0:t}function Gi(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t),c=o.get(e);if(l&&c)return l==e&&c==t;var h=-1,f=!0,p=2&n?new Dn:void 0;for(o.set(t,e),o.set(e,t);++h<s;){var d=t[h],g=e[h];if(r)var m=a?r(g,d,h,e,t,o):r(d,g,h,t,e,o);if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!ye(e,(function(t,e){if(!Pe(p,e)&&(d===t||i(d,t,n,r,o)))return p.push(e)}))){f=!1;break}}else if(d!==g&&!i(d,g,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Ki(t){return _o(po(t,void 0,Io),t+"")}function Wi(t){return hr(t,Es,$i)}function zi(t){return hr(t,_s,to)}var Yi=yn?function(t){return yn.get(t)}:Zs;function Hi(t){for(var e=t.name+"",n=vn[e],r=wt.call(vn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function qi(t){return(wt.call(Cn,"placeholder")?Cn:t).placeholder}function Xi(){var t=Cn.iteratee||Ys;return t=t===Ys?Sr:t,arguments.length?t(arguments[0],arguments[1]):t}function Zi(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ji(t){for(var e=Es(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ho(i)]}return e}function Qi(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return br(n)?n:void 0}var $i=$e?function(t){return null==t?[]:(t=dt(t),ce($e(t),(function(e){return Yt.call(t,e)})))}:ru,to=$e?function(t){for(var e=[];t;)de(e,$i(t)),t=Gt(t);return e}:ru,eo=fr;function no(t,e,n){for(var r=-1,i=(e=ai(e,t)).length,o=!1;++r<i;){var a=To(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ua(i)&&oo(a,i)&&(Pa(t)||Oa(t))}function ro(t){return"function"!=typeof t.constructor||co(t)?{}:An(Gt(t))}function io(t){return Pa(t)||Oa(t)||!!(Xt&&t&&t[Xt])}function oo(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ut.test(t))&&t>-1&&t%1==0&&t<e}function ao(t,e,n){if(!Ga(n))return!1;var r=typeof e;return!!("number"==r?Na(n)&&oo(e,n.length):"string"==r&&e in n)&&Aa(n[e],t)}function so(t,e){if(Pa(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Za(t))||(W.test(t)||!K.test(t)||null!=e&&t in dt(e))}function uo(t){var e=Hi(t),n=Cn[e];if("function"!=typeof n||!(e in On.prototype))return!1;if(t===n)return!0;var r=Yi(n);return!!r&&t===r[0]}(hn&&eo(new hn(new ArrayBuffer(1)))!=x||fn&&eo(new fn)!=g||pn&&"[object Promise]"!=eo(pn.resolve())||dn&&eo(new dn)!=E||gn&&eo(new gn)!=S)&&(eo=function(t){var e=fr(t),n=e==y?t.constructor:void 0,r=n?Lo(n):"";if(r)switch(r){case En:return x;case _n:return g;case bn:return"[object Promise]";case Sn:return E;case wn:return S}return e});var lo=bt?ja:iu;function co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||_t)}function ho(t){return t===t&&!Ga(t)}function fo(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in dt(n)))}}function po(t,e,r){return e=on(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=on(i.length-e,0),s=n(a);++o<a;)s[o]=i[e+o];o=-1;for(var u=n(e+1);++o<e;)u[o]=i[o];return u[e]=r(s),oe(t,this,u)}}function go(t,e){return e.length<2?t:cr(t,Wr(e,0,-1))}function mo(t,e){for(var n=t.length,r=an(e.length,n),i=mi(t);r--;){var o=e[r];t[r]=oo(o,n)?i[o]:void 0}return t}function yo(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var vo=So(Ur),Eo=Ze||function(t,e){return Ht.setTimeout(t,e)},_o=So(Gr);function bo(t,e,n){var r=e+"";return _o(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(J,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return se(s,(function(n){var r="_."+n[0];e&n[1]&&!he(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(Q);return e?e[1].split($):[]}(r),n)))}function So(t){var e=0,n=0;return function(){var r=sn(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function wo(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=Dr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}var xo=function(t){var e=Sa(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(z,(function(t,n,r,i){e.push(r?i.replace(et,"$1"):n||t)})),e}));function To(t){if("string"==typeof t||Za(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Lo(t){if(null!=t){try{return St.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Co(t){if(t instanceof On)return t.clone();var e=new Rn(t.__wrapped__,t.__chain__);return e.__actions__=mi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ao=Fr((function(t,e){return Da(t)?Qn(t,ir(e,1,Da,!0)):[]})),Mo=Fr((function(t,e){var n=Vo(e);return Da(n)&&(n=void 0),Da(t)?Qn(t,ir(e,1,Da,!0),Xi(n,2)):[]})),Ro=Fr((function(t,e){var n=Vo(e);return Da(n)&&(n=void 0),Da(t)?Qn(t,ir(e,1,Da,!0),void 0,n):[]}));function Oo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ns(n);return i<0&&(i=on(r+i,0)),_e(t,Xi(e,3),i)}function Po(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=ns(n),i=n<0?on(r+i,0):an(i,r-1)),_e(t,Xi(e,3),i,!0)}function Io(t){return(null==t?0:t.length)?ir(t,1):[]}function No(t){return t&&t.length?t[0]:void 0}var Do=Fr((function(t){var e=pe(t,ii);return e.length&&e[0]===t[0]?mr(e):[]})),ko=Fr((function(t){var e=Vo(t),n=pe(t,ii);return e===Vo(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?mr(n,Xi(e,2)):[]})),Fo=Fr((function(t){var e=Vo(t),n=pe(t,ii);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?mr(n,void 0,e):[]}));function Vo(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var jo=Fr(Bo);function Bo(t,e){return t&&t.length&&e&&e.length?Ir(t,e):t}var Uo=Ki((function(t,e){var n=null==t?0:t.length,r=Hn(t,e);return Nr(t,pe(e,(function(t){return oo(t,n)?+t:t})).sort(pi)),r}));function Go(t){return null==t?t:cn.call(t)}var Ko=Fr((function(t){return Jr(ir(t,1,Da,!0))})),Wo=Fr((function(t){var e=Vo(t);return Da(e)&&(e=void 0),Jr(ir(t,1,Da,!0),Xi(e,2))})),zo=Fr((function(t){var e=Vo(t);return e="function"==typeof e?e:void 0,Jr(ir(t,1,Da,!0),void 0,e)}));function Yo(t){if(!t||!t.length)return[];var e=0;return t=ce(t,(function(t){if(Da(t))return e=on(t.length,e),!0})),Me(e,(function(e){return pe(t,Te(e))}))}function Ho(t,e){if(!t||!t.length)return[];var n=Yo(t);return null==e?n:pe(n,(function(t){return oe(e,void 0,t)}))}var qo=Fr((function(t,e){return Da(t)?Qn(t,e):[]})),Xo=Fr((function(t){return ni(ce(t,Da))})),Zo=Fr((function(t){var e=Vo(t);return Da(e)&&(e=void 0),ni(ce(t,Da),Xi(e,2))})),Jo=Fr((function(t){var e=Vo(t);return e="function"==typeof e?e:void 0,ni(ce(t,Da),void 0,e)})),Qo=Fr(Yo);var $o=Fr((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Ho(t,n)}));function ta(t){var e=Cn(t);return e.__chain__=!0,e}function ea(t,e){return e(t)}var na=Ki((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Hn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof On&&oo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ea,args:[i],thisArg:void 0}),new Rn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)}));var ra=vi((function(t,e,n){wt.call(t,n)?++t[n]:Yn(t,n,1)}));var ia=Ti(Oo),oa=Ti(Po);function aa(t,e){return(Pa(t)?se:$n)(t,Xi(e,3))}function sa(t,e){return(Pa(t)?ue:tr)(t,Xi(e,3))}var ua=vi((function(t,e,n){wt.call(t,n)?t[n].push(e):Yn(t,n,[e])}));var la=Fr((function(t,e,r){var i=-1,o="function"==typeof e,a=Na(t)?n(t.length):[];return $n(t,(function(t){a[++i]=o?oe(e,t,r):yr(t,e,r)})),a})),ca=vi((function(t,e,n){Yn(t,n,e)}));function ha(t,e){return(Pa(t)?pe:Lr)(t,Xi(e,3))}var fa=vi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var pa=Fr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ao(t,e[0],e[1])?e=[]:n>2&&ao(e[0],e[1],e[2])&&(e=[e[0]]),Or(t,ir(e,1),[])})),da=Xe||function(){return Ht.Date.now()};function ga(t,e,n){return e=n?void 0:e,Vi(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function ma(t,e){var n;if("function"!=typeof e)throw new yt(o);return t=ns(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var ya=Fr((function(t,e,n){var r=1;if(n.length){var i=Ge(n,qi(ya));r|=32}return Vi(t,r,e,n,i)})),va=Fr((function(t,e,n){var r=3;if(n.length){var i=Ge(n,qi(va));r|=32}return Vi(e,r,t,n,i)}));function Ea(t,e,n){var r,i,a,s,u,l,c=0,h=!1,f=!1,p=!0;if("function"!=typeof t)throw new yt(o);function d(e){var n=r,o=i;return r=i=void 0,c=e,s=t.apply(o,n)}function g(t){return c=t,u=Eo(y,e),h?d(t):s}function m(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-c>=a}function y(){var t=da();if(m(t))return v(t);u=Eo(y,function(t){var n=e-(t-l);return f?an(n,a-(t-c)):n}(t))}function v(t){return u=void 0,p&&r?d(t):(r=i=void 0,s)}function E(){var t=da(),n=m(t);if(r=arguments,i=this,l=t,n){if(void 0===u)return g(l);if(f)return li(u),u=Eo(y,e),d(l)}return void 0===u&&(u=Eo(y,e)),s}return e=is(e)||0,Ga(n)&&(h=!!n.leading,a=(f="maxWait"in n)?on(is(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),E.cancel=function(){void 0!==u&&li(u),c=0,r=l=i=u=void 0},E.flush=function(){return void 0===u?s:v(da())},E}var _a=Fr((function(t,e){return Jn(t,1,e)})),ba=Fr((function(t,e,n){return Jn(t,is(e)||0,n)}));function Sa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new yt(o);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Sa.Cache||Nn),n}function wa(t){if("function"!=typeof t)throw new yt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Sa.Cache=Nn;var xa=si((function(t,e){var n=(e=1==e.length&&Pa(e[0])?pe(e[0],Re(Xi())):pe(ir(e,1),Re(Xi()))).length;return Fr((function(r){for(var i=-1,o=an(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return oe(t,this,r)}))})),Ta=Fr((function(t,e){return Vi(t,32,void 0,e,Ge(e,qi(Ta)))})),La=Fr((function(t,e){return Vi(t,64,void 0,e,Ge(e,qi(La)))})),Ca=Ki((function(t,e){return Vi(t,256,void 0,void 0,void 0,e)}));function Aa(t,e){return t===e||t!==t&&e!==e}var Ma=Ii(pr),Ra=Ii((function(t,e){return t>=e})),Oa=vr(function(){return arguments}())?vr:function(t){return Ka(t)&&wt.call(t,"callee")&&!Yt.call(t,"callee")},Pa=n.isArray,Ia=$t?Re($t):function(t){return Ka(t)&&fr(t)==w};function Na(t){return null!=t&&Ua(t.length)&&!ja(t)}function Da(t){return Ka(t)&&Na(t)}var ka=tn||iu,Fa=te?Re(te):function(t){return Ka(t)&&fr(t)==h};function Va(t){if(!Ka(t))return!1;var e=fr(t);return e==f||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Ya(t)}function ja(t){if(!Ga(t))return!1;var e=fr(t);return e==p||e==d||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ba(t){return"number"==typeof t&&t==ns(t)}function Ua(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Ga(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ka(t){return null!=t&&"object"==typeof t}var Wa=ee?Re(ee):function(t){return Ka(t)&&eo(t)==g};function za(t){return"number"==typeof t||Ka(t)&&fr(t)==m}function Ya(t){if(!Ka(t)||fr(t)!=y)return!1;var e=Gt(t);if(null===e)return!0;var n=wt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&St.call(n)==Ct}var Ha=ne?Re(ne):function(t){return Ka(t)&&fr(t)==v};var qa=re?Re(re):function(t){return Ka(t)&&eo(t)==E};function Xa(t){return"string"==typeof t||!Pa(t)&&Ka(t)&&fr(t)==_}function Za(t){return"symbol"==typeof t||Ka(t)&&fr(t)==b}var Ja=ie?Re(ie):function(t){return Ka(t)&&Ua(t.length)&&!!Bt[fr(t)]};var Qa=Ii(Tr),$a=Ii((function(t,e){return t<=e}));function ts(t){if(!t)return[];if(Na(t))return Xa(t)?Ye(t):mi(t);if(Jt&&t[Jt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Jt]());var e=eo(t);return(e==g?Be:e==E?Ke:As)(t)}function es(t){return t?(t=is(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}function ns(t){var e=es(t),n=e%1;return e===e?n?e-n:e:0}function rs(t){return t?qn(ns(t),0,4294967295):0}function is(t){if("number"==typeof t)return t;if(Za(t))return NaN;if(Ga(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ga(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(q,"");var n=ot.test(t);return n||st.test(t)?Wt(t.slice(2),n?2:8):it.test(t)?NaN:+t}function os(t){return yi(t,_s(t))}function as(t){return null==t?"":Zr(t)}var ss=Ei((function(t,e){if(co(e)||Na(e))yi(e,Es(e),t);else for(var n in e)wt.call(e,n)&&Gn(t,n,e[n])})),us=Ei((function(t,e){yi(e,_s(e),t)})),ls=Ei((function(t,e,n,r){yi(e,_s(e),t,r)})),cs=Ei((function(t,e,n,r){yi(e,Es(e),t,r)})),hs=Ki(Hn);var fs=Fr((function(t,e){t=dt(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&ao(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=_s(o),s=-1,u=a.length;++s<u;){var l=a[s],c=t[l];(void 0===c||Aa(c,_t[l])&&!wt.call(t,l))&&(t[l]=o[l])}return t})),ps=Fr((function(t){return t.push(void 0,Bi),oe(Ss,void 0,t)}));function ds(t,e,n){var r=null==t?void 0:cr(t,e);return void 0===r?n:r}function gs(t,e){return null!=t&&no(t,e,gr)}var ms=Ai((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Lt.call(e)),t[e]=n}),Gs(zs)),ys=Ai((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Lt.call(e)),wt.call(t,e)?t[e].push(n):t[e]=[n]}),Xi),vs=Fr(yr);function Es(t){return Na(t)?Fn(t):wr(t)}function _s(t){return Na(t)?Fn(t,!0):xr(t)}var bs=Ei((function(t,e,n){Mr(t,e,n)})),Ss=Ei((function(t,e,n,r){Mr(t,e,n,r)})),ws=Ki((function(t,e){var n={};if(null==t)return n;var r=!1;e=pe(e,(function(e){return e=ai(e,t),r||(r=e.length>1),e})),yi(t,zi(t),n),r&&(n=Xn(n,7,Ui));for(var i=e.length;i--;)Qr(n,e[i]);return n}));var xs=Ki((function(t,e){return null==t?{}:function(t,e){return Pr(t,e,(function(e,n){return gs(t,n)}))}(t,e)}));function Ts(t,e){if(null==t)return{};var n=pe(zi(t),(function(t){return[t]}));return e=Xi(e),Pr(t,n,(function(t,n){return e(t,n[0])}))}var Ls=Fi(Es),Cs=Fi(_s);function As(t){return null==t?[]:Oe(t,Es(t))}var Ms=wi((function(t,e,n){return e=e.toLowerCase(),t+(n?Rs(e):e)}));function Rs(t){return Vs(as(t).toLowerCase())}function Os(t){return(t=as(t))&&t.replace(lt,ke).replace(It,"")}var Ps=wi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Is=wi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ns=Si("toLowerCase");var Ds=wi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var ks=wi((function(t,e,n){return t+(n?" ":"")+Vs(e)}));var Fs=wi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Vs=Si("toUpperCase");function js(t,e,n){return t=as(t),void 0===(e=n?void 0:e)?function(t){return Ft.test(t)}(t)?function(t){return t.match(Dt)||[]}(t):function(t){return t.match(tt)||[]}(t):t.match(e)||[]}var Bs=Fr((function(t,e){try{return oe(t,void 0,e)}catch(n){return Va(n)?n:new i(n)}})),Us=Ki((function(t,e){return se(e,(function(e){e=To(e),Yn(t,e,ya(t[e],t))})),t}));function Gs(t){return function(){return t}}var Ks=Li(),Ws=Li(!0);function zs(t){return t}function Ys(t){return Sr("function"==typeof t?t:Xn(t,1))}var Hs=Fr((function(t,e){return function(n){return yr(n,t,e)}})),qs=Fr((function(t,e){return function(n){return yr(t,n,e)}}));function Xs(t,e,n){var r=Es(e),i=lr(e,r);null!=n||Ga(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=lr(e,Es(e)));var o=!(Ga(n)&&"chain"in n)||!!n.chain,a=ja(t);return se(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=mi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,de([this.value()],arguments))})})),t}function Zs(){}var Js=Ri(pe),Qs=Ri(le),$s=Ri(ye);function tu(t){return so(t)?Te(To(t)):function(t){return function(e){return cr(e,t)}}(t)}var eu=Pi(),nu=Pi(!0);function ru(){return[]}function iu(){return!1}var ou=Mi((function(t,e){return t+e}),0),au=Di("ceil"),su=Mi((function(t,e){return t/e}),1),uu=Di("floor");var lu=Mi((function(t,e){return t*e}),1),cu=Di("round"),hu=Mi((function(t,e){return t-e}),0);return Cn.after=function(t,e){if("function"!=typeof e)throw new yt(o);return t=ns(t),function(){if(--t<1)return e.apply(this,arguments)}},Cn.ary=ga,Cn.assign=ss,Cn.assignIn=us,Cn.assignInWith=ls,Cn.assignWith=cs,Cn.at=hs,Cn.before=ma,Cn.bind=ya,Cn.bindAll=Us,Cn.bindKey=va,Cn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Pa(t)?t:[t]},Cn.chain=ta,Cn.chunk=function(t,e,r){e=(r?ao(t,e,r):void 0===e)?1:on(ns(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,a=0,s=n(Je(i/e));o<i;)s[a++]=Wr(t,o,o+=e);return s},Cn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Cn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return de(Pa(r)?mi(r):[r],ir(e,1))},Cn.cond=function(t){var e=null==t?0:t.length,n=Xi();return t=e?pe(t,(function(t){if("function"!=typeof t[1])throw new yt(o);return[n(t[0]),t[1]]})):[],Fr((function(n){for(var r=-1;++r<e;){var i=t[r];if(oe(i[0],this,n))return oe(i[1],this,n)}}))},Cn.conforms=function(t){return function(t){var e=Es(t);return function(n){return Zn(n,t,e)}}(Xn(t,1))},Cn.constant=Gs,Cn.countBy=ra,Cn.create=function(t,e){var n=An(t);return null==e?n:zn(n,e)},Cn.curry=function t(e,n,r){var i=Vi(e,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},Cn.curryRight=function t(e,n,r){var i=Vi(e,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},Cn.debounce=Ea,Cn.defaults=fs,Cn.defaultsDeep=ps,Cn.defer=_a,Cn.delay=ba,Cn.difference=Ao,Cn.differenceBy=Mo,Cn.differenceWith=Ro,Cn.drop=function(t,e,n){var r=null==t?0:t.length;return r?Wr(t,(e=n||void 0===e?1:ns(e))<0?0:e,r):[]},Cn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Wr(t,0,(e=r-(e=n||void 0===e?1:ns(e)))<0?0:e):[]},Cn.dropRightWhile=function(t,e){return t&&t.length?ti(t,Xi(e,3),!0,!0):[]},Cn.dropWhile=function(t,e){return t&&t.length?ti(t,Xi(e,3),!0):[]},Cn.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ao(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=ns(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:ns(r))<0&&(r+=i),r=n>r?0:rs(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Cn.filter=function(t,e){return(Pa(t)?ce:rr)(t,Xi(e,3))},Cn.flatMap=function(t,e){return ir(ha(t,e),1)},Cn.flatMapDeep=function(t,e){return ir(ha(t,e),1/0)},Cn.flatMapDepth=function(t,e,n){return n=void 0===n?1:ns(n),ir(ha(t,e),n)},Cn.flatten=Io,Cn.flattenDeep=function(t){return(null==t?0:t.length)?ir(t,1/0):[]},Cn.flattenDepth=function(t,e){return(null==t?0:t.length)?ir(t,e=void 0===e?1:ns(e)):[]},Cn.flip=function(t){return Vi(t,512)},Cn.flow=Ks,Cn.flowRight=Ws,Cn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Cn.functions=function(t){return null==t?[]:lr(t,Es(t))},Cn.functionsIn=function(t){return null==t?[]:lr(t,_s(t))},Cn.groupBy=ua,Cn.initial=function(t){return(null==t?0:t.length)?Wr(t,0,-1):[]},Cn.intersection=Do,Cn.intersectionBy=ko,Cn.intersectionWith=Fo,Cn.invert=ms,Cn.invertBy=ys,Cn.invokeMap=la,Cn.iteratee=Ys,Cn.keyBy=ca,Cn.keys=Es,Cn.keysIn=_s,Cn.map=ha,Cn.mapKeys=function(t,e){var n={};return e=Xi(e,3),sr(t,(function(t,r,i){Yn(n,e(t,r,i),t)})),n},Cn.mapValues=function(t,e){var n={};return e=Xi(e,3),sr(t,(function(t,r,i){Yn(n,r,e(t,r,i))})),n},Cn.matches=function(t){return Cr(Xn(t,1))},Cn.matchesProperty=function(t,e){return Ar(t,Xn(e,1))},Cn.memoize=Sa,Cn.merge=bs,Cn.mergeWith=Ss,Cn.method=Hs,Cn.methodOf=qs,Cn.mixin=Xs,Cn.negate=wa,Cn.nthArg=function(t){return t=ns(t),Fr((function(e){return Rr(e,t)}))},Cn.omit=ws,Cn.omitBy=function(t,e){return Ts(t,wa(Xi(e)))},Cn.once=function(t){return ma(2,t)},Cn.orderBy=function(t,e,n,r){return null==t?[]:(Pa(e)||(e=null==e?[]:[e]),Pa(n=r?void 0:n)||(n=null==n?[]:[n]),Or(t,e,n))},Cn.over=Js,Cn.overArgs=xa,Cn.overEvery=Qs,Cn.overSome=$s,Cn.partial=Ta,Cn.partialRight=La,Cn.partition=fa,Cn.pick=xs,Cn.pickBy=Ts,Cn.property=tu,Cn.propertyOf=function(t){return function(e){return null==t?void 0:cr(t,e)}},Cn.pull=jo,Cn.pullAll=Bo,Cn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ir(t,e,Xi(n,2)):t},Cn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ir(t,e,void 0,n):t},Cn.pullAt=Uo,Cn.range=eu,Cn.rangeRight=nu,Cn.rearg=Ca,Cn.reject=function(t,e){return(Pa(t)?ce:rr)(t,wa(Xi(e,3)))},Cn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Xi(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Nr(t,i),n},Cn.rest=function(t,e){if("function"!=typeof t)throw new yt(o);return Fr(t,e=void 0===e?e:ns(e))},Cn.reverse=Go,Cn.sampleSize=function(t,e,n){return e=(n?ao(t,e,n):void 0===e)?1:ns(e),(Pa(t)?jn:jr)(t,e)},Cn.set=function(t,e,n){return null==t?t:Br(t,e,n)},Cn.setWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Br(t,e,n,r)},Cn.shuffle=function(t){return(Pa(t)?Bn:Kr)(t)},Cn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ao(t,e,n)?(e=0,n=r):(e=null==e?0:ns(e),n=void 0===n?r:ns(n)),Wr(t,e,n)):[]},Cn.sortBy=pa,Cn.sortedUniq=function(t){return t&&t.length?qr(t):[]},Cn.sortedUniqBy=function(t,e){return t&&t.length?qr(t,Xi(e,2)):[]},Cn.split=function(t,e,n){return n&&"number"!=typeof n&&ao(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=as(t))&&("string"==typeof e||null!=e&&!Ha(e))&&!(e=Zr(e))&&je(t)?ui(Ye(t),0,n):t.split(e,n):[]},Cn.spread=function(t,e){if("function"!=typeof t)throw new yt(o);return e=null==e?0:on(ns(e),0),Fr((function(n){var r=n[e],i=ui(n,0,e);return r&&de(i,r),oe(t,this,i)}))},Cn.tail=function(t){var e=null==t?0:t.length;return e?Wr(t,1,e):[]},Cn.take=function(t,e,n){return t&&t.length?Wr(t,0,(e=n||void 0===e?1:ns(e))<0?0:e):[]},Cn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Wr(t,(e=r-(e=n||void 0===e?1:ns(e)))<0?0:e,r):[]},Cn.takeRightWhile=function(t,e){return t&&t.length?ti(t,Xi(e,3),!1,!0):[]},Cn.takeWhile=function(t,e){return t&&t.length?ti(t,Xi(e,3)):[]},Cn.tap=function(t,e){return e(t),t},Cn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new yt(o);return Ga(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ea(t,e,{leading:r,maxWait:e,trailing:i})},Cn.thru=ea,Cn.toArray=ts,Cn.toPairs=Ls,Cn.toPairsIn=Cs,Cn.toPath=function(t){return Pa(t)?pe(t,To):Za(t)?[t]:mi(xo(as(t)))},Cn.toPlainObject=os,Cn.transform=function(t,e,n){var r=Pa(t),i=r||ka(t)||Ja(t);if(e=Xi(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Ga(t)&&ja(o)?An(Gt(t)):{}}return(i?se:sr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Cn.unary=function(t){return ga(t,1)},Cn.union=Ko,Cn.unionBy=Wo,Cn.unionWith=zo,Cn.uniq=function(t){return t&&t.length?Jr(t):[]},Cn.uniqBy=function(t,e){return t&&t.length?Jr(t,Xi(e,2)):[]},Cn.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Jr(t,void 0,e):[]},Cn.unset=function(t,e){return null==t||Qr(t,e)},Cn.unzip=Yo,Cn.unzipWith=Ho,Cn.update=function(t,e,n){return null==t?t:$r(t,e,oi(n))},Cn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:$r(t,e,oi(n),r)},Cn.values=As,Cn.valuesIn=function(t){return null==t?[]:Oe(t,_s(t))},Cn.without=qo,Cn.words=js,Cn.wrap=function(t,e){return Ta(oi(e),t)},Cn.xor=Xo,Cn.xorBy=Zo,Cn.xorWith=Jo,Cn.zip=Qo,Cn.zipObject=function(t,e){return ri(t||[],e||[],Gn)},Cn.zipObjectDeep=function(t,e){return ri(t||[],e||[],Br)},Cn.zipWith=$o,Cn.entries=Ls,Cn.entriesIn=Cs,Cn.extend=us,Cn.extendWith=ls,Xs(Cn,Cn),Cn.add=ou,Cn.attempt=Bs,Cn.camelCase=Ms,Cn.capitalize=Rs,Cn.ceil=au,Cn.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=is(n))===n?n:0),void 0!==e&&(e=(e=is(e))===e?e:0),qn(is(t),e,n)},Cn.clone=function(t){return Xn(t,4)},Cn.cloneDeep=function(t){return Xn(t,5)},Cn.cloneDeepWith=function(t,e){return Xn(t,5,e="function"==typeof e?e:void 0)},Cn.cloneWith=function(t,e){return Xn(t,4,e="function"==typeof e?e:void 0)},Cn.conformsTo=function(t,e){return null==e||Zn(t,e,Es(e))},Cn.deburr=Os,Cn.defaultTo=function(t,e){return null==t||t!==t?e:t},Cn.divide=su,Cn.endsWith=function(t,e,n){t=as(t),e=Zr(e);var r=t.length,i=n=void 0===n?r:qn(ns(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},Cn.eq=Aa,Cn.escape=function(t){return(t=as(t))&&j.test(t)?t.replace(F,Fe):t},Cn.escapeRegExp=function(t){return(t=as(t))&&H.test(t)?t.replace(Y,"\\$&"):t},Cn.every=function(t,e,n){var r=Pa(t)?le:er;return n&&ao(t,e,n)&&(e=void 0),r(t,Xi(e,3))},Cn.find=ia,Cn.findIndex=Oo,Cn.findKey=function(t,e){return Ee(t,Xi(e,3),sr)},Cn.findLast=oa,Cn.findLastIndex=Po,Cn.findLastKey=function(t,e){return Ee(t,Xi(e,3),ur)},Cn.floor=uu,Cn.forEach=aa,Cn.forEachRight=sa,Cn.forIn=function(t,e){return null==t?t:or(t,Xi(e,3),_s)},Cn.forInRight=function(t,e){return null==t?t:ar(t,Xi(e,3),_s)},Cn.forOwn=function(t,e){return t&&sr(t,Xi(e,3))},Cn.forOwnRight=function(t,e){return t&&ur(t,Xi(e,3))},Cn.get=ds,Cn.gt=Ma,Cn.gte=Ra,Cn.has=function(t,e){return null!=t&&no(t,e,dr)},Cn.hasIn=gs,Cn.head=No,Cn.identity=zs,Cn.includes=function(t,e,n,r){t=Na(t)?t:As(t),n=n&&!r?ns(n):0;var i=t.length;return n<0&&(n=on(i+n,0)),Xa(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&be(t,e,n)>-1},Cn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ns(n);return i<0&&(i=on(r+i,0)),be(t,e,i)},Cn.inRange=function(t,e,n){return e=es(e),void 0===n?(n=e,e=0):n=es(n),function(t,e,n){return t>=an(e,n)&&t<on(e,n)}(t=is(t),e,n)},Cn.invoke=vs,Cn.isArguments=Oa,Cn.isArray=Pa,Cn.isArrayBuffer=Ia,Cn.isArrayLike=Na,Cn.isArrayLikeObject=Da,Cn.isBoolean=function(t){return!0===t||!1===t||Ka(t)&&fr(t)==c},Cn.isBuffer=ka,Cn.isDate=Fa,Cn.isElement=function(t){return Ka(t)&&1===t.nodeType&&!Ya(t)},Cn.isEmpty=function(t){if(null==t)return!0;if(Na(t)&&(Pa(t)||"string"==typeof t||"function"==typeof t.splice||ka(t)||Ja(t)||Oa(t)))return!t.length;var e=eo(t);if(e==g||e==E)return!t.size;if(co(t))return!wr(t).length;for(var n in t)if(wt.call(t,n))return!1;return!0},Cn.isEqual=function(t,e){return Er(t,e)},Cn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?Er(t,e,void 0,n):!!r},Cn.isError=Va,Cn.isFinite=function(t){return"number"==typeof t&&en(t)},Cn.isFunction=ja,Cn.isInteger=Ba,Cn.isLength=Ua,Cn.isMap=Wa,Cn.isMatch=function(t,e){return t===e||_r(t,e,Ji(e))},Cn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,_r(t,e,Ji(e),n)},Cn.isNaN=function(t){return za(t)&&t!=+t},Cn.isNative=function(t){if(lo(t))throw new i("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return br(t)},Cn.isNil=function(t){return null==t},Cn.isNull=function(t){return null===t},Cn.isNumber=za,Cn.isObject=Ga,Cn.isObjectLike=Ka,Cn.isPlainObject=Ya,Cn.isRegExp=Ha,Cn.isSafeInteger=function(t){return Ba(t)&&t>=-9007199254740991&&t<=9007199254740991},Cn.isSet=qa,Cn.isString=Xa,Cn.isSymbol=Za,Cn.isTypedArray=Ja,Cn.isUndefined=function(t){return void 0===t},Cn.isWeakMap=function(t){return Ka(t)&&eo(t)==S},Cn.isWeakSet=function(t){return Ka(t)&&"[object WeakSet]"==fr(t)},Cn.join=function(t,e){return null==t?"":nn.call(t,e)},Cn.kebabCase=Ps,Cn.last=Vo,Cn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=ns(n))<0?on(r+i,0):an(i,r-1)),e===e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):_e(t,we,i,!0)},Cn.lowerCase=Is,Cn.lowerFirst=Ns,Cn.lt=Qa,Cn.lte=$a,Cn.max=function(t){return t&&t.length?nr(t,zs,pr):void 0},Cn.maxBy=function(t,e){return t&&t.length?nr(t,Xi(e,2),pr):void 0},Cn.mean=function(t){return xe(t,zs)},Cn.meanBy=function(t,e){return xe(t,Xi(e,2))},Cn.min=function(t){return t&&t.length?nr(t,zs,Tr):void 0},Cn.minBy=function(t,e){return t&&t.length?nr(t,Xi(e,2),Tr):void 0},Cn.stubArray=ru,Cn.stubFalse=iu,Cn.stubObject=function(){return{}},Cn.stubString=function(){return""},Cn.stubTrue=function(){return!0},Cn.multiply=lu,Cn.nth=function(t,e){return t&&t.length?Rr(t,ns(e)):void 0},Cn.noConflict=function(){return Ht._===this&&(Ht._=At),this},Cn.noop=Zs,Cn.now=da,Cn.pad=function(t,e,n){t=as(t);var r=(e=ns(e))?ze(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Oi(Qe(i),n)+t+Oi(Je(i),n)},Cn.padEnd=function(t,e,n){t=as(t);var r=(e=ns(e))?ze(t):0;return e&&r<e?t+Oi(e-r,n):t},Cn.padStart=function(t,e,n){t=as(t);var r=(e=ns(e))?ze(t):0;return e&&r<e?Oi(e-r,n)+t:t},Cn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),un(as(t).replace(X,""),e||0)},Cn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ao(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=es(t),void 0===e?(e=t,t=0):e=es(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=ln();return an(t+i*(e-t+Kt("1e-"+((i+"").length-1))),e)}return Dr(t,e)},Cn.reduce=function(t,e,n){var r=Pa(t)?ge:Ce,i=arguments.length<3;return r(t,Xi(e,4),n,i,$n)},Cn.reduceRight=function(t,e,n){var r=Pa(t)?me:Ce,i=arguments.length<3;return r(t,Xi(e,4),n,i,tr)},Cn.repeat=function(t,e,n){return e=(n?ao(t,e,n):void 0===e)?1:ns(e),kr(as(t),e)},Cn.replace=function(){var t=arguments,e=as(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Cn.result=function(t,e,n){var r=-1,i=(e=ai(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[To(e[r])];void 0===o&&(r=i,o=n),t=ja(o)?o.call(t):o}return t},Cn.round=cu,Cn.runInContext=t,Cn.sample=function(t){return(Pa(t)?Vn:Vr)(t)},Cn.size=function(t){if(null==t)return 0;if(Na(t))return Xa(t)?ze(t):t.length;var e=eo(t);return e==g||e==E?t.size:wr(t).length},Cn.snakeCase=Ds,Cn.some=function(t,e,n){var r=Pa(t)?ye:zr;return n&&ao(t,e,n)&&(e=void 0),r(t,Xi(e,3))},Cn.sortedIndex=function(t,e){return Yr(t,e)},Cn.sortedIndexBy=function(t,e,n){return Hr(t,e,Xi(n,2))},Cn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Yr(t,e);if(r<n&&Aa(t[r],e))return r}return-1},Cn.sortedLastIndex=function(t,e){return Yr(t,e,!0)},Cn.sortedLastIndexBy=function(t,e,n){return Hr(t,e,Xi(n,2),!0)},Cn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Yr(t,e,!0)-1;if(Aa(t[n],e))return n}return-1},Cn.startCase=ks,Cn.startsWith=function(t,e,n){return t=as(t),n=null==n?0:qn(ns(n),0,t.length),e=Zr(e),t.slice(n,n+e.length)==e},Cn.subtract=hu,Cn.sum=function(t){return t&&t.length?Ae(t,zs):0},Cn.sumBy=function(t,e){return t&&t.length?Ae(t,Xi(e,2)):0},Cn.template=function(t,e,n){var r=Cn.templateSettings;n&&ao(t,e,n)&&(e=void 0),t=as(t),e=ls({},e,r,ji);var i,o,a=ls({},e.imports,r.imports,ji),s=Es(a),u=Oe(a,s),l=0,c=e.interpolate||ct,h="__p += '",f=gt((e.escape||ct).source+"|"+c.source+"|"+(c===G?nt:ct).source+"|"+(e.evaluate||ct).source+"|$","g"),p="//# sourceURL="+(wt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++jt+"]")+"\n";t.replace(f,(function(e,n,r,a,s,u){return r||(r=a),h+=t.slice(l,u).replace(ht,Ve),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),h+="';\n";var d=wt.call(e,"variable")&&e.variable;d||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(I,""):h).replace(N,"$1").replace(D,"$1;"),h="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Bs((function(){return ft(s,p+"return "+h).apply(void 0,u)}));if(g.source=h,Va(g))throw g;return g},Cn.times=function(t,e){if((t=ns(t))<1||t>9007199254740991)return[];var n=4294967295,r=an(t,4294967295);t-=4294967295;for(var i=Me(r,e=Xi(e));++n<t;)e(n);return i},Cn.toFinite=es,Cn.toInteger=ns,Cn.toLength=rs,Cn.toLower=function(t){return as(t).toLowerCase()},Cn.toNumber=is,Cn.toSafeInteger=function(t){return t?qn(ns(t),-9007199254740991,9007199254740991):0===t?t:0},Cn.toString=as,Cn.toUpper=function(t){return as(t).toUpperCase()},Cn.trim=function(t,e,n){if((t=as(t))&&(n||void 0===e))return t.replace(q,"");if(!t||!(e=Zr(e)))return t;var r=Ye(t),i=Ye(e);return ui(r,Ie(r,i),Ne(r,i)+1).join("")},Cn.trimEnd=function(t,e,n){if((t=as(t))&&(n||void 0===e))return t.replace(Z,"");if(!t||!(e=Zr(e)))return t;var r=Ye(t);return ui(r,0,Ne(r,Ye(e))+1).join("")},Cn.trimStart=function(t,e,n){if((t=as(t))&&(n||void 0===e))return t.replace(X,"");if(!t||!(e=Zr(e)))return t;var r=Ye(t);return ui(r,Ie(r,Ye(e))).join("")},Cn.truncate=function(t,e){var n=30,r="...";if(Ga(e)){var i="separator"in e?e.separator:i;n="length"in e?ns(e.length):n,r="omission"in e?Zr(e.omission):r}var o=(t=as(t)).length;if(je(t)){var a=Ye(t);o=a.length}if(n>=o)return t;var s=n-ze(r);if(s<1)return r;var u=a?ui(a,0,s).join(""):t.slice(0,s);if(void 0===i)return u+r;if(a&&(s+=u.length-s),Ha(i)){if(t.slice(s).search(i)){var l,c=u;for(i.global||(i=gt(i.source,as(rt.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var h=l.index;u=u.slice(0,void 0===h?s:h)}}else if(t.indexOf(Zr(i),s)!=s){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r},Cn.unescape=function(t){return(t=as(t))&&V.test(t)?t.replace(k,He):t},Cn.uniqueId=function(t){var e=++xt;return as(t)+e},Cn.upperCase=Fs,Cn.upperFirst=Vs,Cn.each=aa,Cn.eachRight=sa,Cn.first=No,Xs(Cn,function(){var t={};return sr(Cn,(function(e,n){wt.call(Cn.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),Cn.VERSION="4.17.19",se(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Cn[t].placeholder=Cn})),se(["drop","take"],(function(t,e){On.prototype[t]=function(n){n=void 0===n?1:on(ns(n),0);var r=this.__filtered__&&!e?new On(this):this.clone();return r.__filtered__?r.__takeCount__=an(n,r.__takeCount__):r.__views__.push({size:an(n,4294967295),type:t+(r.__dir__<0?"Right":"")}),r},On.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),se(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;On.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Xi(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),se(["head","last"],(function(t,e){var n="take"+(e?"Right":"");On.prototype[t]=function(){return this[n](1).value()[0]}})),se(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");On.prototype[t]=function(){return this.__filtered__?new On(this):this[n](1)}})),On.prototype.compact=function(){return this.filter(zs)},On.prototype.find=function(t){return this.filter(t).head()},On.prototype.findLast=function(t){return this.reverse().find(t)},On.prototype.invokeMap=Fr((function(t,e){return"function"==typeof t?new On(this):this.map((function(n){return yr(n,t,e)}))})),On.prototype.reject=function(t){return this.filter(wa(Xi(t)))},On.prototype.slice=function(t,e){t=ns(t);var n=this;return n.__filtered__&&(t>0||e<0)?new On(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=ns(e))<0?n.dropRight(-e):n.take(e-t)),n)},On.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},On.prototype.toArray=function(){return this.take(4294967295)},sr(On.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Cn[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(Cn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,s=e instanceof On,u=a[0],l=s||Pa(e),c=function(t){var e=i.apply(Cn,de([t],a));return r&&h?e[0]:e};l&&n&&"function"==typeof u&&1!=u.length&&(s=l=!1);var h=this.__chain__,f=!!this.__actions__.length,p=o&&!h,d=s&&!f;if(!o&&l){e=d?e:new On(this);var g=t.apply(e,a);return g.__actions__.push({func:ea,args:[c],thisArg:void 0}),new Rn(g,h)}return p&&d?t.apply(this,a):(g=this.thru(c),p?r?g.value()[0]:g.value():g)})})),se(["pop","push","shift","sort","splice","unshift"],(function(t){var e=vt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Cn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Pa(i)?i:[],t)}return this[n]((function(n){return e.apply(Pa(n)?n:[],t)}))}})),sr(On.prototype,(function(t,e){var n=Cn[e];if(n){var r=n.name+"";wt.call(vn,r)||(vn[r]=[]),vn[r].push({name:e,func:n})}})),vn[Ci(void 0,2).name]=[{name:"wrapper",func:void 0}],On.prototype.clone=function(){var t=new On(this.__wrapped__);return t.__actions__=mi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=mi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=mi(this.__views__),t},On.prototype.reverse=function(){if(this.__filtered__){var t=new On(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},On.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Pa(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=an(e,t+a);break;case"takeRight":t=on(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,f=0,p=an(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return ei(t,this.__actions__);var d=[];t:for(;u--&&f<p;){for(var g=-1,m=t[l+=e];++g<h;){var y=c[g],v=y.iteratee,E=y.type,_=v(m);if(2==E)m=_;else if(!_){if(1==E)continue t;break t}}d[f++]=m}return d},Cn.prototype.at=na,Cn.prototype.chain=function(){return ta(this)},Cn.prototype.commit=function(){return new Rn(this.value(),this.__chain__)},Cn.prototype.next=function(){void 0===this.__values__&&(this.__values__=ts(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Cn.prototype.plant=function(t){for(var e,n=this;n instanceof Mn;){var r=Co(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},Cn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof On){var e=t;return this.__actions__.length&&(e=new On(this)),(e=e.reverse()).__actions__.push({func:ea,args:[Go],thisArg:void 0}),new Rn(e,this.__chain__)}return this.thru(Go)},Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=function(){return ei(this.__wrapped__,this.__actions__)},Cn.prototype.first=Cn.prototype.head,Jt&&(Cn.prototype[Jt]=function(){return this}),Cn}();Ht._=qe,void 0===(i=function(){return qe}.call(e,n,e,r))||(r.exports=i)}).call(this)}).call(this,n(49),n(56)(t))},function(t,e,n){var r=n(191);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e,n){var r=n(512),i=n(515)((function(t,e,n){r(t,e,n)}));t.exports=i},function(t,e,n){var r,i,o=n(327),a=n(677),s=n(678),u=n(679);void 0===(i="function"===typeof(r={Box:o,Circle:a,Point:s,QuadTree:u})?r.call(e,n,e,t):r)||(t.exports=i)},function(t,e,n){var r=n(411),i=n(414);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(256),i=n(257),o=n(66);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){var r=n(153),i=n(558),o=n(559),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,e,n){var r=n(576),i=n(625),o=n(214),a=n(25),s=n(634);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e,n){var r=n(588),i=n(591);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(700),i=n(705);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(269),i=n(37),o=n(151),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var u=null==n?0:o(n);return u<0&&(u=a(s+u,0)),r(t,i(e,3),u)}},function(t,e,n){"use strict";var r=n(177),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={};a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var s=Object.defineProperty,u=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(f){var p=h(n);p&&p!==f&&t(e,p,r)}var d=u(n);l&&(d=d.concat(l(n)));for(var g=a[e.$$typeof]||i,m=a[n.$$typeof]||i,y=0;y<d.length;++y){var v=d[y];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!g||!g[v])){var E=c(n,v);try{s(e,v,E)}catch(_){}}}return e}return e}},function(t,e,n){var r=n(273);t.exports=function(t,e,n){return null==t?t:r(t,e,n)}},function(t,e,n){var r=n(152),i=n(265),o=n(37);t.exports=function(t,e){var n={};return e=o(e,3),i(t,(function(t,i,o){r(n,i,e(t,i,o))})),n}},function(t,e,n){var r=n(548);t.exports=function(t,e){if(null==t)return{};var n,i,o=r(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}},function(t,e,n){var r=n(118),i=n(247),o=n(105),a=n(125),s=o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])}));t.exports=s},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},function(t,e,n){var r=n(342);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(65),i=n(277),o=n(282),a=n(101),s=n(106),u=n(490),l=n(274),c=n(196),h=l((function(t,e){var n={};if(null==t)return n;var l=!1;e=r(e,(function(e){return e=a(e,t),l||(l=e.length>1),e})),s(t,c(t),n),l&&(n=i(n,7,u));for(var h=e.length;h--;)o(n,e[h]);return n}));t.exports=h},function(t,e,n){t.exports=n(231)},function(t,e,n){t.exports=n(766)},function(t,e,n){var r=n(61).Symbol;t.exports=r},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(9),i=n(189),o=n(441),a=n(444);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,n){var r=n(72),i=n(39);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){var r=n(102);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){var r=n(265),i=n(452)(r);t.exports=i},function(t,e,n){var r=n(124),i=n(266),o=n(267);t.exports=function(t,e){return o(i(t,e,r),t+"")}},function(t,e,n){var r=n(195),i=n(152);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var l=e[s],c=o?o(n[l],t[l],l,n,t):void 0;void 0===c&&(c=t[l]),a?i(n,l,c):r(n,l,c)}return n}},function(t,e,n){var r=n(296),i=n(202);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(688),i=n(750),o=n(228),a=n(38),s=n(759);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e,n){var r=n(162),i=n(701),o=n(702),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,e,n){t.exports=n(391)},function(t,e,n){!function(t,e){"use strict";function n(t){return"string"===typeof t||"number"===typeof t}var r=function(){function t(){this._cache={}}var e=t.prototype;return e.set=function(t,e){this._cache[t]=e},e.get=function(t){return this._cache[t]},e.remove=function(t){delete this._cache[t]},e.clear=function(){this._cache={}},e.isValidCacheKey=function(t){return n(t)},t}(),i=r,o=function(){return!0};function a(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(t,r){if("function"===typeof r)throw new Error('[re-reselect] Second argument "options" must be an object. Please use "options.selectorCreator" to provide a custom selectorCreator.');var a={};"function"===typeof t?Object.assign(a,r,{keySelector:t}):Object.assign(a,t);var s=0,u=n.pop(),l=Array.isArray(n[0])?n[0]:[].concat(n);n.push((function(){return s++,u.apply(void 0,arguments)}));var c=a.cacheObject||new i,h=a.selectorCreator||e.createSelector,f=c.isValidCacheKey||o;a.keySelectorCreator&&(a.keySelector=a.keySelectorCreator({keySelector:a.keySelector,inputSelectors:l,resultFunc:u}));var p=function(){var t=a.keySelector.apply(a,arguments);if(f(t)){var e=c.get(t);return void 0===e&&(e=h.apply(void 0,n),c.set(t,e)),e.apply(void 0,arguments)}console.warn('[re-reselect] Invalid cache key "'+t+'" has been returned by keySelector function.')};return p.getMatchingSelector=function(){var t=a.keySelector.apply(a,arguments);return c.get(t)},p.removeMatchingSelector=function(){var t=a.keySelector.apply(a,arguments);c.remove(t)},p.clearCache=function(){c.clear()},p.resultFunc=u,p.dependencies=l,p.cache=c,p.recomputations=function(){return s},p.resetRecomputations=function(){return s=0},p.keySelector=a.keySelector,p}}function s(t){if(void 0===t)throw new Error('Missing the required property "cacheSize".');if(!Number.isInteger(t)||t<=0)throw new Error('The "cacheSize" property must be a positive integer value.')}var u=function(){function t(t){var e=(void 0===t?{}:t).cacheSize;s(e),this._cache={},this._cacheOrdering=[],this._cacheSize=e}var e=t.prototype;return e.set=function(t,e){if(this._cache[t]=e,this._cacheOrdering.push(t),this._cacheOrdering.length>this._cacheSize){var n=this._cacheOrdering[0];this.remove(n)}},e.get=function(t){return this._cache[t]},e.remove=function(t){var e=this._cacheOrdering.indexOf(t);e>-1&&this._cacheOrdering.splice(e,1),delete this._cache[t]},e.clear=function(){this._cache={},this._cacheOrdering=[]},e.isValidCacheKey=function(t){return n(t)},t}(),l=function(){function t(t){var e=(void 0===t?{}:t).cacheSize;s(e),this._cache={},this._cacheOrdering=[],this._cacheSize=e}var e=t.prototype;return e.set=function(t,e){if(this._cache[t]=e,this._registerCacheHit(t),this._cacheOrdering.length>this._cacheSize){var n=this._cacheOrdering[0];this.remove(n)}},e.get=function(t){return this._registerCacheHit(t),this._cache[t]},e.remove=function(t){this._deleteCacheHit(t),delete this._cache[t]},e.clear=function(){this._cache={},this._cacheOrdering=[]},e._registerCacheHit=function(t){this._deleteCacheHit(t),this._cacheOrdering.push(t)},e._deleteCacheHit=function(t){var e=this._cacheOrdering.indexOf(t);e>-1&&this._cacheOrdering.splice(e,1)},e.isValidCacheKey=function(t){return n(t)},t}(),c=function(){function t(){this._cache=new Map}var e=t.prototype;return e.set=function(t,e){this._cache.set(t,e)},e.get=function(t){return this._cache.get(t)},e.remove=function(t){this._cache.delete(t)},e.clear=function(){this._cache.clear()},t}(),h=function(){function t(t){var e=(void 0===t?{}:t).cacheSize;s(e),this._cache=new Map,this._cacheSize=e}var e=t.prototype;return e.set=function(t,e){if(this._cache.set(t,e),this._cache.size>this._cacheSize){var n=this._cache.keys().next().value;this.remove(n)}},e.get=function(t){return this._cache.get(t)},e.remove=function(t){this._cache.delete(t)},e.clear=function(){this._cache.clear()},t}(),f=function(){function t(t){var e=(void 0===t?{}:t).cacheSize;s(e),this._cache=new Map,this._cacheSize=e}var e=t.prototype;return e.set=function(t,e){if(this._cache.set(t,e),this._cache.size>this._cacheSize){var n=this._cache.keys().next().value;this.remove(n)}},e.get=function(t){var e=this._cache.get(t);return this._cache.has(t)&&(this.remove(t),this._cache.set(t,e)),e},e.remove=function(t){this._cache.delete(t)},e.clear=function(){this._cache.clear()},t}();t.FifoCacheObject=u,t.FifoMapCache=h,t.FifoObjectCache=u,t.FlatCacheObject=r,t.FlatMapCache=c,t.FlatObjectCache=r,t.LruCacheObject=f,t.LruMapCache=f,t.LruObjectCache=l,t.createStructuredCachedSelector=function(t){return e.createStructuredSelector(t,a)},t.default=a,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(5))},function(t,e,n){var r=n(118);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},function(t,e,n){var r=n(472),i=n(83);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){var r=n(72),i=n(39);t.exports=function(t){return"number"==typeof t||i(t)&&"[object Number]"==r(t)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return Ct})),n.d(e,"a",(function(){return Vt}));var r=n(361),i=n.n(r);function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=n(30);function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Object(a.a)(t,e,n[e])}))}return t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=n(54),c=n(20);function h(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?Object(c.a)(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){if(t){if("string"===typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function y(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||m(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||m(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){var n;console&&console[t]&&(n=console)[t].apply(n,y(e))}},_=new(function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,t),this.init(e,n)}return Object(l.a)(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||E,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,r){return r&&!this.debug?null:("string"===typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,s({},{prefix:"".concat(this.prefix,":").concat(e,":")},this.options))}}]),t}()),b=function(){function t(){u(this,t),this.observers={}}return Object(l.a)(t,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach((function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter((function(t){return t!==e})):delete this.observers[t])}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this.observers[t]){var i=[].concat(this.observers[t]);i.forEach((function(t){t.apply(void 0,n)}))}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach((function(e){e.apply(e,[t].concat(n))}))}}}]),t}();function S(){var t,e,n=new Promise((function(n,r){t=n,e=r}));return n.resolve=t,n.reject=e,n}function w(t){return null==t?"":""+t}function x(t,e,n){t.forEach((function(t){e[t]&&(n[t]=e[t])}))}function T(t,e,n){function r(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function i(){return!t||"string"===typeof t}for(var o="string"!==typeof e?[].concat(e):e.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!t[a]&&n&&(t[a]=new n),t=t[a]}return i()?{}:{obj:t,k:r(o.shift())}}function L(t,e,n){var r=T(t,e,Object);r.obj[r.k]=n}function C(t,e){var n=T(t,e),r=n.obj,i=n.k;if(r)return r[i]}function A(t,e,n){var r=C(t,n);return void 0!==r?r:C(e,n)}function M(t,e,n){for(var r in e)r in t?"string"===typeof t[r]||t[r]instanceof String||"string"===typeof e[r]||e[r]instanceof String?n&&(t[r]=e[r]):M(t[r],e[r],n):t[r]=e[r];return t}function R(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function P(t){return"string"===typeof t?t.replace(/[&<>"'\/]/g,(function(t){return O[t]})):t}var I=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return u(this,e),n=h(this,f(e).call(this)),b.call(Object(c.a)(n)),n.data=t||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return d(e,t),Object(l.a)(e,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=[t,e];return n&&"string"!==typeof n&&(o=o.concat(n)),n&&"string"===typeof n&&(o=o.concat(i?n.split(i):n)),t.indexOf(".")>-1&&(o=t.split(".")),C(this.data,o)}},{key:"addResource",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var a=[t,e];n&&(a=a.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(r=e,e=(a=t.split("."))[1]),this.addNamespaces(e),L(this.data,a,r),i.silent||this.emit("added",t,e,n,r)}},{key:"addResources",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!==typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(t,e,i,n[i],{silent:!0});r.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[t,e];t.indexOf(".")>-1&&(r=n,n=e,e=(a=t.split("."))[1]),this.addNamespaces(e);var u=C(this.data,a)||{};r?M(u,n,i):u=s({},u,n),L(this.data,a,u),o.silent||this.emit("added",t,e,n)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?s({},{},this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"toJSON",value:function(){return this.data}}]),e}(b),N={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,r,i){var o=this;return t.forEach((function(t){o.processors[t]&&(e=o.processors[t].process(e,n,r,i))})),e}},D={},k=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,e),n=h(this,f(e).call(this)),b.call(Object(c.a)(n)),x(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,Object(c.a)(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=_.create("translator"),n}return d(e,t),Object(l.a)(e,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(t,e);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(t,e){var n=e.nsSeparator||this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,i=e.ns||this.options.defaultNS;if(n&&t.indexOf(n)>-1){var o=t.split(n);(n!==r||n===r&&this.options.ns.indexOf(o[0])>-1)&&(i=o.shift()),t=o.join(r)}return"string"===typeof i&&(i=[i]),{key:t,namespaces:i}}},{key:"translate",value:function(t,e){var n=this;if("object"!==o(e)&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),e||(e={}),void 0===t||null===t)return"";Array.isArray(t)||(t=[String(t)]);var r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,i=this.extractFromKey(t[t.length-1],e),a=i.key,u=i.namespaces,l=u[u.length-1],c=e.lng||this.language,h=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(h){var f=e.nsSeparator||this.options.nsSeparator;return l+f+a}return a}var p=this.resolve(t,e),d=p&&p.res,g=p&&p.usedKey||a,m=p&&p.exactUsedKey||a,y=Object.prototype.toString.apply(d),v=["[object Number]","[object Function]","[object RegExp]"],E=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,b="string"!==typeof d&&"boolean"!==typeof d&&"number"!==typeof d;if(_&&d&&b&&v.indexOf(y)<0&&("string"!==typeof E||"[object Array]"!==y)){if(!e.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,d,e):"key '".concat(a," (").concat(this.language,")' returned an object instead of string.");if(r){var S="[object Array]"===y,w=S?[]:{},x=S?m:g;for(var T in d)if(Object.prototype.hasOwnProperty.call(d,T)){var L="".concat(x).concat(r).concat(T);w[T]=this.translate(L,s({},e,{joinArrays:!1,ns:u})),w[T]===L&&(w[T]=d[T])}d=w}}else if(_&&"string"===typeof E&&"[object Array]"===y)(d=d.join(E))&&(d=this.extendTranslation(d,t,e));else{var C=!1,A=!1;if(!this.isValidLookup(d)&&void 0!==e.defaultValue){if(C=!0,void 0!==e.count){var M=this.pluralResolver.getSuffix(c,e.count);d=e["defaultValue".concat(M)]}d||(d=e.defaultValue)}this.isValidLookup(d)||(A=!0,d=a);var R=e.defaultValue&&e.defaultValue!==d&&this.options.updateMissing;if(A||C||R){this.logger.log(R?"updateKey":"missingKey",c,l,a,R?e.defaultValue:d);var O=[],P=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if("fallback"===this.options.saveMissingTo&&P&&P[0])for(var I=0;I<P.length;I++)O.push(P[I]);else"all"===this.options.saveMissingTo?O=this.languageUtils.toResolveHierarchy(e.lng||this.language):O.push(e.lng||this.language);var N=function(t,r){n.options.missingKeyHandler?n.options.missingKeyHandler(t,l,r,R?e.defaultValue:d,R,e):n.backendConnector&&n.backendConnector.saveMissing&&n.backendConnector.saveMissing(t,l,r,R?e.defaultValue:d,R,e),n.emit("missingKey",t,l,r,d)};if(this.options.saveMissing){var D=void 0!==e.count&&"string"!==typeof e.count;this.options.saveMissingPlurals&&D?O.forEach((function(t){n.pluralResolver.getPluralFormsOfKey(t,a).forEach((function(e){return N([t],e)}))})):N(O,a)}}d=this.extendTranslation(d,t,e,p),A&&d===a&&this.options.appendNamespaceToMissingKey&&(d="".concat(l,":").concat(a)),A&&this.options.parseMissingKeyHandler&&(d=this.options.parseMissingKeyHandler(d))}return d}},{key:"extendTranslation",value:function(t,e,n,r){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(s({},n,{interpolation:s({},this.options.interpolation,n.interpolation)}));var o=n.replace&&"string"!==typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(o=s({},this.options.interpolation.defaultVariables,o)),t=this.interpolator.interpolate(t,o,n.lng||this.language,n),!1!==n.nest&&(t=this.interpolator.nest(t,(function(){return i.translate.apply(i,arguments)}),n)),n.interpolation&&this.interpolator.reset()}var a=n.postProcess||this.options.postProcess,u="string"===typeof a?[a]:a;return void 0!==t&&null!==t&&u&&u.length&&!1!==n.applyPostProcessor&&(t=N.handle(u,t,e,this.options&&this.options.postProcessPassResolved?s({i18nResolved:r},n):n,this)),t}},{key:"resolve",value:function(t){var e,n,r,i,o,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof t&&(t=[t]),t.forEach((function(t){if(!a.isValidLookup(e)){var u=a.extractFromKey(t,s),l=u.key;n=l;var c=u.namespaces;a.options.fallbackNS&&(c=c.concat(a.options.fallbackNS));var h=void 0!==s.count&&"string"!==typeof s.count,f=void 0!==s.context&&"string"===typeof s.context&&""!==s.context,p=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);c.forEach((function(t){a.isValidLookup(e)||(o=t,!D["".concat(p[0],"-").concat(t)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(o)&&(D["".concat(p[0],"-").concat(t)]=!0,a.logger.warn('key "'.concat(n,'" for namespace "').concat(o,'" for languages "').concat(p.join(", "),"\" won't get resolved as namespace was not yet loaded"),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((function(n){if(!a.isValidLookup(e)){i=n;var o,u,c=l,p=[c];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(p,l,n,t,s);else h&&(o=a.pluralResolver.getSuffix(n,s.count)),h&&f&&p.push(c+o),f&&p.push(c+="".concat(a.options.contextSeparator).concat(s.context)),h&&p.push(c+=o);for(;u=p.pop();)a.isValidLookup(e)||(r=u,e=a.getResource(n,t,u,s))}})))}))}})),{res:e,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(t){return void 0!==t&&!(!this.options.returnNull&&null===t)&&!(!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,r):this.resourceStore.getResource(t,e,n,r)}}]),e}(b);function F(t){return t.charAt(0).toUpperCase()+t.slice(1)}var V=function(){function t(e){u(this,t),this.options=e,this.whitelist=this.options.whitelist||!1,this.logger=_.create("languageUtils")}return Object(l.a)(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"===typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map((function(t){return t.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=F(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=F(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=F(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isWhitelisted",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(t=this.getLanguagePartFromCode(t)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(t)>-1}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("string"===typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,e){var n=this,r=this.getFallbackCodes(e||this.options.fallbackLng||[],t),i=[],o=function(t){t&&(n.isWhitelisted(t)?i.push(t):n.logger.warn("rejecting non-whitelisted language code: ".concat(t)))};return"string"===typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(t))):"string"===typeof t&&o(this.formatLanguageCode(t)),r.forEach((function(t){i.indexOf(t)<0&&o(n.formatLanguageCode(t))})),i}}]),t}(),j=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],B={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0===t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0===t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0===t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1===t?0:2===t?1:(t<0||t>10)&&t%10==0?2:3)}};function U(){var t={};return j.forEach((function(e){e.lngs.forEach((function(n){t[n]={numbers:e.nr,plurals:B[e.fc]}}))})),t}var G=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,t),this.languageUtils=e,this.options=n,this.logger=_.create("pluralResolver"),this.rules=U()}return Object(l.a)(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=this.getRule(t);return e&&e.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,e){var n=this,r=[],i=this.getRule(t);return i?(i.numbers.forEach((function(i){var o=n.getSuffix(t,i);r.push("".concat(e).concat(o))})),r):r}},{key:"getSuffix",value:function(t,e){var n=this,r=this.getRule(t);if(r){var i=r.noAbs?r.plurals(e):r.plurals(Math.abs(e)),o=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var a=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"===typeof o?"_plural_".concat(o.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(t)),""}}]),t}(),K=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,t),this.logger=_.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return Object(l.a)(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:P,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?R(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?R(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?R(e.nestingPrefix):e.nestingPrefixEscaped||R("$t("),this.nestingSuffix=e.nestingSuffix?R(e.nestingSuffix):e.nestingSuffixEscaped||R(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=void 0!==e.alwaysFormat&&e.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,e,n,r){var i,o,a,s=this,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function l(t){return t.replace(/\$/g,"$$$$")}var c=function(t){if(t.indexOf(s.formatSeparator)<0){var i=A(e,u,t);return s.alwaysFormat?s.format(i,void 0,n):i}var o=t.split(s.formatSeparator),a=o.shift().trim(),l=o.join(s.formatSeparator).trim();return s.format(A(e,u,a),l,n,r)};this.resetRegExp();var h=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler;for(a=0;i=this.regexpUnescape.exec(t);){if(void 0===(o=c(i[1].trim())))if("function"===typeof h){var f=h(t,i,r);o="string"===typeof f?f:""}else this.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(t)),o="";else"string"===typeof o||this.useRawValueToEscape||(o=w(o));if(t=t.replace(i[0],l(o)),this.regexpUnescape.lastIndex=0,++a>=this.maxReplaces)break}for(a=0;i=this.regexp.exec(t);){if(void 0===(o=c(i[1].trim())))if("function"===typeof h){var p=h(t,i,r);o="string"===typeof p?p:""}else this.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(t)),o="";else"string"===typeof o||this.useRawValueToEscape||(o=w(o));if(o=this.escapeValue?l(this.escape(o)):l(o),t=t.replace(i[0],o),this.regexp.lastIndex=0,++a>=this.maxReplaces)break}return t}},{key:"nest",value:function(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=s({},i);function a(t,e){var n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;var r=t.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);t=r[0],i=(i=this.interpolate(i,o)).replace(/'/g,'"');try{o=JSON.parse(i),e&&(o=s({},e,o))}catch(a){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),a),"".concat(t).concat(n).concat(i)}return delete o.defaultValue,t}for(o.applyPostProcessor=!1,delete o.defaultValue;n=this.nestingRegexp.exec(t);){if((r=e(a.call(this,n[1].trim(),o),o))&&n[0]===t&&"string"!==typeof r)return r;"string"!==typeof r&&(r=w(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(t)),r=""),t=t.replace(n[0],r),this.regexp.lastIndex=0}return t}}]),t}();var W=function(t){function e(t,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return u(this,e),i=h(this,f(e).call(this)),b.call(Object(c.a)(i)),i.backend=t,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=o,i.logger=_.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,o.backend,o),i}return d(e,t),Object(l.a)(e,[{key:"queueLoad",value:function(t,e,n,r){var i=this,o=[],a=[],s=[],u=[];return t.forEach((function(t){var r=!0;e.forEach((function(e){var s="".concat(t,"|").concat(e);!n.reload&&i.store.hasResourceBundle(t,e)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?a.indexOf(s)<0&&a.push(s):(i.state[s]=1,r=!1,a.indexOf(s)<0&&a.push(s),o.indexOf(s)<0&&o.push(s),u.indexOf(e)<0&&u.push(e)))})),r||s.push(t)})),(o.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:o,pending:a,toLoadLanguages:s,toLoadNamespaces:u}}},{key:"loaded",value:function(t,e,n){var r=v(t.split("|"),2),i=r[0],o=r[1];e&&this.emit("failedLoading",i,o,e),n&&this.store.addResourceBundle(i,o,n),this.state[t]=e?-1:2;var a={};this.queue.forEach((function(n){!function(t,e,n,r){var i=T(t,e,Object),o=i.obj,a=i.k;o[a]=o[a]||[],r&&(o[a]=o[a].concat(n)),r||o[a].push(n)}(n.loaded,[i],o),function(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}(n.pending,t),e&&n.errors.push(e),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(t){a[t]||(a[t]=[]),n.loaded[t].length&&n.loaded[t].forEach((function(e){a[t].indexOf(e)<0&&a[t].push(e)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(t){return!t.done}))}},{key:"read",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,a=arguments.length>5?arguments[5]:void 0;return t.length?this.backend[n](t,e,(function(s,u){s&&u&&i<5?setTimeout((function(){r.read.call(r,t,e,n,i+1,2*o,a)}),o):a(s,u)})):a(null,{})}},{key:"prepareLoading",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"===typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"===typeof e&&(e=[e]);var o=this.queueLoad(t,e,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((function(t){n.loadOne(t)}))}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t.split("|"),i=v(r,2),o=i[0],a=i[1];this.read(o,a,"read",void 0,void 0,(function(r,i){r&&e.logger.warn("".concat(n,"loading namespace ").concat(a," for language ").concat(o," failed"),r),!r&&i&&e.logger.log("".concat(n,"loaded namespace ").concat(a," for language ").concat(o),i),e.loaded(t,r,i)}))}},{key:"saveMissing",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)?this.logger.warn('did not save key "'.concat(n,'" for namespace "').concat(e,'" as the namespace was not yet loaded'),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):void 0!==n&&null!==n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(t,e,n,r,null,s({},o,{isUpdate:i})),t&&t[0]&&this.store.addResource(t[0],e,n,r))}}]),e}(b);function z(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===o(t[1])&&(e=t[1]),"string"===typeof t[1]&&(e.defaultValue=t[1]),"string"===typeof t[2]&&(e.tDescription=t[2]),"object"===o(t[2])||"object"===o(t[3])){var n=t[3]||t[2];Object.keys(n).forEach((function(t){e[t]=n[t]}))}return e},interpolation:{escapeValue:!0,format:function(t,e,n,r){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3}}}function Y(t){return"string"===typeof t.ns&&(t.ns=[t.ns]),"string"===typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"===typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&t.whitelist.indexOf("cimode")<0&&(t.whitelist=t.whitelist.concat(["cimode"])),t}function H(){}var q,X=new(function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(u(this,e),t=h(this,f(e).call(this)),b.call(Object(c.a)(t)),t.options=Y(n),t.services={},t.logger=_,t.modules={external:[]},r&&!t.isInitialized&&!n.isClone){if(!t.options.initImmediate)return t.init(n,r),h(t,Object(c.a)(t));setTimeout((function(){t.init(n,r)}),0)}return t}return d(e,t),Object(l.a)(e,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(t){return t?"function"===typeof t?new t:t:null}if("function"===typeof e&&(n=e,e={}),this.options=s({},z(),this.options,Y(e)),this.format=this.options.interpolation.format,n||(n=H),!this.options.isClone){this.modules.logger?_.init(r(this.modules.logger),this.options):_.init(null,this.options);var i=new V(this.options);this.store=new I(this.options.resources,this.options);var o=this.services;o.logger=_,o.resourceStore=this.store,o.languageUtils=i,o.pluralResolver=new G(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),o.interpolator=new K(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new W(r(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e].concat(r))})),this.modules.languageDetector&&(o.languageDetector=r(this.modules.languageDetector),o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=r(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new k(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e].concat(r))})),this.modules.external.forEach((function(e){e.init&&e.init(t)}))}this.modules.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var a=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"];a.forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}}));var u=S(),l=function(){t.changeLanguage(t.options.lng,(function(e,r){t.isInitialized=!0,t.logger.log("initialized",t.options),t.emit("initialized",t.options),u.resolve(r),n(e,r)}))};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),u}},{key:"loadResources",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,r=n,i="string"===typeof t?t:this.language;if("function"===typeof t&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var o=[],a=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach((function(t){o.indexOf(t)<0&&o.push(t)}))};if(i)a(i);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(t){return a(t)}))}this.options.preload&&this.options.preload.forEach((function(t){return a(t)})),this.services.backendConnector.load(o,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(t,e,n){var r=S();return t||(t=this.languages),e||(e=this.options.ns),n||(n=H),this.services.backendConnector.reload(t,e,(function(t){r.resolve(),n(t)})),r}},{key:"use",value:function(t){return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&N.addPostProcessor(t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"changeLanguage",value:function(t,e){var n=this;this.isLanguageChangingTo=t;var r=S();this.emit("languageChanging",t);var i=function(t){t&&(n.language||(n.language=t,n.languages=n.services.languageUtils.toResolveHierarchy(t)),n.translator.language||n.translator.changeLanguage(t),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(t)),n.loadResources(t,(function(i){!function(t,i){i?(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),e&&e(t,(function(){return n.t.apply(n,arguments)}))}(i,t)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(t):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(t,e){var n=this,r=function t(e,r){var i;if("object"!==o(r)){for(var a=arguments.length,u=new Array(a>2?a-2:0),l=2;l<a;l++)u[l-2]=arguments[l];i=n.options.overloadTranslationOptionHandler([e,r].concat(u))}else i=s({},r);return i.lng=i.lng||t.lng,i.lngs=i.lngs||t.lngs,i.ns=i.ns||t.ns,n.t(e,i)};return"string"===typeof t?r.lng=t:r.lngs=t,r.ns=e,r}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this;if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var n=this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;var o=function(t,n){var r=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===r||2===r};return!!this.hasResourceBundle(n,t)||(!this.services.backendConnector.backend||!(!o(n,t)||r&&!o(i,t)))}},{key:"loadNamespaces",value:function(t,e){var n=this,r=S();return this.options.ns?("string"===typeof t&&(t=[t]),t.forEach((function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)})),this.loadResources((function(t){r.resolve(),e&&e(t)})),r):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=S();"string"===typeof t&&(t=[t]);var r=this.options.preload||[],i=t.filter((function(t){return r.indexOf(t)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(t){n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){if(t||(t=this.languages&&this.languages.length>0?this.languages[0]:this.language),!t)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new e(t,n)}},{key:"cloneInstance",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,i=s({},this.options,n,{isClone:!0}),o=new e(i),a=["store","services","language"];return a.forEach((function(e){o[e]=t[e]})),o.translator=new k(o.services,o.options),o.translator.on("*",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];o.emit.apply(o,[t].concat(n))})),o.init(i,r),o.translator.options=o.options,o}}]),e}(b)),Z=n(40),J=n(92),Q=n.n(J),$=n(42),tt=n.n($),et=n(44),nt=n.n(et),rt=n(45),it=n.n(rt),ot=n(41),at=n.n(ot),st=n(46),ut=n.n(st),lt=n(47),ct=n.n(lt),ht=n(0),ft=n.n(ht),pt=n(89),dt=n.n(pt),gt={wait:!1,withRef:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",translateFuncName:"t",nsMode:"default",usePureComponent:!1,omitBoundRerender:!0,transEmptyNodeValue:""};function mt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};gt=tt()({},gt,t)}function yt(t){q=t}var vt={type:"3rdParty",init:function(t){mt(t.options.react),yt(t)}},Et=ft.a.createContext();function _t(){return function(t){var e,n=function(t){return function(e){function n(){return nt()(this,n),at()(this,ut()(n).apply(this,arguments))}return ct()(n,e),it()(n,[{key:"render",value:function(){var e=this.props,n=e.innerRef,r=Q()(e,["innerRef"]);return n&&(r.ref=n),ft.a.createElement(Et.Consumer,null,(function(e){return ft.a.createElement(t,tt()({},e,r))}))}}]),n}(ht.Component)}(function(e){function n(){return nt()(this,n),at()(this,ut()(n).apply(this,arguments))}return ct()(n,e),it()(n,[{key:"render",value:function(){var e=this,n=this.props,r=n.innerRef,i=Q()(n,["innerRef"]);r&&(i.ref=r);var o={},a=this.props.i18nOptions||this.i18nOptions,s=this.props.i18n||q;if(!a){var u=Object.keys(gt).reduce((function(t,n){return e.props[n]&&(t[n]=e.props[n]),t}),{});a=tt()({},gt,s&&s.options&&s.options.react,u),this.i18nOptions=a}return s&&(o.i18n=s,o.t=s.t.bind(s),o.lng=s.language,o.i18nOptions=a),ft.a.createElement(t,tt()({},o,i))}}]),n}(ht.Component));return n.WrappedComponent=t,n.displayName="WithMergedOptions(".concat((e=t).displayName||e.name||"Component",")"),dt()(n,t)}}var bt=n(76),St=n.n(bt),wt=!1,xt=function(t){function e(t){var n;if(nt()(this,e),n=at()(this,ut()(e).call(this,t)),!t.i18n)return n.state={i18nLoadedAt:null,ready:!1},at()(n,Object(Z.e)("You will need pass in an i18next instance either by props, using I18nextProvider or by using i18nextReactModule. Learn more https://react.i18next.com/components/overview#getting-the-i-18-n-function-into-the-flow"));if("function"===typeof t.i18n.then)return n.state={i18nLoadedAt:null,ready:!1},at()(n,Object(Z.e)("Detected a promise instead of an i18next instance. Probably you passed the return value of the i18next.init() function, this is not possible anymore with v13 of i18next. Just pass in the i18next instance directly."));Object(Z.b)(t),t.i18n.options&&t.i18n.options.isInitialSSR&&(t.i18nOptions.wait=!1);var r=n.getNamespaces();t.reportNS&&r.forEach(t.reportNS);var i=t.i18n.languages&&t.i18n.languages[0],o=!!i&&r.every((function(e){return t.i18n.hasResourceBundle(i,e)}));return n.state={i18nLoadedAt:null,ready:o},n.t=n.getI18nTranslate(),n.onI18nChanged=n.onI18nChanged.bind(St()(St()(n))),n.getI18nTranslate=n.getI18nTranslate.bind(St()(St()(n))),n.namespaces=n.getNamespaces.bind(St()(St()(n))),n}return ct()(e,t),it()(e,[{key:"componentDidMount",value:function(){this.loadNamespaces()}},{key:"componentDidUpdate",value:function(t){this.props.ns&&t.ns!==this.props.ns&&this.loadNamespaces()}},{key:"componentWillUnmount",value:function(){var t=this,e=this.props,n=e.i18n,r=e.i18nOptions;if(this.mounted=!1,this.onI18nChanged){if(r.bindI18n)r.bindI18n.split(" ").forEach((function(e){return n.off(e,t.onI18nChanged)}));if(r.bindStore)r.bindStore.split(" ").forEach((function(e){return n.store&&n.store.off(e,t.onI18nChanged)}))}}},{key:"onI18nChanged",value:function(){var t=this.props.i18nOptions,e=this.state.ready;this.mounted&&(!e&&t.omitBoundRerender||(this.t=this.getI18nTranslate(),this.setState({i18nLoadedAt:new Date})))}},{key:"getI18nTranslate",value:function(){var t=this.props,e=t.i18n,n=t.i18nOptions,r=this.getNamespaces();return e.getFixedT(null,"fallback"===n.nsMode?r:r&&r.length?r[0]:"translation")}},{key:"getNamespaces",value:function(){var t=this.props,e=t.i18n,n=t.ns,r=t.defaultNS,i="function"===typeof n?n(this.props):n||r||e.options&&e.options.defaultNS;return"string"===typeof i?[i]:i||[]}},{key:"loadNamespaces",value:function(){var t=this,e=this.props,n=e.i18n,r=e.i18nOptions,i=this.state.ready,o=function(){r.bindI18n&&n&&n.on(r.bindI18n,t.onI18nChanged),r.bindStore&&n.store&&n.store.on(r.bindStore,t.onI18nChanged)};this.mounted=!0,n.loadNamespaces(this.getNamespaces(),(function(){var e=function(){t.mounted&&!i&&t.setState({ready:!0},(function(){r.wait||t.onI18nChanged()})),r.wait&&t.mounted&&o()};if(n.isInitialized)e();else{n.on("initialized",(function t(){setTimeout((function(){n.off("initialized",t)}),1e3),e()}))}})),r.wait||o()}},{key:"render",value:function(){var t=this.props,e=t.children,n=t.i18n,r=t.defaultNS,i=t.reportNS,o=t.i18nOptions,a=(this.state||{ready:!1}).ready,s=this.t;return!a&&o.wait?null:(n.options&&n.options.isInitialSSR&&!wt&&(wt=!0,setTimeout((function(){delete n.options.isInitialSSR}),100)),ft.a.createElement(Et.Provider,{value:{i18n:n,t:s,defaultNS:r,reportNS:i,lng:n&&n.language}},e(this.t,{i18n:n,t:s,lng:n.language,ready:a})))}}]),e}(ht.Component),Tt=_t()(xt);function Lt(t){return t.displayName||t.name||"Component"}function Ct(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=function(r){function i(){return nt()(this,i),at()(this,ut()(i).apply(this,arguments))}return ct()(i,r),it()(i,[{key:"shouldComponentUpdate",value:function(t){return!this.props.i18nOptions.usePureComponent&&!e.usePureComponent||!Object(Z.c)(this.props,t)}},{key:"render",value:function(){var r=this,i=this.props,o=i.namespaces,a=i.i18nOptions,s=tt()({},a,e),u={};return s.innerRef&&(u.ref=s.innerRef),ft.a.createElement(Tt,tt()({ns:o||t},this.props,{i18nOptions:Object.keys(s).length>0?s:null}),(function(t,e){var i=e.ready,o=Q()(e,["ready"]);return ft.a.createElement(n,tt()({tReady:i},r.props,u,o))}))}}]),i}(ht.Component),i=_t()(r);return i.WrappedComponent=n,i.displayName="LoadNamespace(".concat(Lt(n),")"),i.namespaces=t,dt()(i,n)}}Ct.setDefaults=mt,Ct.setI18n=yt;var At=n(71),Mt=n.n(At),Rt=n(363),Ot=n.n(Rt);function Pt(t){return t&&(t.children||t.props&&t.props.children)}function It(t){return t&&t.children?t.children:t.props&&t.props.children}function Nt(t,e,n){if(""===e)return[];if(!t)return[e];var r={};!function t(e){"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),e.forEach((function(e){"string"!==typeof e&&(Pt(e)?t(It(e)):"object"!==Mt()(e)||ft.a.isValidElement(e)||Object.assign(r,e))}))}(t),e=n.services.interpolator.interpolate(e,r,n.language);var i=function t(e,n){return"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),n.reduce((function(n,r,i){if("tag"===r.type){var o=e[parseInt(r.name,10)]||{},a=ft.a.isValidElement(o);if("string"===typeof o)n.push(o);else if(Pt(o)){var s=t(It(o),r.children);o.dummy&&(o.children=s),n.push(ft.a.cloneElement(o,tt()({},o.props,{key:i}),s))}else if("object"!==Mt()(o)||a)n.push(o);else{var u=r.children[0]?r.children[0].content:null;u&&n.push(u)}}else"text"===r.type&&n.push(r.content);return n}),[])}([{dummy:!0,children:t}],Ot.a.parse("<0>".concat(e,"</0>")));return It(i[0])}var Dt=function(t){function e(){return nt()(this,e),at()(this,ut()(e).apply(this,arguments))}return ct()(e,t),it()(e,[{key:"render",value:function(){var t=this.props,e=t.children,n=t.count,r=t.parent,i=t.i18nKey,o=t.tOptions,a=t.values,s=t.defaults,u=t.components,l=t.ns,c=t.i18n,h=t.t,f=(t.defaultNS,t.reportNS,t.lng,t.i18nOptions,Q()(t,["children","count","parent","i18nKey","tOptions","values","defaults","components","ns","i18n","t","defaultNS","reportNS","lng","i18nOptions"])),p=h||c.t.bind(c),d=c.options&&c.options.react||{},g=void 0!==r?r:d.defaultTransParent,m=s||function t(e,n,r){return n?("[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),n.forEach((function(n,r){var i="".concat(r);if("string"===typeof n)e="".concat(e).concat(n);else if(Pt(n))e="".concat(e,"<").concat(i,">").concat(t("",It(n),r+1),"</").concat(i,">");else if(ft.a.isValidElement(n))e="".concat(e,"<").concat(i,"></").concat(i,">");else if("object"===Mt()(n)){var o=tt()({},n),a=o.format;delete o.format;var s=Object.keys(o);a&&1===s.length?e="".concat(e,"{{").concat(s[0],", ").concat(a,"}}"):1===s.length?e="".concat(e,"{{").concat(s[0],"}}"):Object(Z.d)("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",n)}else Object(Z.d)("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",n)})),e):""}("",e)||d.transEmptyNodeValue,y=d.hashTransKey,v=i||(y?y(m):m),E=a?{}:{interpolation:{prefix:"#$?",suffix:"?$#"}},_=v?p(v,tt()({},o,a,E,{defaultValue:m,count:n,ns:l})):m;if(d.exposeNamespace){var b="string"===typeof p.ns?p.ns:p.ns[0];if(i&&c.options&&c.options.nsSeparator&&i.indexOf(c.options.nsSeparator)>-1)b=i.split(c.options.nsSeparator)[0];p.ns&&(f["data-i18next-options"]=JSON.stringify({ns:b}))}return g?ft.a.createElement(g,f,Nt(u||e,_,c)):Nt(u||e,_,c)}}]),e}(ft.a.Component),kt=(_t()(Dt),ht.Component,function(t){function e(t){var n;return nt()(this,e),n=at()(this,ut()(e).call(this,t)),Object(Z.a)('Interpolate is deprecated and will be removed in the next major version (v9.0.0). Usage can be replaced by the "Trans" component'),n}return ct()(e,t),it()(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.i18n,r=e.t,i=e.i18nKey,o=e.options,a=e.className,s=e.style,u=this.props.parent||"span",l=this.props.regexp||n.services.interpolator.regexp,c=this.props.useDangerouslySetInnerHTML||!1,h=this.props.dangerouslySetInnerHTMLPartElement||"span",f=r(i,tt()({},{},o,{interpolation:{prefix:"#$?",suffix:"?$#"}}));if(!f||"string"!==typeof f)return ft.a.createElement("noscript",null);var p=[];f.split(l).reduce((function(e,r,i){var o;if(i%2===0){if(0===r.length)return e;o=c?ft.a.createElement(h,{dangerouslySetInnerHTML:{__html:r}}):r}else o=function(t,e){if(t.indexOf(n.options.interpolation.formatSeparator)<0)return void 0===e[t]&&n.services.logger.warn("interpolator: missed to pass in variable ".concat(t," for interpolating ").concat(f)),e[t];var r=t.split(n.options.interpolation.formatSeparator),i=r.shift().trim(),o=r.join(n.options.interpolation.formatSeparator).trim();return void 0===e[i]&&n.services.logger.warn("interpolator: missed to pass in variable ".concat(i," for interpolating ").concat(f)),n.options.interpolation.format(e[i],o,n.language)}(r,t.props);return e.push(o),e}),p);var d={};if(n.options.react&&n.options.react.exposeNamespace){var g="string"===typeof r.ns?r.ns:r.ns[0];if(i&&n.options.nsSeparator&&i.indexOf(n.options.nsSeparator)>-1)g=i.split(n.options.nsSeparator)[0];r.ns&&(d["data-i18next-options"]=JSON.stringify({ns:g}))}return a&&(d.className=a),s&&(d.style=s),ft.a.createElement.apply(this,[u,d].concat(p))}}]),e}(ht.Component)),Ft=(_t()(kt),{cz:{backOffice:{formLabels:{allApps:"V\u0161echny aplikace",application:"Aplikace",boundingBox:"Bounding box",color:"Barva",configuration:"Konfigurace",description:"Popis",geometry:"Geometrie",name:"N\xe1zev",nameInternal:"Intern\xed n\xe1zev",period:"Perioda",state:"Stav",type:"Typ",unit:"Jednotka",valueType:"Typ hodnoty"},metadata:{names:{attribute:"Atribut",attribute_plural:"Atributy",case:"P\u0159\xedpad",case_plural:"P\u0159\xedpady",esponFuoreIndicator:"Indik\xe1tor",esponFuoreIndicator_plural:"Indik\xe1tory",layerTemplate:"\u0160ablona vrstvy",layerTemplate_plural:"\u0160ablony vrstev",period:"Perioda",period_plural:"Periody",place:"M\xedsto",place_plural:"M\xedsta",tag:"Tag",tag_plural:"Tagy",view:"Pohled",view_plural:"Pohledy"}},apps:{names:{scope:"R\xe1mec",scope_plural:"R\xe1mce",configuration:"Konfigurace",configuration_plural:"Konfigurace",layerTrees:"Stromy vrstev"}}},common:{days:{monday:"Pond\u011bl\xed",wednesday:"St\u0159eda"},cancelCapitalized:"Zru\u0161it",createCapitalized:"Vytvo\u0159it",deleteCapitalized:"Smazat",months:{january:"Leden",february:"\xdanor",march:"B\u0159ezen"},nameCapitalized:"N\xe1zev",saveCapitalized:"Ulo\u017eit",user:{login:"P\u0159ihl\xe1sit",logout:"Odhl\xe1sit",passphrase:"Heslo"},layers:{backgroundLayer:"Podkladov\xe1 vrstva",backgroundLayer_plural:"Podkladov\xe9 vrstvy",layers:"Vrstvy",layer:"Vrstva"}}},en:{backOffice:{formLabels:{allApps:"All applications",application:"Application",boundingBox:"Bounding box",color:"Color",configuration:"Configuration",description:"Description",geometry:"Geometry",name:"Name",nameInternal:"Internal name",period:"Period",state:"State",type:"Type",unit:"Unit",valueType:"Value type"},metadata:{names:{attribute:"Attribute",attribute_plural:"Attributes",case:"Case",case_plural:"Cases",esponFuoreIndicator:"Indicator",esponFuoreIndicator_plural:"Indicators",layerTemplate:"Layer template",layerTemplate_plural:"Layer templates",period:"Period",period_plural:"Periods",place:"Place",place_plural:"Places",tag:"Tag",tag_plural:"Tags",view:"View",view_plural:"Views"}},apps:{names:{scope:"Scope",scope_plural:"Scopes",configuration:"Configuration",configuration_plural:"Configurations",layerTrees:"Layer trees"}}},common:{days:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday"},cancelCapitalized:"Cancel",createCapitalized:"Create",deleteCapitalized:"Delete",months:{january:"January",february:"February",march:"March"},nameCapitalized:"Name",saveCapitalized:"Save",user:{login:"Log in",logout:"Log out",passphrase:"Passphrase"},layers:{backgroundLayer:"Background layer",backgroundLayer_plural:"Background layers",layers:"Layers",layer:"Layer"}}}});X.use(vt).init({resources:Ft,lng:"en",fallbackLng:"en",keySeparator:".",interpolation:{escapeValue:!1},defaultNS:"common",fallbackNS:"common"});var Vt={addI18nResources:function(t,e){i()(e,(function(e,n){X.addResourceBundle(n,t,e,!0,!0)}))}}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;(u=new Error(e.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(t,e,n){var r=n(469),i=n(274)((function(t,e){return null==t?{}:r(t,e)}));t.exports=i},function(t,e,n){var r=n(179),i=n(396);t.exports=function t(e,n,o,a,s){var u=-1,l=e.length;for(o||(o=i),s||(s=[]);++u<l;){var c=e[u];n>0&&o(c)?n>1?t(c,n-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},function(t,e,n){var r=n(397),i=n(39),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e,n){(function(t){var r=n(61),i=n(434),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(this,n(56)(t))},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(437),i=n(180),o=n(438),a=n(259),s=n(439),u=n(72),l=n(249),c=l(r),h=l(i),f=l(o),p=l(a),d=l(s),g=u;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||o&&"[object Promise]"!=g(o.resolve())||a&&"[object Set]"!=g(new a)||s&&"[object WeakMap]"!=g(new s))&&(g=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case c:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=g},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(120),i=n(66),o=n(122),a=n(22);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},function(t,e,n){var r=n(256),i=n(470),o=n(66);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var t=s(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){var r=n(66),i=n(39);t.exports=function(t){return i(t)&&r(t)}},function(t,e,n){var r=n(84),i=n(70);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){var r=n(565),i=n(300),o=n(107);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){var r=n(129);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){var r=n(109),i=n(73);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){var r=n(132);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e){t.exports=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}},function(t,e,n){"use strict";var r=n(352),i=n.n(r),o=function(){var t={};return{getContext:function(e,n){return t[e]||function(e,n){return t[e]=i.a.createContext(n),t[e]}(e,n)}}}();e.a=o},function(t,e,n){var r=n(186),i=n(276),o=n(37),a=n(9),s=n(284);t.exports=function(t,e){return(a(t)?r:i)(t,s(o(e,3)))}},function(t,e,n){var r=n(639);t.exports=function(t,e,n){return null==t?t:r(t,e,n)}},function(t,e,n){var r=n(37),i=n(284),o=n(75);t.exports=function(t,e){return o(t,i(r(e)))}},function(t,e,n){var r=n(118),i=n(105),o=n(191),a=n(128),s=i((function(t){return o(r(t,1,a,!0))}));t.exports=s},function(t,e,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),u=n(1),l=[],c=[];function h(t){var e=t(),n={loading:!0,loaded:null,error:null};return n.promise=e.then((function(t){return n.loading=!1,n.loaded=t,t})).catch((function(t){throw n.loading=!1,n.error=t,t})),n}function f(t){var e={loading:!1,loaded:{},error:null},n=[];try{Object.keys(t).forEach((function(r){var i=h(t[r]);i.loading?e.loading=!0:(e.loaded[r]=i.loaded,e.error=i.error),n.push(i.promise),i.promise.then((function(t){e.loaded[r]=t})).catch((function(t){e.error=t}))}))}catch(r){e.error=r}return e.promise=Promise.all(n).then((function(t){return e.loading=!1,t})).catch((function(t){throw e.loading=!1,t})),e}function p(t,e){return s.createElement((n=t)&&n.__esModule?n.default:n,e);var n}function d(t,e){var h,f;if(!e.loading)throw new Error("react-loadable requires a `loading` component");var d=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:p,webpack:null,modules:null},e),g=null;function m(){return g||(g=t(d.loader)),g.promise}return l.push(m),"function"===typeof d.webpack&&c.push((function(){if(t=d.webpack,"object"===r(n.m)&&t().every((function(t){return"undefined"!==typeof t&&"undefined"!==typeof n.m[t]})))return m();var t})),f=h=function(e){function n(r){i(this,n);var a=o(this,e.call(this,r));return a.retry=function(){a.setState({error:null,loading:!0,timedOut:!1}),g=t(d.loader),a._loadModule()},m(),a.state={error:g.error,pastDelay:!1,timedOut:!1,loading:g.loading,loaded:g.loaded},a}return a(n,e),n.preload=function(){return m()},n.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()},n.prototype._loadModule=function(){var t=this;if(this.context.loadable&&Array.isArray(d.modules)&&d.modules.forEach((function(e){t.context.loadable.report(e)})),g.loading){"number"===typeof d.delay&&(0===d.delay?this.setState({pastDelay:!0}):this._delay=setTimeout((function(){t.setState({pastDelay:!0})}),d.delay)),"number"===typeof d.timeout&&(this._timeout=setTimeout((function(){t.setState({timedOut:!0})}),d.timeout));var e=function(){t._mounted&&(t.setState({error:g.error,loaded:g.loaded,loading:g.loading}),t._clearTimeouts())};g.promise.then((function(){e()})).catch((function(t){e()}))}},n.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()},n.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)},n.prototype.render=function(){return this.state.loading||this.state.error?s.createElement(d.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry}):this.state.loaded?d.render(this.state.loaded,this.props):null},n}(s.Component),h.contextTypes={loadable:u.shape({report:u.func.isRequired})},f}function g(t){return d(h,t)}g.Map=function(t){if("function"!==typeof t.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return d(f,t)};var m=function(t){function e(){return i(this,e),o(this,t.apply(this,arguments))}return a(e,t),e.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}},e.prototype.render=function(){return s.Children.only(this.props.children)},e}(s.Component);function y(t){for(var e=[];t.length;){var n=t.pop();e.push(n())}return Promise.all(e).then((function(){if(t.length)return y(t)}))}m.propTypes={report:u.func.isRequired},m.childContextTypes={loadable:u.shape({report:u.func.isRequired}).isRequired},g.Capture=m,g.preloadAll=function(){return new Promise((function(t,e){y(l).then(t,e)}))},g.preloadReady=function(){return new Promise((function(t,e){y(c).then(t,t)}))},t.exports=g},function(t,e,n){var r=n(142),i=n(406),o=n(407),a=n(408),s=n(409),u=n(410);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=u,t.exports=l},function(t,e,n){var r=n(401),i=n(402),o=n(403),a=n(404),s=n(405);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(120);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(82)(Object,"create");t.exports=r},function(t,e,n){var r=n(423);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(182),i=n(428),o=n(429);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(435),i=n(100),o=n(188),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(101),i=n(103);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){var r=n(463);t.exports=function(t){var e=r(t),n=e%1;return e===e?n?e-n:e:0}},function(t,e,n){var r=n(268);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(67).Symbol;t.exports=r},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(578),i=n(579),o=n(580),a=n(581),s=n(582);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(209);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(86)(Object,"create");t.exports=r},function(t,e,n){var r=n(600);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){var r=n(690),i=n(691),o=n(692),a=n(693),s=n(694);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(220);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(68).Symbol;t.exports=r},function(t,e,n){var r=n(87)(Object,"create");t.exports=r},function(t,e,n){var r=n(714);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(734),i=n(740),o=n(166);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){var r=n(330),i=n(224);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(251),i=n(37),o=n(491),a=n(9),s=n(125);t.exports=function(t,e,n){var u=a(t)?r:o;return n&&s(t,e,n)&&(e=void 0),u(t,i(e,3))}},function(t,e,n){var r=n(492),i=n(493),o=n(37),a=n(9),s=n(125);t.exports=function(t,e,n){var u=a(t)?r:i;return n&&s(t,e,n)&&(e=void 0),u(t,o(e,3))}},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(59),a=n(13),s=n(57),u=n(1),l=n.n(u),c=n(232),h=n.n(c),f=n(233),p=n.n(f),d=n(173);function g(t){return(g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(){return(_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){E(t,e,n[e])}))}return t}function S(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function L(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?L(t):e}function A(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var M=function(){};function R(t,e){return e?"-"===e[0]?t+e:t+"__"+e:t}function O(t,e,n,r){var i=[e,r];if(n&&t)for(var o in n)n.hasOwnProperty(o)&&n[o]&&i.push("".concat(R(t,o)));return i.filter((function(t){return t})).map((function(t){return String(t).trim()})).join(" ")}var P=function(t){return Array.isArray(t)?t.filter(Boolean):"object"===g(t)&&null!==t?[t]:[]};function I(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function N(t){return I(t)?window.pageYOffset:t.scrollTop}function D(t,e){I(t)?window.scrollTo(0,e):t.scrollTop=e}function k(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function F(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M,i=N(t),o=e-i,a=10,s=0;function u(){var e=k(s+=a,i,o,n);D(t,e),s<n?h()(u):r(t)}u()}function V(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}function j(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,i=t.placement,o=t.shouldScroll,a=t.isFixedPosition,s=t.theme.spacing,u=function(t){var e=getComputedStyle(t),n="absolute"===e.position,r=/(auto|scroll)/,i=document.documentElement;if("fixed"===e.position)return i;for(var o=t;o=o.parentElement;)if(e=getComputedStyle(o),(!n||"static"!==e.position)&&r.test(e.overflow+e.overflowY+e.overflowX))return o;return i}(n),l={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return l;var c=u.getBoundingClientRect().height,h=n.getBoundingClientRect(),f=h.bottom,p=h.height,d=h.top,g=n.offsetParent.getBoundingClientRect().top,m=window.innerHeight,y=N(u),v=parseInt(getComputedStyle(n).marginBottom,10),E=parseInt(getComputedStyle(n).marginTop,10),_=g-E,b=m-d,S=_+y,w=c-y-d,x=f-m+y+v,T=y+d-E;switch(i){case"auto":case"bottom":if(b>=p)return{placement:"bottom",maxHeight:e};if(w>=p&&!a)return o&&F(u,x,160),{placement:"bottom",maxHeight:e};if(!a&&w>=r||a&&b>=r)return o&&F(u,x,160),{placement:"bottom",maxHeight:a?b-v:w-v};if("auto"===i||a){var L=e,C=a?_:S;return C>=r&&(L=Math.min(C-v-s.controlHeight,e)),{placement:"top",maxHeight:L}}if("bottom"===i)return D(u,x),{placement:"bottom",maxHeight:e};break;case"top":if(_>=p)return{placement:"top",maxHeight:e};if(S>=p&&!a)return o&&F(u,T,160),{placement:"top",maxHeight:e};if(!a&&S>=r||a&&_>=r){var A=e;return(!a&&S>=r||a&&_>=r)&&(A=a?_-E:S-E),o&&F(u,T,160),{placement:"top",maxHeight:A}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return l}var B=function(t){return"auto"===t?"bottom":t},U=function(t){function e(){var t,n;m(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return E(L(L(n=C(this,(t=w(e)).call.apply(t,[this].concat(i))))),"state",{maxHeight:n.props.maxMenuHeight,placement:null}),E(L(L(n)),"getPlacement",(function(t){var e=n.props,r=e.minMenuHeight,i=e.maxMenuHeight,o=e.menuPlacement,a=e.menuPosition,s=e.menuShouldScrollIntoView,u=e.theme,l=n.context.getPortalPlacement;if(t){var c="fixed"===a,h=j({maxHeight:i,menuEl:t,minHeight:r,placement:o,shouldScroll:s&&!c,isFixedPosition:c,theme:u});l&&l(h),n.setState(h)}})),E(L(L(n)),"getUpdatedProps",(function(){var t=n.props.menuPlacement,e=n.state.placement||B(t);return b({},n.props,{placement:e,maxHeight:n.state.maxHeight})})),n}return S(e,t),v(e,[{key:"render",value:function(){return(0,this.props.children)({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),e}(r.Component);E(U,"contextTypes",{getPortalPlacement:l.a.func});var G=function(t){var e=t.theme,n=e.spacing.baseUnit;return{color:e.colors.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px"),textAlign:"center"}},K=G,W=G,z=function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,s=t.innerProps;return i.a.createElement("div",_({className:r(Object(a.css)(o("noOptionsMessage",t)),{"menu-notice":!0,"menu-notice--no-options":!0},n)},s),e)};z.defaultProps={children:"No options"};var Y=function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,s=t.innerProps;return i.a.createElement("div",_({className:r(Object(a.css)(o("loadingMessage",t)),{"menu-notice":!0,"menu-notice--loading":!0},n)},s),e)};Y.defaultProps={children:"Loading..."};var H=function(t){function e(){var t,n;m(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return E(L(L(n=C(this,(t=w(e)).call.apply(t,[this].concat(i))))),"state",{placement:null}),E(L(L(n)),"getPortalPlacement",(function(t){var e=t.placement;e!==B(n.props.menuPlacement)&&n.setState({placement:e})})),n}return S(e,t),v(e,[{key:"getChildContext",value:function(){return{getPortalPlacement:this.getPortalPlacement}}},{key:"render",value:function(){var t=this.props,e=t.appendTo,n=t.children,r=t.controlElement,o=t.menuPlacement,u=t.menuPosition,l=t.getStyles,c="fixed"===u;if(!e&&!c||!r)return null;var h=this.state.placement||B(o),f=function(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}(r),p=c?0:window.pageYOffset,d={offset:f[h]+p,position:u,rect:f},g=i.a.createElement("div",{className:Object(a.css)(l("menuPortal",d))},n);return e?Object(s.createPortal)(g,e):g}}]),e}(r.Component);E(H,"childContextTypes",{getPortalPlacement:l.a.func});var q=Array.isArray,X=Object.keys,Z=Object.prototype.hasOwnProperty;function J(t,e){try{return function t(e,n){if(e===n)return!0;if(e&&n&&"object"==g(e)&&"object"==g(n)){var r,i,o,a=q(e),s=q(n);if(a&&s){if((i=e.length)!=n.length)return!1;for(r=i;0!==r--;)if(!t(e[r],n[r]))return!1;return!0}if(a!=s)return!1;var u=e instanceof Date,l=n instanceof Date;if(u!=l)return!1;if(u&&l)return e.getTime()==n.getTime();var c=e instanceof RegExp,h=n instanceof RegExp;if(c!=h)return!1;if(c&&h)return e.toString()==n.toString();var f=X(e);if((i=f.length)!==X(n).length)return!1;for(r=i;0!==r--;)if(!Z.call(n,f[r]))return!1;for(r=i;0!==r--;)if(("_owner"!==(o=f[r])||!e.$$typeof)&&!t(e[o],n[o]))return!1;return!0}return e!==e&&n!==n}(t,e)}catch(n){if(n.message&&n.message.match(/stack|recursion/i))return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}var Q=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],$=function(t){for(var e=0;e<Q.length;e++)t=t.replace(Q[e].letters,Q[e].base);return t},tt=function(t){return t.replace(/^\s+|\s+$/g,"")},et=function(t){return"".concat(t.label," ").concat(t.value)},nt=function(t){return i.a.createElement("span",_({className:Object(a.css)({label:"a11yText",zIndex:9999,border:0,clip:"rect(1px, 1px, 1px, 1px)",height:1,width:1,position:"absolute",overflow:"hidden",padding:0,whiteSpace:"nowrap",backgroundColor:"red",color:"blue"})},t))},rt=function(t){function e(){return m(this,e),C(this,w(e).apply(this,arguments))}return S(e,t),v(e,[{key:"render",value:function(){var t=this.props,e=(t.in,t.out,t.onExited,t.appear,t.enter,t.exit,t.innerRef),n=(t.emotion,T(t,["in","out","onExited","appear","enter","exit","innerRef","emotion"]));return i.a.createElement("input",_({ref:e},n,{className:Object(a.css)({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"})}))}}]),e}(r.Component),it=function(t){function e(){return m(this,e),C(this,w(e).apply(this,arguments))}return S(e,t),v(e,[{key:"componentDidMount",value:function(){this.props.innerRef(Object(s.findDOMNode)(this))}},{key:"componentWillUnmount",value:function(){this.props.innerRef(null)}},{key:"render",value:function(){return this.props.children}}]),e}(r.Component),ot=["boxSizing","height","overflow","paddingRight","position"],at={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function st(t){t.preventDefault()}function ut(t){t.stopPropagation()}function lt(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;0===t?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function ct(){return"ontouchstart"in window||navigator.maxTouchPoints}var ht=!("undefined"===typeof window||!window.document||!window.document.createElement),ft=0,pt=function(t){function e(){var t,n;m(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return E(L(L(n=C(this,(t=w(e)).call.apply(t,[this].concat(i))))),"originalStyles",{}),E(L(L(n)),"listenerOptions",{capture:!1,passive:!1}),n}return S(e,t),v(e,[{key:"componentDidMount",value:function(){var t=this;if(ht){var e=this.props,n=e.accountForScrollbars,r=e.touchScrollTarget,i=document.body,o=i&&i.style;if(n&&ot.forEach((function(e){var n=o&&o[e];t.originalStyles[e]=n})),n&&ft<1){var a=parseInt(this.originalStyles.paddingRight,10)||0,s=document.body?document.body.clientWidth:0,u=window.innerWidth-s+a||0;Object.keys(at).forEach((function(t){var e=at[t];o&&(o[t]=e)})),o&&(o.paddingRight="".concat(u,"px"))}i&&ct()&&(i.addEventListener("touchmove",st,this.listenerOptions),r&&(r.addEventListener("touchstart",lt,this.listenerOptions),r.addEventListener("touchmove",ut,this.listenerOptions))),ft+=1}}},{key:"componentWillUnmount",value:function(){var t=this;if(ht){var e=this.props,n=e.accountForScrollbars,r=e.touchScrollTarget,i=document.body,o=i&&i.style;ft=Math.max(ft-1,0),n&&ft<1&&ot.forEach((function(e){var n=t.originalStyles[e];o&&(o[e]=n)})),i&&ct()&&(i.removeEventListener("touchmove",st,this.listenerOptions),r&&(r.removeEventListener("touchstart",lt,this.listenerOptions),r.removeEventListener("touchmove",ut,this.listenerOptions)))}}},{key:"render",value:function(){return null}}]),e}(r.Component);E(pt,"defaultProps",{accountForScrollbars:!0});var dt=function(t){function e(){var t,n;m(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return E(L(L(n=C(this,(t=w(e)).call.apply(t,[this].concat(i))))),"state",{touchScrollTarget:null}),E(L(L(n)),"getScrollTarget",(function(t){t!==n.state.touchScrollTarget&&n.setState({touchScrollTarget:t})})),E(L(L(n)),"blurSelectInput",(function(){document.activeElement&&document.activeElement.blur()})),n}return S(e,t),v(e,[{key:"render",value:function(){var t=this.props,e=t.children,n=t.isEnabled,r=this.state.touchScrollTarget;return n?i.a.createElement("div",null,i.a.createElement("div",{onClick:this.blurSelectInput,className:Object(a.css)({position:"fixed",left:0,bottom:0,right:0,top:0})}),i.a.createElement(it,{innerRef:this.getScrollTarget},e),r?i.a.createElement(pt,{touchScrollTarget:r}):null):e}}]),e}(r.PureComponent),gt=function(t){function e(){var t,n;m(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return E(L(L(n=C(this,(t=w(e)).call.apply(t,[this].concat(i))))),"isBottom",!1),E(L(L(n)),"isTop",!1),E(L(L(n)),"scrollTarget",void 0),E(L(L(n)),"touchStart",void 0),E(L(L(n)),"cancelScroll",(function(t){t.preventDefault(),t.stopPropagation()})),E(L(L(n)),"handleEventDelta",(function(t,e){var r=n.props,i=r.onBottomArrive,o=r.onBottomLeave,a=r.onTopArrive,s=r.onTopLeave,u=n.scrollTarget,l=u.scrollTop,c=u.scrollHeight,h=u.clientHeight,f=n.scrollTarget,p=e>0,d=c-h-l,g=!1;d>e&&n.isBottom&&(o&&o(t),n.isBottom=!1),p&&n.isTop&&(s&&s(t),n.isTop=!1),p&&e>d?(i&&!n.isBottom&&i(t),f.scrollTop=c,g=!0,n.isBottom=!0):!p&&-e>l&&(a&&!n.isTop&&a(t),f.scrollTop=0,g=!0,n.isTop=!0),g&&n.cancelScroll(t)})),E(L(L(n)),"onWheel",(function(t){n.handleEventDelta(t,t.deltaY)})),E(L(L(n)),"onTouchStart",(function(t){n.touchStart=t.changedTouches[0].clientY})),E(L(L(n)),"onTouchMove",(function(t){var e=n.touchStart-t.changedTouches[0].clientY;n.handleEventDelta(t,e)})),E(L(L(n)),"getScrollTarget",(function(t){n.scrollTarget=t})),n}return S(e,t),v(e,[{key:"componentDidMount",value:function(){this.startListening(this.scrollTarget)}},{key:"componentWillUnmount",value:function(){this.stopListening(this.scrollTarget)}},{key:"startListening",value:function(t){t&&(t.scrollHeight<=t.clientHeight||("function"===typeof t.addEventListener&&t.addEventListener("wheel",this.onWheel,!1),"function"===typeof t.addEventListener&&t.addEventListener("touchstart",this.onTouchStart,!1),"function"===typeof t.addEventListener&&t.addEventListener("touchmove",this.onTouchMove,!1)))}},{key:"stopListening",value:function(t){t.scrollHeight<=t.clientHeight||("function"===typeof t.removeEventListener&&t.removeEventListener("wheel",this.onWheel,!1),"function"===typeof t.removeEventListener&&t.removeEventListener("touchstart",this.onTouchStart,!1),"function"===typeof t.removeEventListener&&t.removeEventListener("touchmove",this.onTouchMove,!1))}},{key:"render",value:function(){return i.a.createElement(it,{innerRef:this.getScrollTarget},this.props.children)}}]),e}(r.Component),mt=function(t){function e(){return m(this,e),C(this,w(e).apply(this,arguments))}return S(e,t),v(e,[{key:"render",value:function(){var t=this.props,e=t.isEnabled,n=T(t,["isEnabled"]);return e?i.a.createElement(gt,n):this.props.children}}]),e}(r.Component);E(mt,"defaultProps",{isEnabled:!0});var yt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.isSearchable,r=e.isMulti,i=e.label,o=e.isDisabled;switch(t){case"menu":return"Use Up and Down to choose options".concat(o?"":", press Enter to select the currently focused option",", press Escape to exit the menu, press Tab to select the option and exit the menu.");case"input":return"".concat(i||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value"}},vt=function(t,e){var n=e.value,r=e.isDisabled;if(n)switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"select-option":return"option ".concat(n,r?" is disabled. Select another option.":", selected.")}},Et=function(t){return!!t.isDisabled},_t=function(t){function e(){return m(this,e),C(this,w(e).apply(this,arguments))}return S(e,t),v(e,[{key:"render",value:function(){var t=this.props,e=t.children,n=t.className,r=t.cx,o=t.isMulti,s=t.getStyles,u=t.hasValue;return i.a.createElement("div",{className:r(Object(a.css)(s("valueContainer",this.props)),{"value-container":!0,"value-container--is-multi":o,"value-container--has-value":u},n)},e)}}]),e}(r.Component),bt=function(t){var e=t.size,n=T(t,["size"]);return i.a.createElement("svg",_({height:e,width:e,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",className:Object(a.css)({display:"inline-block",fill:"currentColor",lineHeight:1,stroke:"currentColor",strokeWidth:0})},n))},St=function(t){return i.a.createElement(bt,_({size:20},t),i.a.createElement("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},wt=function(t){return i.a.createElement(bt,_({size:20},t),i.a.createElement("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},xt=function(t){var e=t.isFocused,n=t.theme,r=n.spacing.baseUnit,i=n.colors;return{label:"indicatorContainer",color:e?i.neutral60:i.neutral20,display:"flex",padding:2*r,transition:"color 150ms",":hover":{color:e?i.neutral80:i.neutral40}}},Tt=xt,Lt=xt,Ct=!1,At=function(t){var e=t.color,n=t.delay,r=t.offset;return i.a.createElement("span",{className:Object(a.css)({animationDuration:"1s",animationDelay:"".concat(n,"ms"),animationIterationCount:"infinite",animationName:"react-select-loading-indicator",animationTimingFunction:"ease-in-out",backgroundColor:e,borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":null,height:"1em",verticalAlign:"top",width:"1em"})})},Mt=function(t){var e=t.className,n=t.cx,r=t.getStyles,o=t.innerProps,s=t.isFocused,u=t.isRtl,l=t.theme.colors,c=s?l.neutral80:l.neutral20;return Ct||(Object(a.injectGlobal)("@keyframes ","react-select-loading-indicator","{0%,80%,100%{opacity:0;}40%{opacity:1;}};"),Ct=!0),i.a.createElement("div",_({},o,{className:n(Object(a.css)(r("loadingIndicator",t)),{indicator:!0,"loading-indicator":!0},e)}),i.a.createElement(At,{color:c,delay:0,offset:u}),i.a.createElement(At,{color:c,delay:160,offset:!0}),i.a.createElement(At,{color:c,delay:320,offset:!u}))};Mt.defaultProps={size:4};var Rt=function(t){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:t?0:1,outline:0,padding:0,color:"inherit"}},Ot=function(t){var e=t.children,n=t.innerProps;return i.a.createElement("div",n,e)},Pt=Ot,It=Ot,Nt=function(t){function e(){return m(this,e),C(this,w(e).apply(this,arguments))}return S(e,t),v(e,[{key:"render",value:function(){var t=this.props,e=t.children,n=t.innerProps;return i.a.createElement("div",n,e||i.a.createElement(St,{size:14}))}}]),e}(r.Component),Dt=function(t){function e(){return m(this,e),C(this,w(e).apply(this,arguments))}return S(e,t),v(e,[{key:"render",value:function(){var t=this.props,e=t.children,n=t.className,r=t.components,o=t.cx,s=t.data,u=t.getStyles,l=t.innerProps,c=t.isDisabled,h=t.removeProps,f=t.selectProps,p=r.Container,d=r.Label,g=r.Remove,m=b({className:o(Object(a.css)(u("multiValue",this.props)),{"multi-value":!0,"multi-value--is-disabled":c},n)},l),y={className:o(Object(a.css)(u("multiValueLabel",this.props)),{"multi-value__label":!0},n)},v=b({className:o(Object(a.css)(u("multiValueRemove",this.props)),{"multi-value__remove":!0},n)},h);return i.a.createElement(p,{data:s,innerProps:m,selectProps:f},i.a.createElement(d,{data:s,innerProps:y,selectProps:f},e),i.a.createElement(g,{data:s,innerProps:v,selectProps:f}))}}]),e}(r.Component);E(Dt,"defaultProps",{cropWithEllipsis:!0});var kt={ClearIndicator:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,s=t.innerProps;return i.a.createElement("div",_({},s,{className:r(Object(a.css)(o("clearIndicator",t)),{indicator:!0,"clear-indicator":!0},n)}),e||i.a.createElement(St,null))},Control:function(t){var e=t.children,n=t.cx,r=t.getStyles,o=t.className,s=t.isDisabled,u=t.isFocused,l=t.innerRef,c=t.innerProps,h=t.menuIsOpen;return i.a.createElement("div",_({ref:l,className:n(Object(a.css)(r("control",t)),{control:!0,"control--is-disabled":s,"control--is-focused":u,"control--menu-is-open":h},o)},c),e)},DropdownIndicator:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,s=t.innerProps;return i.a.createElement("div",_({},s,{className:r(Object(a.css)(o("dropdownIndicator",t)),{indicator:!0,"dropdown-indicator":!0},n)}),e||i.a.createElement(wt,null))},DownChevron:wt,CrossIcon:St,Group:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,s=t.Heading,u=t.headingProps,l=t.label,c=t.theme,h=t.selectProps;return i.a.createElement("div",{className:r(Object(a.css)(o("group",t)),{group:!0},n)},i.a.createElement(s,_({},u,{selectProps:h,theme:c,getStyles:o,cx:r}),l),i.a.createElement("div",null,e))},GroupHeading:function(t){var e=t.className,n=t.cx,r=t.getStyles,o=t.theme,s=(t.selectProps,T(t,["className","cx","getStyles","theme","selectProps"]));return i.a.createElement("div",_({className:n(Object(a.css)(r("groupHeading",b({theme:o},s))),{"group-heading":!0},e)},s))},IndicatorsContainer:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles;return i.a.createElement("div",{className:r(Object(a.css)(o("indicatorsContainer",t)),{indicators:!0},n)},e)},IndicatorSeparator:function(t){var e=t.className,n=t.cx,r=t.getStyles,o=t.innerProps;return i.a.createElement("span",_({},o,{className:n(Object(a.css)(r("indicatorSeparator",t)),{"indicator-separator":!0},e)}))},Input:function(t){var e=t.className,n=t.cx,r=t.getStyles,o=t.innerRef,s=t.isHidden,u=t.isDisabled,l=t.theme,c=(t.selectProps,T(t,["className","cx","getStyles","innerRef","isHidden","isDisabled","theme","selectProps"]));return i.a.createElement("div",{className:Object(a.css)(r("input",b({theme:l},c)))},i.a.createElement(p.a,_({className:n(null,{input:!0},e),inputRef:o,inputStyle:Rt(s),disabled:u},c)))},LoadingIndicator:Mt,Menu:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,s=t.innerRef,u=t.innerProps,l=r(Object(a.css)(o("menu",t)),{menu:!0},n);return i.a.createElement("div",_({className:l},u,{ref:s}),e)},MenuList:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,s=t.isMulti,u=t.innerRef;return i.a.createElement("div",{className:r(Object(a.css)(o("menuList",t)),{"menu-list":!0,"menu-list--is-multi":s},n),ref:u},e)},MenuPortal:H,LoadingMessage:Y,NoOptionsMessage:z,MultiValue:Dt,MultiValueContainer:Pt,MultiValueLabel:It,MultiValueRemove:Nt,Option:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,s=t.isDisabled,u=t.isFocused,l=t.isSelected,c=t.innerRef,h=t.innerProps;return i.a.createElement("div",_({ref:c,className:r(Object(a.css)(o("option",t)),{option:!0,"option--is-disabled":s,"option--is-focused":u,"option--is-selected":l},n)},h),e)},Placeholder:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,s=t.innerProps;return i.a.createElement("div",_({className:r(Object(a.css)(o("placeholder",t)),{placeholder:!0},n)},s),e)},SelectContainer:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,s=t.innerProps,u=t.isDisabled,l=t.isRtl;return i.a.createElement("div",_({className:r(Object(a.css)(o("container",t)),{"--is-disabled":u,"--is-rtl":l},n)},s),e)},SingleValue:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,s=t.isDisabled,u=t.innerProps;return i.a.createElement("div",_({className:r(Object(a.css)(o("singleValue",t)),{"single-value":!0,"single-value--is-disabled":s},n)},u),e)},ValueContainer:_t},Ft=function(t){return b({},kt,t.components)},Vt={clearIndicator:Lt,container:function(t){var e=t.isDisabled;return{label:"container",direction:t.isRtl?"rtl":null,pointerEvents:e?"none":null,position:"relative"}},control:function(t){var e=t.isDisabled,n=t.isFocused,r=t.theme,i=r.colors,o=r.borderRadius,a=r.spacing;return{label:"control",alignItems:"center",backgroundColor:e?i.neutral5:i.neutral0,borderColor:e?i.neutral10:n?i.primary:i.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(i.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:n?i.primary:i.neutral30}}},dropdownIndicator:Tt,group:function(t){var e=t.theme.spacing;return{paddingBottom:2*e.baseUnit,paddingTop:2*e.baseUnit}},groupHeading:function(t){var e=t.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:3*e.baseUnit,paddingRight:3*e.baseUnit,textTransform:"uppercase"}},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(t){var e=t.isDisabled,n=t.theme,r=n.spacing.baseUnit,i=n.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:e?i.neutral10:i.neutral20,marginBottom:2*r,marginTop:2*r,width:1}},input:function(t){var e=t.isDisabled,n=t.theme,r=n.spacing,i=n.colors;return{margin:r.baseUnit/2,paddingBottom:r.baseUnit/2,paddingTop:r.baseUnit/2,visibility:e?"hidden":"visible",color:i.neutral80}},loadingIndicator:function(t){var e=t.isFocused,n=t.size,r=t.theme,i=r.colors,o=r.spacing.baseUnit;return{label:"loadingIndicator",color:e?i.neutral60:i.neutral20,display:"flex",padding:2*o,transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"}},loadingMessage:W,menu:function(t){var e,n=t.placement,r=t.theme,i=r.borderRadius,o=r.spacing,a=r.colors;return E(e={label:"menu"},function(t){return t?{bottom:"top",top:"bottom"}[t]:"bottom"}(n),"100%"),E(e,"backgroundColor",a.neutral0),E(e,"borderRadius",i),E(e,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),E(e,"marginBottom",o.menuGutter),E(e,"marginTop",o.menuGutter),E(e,"position","absolute"),E(e,"width","100%"),E(e,"zIndex",1),e},menuList:function(t){var e=t.maxHeight,n=t.theme.spacing.baseUnit;return{maxHeight:e,overflowY:"auto",paddingBottom:n,paddingTop:n,position:"relative",WebkitOverflowScrolling:"touch"}},menuPortal:function(t){var e=t.rect,n=t.offset,r=t.position;return{left:e.left,position:r,top:n,width:e.width,zIndex:1}},multiValue:function(t){var e=t.theme,n=e.spacing,r=e.borderRadius;return{label:"multiValue",backgroundColor:e.colors.neutral10,borderRadius:r/2,display:"flex",margin:n.baseUnit/2,minWidth:0}},multiValueLabel:function(t){var e=t.theme,n=e.borderRadius,r=e.colors,i=t.cropWithEllipsis;return{borderRadius:n/2,color:r.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:i?"ellipsis":null,whiteSpace:"nowrap"}},multiValueRemove:function(t){var e=t.theme,n=e.spacing,r=e.borderRadius,i=e.colors;return{alignItems:"center",borderRadius:r/2,backgroundColor:t.isFocused&&i.dangerLight,display:"flex",paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:i.dangerLight,color:i.danger}}},noOptionsMessage:K,option:function(t){var e=t.isDisabled,n=t.isFocused,r=t.isSelected,i=t.theme,o=i.spacing,a=i.colors;return{label:"option",backgroundColor:r?a.primary:n?a.primary25:"transparent",color:e?a.neutral20:r?a.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!e&&(r?a.primary:a.primary50)}}},placeholder:function(t){var e=t.theme,n=e.spacing;return{label:"placeholder",color:e.colors.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},singleValue:function(t){var e=t.isDisabled,n=t.theme,r=n.spacing,i=n.colors;return{label:"singleValue",color:e?i.neutral40:i.neutral80,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2,maxWidth:"calc(100% - ".concat(2*r.baseUnit,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},valueContainer:function(t){var e=t.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(e.baseUnit/2,"px ").concat(2*e.baseUnit,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}}};var jt,Bt={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Ut={backspaceRemovesValue:!0,blurInputOnSelect:V(),captureMenuScroll:!V(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(t,e){var n=b({ignoreCase:!0,ignoreAccents:!0,stringify:et,trim:!0,matchFrom:"any"},jt),r=n.ignoreCase,i=n.ignoreAccents,o=n.stringify,a=n.trim,s=n.matchFrom,u=a?tt(e):e,l=a?tt(o(t)):o(t);return r&&(u=u.toLowerCase(),l=l.toLowerCase()),i&&(u=$(u),l=$(l)),"start"===s?l.substr(0,u.length)===u:l.indexOf(u)>-1},formatGroupLabel:function(t){return t.label},getOptionLabel:function(t){return t.label},getOptionValue:function(t){return t.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Et,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(t){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var e=t.count;return"".concat(e," result").concat(1!==e?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0},Gt=1,Kt=function(t){function e(t){var n;m(this,e),E(L(L(n=C(this,w(e).call(this,t)))),"state",{ariaLiveSelection:"",ariaLiveContext:"",focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,menuOptions:{render:[],focusable:[]},selectValue:[]}),E(L(L(n)),"blockOptionHover",!1),E(L(L(n)),"isComposing",!1),E(L(L(n)),"clearFocusValueOnUpdate",!1),E(L(L(n)),"commonProps",void 0),E(L(L(n)),"components",void 0),E(L(L(n)),"hasGroups",!1),E(L(L(n)),"initialTouchX",0),E(L(L(n)),"initialTouchY",0),E(L(L(n)),"inputIsHiddenAfterUpdate",void 0),E(L(L(n)),"instancePrefix",""),E(L(L(n)),"openAfterFocus",!1),E(L(L(n)),"scrollToFocusedOptionOnUpdate",!1),E(L(L(n)),"userIsDragging",void 0),E(L(L(n)),"controlRef",null),E(L(L(n)),"getControlRef",(function(t){n.controlRef=t})),E(L(L(n)),"focusedOptionRef",null),E(L(L(n)),"getFocusedOptionRef",(function(t){n.focusedOptionRef=t})),E(L(L(n)),"menuListRef",null),E(L(L(n)),"getMenuListRef",(function(t){n.menuListRef=t})),E(L(L(n)),"inputRef",null),E(L(L(n)),"getInputRef",(function(t){n.inputRef=t})),E(L(L(n)),"cacheComponents",(function(t){n.components=Ft({components:t})})),E(L(L(n)),"focus",n.focusInput),E(L(L(n)),"blur",n.blurInput),E(L(L(n)),"onChange",(function(t,e){var r=n.props;(0,r.onChange)(t,b({},e,{name:r.name}))})),E(L(L(n)),"setValue",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"set-value",r=arguments.length>2?arguments[2]:void 0,i=n.props,o=i.closeMenuOnSelect,a=i.isMulti;n.onInputChange("",{action:"set-value"}),o&&(n.inputIsHiddenAfterUpdate=!a,n.onMenuClose()),n.clearFocusValueOnUpdate=!0,n.onChange(t,{action:e,option:r})})),E(L(L(n)),"selectOption",(function(t){var e=n.props,r=e.blurInputOnSelect,i=e.isMulti,o=n.state.selectValue;if(i)if(n.isOptionSelected(t,o)){var a=n.getOptionValue(t);n.setValue(o.filter((function(t){return n.getOptionValue(t)!==a})),"deselect-option",t),n.announceAriaLiveSelection({event:"deselect-option",context:{value:n.getOptionLabel(t)}})}else n.isOptionDisabled(t,o)?n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(t),isDisabled:!0}}):(n.setValue([].concat(A(o),[t]),"select-option",t),n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(t)}}));else n.isOptionDisabled(t,o)?n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(t),isDisabled:!0}}):(n.setValue(t,"select-option"),n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(t)}}));r&&n.blurInput()})),E(L(L(n)),"removeValue",(function(t){var e=n.state.selectValue,r=n.getOptionValue(t);n.onChange(e.filter((function(t){return n.getOptionValue(t)!==r})),{action:"remove-value",removedValue:t}),n.announceAriaLiveSelection({event:"remove-value",context:{value:t?n.getOptionLabel(t):""}}),n.focusInput()})),E(L(L(n)),"clearValue",(function(){var t=n.props.isMulti;n.onChange(t?[]:null,{action:"clear"})})),E(L(L(n)),"popValue",(function(){var t=n.state.selectValue,e=t[t.length-1];n.announceAriaLiveSelection({event:"pop-value",context:{value:e?n.getOptionLabel(e):""}}),n.onChange(t.slice(0,t.length-1),{action:"pop-value",removedValue:e})})),E(L(L(n)),"getOptionLabel",(function(t){return n.props.getOptionLabel(t)})),E(L(L(n)),"getOptionValue",(function(t){return n.props.getOptionValue(t)})),E(L(L(n)),"getStyles",(function(t,e){var r=Vt[t](e);r.boxSizing="border-box";var i=n.props.styles[t];return i?i(r,e):r})),E(L(L(n)),"getElementId",(function(t){return"".concat(n.instancePrefix,"-").concat(t)})),E(L(L(n)),"getActiveDescendentId",(function(){var t=n.props.menuIsOpen,e=n.state,r=e.menuOptions,i=e.focusedOption;if(i&&t){var o=r.focusable.indexOf(i),a=r.render[o];return a&&a.key}})),E(L(L(n)),"announceAriaLiveSelection",(function(t){var e=t.event,r=t.context;n.setState({ariaLiveSelection:vt(e,r)})})),E(L(L(n)),"announceAriaLiveContext",(function(t){var e=t.event,r=t.context;n.setState({ariaLiveContext:yt(e,b({},r,{label:n.props["aria-label"]}))})})),E(L(L(n)),"onMenuMouseDown",(function(t){0===t.button&&(t.stopPropagation(),t.preventDefault(),n.focusInput())})),E(L(L(n)),"onMenuMouseMove",(function(t){n.blockOptionHover=!1})),E(L(L(n)),"onControlMouseDown",(function(t){var e=n.props.openMenuOnClick;n.state.isFocused?n.props.menuIsOpen?"INPUT"!==t.target.tagName&&n.onMenuClose():e&&n.openMenu("first"):(e&&(n.openAfterFocus=!0),n.focusInput()),"INPUT"!==t.target.tagName&&t.preventDefault()})),E(L(L(n)),"onDropdownIndicatorMouseDown",(function(t){if((!t||"mousedown"!==t.type||0===t.button)&&!n.props.isDisabled){var e=n.props,r=e.isMulti,i=e.menuIsOpen;n.focusInput(),i?(n.inputIsHiddenAfterUpdate=!r,n.onMenuClose()):n.openMenu("first"),t.preventDefault(),t.stopPropagation()}})),E(L(L(n)),"onClearIndicatorMouseDown",(function(t){t&&"mousedown"===t.type&&0!==t.button||(n.clearValue(),t.stopPropagation(),n.openAfterFocus=!1,setTimeout((function(){return n.focusInput()})))})),E(L(L(n)),"onScroll",(function(t){"boolean"===typeof n.props.closeMenuOnScroll?t.target instanceof HTMLElement&&I(t.target)&&n.props.onMenuClose():"function"===typeof n.props.closeMenuOnScroll&&n.props.closeMenuOnScroll(t)&&n.props.onMenuClose()})),E(L(L(n)),"onCompositionStart",(function(){n.isComposing=!0})),E(L(L(n)),"onCompositionEnd",(function(){n.isComposing=!1})),E(L(L(n)),"onTouchStart",(function(t){var e=t.touches.item(0);e&&(n.initialTouchX=e.clientX,n.initialTouchY=e.clientY,n.userIsDragging=!1)})),E(L(L(n)),"onTouchMove",(function(t){var e=t.touches.item(0);if(e){var r=Math.abs(e.clientX-n.initialTouchX),i=Math.abs(e.clientY-n.initialTouchY);n.userIsDragging=r>5||i>5}})),E(L(L(n)),"onTouchEnd",(function(t){n.userIsDragging||(n.controlRef&&!n.controlRef.contains(t.target)&&n.menuListRef&&!n.menuListRef.contains(t.target)&&n.blurInput(),n.initialTouchX=0,n.initialTouchY=0)})),E(L(L(n)),"onControlTouchEnd",(function(t){n.userIsDragging||n.onControlMouseDown(t)})),E(L(L(n)),"onClearIndicatorTouchEnd",(function(t){n.userIsDragging||n.onClearIndicatorMouseDown(t)})),E(L(L(n)),"onDropdownIndicatorTouchEnd",(function(t){n.userIsDragging||n.onDropdownIndicatorMouseDown(t)})),E(L(L(n)),"handleInputChange",(function(t){var e=t.currentTarget.value;n.inputIsHiddenAfterUpdate=!1,n.onInputChange(e,{action:"input-change"}),n.onMenuOpen()})),E(L(L(n)),"onInputFocus",(function(t){var e=n.props,r=e.isSearchable,i=e.isMulti;n.props.onFocus&&n.props.onFocus(t),n.inputIsHiddenAfterUpdate=!1,n.announceAriaLiveContext({event:"input",context:{isSearchable:r,isMulti:i}}),n.setState({isFocused:!0}),(n.openAfterFocus||n.props.openMenuOnFocus)&&n.openMenu("first"),n.openAfterFocus=!1})),E(L(L(n)),"onInputBlur",(function(t){n.menuListRef&&n.menuListRef.contains(document.activeElement)?n.inputRef.focus():(n.props.onBlur&&n.props.onBlur(t),n.onInputChange("",{action:"input-blur"}),n.onMenuClose(),n.setState({focusedValue:null,isFocused:!1}))})),E(L(L(n)),"onOptionHover",(function(t){n.blockOptionHover||n.state.focusedOption===t||n.setState({focusedOption:t})})),E(L(L(n)),"shouldHideSelectedOptions",(function(){var t=n.props,e=t.hideSelectedOptions,r=t.isMulti;return void 0===e?r:e})),E(L(L(n)),"onKeyDown",(function(t){var e=n.props,r=e.isMulti,i=e.backspaceRemovesValue,o=e.escapeClearsValue,a=e.inputValue,s=e.isClearable,u=e.isDisabled,l=e.menuIsOpen,c=e.onKeyDown,h=e.tabSelectsValue,f=e.openMenuOnFocus,p=n.state,d=p.focusedOption,g=p.focusedValue,m=p.selectValue;if(!u&&("function"!==typeof c||(c(t),!t.defaultPrevented))){switch(n.blockOptionHover=!0,t.key){case"ArrowLeft":if(!r||a)return;n.focusValue("previous");break;case"ArrowRight":if(!r||a)return;n.focusValue("next");break;case"Delete":case"Backspace":if(a)return;if(g)n.removeValue(g);else{if(!i)return;r?n.popValue():s&&n.clearValue()}break;case"Tab":if(n.isComposing)return;if(t.shiftKey||!l||!h||!d||f&&n.isOptionSelected(d,m))return;n.selectOption(d);break;case"Enter":if(229===t.keyCode)break;if(l){if(!d)return;if(n.isComposing)return;n.selectOption(d);break}return;case"Escape":l?(n.inputIsHiddenAfterUpdate=!1,n.onInputChange("",{action:"menu-close"}),n.onMenuClose()):s&&o&&n.clearValue();break;case" ":if(a)return;if(!l){n.openMenu("first");break}if(!d)return;n.selectOption(d);break;case"ArrowUp":l?n.focusOption("up"):n.openMenu("last");break;case"ArrowDown":l?n.focusOption("down"):n.openMenu("first");break;case"PageUp":if(!l)return;n.focusOption("pageup");break;case"PageDown":if(!l)return;n.focusOption("pagedown");break;case"Home":if(!l)return;n.focusOption("first");break;case"End":if(!l)return;n.focusOption("last");break;default:return}t.preventDefault()}}));var r=t.value;n.cacheComponents=Object(o.default)(n.cacheComponents,J).bind(L(L(n))),n.cacheComponents(t.components),n.instancePrefix="react-select-"+(n.props.instanceId||++Gt);var i=P(r),a=n.buildMenuOptions(t,i);return n.state.menuOptions=a,n.state.selectValue=i,n}return S(e,t),v(e,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentWillReceiveProps",value:function(t){var e=this.props,n=e.options,r=e.value,i=e.inputValue;if(this.cacheComponents(t.components),t.value!==r||t.options!==n||t.inputValue!==i){var o=P(t.value),a=this.buildMenuOptions(t,o),s=this.getNextFocusedValue(o),u=this.getNextFocusedOption(a.focusable);this.setState({menuOptions:a,selectValue:o,focusedOption:u,focusedValue:s})}null!=this.inputIsHiddenAfterUpdate&&(this.setState({inputIsHidden:this.inputIsHiddenAfterUpdate}),delete this.inputIsHiddenAfterUpdate)}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.isDisabled,r=e.menuIsOpen,i=this.state.isFocused;(i&&!n&&t.isDisabled||i&&r&&!t.menuIsOpen)&&this.focusInput(),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&function(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>n.bottom?D(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):r.top-i<n.top&&D(t,Math.max(e.offsetTop-i,0))}(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){var t=this.props,e=t.isSearchable,n=t.isMulti;this.announceAriaLiveContext({event:"input",context:{isSearchable:e,isMulti:n}}),this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(t,e){this.props.onInputChange(t,e)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(t){var e=this.state,n=e.menuOptions,r=e.selectValue,i=e.isFocused,o=this.props.isMulti,a="first"===t?0:n.focusable.length-1;if(!o){var s=n.focusable.indexOf(r[0]);s>-1&&(a=s)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.inputIsHiddenAfterUpdate=!1,this.onMenuOpen(),this.setState({focusedValue:null,focusedOption:n.focusable[a]}),this.announceAriaLiveContext({event:"menu"})}},{key:"focusValue",value:function(t){var e=this.props,n=e.isMulti,r=e.isSearchable,i=this.state,o=i.selectValue,a=i.focusedValue;if(n){this.setState({focusedOption:null});var s=o.indexOf(a);a||(s=-1,this.announceAriaLiveContext({event:"value"}));var u=o.length-1,l=-1;if(o.length){switch(t){case"previous":l=0===s?0:-1===s?u:s-1;break;case"next":s>-1&&s<u&&(l=s+1)}-1===l&&this.announceAriaLiveContext({event:"input",context:{isSearchable:r,isMulti:n}}),this.setState({inputIsHidden:-1!==l,focusedValue:o[l]})}}}},{key:"focusOption",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",e=this.props.pageSize,n=this.state,r=n.focusedOption,i=n.menuOptions,o=i.focusable;if(o.length){var a=0,s=o.indexOf(r);r||(s=-1,this.announceAriaLiveContext({event:"menu"})),"up"===t?a=s>0?s-1:o.length-1:"down"===t?a=(s+1)%o.length:"pageup"===t?(a=s-e)<0&&(a=0):"pagedown"===t?(a=s+e)>o.length-1&&(a=o.length-1):"last"===t&&(a=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[a],focusedValue:null}),this.announceAriaLiveContext({event:"menu",context:{isDisabled:Et(o[a])}})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(Bt):b({},Bt,this.props.theme):Bt}},{key:"getCommonProps",value:function(){var t=this.clearValue,e=this.getStyles,n=this.setValue,r=this.selectOption,i=this.props,o=i.classNamePrefix,a=i.isMulti,s=i.isRtl,u=i.options,l=this.state.selectValue,c=this.hasValue();return{cx:O.bind(null,o),clearValue:t,getStyles:e,getValue:function(){return l},hasValue:c,isMulti:a,isRtl:s,options:u,selectOption:r,setValue:n,selectProps:i,theme:this.getTheme()}}},{key:"getNextFocusedValue",value:function(t){if(this.clearFocusValueOnUpdate)return this.clearFocusValueOnUpdate=!1,null;var e=this.state,n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}},{key:"getNextFocusedOption",value:function(t){var e=this.state.focusedOption;return e&&t.indexOf(e)>-1?e:t[0]}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.state.menuOptions.render.length}},{key:"countOptions",value:function(){return this.state.menuOptions.focusable.length}},{key:"isClearable",value:function(){var t=this.props,e=t.isClearable,n=t.isMulti;return void 0===e?n:e}},{key:"isOptionDisabled",value:function(t,e){return"function"===typeof this.props.isOptionDisabled&&this.props.isOptionDisabled(t,e)}},{key:"isOptionSelected",value:function(t,e){var n=this;if(e.indexOf(t)>-1)return!0;if("function"===typeof this.props.isOptionSelected)return this.props.isOptionSelected(t,e);var r=this.getOptionValue(t);return e.some((function(t){return n.getOptionValue(t)===r}))}},{key:"filterOption",value:function(t,e){return!this.props.filterOption||this.props.filterOption(t,e)}},{key:"formatOptionLabel",value:function(t,e){if("function"===typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(t,{context:e,inputValue:n,selectValue:r})}return this.getOptionLabel(t)}},{key:"formatGroupLabel",value:function(t){return this.props.formatGroupLabel(t)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"buildMenuOptions",value:function(t,e){var n=this,r=t.inputValue,i=void 0===r?"":r,o=t.options,a=function(t,r){var o=n.isOptionDisabled(t,e),a=n.isOptionSelected(t,e),s=n.getOptionLabel(t),u=n.getOptionValue(t);if(!(n.shouldHideSelectedOptions()&&a||!n.filterOption({label:s,value:u,data:t},i))){var l=o?void 0:function(){return n.onOptionHover(t)},c=o?void 0:function(){return n.selectOption(t)},h="".concat(n.getElementId("option"),"-").concat(r);return{innerProps:{id:h,onClick:c,onMouseMove:l,onMouseOver:l,tabIndex:-1},data:t,isDisabled:o,isSelected:a,key:h,label:s,type:"option",value:u}}};return o.reduce((function(t,e,r){if(e.options){n.hasGroups||(n.hasGroups=!0);var i=e.options.map((function(e,n){var i=a(e,"".concat(r,"-").concat(n));return i&&t.focusable.push(e),i})).filter(Boolean);if(i.length){var o="".concat(n.getElementId("group"),"-").concat(r);t.render.push({type:"group",key:o,data:e,options:i})}}else{var s=a(e,"".concat(r));s&&(t.render.push(s),t.focusable.push(e))}return t}),{render:[],focusable:[]})}},{key:"constructAriaLiveMessage",value:function(){var t=this.state,e=t.ariaLiveContext,n=t.selectValue,r=t.focusedValue,i=t.focusedOption,o=this.props,a=o.options,s=o.menuIsOpen,u=o.inputValue,l=o.screenReaderStatus,c=r?function(t){var e=t.focusedValue,n=t.getOptionLabel,r=t.selectValue;return"value ".concat(n(e)," focused, ").concat(r.indexOf(e)+1," of ").concat(r.length,".")}({focusedValue:r,getOptionLabel:this.getOptionLabel,selectValue:n}):"",h=i&&s?function(t){var e=t.focusedOption,n=t.getOptionLabel,r=t.options;return"option ".concat(n(e)," focused").concat(e.isDisabled?" disabled":"",", ").concat(r.indexOf(e)+1," of ").concat(r.length,".")}({focusedOption:i,getOptionLabel:this.getOptionLabel,options:a}):"",f=function(t){var e=t.inputValue,n=t.screenReaderMessage;return"".concat(n).concat(e?" for search term "+e:"",".")}({inputValue:u,screenReaderMessage:l({count:this.countOptions()})});return"".concat(c," ").concat(h," ").concat(f," ").concat(e)}},{key:"renderInput",value:function(){var t=this.props,e=t.isDisabled,n=t.isSearchable,r=t.inputId,o=t.inputValue,a=t.tabIndex,s=this.components.Input,u=this.state.inputIsHidden,l=r||this.getElementId("input");if(!n)return i.a.createElement(rt,{id:l,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:M,onFocus:this.onInputFocus,readOnly:!0,disabled:e,tabIndex:a,value:""});var c={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]},h=this.commonProps,f=h.cx,p=h.theme,d=h.selectProps;return i.a.createElement(s,_({autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",cx:f,getStyles:this.getStyles,id:l,innerRef:this.getInputRef,isDisabled:e,isHidden:u,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,selectProps:d,spellCheck:"false",tabIndex:a,theme:p,type:"text",value:o},c))}},{key:"renderPlaceholderOrValue",value:function(){var t=this,e=this.components,n=e.MultiValue,r=e.MultiValueContainer,o=e.MultiValueLabel,a=e.MultiValueRemove,s=e.SingleValue,u=e.Placeholder,l=this.commonProps,c=this.props,h=c.controlShouldRenderValue,f=c.isDisabled,p=c.isMulti,d=c.inputValue,g=c.placeholder,m=this.state,y=m.selectValue,v=m.focusedValue,E=m.isFocused;if(!this.hasValue()||!h)return d?null:i.a.createElement(u,_({},l,{key:"placeholder",isDisabled:f,isFocused:E}),g);if(p)return y.map((function(e){var s=e===v;return i.a.createElement(n,_({},l,{components:{Container:r,Label:o,Remove:a},isFocused:s,isDisabled:f,key:t.getOptionValue(e),removeProps:{onClick:function(){return t.removeValue(e)},onTouchEnd:function(){return t.removeValue(e)},onMouseDown:function(t){t.preventDefault(),t.stopPropagation()}},data:e}),t.formatOptionLabel(e,"value"))}));if(d)return null;var b=y[0];return i.a.createElement(s,_({},l,{data:b,isDisabled:f}),this.formatOptionLabel(b,"value"))}},{key:"renderClearIndicator",value:function(){var t=this.components.ClearIndicator,e=this.commonProps,n=this.props,r=n.isDisabled,o=n.isLoading,a=this.state.isFocused;if(!this.isClearable()||!t||r||!this.hasValue()||o)return null;var s={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return i.a.createElement(t,_({},e,{innerProps:s,isFocused:a}))}},{key:"renderLoadingIndicator",value:function(){var t=this.components.LoadingIndicator,e=this.commonProps,n=this.props,r=n.isDisabled,o=n.isLoading,a=this.state.isFocused;if(!t||!o)return null;return i.a.createElement(t,_({},e,{innerProps:{"aria-hidden":"true"},isDisabled:r,isFocused:a}))}},{key:"renderIndicatorSeparator",value:function(){var t=this.components,e=t.DropdownIndicator,n=t.IndicatorSeparator;if(!e||!n)return null;var r=this.commonProps,o=this.props.isDisabled,a=this.state.isFocused;return i.a.createElement(n,_({},r,{isDisabled:o,isFocused:a}))}},{key:"renderDropdownIndicator",value:function(){var t=this.components.DropdownIndicator;if(!t)return null;var e=this.commonProps,n=this.props.isDisabled,r=this.state.isFocused,o={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return i.a.createElement(t,_({},e,{innerProps:o,isDisabled:n,isFocused:r}))}},{key:"renderMenu",value:function(){var t=this,e=this.components,n=e.Group,r=e.GroupHeading,o=e.Menu,a=e.MenuList,s=e.MenuPortal,u=e.LoadingMessage,l=e.NoOptionsMessage,c=e.Option,h=this.commonProps,f=this.state,p=f.focusedOption,d=f.menuOptions,g=this.props,m=g.captureMenuScroll,y=g.inputValue,v=g.isLoading,E=g.loadingMessage,b=g.minMenuHeight,S=g.maxMenuHeight,w=g.menuIsOpen,x=g.menuPlacement,L=g.menuPosition,C=g.menuPortalTarget,A=g.menuShouldBlockScroll,M=g.menuShouldScrollIntoView,R=g.noOptionsMessage,O=g.onMenuScrollToTop,P=g.onMenuScrollToBottom;if(!w)return null;var I,N=function(e){var n=p===e.data;return e.innerRef=n?t.getFocusedOptionRef:void 0,i.a.createElement(c,_({},h,e,{isFocused:n}),t.formatOptionLabel(e.data,"menu"))};if(this.hasOptions())I=d.render.map((function(e){if("group"===e.type){e.type;var o=T(e,["type"]),a="".concat(e.key,"-heading");return i.a.createElement(n,_({},h,o,{Heading:r,headingProps:{id:a},label:t.formatGroupLabel(e.data)}),e.options.map((function(t){return N(t)})))}if("option"===e.type)return N(e)}));else if(v){var D=E({inputValue:y});if(null===D)return null;I=i.a.createElement(u,h,D)}else{var k=R({inputValue:y});if(null===k)return null;I=i.a.createElement(l,h,k)}var F={minMenuHeight:b,maxMenuHeight:S,menuPlacement:x,menuPosition:L,menuShouldScrollIntoView:M},V=i.a.createElement(U,_({},h,F),(function(e){var n=e.ref,r=e.placerProps,s=r.placement,u=r.maxHeight;return i.a.createElement(o,_({},h,F,{innerRef:n,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove},isLoading:v,placement:s}),i.a.createElement(mt,{isEnabled:m,onTopArrive:O,onBottomArrive:P},i.a.createElement(dt,{isEnabled:A},i.a.createElement(a,_({},h,{innerRef:t.getMenuListRef,isLoading:v,maxHeight:u}),I))))}));return C||"fixed"===L?i.a.createElement(s,_({},h,{appendTo:C,controlElement:this.controlRef,menuPlacement:x,menuPosition:L}),V):V}},{key:"renderFormField",value:function(){var t=this,e=this.props,n=e.delimiter,r=e.isDisabled,o=e.isMulti,a=e.name,s=this.state.selectValue;if(a&&!r){if(o){if(n){var u=s.map((function(e){return t.getOptionValue(e)})).join(n);return i.a.createElement("input",{name:a,type:"hidden",value:u})}var l=s.length>0?s.map((function(e,n){return i.a.createElement("input",{key:"i-".concat(n),name:a,type:"hidden",value:t.getOptionValue(e)})})):i.a.createElement("input",{name:a,type:"hidden"});return i.a.createElement("div",null,l)}var c=s[0]?this.getOptionValue(s[0]):"";return i.a.createElement("input",{name:a,type:"hidden",value:c})}}},{key:"renderLiveRegion",value:function(){return this.state.isFocused?i.a.createElement(nt,{"aria-live":"assertive"},i.a.createElement("p",{id:"aria-selection-event"},"\xa0",this.state.ariaLiveSelection),i.a.createElement("p",{id:"aria-context"},"\xa0",this.constructAriaLiveMessage())):null}},{key:"render",value:function(){var t=this.components,e=t.Control,n=t.IndicatorsContainer,r=t.SelectContainer,o=t.ValueContainer,a=this.props,s=a.className,u=a.id,l=a.isDisabled,c=a.menuIsOpen,h=this.state.isFocused,f=this.commonProps=this.getCommonProps();return i.a.createElement(r,_({},f,{className:s,innerProps:{id:u,onKeyDown:this.onKeyDown},isDisabled:l,isFocused:h}),this.renderLiveRegion(),i.a.createElement(e,_({},f,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:l,isFocused:h,menuIsOpen:c}),i.a.createElement(o,_({},f,{isDisabled:l}),this.renderPlaceholderOrValue(),this.renderInput()),i.a.createElement(n,_({},f,{isDisabled:l}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}]),e}(r.Component);E(Kt,"defaultProps",Ut);var Wt={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},zt=function(t){var e,n;return n=e=function(e){function n(){var t,e;m(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return E(L(L(e=C(this,(t=w(n)).call.apply(t,[this].concat(i))))),"select",void 0),E(L(L(e)),"state",{inputValue:void 0!==e.props.inputValue?e.props.inputValue:e.props.defaultInputValue,menuIsOpen:void 0!==e.props.menuIsOpen?e.props.menuIsOpen:e.props.defaultMenuIsOpen,value:void 0!==e.props.value?e.props.value:e.props.defaultValue}),E(L(L(e)),"onChange",(function(t,n){e.callProp("onChange",t,n),e.setState({value:t})})),E(L(L(e)),"onInputChange",(function(t,n){var r=e.callProp("onInputChange",t,n);e.setState({inputValue:void 0!==r?r:t})})),E(L(L(e)),"onMenuOpen",(function(){e.callProp("onMenuOpen"),e.setState({menuIsOpen:!0})})),E(L(L(e)),"onMenuClose",(function(){e.callProp("onMenuClose"),e.setState({menuIsOpen:!1})})),e}return S(n,e),v(n,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(t){return void 0!==this.props[t]?this.props[t]:this.state[t]}},{key:"callProp",value:function(t){if("function"===typeof this.props[t]){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=this.props)[t].apply(e,r)}}},{key:"render",value:function(){var e=this,n=this.props,r=(n.defaultInputValue,n.defaultMenuIsOpen,n.defaultValue,T(n,["defaultInputValue","defaultMenuIsOpen","defaultValue"]));return i.a.createElement(t,_({},r,{ref:function(t){e.select=t},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),n}(r.Component),E(e,"defaultProps",Wt),n},Yt={cacheOptions:!1,defaultOptions:!1,filterOption:null},Ht=function(t){var e,n;return n=e=function(e){function n(t){var e;return m(this,n),E(L(L(e=C(this,w(n).call(this)))),"select",void 0),E(L(L(e)),"lastRequest",void 0),E(L(L(e)),"mounted",!1),E(L(L(e)),"optionsCache",{}),E(L(L(e)),"handleInputChange",(function(t,n){var r=e.props,i=r.cacheOptions,o=function(t,e,n){if(n){var r=n(t,e);if("string"===typeof r)return r}return t}(t,n,r.onInputChange);if(!o)return delete e.lastRequest,void e.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(i&&e.optionsCache[o])e.setState({inputValue:o,loadedInputValue:o,loadedOptions:e.optionsCache[o],isLoading:!1,passEmptyOptions:!1});else{var a=e.lastRequest={};e.setState({inputValue:o,isLoading:!0,passEmptyOptions:!e.state.loadedInputValue},(function(){e.loadOptions(o,(function(t){e.mounted&&(t&&(e.optionsCache[o]=t),a===e.lastRequest&&(delete e.lastRequest,e.setState({isLoading:!1,loadedInputValue:o,loadedOptions:t||[],passEmptyOptions:!1})))}))}))}return o})),e.state={defaultOptions:Array.isArray(t.defaultOptions)?t.defaultOptions:void 0,inputValue:"undefined"!==typeof t.inputValue?t.inputValue:"",isLoading:!0===t.defaultOptions,loadedOptions:[],passEmptyOptions:!1},e}return S(n,e),v(n,[{key:"componentDidMount",value:function(){var t=this;this.mounted=!0;var e=this.props.defaultOptions,n=this.state.inputValue;!0===e&&this.loadOptions(n,(function(e){if(t.mounted){var n=!!t.lastRequest;t.setState({defaultOptions:e||[],isLoading:n})}}))}},{key:"componentWillReceiveProps",value:function(t){t.cacheOptions!==this.props.cacheOptions&&(this.optionsCache={}),t.defaultOptions!==this.props.defaultOptions&&this.setState({defaultOptions:Array.isArray(t.defaultOptions)?t.defaultOptions:void 0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(t,e){var n=this.props.loadOptions;if(!n)return e();var r=n(t,e);r&&"function"===typeof r.then&&r.then(e,(function(){return e()}))}},{key:"render",value:function(){var e=this,n=this.props,r=(n.loadOptions,T(n,["loadOptions"])),o=this.state,a=o.defaultOptions,s=o.inputValue,u=o.isLoading,l=o.loadedInputValue,c=o.loadedOptions,h=o.passEmptyOptions?[]:s&&l?c:a||[];return i.a.createElement(t,_({},r,{ref:function(t){e.select=t},options:h,isLoading:u,onInputChange:this.handleInputChange}))}}]),n}(r.Component),E(e,"defaultProps",Yt),n},qt=(Ht(zt(Kt)),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=String(t).toLowerCase(),r=String(e.value).toLowerCase(),i=String(e.label).toLowerCase();return r===n||i===n}),Xt=b({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function(t){return'Create "'.concat(t,'"')},isValidNewOption:function(t,e,n){return!(!t||e.some((function(e){return qt(t,e)}))||n.some((function(e){return qt(t,e)})))},getNewOptionData:function(t,e){return{label:e,value:t,__isNew__:!0}}}),Zt=function(t){var e,n;return n=e=function(e){function n(t){var e;m(this,n),E(L(L(e=C(this,w(n).call(this,t)))),"select",void 0),E(L(L(e)),"onChange",(function(t,n){var r=e.props,i=r.getNewOptionData,o=r.inputValue,a=r.isMulti,s=r.onChange,u=r.onCreateOption,l=r.value;if("select-option"!==n.action)return s(t,n);var c=e.state.newOption,h=Array.isArray(t)?t:[t];if(h[h.length-1]!==c)s(t,n);else if(u)u(o);else{var f=i(o,o),p={action:"create-option"};s(a?[].concat(A(P(l)),[f]):f,p)}}));var r=t.options||[];return e.state={newOption:void 0,options:r},e}return S(n,e),v(n,[{key:"componentWillReceiveProps",value:function(t){var e=t.allowCreateWhileLoading,n=t.createOptionPosition,r=t.formatCreateLabel,i=t.getNewOptionData,o=t.inputValue,a=t.isLoading,s=t.isValidNewOption,u=t.value,l=t.options||[],c=this.state.newOption;c=s(o,P(u),l)?i(o,r(o)):void 0,this.setState({newOption:c,options:!e&&a||!c?l:"first"===n?[c].concat(A(l)):[].concat(A(l),[c])})}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"render",value:function(){var e=this,n=_({},this.props),r=this.state.options;return i.a.createElement(t,_({},n,{ref:function(t){e.select=t},options:r,onChange:this.onChange}))}}]),n}(r.Component),E(e,"defaultProps",Xt),n},Jt=(zt(Zt(Kt)),Ht(zt(Zt(Kt))),function(t){return function(e){e.in,e.onExited,e.appear,e.enter,e.exit;var n=T(e,["in","onExited","appear","enter","exit"]);return i.a.createElement(t,n)}}),Qt=function(t){var e=t.component,n=t.duration,r=void 0===n?1:n,o=t.in,a=(t.onExited,T(t,["component","duration","in","onExited"])),s={entering:{opacity:0},entered:{opacity:1,transition:"opacity ".concat(r,"ms")},exiting:{opacity:0},exited:{opacity:0}};return i.a.createElement(d.Transition,{mountOnEnter:!0,unmountOnExit:!0,in:o,timeout:r},(function(t){var n={style:b({},s[t])};return i.a.createElement(e,_({innerProps:n},a))}))},$t=function(t){function e(){var t,n;m(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return E(L(L(n=C(this,(t=w(e)).call.apply(t,[this].concat(i))))),"duration",260),E(L(L(n)),"rafID",void 0),E(L(L(n)),"state",{width:"auto"}),E(L(L(n)),"transition",{exiting:{width:0,transition:"width ".concat(n.duration,"ms ease-out")},exited:{width:0}}),E(L(L(n)),"getWidth",(function(t){t&&isNaN(n.state.width)&&(n.rafID=window.requestAnimationFrame((function(){var e=t.getBoundingClientRect().width;n.setState({width:e})})))})),E(L(L(n)),"getStyle",(function(t){return{overflow:"hidden",whiteSpace:"nowrap",width:t}})),E(L(L(n)),"getTransition",(function(t){return n.transition[t]})),n}return S(e,t),v(e,[{key:"componentWillUnmount",value:function(){this.rafID&&window.cancelAnimationFrame(this.rafID)}},{key:"render",value:function(){var t=this,e=this.props,n=e.children,r=e.in,o=this.state.width;return i.a.createElement(d.Transition,{enter:!1,mountOnEnter:!0,unmountOnExit:!0,in:r,timeout:this.duration},(function(e){var r=b({},t.getStyle(o),t.getTransition(e));return i.a.createElement("div",{ref:t.getWidth,style:r},n)}))}}]),e}(r.Component),te=function(t){return function(e){var n=e.in,r=e.onExited,o=T(e,["in","onExited"]);return i.a.createElement($t,{in:n,onExited:r},i.a.createElement(t,_({cropWithEllipsis:n},o)))}},ee=function(t){return function(e){return i.a.createElement(Qt,_({component:t,duration:e.isMulti?260:1},e))}},ne=function(t){return function(e){return i.a.createElement(Qt,_({component:t},e))}},re=function(t){return function(e){return i.a.createElement(d.TransitionGroup,_({component:t},e))}},ie=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Ft({components:t}),n=e.Input,r=e.MultiValue,i=e.Placeholder,o=e.SingleValue,a=e.ValueContainer,s=T(e,["Input","MultiValue","Placeholder","SingleValue","ValueContainer"]);return b({Input:Jt(n),MultiValue:te(r),Placeholder:ee(i),SingleValue:ne(o),ValueContainer:re(a)},s)},oe=ie(),ae=(oe.Input,oe.MultiValue,oe.Placeholder,oe.SingleValue,oe.ValueContainer,Object(o.default)(ie,J),zt(Kt));e.a=ae},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.makeCreatableSelect=e.defaultProps=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=s(n(656)),o=n(216),a=s(n(673));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function c(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=String(t).toLowerCase(),r=String(e.value).toLowerCase(),i=String(e.label).toLowerCase();return r===n||i===n},y=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){g(t,e,n[e])}))}return t}({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function(t){return'Create "'.concat(t,'"')},isValidNewOption:function(t,e,n){return!(!t||e.some((function(e){return m(t,e)}))||n.some((function(e){return m(t,e)})))},getNewOptionData:function(t,e){return{label:e,value:t,__isNew__:!0}}});e.defaultProps=y;var v=function(t){var e,n;return n=e=function(e){function n(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e=function(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?d(t):e}(this,f(n).call(this,t)),g(d(d(e)),"select",void 0),g(d(d(e)),"onChange",(function(t,n){var r=e.props,i=r.getNewOptionData,a=r.inputValue,s=r.isMulti,u=r.onChange,l=r.onCreateOption,h=r.value;if("select-option"!==n.action)return u(t,n);var f=e.state.newOption,p=Array.isArray(t)?t:[t];if(p[p.length-1]!==f)u(t,n);else if(l)l(a);else{var d=i(a,a),g={action:"create-option"};u(s?[].concat(c((0,o.cleanValue)(h)),[d]):d,g)}}));var r=t.options||[];return e.state={newOption:void 0,options:r},e}var i,a,s;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(n,e),i=n,(a=[{key:"componentWillReceiveProps",value:function(t){var e=t.allowCreateWhileLoading,n=t.createOptionPosition,r=t.formatCreateLabel,i=t.getNewOptionData,a=t.inputValue,s=t.isLoading,u=t.isValidNewOption,l=t.value,h=t.options||[],f=this.state.newOption;f=u(a,(0,o.cleanValue)(l),h)?i(a,r(a)):void 0,this.setState({newOption:f,options:!e&&s||!f?h:"first"===n?[f].concat(c(h)):[].concat(c(h),[f])})}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"render",value:function(){var e=this,n=l({},this.props),i=this.state.options;return r.default.createElement(t,l({},n,{ref:function(t){e.select=t},options:i,onChange:this.onChange}))}}])&&h(i.prototype,a),s&&h(i,s),n}(r.Component),g(e,"defaultProps",y),n};e.makeCreatableSelect=v;var E=v(i.default),_=(0,a.default)(E);e.default=_},function(t,e,n){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!==i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var a=o[i];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";var r=s(n(649)),i=s(n(654)),o=s(n(317)),a=s(n(314));function s(t){return t&&t.__esModule?t:{default:t}}t.exports={Transition:a.default,TransitionGroup:o.default,ReplaceTransition:i.default,CSSTransition:r.default}},function(t,e,n){var r=n(335),i=n(772),o=n(108),a=n(38);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return ce}));var r=n(2),i=n.n(r),o=n(1),a=n.n(o),s=n(8),u=n.n(s),l=n(115),c=n(27),h=n.n(c),f=n(136),p=n.n(f),d=n(26),g=n.n(d),m=n(22),y=n.n(m),v=n(10),E=n.n(v),_=n(18),b=n.n(_),S=n(9),w=n.n(S),x=n(90),T=n.n(x),L=n(32),C=n.n(L),A=n(6),M=n.n(A),R=n(169),O=n(170),P=n.n(O),I=(n(378),n(234),n(98),n(38),n(174),n(379),n(95),n(380),n(74)),N=n.n(I),D=(n(34),n(29),n(111)),k=n.n(D),F=(n(23),n(7)),V=n.n(F),j=(n(381),n(242),n(382)),B=n.n(j),U=n(73),G=n.n(U);function K(t){return(K="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){W(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}k()([function(t){return t},function(t,e){return e},function(t,e,n){return n}],(function(t,e,n){return Y({},t,{},e,{},n=n||{})}))((function(t,e,n){return"".concat(t,"_").concat(e,"_").concat(n||"")}));var H=function(t){return t.match(/^[0-9]{4}$/)?{start:V()(t),end:V()(t).endOf("year"),source:t,type:"year"}:t.match(/^[0-9]{4}-[0-9]{2}$/)?{start:V()(t),end:V()(t).endOf("month"),source:t,type:"month"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)?{start:V()(t),end:V()(t).endOf("day"),source:t,type:"day"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}$/)?{start:V()(t),end:V()(t).endOf("hour"),source:t,type:"hour"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}$/)?{start:V()(t),end:V()(t).endOf("minute"),source:t,type:"minute"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}$/)||t.match(/^[0-9]{4}[0-9]{2}[0-9]{2}T[0-9]{2}[0-9]{2}[0-9]{2}$/)?{start:V()(t),end:V()(t).endOf("second"),source:t,type:"second"}:t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}/)?{start:V()(t),end:V()(t).endOf("second"),source:t,type:"full"}:void 0},q={parse:function(t){if(t.match(/\/P/))throw new Error("Durations not implemented");if(t.match(/\//)){var e=t.split("/");return{start:H(e[0]).start,end:H(e[1]).end,type:"interval"}}return H(t)},toString:function(t){if(!(N()(t)&&t.start&&t.end&&t.type))throw new Error("Invalid period supplied to period.toString");switch(t.type){case"interval":return t.start.format("YYYY-MM-DD h:mm:ss")+" - "+t.end.format("YYYY-MM-DD h:mm:ss");case"second":case"full":return t.start.format("YYYY-MM-DD h:mm:ss");case"minute":return t.start.format("YYYY-MM-DD h:mm");case"hour":return t.start.format("YYYY-MM-DD h")+"h";default:return t.source}}};var X={period:q,uuid:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))},randomString:function(t){return(Math.random()*Math.pow(36,t)>>0).toString(36)},getRemSize:function(){return parseFloat(getComputedStyle(document.documentElement).fontSize)},scrollTo:function(t,e,n){var r=document.getElementById(e),i=document.getElementById(t),o=i.offsetTop;i.offsetHeight,r.offsetHeight;document.getElementById(e).scrollTop=o},getStringFromJson:function(t){return t&&"object"===K(t)?JSON.stringify(t,null,2):t},deepKeyMirror:function(t,e){var n=this;return G()(t)?B()(t,(function(t,r){return n.deepKeyMirror(t,e?e+"."+r:r)})):e},stringToNumHash:function(t){if("string"!==typeof(t=""+t))throw new Error("stringToNumHash: argument must be a string");for(var e=1,n=0;n<t.length;n++)e=Math.imul(e+t.charCodeAt(n)|0,265443576107);return(e^e>>>17)>>>0},stringToColours:function(t,e,n){for(var r,i,o,a=this.stringToNumHash(t),s=[],u=(n=Y({},{hue:[0,360],saturation:[35,65],lightness:[40,60]},{},n)).hue[1]-n.hue[0],l=n.saturation[1]-n.saturation[0],c=n.lightness[1]-n.lightness[0],h=0;h<(e||1);h++)r=a%u+n.hue[0],i=(a=(a^a>>>17)>>>0)%l+n.saturation[0],o=(a=(a^a>>>17)>>>0)%c+n.lightness[0],a=(a^a>>>17)>>>0,s.push("hsl("+r+","+i+"%,"+o+"%)");return s}};function Z(t){return(Z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e,n){return e&&Q(t.prototype,e),n&&Q(t,n),t}function tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){tt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ot(t,e)}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ot(t,e){return(ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function at(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function st(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ut(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?st(t):e}function lt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=it(t);if(e){var i=it(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ut(this,n)}}function ct(t){return function(t){if(Array.isArray(t))return ht(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return ht(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ft=function(t,e){navigator.clipboard.writeText(t),e.stopPropagation()},pt=function(t){if(!t.value||"string"!==typeof t.value)return null;var e=t.value.substring(0,4);return i.a.createElement("span",{className:"option-id",title:t.value,onClick:ft.bind(null,t.value)},e)},dt=function(t){rt(n,t);var e=lt(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).onClick=r.onClick.bind(st(r)),r.onKeyPress=r.onKeyPress.bind(st(r)),r}return $(n,[{key:"blockEvent",value:function(t){t.stopPropagation()}},{key:"onKeyPress",value:function(t){13!==t.charCode&&32!==t.charCode||this.props.onOptionLabelClick(this.props.option)}},{key:"onClick",value:function(t){this.props.onOptionLabelClick(this.props.option,t)}},{key:"render",value:function(){var t=null;this.props.withKeyPrefix&&(t=i.a.createElement(pt,{value:this.props.option.value||this.props.option.key}));var e=i.a.createElement("span",{className:"label",key:"label"},t,this.props.option.label),n=[this.props.startItems?i.a.createElement("div",{className:"ptr-item-actions-start",key:"items-start"},this.props.startItems):null,e,this.props.endItems?i.a.createElement("div",{className:"ptr-item-actions-end",key:"items-end"},this.props.endItems):null];return"function"===typeof this.props.onOptionLabelClick?i.a.createElement("a",{className:u()("ptr-item",this.props.option.className,{disabled:this.props.disabled}),onMouseDown:this.blockEvent,onTouchEnd:this.onClick,onClick:this.onClick,onKeyPress:this.onKeyPress,style:this.props.option.style,tabIndex:this.props.unfocusable?-1:0,title:this.props.option.label},n):i.a.createElement("div",{className:u()("ptr-item ptr-icon-inline-wrap",this.props.option.className,{disabled:this.props.disabled}),style:{display:"flex"},title:this.props.option.label},n)}}]),n}(i.a.PureComponent);dt.propTypes={disabled:a.a.bool,onOptionLabelClick:a.a.func,endItems:a.a.arrayOf(a.a.element),startItems:a.a.arrayOf(a.a.element),option:a.a.object.isRequired,renderer:a.a.func,unfocusable:a.a.bool,withKeyPrefix:a.a.bool};var gt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M16,18.692c-0.192,0-0.361-0.073-0.509-0.221L5.17,8.149C5.022,8.003,4.948,7.833,4.948,7.641 c0-0.191,0.074-0.362,0.222-0.509l1.107-1.107c0.148-0.147,0.316-0.222,0.509-0.222s0.362,0.074,0.51,0.222L16,14.729l8.704-8.704 c0.147-0.147,0.317-0.222,0.51-0.222c0.191,0,0.361,0.074,0.509,0.222l1.107,1.107c0.147,0.146,0.222,0.317,0.222,0.509 c0,0.192-0.074,0.362-0.222,0.509L16.51,18.472C16.361,18.619,16.192,18.692,16,18.692z M16,27.197 c-0.192,0-0.361-0.073-0.509-0.222L5.17,16.654c-0.147-0.146-0.222-0.316-0.222-0.509c0-0.191,0.074-0.362,0.222-0.51l1.107-1.107 c0.148-0.146,0.316-0.221,0.509-0.221s0.362,0.074,0.51,0.221L16,23.233l8.704-8.705c0.147-0.146,0.317-0.221,0.51-0.221 c0.191,0,0.361,0.074,0.509,0.221l1.107,1.107c0.147,0.147,0.222,0.318,0.222,0.51c0,0.192-0.074,0.362-0.222,0.509L16.51,26.976 C16.361,27.124,16.192,27.197,16,27.197z"}))},mt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M13.308,16c0-0.192,0.073-0.361,0.221-0.509L23.851,5.17c0.146-0.147,0.316-0.222,0.509-0.222 c0.191,0,0.362,0.074,0.509,0.222l1.107,1.107c0.147,0.148,0.222,0.316,0.222,0.509s-0.074,0.362-0.222,0.51L17.271,16l8.704,8.704 c0.147,0.147,0.222,0.317,0.222,0.51c0,0.191-0.074,0.361-0.222,0.509l-1.107,1.107c-0.146,0.147-0.317,0.222-0.509,0.222 c-0.192,0-0.362-0.074-0.509-0.222L13.528,16.51C13.381,16.361,13.308,16.192,13.308,16z M4.803,16c0-0.192,0.073-0.361,0.222-0.509 L15.346,5.17c0.146-0.147,0.316-0.222,0.509-0.222c0.191,0,0.362,0.074,0.51,0.222l1.107,1.107c0.146,0.148,0.221,0.316,0.221,0.509 s-0.074,0.362-0.221,0.51L8.767,16l8.705,8.704c0.146,0.147,0.221,0.317,0.221,0.51c0,0.191-0.074,0.361-0.221,0.509l-1.107,1.107 c-0.147,0.147-0.318,0.222-0.51,0.222c-0.192,0-0.362-0.074-0.509-0.222L5.024,16.51C4.876,16.361,4.803,16.192,4.803,16z"}))},yt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M18.692,16c0,0.192-0.073,0.361-0.221,0.509L8.15,26.83c-0.147,0.147-0.317,0.222-0.509,0.222 c-0.191,0-0.362-0.074-0.509-0.222l-1.107-1.107c-0.147-0.148-0.222-0.316-0.222-0.509s0.074-0.362,0.222-0.51L14.729,16 L6.024,7.296C5.877,7.148,5.803,6.979,5.803,6.787s0.074-0.362,0.222-0.509L7.132,5.17C7.279,5.022,7.45,4.948,7.641,4.948 c0.192,0,0.362,0.074,0.509,0.222l10.322,10.32C18.619,15.639,18.692,15.808,18.692,16z M27.197,16c0,0.192-0.073,0.361-0.222,0.509 L16.654,26.83c-0.146,0.147-0.316,0.222-0.509,0.222c-0.191,0-0.362-0.074-0.51-0.222l-1.107-1.107 c-0.147-0.148-0.221-0.316-0.221-0.509s0.074-0.362,0.221-0.51L23.233,16l-8.705-8.704c-0.147-0.147-0.221-0.317-0.221-0.509 s0.074-0.362,0.221-0.509l1.107-1.107c0.147-0.148,0.318-0.222,0.51-0.222c0.192,0,0.362,0.074,0.509,0.222l10.321,10.32 C27.124,15.639,27.197,15.808,27.197,16z"}))},vt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M16,13.308c0.192,0,0.361,0.073,0.509,0.221L26.83,23.851c0.147,0.146,0.222,0.316,0.222,0.509 c0,0.191-0.074,0.362-0.222,0.509l-1.107,1.107c-0.148,0.147-0.316,0.222-0.509,0.222s-0.362-0.074-0.51-0.222L16,17.271 l-8.704,8.704c-0.147,0.147-0.317,0.222-0.509,0.222s-0.362-0.074-0.509-0.222L5.17,24.868c-0.148-0.146-0.222-0.317-0.222-0.509 c0-0.192,0.074-0.362,0.222-0.509l10.32-10.322C15.639,13.381,15.808,13.308,16,13.308z M16,4.803c0.192,0,0.361,0.073,0.509,0.222 L26.83,15.346c0.147,0.146,0.222,0.316,0.222,0.509c0,0.191-0.074,0.362-0.222,0.51l-1.107,1.107 c-0.148,0.146-0.316,0.221-0.509,0.221s-0.362-0.074-0.51-0.221L16,8.767l-8.704,8.705c-0.147,0.146-0.317,0.221-0.509,0.221 s-0.362-0.074-0.509-0.221L5.17,16.364c-0.148-0.147-0.222-0.318-0.222-0.51c0-0.192,0.074-0.362,0.222-0.509l10.32-10.321 C15.639,4.876,15.808,4.803,16,4.803z"}))},Et=function(t){return i.a.createElement("g",null,i.a.createElement("rect",{className:"line",x:"5.578",y:"15",width:"21.125",height:"2"}),i.a.createElement("polygon",{className:"line",points:"12.977,25.095 3.882,16 12.977,6.905 14.391,8.319 6.71,16 14.391,23.681"}))},_t=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"m 19.203116,23.592532 q -1.800558,0 -3.293425,-0.273502 v -1.584035 h 2.529897 q 0.683756,0 0.957259,-0.136751 0.273502,-0.136751 0.273502,-0.490025 v -0.273502 q 0,-0.67236 -0.991446,-0.706548 l -2.051268,-0.09117 V 18.52134 l 1.9601,-0.125355 q 0.512817,-0.02279 0.740736,-0.159543 0.239315,-0.136751 0.239315,-0.444441 V 17.59827 q 0,-0.387462 -0.273503,-0.558401 -0.262106,-0.170939 -0.900278,-0.170939 h -2.336167 v -1.572638 q 1.777766,-0.296295 2.997131,-0.296295 1.185177,0 1.823349,0.535609 0.638172,0.524213 0.638172,1.584035 v 0.603984 q 0,1.219365 -1.002842,1.549847 0.512817,0.159543 0.820507,0.649568 0.30769,0.478629 0.30769,1.185177 v 0.376066 q 0,1.014238 -0.649568,1.561242 -0.638172,0.547005 -1.789161,0.547005 z m -7.79002,-6.7236 L 10,16.9601 v -1.253553 l 1.641014,-0.706548 h 1.743578 v 8.524158 H 11.413096 Z M 9.4765625,3.3515625 A 1.5001498,1.5001498 0 0 0 8,4.8730469 v 2.1484375 a 1.5001498,1.5001498 0 1 0 3,0 V 4.8730469 A 1.5001498,1.5001498 0 0 0 9.4765625,3.3515625 Z M 22.476562,3.4785156 A 1.50015,1.50015 0 0 0 21,5 v 2.1542969 a 1.50015,1.50015 0 1 0 3,0 V 5 A 1.50015,1.50015 0 0 0 22.476562,3.4785156 Z M 5,6.3515625 A 1.0001,1.1771578 0 0 0 4,7.5292969 V 11.822266 A 1.0001,1.1771578 0 0 0 5,13 h 22 a 1.0001,1.1771578 0 0 0 1,-1.177734 V 7.5292969 A 1.0001,1.1771578 0 0 0 27,6.3515625 h -2 v 0.8027344 a 2.50025,2.50025 0 1 1 -5,0 V 6.3515625 h -8 v 0.8164063 a 2.50025,2.50025 0 1 1 -5,0 V 6.3515625 Z M 5,10 a 1.0001,1.0001 0 0 0 -1,1 v 16 a 1.0001,1.0001 0 0 0 1,1 h 22 a 1.0001,1.0001 0 0 0 1,-1 V 11 a 1.0001,1.0001 0 0 0 -1,-1 z m 1,2 H 26 V 26 H 6 Z"}))},bt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M 26,16 A 10,10 0 0 1 16,26 10,10 0 0 1 6,16 10,10 0 0 1 16,6 10,10 0 0 1 26,16 Z"}))},St=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M 21.292969,3.2929688 8.5859375,16 21.292969,28.707031 22.707031,27.292969 11.414062,16 22.707031,4.7070312 Z"}))},wt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M 10,3.2929688 8.5859375,4.7070312 19.878906,16 8.5859375,27.292969 10,28.707031 22.707031,16 Z"}))},xt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M 29.009766 2.9902344 L 28.5 2.9960938 C 28.5 2.9960938 27.713516 3.0026237 26.796875 3.1367188 C 25.880234 3.2708164 24.818205 3.4747606 24.150391 4.1425781 C 23.482576 4.8103924 23.280583 5.8704688 23.146484 6.7871094 C 23.012386 7.7037499 23.003906 8.4902344 23.003906 8.4902344 L 23 9 L 23.509766 8.9960938 C 23.509766 8.9960938 24.29625 8.9876138 25.212891 8.8535156 C 26.129531 8.7194166 27.189607 8.5174204 27.857422 7.8496094 C 28.525236 7.1817989 28.729183 6.1197656 28.863281 5.203125 C 28.99738 4.2864844 29.003906 3.5 29.003906 3.5 L 29.009766 2.9902344 z M 18.990234 4 L 18.603516 4.3300781 C 18.603516 4.3300781 18.004663 4.8412729 17.388672 5.5332031 C 16.772681 6.2251333 16.090124 7.063066 16.007812 8.0039062 C 15.925503 8.9447444 16.452973 9.8893506 16.939453 10.677734 C 17.425933 11.466119 17.925781 12.072266 17.925781 12.072266 L 18.25 12.466797 L 18.636719 12.134766 C 18.636719 12.134766 19.235573 11.623571 19.851562 10.931641 C 20.467554 10.23971 21.148153 9.4017729 21.230469 8.4609375 C 21.312779 7.5200995 20.787261 6.5774467 20.300781 5.7890625 C 19.814301 5.0006783 19.314453 4.3925781 19.314453 4.3925781 L 18.990234 4 z M 13.990234 9 L 13.603516 9.3300781 C 13.603516 9.3300781 13.004663 9.841273 12.388672 10.533203 C 11.772681 11.225133 11.090124 12.063066 11.007812 13.003906 C 10.925503 13.944744 11.452973 14.88935 11.939453 15.677734 C 12.425933 16.466118 12.925781 17.072266 12.925781 17.072266 L 13.25 17.466797 L 13.636719 17.134766 C 13.636719 17.134766 14.235572 16.623571 14.851562 15.931641 C 15.467553 15.23971 16.148153 14.401772 16.230469 13.460938 C 16.312779 12.5201 15.787261 11.577448 15.300781 10.789062 C 14.814301 10.000678 14.314453 9.3925781 14.314453 9.3925781 L 13.990234 9 z M 23.892578 10.765625 C 23.775221 10.758183 23.656668 10.759242 23.539062 10.769531 C 22.598225 10.851841 21.76029 11.532446 21.068359 12.148438 C 20.376429 12.764428 19.865234 13.363281 19.865234 13.363281 L 19.533203 13.75 L 19.927734 14.074219 C 19.927734 14.074219 20.533881 14.574068 21.322266 15.060547 C 22.11065 15.547026 23.055257 16.074497 23.996094 15.992188 C 24.936932 15.909878 25.774866 15.227319 26.466797 14.611328 C 27.158727 13.995338 27.669922 13.396484 27.669922 13.396484 L 28 13.009766 L 27.607422 12.685547 C 27.607422 12.685547 26.999322 12.1857 26.210938 11.699219 C 25.521101 11.273548 24.714076 10.81772 23.892578 10.765625 z M 8.9902344 14 L 8.6035156 14.330078 C 8.6035156 14.330078 8.0046629 14.841273 7.3886719 15.533203 C 6.7726809 16.225133 6.0901237 17.063066 6.0078125 18.003906 C 5.9254995 18.944744 6.4529733 19.88935 6.9394531 20.677734 C 7.425933 21.466118 7.9257814 22.072266 7.9257812 22.072266 L 8.1914062 22.394531 L 2.9296875 27.65625 L 4.34375 29.070312 L 9.6054688 23.808594 L 9.9277344 24.074219 C 9.9277344 24.074219 10.533881 24.574068 11.322266 25.060547 C 12.11065 25.547026 13.055257 26.074497 13.996094 25.992188 C 14.936932 25.909878 15.774866 25.227319 16.466797 24.611328 C 17.158727 23.995338 17.669922 23.396484 17.669922 23.396484 L 18 23.009766 L 17.607422 22.685547 C 17.607422 22.685547 16.999322 22.1857 16.210938 21.699219 C 15.422553 21.212738 14.479903 20.687216 13.539062 20.769531 C 12.598225 20.851841 11.76029 21.532447 11.068359 22.148438 C 10.416896 22.728402 9.9595286 23.254283 9.9042969 23.318359 L 8.6816406 22.095703 C 8.7457168 22.040471 9.2715977 21.583104 9.8515625 20.931641 C 10.467553 20.23971 11.148153 19.401772 11.230469 18.460938 C 11.312781 17.5201 10.787261 16.577447 10.300781 15.789062 C 9.8143016 15.000679 9.3144531 14.392578 9.3144531 14.392578 L 8.9902344 14 z M 18.892578 15.765625 C 18.775221 15.758183 18.656668 15.759242 18.539062 15.769531 C 17.598225 15.851841 16.76029 16.532446 16.068359 17.148438 C 15.376429 17.764428 14.865234 18.363281 14.865234 18.363281 L 14.533203 18.75 L 14.927734 19.074219 C 14.927734 19.074219 15.533881 19.574068 16.322266 20.060547 C 17.11065 20.547026 18.055257 21.074497 18.996094 20.992188 C 19.936932 20.909878 20.774866 20.227319 21.466797 19.611328 C 22.158727 18.995338 22.669922 18.396484 22.669922 18.396484 L 23 18.009766 L 22.607422 17.685547 C 22.607422 17.685547 21.999322 17.1857 21.210938 16.699219 C 20.521101 16.273548 19.714076 15.81772 18.892578 15.765625 z"}))},Tt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"polygon",d:"M8 8 l0 18 l16 0 l0 -18",strokeWidth:"2",stroke:"black",strokeLinejoin:"round",fill:"transparent"}),i.a.createElement("path",{className:"line",d:"M5 8 l22 0",strokeWidth:"2",stroke:"black",strokeLinecap:"round"}),i.a.createElement("path",{className:"line",d:"M14 12 l0 10",strokeWidth:"2",stroke:"black",strokeLinecap:"round"}),i.a.createElement("path",{className:"line",d:"M18 12 l0 10",strokeWidth:"2",stroke:"black",strokeLinecap:"round"}),i.a.createElement("path",{className:"polygon",d:"M10 8 l3 -4 l6 0 l3 4",strokeWidth:"2",stroke:"black",strokeLinejoin:"round",fill:"transparent"}))},Lt=function(t){return i.a.createElement("g",null,i.a.createElement("circle",{className:"line",cx:"16",cy:"8",r:"2.4"}),i.a.createElement("circle",{className:"line",cx:"16",cy:"16",r:"2.4"}),i.a.createElement("circle",{className:"line",cx:"16",cy:"24",r:"2.4"}))},Ct=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M5 27 l22 0",strokeWidth:"2",stroke:"black"}),i.a.createElement("path",{className:"line",d:"M16 5 l0 18",strokeWidth:"2",stroke:"black"}),i.a.createElement("path",{className:"line",d:"M9 16 l8 8",strokeWidth:"2",stroke:"black"}),i.a.createElement("path",{className:"line",d:"M23 16 l-8 8",strokeWidth:"2",stroke:"black"}))},At=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M5.382,26.619l1.641-5.399l0.059-0.059l15.781-15.78l3.757,3.758L10.78,24.977L5.382,26.619z M7.597,21.562 l-1.242,4.083l4.082-1.242L25.703,9.139l-2.841-2.842L7.597,21.562z"}),i.a.createElement("rect",{className:"line",x:"6.628",y:"22.713",transform:"matrix(-0.7071 -0.7071 0.7071 -0.7071 -0.9941 45.6625)",width:"4.664",height:"0.649"}),i.a.createElement("polygon",{className:"line",points:"7.99,25.49 5.968,26.031 6.509,24.009"}))},Mt=function(t){return i.a.createElement("g",{transform:"scale(0.015,-0.015) translate(300,-1636)"},i.a.createElement("path",{className:"line",d:"M755 480q0 -13 -10 -23l-332 -332l144 -144q19 -19 19 -45t-19 -45t-45 -19h-448q-26 0 -45 19t-19 45v448q0 26 19 45t45 19t45 -19l144 -144l332 332q10 10 23 10t23 -10l114 -114q10 -10 10 -23zM1536 1344v-448q0 -26 -19 -45t-45 -19t-45 19l-144 144l-332 -332\nq-10 -10 -23 -10t-23 10l-114 114q-10 10 -10 23t10 23l332 332l-144 144q-19 19 -19 45t19 45t45 19h448q26 0 45 -19t19 -45z"}))},Rt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M26,12.832c0,0.174-0.066,0.327-0.2,0.461l-9.339,9.337c-0.134,0.134-0.287,0.201-0.461,0.201s-0.327-0.067-0.461-0.201 L6.2,13.293C6.066,13.159,6,13.006,6,12.832s0.066-0.327,0.2-0.461l1.002-1.002c0.134-0.134,0.287-0.2,0.461-0.2 s0.327,0.066,0.461,0.2L16,19.243l7.876-7.874c0.134-0.134,0.287-0.2,0.461-0.2s0.327,0.066,0.461,0.2l1.002,1.002 C25.934,12.505,26,12.658,26,12.832z"}))},Ot=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"m 9,1.5 c -2.198703,0 -4,1.8012974 -4,4 v 21 c 0,2.198703 1.801297,4 4,4 h 14 c 2.198703,0 4,-1.801297 4,-4 v -15 -1.324219 A 1.0001,1.0001 0 0 0 26.707031,9.46875 L 19.015625,1.7929688 A 1.0001,1.0001 0 0 0 18.310547,1.5 H 17.042969 A 1.0001,1.0001 0 0 0 17,1.5 Z m 0,2 h 6.953125 c -0.0097,0.2214834 -0.02148,0.2963688 -0.02148,0.4960938 V 8.5 c 0,2.198703 1.801297,4 4,4 H 24.5 25 v 14 c 0,1.125297 -0.874703,2 -2,2 H 9 c -1.1252976,0 -2,-0.874703 -2,-2 v -21 c 0,-1.1252972 0.8747024,-2 2,-2 z M 17.953125,3.5546875 24.908203,10.5 H 24.5 19.931641 c -1.125298,0 -2,-0.8747028 -2,-2 V 3.9960938 c 0,-0.1442488 0.01276,-0.2455428 0.02148,-0.4414063 z"}),i.a.createElement("path",{className:"line",d:"m 10.480661,24.00091 q -0.8341334,0 -1.3690667,-0.272 -0.5258667,-0.272 -0.816,-1.024533 -0.2901334,-0.752533 -0.2901334,-2.1488 0,-1.350933 0.2992,-2.0944 0.3082667,-0.752533 0.8432,-1.0336 0.5349334,-0.281067 1.3328001,-0.281067 0.752533,0 1.3056,0.1088 0.562133,0.1088 0.906667,0.253867 v 1.369067 q -0.2992,-0.06347 -0.779734,-0.1088 -0.480533,-0.04533 -1.042666,-0.04533 -0.444267,0 -0.670934,0.136 -0.2266664,0.126934 -0.3354664,0.5168 -0.099733,0.389867 -0.099733,1.1968 0,0.770667 0.0816,1.151467 0.090667,0.3808 0.3263997,0.544 0.235734,0.154133 0.716267,0.154133 1.187733,0 1.804267,-0.0816 v 1.369067 q -0.725334,0.290133 -2.212267,0.290133 z"}),i.a.createElement("path",{className:"line",d:"m 15.638178,24.00091 q -1.160534,0 -2.166934,-0.262933 V 22.34171 q 0.906667,0.0816 2.076267,0.0816 0.4624,0 0.68,-0.09973 0.2176,-0.1088 0.2176,-0.362667 v -0.1088 q 0,-0.1904 -0.136,-0.290133 -0.136,-0.1088 -0.335467,-0.1088 h -0.480533 q -1.078933,0 -1.613867,-0.471467 -0.525866,-0.480533 -0.525866,-1.541333 v -0.2992 q 0,-0.988267 0.589333,-1.486933 0.589333,-0.498667 1.731733,-0.498667 0.997334,0 2.103467,0.262933 v 1.396267 q -1.015467,-0.0816 -1.885867,-0.0816 -0.4352,0 -0.6528,0.1088 -0.2176,0.09973 -0.2176,0.389867 v 0.09067 q 0,0.4624 0.589334,0.4624 h 0.5984 q 0.915733,0 1.405333,0.507734 0.498667,0.507733 0.498667,1.323733 v 0.2992 q 0,0.834133 -0.290134,1.296533 -0.290133,0.453334 -0.825066,0.6256 -0.525867,0.1632 -1.36,0.1632 z"}),i.a.createElement("path",{className:"line",d:"m 18.40252,17.209977 h 1.8224 l 1.2784,4.823467 1.2784,-4.823467 h 1.804266 L 22.59132,23.94651 h -2.194134 z"}))},Pt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M 6,2 C 3.8012972,2 2,3.8012973 2,6 v 21 c 0,2.198703 1.8012972,4 4,4 h 14 c 2.198703,0 4,-1.801297 4,-4 v -4 h -2 v 4 c 0,1.125297 -0.874703,2 -2,2 H 6 C 4.8747028,29 4,28.125297 4,27 V 6 C 4,4.8747029 4.8747028,4 6,4 h 6.953125 c -0.0097,0.2214834 -0.02148,0.2963688 -0.02148,0.4960938 V 9 c 0,2.198703 1.801297,4 4,4 H 21.5 22 v 4 h 2 V 12 10.675781 A 1.0001,1.0001 0 0 0 23.707031,9.96875 L 16.015625,2.2929688 A 1.0001,1.0001 0 0 0 15.310547,2 H 14.042969 A 1.0001,1.0001 0 0 0 14,2 Z M 14.953125,4.0546875 21.908203,11 H 21.5 16.931641 c -1.125298,0 -2,-0.874703 -2,-2 V 4.4960938 c 0,-0.1442488 0.01276,-0.2455428 0.02148,-0.4414063 z"}),i.a.createElement("path",{className:"line",d:"m 26.990234,15.990234 a 1.0001,1.0001 0 0 0 -0.697265,1.716797 L 27.585938,19 H 15 a 1.0001,1.0001 0 1 0 0,2 h 12.585938 l -1.292969,1.292969 a 1.0001,1.0001 0 1 0 1.414062,1.414062 l 2.91211,-2.912109 a 1.0001,1.0001 0 0 0 0.0039,-1.587891 1.0001,1.0001 0 0 0 -0.0059,-0.0039 l -2.910157,-2.910156 a 1.0001,1.0001 0 0 0 -0.716797,-0.302735 z"}))},It=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"m 9,1.5 c -2.198703,0 -4,1.8012974 -4,4 v 21 c 0,2.198703 1.801297,4 4,4 h 14 c 2.198703,0 4,-1.801297 4,-4 v -15 -1.324219 A 1.0001,1.0001 0 0 0 26.707031,9.46875 L 19.015625,1.7929688 A 1.0001,1.0001 0 0 0 18.310547,1.5 H 17.042969 A 1.0001,1.0001 0 0 0 17,1.5 Z m 0,2 h 6.953125 c -0.0097,0.2214834 -0.02148,0.2963688 -0.02148,0.4960938 V 8.5 c 0,2.198703 1.801297,4 4,4 H 24.5 25 v 14 c 0,1.125297 -0.874703,2 -2,2 H 9 c -1.1252976,0 -2,-0.874703 -2,-2 v -21 c 0,-1.1252972 0.8747024,-2 2,-2 z M 17.953125,3.5546875 24.908203,10.5 H 24.5 19.931641 c -1.125298,0 -2,-0.8747028 -2,-2 V 3.9960938 c 0,-0.1442488 0.01276,-0.2455428 0.02148,-0.4414063 z"}),i.a.createElement("path",{className:"line",d:"m 23.058594,19.001953 c 0,0 -0.700885,-0.04464 -1.50586,0.08203 -0.804974,0.126674 -1.913068,0.374916 -2.451172,1.478516 -0.45985,0.943111 -0.255741,1.87634 -0.09961,2.394531 0.07807,0.259096 0.12878,0.441691 0.136719,0.511719 0.0079,0.07003 0.01564,-0.0037 0.0098,0.0059 0.08047,-0.130195 -0.27278,0.18517 -0.650391,0.328125 -0.377612,0.142956 -0.720703,0.222657 -0.720703,0.222657 a 1.0001,1.0001 0 1 0 0.445312,1.949218 c 0,0 0.459952,-0.102246 0.984375,-0.300781 0.524424,-0.198535 1.17221,-0.384205 1.644531,-1.148437 0.256988,-0.415814 0.317228,-0.914151 0.275391,-1.283203 -0.04184,-0.369053 -0.144037,-0.63929 -0.210937,-0.861329 -0.133801,-0.444077 -0.191728,-0.586196 -0.01758,-0.943359 0.01949,-0.03996 0.411168,-0.291471 0.966796,-0.378906 0.555629,-0.08744 1.076172,-0.06055 1.076172,-0.06055 a 1.0001,1.0001 0 1 0 0.117188,-1.996094 z m -5.134766,-5.003906 a 1.0001,1.0001 0 0 0 -0.146484,1.976562 c 0,0 0.343091,0.0797 0.720703,0.222657 0.377611,0.142955 0.730856,0.45832 0.650391,0.328125 0.0059,0.0095 -0.0018,-0.06417 -0.0098,0.0059 -0.0079,0.07003 -0.05865,0.252623 -0.136719,0.511719 -0.156132,0.518191 -0.360241,1.45142 0.09961,2.394531 0.538104,1.1036 1.646198,1.351842 2.451172,1.478516 0.804975,0.126673 1.50586,0.08203 1.50586,0.08203 a 1.0001,1.0001 0 1 0 -0.117188,-1.996094 c 0,0 -0.520543,0.02689 -1.076172,-0.06055 -0.555628,-0.08743 -0.94731,-0.338941 -0.966796,-0.378906 -0.17415,-0.357163 -0.116223,-0.499282 0.01758,-0.943359 0.0669,-0.222039 0.1691,-0.492276 0.210937,-0.861329 0.04184,-0.369052 -0.0184,-0.867389 -0.275391,-1.283203 C 20.37921,14.710414 19.731424,14.524744 19.207,14.326209 18.682577,14.127674 18.222625,14.025428 18.222625,14.025428 a 1.0001,1.0001 0 0 0 -0.298828,-0.02734 z m -8.9824218,5.003906 a 1.0001,1.0001 0 1 0 0.1171876,1.996094 c 0,0 0.5205436,-0.02689 1.0761722,0.06055 0.555628,0.08743 0.94731,0.338941 0.966796,0.378906 0.17415,0.357163 0.116223,0.499282 -0.01758,0.943359 -0.0669,0.222039 -0.1691,0.492276 -0.210937,0.861329 -0.04184,0.369052 0.0184,0.867389 0.275391,1.283203 0.472321,0.764232 1.120107,0.949902 1.644531,1.148437 0.524424,0.198535 0.984375,0.300781 0.984375,0.300781 a 1.0001,1.0001 0 1 0 0.445312,-1.949218 c 0,0 -0.343091,-0.0797 -0.720703,-0.222657 -0.377612,-0.142955 -0.730855,-0.458319 -0.650391,-0.328125 -0.0059,-0.0095 0.0018,0.06417 0.0098,-0.0059 0.0079,-0.07003 0.05865,-0.252623 0.136719,-0.511719 0.156132,-0.518191 0.360241,-1.45142 -0.09961,-2.394531 -0.538104,-1.1036 -1.646198,-1.351842 -2.451172,-1.478516 -0.8049746,-0.126673 -1.5058597,-0.08203 -1.5058598,-0.08203 z m 5.1035158,-5.003906 a 1.0001,1.0001 0 0 0 -0.267578,0.02734 c 0,0 -0.459951,0.102246 -0.984375,0.300781 -0.524424,0.198535 -1.17221,0.384205 -1.644531,1.148437 -0.256988,0.415814 -0.317228,0.914151 -0.275391,1.283203 0.04184,0.369053 0.144037,0.63929 0.210937,0.861329 0.133801,0.444077 0.191728,0.586196 0.01758,0.943359 -0.01949,0.03996 -0.411168,0.291471 -0.966796,0.378906 -0.5556286,0.08744 -1.0761722,0.06055 -1.0761722,0.06055 a 1.0001,1.0001 0 1 0 -0.1171876,1.996094 c 0,0 0.7008852,0.04464 1.5058598,-0.08203 0.804974,-0.126674 1.913068,-0.374916 2.451172,-1.478516 0.45985,-0.943111 0.255741,-1.87634 0.09961,-2.394531 -0.07807,-0.259096 -0.12878,-0.441691 -0.136719,-0.511719 -0.0079,-0.07003 -0.01564,0.0037 -0.0098,-0.0059 -0.08046,0.130194 0.272779,-0.18517 0.650391,-0.328125 0.377612,-0.142956 0.720703,-0.222657 0.720703,-0.222657 a 1.0001,1.0001 0 0 0 -0.177734,-1.976562 z"}))},Nt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"m 9,1.5 c -2.198703,0 -4,1.8012974 -4,4 v 21 c 0,2.198703 1.801297,4 4,4 h 14 c 2.198703,0 4,-1.801297 4,-4 v -15 -1.324219 A 1.0001,1.0001 0 0 0 26.707031,9.46875 L 19.015625,1.7929688 A 1.0001,1.0001 0 0 0 18.310547,1.5 H 17.042969 A 1.0001,1.0001 0 0 0 17,1.5 Z m 0,2 h 6.953125 c -0.0097,0.2214834 -0.02148,0.2963688 -0.02148,0.4960938 V 8.5 c 0,2.198703 1.801297,4 4,4 H 24.5 25 v 14 c 0,1.125297 -0.874703,2 -2,2 H 9 c -1.1252976,0 -2,-0.874703 -2,-2 v -21 c 0,-1.1252972 0.8747024,-2 2,-2 z M 17.953125,3.5546875 24.908203,10.5 H 24.5 19.931641 c -1.125298,0 -2,-0.8747028 -2,-2 V 3.9960938 c 0,-0.1442488 0.01276,-0.2455428 0.02148,-0.4414063 z"}),i.a.createElement("path",{className:"line",d:"m 17.596711,20.583751 3.329625,5.362759 H 17.773505 L 15.858234,22.867344 14.178689,25.94651 H 11.025858 L 14.355483,20.451156 10.981659,15 H 14.13449 L 16.108693,18.197029 17.847169,15 H 21 Z"}))},Dt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M 5,4 H 28 L 18.535874,15 18.453432,25 13,27 V 15 L 4,4 h 1"}))},kt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M 13.357422 2.6210938 L 13.007812 6.0410156 L 11.150391 6.8457031 L 8.3984375 4.6816406 L 4.671875 8.4082031 L 6.8359375 11.064453 L 6.0292969 13.009766 L 2.6210938 13.357422 L 2.6210938 18.642578 L 6.0292969 18.990234 L 6.8339844 20.933594 L 4.6523438 23.587891 L 8.3886719 27.326172 L 11.0625 25.164062 L 13.005859 25.96875 L 13.335938 29.378906 L 18.642578 29.378906 L 18.990234 25.970703 L 20.935547 25.164062 L 23.591797 27.328125 L 27.328125 23.591797 L 25.164062 20.935547 L 25.970703 18.990234 L 29.378906 18.642578 L 29.378906 13.357422 L 25.970703 13.009766 L 25.164062 11.0625 L 27.308594 8.40625 L 23.572266 4.6699219 L 20.933594 6.8339844 L 18.986328 6.0292969 L 18.621094 2.6210938 L 13.357422 2.6210938 z M 15.164062 4.6210938 L 16.824219 4.6210938 L 17.125 7.421875 L 21.275391 9.140625 L 23.439453 7.3652344 L 24.623047 8.5488281 L 22.861328 10.728516 L 24.580078 14.878906 L 27.378906 15.164062 L 27.378906 16.835938 L 24.580078 17.121094 L 22.859375 21.273438 L 24.636719 23.455078 L 23.455078 24.636719 L 21.273438 22.859375 L 17.121094 24.580078 L 16.835938 27.378906 L 15.152344 27.378906 L 14.880859 24.580078 L 10.728516 22.861328 L 8.53125 24.638672 L 7.3476562 23.457031 L 9.140625 21.275391 L 7.4199219 17.121094 L 6.8261719 17.060547 L 4.6210938 16.835938 L 4.6210938 15.164062 L 7.4199219 14.878906 L 9.140625 10.726562 L 7.3632812 8.5449219 L 8.5566406 7.3515625 L 10.849609 9.1542969 L 14.878906 7.4101562 L 15.164062 4.6210938 z M 16 10 C 12.698136 10 10 12.698136 10 16 C 10 19.301864 12.698136 22 16 22 C 19.301864 22 22 19.301864 22 16 C 22 12.698136 19.301864 10 16 10 z M 16 12 C 18.220984 12 20 13.779016 20 16 C 20 18.220984 18.220984 20 16 20 C 13.779016 20 12 18.220984 12 16 C 12 13.779016 13.779016 12 16 12 z "}))},Ft=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M20.653,25.472h-1.695V13.243c0-0.423-0.343-0.766-0.766-0.766h-3.207h-1.179h-2.46c-0.423,0-0.766,0.343-0.766,0.766v0.563 c0,0.424,0.343,0.766,0.766,0.766h1.694v10.899h-1.695c-0.423,0-0.766,0.343-0.766,0.766v0.563c0,0.424,0.343,0.766,0.766,0.766 h2.456c0.002,0,0.003,0.001,0.005,0.001h4.386c0.002,0,0.003-0.001,0.005-0.001h2.456c0.423,0,0.766-0.342,0.766-0.766v-0.563 C21.419,25.814,21.076,25.472,20.653,25.472z"}),i.a.createElement("circle",{className:"line",cx:"16",cy:"7.583",r:"3.151"}))},Vt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{d:"M5 5 l0 17 l5 0 l0 -12 l12 0 l0 -5",strokeWidth:"2",className:"polygonFilled"}),i.a.createElement("path",{d:"M10 22 l0 5 l17 0 l0 -17 l-5 0 l0 12 l-12 0",strokeWidth:"2",className:"polygon"}),i.a.createElement("path",{d:"M10 10 L22 22",strokeWidth:"2",className:"line"}),i.a.createElement("path",{d:"M16 10 L22 16",strokeWidth:"2",className:"line"}),i.a.createElement("path",{d:"M10 16 L16 22",strokeWidth:"2",className:"line"}))},jt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M 16,2.8828125 1.7636719,10 3.5527344,10.894531 16,17.117188 30.236328,10 Z M 16,5.1171875 25.763672,10 16,14.882812 6.2363281,10 Z"}),i.a.createElement("path",{className:"line",d:"M 9.5527344,12.105469 1.7636719,16 16,23.117188 30.236328,16 22.447266,12.105469 21.552734,13.894531 25.763672,16 16,20.882812 6.2363281,16 10.447266,13.894531 Z"}),i.a.createElement("path",{className:"line",d:"M 9.5527344,18.105469 1.7636719,22 16,29.117188 30.236328,22 22.447266,18.105469 21.552734,19.894531 25.763672,22 16,26.882812 6.2363281,22 10.447266,19.894531 Z"}))},Bt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M 10,25 A 3.5,3.5 0 0 1 6.5,28.5 3.5,3.5 0 0 1 3,25 3.5,3.5 0 0 1 6.5,21.5 3.5,3.5 0 0 1 10,25 Z"}),i.a.createElement("path",{className:"line",d:"m 4,12.5 h 5 c 0.554,0 1,0.446 1,1 v 5 c 0,0.554 -0.446,1 -1,1 H 4 c -0.554,0 -1,-0.446 -1,-1 v -5 c 0,-0.554 0.446,-1 1,-1 z"}),i.a.createElement("path",{className:"line",d:"M 6.5488281,4.0214844 C 6.3688189,4.0168495 6.200219,4.1093556 6.1074219,4.2636719 l -3,4.9785156 C 2.9071078,9.5751818 3.1465554,9.9994087 3.5351562,10 h 6 C 9.9237571,9.9994087 10.163205,9.5751818 9.9628906,9.2421875 l -3,-4.9785156 C 6.8751262,4.1176904 6.7190891,4.0264234 6.5488281,4.0214844 Z M 8.6503906,9 V 9 H 4.4199219 Z"}),i.a.createElement("path",{className:"line",d:"m 14.080078,6 a 1.0001,1.0001 0 1 0 0,2 h 13.853516 a 1.0001,1.0001 0 1 0 0,-2 z"}),i.a.createElement("path",{className:"line",d:"m 14.080078,15 a 1.0001,1.0001 0 1 0 0,2 h 13.853516 a 1.0001,1.0001 0 1 0 0,-2 z"}),i.a.createElement("path",{className:"line",d:"m 14.080078,24 a 1.0001,1.0001 0 1 0 0,2 h 13.853516 a 1.0001,1.0001 0 1 0 0,-2 z"}))},Ut=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"m 19.703125,14.544922 -3.705078,5.810547 -3.697266,-5.78125 -4.2128904,2.693359 7.9140624,12.376953 7.916016,-12.410156 z M 16,2.5 c -5.217094,0 -9.5,4.2829065 -9.5,9.5 0,5.217094 4.282906,9.5 9.5,9.5 5.217094,0 9.5,-4.282906 9.5,-9.5 0,-5.2170935 -4.282906,-9.5 -9.5,-9.5 z m 0,5 c 2.514893,0 4.5,1.985107 4.5,4.5 0,2.514893 -1.985107,4.5 -4.5,4.5 -2.514893,0 -4.5,-1.985107 -4.5,-4.5 0,-2.514893 1.985107,-4.5 4.5,-4.5 z"}))},Gt=function(t){return i.a.createElement("g",null,i.a.createElement("rect",{className:"line",x:"4",y:"15.2",width:"24",height:"1.6"}))},Kt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M27.088,17.484c0,0.423-0.343,0.766-0.766,0.766H5.677c-0.423,0-0.766-0.343-0.766-0.766v-2.969 c0-0.423,0.343-0.766,0.766-0.766h20.646c0.423,0,0.766,0.343,0.766,0.766V17.484z"}))},Wt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"m 11,27 a 1.0001,1.0001 0 1 0 0,2 h 10 a 1.0001,1.0001 0 1 0 0,-2 z m 3,-5 -1,6 h 6 L 18,22 M 4,4 A 1.0001,1.0001 0 0 0 3,5 v 17 a 1.0001,1.0001 0 0 0 1,1 h 24 a 1.0001,1.0001 0 0 0 1,-1 V 5 A 1.0001,1.0001 0 0 0 28,4 Z M 5,6 H 27 V 21 H 5 Z"}))},zt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M 4 4 A 1.0001 1.0001 0 0 0 3 5 L 3 22 A 1.0001 1.0001 0 0 0 4 23 L 13.833984 23 L 13.166016 27 L 11 27 A 1.0001 1.0001 0 1 0 11 29 L 21 29 A 1.0001 1.0001 0 1 0 21 27 L 18.833984 27 L 18.166016 23 L 28 23 A 1.0001 1.0001 0 0 0 29 22 L 29 5 A 1.0001 1.0001 0 0 0 28 4 L 4 4 z M 5 6 L 27 6 L 27 21 L 5 21 L 5 6 z M 18.9375 7.5957031 L 14.888672 15.099609 L 11.439453 10.1875 L 8.1503906 15.470703 L 9.8496094 16.529297 L 11.539062 13.8125 L 15.111328 18.898438 L 19.0625 11.576172 L 22.152344 16.529297 L 23.847656 15.470703 L 18.9375 7.5957031 z"}))},Yt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M16.983,3.272l7.351,22.055c0.139,0.398,0.055,0.75-0.252,1.057c-0.037,0.038-0.104,0.089-0.193,0.148 c-0.209,0.13-0.431,0.182-0.667,0.149c-0.237-0.029-0.44-0.131-0.609-0.298l-6.617-6.616l-6.617,6.616 c-0.168,0.167-0.371,0.269-0.609,0.298c-0.237,0.032-0.459-0.02-0.666-0.149c-0.207-0.13-0.352-0.306-0.437-0.528 c-0.084-0.222-0.087-0.446-0.011-0.677l7.352-22.055c0.045-0.153,0.131-0.292,0.253-0.414c0.207-0.206,0.452-0.306,0.735-0.298 c0.223-0.008,0.425,0.054,0.609,0.184C16.788,2.874,16.915,3.05,16.983,3.272z"}))},Ht=function(t){return i.a.createElement("g",null,i.a.createElement("rect",{className:"line",x:"15.2",y:"4",width:"1.6",height:"24"}),i.a.createElement("rect",{className:"line",x:"4",y:"15.2",width:"24",height:"1.6"}))},qt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M27.088,17.484c0,0.423-0.343,0.766-0.766,0.766H5.677c-0.423,0-0.766-0.343-0.766-0.766v-2.969 c0-0.423,0.343-0.766,0.766-0.766h20.646c0.423,0,0.766,0.343,0.766,0.766V17.484z"}),i.a.createElement("path",{className:"line",d:"M17.484,4.912c0.423,0,0.766,0.343,0.766,0.766v20.646c0,0.423-0.343,0.766-0.766,0.766h-2.969 c-0.423,0-0.766-0.343-0.766-0.766V5.677c0-0.423,0.343-0.766,0.766-0.766H17.484z"}))},Xt=function(t){return i.a.createElement("g",{transform:"scale(0.016,-0.016) translate(450,-1636)"},i.a.createElement("path",{className:"line",d:"M480 672v448q0 14 -9 23t-23 9t-23 -9t-9 -23v-448q0 -14 9 -23t23 -9t23 9t9 23zM1152 320q0 -26 -19 -45t-45 -19h-429l-51 -483q-2 -12 -10.5 -20.5t-20.5 -8.5h-1q-27 0 -32 27l-76 485h-404q-26 0 -45 19t-19 45q0 123 78.5 221.5t177.5 98.5v512q-52 0 -90 38\nt-38 90t38 90t90 38h640q52 0 90 -38t38 -90t-38 -90t-90 -38v-512q99 0 177.5 -98.5t78.5 -221.5z"}))},Zt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"polygon",d:"M11 11 L11 5 L27 5 L27 21 L21 21",strokeWidth:"3"}),i.a.createElement("rect",{className:"polygon",x:"5",y:"11",width:"16",height:"16",strokeWidth:"3"}),i.a.createElement("rect",{className:"line",x:"5",y:"11",width:"16",height:"4"}))},Jt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M27,16c0,1.489-0.292,2.913-0.874,4.269c-0.581,1.354-1.366,2.526-2.349,3.509s-2.154,1.768-3.509,2.349 C18.913,26.708,17.489,27,16,27c-1.642,0-3.204-0.346-4.684-1.038c-1.48-0.693-2.741-1.669-3.781-2.93 c-0.067-0.095-0.098-0.202-0.093-0.322s0.045-0.216,0.122-0.293l1.962-1.977c0.096-0.086,0.215-0.129,0.358-0.129 c0.152,0.02,0.263,0.077,0.329,0.172c0.697,0.907,1.552,1.609,2.564,2.105c1.012,0.495,2.086,0.744,3.223,0.744 c0.994,0,1.94-0.193,2.843-0.58s1.684-0.909,2.342-1.568c0.659-0.658,1.182-1.439,1.568-2.342s0.58-1.849,0.58-2.843 c0-0.993-0.193-1.941-0.58-2.843s-0.909-1.683-1.568-2.342c-0.658-0.659-1.439-1.182-2.342-1.568S16.994,8.667,16,8.667 c-0.936,0-1.833,0.17-2.693,0.509s-1.623,0.823-2.292,1.454l1.962,1.977c0.296,0.287,0.363,0.616,0.2,0.988 c-0.162,0.382-0.444,0.573-0.845,0.573H5.917c-0.248,0-0.463-0.091-0.645-0.272C5.091,13.713,5,13.499,5,13.25V6.833 c0-0.401,0.191-0.683,0.573-0.845c0.373-0.163,0.702-0.095,0.988,0.201l1.862,1.848c1.021-0.965,2.189-1.712,3.502-2.242 C13.238,5.265,14.596,5,16,5c1.489,0,2.913,0.292,4.269,0.874c1.354,0.583,2.526,1.366,3.509,2.349s1.768,2.153,2.349,3.509 C26.708,13.087,27,14.51,27,16z"}))},Qt=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M5.874,11.732c0.581-1.356,1.366-2.526,2.349-3.509s2.154-1.767,3.509-2.349C13.087,5.292,14.511,5,16,5 c1.403,0,2.762,0.265,4.074,0.795c1.313,0.53,2.48,1.277,3.502,2.242l1.862-1.848c0.286-0.296,0.616-0.363,0.988-0.201 C26.809,6.151,27,6.432,27,6.833v6.417c0,0.249-0.091,0.463-0.272,0.645s-0.396,0.272-0.645,0.272h-6.417 c-0.4,0-0.683-0.191-0.845-0.573c-0.162-0.373-0.096-0.702,0.2-0.988l1.963-1.977c-0.669-0.63-1.433-1.115-2.292-1.454 S16.936,8.667,16,8.667c-0.994,0-1.94,0.193-2.843,0.58s-1.684,0.91-2.342,1.568c-0.659,0.659-1.182,1.439-1.568,2.342 s-0.58,1.85-0.58,2.843c0,0.994,0.193,1.94,0.58,2.843s0.909,1.684,1.568,2.342c0.658,0.659,1.439,1.182,2.342,1.568 s1.849,0.58,2.843,0.58c1.136,0,2.21-0.249,3.223-0.744c1.012-0.496,1.866-1.198,2.563-2.105c0.066-0.095,0.177-0.152,0.329-0.172 c0.144,0,0.263,0.043,0.358,0.129l1.962,1.977c0.077,0.077,0.117,0.173,0.122,0.293s-0.026,0.228-0.093,0.322 c-1.041,1.261-2.302,2.236-3.781,2.93C19.203,26.654,17.642,27,16,27c-1.489,0-2.913-0.292-4.269-0.874 c-1.354-0.581-2.526-1.366-3.509-2.349s-1.768-2.154-2.349-3.509C5.292,18.913,5,17.489,5,16C5,14.51,5.292,13.087,5.874,11.732z"}))},$t=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M 13,3 C 7.4889972,3 3,7.4889972 3,13 3,18.511003 7.4889972,23 13,23 18.511003,23 23,18.511003 23,13 23,7.4889972 18.511003,3 13,3 Z m 0,2 c 4.430123,0 8,3.5698773 8,8 0,4.430123 -3.569877,8 -8,8 C 8.5698773,21 5,17.430123 5,13 5,8.5698773 8.5698773,5 13,5 Z"}),i.a.createElement("path",{className:"line",d:"m 20.707031,19.292969 -1.414062,1.414062 9,9 1.414062,-1.414062 z"}))},te=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"m 9,1.5 c -2.198703,0 -4,1.8012974 -4,4 v 21 c 0,2.198703 1.801297,4 4,4 h 14 c 2.198703,0 4,-1.801297 4,-4 v -15 -1.324219 A 1.0001,1.0001 0 0 0 26.707031,9.46875 L 19.015625,1.7929688 A 1.0001,1.0001 0 0 0 18.310547,1.5 H 17.042969 A 1.0001,1.0001 0 0 0 17,1.5 Z m 0,2 h 6.953125 c -0.0097,0.2214834 -0.02148,0.2963688 -0.02148,0.4960938 V 8.5 c 0,2.198703 1.801297,4 4,4 H 24.5 25 v 14 c 0,1.125297 -0.874703,2 -2,2 H 9 c -1.1252976,0 -2,-0.874703 -2,-2 v -21 c 0,-1.1252972 0.8747024,-2 2,-2 z M 17.953125,3.5546875 24.908203,10.5 H 24.5 19.931641 c -1.125298,0 -2,-0.8747028 -2,-2 V 3.9960938 c 0,-0.1442488 0.01276,-0.2455428 0.02148,-0.4414063 z"}),i.a.createElement("path",{className:"line",d:"M 11.5 11 A 2.4999993 2.4999993 0 0 0 9 13.5 A 2.4999993 2.4999993 0 0 0 10.923828 15.929688 L 11.494141 22.214844 A 2.4999993 2.4999993 0 0 0 10 24.5 A 2.4999993 2.4999993 0 0 0 12.5 27 A 2.4999993 2.4999993 0 0 0 14.955078 24.962891 L 17.753906 24.59375 A 2.4999993 2.4999993 0 0 0 20 26 A 2.4999993 2.4999993 0 0 0 22.5 23.5 A 2.4999993 2.4999993 0 0 0 21.107422 21.261719 L 21.388672 19.417969 A 2.4999993 2.4999993 0 0 0 23.5 16.949219 A 2.4999993 2.4999993 0 0 0 21 14.449219 A 2.4999993 2.4999993 0 0 0 18.988281 15.470703 L 13.992188 13.654297 A 2.4999993 2.4999993 0 0 0 14 13.5 A 2.4999993 2.4999993 0 0 0 11.5 11 z M 13.455078 15.052734 L 18.501953 16.888672 A 2.4999993 2.4999993 0 0 0 18.5 16.949219 A 2.4999993 2.4999993 0 0 0 19.90625 19.195312 L 19.625 21.03125 A 2.4999993 2.4999993 0 0 0 17.533203 23.109375 L 14.777344 23.474609 A 2.4999993 2.4999993 0 0 0 12.986328 22.048828 L 12.421875 15.822266 A 2.4999993 2.4999993 0 0 0 13.455078 15.052734 z "}))},ee=function(t){return i.a.createElement("g",null,i.a.createElement("circle",{className:"line",cx:"6.998",cy:"16",r:"3.15"}),i.a.createElement("circle",{className:"line",cx:"24.005",cy:"8.513",r:"3.149"}),i.a.createElement("circle",{className:"line",cx:"24.005",cy:"23.484",r:"3.149"}),i.a.createElement("path",{className:"line",d:"M19.623,10.034c-0.003-0.005-0.002-0.012-0.004-0.018c-0.003-0.005-0.008-0.009-0.012-0.014 c-0.042-0.082-0.111-0.149-0.206-0.184l0,0l-0.264-0.096L16.36,8.711c-0.199-0.072-0.418,0.03-0.492,0.229l-0.095,0.265 c-0.073,0.2,0.029,0.418,0.229,0.49l1.724,0.627l-6.156,2.87c-0.192,0.089-0.275,0.317-0.185,0.509l0.119,0.255 c0.09,0.192,0.317,0.275,0.509,0.185l6.155-2.87l-0.627,1.722c-0.072,0.199,0.029,0.418,0.229,0.491l0.264,0.096 c0.199,0.072,0.418-0.03,0.492-0.229l1.01-2.778l0.097-0.263V10.31C19.665,10.216,19.658,10.119,19.623,10.034z"}),i.a.createElement("path",{className:"line",d:"M19.623,21.83c-0.003,0.006-0.002,0.013-0.004,0.018c-0.003,0.006-0.008,0.01-0.012,0.015 c-0.042,0.081-0.111,0.149-0.206,0.185l0,0l-0.264,0.096l-2.777,1.012c-0.199,0.071-0.418-0.031-0.492-0.229l-0.095-0.265 c-0.073-0.199,0.029-0.418,0.229-0.49l1.724-0.627l-6.156-2.871c-0.192-0.089-0.275-0.316-0.185-0.508l0.119-0.256 c0.09-0.191,0.317-0.274,0.509-0.185l6.155,2.87l-0.627-1.723c-0.072-0.199,0.029-0.418,0.229-0.49l0.264-0.097 c0.199-0.071,0.418,0.03,0.492,0.229l1.01,2.777l0.097,0.264l0,0C19.665,21.648,19.658,21.746,19.623,21.83z"}))},ne=function(t){return i.a.createElement("g",{transform:"matrix(0.05117622,0,0,0.05117622,2.9443694,-1.5263058)"},i.a.createElement("path",{className:"line",d:"m 224.595,201.822 h -93.576 c -6.879,0 -13.674,3.236 -15.211,7.307 l -24.902,66.025 c -2.188,5.797 2.867,10.61 11.34,10.61 h 115.271 c 8.477,0 15.584,-4.813 15.873,-10.611 l 3.295,-66.024 c 0.203,-4.072 -5.211,-7.307 -12.09,-7.307 z"}),i.a.createElement("path",{className:"line",d:"m 379.204,201.821 -93.574,0.001 c -6.879,0 -12.293,3.236 -12.092,7.307 l 3.293,66.024 c 0.291,5.798 7.4,10.611 15.873,10.611 h 115.275 c 8.473,0 13.525,-4.813 11.338,-10.611 l -24.902,-66.024 c -1.536,-4.072 -8.334,-7.308 -15.211,-7.308 z"}),i.a.createElement("path",{className:"line",d:"M 419.61,319.696 H 295.565 c -9.117,0 -16.227,5.703 -15.865,12.927 l 6.236,125.035 c 0.586,11.742 10.93,21.594 23.078,21.594 h 165.289 c 12.148,0 18.283,-9.852 13.855,-21.594 L 440.994,332.623 c -2.722,-7.225 -12.267,-12.927 -21.384,-12.927 z"}),i.a.createElement("path",{className:"line",d:"m 214.657,319.696 -124.043,10e-4 c -9.121,0 -18.662,5.702 -21.387,12.926 L 22.065,457.657 c -4.428,11.742 1.703,21.594 13.855,21.594 h 165.285 c 12.152,0 22.492,-9.852 23.076,-21.594 l 6.24,-125.035 c 0.363,-7.223 -6.745,-12.926 -15.864,-12.926 z"}))},re=function(t){return i.a.createElement("g",{transform:"matrix(0.05016772,0,0,0.05016772,3.2140793,3.141888)"},i.a.createElement("path",{className:"line",d:"M 210.81,37.038 H 55.599 c -11.047,0 -20,8.954 -20,20 v 155.211 c 0,11.046 8.953,20 20,20 H 210.81 c 11.045,0 20,-8.954 20,-20 V 57.038 c 0,-11.046 -8.956,-20 -20,-20 z"}),i.a.createElement("path",{className:"line",d:"m 454.127,37.038 h -155.21 c -11.047,0 -20,8.954 -20,20 v 155.211 c 0,11.046 8.953,20 20,20 h 155.211 c 11.045,0 20,-8.954 20,-20 V 57.038 c -10e-4,-11.046 -8.956,-20 -20.001,-20 z"}),i.a.createElement("path",{className:"line",d:"m 454.127,280.369 h -155.21 c -11.047,0 -20,8.954 -20,20 V 455.58 c 0,11.046 8.953,20 20,20 h 155.211 c 11.045,0 20,-8.954 20,-20 V 300.369 c -10e-4,-11.046 -8.956,-20 -20.001,-20 z"}),i.a.createElement("path",{className:"line",d:"M 210.81,280.369 H 55.599 c -11.047,0 -20,8.954 -20,20 V 455.58 c 0,11.046 8.953,20 20,20 H 210.81 c 11.045,0 20,-8.954 20,-20 V 300.369 c 0,-11.046 -8.956,-20 -20,-20 z"}))},ie=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M 7.7070312,6.2929688 6.2929688,7.7070312 24.292969,25.707031 25.707031,24.292969 Z"}),i.a.createElement("path",{className:"line",d:"M 24.292969,6.2929688 6.2929688,24.292969 7.7070312,25.707031 25.707031,7.7070312 Z"}))},oe=function(t){return i.a.createElement("g",null,i.a.createElement("polygon",{className:"line",points:"23.313,10.729 16.001,23.396 8.688,10.729"}))},ae=function(t){return i.a.createElement("g",null,i.a.createElement("path",{className:"line",d:"M4 27 l24 0",strokeWidth:"2"}),i.a.createElement("path",{className:"line",d:"M4 28 l0 -6",strokeWidth:"2"}),i.a.createElement("path",{className:"line",d:"M28 28 l0 -6",strokeWidth:"2"}),i.a.createElement("path",{className:"line",d:"M16 5 l0 18",strokeWidth:"2"}),i.a.createElement("path",{className:"line",d:"M16 5 l7 7",strokeWidth:"2"}),i.a.createElement("path",{className:"line",d:"M16 5 l-7 7",strokeWidth:"2"}))},se=function(t){return i.a.createElement("svg",{style:t.style,version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"32px",height:"32px",viewBox:"0 0 32 32",xmlSpace:"preserve",className:"ptr-icon ".concat(t.className||"")},"function"===typeof t.icon?t.icon():function(t){switch(t){case"angle-double-right":return i.a.createElement(yt,null);case"angle-double-left":return i.a.createElement(mt,null);case"angle-double-up":return i.a.createElement(vt,null);case"angle-double-down":return i.a.createElement(gt,null);case"arrow-left":case"back":return i.a.createElement(Et,null);case"calendar":return i.a.createElement(_t,null);case"circle":return i.a.createElement(bt,null);case"chevron-left":return i.a.createElement(St,null);case"chevron-right":return i.a.createElement(wt,null);case"crop":return i.a.createElement(xt,null);case"delete":return i.a.createElement(Tt,null);case"dots":return i.a.createElement(Lt,null);case"download":return i.a.createElement(Ct,null);case"edit":return i.a.createElement(At,null);case"expand":return i.a.createElement(Mt,null);case"expand-row":return i.a.createElement(Rt,null);case"filter":return i.a.createElement(Dt,null);case"file-export":return i.a.createElement(Pt,null);case"file-csv":case"csv":return i.a.createElement(Ot,null);case"file-json":case"json":return i.a.createElement(It,null);case"file-xls":case"xls":case"excel":return i.a.createElement(Nt,null);case"gear":case"settings":return i.a.createElement(kt,null);case"info":return i.a.createElement(Ft,null);case"layers":return i.a.createElement(jt,null);case"legend":return i.a.createElement(Bt,null);case"map-pin":return i.a.createElement(Ut,null);case"minus":return i.a.createElement(Gt,null);case"minus-thick":return i.a.createElement(Kt,null);case"monitor":case"display":return i.a.createElement(Wt,null);case"monitoring":return i.a.createElement(zt,null);case"north-arrow":return i.a.createElement(Yt,null);case"opacity":return i.a.createElement(Vt,null);case"plus":return i.a.createElement(Ht,null);case"plus-thick":return i.a.createElement(qt,null);case"pushpin":return i.a.createElement(Xt,null);case"restore":return i.a.createElement(Zt,null);case"rotate-left":return i.a.createElement(Jt,null);case"rotate-right":return i.a.createElement(Qt,null);case"search":return i.a.createElement($t,null);case"shapefile":return i.a.createElement(te,null);case"share":return i.a.createElement(ee,null);case"tilt-less":return i.a.createElement(re,null);case"tilt-more":return i.a.createElement(ne,null);case"times":case"close":return i.a.createElement(ie,null);case"triangle-down":return i.a.createElement(oe,null);case"upload":return i.a.createElement(ae,null);default:return i.a.createElement("g",null,i.a.createElement("rect",{x:"4.844",y:"4.844",fill:"none",stroke:"#FF3333",strokeMiterlimit:"10",width:"22.313",height:"22.313"}),i.a.createElement("line",{fill:"none",stroke:"#FF3333",strokeMiterlimit:"10",x1:"27.156",y1:"4.844",x2:"4.844",y2:"27.156"}),i.a.createElement("line",{fill:"none",stroke:"#FF3333",strokeMiterlimit:"10",x1:"4.844",y1:"4.844",x2:"27.156",y2:"27.156"}))}}(t.icon))},ue=function(t){rt(n,t);var e=lt(n);function n(){return J(this,n),e.apply(this,arguments)}return $(n,[{key:"render",value:function(){var t=[i.a.createElement("span",{className:"ptr-icon-inline-wrap",key:"double-angle"},i.a.createElement(se,{icon:"plus",height:"32",width:"32",className:"ptr-inline-icon"}))],e=[i.a.createElement("span",{className:"ptr-icon-inline-wrap",key:"double-angle"},i.a.createElement(se,{icon:"angle-double-right",height:"16",width:"16",className:"ptr-inline-icon"}))],n=this.props.option&&this.props.option.className,r={label:this.props.option&&this.props.option.label||"Add item",className:"".concat(n," ptr-option-add"),value:this.props.option&&this.props.option.value||"itemAdd"};return i.a.createElement(dt,{unfocusable:this.props.unfocusable,option:r,endItems:e,startItems:t,onOptionLabelClick:this.props.onOptionLabelClick})}}]),n}(i.a.PureComponent);ue.propTypes={option:a.a.object,onOptionLabelClick:a.a.func};var le=function(t){rt(n,t);var e=lt(n);function n(){return J(this,n),e.apply(this,arguments)}return $(n,[{key:"render",value:function(){return i.a.createElement("div",{className:u()("ptr-menu",this.props.className,{open:this.props.open,bottom:this.props.bottom,top:this.props.top,left:this.props.left,right:this.props.right}),style:{height:this.props.open?2*i.a.Children.toArray(this.props.children).filter((function(t){return i.a.isValidElement(t)})).length+"rem":0},onClick:function(t){t.preventDefault()}},this.props.children)}}]),n}(i.a.PureComponent),ce=function(t){rt(n,t);var e=lt(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).node=i.a.createRef(),r.state={focused:!1,menuOpen:!1,held:!1},r.onBlur=r.onBlur.bind(st(r)),r.onClick=r.onClick.bind(st(r)),r.onKeyPress=r.onKeyPress.bind(st(r)),r.onMouseOut=r.onMouseOut.bind(st(r)),r.onMouseDown=r.onMouseDown.bind(st(r)),r.onTouchStart=r.onTouchStart.bind(st(r)),r.onTouchEnd=r.onTouchEnd.bind(st(r)),r}return $(n,[{key:"componentDidMount",value:function(){this.props.onHold&&this.addTouchListeners()}},{key:"componentWillUnmount",value:function(){this.props.onHold&&this.removeTouchListeners()}},{key:"componentDidUpdate",value:function(t,e,n){!t.onHold&&this.props.onHold?this.addTouchListeners():t.onHold&&!this.props.onHold&&this.removeTouchListeners(),this.props.disabled&&this.state.held&&this.clearHoldTimeout()}},{key:"addTouchListeners",value:function(){this.node.current.addEventListener("touchstart",this.onTouchStart),this.node.current.addEventListener("touchend",this.onTouchEnd)}},{key:"removeTouchListeners",value:function(){this.node.current.removeEventListener("touchstart",this.onTouchStart),this.node.current.removeEventListener("touchend",this.onTouchEnd)}},{key:"onTouchStart",value:function(t){t.stopPropagation(),t.preventDefault(),this.onMouseDown(t)}},{key:"onTouchEnd",value:function(t){t.stopPropagation(),t.preventDefault(),this.onMouseOut(t)}},{key:"onMouseDown",value:function(){this.props.onHold&&!this.props.disabled&&(this.clearHoldTimeout(),this.holdTimeout=setTimeout(this.holdStart.bind(this),this.props.holdStart))}},{key:"onMouseOut",value:function(){this.props.onHold&&(this.clearHoldTimeout(),this.state.held&&this.setState({held:!1}))}},{key:"clearHoldTimeout",value:function(){clearTimeout(this.holdTimeout),clearInterval(this.onHoldCallInterval)}},{key:"holdStart",value:function(){this.props.onHold(),this.onHoldCallInterval=setInterval(this.props.onHold,this.props.holdStep),this.setState({held:!0})}},{key:"onClick",value:function(t){this.props.disabled||(this.props.onClick&&this.props.onClick(t),this.setState({menuOpen:!this.state.menuOpen}))}},{key:"onBlur",value:function(){this.setState({menuOpen:!1})}},{key:"onKeyPress",value:function(t){(32===t.charCode||13===t.charCode)&&this.onClick(t)}},{key:"render",value:function(){var t=this,e=null;this.props.icon&&(e=i.a.createElement(se,{icon:this.props.icon}));var n=!1,r=i.a.Children.map(this.props.children,(function(e){if(e){if("string"===typeof e)return n=!0,i.a.createElement("div",{className:"ptr-button-caption"},e);if("object"===Z(e)&&e.type===i.a.Fragment)return n=!0,i.a.createElement("div",{className:"ptr-button-content"},e);if("object"===Z(e)&&e.type===le){var r=nt(nt({},e.props),{},{open:!!t.state.menuOpen,className:u()(e.props.className,"ptr-button-menu")});return i.a.cloneElement(e,r,e.props.children)}return n=!0,e}})),o=u()("ptr-button",{circular:!!this.props.circular,disabled:this.props.disabled,ghost:!!this.props.ghost,icon:!!e&&!n,invisible:!!this.props.invisible,inverted:!!this.props.inverted,large:!!this.props.large,primary:!!this.props.primary,secondary:!!this.props.secondary,side:!!this.props.side,"side-left":"left"===this.props.side,"side-right":"right"===this.props.side,"side-top":"top"===this.props.side,"side-bottom":"bottom"===this.props.side,small:this.props.small},this.props.className);return i.a.createElement("div",{className:o,id:this.props.id,onBlur:this.onBlur,onClick:this.onClick,onKeyPress:this.onKeyPress,tabIndex:this.props.disabled||this.props.unfocusable?"-1":"0",title:this.props.title,ref:this.node,onMouseLeave:this.onMouseOut,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseOut},e,r)}}]),n}(i.a.PureComponent);ce.propTypes={circular:a.a.bool,className:a.a.string,disabled:a.a.bool,ghost:a.a.bool,icon:a.a.string,inverted:a.a.bool,invisible:a.a.bool,large:a.a.bool,onClick:a.a.func.isRequired,onHold:a.a.func,primary:a.a.bool,secondary:a.a.bool,side:a.a.string,small:a.a.bool,title:a.a.string,unfocusable:a.a.bool},ce.defaultProps={disabled:!1,holdStart:300,holdStep:50};var he=function(t){var e=t.vertical,n=t.className,r=t.children;return i.a.createElement("div",{className:u()("ptr-button-group",n,{vertical:e})},r)},fe=function(t){rt(n,t);var e=lt(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).state={focused:!1},r.onBlur=r.onBlur.bind(st(r)),r.onClick=r.onClick.bind(st(r)),r.onKeyPress=r.onKeyPress.bind(st(r)),r}return $(n,[{key:"onClick",value:function(t,e){this.props.disabled||this.props.onClick&&this.props.onClick(t,e)}},{key:"onBlur",value:function(){}},{key:"onKeyPress",value:function(t){(32===t.charCode||13===t.charCode)&&this.onClick(t)}},{key:"render",value:function(){var t=this,e=this.props,n=(e.onClick,at(e,["onClick"])),r=i.a.Children.map(this.props.children,(function(e){var r=e.props,o=r.active,a=r.value,s=at(r,["active","value"]);return s=nt(nt(nt({},n),s),{},{active:o,onClick:t.onClick.bind(t,a)}),i.a.cloneElement(e,s,e.props.children)})),o=u()("ptr-button-switch",{disabled:this.props.disabled,ghost:!!this.props.ghost,invisible:!!this.props.invisible,inverted:!!this.props.inverted,large:!!this.props.large,small:this.props.small},this.props.className);return i.a.createElement(he,{className:o,onBlur:this.onBlur,onClick:this.onClick,onKeyPress:this.onKeyPress,tabIndex:this.props.disabled||this.props.unfocusable?"-1":"0",title:this.props.title},r)}}]),n}(i.a.PureComponent);fe.propTypes={disabled:a.a.bool,ghost:a.a.bool,inverted:a.a.bool,invisible:a.a.bool,large:a.a.bool,onClick:a.a.func.isRequired,small:a.a.bool,title:a.a.string,unfocusable:a.a.bool},fe.defaultProps={disabled:!1};var pe=function(t){rt(n,t);var e=lt(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).state={height:36},r.ref=r.ref.bind(st(r)),r.onFocus=r.onFocus.bind(st(r)),r.onBlur=r.onBlur.bind(st(r)),r.onChange=r.onChange.bind(st(r)),r}return $(n,[{key:"ref",value:function(t){this.el=t}},{key:"componentDidMount",value:function(){this.resize()}},{key:"componentWillReceiveProps",value:function(t){}},{key:"componentDidUpdate",value:function(){this.resize()}},{key:"resize",value:function(){this.el&&"undefined"!=typeof this.el.scrollHeight&&(Math.abs(this.el.scrollHeight-this.state.height)>2&&this.el.scrollHeight>36&&this.setState({height:this.el.scrollHeight}))}},{key:"onFocus",value:function(){this.setState({focused:!0}),console.log("#####",this.props.onFocus),this.props.onFocus&&this.props.onFocus()}},{key:"onBlur",value:function(){this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur()}},{key:"onChange",value:function(t){this.props.hasOwnProperty("value")&&this.props.onChange?(console.log("#######",t.target.value),this.props.onChange(t.target.value)):this.setState({value:t.target.value})}},{key:"render",value:function(){var t=u()("ptr-editable-text",{disabled:this.props.disabled,empty:!(this.props.value||this.state&&this.state.value),large:this.props.large,editing:this.props.editing,required:this.props.required,inverted:this.props.inverted,invisible:this.props.invisible}),e=this.props.value||this.state&&this.state.value||"",n={height:e.length?this.state.height:36};if(this.props.disabled)return i.a.createElement("div",{className:t},this.props.value||this.state&&this.state.value||"");var r=this.renderMessage();return i.a.createElement("div",null,i.a.createElement("textarea",{tabIndex:this.props.unfocusable?-1:0,className:t,style:n,ref:this.ref,value:e,placeholder:this.props.placeholder,onFocus:this.onFocus,onBlur:this.onBlur,spellCheck:this.state.focused,onChange:this.onChange}),r)}},{key:"renderMessage",value:function(){return this.props.required&&!(this.props.value||this.state&&this.state.value)?i.a.createElement("div",{className:"ptr-editable-text-message"},"Required field"):null}}]),n}(i.a.PureComponent);pe.propTypes={disabled:a.a.bool,required:a.a.bool,unfocusable:a.a.bool};var de=function(t){rt(n,t);var e=lt(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).state={opacity:0},r}return $(n,[{key:"componentDidMount",value:function(){var t=this;setTimeout((function(){t.setState({opacity:1})}),1)}},{key:"render",value:function(){var t=this,e=u()("ptr-fade-in-container",{vertical:this.props.vertical});return i.a.createElement("div",{className:e},i.a.Children.map(this.props.children,(function(e,n){if(e){var r=nt(nt({},e.props.style?e.props.style:{}),{},{transition:"opacity ".concat(t.props.duration,"ms ease-in-out ").concat(n*t.props.delay,"ms"),opacity:t.state.opacity});return i.a.cloneElement(e,{style:r})}return null})))}}]),n}(i.a.PureComponent);de.propTypes={delay:a.a.number,duration:a.a.number,vertical:a.a.bool},de.defaultProps={duration:1e3,delay:100};var ge=function(t){rt(n,t);var e=lt(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).state={value:r.props.value},r.onBlur=r.onBlur.bind(st(r)),r.onChange=r.onChange.bind(st(r)),r.onChangeMultiline=r.onChangeMultiline.bind(st(r)),r.onFocus=r.onFocus.bind(st(r)),r}return $(n,[{key:"componentWillReceiveProps",value:function(t){this.setState({value:t.value})}},{key:"onChange",value:function(t){this.props.hasOwnProperty("value")&&this.props.onChange?this.props.onChange(t.target.value):this.setState({value:t.target.value})}},{key:"onChangeMultiline",value:function(t){this.props.hasOwnProperty("value")&&this.props.onChange?(""===t&&(t=null),this.props.onChange(t)):this.setState({value:t})}},{key:"onBlur",value:function(){this.setState({focus:!1})}},{key:"onFocus",value:function(){this.setState({focus:!0})}},{key:"render",value:function(){var t=u()("ptr-input-text",{empty:!this.state.value,focus:this.state.focus,input:!this.props.multiline,inverted:!!this.props.inverted,multiline:this.props.multiline,disabled:this.props.disabled});return i.a.createElement("div",{className:t},this.props.multiline?this.renderMultiline():this.renderInput(),this.props.children)}},{key:"renderInput",value:function(){var t="text";return this.props.password?t="password":this.props.email?t="email":this.props.date?t="date":this.props.number&&(t="number"),i.a.createElement("input",{type:t,disabled:this.props.disabled,tabIndex:this.props.unfocusable?-1:0,placeholder:this.state.focus?null:this.props.placeholder,value:this.state.value||"",name:this.props.name,onChange:this.onChange,autoFocus:this.state.focus,onBlur:this.onBlur,onFocus:this.onFocus})}},{key:"renderMultiline",value:function(){return i.a.createElement(pe,{invisible:!0,disabled:this.props.disabled,unfocusable:this.props.unfocusable,value:this.state.value||"",name:this.props.name,onChange:this.onChangeMultiline,onFocus:this.onFocus,onBlur:this.onBlur})}}]),n}(i.a.PureComponent);ge.propTypes={disabled:a.a.bool,focus:a.a.bool,inverted:a.a.bool,name:a.a.string,onChange:a.a.func,placeholder:a.a.string,unfocusable:a.a.bool,value:a.a.string};var me={requiredFieldLabel:"Povinn\xe9"},ye={requiredFieldLabel:"Required"};l.a.addI18nResources("Atoms#InputWrapper",{cz:me,en:ye});var ve=function(t){rt(n,t);var e=lt(n);function n(){return J(this,n),e.apply(this,arguments)}return $(n,[{key:"render",value:function(){var t=this.props.t,e=u()("ptr-input-wrapper",this.props.className,{disabled:this.props.disabled}),n=this.props.info?i.a.createElement("div",{className:"ptr-input-wrapper-info"},this.props.info):null,r=i.a.Children.map(this.props.children,(function(t){return"object"===Z(t)&&t.type===Ee?(n=t,null):t})),o=this.props.required?i.a.createElement("div",{className:"ptr-input-wrapper-required"},t("requiredFieldLabel")):null;return this.props.divInsteadOfLabel?i.a.createElement("div",{className:e},i.a.createElement("div",null,o,this.props.label?i.a.createElement("span",{className:"ptr-input-label"},this.props.label):null,r),n):i.a.createElement("div",{className:e},i.a.createElement("label",null,o,i.a.createElement("span",{className:"ptr-input-label"},this.props.label),r),n)}}]),n}(i.a.PureComponent);ve.propTypes={divInsteadOfLabel:a.a.bool,disabled:a.a.bool,label:a.a.string,required:a.a.bool};Object(l.b)(["Atoms#InputWrapper"])(ve);var Ee=function(t){return i.a.createElement("div",{className:"ptr-input-wrapper-info"},t.children)},_e=function(t){rt(n,t);var e=lt(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).getLabel=r.getLabel.bind(st(r)),r.onChange=r.onChange.bind(st(r)),r.onCreate=r.onCreate.bind(st(r)),r}return $(n,[{key:"getFormattedOptions",value:function(){var t=this;return this.props.options.map((function(e){var n=e,r=e;return t.props.optionValue&&(r=g()(e,t.props.optionValue)),t.props.optionLabel&&(n=g()(e,t.props.optionLabel)),{value:r,label:n,isDisabled:e.isDisabled}}))}},{key:"onChange",value:function(t){var e=this;if(w()(t))if(M()(t))this.props.onChange(null);else if(this.props.optionValue){var n=[];C()(t,(function(t){var r=E()(e.props.options,(function(n){return(t&&t.value)===g()(n,e.props.optionValue)}));r&&n.push(r)})),this.props.onChange(n)}else{var r=t.map((function(t){return t.value}));this.props.onChange(r)}else if(this.props.optionValue){var i=E()(this.props.options,(function(n){return g()(n,e.props.optionValue)===(t&&t.value)}));i?this.props.onChange(i):this.props.onChange(null)}else this.props.onChange(t?t.value:null)}},{key:"onCreate",value:function(t){var e=X.uuid();if(this.props.optionValue&&this.props.optionLabel){var n={};T()(n,this.props.optionValue,e),T()(n,this.props.optionLabel,t),this.props.onCreate(n)}else this.props.onCreate(t)}},{key:"render",value:function(){var t=nt({},this.props);t.options?t.options=this.getFormattedOptions():t.options=[],t.value&&"string"===typeof t.value?t.value=E()(t.options,{value:t.value}):t.value&&t.optionValue&&!w()(t.value)?t.value=E()(t.options,{value:g()(t.value,t.optionValue)}):w()(t.value)&&(t.value=b()(t.options,(function(e){return!!E()(t.value,(function(n){return"string"===typeof n?n===e.value:g()(n,t.optionValue)===e.value}))})));var e=u()("ptr-select-container ".concat(this.props.className?this.props.className:""),{"value-is-title":!!this.props.valueIsTitle,disabled:this.props.disabled,clearable:this.props.clearable,multi:this.props.multi});switch(this.props.type){case"creatable":return this.renderCreatable(t,e);default:return this.renderBase(t,e)}}},{key:"renderBase",value:function(t,e){return i.a.createElement(R.a,{className:e,classNamePrefix:"ptr-select",clearable:this.props.clearable,components:t.components,formatOptionLabel:this.getLabel,hideSelectedOptions:t.hideSelectedOptions,isClearable:this.props.clearable,isDisabled:this.props.disabled,isOptionDisabled:function(t){return t.isDisabled},isMulti:this.props.multi,onChange:this.onChange,options:t.options,tabIndex:t.unfocusable?-1:0,value:t.value,title:t.value,placeholder:t.placeholder,styles:{menuPortal:function(t){t.zIndex;return nt(nt({},at(t,["zIndex"])),{},{zIndex:9999})}},menuPortalTarget:document.getElementById(this.props.menuPortalTarget||"ptr-app")})}},{key:"renderCreatable",value:function(t,e){return i.a.createElement(P.a,{className:e,classNamePrefix:"ptr-select",components:t.components,formatOptionLabel:this.getLabel,hideSelectedOptions:t.hideSelectedOptions,isClearable:this.props.clearable,isDisabled:this.props.disabled,isOptionDisabled:function(t){return t.isDisabled},isMulti:this.props.multi,onChange:this.onChange,onCreateOption:this.onCreate,options:t.options,tabIndex:t.unfocusable?-1:0,value:t.value,title:t.value,styles:{menuPortal:function(t){t.zIndex;return nt(nt({},at(t,["zIndex"])),{},{zIndex:9999})}},menuPortalTarget:document.getElementById(this.props.menuPortalTarget||"ptr-app")})}},{key:"getLabel",value:function(t){var e=this;if(this.props.formatOptionLabel){if(this.props.optionValue){var n=E()(this.props.options,(function(n){return g()(n,e.props.optionValue)===t.value}));if(n)return this.props.formatOptionLabel(n);throw new Error("Select#Selected option was not found in original options.")}return this.props.formatOptionLabel(t.label)}var r=null,o=t.label;return this.props.withKeyPrefix&&(r=i.a.createElement(pt,{value:t.value})),i.a.createElement("div",{className:"label",key:"label"},r,o)}}]),n}(i.a.PureComponent);_e.propTypes={className:a.a.string,clearable:a.a.bool,components:a.a.object,disabled:a.a.bool,formatOptionLabel:a.a.func,multi:a.a.bool,onChange:a.a.func,options:a.a.array,optionLabel:a.a.string,optionValue:a.a.string,type:a.a.string,unfocusable:a.a.bool,value:a.a.oneOfType([a.a.object,a.a.string]),placeholder:a.a.string,valueIsTitle:a.a.bool,withKeyPrefix:a.a.bool,onCreate:a.a.func,menuPortalTarget:a.a.string};var be=function(t){rt(n,t);var e=lt(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).onChange=r.onChange.bind(st(r)),r.onOptionLabelClick=r.onOptionLabelClick.bind(st(r)),r}return $(n,[{key:"getFormattedOptions",value:function(t){var e=this;return w()(t)||(t=[t]),t.map((function(t){return t?{value:e.getOptionValue(t),label:e.getOptionLabel(t)}:[]}))}},{key:"getSelectedOptions",value:function(){var t=this,e=this.props.selectedValues;return e&&this.props.options?(w()(e)||(e=[e]),this.props.optionValue?b()(this.props.options,(function(n){var r=t.getOptionValue(n);return!!E()(e,(function(e){return r===t.getOptionValue(e)}))})):e):[]}},{key:"getOptionValue",value:function(t){return this.props.optionValue&&y()(t)?g()(t,this.props.optionValue):t}},{key:"getOptionLabel",value:function(t){return this.props.optionLabel?g()(t,this.props.optionLabel):t}},{key:"onChange",value:function(t){var e=this.getSelectedOptions();this.props.onChange([].concat(ct(e),[t]))}},{key:"onOptionLabelClick",value:function(t,e){var n=this;if(this.props.onOptionLabelClick){e.stopPropagation(),e.preventDefault();var r=E()(this.props.options,(function(e){return n.getOptionValue(e)===t.value}));this.props.onOptionLabelClick(r)}}},{key:"onRemoveOptionClick",value:function(t,e){var n=this;e.stopPropagation(),e.preventDefault();var r=this.getSelectedOptions(),i=b()(r,(function(e){return n.getOptionValue(e)!==t.value}));this.props.onChange(i)}},{key:"blockEvent",value:function(t){t.stopPropagation()}},{key:"getRemoveIcon",value:function(t){return i.a.createElement("span",{className:" ptr-icon-inline-wrap",key:"remove",onMouseDown:this.blockEvent,onClick:this.onRemoveOptionClick.bind(this,t),onTouchEnd:this.onRemoveOptionClick.bind(this,t)},i.a.createElement(se,{icon:"times",height:"16",width:"16",className:"ptr-inline-icon hover"}))}},{key:"getSelectedItem",value:function(t,e){t.findIndex((function(t){return t===e.value})),t.length;var n=[];this.props.disabled||n.push(this.getRemoveIcon(e));var r=[i.a.createElement("span",{className:"ptr-icon-inline-wrap",key:"double-angle"},i.a.createElement(se,{icon:"angle-double-right",height:"16",width:"16",className:"ptr-inline-icon"}))];return i.a.createElement(dt,{key:e.value,option:e,onOptionLabelClick:this.onOptionLabelClick,unfocusable:this.props.unfocusable,withKeyPrefix:this.props.withKeyPrefix,endItems:r,startItems:n})}},{key:"getSelectedItems",value:function(t,e){return e&&e.length>0?e.reduce((function(e,n){var r=t.find((function(t){return t.value===n.value}));return r?[].concat(ct(e),[r]):e}),[]).map(this.getSelectedItem.bind(this,e)):null}},{key:"getRestOptions",value:function(t,e){var n=this;return p()(t,(function(t){var r=n.getOptionValue(t);return h()(e.map((function(t){return n.getOptionValue(t)})),r)}))}},{key:"render",value:function(){var t=this.props.options?this.props.options:[],e=[];this.props.selectedValues&&(e=w()(this.props.selectedValues)?this.props.selectedValues:[this.props.selectedValues]);var n=this.getFormattedOptions(t),r=this.getFormattedOptions(e),o=this.getSelectedItems(n,r),a=this.getRestOptions(t,e),s=null;return this.props.singleValue&&1===e.length||(s=this.renderSelect(a)),i.a.createElement("div",null,o?i.a.createElement("div",{className:"items"},o):null,s)}},{key:"renderSelect",value:function(t){return this.props.creatable?i.a.createElement(_e,{type:"creatable",disabled:this.props.disabled,onChange:this.onChange,onCreate:this.props.onAdd,options:t,optionLabel:this.props.optionLabel,optionValue:this.props.optionValue,unfocusable:this.props.unfocusable,value:null,withKeyPrefix:this.props.withKeyPrefix}):i.a.createElement(_e,{disabled:this.props.disabled,onChange:this.onChange,options:t,optionLabel:this.props.optionLabel,optionValue:this.props.optionValue,unfocusable:this.props.unfocusable,value:null,withKeyPrefix:this.props.withKeyPrefix})}}]),n}(i.a.PureComponent);be.propTypes={creatable:a.a.bool,disabled:a.a.bool,optionLabel:a.a.string,optionValue:a.a.string,onAdd:a.a.func,onChange:a.a.func,onOptionLabelClick:a.a.func,options:a.a.array,selectedValues:a.a.oneOfType([a.a.array,a.a.string]),singleValue:a.a.bool,unfocusable:a.a.bool,withKeyPrefix:a.a.bool};var Se=function(t){rt(n,t);var e=lt(n);function n(){return J(this,n),e.apply(this,arguments)}return $(n,[{key:"render",value:function(){var t=u()("loading-screen",{transparent:this.props.transparent,"fade-out":this.props.fadeOut}),e=u()("a-loader-container",{blackandwhite:this.props.blackandwhite,small:this.props.small}),n=null;return this.props.background&&(n={background:this.props.background}),i.a.createElement("div",{className:t,style:n},i.a.createElement("div",{className:"loading-screen-content-wrap"},i.a.createElement("div",{className:"loading-screen-content"},i.a.createElement("div",{className:e},i.a.createElement("i",{className:"i1"}),i.a.createElement("i",{className:"i2"}),i.a.createElement("i",{className:"i3"}),i.a.createElement("i",{className:"i4"}),this.props.progress?i.a.createElement("div",{className:"a-loader-progress"},this.props.progress," %"):null))))}}]),n}(i.a.PureComponent);Se.propTypes={background:a.a.string,fadeOut:a.a.bool,progress:a.a.number,transparent:a.a.bool,blackandwhite:a.a.bool,small:a.a.bool};var we=i.a.createContext(null),xe=function(t){rt(n,t);var e=lt(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).onBlur=r.onBlur.bind(st(r)),r.onClick=r.onClick.bind(st(r)),r.onKeyPress=r.onKeyPress.bind(st(r)),r}return $(n,[{key:"onClick",value:function(t){this.props.disabled||this.context.onSelect&&this.context.onSelect(this.props.itemKey)}},{key:"onBlur",value:function(){}},{key:"onKeyPress",value:function(t){(32===t.charCode||13===t.charCode)&&this.onClick(t)}},{key:"render",value:function(){var t=u()("ptr-panther-select-item",{selected:!!this.props.selected,disabled:this.props.disabled},this.props.className);return i.a.createElement("div",{className:t,style:this.props.style,onMouseDown:this.onClick},this.props.children)}}]),n}(i.a.PureComponent);xe.propTypes={disabled:a.a.bool,selected:a.a.bool,onSelect:a.a.func},xe.defaultProps={disabled:!1},xe.contextType=we;var Te=function(t){rt(n,t);var e=lt(n);function n(t){var r;return J(this,n),(r=e.call(this,t)).onBlur=r.onBlur.bind(st(r)),r.onClick=r.onClick.bind(st(r)),r.onKeyPress=r.onKeyPress.bind(st(r)),r.onSelect=r.onSelect.bind(st(r)),r}return $(n,[{key:"onClick",value:function(t){this.props.disabled||this.props.currentDisabled||this.props.onSelectClick&&this.props.onSelectClick(t)}},{key:"onBlur",value:function(t){var e=this;this.props.onBlur&&setTimeout((function(){e.props.onBlur()}),100)}},{key:"onKeyPress",value:function(t){(32===t.charCode||13===t.charCode)&&this.onClick(t)}},{key:"onSelect",value:function(t){this.props.disabled||this.props.onSelect&&this.props.onSelect(t)}},{key:"render",value:function(){var t=u()("ptr-panther-select",{open:!!this.props.open,disabled:!!this.props.disabled,currentDisabled:!!this.props.currentDisabled},this.props.className);return i.a.createElement("div",{className:t,onBlur:this.onBlur},i.a.createElement("div",{className:u()("ptr-panther-select-current",this.props.currentClasses,{disabled:!!this.props.disabled}),tabIndex:this.props.disabled||this.props.currentDisabled?"-1":"0",onClick:this.onClick,style:this.props.currentStyle},i.a.createElement("div",null,this.props.renderCurrent(this.props)),i.a.createElement("div",{className:"ptr-panther-select-current-icon"},i.a.createElement(se,{icon:"triangle-down"}))),i.a.createElement("div",{className:u()("ptr-panther-select-list",this.props.listClasses)},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(we.Provider,{value:{onSelect:this.onSelect}},this.props.children)))))}}]),n}(i.a.PureComponent);Te.propTypes={disabled:a.a.bool,currentDisabled:a.a.bool,open:a.a.bool,onBlur:a.a.func,onSelectClick:a.a.func,onSelect:a.a.func,renderCurrent:a.a.func,renderList:a.a.func,currentClasses:a.a.string,currentStyle:a.a.object,listClasses:a.a.string},Te.defaultProps={disabled:!1,currentDisabled:!1,currentStyle:null}},function(t,e,n){(function(t){!function(e){"use strict";function n(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function r(t,e){Object.defineProperty(this,"kind",{value:t,enumerable:!0}),e&&e.length&&Object.defineProperty(this,"path",{value:e,enumerable:!0})}function i(t,e,n){i.super_.call(this,"E",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function o(t,e){o.super_.call(this,"N",t),Object.defineProperty(this,"rhs",{value:e,enumerable:!0})}function a(t,e){a.super_.call(this,"D",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0})}function s(t,e,n){s.super_.call(this,"A",t),Object.defineProperty(this,"index",{value:e,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function u(t,e,n){var r=t.slice((n||e)+1||t.length);return t.length=e<0?t.length+e:e,t.push.apply(t,r),t}function l(t){var e="undefined"==typeof t?"undefined":w(t);return"object"!==e?e:t===Math?"math":null===t?"null":Array.isArray(t)?"array":"[object Date]"===Object.prototype.toString.call(t)?"date":"function"==typeof t.toString&&/^\/.*\//.test(t.toString())?"regexp":"object"}function c(t,e,n,r,h,f,p){p=p||[];var d=(h=h||[]).slice(0);if("undefined"!=typeof f){if(r){if("function"==typeof r&&r(d,f))return;if("object"===("undefined"==typeof r?"undefined":w(r))){if(r.prefilter&&r.prefilter(d,f))return;if(r.normalize){var g=r.normalize(d,f,t,e);g&&(t=g[0],e=g[1])}}}d.push(f)}"regexp"===l(t)&&"regexp"===l(e)&&(t=t.toString(),e=e.toString());var m="undefined"==typeof t?"undefined":w(t),y="undefined"==typeof e?"undefined":w(e),v="undefined"!==m||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(f),E="undefined"!==y||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(f);if(!v&&E)n(new o(d,e));else if(!E&&v)n(new a(d,t));else if(l(t)!==l(e))n(new i(d,t,e));else if("date"===l(t)&&t-e!==0)n(new i(d,t,e));else if("object"===m&&null!==t&&null!==e)if(p.filter((function(e){return e.lhs===t})).length)t!==e&&n(new i(d,t,e));else{if(p.push({lhs:t,rhs:e}),Array.isArray(t)){var _;for(t.length,_=0;_<t.length;_++)_>=e.length?n(new s(d,_,new a(void 0,t[_]))):c(t[_],e[_],n,r,d,_,p);for(;_<e.length;)n(new s(d,_,new o(void 0,e[_++])))}else{var b=Object.keys(t),S=Object.keys(e);b.forEach((function(i,o){var a=S.indexOf(i);a>=0?(c(t[i],e[i],n,r,d,i,p),S=u(S,a)):c(t[i],void 0,n,r,d,i,p)})),S.forEach((function(t){c(void 0,e[t],n,r,d,t,p)}))}p.length=p.length-1}else t!==e&&("number"===m&&isNaN(t)&&isNaN(e)||n(new i(d,t,e)))}function h(t,e,n,r){return r=r||[],c(t,e,(function(t){t&&r.push(t)}),n),r.length?r:void 0}function f(t,e,n){if(t&&e&&n&&n.kind){for(var r=t,i=-1,o=n.path?n.path.length-1:0;++i<o;)"undefined"==typeof r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":!function t(e,n,r){if(r.path&&r.path.length){var i,o=e[n],a=r.path.length-1;for(i=0;i<a;i++)o=o[r.path[i]];switch(r.kind){case"A":t(o[r.path[i]],r.index,r.item);break;case"D":delete o[r.path[i]];break;case"E":case"N":o[r.path[i]]=r.rhs}}else switch(r.kind){case"A":t(e[n],r.index,r.item);break;case"D":e=u(e,n);break;case"E":case"N":e[n]=r.rhs}return e}(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function p(t){return"color: "+L[t].color+"; font-weight: bold"}function d(t,e,n,r){var i=h(t,e);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(t){n.log("diff")}i?i.forEach((function(t){var e=t.kind,r=function(t){var e=t.kind,n=t.path,r=t.lhs,i=t.rhs,o=t.index,a=t.item;switch(e){case"E":return[n.join("."),r,"\u2192",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+o+"]",a];default:return[]}}(t);n.log.apply(n,["%c "+L[e].text,p(e)].concat(x(r)))})):n.log("\u2014\u2014 no diff \u2014\u2014");try{n.groupEnd()}catch(t){n.log("\u2014\u2014 diff end \u2014\u2014 ")}}function g(t,e,n,r){switch("undefined"==typeof t?"undefined":w(t)){case"object":return"function"==typeof t[r]?t[r].apply(t,x(n)):t[r];case"function":return t(e);default:return t}}function m(t,e){var n=e.logger,r=e.actionTransformer,i=e.titleFormatter,o=void 0===i?function(t){var e=t.timestamp,n=t.duration;return function(t,r,i){var o=["action"];return o.push("%c"+String(t.type)),e&&o.push("%c@ "+r),n&&o.push("%c(in "+i.toFixed(2)+" ms)"),o.join(" ")}}(e):i,a=e.collapsed,s=e.colors,u=e.level,l=e.diff,c="undefined"==typeof e.titleFormatter;t.forEach((function(i,h){var f=i.started,p=i.startedTime,m=i.action,y=i.prevState,v=i.error,E=i.took,_=i.nextState,S=t[h+1];S&&(_=S.prevState,E=S.started-f);var w=r(m),x="function"==typeof a?a((function(){return _}),m,i):a,T=b(p),L=s.title?"color: "+s.title(w)+";":"",C=["color: gray; font-weight: lighter;"];C.push(L),e.timestamp&&C.push("color: gray; font-weight: lighter;"),e.duration&&C.push("color: gray; font-weight: lighter;");var A=o(w,T,E);try{x?s.title&&c?n.groupCollapsed.apply(n,["%c "+A].concat(C)):n.groupCollapsed(A):s.title&&c?n.group.apply(n,["%c "+A].concat(C)):n.group(A)}catch(t){n.log(A)}var M=g(u,w,[y],"prevState"),R=g(u,w,[w],"action"),O=g(u,w,[v,y],"error"),P=g(u,w,[_],"nextState");if(M)if(s.prevState){var I="color: "+s.prevState(y)+"; font-weight: bold";n[M]("%c prev state",I,y)}else n[M]("prev state",y);if(R)if(s.action){var N="color: "+s.action(w)+"; font-weight: bold";n[R]("%c action    ",N,w)}else n[R]("action    ",w);if(v&&O)if(s.error){var D="color: "+s.error(v,y)+"; font-weight: bold;";n[O]("%c error     ",D,v)}else n[O]("error     ",v);if(P)if(s.nextState){var k="color: "+s.nextState(_)+"; font-weight: bold";n[P]("%c next state",k,_)}else n[P]("next state",_);l&&d(y,_,n,x);try{n.groupEnd()}catch(t){n.log("\u2014\u2014 log end \u2014\u2014")}}))}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},C,t),n=e.logger,r=e.stateTransformer,i=e.errorTransformer,o=e.predicate,a=e.logErrors,s=e.diffPredicate;if("undefined"==typeof n)return function(){return function(t){return function(e){return t(e)}}};if(t.getState&&t.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(t){return function(e){return t(e)}}};var u=[];return function(t){var n=t.getState;return function(t){return function(l){if("function"==typeof o&&!o(n,l))return t(l);var c={};u.push(c),c.started=S.now(),c.startedTime=new Date,c.prevState=r(n()),c.action=l;var h=void 0;if(a)try{h=t(l)}catch(t){c.error=i(t)}else h=t(l);c.took=S.now()-c.started,c.nextState=r(n());var f=e.diff&&"function"==typeof s?s(n,l):e.diff;if(m(u,Object.assign({},e,{diff:f})),u.length=0,c.error)throw c.error;return h}}}}var v,E,_=function(t,e){return function(t,e){return new Array(e+1).join(t)}("0",e-t.toString().length)+t},b=function(t){return _(t.getHours(),2)+":"+_(t.getMinutes(),2)+":"+_(t.getSeconds(),2)+"."+_(t.getMilliseconds(),3)},S="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},T=[];v="object"===("undefined"==typeof t?"undefined":w(t))&&t?t:"undefined"!=typeof window?window:{},(E=v.DeepDiff)&&T.push((function(){"undefined"!=typeof E&&v.DeepDiff===h&&(v.DeepDiff=E,E=void 0)})),n(i,r),n(o,r),n(a,r),n(s,r),Object.defineProperties(h,{diff:{value:h,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:function(t,e,n){t&&e&&c(t,e,(function(r){n&&!n(t,e,r)||f(t,e,r)}))},enumerable:!0},applyChange:{value:f,enumerable:!0},revertChange:{value:function(t,e,n){if(t&&e&&n&&n.kind){var r,i,o=t;for(i=n.path.length-1,r=0;r<i;r++)"undefined"==typeof o[n.path[r]]&&(o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":!function t(e,n,r){if(r.path&&r.path.length){var i,o=e[n],a=r.path.length-1;for(i=0;i<a;i++)o=o[r.path[i]];switch(r.kind){case"A":t(o[r.path[i]],r.index,r.item);break;case"D":case"E":o[r.path[i]]=r.lhs;break;case"N":delete o[r.path[i]]}}else switch(r.kind){case"A":t(e[n],r.index,r.item);break;case"D":case"E":e[n]=r.lhs;break;case"N":e=u(e,n)}return e}(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof E},enumerable:!0},noConflict:{value:function(){return T&&(T.forEach((function(t){t()})),T=null),h},enumerable:!0}});var L={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},C={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(t){return t},actionTransformer:function(t){return t},errorTransformer:function(t){return t},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dispatch,n=t.getState;return"function"==typeof e||"function"==typeof n?y()({dispatch:e,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=C,e.createLogger=y,e.logger=A,e.default=A,Object.defineProperty(e,"__esModule",{value:!0})}(e)}).call(this,n(49))},function(t,e,n){"use strict";t.exports=n(395)},function(t,e){t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(82)(n(61),"Map");t.exports=r},function(t,e,n){var r=n(72),i=n(22);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(415),i=n(422),o=n(424),a=n(425),s=n(426);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(427),i=n(39);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!==e&&n!==n:r(e,n,o,a,t,s))}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var r=n(186),i=n(255),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){(function(t){var r=n(246),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=s}).call(this,n(56)(t))},function(t,e,n){var r=n(9),i=n(102),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(451)();t.exports=r},function(t,e,n){var r=n(146),i=n(192),o=n(194),a=n(147),s=n(467),u=n(184);t.exports=function(t,e,n){var l=-1,c=i,h=t.length,f=!0,p=[],d=p;if(n)f=!1,c=o;else if(h>=200){var g=e?null:s(t);if(g)return u(g);f=!1,c=a,d=new r}else d=e?[]:p;t:for(;++l<h;){var m=t[l],y=e?e(m):m;if(m=n||0!==m?m:0,f&&y===y){for(var v=d.length;v--;)if(d[v]===y)continue t;e&&d.push(y),p.push(m)}else c(d,y,n)||(d!==p&&d.push(y),p.push(m))}return p}},function(t,e,n){var r=n(193);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e,n){var r=n(269),i=n(465),o=n(466);t.exports=function(t,e,n){return e===e?o(t,e,n):r(t,i,n)}},function(t,e){t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){var r=n(152),i=n(120),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(254),i=n(275),o=n(126);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(258)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(252);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(285);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e,n){var r=n(290),i=n(528),o=n(529),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){var r=n(567),i=n(70),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){(function(t){var r=n(67),i=n(568),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(this,n(56)(t))},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(569),i=n(299),o=n(570),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e,n){var r=n(303),i=n(575)(r);t.exports=i},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e,n){var r=n(86)(n(67),"Map");t.exports=r},function(t,e,n){var r=n(592),i=n(599),o=n(601),a=n(602),s=n(603);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(25),i=n(213),o=n(626),a=n(629);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,n){var r=n(25),i=n(129),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},function(t,e){t.exports=function(t){return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMenuPlacement=b,e.MenuPortal=e.menuPortalCSS=e.LoadingMessage=e.NoOptionsMessage=e.loadingMessageCSS=e.noOptionsMessageCSS=e.MenuList=e.menuListCSS=e.default=e.MenuPlacer=e.menuCSS=void 0;var r,i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),o=n(13),a=n(57),s=(r=n(1))&&r.__esModule?r:{default:r},u=n(216);function l(t){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){_(t,e,n[e])}))}return t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}function g(t,e){return!e||"object"!==l(e)&&"function"!==typeof e?E(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,i=t.placement,o=t.shouldScroll,a=t.isFixedPosition,s=t.theme.spacing,l=(0,u.getScrollParent)(n),c={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return c;var h=l.getBoundingClientRect().height,f=n.getBoundingClientRect(),p=f.bottom,d=f.height,g=f.top,m=n.offsetParent.getBoundingClientRect().top,y=window.innerHeight,v=(0,u.getScrollTop)(l),E=parseInt(getComputedStyle(n).marginBottom,10),_=parseInt(getComputedStyle(n).marginTop,10),b=m-_,S=y-g,w=b+v,x=h-v-g,T=p-y+v+E,L=v+g-_;switch(i){case"auto":case"bottom":if(S>=d)return{placement:"bottom",maxHeight:e};if(x>=d&&!a)return o&&(0,u.animatedScrollTo)(l,T,160),{placement:"bottom",maxHeight:e};if(!a&&x>=r||a&&S>=r)return o&&(0,u.animatedScrollTo)(l,T,160),{placement:"bottom",maxHeight:a?S-E:x-E};if("auto"===i||a){var C=e,A=a?b:w;return A>=r&&(C=Math.min(A-E-s.controlHeight,e)),{placement:"top",maxHeight:C}}if("bottom"===i)return(0,u.scrollTo)(l,T),{placement:"bottom",maxHeight:e};break;case"top":if(b>=d)return{placement:"top",maxHeight:e};if(w>=d&&!a)return o&&(0,u.animatedScrollTo)(l,L,160),{placement:"top",maxHeight:e};if(!a&&w>=r||a&&b>=r){var M=e;return(!a&&w>=r||a&&b>=r)&&(M=a?b-_:w-_),o&&(0,u.animatedScrollTo)(l,L,160),{placement:"top",maxHeight:M}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}var S=function(t){return"auto"===t?"bottom":t};e.menuCSS=function(t){var e,n=t.placement,r=t.theme,i=r.borderRadius,o=r.spacing,a=r.colors;return _(e={label:"menu"},function(t){return t?{bottom:"top",top:"bottom"}[t]:"bottom"}(n),"100%"),_(e,"backgroundColor",a.neutral0),_(e,"borderRadius",i),_(e,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),_(e,"marginBottom",o.menuGutter),_(e,"marginTop",o.menuGutter),_(e,"position","absolute"),_(e,"width","100%"),_(e,"zIndex",1),e};var w=function(t){function e(){var t,n;f(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _(E(E(n=g(this,(t=m(e)).call.apply(t,[this].concat(i))))),"state",{maxHeight:n.props.maxMenuHeight,placement:null}),_(E(E(n)),"getPlacement",(function(t){var e=n.props,r=e.minMenuHeight,i=e.maxMenuHeight,o=e.menuPlacement,a=e.menuPosition,s=e.menuShouldScrollIntoView,u=e.theme,l=n.context.getPortalPlacement;if(t){var c="fixed"===a,h=b({maxHeight:i,menuEl:t,minHeight:r,placement:o,shouldScroll:s&&!c,isFixedPosition:c,theme:u});l&&l(h),n.setState(h)}})),_(E(E(n)),"getUpdatedProps",(function(){var t=n.props.menuPlacement,e=n.state.placement||S(t);return h({},n.props,{placement:e,maxHeight:n.state.maxHeight})})),n}return y(e,t),d(e,[{key:"render",value:function(){return(0,this.props.children)({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),e}(i.Component);e.MenuPlacer=w,_(w,"contextTypes",{getPortalPlacement:s.default.func});var x=function(t){var e=t.children,n=t.className,r=t.cx,a=t.getStyles,s=t.innerRef,u=t.innerProps,l=r((0,o.css)(a("menu",t)),{menu:!0},n);return i.default.createElement("div",c({className:l},u,{ref:s}),e)};e.default=x;e.menuListCSS=function(t){var e=t.maxHeight,n=t.theme.spacing.baseUnit;return{maxHeight:e,overflowY:"auto",paddingBottom:n,paddingTop:n,position:"relative",WebkitOverflowScrolling:"touch"}};e.MenuList=function(t){var e=t.children,n=t.className,r=t.cx,a=t.getStyles,s=t.isMulti,u=t.innerRef;return i.default.createElement("div",{className:r((0,o.css)(a("menuList",t)),{"menu-list":!0,"menu-list--is-multi":s},n),ref:u},e)};var T=function(t){var e=t.theme,n=e.spacing.baseUnit;return{color:e.colors.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px"),textAlign:"center"}},L=T;e.noOptionsMessageCSS=L;var C=T;e.loadingMessageCSS=C;var A=function(t){var e=t.children,n=t.className,r=t.cx,a=t.getStyles,s=t.innerProps;return i.default.createElement("div",c({className:r((0,o.css)(a("noOptionsMessage",t)),{"menu-notice":!0,"menu-notice--no-options":!0},n)},s),e)};e.NoOptionsMessage=A,A.defaultProps={children:"No options"};var M=function(t){var e=t.children,n=t.className,r=t.cx,a=t.getStyles,s=t.innerProps;return i.default.createElement("div",c({className:r((0,o.css)(a("loadingMessage",t)),{"menu-notice":!0,"menu-notice--loading":!0},n)},s),e)};e.LoadingMessage=M,M.defaultProps={children:"Loading..."};e.menuPortalCSS=function(t){var e=t.rect,n=t.offset,r=t.position;return{left:e.left,position:r,top:n,width:e.width,zIndex:1}};var R=function(t){function e(){var t,n;f(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _(E(E(n=g(this,(t=m(e)).call.apply(t,[this].concat(i))))),"state",{placement:null}),_(E(E(n)),"getPortalPlacement",(function(t){var e=t.placement;e!==S(n.props.menuPlacement)&&n.setState({placement:e})})),n}return y(e,t),d(e,[{key:"getChildContext",value:function(){return{getPortalPlacement:this.getPortalPlacement}}},{key:"render",value:function(){var t=this.props,e=t.appendTo,n=t.children,r=t.controlElement,s=t.menuPlacement,l=t.menuPosition,c=t.getStyles,h="fixed"===l;if(!e&&!h||!r)return null;var f=this.state.placement||S(s),p=(0,u.getBoundingClientObj)(r),d=h?0:window.pageYOffset,g={offset:p[f]+d,position:l,rect:p},m=i.default.createElement("div",{className:(0,o.css)(c("menuPortal",g))},n);return e?(0,a.createPortal)(m,e):m}}]),e}(i.Component);e.MenuPortal=R,_(R,"childContextTypes",{getPortalPlacement:s.default.func})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.classNames=function(t,e,n,r){var i=[e,r];if(n&&t)for(var o in n)n.hasOwnProperty(o)&&n[o]&&i.push("".concat(s(t,o)));return i.filter((function(t){return t})).map((function(t){return String(t).trim()})).join(" ")},e.handleInputChange=function(t,e,n){if(n){var r=n(t,e);if("string"===typeof r)return r}return t},e.isDocumentElement=u,e.normalizedHeight=function(t){if(u(t))return window.innerHeight;return t.clientHeight},e.getScrollTop=l,e.scrollTo=c,e.getScrollParent=function(t){var e=getComputedStyle(t),n="absolute"===e.position,r=/(auto|scroll)/,i=document.documentElement;if("fixed"===e.position)return i;for(var o=t;o=o.parentElement;)if(e=getComputedStyle(o),(!n||"static"!==e.position)&&r.test(e.overflow+e.overflowY+e.overflowX))return o;return i},e.animatedScrollTo=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a,o=l(t),s=e-o,u=10,f=0;function p(){var e=h(f+=u,o,s,n);c(t,e),f<n?(0,i.default)(p):r(t)}p()},e.scrollIntoView=function(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>n.bottom?c(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):r.top-i<n.top&&c(t,Math.max(e.offsetTop-i,0))},e.getBoundingClientObj=function(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}},e.toKey=function(t){return t.replace(/\W/g,"-")},e.isTouchCapable=function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}},e.isMobileDevice=function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(t){return!1}},e.cleanValue=e.emptyString=e.noop=void 0;var r,i=(r=n(232))&&r.__esModule?r:{default:r};function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=function(){};e.noop=a;function s(t,e){return e?"-"===e[0]?t+e:t+"__"+e:t}e.emptyString=function(){return""};function u(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function l(t){return u(t)?window.pageYOffset:t.scrollTop}function c(t,e){u(t)?window.scrollTo(0,e):t.scrollTop=e}function h(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}e.cleanValue=function(t){return Array.isArray(t)?t.filter(Boolean):"object"===o(t)&&null!==t?[t]:[]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(0),i=n(57);function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(){return a(this,e),u(this,l(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){this.props.innerRef((0,i.findDOMNode)(this))}},{key:"componentWillUnmount",value:function(){this.props.innerRef(null)}},{key:"render",value:function(){return this.props.children}}])&&s(n.prototype,r),o&&s(n,o),e}(r.Component);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LoadingIndicator=e.loadingIndicatorCSS=e.IndicatorSeparator=e.indicatorSeparatorCSS=e.ClearIndicator=e.clearIndicatorCSS=e.DropdownIndicator=e.dropdownIndicatorCSS=e.DownChevron=e.CrossIcon=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(13);function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function s(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var u=function(t){var e=t.size,n=s(t,["size"]);return i.default.createElement("svg",a({height:e,width:e,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",className:(0,o.css)({display:"inline-block",fill:"currentColor",lineHeight:1,stroke:"currentColor",strokeWidth:0})},n))},l=function(t){return i.default.createElement(u,a({size:20},t),i.default.createElement("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))};e.CrossIcon=l;var c=function(t){return i.default.createElement(u,a({size:20},t),i.default.createElement("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))};e.DownChevron=c;var h=function(t){var e=t.isFocused,n=t.theme,r=n.spacing.baseUnit,i=n.colors;return{label:"indicatorContainer",color:e?i.neutral60:i.neutral20,display:"flex",padding:2*r,transition:"color 150ms",":hover":{color:e?i.neutral80:i.neutral40}}},f=h;e.dropdownIndicatorCSS=f;e.DropdownIndicator=function(t){var e=t.children,n=t.className,r=t.cx,s=t.getStyles,u=t.innerProps;return i.default.createElement("div",a({},u,{className:r((0,o.css)(s("dropdownIndicator",t)),{indicator:!0,"dropdown-indicator":!0},n)}),e||i.default.createElement(c,null))};var p=h;e.clearIndicatorCSS=p;e.ClearIndicator=function(t){var e=t.children,n=t.className,r=t.cx,s=t.getStyles,u=t.innerProps;return i.default.createElement("div",a({},u,{className:r((0,o.css)(s("clearIndicator",t)),{indicator:!0,"clear-indicator":!0},n)}),e||i.default.createElement(l,null))};e.indicatorSeparatorCSS=function(t){var e=t.isDisabled,n=t.theme,r=n.spacing.baseUnit,i=n.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:e?i.neutral10:i.neutral20,marginBottom:2*r,marginTop:2*r,width:1}};e.IndicatorSeparator=function(t){var e=t.className,n=t.cx,r=t.getStyles,s=t.innerProps;return i.default.createElement("span",a({},s,{className:n((0,o.css)(r("indicatorSeparator",t)),{"indicator-separator":!0},e)}))};var d=!1;e.loadingIndicatorCSS=function(t){var e=t.isFocused,n=t.size,r=t.theme,i=r.colors,o=r.spacing.baseUnit;return{label:"loadingIndicator",color:e?i.neutral60:i.neutral20,display:"flex",padding:2*o,transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"}};var g=function(t){var e=t.color,n=t.delay,r=t.offset;return i.default.createElement("span",{className:(0,o.css)({animationDuration:"1s",animationDelay:"".concat(n,"ms"),animationIterationCount:"infinite",animationName:"react-select-loading-indicator",animationTimingFunction:"ease-in-out",backgroundColor:e,borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":null,height:"1em",verticalAlign:"top",width:"1em"})})},m=function(t){var e=t.className,n=t.cx,r=t.getStyles,s=t.innerProps,u=t.isFocused,l=t.isRtl,c=t.theme.colors,h=u?c.neutral80:c.neutral20;return d||((0,o.injectGlobal)("@keyframes ","react-select-loading-indicator","{0%,80%,100%{opacity:0;}40%{opacity:1;}};"),d=!0),i.default.createElement("div",a({},s,{className:n((0,o.css)(r("loadingIndicator",t)),{indicator:!0,"loading-indicator":!0},e)}),i.default.createElement(g,{color:h,delay:0,offset:l}),i.default.createElement(g,{color:h,delay:160,offset:!0}),i.default.createElement(g,{color:h,delay:320,offset:!l}))};e.LoadingIndicator=m,m.defaultProps={size:4}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e,n){var r=n(87)(n(68),"Map");t.exports=r},function(t,e,n){var r=n(706),i=n(713),o=n(715),a=n(716),s=n(717);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){var r=n(38),i=n(226),o=n(751),a=n(754);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,n){var r=n(38),i=n(132),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(343),i=n(770)(r);t.exports=i},function(t,e,n){var r=n(295),i=n(85),o=n(298),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var u=null==n?0:o(n);return u<0&&(u=a(s+u,0)),r(t,i(e,3),u)}},function(t,e,n){var r=n(642),i=n(208),o=n(643),a=n(25);t.exports=function(t,e){return(a(t)?r:i)(t,o(e))}},function(t,e,n){(function(e){for(var r=n(648),i="undefined"===typeof window?e:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],u=i["cancel"+a]||i["cancelRequest"+a],l=0;!s&&l<o.length;l++)s=i[o[l]+"Request"+a],u=i[o[l]+"Cancel"+a]||i[o[l]+"CancelRequest"+a];if(!s||!u){var c=0,h=0,f=[];s=function(t){if(0===f.length){var e=r(),n=Math.max(0,1e3/60-(e-c));c=n+e,setTimeout((function(){var t=f.slice(0);f.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(c)}catch(n){setTimeout((function(){throw n}),0)}}),Math.round(n))}return f.push({handle:++h,callback:t,cancelled:!1}),h},u=function(t){for(var e=0;e<f.length;e++)f[e].handle===t&&(f[e].cancelled=!0)}}t.exports=function(t){return s.call(i,t)},t.exports.cancel=function(){u.apply(i,arguments)},t.exports.polyfill=function(t){t||(t=i),t.requestAnimationFrame=s,t.cancelAnimationFrame=u}}).call(this,n(49))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),a=u(o),s=u(n(1));function u(t){return t&&t.__esModule?t:{default:t}}var l={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},c=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],h=function(t,e){e.style.fontSize=t.fontSize,e.style.fontFamily=t.fontFamily,e.style.fontWeight=t.fontWeight,e.style.fontStyle=t.fontStyle,e.style.letterSpacing=t.letterSpacing,e.style.textTransform=t.textTransform},f=!("undefined"===typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),p=function(){return f?"_"+Math.random().toString(36).substr(2,12):void 0},d=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.inputRef=function(t){n.input=t,"function"===typeof n.props.inputRef&&n.props.inputRef(t)},n.placeHolderSizerRef=function(t){n.placeHolderSizer=t},n.sizerRef=function(t){n.sizer=t},n.state={inputWidth:t.minWidth,inputId:t.id||p()},n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=t.id;e!==this.props.id&&this.setState({inputId:e||p()})}},{key:"componentDidUpdate",value:function(t,e){e.inputWidth!==this.state.inputWidth&&"function"===typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var t=this.input&&window.getComputedStyle(this.input);t&&(h(t,this.sizer),this.placeHolderSizer&&h(t,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&"undefined"!==typeof this.sizer.scrollWidth){var t=void 0;t=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(t+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(t=this.props.minWidth),t!==this.state.inputWidth&&this.setState({inputWidth:t})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var t=this.props.injectStyles;return f&&t?a.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var t=[this.props.defaultValue,this.props.value,""].reduce((function(t,e){return null!==t&&void 0!==t?t:e})),e=r({},this.props.style);e.display||(e.display="inline-block");var n=r({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),i=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(this.props,[]);return function(t){c.forEach((function(e){return delete t[e]}))}(i),i.className=this.props.inputClassName,i.id=this.state.inputId,i.style=n,a.default.createElement("div",{className:this.props.className,style:e},this.renderStyles(),a.default.createElement("input",r({},i,{ref:this.inputRef})),a.default.createElement("div",{ref:this.sizerRef,style:l},t),this.props.placeholder?a.default.createElement("div",{ref:this.placeHolderSizerRef,style:l},this.props.placeholder):null)}}]),e}(o.Component);d.propTypes={className:s.default.string,defaultValue:s.default.any,extraWidth:s.default.oneOfType([s.default.number,s.default.string]),id:s.default.string,injectStyles:s.default.bool,inputClassName:s.default.string,inputRef:s.default.func,inputStyle:s.default.object,minWidth:s.default.oneOfType([s.default.number,s.default.string]),onAutosize:s.default.func,onChange:s.default.func,placeholder:s.default.string,placeholderIsMinWidth:s.default.bool,style:s.default.object,value:s.default.any},d.defaultProps={minWidth:1,injectStyles:!0},e.default=d},function(t,e,n){var r=n(762),i=n(108),o=n(763),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var u=null==n?0:o(n);return u<0&&(u=a(s+u,0)),r(t,i(e,3),u)}},function(t,e,n){"use strict";(function(t,r){var i,o=n(346);i="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:r;var a=Object(o.a)(i);e.a=a}).call(this,n(49),n(390)(t))},function(t,e,n){var r=n(118),i=n(11);t.exports=function(t,e){return r(i(t,e),1)}},function(t,e,n){var r=n(178),i=n(125),o=n(151),a=Math.ceil,s=Math.max;t.exports=function(t,e,n){e=(n?i(t,e,n):void 0===e)?1:s(o(e),0);var u=null==t?0:t.length;if(!u||e<1)return[];for(var l=0,c=0,h=Array(a(u/e));l<u;)h[c++]=r(t,l,l+=e);return h}},function(t,e,n){"use strict";var r=n(501),i=n(286),o=n(505),a=n(509),s=n(510),u=n(511);function l(t){if("string"!==typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(t,e){return e.encode?e.strict?a(t):encodeURIComponent(t):t}function h(t,e){return e.decode?s(t):t}function f(t){var e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function p(t){var e=(t=f(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function d(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"===typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function g(t,e){l((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);var n=function(t){var e;switch(t.arrayFormat){case"index":return function(t,n,r){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return function(t,n,r){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"comma":case"separator":return function(e,n,r){var i="string"===typeof n&&n.split("").indexOf(t.arrayFormatSeparator)>-1?n.split(t.arrayFormatSeparator).map((function(e){return h(e,t)})):null===n?n:h(n,t);r[e]=i};default:return function(t,e,n){void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e),o=Object.create(null);if("string"!==typeof t)return o;if(!(t=t.trim().replace(/^[?#&]/,"")))return o;var a,s=i(t.split("&"));try{for(s.s();!(a=s.n()).done;){var c=a.value,f=u(e.decode?c.replace(/\+/g," "):c,"="),p=r(f,2),g=p[0],m=p[1];m=void 0===m?null:"comma"===e.arrayFormat?m:h(m,e),n(h(g,e),m,o)}}catch(x){s.e(x)}finally{s.f()}for(var y=0,v=Object.keys(o);y<v.length;y++){var E=v[y],_=o[E];if("object"===typeof _&&null!==_)for(var b=0,S=Object.keys(_);b<S.length;b++){var w=S[b];_[w]=d(_[w],e)}else o[E]=d(_,e)}return!1===e.sort?o:(!0===e.sort?Object.keys(o).sort():Object.keys(o).sort(e.sort)).reduce((function(t,e){var n=o[e];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"===typeof e?t(Object.keys(e)).sort((function(t,e){return Number(t)-Number(e)})).map((function(t){return e[t]})):e}(n):t[e]=n,t}),Object.create(null))}e.extract=p,e.parse=g,e.stringify=function(t,e){if(!t)return"";l((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);var n=function(t){switch(t.arrayFormat){case"index":return function(e){return function(n,r){var i=n.length;return void 0===r||t.skipNull&&null===r?n:[].concat(o(n),null===r?[[c(e,t),"[",i,"]"].join("")]:[[c(e,t),"[",c(i,t),"]=",c(r,t)].join("")])}};case"bracket":return function(e){return function(n,r){return void 0===r||t.skipNull&&null===r?n:[].concat(o(n),null===r?[[c(e,t),"[]"].join("")]:[[c(e,t),"[]=",c(r,t)].join("")])}};case"comma":case"separator":return function(e){return function(n,r){return null===r||void 0===r||0===r.length?n:0===n.length?[[c(e,t),"=",c(r,t)].join("")]:[[n,c(r,t)].join(t.arrayFormatSeparator)]}};default:return function(e){return function(n,r){return void 0===r||t.skipNull&&null===r?n:[].concat(o(n),null===r?[c(e,t)]:[[c(e,t),"=",c(r,t)].join("")])}}}}(e),r=Object.assign({},t);if(e.skipNull)for(var i=0,a=Object.keys(r);i<a.length;i++){var s=a[i];void 0!==r[s]&&null!==r[s]||delete r[s]}var u=Object.keys(r);return!1!==e.sort&&u.sort(e.sort),u.map((function(r){var i=t[r];return void 0===i?"":null===i?c(r,e):Array.isArray(i)?i.reduce(n(r),[]).join("&"):c(r,e)+"="+c(i,e)})).filter((function(t){return t.length>0})).join("&")},e.parseUrl=function(t,e){return{url:f(t).split("?")[0]||"",query:g(p(t),e)}},e.stringifyUrl=function(t,n){var r=f(t.url).split("?")[0]||"",i=e.extract(t.url),o=e.parse(i),a=function(t){var e="",n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}(t.url),s=Object.assign(o,t.query),u=e.stringify(s,n);return u&&(u="?".concat(u)),"".concat(r).concat(u).concat(a)}},function(t,e,n){var r=n(84),i=n(70);t.exports=function(t){return"number"==typeof t||i(t)&&"[object Number]"==r(t)}},function(t,e,n){var r=n(326),i=n(674),o=n(37);t.exports=function(t,e){return t&&t.length?r(t,o(e,2),i):void 0}},function(t,e,n){var r=n(326),i=n(37),o=n(675);t.exports=function(t,e){return t&&t.length?r(t,i(e,2),o):void 0}},function(t,e,n){var r=n(109),i=n(73);t.exports=function(t){return"number"==typeof t||i(t)&&"[object Number]"==r(t)}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return E}));var r=n(17);function i(t){return"/"===t.charAt(0)}function o(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}var a=function(t,e){void 0===e&&(e="");var n,r=t&&t.split("/")||[],a=e&&e.split("/")||[],s=t&&i(t),u=e&&i(e),l=s||u;if(t&&i(t)?a=r:r.length&&(a.pop(),a=a.concat(r)),!a.length)return"/";if(a.length){var c=a[a.length-1];n="."===c||".."===c||""===c}else n=!1;for(var h=0,f=a.length;f>=0;f--){var p=a[f];"."===p?o(a,f):".."===p?(o(a,f),h++):h&&(o(a,f),h--)}if(!l)for(;h--;h)a.unshift("..");!l||""===a[0]||a[0]&&i(a[0])||a.unshift("");var d=a.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d};var s=function(t,e){if(!t)throw new Error("Invariant failed")};function u(t){return"/"===t.charAt(0)?t:"/"+t}function l(t,e){return function(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}(t,e)?t.substr(e.length):t}function c(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function h(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function f(t,e,n,i){var o;"string"===typeof t?(o=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}(t)).state=e:(void 0===(o=Object(r.a)({},t)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function p(){var t=null;var e=[];return{setPrompt:function(e){return t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,r,i){if(null!=t){var o="function"===typeof t?t(e,n):t;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(t){var n=!0;function r(){n&&t.apply(void 0,arguments)}return e.push(r),function(){n=!1,e=e.filter((function(t){return t!==r}))}},notifyListeners:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach((function(t){return t.apply(void 0,n)}))}}}var d=!("undefined"===typeof window||!window.document||!window.document.createElement);function g(t,e){e(window.confirm(t))}function m(){try{return window.history.state||{}}catch(t){return{}}}function y(t){void 0===t&&(t={}),d||s(!1);var e=window.history,n=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=t,a=o.forceRefresh,y=void 0!==a&&a,v=o.getUserConfirmation,E=void 0===v?g:v,_=o.keyLength,b=void 0===_?6:_,S=t.basename?c(u(t.basename)):"";function w(t){var e=t||{},n=e.key,r=e.state,i=window.location,o=i.pathname+i.search+i.hash;return S&&(o=l(o,S)),f(o,r,n)}function x(){return Math.random().toString(36).substr(2,b)}var T=p();function L(t){Object(r.a)(V,t),V.length=e.length,T.notifyListeners(V.location,V.action)}function C(t){(function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")})(t)||R(w(t.state))}function A(){R(w(m()))}var M=!1;function R(t){if(M)M=!1,L();else{T.confirmTransitionTo(t,"POP",E,(function(e){e?L({action:"POP",location:t}):function(t){var e=V.location,n=P.indexOf(e.key);-1===n&&(n=0);var r=P.indexOf(t.key);-1===r&&(r=0);var i=n-r;i&&(M=!0,N(i))}(t)}))}}var O=w(m()),P=[O.key];function I(t){return S+h(t)}function N(t){e.go(t)}var D=0;function k(t){1===(D+=t)&&1===t?(window.addEventListener("popstate",C),i&&window.addEventListener("hashchange",A)):0===D&&(window.removeEventListener("popstate",C),i&&window.removeEventListener("hashchange",A))}var F=!1;var V={length:e.length,action:"POP",location:O,createHref:I,push:function(t,r){var i=f(t,r,x(),V.location);T.confirmTransitionTo(i,"PUSH",E,(function(t){if(t){var r=I(i),o=i.key,a=i.state;if(n)if(e.pushState({key:o,state:a},null,r),y)window.location.href=r;else{var s=P.indexOf(V.location.key),u=P.slice(0,s+1);u.push(i.key),P=u,L({action:"PUSH",location:i})}else window.location.href=r}}))},replace:function(t,r){var i=f(t,r,x(),V.location);T.confirmTransitionTo(i,"REPLACE",E,(function(t){if(t){var r=I(i),o=i.key,a=i.state;if(n)if(e.replaceState({key:o,state:a},null,r),y)window.location.replace(r);else{var s=P.indexOf(V.location.key);-1!==s&&(P[s]=i.key),L({action:"REPLACE",location:i})}else window.location.replace(r)}}))},go:N,goBack:function(){N(-1)},goForward:function(){N(1)},block:function(t){void 0===t&&(t=!1);var e=T.setPrompt(t);return F||(k(1),F=!0),function(){return F&&(F=!1,k(-1)),e()}},listen:function(t){var e=T.appendListener(t);return k(1),function(){k(-1),e()}}};return V}function v(t,e,n){return Math.min(Math.max(t,e),n)}function E(t){void 0===t&&(t={});var e=t,n=e.getUserConfirmation,i=e.initialEntries,o=void 0===i?["/"]:i,a=e.initialIndex,s=void 0===a?0:a,u=e.keyLength,l=void 0===u?6:u,c=p();function d(t){Object(r.a)(b,t),b.length=b.entries.length,c.notifyListeners(b.location,b.action)}function g(){return Math.random().toString(36).substr(2,l)}var m=v(s,0,o.length-1),y=o.map((function(t){return f(t,void 0,"string"===typeof t?g():t.key||g())})),E=h;function _(t){var e=v(b.index+t,0,b.entries.length-1),r=b.entries[e];c.confirmTransitionTo(r,"POP",n,(function(t){t?d({action:"POP",location:r,index:e}):d()}))}var b={length:y.length,action:"POP",location:y[m],index:m,entries:y,createHref:E,push:function(t,e){var r=f(t,e,g(),b.location);c.confirmTransitionTo(r,"PUSH",n,(function(t){if(t){var e=b.index+1,n=b.entries.slice(0);n.length>e?n.splice(e,n.length-e,r):n.push(r),d({action:"PUSH",location:r,index:e,entries:n})}}))},replace:function(t,e){var r=f(t,e,g(),b.location);c.confirmTransitionTo(r,"REPLACE",n,(function(t){t&&(b.entries[b.index]=r,d({action:"REPLACE",location:r}))}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},canGo:function(t){var e=b.index+t;return e>=0&&e<b.entries.length},block:function(t){return void 0===t&&(t=!1),c.setPrompt(t)},listen:function(t){return c.appendListener(t)}};return b}},,function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(49))},function(t,e,n){var r=n(65),i=n(37),o=n(264),a=n(453),s=n(100),u=n(454),l=n(124);t.exports=function(t,e,n){var c=-1;e=r(e.length?e:[l],s(i));var h=o(t,(function(t,n,i){return{criteria:r(e,(function(e){return e(t)})),index:++c,value:t}}));return a(h,(function(t,e){return u(t,e,n)}))}},function(t,e,n){var r=n(141),i=n(183);t.exports=function(t,e,n,o){var a=n.length,s=a,u=!o;if(null==t)return!s;for(t=Object(t);a--;){var l=n[a];if(u&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<s;){var c=(l=n[a])[0],h=t[c],f=l[1];if(u&&l[2]){if(void 0===h&&!(c in t))return!1}else{var p=new r;if(o)var d=o(h,f,c,t,e,p);if(!(void 0===d?i(f,h,3,o,p):d))return!1}}return!0}},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},function(t,e,n){var r=n(146),i=n(251),o=n(147);t.exports=function(t,e,n,a,s,u){var l=1&n,c=t.length,h=e.length;if(c!=h&&!(l&&h>c))return!1;var f=u.get(t);if(f&&u.get(e))return f==e;var p=-1,d=!0,g=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++p<c;){var m=t[p],y=e[p];if(a)var v=l?a(y,m,p,e,t,u):a(m,y,p,t,e,u);if(void 0!==v){if(v)continue;d=!1;break}if(g){if(!i(e,(function(t,e){if(!o(g,e)&&(m===t||s(m,t,n,a,u)))return g.push(e)}))){d=!1;break}}else if(m!==y&&!s(m,y,n,a,u)){d=!1;break}}return u.delete(t),u.delete(e),d}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(61).Uint8Array;t.exports=r},function(t,e,n){var r=n(254),i=n(185),o=n(83);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(179),i=n(9);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(433),i=n(119),o=n(9),a=n(121),s=n(122),u=n(148),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&i(t),h=!n&&!c&&a(t),f=!n&&!c&&!h&&u(t),p=n||c||h||f,d=p?r(t.length,String):[],g=d.length;for(var m in t)!e&&!l.call(t,m)||p&&("length"==m||h&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||d.push(m);return d}},function(t,e,n){var r=n(149),i=n(436),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(82)(n(61),"Set");t.exports=r},function(t,e,n){var r=n(261),i=n(83);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},function(t,e,n){var r=n(22);t.exports=function(t){return t===t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(446),i=n(447);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e,n){var r=n(104),i=n(66);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},function(t,e,n){var r=n(190),i=n(83);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(456),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),u=Array(s);++a<s;)u[a]=o[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=o[a];return l[e]=n(u),r(t,this,l)}}},function(t,e,n){var r=n(457),i=n(459)(r);t.exports=i},function(t,e,n){var r=n(82),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(124);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e,n){var r=n(150),i=n(273),o=n(101);t.exports=function(t,e,n){for(var a=-1,s=e.length,u={};++a<s;){var l=e[a],c=r(t,l);n(c,l)&&i(u,o(l,t),c)}return u}},function(t,e,n){var r=n(195),i=n(101),o=n(122),a=n(22),s=n(103);t.exports=function(t,e,n,u){if(!a(t))return t;for(var l=-1,c=(e=i(e,t)).length,h=c-1,f=t;null!=f&&++l<c;){var p=s(e[l]),d=n;if(l!=h){var g=f[p];void 0===(d=u?u(g,p,f):void 0)&&(d=a(g)?g:o(e[l+1])?[]:{})}r(f,p,d),f=f[p]}return t}},function(t,e,n){var r=n(112),i=n(266),o=n(267);t.exports=function(t){return o(i(t,void 0,r),t+"")}},function(t,e,n){var r=n(179),i=n(197),o=n(185),a=n(255),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=s},function(t,e,n){var r=n(104);t.exports=function(t,e){var n=[];return r(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}},function(t,e,n){var r=n(141),i=n(270),o=n(195),a=n(474),s=n(475),u=n(278),l=n(279),c=n(476),h=n(477),f=n(253),p=n(196),d=n(123),g=n(478),m=n(479),y=n(281),v=n(9),E=n(121),_=n(484),b=n(22),S=n(486),w=n(83),x={};x["[object Arguments]"]=x["[object Array]"]=x["[object ArrayBuffer]"]=x["[object DataView]"]=x["[object Boolean]"]=x["[object Date]"]=x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Map]"]=x["[object Number]"]=x["[object Object]"]=x["[object RegExp]"]=x["[object Set]"]=x["[object String]"]=x["[object Symbol]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x["[object Error]"]=x["[object Function]"]=x["[object WeakMap]"]=!1,t.exports=function t(e,n,T,L,C,A){var M,R=1&n,O=2&n,P=4&n;if(T&&(M=C?T(e,L,C,A):T(e)),void 0!==M)return M;if(!b(e))return e;var I=v(e);if(I){if(M=g(e),!R)return l(e,M)}else{var N=d(e),D="[object Function]"==N||"[object GeneratorFunction]"==N;if(E(e))return u(e,R);if("[object Object]"==N||"[object Arguments]"==N||D&&!C){if(M=O||D?{}:y(e),!R)return O?h(e,s(M,e)):c(e,a(M,e))}else{if(!x[N])return C?e:{};M=m(e,N,R)}}A||(A=new r);var k=A.get(e);if(k)return k;A.set(e,M),S(e)?e.forEach((function(r){M.add(t(r,n,T,r,e,A))})):_(e)&&e.forEach((function(r,i){M.set(i,t(r,n,T,i,e,A))}));var F=P?O?p:f:O?keysIn:w,V=I?void 0:F(e);return i(V||e,(function(r,i){V&&(r=e[i=r]),o(M,i,t(r,n,T,i,e,A))})),M}},function(t,e,n){(function(t){var r=n(61),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(56)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(198);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(483),i=n(197),o=n(149);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},function(t,e,n){var r=n(101),i=n(488),o=n(489),a=n(103);t.exports=function(t,e){return e=r(e,t),null==(t=o(t,e))||delete t[a(i(e))]}},function(t,e,n){var r=n(72),i=n(197),o=n(39),a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=u.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==c}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){var r=n(199);t.exports=function(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=r(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}},function(t,e,n){var r=n(146),i=n(192),o=n(194),a=n(65),s=n(100),u=n(147);t.exports=function(t,e,n,l){var c=-1,h=i,f=!0,p=t.length,d=[],g=e.length;if(!p)return d;n&&(e=a(e,s(n))),l?(h=o,f=!1):e.length>=200&&(h=u,f=!1,e=new r(e));t:for(;++c<p;){var m=t[c],y=null==n?m:n(m);if(m=l||0!==m?m:0,f&&y===y){for(var v=g;v--;)if(e[v]===y)continue t;d.push(m)}else h(e,y,l)||d.push(m)}return d}},function(t,e,n){var r=n(152),i=n(120);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e,n){var r=n(291).Symbol;t.exports=r},function(t,e,n){var r=n(292),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(49))},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e,n){var r=n(84),i=n(62);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(49))},function(t,e,n){var r=n(561);t.exports=function(t){var e=r(t),n=e%1;return e===e?n?e-n:e:0}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(301),i=n(571),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(208);t.exports=function(t,e){var n=[];return r(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}},function(t,e,n){var r=n(573),i=n(130);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(155),i=n(583),o=n(584),a=n(585),s=n(586),u=n(587);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=u,t.exports=l},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},function(t,e,n){var r=n(604),i=n(70);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!==e&&n!==n:r(e,n,o,a,t,s))}},function(t,e,n){var r=n(605),i=n(608),o=n(609);t.exports=function(t,e,n,a,s,u){var l=1&n,c=t.length,h=e.length;if(c!=h&&!(l&&h>c))return!1;var f=u.get(t);if(f&&u.get(e))return f==e;var p=-1,d=!0,g=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++p<c;){var m=t[p],y=e[p];if(a)var v=l?a(y,m,p,e,t,u):a(m,y,p,t,e,u);if(void 0!==v){if(v)continue;d=!1;break}if(g){if(!i(e,(function(t,e){if(!o(g,e)&&(m===t||s(m,t,n,a,u)))return g.push(e)}))){d=!1;break}}else if(m!==y&&!s(m,y,n,a,u)){d=!1;break}}return u.delete(t),u.delete(e),d}},function(t,e,n){var r=n(620),i=n(210),o=n(621),a=n(622),s=n(623),u=n(84),l=n(305),c=l(r),h=l(i),f=l(o),p=l(a),d=l(s),g=u;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||o&&"[object Promise]"!=g(o.resolve())||a&&"[object Set]"!=g(new a)||s&&"[object WeakMap]"!=g(new s))&&(g=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case c:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=g},function(t,e,n){var r=n(62);t.exports=function(t){return t===t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(212),i=n(131);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){var r=n(641);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(208),i=n(107);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},function(t,e,n){"use strict";e.__esModule=!0,e.default=e.EXITING=e.ENTERED=e.ENTERING=e.EXITED=e.UNMOUNTED=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(1)),i=s(n(0)),o=s(n(57)),a=n(315);n(316);function s(t){return t&&t.__esModule?t:{default:t}}e.UNMOUNTED="unmounted";e.EXITED="exited";e.ENTERING="entering";e.ENTERED="entered";e.EXITING="exiting";var u=function(t){var e,n;function r(e,n){var r;r=t.call(this,e,n)||this;var i,o=n.transitionGroup,a=o&&!o.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?a?(i="exited",r.appearStatus="entering"):i="entered":i=e.unmountOnExit||e.mountOnEnter?"unmounted":"exited",r.state={status:i},r.nextCallback=null,r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var a=r.prototype;return a.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(t,e){return t.in&&"unmounted"===e.status?{status:"exited"}:null},a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(e="entering"):"entering"!==n&&"entered"!==n||(e="exiting")}this.updateStatus(!1,e)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},a.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e){this.cancelNextCallback();var n=o.default.findDOMNode(this);"entering"===e?this.performEnter(n,t):this.performExit(n)}else this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},a.performEnter=function(t,e){var n=this,r=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:e,o=this.getTimeouts(),a=i?o.appear:o.enter;e||r?(this.props.onEnter(t,i),this.safeSetState({status:"entering"},(function(){n.props.onEntering(t,i),n.onTransitionEnd(t,a,(function(){n.safeSetState({status:"entered"},(function(){n.props.onEntered(t,i)}))}))}))):this.safeSetState({status:"entered"},(function(){n.props.onEntered(t)}))},a.performExit=function(t){var e=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(t),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(t),e.onTransitionEnd(t,r.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(t)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(t)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},a.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(t,e,n){this.setNextCallback(n);var r=null==e&&!this.props.addEndListener;t&&!r?(this.props.addEndListener&&this.props.addEndListener(t,this.nextCallback),null!=e&&setTimeout(this.nextCallback,e)):setTimeout(this.nextCallback,0)},a.render=function(){var t=this.state.status;if("unmounted"===t)return null;var e=this.props,n=e.children,r=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(e,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"===typeof n)return n(t,r);var o=i.default.Children.only(n);return i.default.cloneElement(o,r)},r}(i.default.Component);function l(){}u.contextTypes={transitionGroup:r.object},u.childContextTypes={transitionGroup:function(){}},u.propTypes={},u.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:l,onEntering:l,onEntered:l,onExit:l,onExiting:l,onExited:l},u.UNMOUNTED=0,u.EXITED=1,u.ENTERING=2,u.ENTERED=3,u.EXITING=4;var c=(0,a.polyfill)(u);e.default=c},function(t,e,n){"use strict";function r(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==t&&void 0!==t&&this.setState(t)}function i(t){this.setState(function(e){var n=this.constructor.getDerivedStateFromProps(t,e);return null!==n&&void 0!==n?n:null}.bind(this))}function o(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function a(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof t.getDerivedStateFromProps&&"function"!==typeof e.getSnapshotBeforeUpdate)return t;var n=null,a=null,s=null;if("function"===typeof e.componentWillMount?n="componentWillMount":"function"===typeof e.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof e.componentWillReceiveProps?a="componentWillReceiveProps":"function"===typeof e.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"===typeof e.componentWillUpdate?s="componentWillUpdate":"function"===typeof e.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var u=t.displayName||t.name,l="function"===typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+u+" uses "+l+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof t.getDerivedStateFromProps&&(e.componentWillMount=r,e.componentWillReceiveProps=i),"function"===typeof e.getSnapshotBeforeUpdate){if("function"!==typeof e.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=o;var c=e.componentDidUpdate;e.componentDidUpdate=function(t,e,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,t,e,r)}}return t}n.r(e),n.d(e,"polyfill",(function(){return a})),r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},function(t,e,n){"use strict";e.__esModule=!0,e.classNamesShape=e.timeoutsShape=void 0;var r;(r=n(1))&&r.__esModule;e.timeoutsShape=null;e.classNamesShape=null},function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r=s(n(1)),i=s(n(0)),o=n(315),a=n(655);function s(t){return t&&t.__esModule?t:{default:t}}function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var c=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},h=function(t){var e,n;function r(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind(l(l(r)));return r.state={handleExited:i,firstRender:!0},r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var o=r.prototype;return o.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},o.componentDidMount=function(){this.appeared=!0,this.mounted=!0},o.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(t,e){var n=e.children,r=e.handleExited;return{children:e.firstRender?(0,a.getInitialChildMapping)(t,r):(0,a.getNextChildMapping)(t,n,r),firstRender:!1}},o.handleExited=function(t,e){var n=(0,a.getChildMapping)(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=u({},e.children);return delete n[t.key],{children:n}})))},o.render=function(){var t=this.props,e=t.component,n=t.childFactory,r=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,["component","childFactory"]),o=c(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===e?o:i.default.createElement(e,r,o)},r}(i.default.Component);h.childContextTypes={transitionGroup:r.default.object.isRequired},h.propTypes={},h.defaultProps={component:"div",childFactory:function(t){return t}};var f=(0,o.polyfill)(h);e.default=f,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndicatorsContainer=e.indicatorsContainerCSS=e.ValueContainer=e.valueContainerCSS=e.SelectContainer=e.containerCSS=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=n(13);function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(){return(h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}e.containerCSS=function(t){var e=t.isDisabled;return{label:"container",direction:t.isRtl?"rtl":null,pointerEvents:e?"none":null,position:"relative"}};e.SelectContainer=function(t){var e=t.children,n=t.className,o=t.cx,a=t.getStyles,s=t.innerProps,u=t.isDisabled,l=t.isRtl;return r.default.createElement("div",h({className:o((0,i.css)(a("container",t)),{"--is-disabled":u,"--is-rtl":l},n)},s),e)};e.valueContainerCSS=function(t){var e=t.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(e.baseUnit/2,"px ").concat(2*e.baseUnit,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}};var f=function(t){function e(){return a(this,e),u(this,l(e).apply(this,arguments))}var n,o,h;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(o=[{key:"render",value:function(){var t=this.props,e=t.children,n=t.className,o=t.cx,a=t.isMulti,s=t.getStyles,u=t.hasValue;return r.default.createElement("div",{className:o((0,i.css)(s("valueContainer",this.props)),{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":u},n)},e)}}])&&s(n.prototype,o),h&&s(n,h),e}(r.Component);e.ValueContainer=f;e.indicatorsContainerCSS=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}};e.IndicatorsContainer=function(t){var e=t.children,n=t.className,o=t.cx,a=t.getStyles;return r.default.createElement("div",{className:o((0,i.css)(a("indicatorsContainer",t)),{indicators:!0},n)},e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.css=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(13);function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}e.css=function(t){var e=t.isDisabled,n=t.isFocused,r=t.theme,i=r.colors,o=r.borderRadius,a=r.spacing;return{label:"control",alignItems:"center",backgroundColor:e?i.neutral5:i.neutral0,borderColor:e?i.neutral10:n?i.primary:i.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(i.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:n?i.primary:i.neutral30}}};var s=function(t){var e=t.children,n=t.cx,r=t.getStyles,s=t.className,u=t.isDisabled,l=t.isFocused,c=t.innerRef,h=t.innerProps,f=t.menuIsOpen;return i.default.createElement("div",a({ref:c,className:n((0,o.css)(r("control",t)),{control:!0,"control--is-disabled":u,"control--is-focused":l,"control--menu-is-open":f},s)},h),e)};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.GroupHeading=e.groupHeadingCSS=e.groupCSS=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(13);function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){s(t,e,n[e])}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}e.groupCSS=function(t){var e=t.theme.spacing;return{paddingBottom:2*e.baseUnit,paddingTop:2*e.baseUnit}};e.groupHeadingCSS=function(t){var e=t.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:3*e.baseUnit,paddingRight:3*e.baseUnit,textTransform:"uppercase"}};e.GroupHeading=function(t){var e=t.className,n=t.cx,r=t.getStyles,s=t.theme,c=(t.selectProps,u(t,["className","cx","getStyles","theme","selectProps"]));return i.default.createElement("div",l({className:n((0,o.css)(r("groupHeading",a({theme:s},c))),{"group-heading":!0},e)},c))};var c=function(t){var e=t.children,n=t.className,r=t.cx,a=t.getStyles,s=t.Heading,u=t.headingProps,c=t.label,h=t.theme,f=t.selectProps;return i.default.createElement("div",{className:r((0,o.css)(a("group",t)),{group:!0},n)},i.default.createElement(s,l({},u,{selectProps:f,theme:h,getStyles:a,cx:r}),c),i.default.createElement("div",null,e))};e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.inputCSS=void 0;var r=a(n(0)),i=n(13),o=a(n(233));function a(t){return t&&t.__esModule?t:{default:t}}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){l(t,e,n[e])}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}e.inputCSS=function(t){var e=t.isDisabled,n=t.theme,r=n.spacing,i=n.colors;return{margin:r.baseUnit/2,paddingBottom:r.baseUnit/2,paddingTop:r.baseUnit/2,visibility:e?"hidden":"visible",color:i.neutral80}};var h=function(t){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:t?0:1,outline:0,padding:0,color:"inherit"}},f=function(t){var e=t.className,n=t.cx,a=t.getStyles,l=t.innerRef,f=t.isHidden,p=t.isDisabled,d=t.theme,g=(t.selectProps,c(t,["className","cx","getStyles","innerRef","isHidden","isDisabled","theme","selectProps"]));return r.default.createElement("div",{className:(0,i.css)(a("input",u({theme:d},g)))},r.default.createElement(o.default,s({className:n(null,{input:!0},e),inputRef:l,inputStyle:h(f),disabled:p},g)))};e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.MultiValueRemove=e.MultiValueLabel=e.MultiValueContainer=e.MultiValueGeneric=e.multiValueRemoveCSS=e.multiValueLabelCSS=e.multiValueCSS=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=n(13),o=n(218);function a(t){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){u(t,e,n[e])}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function f(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.multiValueCSS=function(t){var e=t.theme,n=e.spacing,r=e.borderRadius;return{label:"multiValue",backgroundColor:e.colors.neutral10,borderRadius:r/2,display:"flex",margin:n.baseUnit/2,minWidth:0}};e.multiValueLabelCSS=function(t){var e=t.theme,n=e.borderRadius,r=e.colors,i=t.cropWithEllipsis;return{borderRadius:n/2,color:r.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:i?"ellipsis":null,whiteSpace:"nowrap"}};e.multiValueRemoveCSS=function(t){var e=t.theme,n=e.spacing,r=e.borderRadius,i=e.colors;return{alignItems:"center",borderRadius:r/2,backgroundColor:t.isFocused&&i.dangerLight,display:"flex",paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:i.dangerLight,color:i.danger}}};var m=function(t){var e=t.children,n=t.innerProps;return r.default.createElement("div",n,e)};e.MultiValueGeneric=m;var y=m;e.MultiValueContainer=y;var v=m;e.MultiValueLabel=v;var E=function(t){function e(){return l(this,e),f(this,p(e).apply(this,arguments))}return d(e,t),h(e,[{key:"render",value:function(){var t=this.props,e=t.children,n=t.innerProps;return r.default.createElement("div",n,e||r.default.createElement(o.CrossIcon,{size:14}))}}]),e}(r.Component);e.MultiValueRemove=E;var _=function(t){function e(){return l(this,e),f(this,p(e).apply(this,arguments))}return d(e,t),h(e,[{key:"render",value:function(){var t=this.props,e=t.children,n=t.className,o=t.components,a=t.cx,u=t.data,l=t.getStyles,c=t.innerProps,h=t.isDisabled,f=t.removeProps,p=t.selectProps,d=o.Container,g=o.Label,m=o.Remove,y=s({className:a((0,i.css)(l("multiValue",this.props)),{"multi-value":!0,"multi-value--is-disabled":h},n)},c),v={className:a((0,i.css)(l("multiValueLabel",this.props)),{"multi-value__label":!0},n)},E=s({className:a((0,i.css)(l("multiValueRemove",this.props)),{"multi-value__remove":!0},n)},f);return r.default.createElement(d,{data:u,innerProps:y,selectProps:p},r.default.createElement(g,{data:u,innerProps:v,selectProps:p},e),r.default.createElement(m,{data:u,innerProps:E,selectProps:p}))}}]),e}(r.Component);u(_,"defaultProps",{cropWithEllipsis:!0});var b=_;e.default=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.optionCSS=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(13);function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}e.optionCSS=function(t){var e=t.isDisabled,n=t.isFocused,r=t.isSelected,i=t.theme,o=i.spacing,a=i.colors;return{label:"option",backgroundColor:r?a.primary:n?a.primary25:"transparent",color:e?a.neutral20:r?a.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!e&&(r?a.primary:a.primary50)}}};var s=function(t){var e=t.children,n=t.className,r=t.cx,s=t.getStyles,u=t.isDisabled,l=t.isFocused,c=t.isSelected,h=t.innerRef,f=t.innerProps;return i.default.createElement("div",a({ref:h,className:r((0,o.css)(s("option",t)),{option:!0,"option--is-disabled":u,"option--is-focused":l,"option--is-selected":c},n)},f),e)};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.placeholderCSS=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(13);function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}e.placeholderCSS=function(t){var e=t.theme,n=e.spacing;return{label:"placeholder",color:e.colors.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}};var s=function(t){var e=t.children,n=t.className,r=t.cx,s=t.getStyles,u=t.innerProps;return i.default.createElement("div",a({className:r((0,o.css)(s("placeholder",t)),{placeholder:!0},n)},u),e)};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.css=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(13);function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}e.css=function(t){var e=t.isDisabled,n=t.theme,r=n.spacing,i=n.colors;return{label:"singleValue",color:e?i.neutral40:i.neutral80,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2,maxWidth:"calc(100% - ".concat(2*r.baseUnit,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}};var s=function(t){var e=t.children,n=t.className,r=t.cx,s=t.getStyles,u=t.isDisabled,l=t.innerProps;return i.default.createElement("div",a({className:r((0,o.css)(s("singleValue",t)),{"single-value":!0,"single-value--is-disabled":u},n)},l),e)};e.default=s},function(t,e,n){var r=n(102);t.exports=function(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(void 0===u?s===s&&!r(s):n(s,u)))var u=s,l=a}return l}},function(t,e,n){var r=n(159),i=n(219),o=function(){"use strict";function t(e,n,i,o,a){r(this,t),this.x=e,this.y=n,this.w=i,this.h=o,a&&(this.data=a)}return i(t,[{key:"contains",value:function(t){return t.x>=this.x&&t.x<=this.x+this.w&&t.y>=this.y&&t.y<=this.y+this.h}},{key:"intersects",value:function(t){return!(t.x>this.x+this.w||t.x+t.w<this.x||t.y>this.y+this.h||t.y+t.h<this.y)}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){return void 0===n&&(n={}),r({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function f(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return i(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.polygon=o,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.lineString=a,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return a(t,e)})),n)},e.featureCollection=s,e.multiLineString=u,e.multiPoint=l,e.multiPolygon=c,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=h,e.lengthToRadians=f,e.lengthToDegrees=function(t,e){return p(f(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return h(f(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(t,e,n){var r=n(160),i=n(695),o=n(696),a=n(697),s=n(698),u=n(699);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=u,t.exports=l},function(t,e,n){var r=n(109),i=n(74);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(49))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},function(t,e,n){var r=n(718),i=n(73);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!==e&&n!==n:r(e,n,o,a,t,s))}},function(t,e,n){var r=n(719),i=n(722),o=n(723);t.exports=function(t,e,n,a,s,u){var l=1&n,c=t.length,h=e.length;if(c!=h&&!(l&&h>c))return!1;var f=u.get(t);if(f&&u.get(e))return f==e;var p=-1,d=!0,g=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++p<c;){var m=t[p],y=e[p];if(a)var v=l?a(y,m,p,e,t,u):a(m,y,p,t,e,u);if(void 0!==v){if(v)continue;d=!1;break}if(g){if(!i(e,(function(t,e){if(!o(g,e)&&(m===t||s(m,t,n,a,u)))return g.push(e)}))){d=!1;break}}else if(m!==y&&!s(m,y,n,a,u)){d=!1;break}}return u.delete(t),u.delete(e),d}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e,n){var r=n(736),i=n(73),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){(function(t){var r=n(68),i=n(737),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(this,n(56)(t))},function(t,e,n){var r=n(738),i=n(339),o=n(739),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(74);t.exports=function(t){return t===t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(225),i=n(133);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){var r=n(768),i=n(165);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(775);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(229),i=n(166);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"===typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",(function(){return r}))},function(t,e){t.exports=function(t){return t&&t.length?t[0]:void 0}},function(t,e,n){var r=n(178);t.exports=function(t){var e=null==t?0:t.length;return e?r(t,1,e):[]}},function(t,e,n){var r=n(460),i=n(104),o=n(37),a=n(461),s=n(9);t.exports=function(t,e,n){var u=s(t)?r:a,l=arguments.length<3;return u(t,o(e,4),n,l,i)}},function(t,e,n){var r=n(248),i=n(260);t.exports=function(t,e){return t===e||r(t,e,i(e))}},function(t,e,n){var r=n(37),i=n(191);t.exports=function(t,e){return t&&t.length?i(t,r(e,2)):[]}},function(t,e,n){"use strict";t.exports=n(496)},function(t,e,n){"use strict";t.exports=n(497)},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return ct}));var r=n(1),i=n.n(r),o=n(355),a=n.n(o),s=n(356),u=n.n(s),l=n(0),c=n.n(l),h=n(69),f=n.n(h),p="bodyAttributes",d="htmlAttributes",g="titleAttributes",m={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},y=(Object.keys(m).map((function(t){return m[t]})),"charset"),v="cssText",E="href",_="http-equiv",b="innerHTML",S="itemprop",w="name",x="property",T="rel",L="src",C="target",A={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},M="defaultTitle",R="defer",O="encodeSpecialCharacters",P="onChangeClientState",I="titleTemplate",N=Object.keys(A).reduce((function(t,e){return t[A[e]]=e,t}),{}),D=[m.NOSCRIPT,m.SCRIPT,m.STYLE],k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},V=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},U=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e},G=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!1===e?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},K=function(t){var e=q(t,m.TITLE),n=q(t,I);if(n&&e)return n.replace(/%s/g,(function(){return Array.isArray(e)?e.join(""):e}));var r=q(t,M);return e||r||void 0},W=function(t){return q(t,P)||function(){}},z=function(t,e){return e.filter((function(e){return"undefined"!==typeof e[t]})).map((function(e){return e[t]})).reduce((function(t,e){return j({},t,e)}),{})},Y=function(t,e){return e.filter((function(t){return"undefined"!==typeof t[m.BASE]})).map((function(t){return t[m.BASE]})).reverse().reduce((function(e,n){if(!e.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i].toLowerCase();if(-1!==t.indexOf(o)&&n[o])return e.concat(n)}return e}),[])},H=function(t,e,n){var r={};return n.filter((function(e){return!!Array.isArray(e[t])||("undefined"!==typeof e[t]&&$("Helmet: "+t+' should be of type "Array". Instead found type "'+k(e[t])+'"'),!1)})).map((function(e){return e[t]})).reverse().reduce((function(t,n){var i={};n.filter((function(t){for(var n=void 0,o=Object.keys(t),a=0;a<o.length;a++){var s=o[a],u=s.toLowerCase();-1===e.indexOf(u)||n===T&&"canonical"===t[n].toLowerCase()||u===T&&"stylesheet"===t[u].toLowerCase()||(n=u),-1===e.indexOf(s)||s!==b&&s!==v&&s!==S||(n=s)}if(!n||!t[n])return!1;var l=t[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),!r[n][l]&&(i[n][l]=!0,!0)})).reverse().forEach((function(e){return t.push(e)}));for(var o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=f()({},r[s],i[s]);r[s]=u}return t}),[]).reverse()},q=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.hasOwnProperty(e))return r[e]}return null},X=function(){var t=Date.now();return function(e){var n=Date.now();n-t>16?(t=n,e(n)):setTimeout((function(){X(e)}),0)}}(),Z=function(t){return clearTimeout(t)},J="undefined"!==typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||X:t.requestAnimationFrame||X,Q="undefined"!==typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||Z:t.cancelAnimationFrame||Z,$=function(t){return console&&"function"===typeof console.warn&&console.warn(t)},tt=null,et=function(t,e){var n=t.baseTag,r=t.bodyAttributes,i=t.htmlAttributes,o=t.linkTags,a=t.metaTags,s=t.noscriptTags,u=t.onChangeClientState,l=t.scriptTags,c=t.styleTags,h=t.title,f=t.titleAttributes;it(m.BODY,r),it(m.HTML,i),rt(h,f);var p={baseTag:ot(m.BASE,n),linkTags:ot(m.LINK,o),metaTags:ot(m.META,a),noscriptTags:ot(m.NOSCRIPT,s),scriptTags:ot(m.SCRIPT,l),styleTags:ot(m.STYLE,c)},d={},g={};Object.keys(p).forEach((function(t){var e=p[t],n=e.newTags,r=e.oldTags;n.length&&(d[t]=n),r.length&&(g[t]=p[t].oldTags)})),e&&e(),u(t,d,g)},nt=function(t){return Array.isArray(t)?t.join(""):t},rt=function(t,e){"undefined"!==typeof t&&document.title!==t&&(document.title=nt(t)),it(m.TITLE,e)},it=function(t,e){var n=document.getElementsByTagName(t)[0];if(n){for(var r=n.getAttribute("data-react-helmet"),i=r?r.split(","):[],o=[].concat(i),a=Object.keys(e),s=0;s<a.length;s++){var u=a[s],l=e[u]||"";n.getAttribute(u)!==l&&n.setAttribute(u,l),-1===i.indexOf(u)&&i.push(u);var c=o.indexOf(u);-1!==c&&o.splice(c,1)}for(var h=o.length-1;h>=0;h--)n.removeAttribute(o[h]);i.length===o.length?n.removeAttribute("data-react-helmet"):n.getAttribute("data-react-helmet")!==a.join(",")&&n.setAttribute("data-react-helmet",a.join(","))}},ot=function(t,e){var n=document.head||document.querySelector(m.HEAD),r=n.querySelectorAll(t+"[data-react-helmet]"),i=Array.prototype.slice.call(r),o=[],a=void 0;return e&&e.length&&e.forEach((function(e){var n=document.createElement(t);for(var r in e)if(e.hasOwnProperty(r))if(r===b)n.innerHTML=e.innerHTML;else if(r===v)n.styleSheet?n.styleSheet.cssText=e.cssText:n.appendChild(document.createTextNode(e.cssText));else{var s="undefined"===typeof e[r]?"":e[r];n.setAttribute(r,s)}n.setAttribute("data-react-helmet","true"),i.some((function(t,e){return a=e,n.isEqualNode(t)}))?i.splice(a,1):o.push(n)})),i.forEach((function(t){return t.parentNode.removeChild(t)})),o.forEach((function(t){return n.appendChild(t)})),{oldTags:i,newTags:o}},at=function(t){return Object.keys(t).reduce((function(e,n){var r="undefined"!==typeof t[n]?n+'="'+t[n]+'"':""+n;return e?e+" "+r:r}),"")},st=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce((function(e,n){return e[A[n]||n]=t[n],e}),e)},ut=function(t,e,n){switch(t){case m.TITLE:return{toComponent:function(){return function(t,e,n){var r,i=((r={key:e})["data-react-helmet"]=!0,r),o=st(n,i);return[c.a.createElement(m.TITLE,o,e)]}(0,e.title,e.titleAttributes)},toString:function(){return function(t,e,n,r){var i=at(n),o=nt(e);return i?"<"+t+' data-react-helmet="true" '+i+">"+G(o,r)+"</"+t+">":"<"+t+' data-react-helmet="true">'+G(o,r)+"</"+t+">"}(t,e.title,e.titleAttributes,n)}};case p:case d:return{toComponent:function(){return st(e)},toString:function(){return at(e)}};default:return{toComponent:function(){return function(t,e){return e.map((function(e,n){var r,i=((r={key:n})["data-react-helmet"]=!0,r);return Object.keys(e).forEach((function(t){var n=A[t]||t;if(n===b||n===v){var r=e.innerHTML||e.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[n]=e[t]})),c.a.createElement(t,i)}))}(t,e)},toString:function(){return function(t,e,n){return e.reduce((function(e,r){var i=Object.keys(r).filter((function(t){return!(t===b||t===v)})).reduce((function(t,e){var i="undefined"===typeof r[e]?e:e+'="'+G(r[e],n)+'"';return t?t+" "+i:i}),""),o=r.innerHTML||r.cssText||"",a=-1===D.indexOf(t);return e+"<"+t+' data-react-helmet="true" '+i+(a?"/>":">"+o+"</"+t+">")}),"")}(t,e,n)}}}},lt=function(t){var e=t.baseTag,n=t.bodyAttributes,r=t.encode,i=t.htmlAttributes,o=t.linkTags,a=t.metaTags,s=t.noscriptTags,u=t.scriptTags,l=t.styleTags,c=t.title,h=void 0===c?"":c,f=t.titleAttributes;return{base:ut(m.BASE,e,r),bodyAttributes:ut(p,n,r),htmlAttributes:ut(d,i,r),link:ut(m.LINK,o,r),meta:ut(m.META,a,r),noscript:ut(m.NOSCRIPT,s,r),script:ut(m.SCRIPT,u,r),style:ut(m.STYLE,l,r),title:ut(m.TITLE,{title:h,titleAttributes:f},r)}},ct=function(t){var e,n;return n=e=function(e){function n(){return F(this,n),U(this,e.apply(this,arguments))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),n.prototype.shouldComponentUpdate=function(t){return!u()(this.props,t)},n.prototype.mapNestedChildrenToProps=function(t,e){if(!e)return null;switch(t.type){case m.SCRIPT:case m.NOSCRIPT:return{innerHTML:e};case m.STYLE:return{cssText:e}}throw new Error("<"+t.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},n.prototype.flattenArrayTypeChildren=function(t){var e,n=t.child,r=t.arrayTypeChildren,i=t.newChildProps,o=t.nestedChildren;return j({},r,((e={})[n.type]=[].concat(r[n.type]||[],[j({},i,this.mapNestedChildrenToProps(n,o))]),e))},n.prototype.mapObjectTypeChildren=function(t){var e,n,r=t.child,i=t.newProps,o=t.newChildProps,a=t.nestedChildren;switch(r.type){case m.TITLE:return j({},i,((e={})[r.type]=a,e.titleAttributes=j({},o),e));case m.BODY:return j({},i,{bodyAttributes:j({},o)});case m.HTML:return j({},i,{htmlAttributes:j({},o)})}return j({},i,((n={})[r.type]=j({},o),n))},n.prototype.mapArrayTypeChildrenToProps=function(t,e){var n=j({},e);return Object.keys(t).forEach((function(e){var r;n=j({},n,((r={})[e]=t[e],r))})),n},n.prototype.warnOnInvalidChildren=function(t,e){return!0},n.prototype.mapChildrenToProps=function(t,e){var n=this,r={};return c.a.Children.forEach(t,(function(t){if(t&&t.props){var i=t.props,o=i.children,a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce((function(e,n){return e[N[n]||n]=t[n],e}),e)}(B(i,["children"]));switch(n.warnOnInvalidChildren(t,o),t.type){case m.LINK:case m.META:case m.NOSCRIPT:case m.SCRIPT:case m.STYLE:r=n.flattenArrayTypeChildren({child:t,arrayTypeChildren:r,newChildProps:a,nestedChildren:o});break;default:e=n.mapObjectTypeChildren({child:t,newProps:e,newChildProps:a,nestedChildren:o})}}})),e=this.mapArrayTypeChildrenToProps(r,e)},n.prototype.render=function(){var e=this.props,n=e.children,r=B(e,["children"]),i=j({},r);return n&&(i=this.mapChildrenToProps(n,i)),c.a.createElement(t,i)},V(n,null,[{key:"canUseDOM",set:function(e){t.canUseDOM=e}}]),n}(c.a.Component),e.propTypes={base:i.a.object,bodyAttributes:i.a.object,children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node]),defaultTitle:i.a.string,defer:i.a.bool,encodeSpecialCharacters:i.a.bool,htmlAttributes:i.a.object,link:i.a.arrayOf(i.a.object),meta:i.a.arrayOf(i.a.object),noscript:i.a.arrayOf(i.a.object),onChangeClientState:i.a.func,script:i.a.arrayOf(i.a.object),style:i.a.arrayOf(i.a.object),title:i.a.string,titleAttributes:i.a.object,titleTemplate:i.a.string},e.defaultProps={defer:!0,encodeSpecialCharacters:!0},e.peek=t.peek,e.rewind=function(){var e=t.rewind();return e||(e=lt({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},n}(a()((function(t){return{baseTag:Y([E,C],t),bodyAttributes:z(p,t),defer:q(t,R),encode:q(t,O),htmlAttributes:z(d,t),linkTags:H(m.LINK,[T,E],t),metaTags:H(m.META,[w,y,_,x,S],t),noscriptTags:H(m.NOSCRIPT,[b],t),onChangeClientState:W(t),scriptTags:H(m.SCRIPT,[L,b],t),styleTags:H(m.STYLE,[v],t),title:K(t),titleAttributes:z(g,t)}}),(function(t){tt&&Q(tt),t.defer?tt=J((function(){et(t,(function(){tt=null}))})):(et(t),tt=null)}),lt)((function(){return null})));ct.renderStatic=ct.rewind}).call(this,n(49))},function(t,e,n){"use strict";var r,i=n(0),o=(r=i)&&"object"===typeof r&&"default"in r?r.default:r;function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=!("undefined"===typeof window||!window.document||!window.document.createElement);t.exports=function(t,e,n){if("function"!==typeof t)throw new Error("Expected reducePropsToState to be a function.");if("function"!==typeof e)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!==typeof n&&"function"!==typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!==typeof r)throw new Error("Expected WrappedComponent to be a React component.");var u,l=[];function c(){u=t(l.map((function(t){return t.props}))),h.canUseDOM?e(u):n&&(u=n(u))}var h=function(t){var e,n;function i(){return t.apply(this,arguments)||this}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,i.peek=function(){return u},i.rewind=function(){if(i.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var t=u;return u=void 0,l=[],t};var a=i.prototype;return a.UNSAFE_componentWillMount=function(){l.push(this),c()},a.componentDidUpdate=function(){c()},a.componentWillUnmount=function(){var t=l.indexOf(this);l.splice(t,1),c()},a.render=function(){return o.createElement(r,this.props)},i}(i.PureComponent);return a(h,"displayName","SideEffect("+function(t){return t.displayName||t.name||"Component"}(r)+")"),a(h,"canUseDOM",s),h}}},function(t,e){var n="undefined"!==typeof Element,r="function"===typeof Map,i="function"===typeof Set,o="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;t.exports=function(t,e){try{return function t(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var s,u,l,c;if(Array.isArray(e)){if((s=e.length)!=a.length)return!1;for(u=s;0!==u--;)if(!t(e[u],a[u]))return!1;return!0}if(r&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(c=e.entries();!(u=c.next()).done;)if(!a.has(u.value[0]))return!1;for(c=e.entries();!(u=c.next()).done;)if(!t(u.value[1],a.get(u.value[0])))return!1;return!0}if(i&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(c=e.entries();!(u=c.next()).done;)if(!a.has(u.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((s=e.length)!=a.length)return!1;for(u=s;0!==u--;)if(e[u]!==a[u])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if((s=(l=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(u=s;0!==u--;)if(!Object.prototype.hasOwnProperty.call(a,l[u]))return!1;if(n&&e instanceof Element)return!1;for(u=s;0!==u--;)if(("_owner"!==l[u]&&"__v"!==l[u]&&"__o"!==l[u]||!e.$$typeof)&&!t(e[l[u]],a[l[u]]))return!1;return!0}return e!==e&&a!==a}(t,e)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}}},function(t,e,n){!function(t,e){"use strict";function n(t){return"string"===typeof t||"number"===typeof t}var r=function(){function t(){this._cache={}}var e=t.prototype;return e.set=function(t,e){this._cache[t]=e},e.get=function(t){return this._cache[t]},e.remove=function(t){delete this._cache[t]},e.clear=function(){this._cache={}},e.isValidCacheKey=function(t){return n(t)},t}(),i=r,o=function(){return!0};function a(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(t,r){if("function"===typeof r)throw new Error('[re-reselect] Second argument "options" must be an object. Please use "options.selectorCreator" to provide a custom selectorCreator.');var a={};"function"===typeof t?Object.assign(a,r,{keySelector:t}):Object.assign(a,t);var s=0,u=n.pop(),l=Array.isArray(n[0])?n[0]:[].concat(n);n.push((function(){return s++,u.apply(void 0,arguments)}));var c=a.cacheObject||new i,h=a.selectorCreator||e.createSelector,f=c.isValidCacheKey||o;a.keySelectorCreator&&(a.keySelector=a.keySelectorCreator({keySelector:a.keySelector,inputSelectors:l,resultFunc:u}));var p=function(){var t=a.keySelector.apply(a,arguments);if(f(t)){var e=c.get(t);return void 0===e&&(e=h.apply(void 0,n),c.set(t,e)),e.apply(void 0,arguments)}console.warn('[re-reselect] Invalid cache key "'+t+'" has been returned by keySelector function.')};return p.getMatchingSelector=function(){var t=a.keySelector.apply(a,arguments);return c.get(t)},p.removeMatchingSelector=function(){var t=a.keySelector.apply(a,arguments);c.remove(t)},p.clearCache=function(){c.clear()},p.resultFunc=u,p.dependencies=l,p.cache=c,p.recomputations=function(){return s},p.resetRecomputations=function(){return s=0},p.keySelector=a.keySelector,p}}function s(t){if(void 0===t)throw new Error('Missing the required property "cacheSize".');if(!Number.isInteger(t)||t<=0)throw new Error('The "cacheSize" property must be a positive integer value.')}var u=function(){function t(t){var e=(void 0===t?{}:t).cacheSize;s(e),this._cache={},this._cacheOrdering=[],this._cacheSize=e}var e=t.prototype;return e.set=function(t,e){if(this._cache[t]=e,this._cacheOrdering.push(t),this._cacheOrdering.length>this._cacheSize){var n=this._cacheOrdering[0];this.remove(n)}},e.get=function(t){return this._cache[t]},e.remove=function(t){var e=this._cacheOrdering.indexOf(t);e>-1&&this._cacheOrdering.splice(e,1),delete this._cache[t]},e.clear=function(){this._cache={},this._cacheOrdering=[]},e.isValidCacheKey=function(t){return n(t)},t}(),l=function(){function t(t){var e=(void 0===t?{}:t).cacheSize;s(e),this._cache={},this._cacheOrdering=[],this._cacheSize=e}var e=t.prototype;return e.set=function(t,e){if(this._cache[t]=e,this._registerCacheHit(t),this._cacheOrdering.length>this._cacheSize){var n=this._cacheOrdering[0];this.remove(n)}},e.get=function(t){return this._registerCacheHit(t),this._cache[t]},e.remove=function(t){this._deleteCacheHit(t),delete this._cache[t]},e.clear=function(){this._cache={},this._cacheOrdering=[]},e._registerCacheHit=function(t){this._deleteCacheHit(t),this._cacheOrdering.push(t)},e._deleteCacheHit=function(t){var e=this._cacheOrdering.indexOf(t);e>-1&&this._cacheOrdering.splice(e,1)},e.isValidCacheKey=function(t){return n(t)},t}(),c=function(){function t(){this._cache=new Map}var e=t.prototype;return e.set=function(t,e){this._cache.set(t,e)},e.get=function(t){return this._cache.get(t)},e.remove=function(t){this._cache.delete(t)},e.clear=function(){this._cache.clear()},t}(),h=function(){function t(t){var e=(void 0===t?{}:t).cacheSize;s(e),this._cache=new Map,this._cacheSize=e}var e=t.prototype;return e.set=function(t,e){if(this._cache.set(t,e),this._cache.size>this._cacheSize){var n=this._cache.keys().next().value;this.remove(n)}},e.get=function(t){return this._cache.get(t)},e.remove=function(t){this._cache.delete(t)},e.clear=function(){this._cache.clear()},t}(),f=function(){function t(t){var e=(void 0===t?{}:t).cacheSize;s(e),this._cache=new Map,this._cacheSize=e}var e=t.prototype;return e.set=function(t,e){if(this._cache.set(t,e),this._cache.size>this._cacheSize){var n=this._cache.keys().next().value;this.remove(n)}},e.get=function(t){var e=this._cache.get(t);return this._cache.has(t)&&(this.remove(t),this._cache.set(t,e)),e},e.remove=function(t){this._cache.delete(t)},e.clear=function(){this._cache.clear()},t}();t.FifoCacheObject=u,t.FifoMapCache=h,t.FifoObjectCache=u,t.FlatCacheObject=r,t.FlatMapCache=c,t.FlatObjectCache=r,t.LruCacheObject=f,t.LruMapCache=f,t.LruObjectCache=l,t.createStructuredCachedSelector=function(t){return e.createStructuredSelector(t,a)},t.default=a,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(5))},function(t,e,n){var r=n(65),i=n(498),o=n(105),a=n(499),s=o((function(t){var e=r(t,a);return e.length&&e[0]===t[0]?i(e):[]}));t.exports=s},function(t,e,n){var r=n(37),i=n(500);t.exports=function(t,e){var n=[];if(!t||!t.length)return n;var o=-1,a=[],s=t.length;for(e=r(e,3);++o<s;){var u=t[o];e(u,o,t)&&(n.push(u),a.push(o))}return i(t,a),n}},function(t,e,n){var r=n(287),i=n(118),o=n(105),a=n(128),s=o((function(t,e){return a(t)?r(t,i(e,1,a,!0)):[]}));t.exports=s},function(t,e,n){var r=n(519),i=n(521),o=n(523);t.exports=function(t,e){return null==t?t:r(t,i(e),o)}},function(t,e,n){var r=n(543),i=n(544),o=n(545),a=n(547);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()}},function(t,e,n){t.exports={parse:n(551),stringify:n(554)}},function(t,e,n){var r=n(555),i=n(107),o=n(560),a=n(298),s=n(563),u=Math.max;t.exports=function(t,e,n,l){t=i(t)?t:s(t),n=n&&!l?a(n):0;var c=t.length;return n<0&&(n=u(c+n,0)),o(t)?n<=c&&t.indexOf(e,n)>-1:!!c&&r(t,e,n)>-1}},function(t,e,n){var r=n(207),i=n(302),o=n(85),a=n(25),s=n(637);t.exports=function(t,e){return(a(t)?r:i)(t,s(o(e,3)))}},function(t,e,n){var r=n(300),i=n(308),o=n(203),a=n(25),s=n(107),u=n(204),l=n(301),c=n(206),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||c(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(l(t))return!r(t).length;for(var n in t)if(h.call(t,n))return!1;return!0}},function(t,e,n){var r=n(154),i=n(85),o=n(313),a=n(25);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e,n){var r=n(644),i=n(25);t.exports=function(t,e,n,o){return null==t?[]:(i(e)||(e=null==e?[]:[e]),i(n=o?void 0:n)||(n=null==n?[]:[n]),r(t,e,n))}},function(t,e,n){var r=n(312),i=n(303),o=n(85);t.exports=function(t,e){var n={};return e=o(e,3),i(t,(function(t,i,o){r(n,i,e(t,i,o))})),n}},function(t,e,n){t.exports=function(){"use strict";return function(t){function e(e){if(e)try{t(e+"}")}catch(n){}}return function(n,r,i,o,a,s,u,l,c,h){switch(n){case 1:if(0===c&&64===r.charCodeAt(0))return t(r+";"),"";break;case 2:if(0===l)return r+"/*|*/";break;case 3:switch(l){case 102:case 112:return t(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(e)}}}}()},function(t,e,n){var r,i,o;i=[n(19),n(780)],void 0===(o="function"===typeof(r=function(t,e){return e.__esModule&&e.default&&(e=e.default),t.Proj={},t.Proj._isProj4Obj=function(t){return"undefined"!==typeof t.inverse&&"undefined"!==typeof t.forward},t.Proj.Projection=t.Class.extend({initialize:function(e,n,r){var i=t.Proj._isProj4Obj(e);this._proj=i?e:this._projFromCodeDef(e,n),this.bounds=i?n:r},project:function(e){var n=this._proj.forward([e.lng,e.lat]);return new t.Point(n[0],n[1])},unproject:function(e,n){var r=this._proj.inverse([e.x,e.y]);return new t.LatLng(r[1],r[0],n)},_projFromCodeDef:function(t,n){if(n)e.defs(t,n);else if(void 0===e.defs[t]){var r=t.split(":");if(r.length>3&&(t=r[r.length-3]+":"+r[r.length-1]),void 0===e.defs[t])throw"No projection definition for code "+t}return e(t)}}),t.Proj.CRS=t.Class.extend({includes:t.CRS,options:{transformation:new t.Transformation(1,0,-1,0)},initialize:function(e,n,r){var i,o,a,s;if(t.Proj._isProj4Obj(e)?(i=(o=e).srsCode,s=n||{},this.projection=new t.Proj.Projection(o,s.bounds)):(i=e,a=n,s=r||{},this.projection=new t.Proj.Projection(i,a,s.bounds)),t.Util.setOptions(this,s),this.code=i,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new t.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var u=this.options.resolutions.length-1;u>=0;u--)this.options.resolutions[u]&&(this._scales[u]=1/this.options.resolutions[u])}this.infinite=!this.options.bounds},scale:function(t){var e,n=Math.floor(t);return t===n?this._scales[t]:(e=this._scales[n])+(this._scales[n+1]-e)*(t-n)},zoom:function(t){var e,n,r=this._closestElement(this._scales,t),i=this._scales.indexOf(r);return t===r?i:void 0===r?-1/0:(n=i+1,void 0===(e=this._scales[n])?1/0:(t-r)/(e-r)+i)},distance:t.CRS.Earth.distance,R:t.CRS.Earth.R,_closestElement:function(t,e){for(var n,r=t.length;r--;)t[r]<=e&&(void 0===n||n<t[r])&&(n=t[r]);return n}}),t.Proj.GeoJSON=t.GeoJSON.extend({initialize:function(e,n){this._callLevel=0,t.GeoJSON.prototype.initialize.call(this,e,n)},addData:function(e){var n;e&&(e.crs&&"name"===e.crs.type?n=new t.Proj.CRS(e.crs.properties.name):e.crs&&e.crs.type&&(n=new t.Proj.CRS(e.crs.type+":"+e.crs.properties.code)),void 0!==n&&(this.options.coordsToLatLng=function(e){var r=t.point(e[0],e[1]);return n.projection.unproject(r)})),this._callLevel++;try{t.GeoJSON.prototype.addData.call(this,e)}finally{this._callLevel--,0===this._callLevel&&delete this.options.coordsToLatLng}}}),t.Proj.geoJson=function(e,n){return new t.Proj.GeoJSON(e,n)},t.Proj.ImageOverlay=t.ImageOverlay.extend({initialize:function(e,n,r){t.ImageOverlay.prototype.initialize.call(this,e,null,r),this._projectedBounds=n},_animateZoom:function(e){var n=this._map.getZoomScale(e.zoom),r=t.point(this._projectedBounds.min.x,this._projectedBounds.max.y),i=this._projectedToNewLayerPoint(r,e.zoom,e.center);t.DomUtil.setTransform(this._image,i,n)},_reset:function(){var e=this._map.getZoom(),n=this._map.getPixelOrigin(),r=t.bounds(this._transform(this._projectedBounds.min,e)._subtract(n),this._transform(this._projectedBounds.max,e)._subtract(n)),i=r.getSize();t.DomUtil.setPosition(this._image,r.min),this._image.style.width=i.x+"px",this._image.style.height=i.y+"px"},_projectedToNewLayerPoint:function(t,e,n){var r=this._map.getSize()._divideBy(2),i=this._map.project(n,e)._subtract(r)._round().add(this._map._getMapPanePos());return this._transform(t,e)._subtract(i)},_transform:function(t,e){var n=this._map.options.crs,r=n.transformation,i=n.scale(e);return r.transform(t,i)}}),t.Proj.imageOverlay=function(e,n,r){return new t.Proj.ImageOverlay(e,n,r)},t.Proj})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r=n(193),i=n(151),o=Math.max;t.exports=function(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var s=null==n?0:i(n);return s<0&&(s=o(a+s,0)),r(t,e,s)}},function(t,e,n){var r,i,o;i=[],void 0===(o="function"===typeof(r=function(){var t={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},e={"*":!0};function n(t){return encodeURI(t).replace(/%25[0-9][0-9]/g,(function(t){return"%"+t.substring(3)}))}function r(t){return t=t.replace(/%../g,""),encodeURIComponent(t)===t}function i(i){var o="";t[i.charAt(0)]&&(o=i.charAt(0),i=i.substring(1));var a="",s="",u=!0,l=!1,c=!1;"+"==o?u=!1:"."==o?(s=".",a="."):"/"==o?(s="/",a="/"):"#"==o?(s="#",u=!1):";"==o?(s=";",a=";",l=!0,c=!0):"?"==o?(s="?",a="&",l=!0):"&"==o&&(s="&",a="&",l=!0);for(var h=[],f=i.split(","),p=[],d={},g=0;g<f.length;g++){var m=f[g],y=null;if(-1!=m.indexOf(":")){var v=m.split(":");m=v[0],y=parseInt(v[1])}for(var E={};e[m.charAt(m.length-1)];)E[m.charAt(m.length-1)]=!0,m=m.substring(0,m.length-1);var _={truncate:y,name:m,suffices:E};p.push(_),d[m]=_,h.push(m)}return{varNames:h,prefix:s,substitution:function(t){for(var e="",r=0,i=0;i<p.length;i++){var o=p[i],h=t(o.name);if(null==h||Array.isArray(h)&&0==h.length||"object"==typeof h&&0==Object.keys(h).length)r++;else if(e+=i==r?s:a||",",Array.isArray(h)){l&&(e+=o.name+"=");for(var f=0;f<h.length;f++)f>0&&(e+=o.suffices["*"]&&a||",",o.suffices["*"]&&l&&(e+=o.name+"=")),e+=u?encodeURIComponent(h[f]).replace(/!/g,"%21"):n(h[f])}else if("object"==typeof h){l&&!o.suffices["*"]&&(e+=o.name+"=");var d=!0;for(var g in h)d||(e+=o.suffices["*"]&&a||","),d=!1,e+=u?encodeURIComponent(g).replace(/!/g,"%21"):n(g),e+=o.suffices["*"]?"=":",",e+=u?encodeURIComponent(h[g]).replace(/!/g,"%21"):n(h[g])}else l&&(e+=o.name,c&&""==h||(e+="=")),null!=o.truncate&&(h=h.substring(0,o.truncate)),e+=u?encodeURIComponent(h).replace(/!/g,"%21"):n(h)}return e},unSubstitution:function(t,e,n){if(s&&(t=t.substring(s.length)),1==p.length&&p[0].suffices["*"]){for(var i=(w=p[0]).name,o=w.suffices["*"]?t.split(a||","):[t],c=u&&-1!=t.indexOf("="),h=1;h<o.length;h++)t=o[h],c&&-1==t.indexOf("=")&&(o[h-1]+=(a||",")+t,o.splice(h,1),h--);for(h=0;h<o.length;h++)t=o[h],u&&-1!=t.indexOf("=")&&(c=!0),1==(v=t.split(",")).length?o[h]=v[0]:o[h]=v;if(l||c){for(var f=e[i]||{},g=0;g<o.length;g++){var m=t;if(!l||m){if("string"==typeof o[g]){var y=(t=o[g]).split("=",1)[0];if(t=t.substring(y.length+1),u){if(n&&!r(t))return;t=decodeURIComponent(t)}m=t}else{if(y=(t=o[g][0]).split("=",1)[0],t=t.substring(y.length+1),u){if(n&&!r(t))return;t=decodeURIComponent(t)}o[g][0]=t,m=o[g]}if(u){if(n&&!r(y))return;y=decodeURIComponent(y)}void 0!==f[y]?Array.isArray(f[y])?f[y].push(m):f[y]=[f[y],m]:f[y]=m}}1==Object.keys(f).length&&void 0!==f[i]?e[i]=f[i]:e[i]=f}else{if(u)for(g=0;g<o.length;g++){var v=o[g];if(Array.isArray(v))for(var E=0;E<v.length;E++){if(n&&!r(v[E]))return;v[E]=decodeURIComponent(v[E])}else{if(n&&!r(v))return;o[g]=decodeURIComponent(v)}}void 0!==e[i]?Array.isArray(e[i])?e[i]=e[i].concat(o):e[i]=[e[i]].concat(o):1!=o.length||w.suffices["*"]?e[i]=o:e[i]=o[0]}}else{o=1==p.length?[t]:t.split(a||",");var _={};for(h=0;h<o.length;h++){for(var b=0;b<p.length-1&&b<h&&!p[b].suffices["*"];b++);if(b!=h){for(var S=p.length-1;S>0&&p.length-S<o.length-h&&!p[S].suffices["*"];S--);p.length-S!=o.length-h?_[h]=b:_[h]=S}else _[h]=h}for(h=0;h<o.length;h++)if((t=o[h])||!l){if(v=t.split(","),c=!1,l){i=(t=v[0]).split("=",1)[0],t=t.substring(i.length+1),v[0]=t;var w=d[i]||p[0]}else i=(w=p[_[h]]).name;for(g=0;g<v.length;g++)if(u){if(n&&!r(v[g]))return;v[g]=decodeURIComponent(v[g])}(l||w.suffices["*"])&&void 0!==e[i]?Array.isArray(e[i])?e[i]=e[i].concat(v):e[i]=[e[i]].concat(v):1!=v.length||w.suffices["*"]?e[i]=v:e[i]=v[0]}}return 1}}}function o(t){if(!(this instanceof o))return new o(t);for(var e=t.split("{"),n=[e.shift()],r=[],a=[],s=[],u=[];e.length>0;){var l=e.shift(),c=l.split("}")[0],h=l.substring(c.length+1),f=i(c);a.push(f.substitution),s.push(f.unSubstitution),r.push(f.prefix),n.push(h),u=u.concat(f.varNames)}this.fill=function(t){if(t&&"function"!==typeof t){var e=t;t=function(t){return e[t]}}for(var r=n[0],i=0;i<a.length;i++)r+=(0,a[i])(t),r+=n[i+1];return r},this.fromUri=function(t,e){e=e||{};for(var i={},o=0;o<n.length;o++){var a=n[o];if(t.substring(0,a.length)!==a)return;if(t=t.substring(a.length),o>=n.length-1){if(""==t)break;return}var u=r[o];if(!u||t.substring(0,u.length)===u){for(var l=n[o+1],c=o;;){if(c==n.length-2){var h=t.substring(t.length-l.length);if(h!==l)return;var f=t.substring(0,t.length-l.length);t=h}else if(l){var p=t.indexOf(l);f=t.substring(0,p),t=t.substring(p)}else if(r[c+1])-1===(p=t.indexOf(r[c+1]))&&(p=t.length),f=t.substring(0,p),t=t.substring(p);else{if(n.length>c+2){c++,l=n[c+1];continue}f=t,t=""}break}if(!s[o](f,i,e.strict))return}}return i},this.varNames=u,this.template=t}return o.prototype={toString:function(){return this.template},fillFromObject:function(t){return this.fill(t)},test:function(t,e){return!!this.fromUri(t,e)}},o})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){"use strict";var r=n(177),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(d){var i=p(n);i&&i!==d&&t(e,i,r)}var a=c(n);h&&(a=a.concat(h(n)));for(var s=u(e),g=u(n),m=0;m<a.length;++m){var y=a[m];if(!o[y]&&(!r||!r[y])&&(!g||!g[y])&&(!s||!s[y])){var v=f(n,y);try{l(e,y,v)}catch(E){}}}}return e}},function(t,e,n){"use strict";(function(t){var n=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i="undefined"!==typeof t&&t.Math===Math?t:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),o="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],s="undefined"!==typeof MutationObserver,u=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,i=0;function a(){n&&(n=!1,t()),r&&u()}function s(){o(a)}function u(){var t=Date.now();if(n){if(t-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,e);i=t}return u}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;a.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),l=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},c=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||i},h=y(0,0,0,0);function f(t){return parseFloat(t)||0}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+f(t["border-"+n+"-width"])}),0)}function d(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return h;var r=c(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=t["padding-"+i];e[i]=f(o)}return e}(r),o=i.left+i.right,a=i.top+i.bottom,s=f(r.width),u=f(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==e&&(s-=p(r,"left","right")+o),Math.round(u+a)!==n&&(u-=p(r,"top","bottom")+a)),!function(t){return t===c(t).document.documentElement}(t)){var l=Math.round(s+o)-e,d=Math.round(u+a)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(d)&&(u-=d)}return y(i.left,i.top,s,u)}var g="undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof c(t).SVGGraphicsElement}:function(t){return t instanceof c(t).SVGElement&&"function"===typeof t.getBBox};function m(t){return r?g(t)?function(t){var e=t.getBBox();return y(0,0,e.width,e.height)}(t):d(t):h}function y(t,e,n,r){return{x:t,y:e,width:n,height:r}}var v=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=m(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),E=function(t,e){var n=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return l(a,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),a}(e);l(this,{target:t,contentRect:n})},_=function(){function t(t,e,r){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=r}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof c(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new v(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof c(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new E(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),b="undefined"!==typeof WeakMap?new WeakMap:new n,S=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),r=new _(e,n,this);b.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){S.prototype[t]=function(){var e;return(e=b.get(this))[t].apply(e,arguments)}}));var w="undefined"!==typeof i.ResizeObserver?i.ResizeObserver:S;e.a=w}).call(this,n(49))},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(49))},,function(t,e,n){var r=n(687)(n(234));t.exports=r},function(t,e,n){var r=n(773);t.exports=function(t,e,n){return null==t?t:r(t,e,n)}},function(t,e,n){var r=n(227),i=n(108),o=n(345),a=n(38);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e,n){var r=n(776),i=n(38);t.exports=function(t,e,n,o){return null==t?[]:(i(e)||(e=null==e?[]:[e]),i(n=o?void 0:n)||(n=null==n?[]:[n]),r(t,e,n))}},function(t,e,n){var r=n(344),i=n(343),o=n(108);t.exports=function(t,e){var n={};return e=o(e,3),i(t,(function(t,i,o){r(n,i,e(t,i,o))})),n}},function(t,e,n){"use strict";var r=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}},i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var o=function(t){for(var e,n=t.length,r=n^n,i=0;n>=4;)e=1540483477*(65535&(e=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+((1540483477*(e>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(e=1540483477*(65535&(e^=e>>>24))+((1540483477*(e>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:r^=(255&t.charCodeAt(i+2))<<16;case 2:r^=(255&t.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(i)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),((r^=r>>>15)>>>0).toString(36)};var a=function(t){function e(t,e,r){var i=e.trim().split(d);e=i;var o=i.length,a=t.length;switch(a){case 0:case 1:var s=0;for(t=0===a?"":t[0]+" ";s<o;++s)e[s]=n(t,e[s],r).trim();break;default:var u=s=0;for(e=[];s<o;++s)for(var l=0;l<a;++l)e[u++]=n(t[l]+" ",i[s],r).trim()}return e}function n(t,e,n){var r=e.charCodeAt(0);switch(33>r&&(r=(e=e.trim()).charCodeAt(0)),r){case 38:return e.replace(g,"$1"+t.trim());case 58:return t.trim()+e.replace(g,"$1"+t.trim());default:if(0<1*n&&0<e.indexOf("\f"))return e.replace(g,(58===t.charCodeAt(0)?"":"$1")+t.trim())}return t+e}function r(t,e,n,o){var a=t+";",s=2*e+3*n+4*o;if(944===s){t=a.indexOf(":",9)+1;var u=a.substring(t,a.length-1).trim();return u=a.substring(0,t).trim()+u+";",1===M||2===M&&i(u,1)?"-webkit-"+u+u:u}if(0===M||2===M&&!i(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(T,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(u=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+u+a;case 1005:return f.test(a)?a.replace(h,":-webkit-")+a.replace(h,":-moz-")+a:a;case 1e3:switch(e=(u=a.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(e)){case 226:u=a.replace(E,"tb");break;case 232:u=a.replace(E,"tb-rl");break;case 220:u=a.replace(E,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+u+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(e=(a=t).length-10,s=(u=(33===a.charCodeAt(e)?a.substring(0,e):a).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:a=a.replace(u,"-webkit-"+u)+";"+a;break;case 207:case 102:a=a.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+a.replace(u,"-webkit-"+u)+";"+a.replace(u,"-ms-"+u+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return u=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+u+"-ms-flex-"+u+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(S,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(S,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===x.test(t))return 115===(u=t.substring(t.indexOf(":")+1)).charCodeAt(0)?r(t.replace("stretch","fill-available"),e,n,o).replace(":fill-available",":stretch"):a.replace(u,"-webkit-"+u)+a.replace(u,"-moz-"+u.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===n+o&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+a}return a}function i(t,e){var n=t.indexOf(1===e?":":"{"),r=t.substring(0,3!==e?n:10);return n=t.substring(n+1,t.length-1),I(2!==e?r:r.replace(w,"$1"),n,e)}function o(t,e){var n=r(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return n!==e+";"?n.replace(b," or ($1)").substring(4):"("+e+")"}function a(t,e,n,r,i,o,a,s,l,c){for(var h,f=0,p=e;f<P;++f)switch(h=O[f].call(u,t,p,n,r,i,o,a,s,l,c)){case void 0:case!1:case!0:case null:break;default:p=h}if(p!==e)return p}function s(t){return void 0!==(t=t.prefix)&&(I=null,t?"function"!==typeof t?M=1:(M=2,I=t):M=0),s}function u(t,n){var s=t;if(33>s.charCodeAt(0)&&(s=s.trim()),s=[s],0<P){var u=a(-1,n,s,s,C,L,0,0,0,0);void 0!==u&&"string"===typeof u&&(n=u)}var h=function t(n,s,u,h,f){for(var p,d,g,E,b,S=0,w=0,x=0,T=0,O=0,I=0,D=g=p=0,k=0,F=0,V=0,j=0,B=u.length,U=B-1,G="",K="",W="",z="";k<B;){if(d=u.charCodeAt(k),k===U&&0!==w+T+x+S&&(0!==w&&(d=47===w?10:47),T=x=S=0,B++,U++),0===w+T+x+S){if(k===U&&(0<F&&(G=G.replace(c,"")),0<G.trim().length)){switch(d){case 32:case 9:case 59:case 13:case 10:break;default:G+=u.charAt(k)}d=59}switch(d){case 123:for(p=(G=G.trim()).charCodeAt(0),g=1,j=++k;k<B;){switch(d=u.charCodeAt(k)){case 123:g++;break;case 125:g--;break;case 47:switch(d=u.charCodeAt(k+1)){case 42:case 47:t:{for(D=k+1;D<U;++D)switch(u.charCodeAt(D)){case 47:if(42===d&&42===u.charCodeAt(D-1)&&k+2!==D){k=D+1;break t}break;case 10:if(47===d){k=D+1;break t}}k=D}}break;case 91:d++;case 40:d++;case 34:case 39:for(;k++<U&&u.charCodeAt(k)!==d;);}if(0===g)break;k++}switch(g=u.substring(j,k),0===p&&(p=(G=G.replace(l,"").trim()).charCodeAt(0)),p){case 64:switch(0<F&&(G=G.replace(c,"")),d=G.charCodeAt(1)){case 100:case 109:case 115:case 45:F=s;break;default:F=R}if(j=(g=t(s,F,g,d,f+1)).length,0<P&&(b=a(3,g,F=e(R,G,V),s,C,L,j,d,f,h),G=F.join(""),void 0!==b&&0===(j=(g=b.trim()).length)&&(d=0,g="")),0<j)switch(d){case 115:G=G.replace(_,o);case 100:case 109:case 45:g=G+"{"+g+"}";break;case 107:g=(G=G.replace(m,"$1 $2"))+"{"+g+"}",g=1===M||2===M&&i("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=G+g,112===h&&(K+=g,g="")}else g="";break;default:g=t(s,e(s,G,V),g,h,f+1)}W+=g,g=V=F=D=p=0,G="",d=u.charCodeAt(++k);break;case 125:case 59:if(1<(j=(G=(0<F?G.replace(c,""):G).trim()).length))switch(0===D&&(p=G.charCodeAt(0),45===p||96<p&&123>p)&&(j=(G=G.replace(" ",":")).length),0<P&&void 0!==(b=a(1,G,s,n,C,L,K.length,h,f,h))&&0===(j=(G=b.trim()).length)&&(G="\0\0"),p=G.charCodeAt(0),d=G.charCodeAt(1),p){case 0:break;case 64:if(105===d||99===d){z+=G+u.charAt(k);break}default:58!==G.charCodeAt(j-1)&&(K+=r(G,p,d,G.charCodeAt(2)))}V=F=D=p=0,G="",d=u.charCodeAt(++k)}}switch(d){case 13:case 10:47===w?w=0:0===1+p&&107!==h&&0<G.length&&(F=1,G+="\0"),0<P*N&&a(0,G,s,n,C,L,K.length,h,f,h),L=1,C++;break;case 59:case 125:if(0===w+T+x+S){L++;break}default:switch(L++,E=u.charAt(k),d){case 9:case 32:if(0===T+S+w)switch(O){case 44:case 58:case 9:case 32:E="";break;default:32!==d&&(E=" ")}break;case 0:E="\\0";break;case 12:E="\\f";break;case 11:E="\\v";break;case 38:0===T+w+S&&(F=V=1,E="\f"+E);break;case 108:if(0===T+w+S+A&&0<D)switch(k-D){case 2:112===O&&58===u.charCodeAt(k-3)&&(A=O);case 8:111===I&&(A=I)}break;case 58:0===T+w+S&&(D=k);break;case 44:0===w+x+T+S&&(F=1,E+="\r");break;case 34:case 39:0===w&&(T=T===d?0:0===T?d:T);break;case 91:0===T+w+x&&S++;break;case 93:0===T+w+x&&S--;break;case 41:0===T+w+S&&x--;break;case 40:if(0===T+w+S){if(0===p)switch(2*O+3*I){case 533:break;default:p=1}x++}break;case 64:0===w+x+T+S+D+g&&(g=1);break;case 42:case 47:if(!(0<T+S+x))switch(w){case 0:switch(2*d+3*u.charCodeAt(k+1)){case 235:w=47;break;case 220:j=k,w=42}break;case 42:47===d&&42===O&&j+2!==k&&(33===u.charCodeAt(j+2)&&(K+=u.substring(j,k+1)),E="",w=0)}}0===w&&(G+=E)}I=O,O=d,k++}if(0<(j=K.length)){if(F=s,0<P&&(void 0!==(b=a(2,K,F,n,C,L,j,h,f,h))&&0===(K=b).length))return z+K+W;if(K=F.join(",")+"{"+K+"}",0!==M*A){switch(2!==M||i(K,2)||(A=0),A){case 111:K=K.replace(v,":-moz-$1")+K;break;case 112:K=K.replace(y,"::-webkit-input-$1")+K.replace(y,"::-moz-$1")+K.replace(y,":-ms-input-$1")+K}A=0}}return z+K+W}(R,s,n,0,0);return 0<P&&(void 0!==(u=a(-2,h,s,s,C,L,h.length,0,0,0))&&(h=u)),"",A=0,L=C=1,h}var l=/^\0+/g,c=/[\0\r\f]/g,h=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,d=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,v=/:(read-only)/g,E=/[svh]\w+-[tblr]{2}/,_=/\(\s*(.*)\s*\)/g,b=/([\s\S]*?);/g,S=/-self|flex-/g,w=/[^]*?(:[rp][el]a[\w-]+)[^]*/,x=/stretch|:\s*\w+\-(?:conte|avail)/,T=/([^-])(image-set\()/,L=1,C=1,A=0,M=1,R=[],O=[],P=0,I=null,N=0;return u.use=function t(e){switch(e){case void 0:case null:P=O.length=0;break;default:switch(e.constructor){case Array:for(var n=0,r=e.length;n<r;++n)t(e[n]);break;case Function:O[P++]=e;break;case Boolean:N=0|!!e}}return t},u.set=s,void 0!==t&&s(t),u},s=n(370),u=n.n(s),l=/[A-Z]|^ms/g,c=r((function(t){return t.replace(l,"-$&").toLowerCase()})),h=function(t,e){return null==e||"boolean"===typeof e?"":1===i[t]||45===t.charCodeAt(1)||isNaN(e)||0===e?e:e+"px"},f=function t(e){for(var n=e.length,r=0,i="";r<n;r++){var o=e[r];if(null!=o){var a=void 0;switch(typeof o){case"boolean":break;case"function":0,a=t([o()]);break;case"object":if(Array.isArray(o))a=t(o);else for(var s in a="",o)o[s]&&s&&(a&&(a+=" "),a+=s);break;default:a=o}a&&(i&&(i+=" "),i+=a)}}return i},p="undefined"!==typeof document;function d(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key||""),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),(void 0!==t.container?t.container:document.head).appendChild(e),e}var g=function(){function t(t){this.isSpeedy=!0,this.tags=[],this.ctr=0,this.opts=t}var e=t.prototype;return e.inject=function(){if(this.injected)throw new Error("already injected!");this.tags[0]=d(this.opts),this.injected=!0},e.speedy=function(t){if(0!==this.ctr)throw new Error("cannot change speedy now");this.isSpeedy=!!t},e.insert=function(t,e){if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(this.tags[this.tags.length-1]);try{n.insertRule(t,n.cssRules.length)}catch(i){0}}else{var r=d(this.opts);this.tags.push(r),r.appendChild(document.createTextNode(t+(e||"")))}this.ctr++,this.ctr%65e3===0&&this.tags.push(d(this.opts))},e.flush=function(){this.tags.forEach((function(t){return t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0,this.injected=!1},t}();e.a=function(t,e){if(void 0!==t.__SECRET_EMOTION__)return t.__SECRET_EMOTION__;void 0===e&&(e={});var n,r,i=e.key||"css",s=u()((function(t){n+=t,p&&d.insert(t,y)}));void 0!==e.prefix&&(r={prefix:e.prefix});var l={registered:{},inserted:{},nonce:e.nonce,key:i},d=new g(e);p&&d.inject();var m=new a(r);m.use(e.stylisPlugins)(s);var y="";function v(t,e){if(null==t)return"";switch(typeof t){case"boolean":return"";case"function":if(void 0!==t.__emotion_styles){var n=t.toString();return n}return v.call(this,void 0===this?t():t(this.mergedProps,this.context),e);case"object":return S.call(this,t);default:var r=l.registered[t];return!1===e&&void 0!==r?r:t}}var E,_,b=new WeakMap;function S(t){if(b.has(t))return b.get(t);var e="";return Array.isArray(t)?t.forEach((function(t){e+=v.call(this,t,!1)}),this):Object.keys(t).forEach((function(n){"object"!==typeof t[n]?void 0!==l.registered[t[n]]?e+=n+"{"+l.registered[t[n]]+"}":e+=c(n)+":"+h(n,t[n])+";":Array.isArray(t[n])&&"string"===typeof t[n][0]&&void 0===l.registered[t[n][0]]?t[n].forEach((function(t){e+=c(n)+":"+h(n,t)+";"})):e+=n+"{"+v.call(this,t[n],!1)+"}"}),this),b.set(t,e),e}var w=/label:\s*([^\s;\n{]+)\s*;/g,x=function(t,e){return o(t+e)+e},T=function(t){var e=!0,n="",r="";null==t||void 0===t.raw?(e=!1,n+=v.call(this,t,!1)):n+=t[0];for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return o.forEach((function(r,i){n+=v.call(this,r,46===n.charCodeAt(n.length-1)),!0===e&&void 0!==t[i+1]&&(n+=t[i+1])}),this),_=n,n=n.replace(w,(function(t,e){return r+="-"+e,""})),E=x(n,r),n};function L(t,e){void 0===l.inserted[E]&&(n="",m(t,e),l.inserted[E]=n)}var C=function(){var t=T.apply(this,arguments),e=i+"-"+E;return void 0===l.registered[e]&&(l.registered[e]=_),L("."+e,t),e};function A(t,e){var n="";return e.split(" ").forEach((function(e){void 0!==l.registered[e]?t.push(e):n+=e+" "})),n}function M(t,e){var n=[],r=A(n,t);return n.length<2?t:r+C(n,e)}function R(t){l.inserted[t]=!0}if(p){var O=document.querySelectorAll("[data-emotion-"+i+"]");Array.prototype.forEach.call(O,(function(t){d.tags[0].parentNode.insertBefore(t,d.tags[0]),t.getAttribute("data-emotion-"+i).split(" ").forEach(R)}))}var P={flush:function(){p&&(d.flush(),d.inject()),l.inserted={},l.registered={}},hydrate:function(t){t.forEach(R)},cx:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return M(f(e))},merge:M,getRegisteredStyles:A,injectGlobal:function(){var t=T.apply(this,arguments);L("",t)},keyframes:function(){var t=T.apply(this,arguments),e="animation-"+E;return L("","@keyframes "+e+"{"+t+"}"),e},css:C,sheet:d,caches:l};return t.__SECRET_EMOTION__=P,P}},,,function(t,e,n){"use strict";var r=n(69),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function _(t,e,n){this.props=t,this.context=e,this.refs=E,this.updater=n||v}function b(){}function S(t,e,n){this.props=t,this.context=e,this.refs=E,this.updater=n||v}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(y(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=_.prototype;var w=S.prototype=new b;w.constructor=S,r(w,_.prototype),w.isPureReactComponent=!0;var x={current:null},T=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};function C(t,e,n){var r,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)T.call(e,r)&&!L.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:x.current}}function A(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var M=/\/+/g,R=[];function O(t,e,n,r){if(R.length){var i=R.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function P(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>R.length&&R.push(t)}function I(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case a:u=!0}}if(u)return r(i,e,""===n?"."+N(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+N(s=e[l],l);u+=t(s,c,r,i)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=m&&e[m]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=t(s=s.value,c=n+N(s,l++),r,i);else if("object"===s)throw r=""+e,Error(y(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,n)}function N(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function D(t,e){t.func.call(t.context,e,t.count++)}function k(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?F(t,r,n,(function(t){return t})):null!=t&&(A(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(M,"$&/")+"/")+n)),r.push(t))}function F(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(M,"$&/")+"/"),I(t,k,e=O(e,o,r,i)),P(e)}var V={current:null};function j(){var t=V.current;if(null===t)throw Error(y(321));return t}var B={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return F(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;I(t,D,e=O(null,null,e,n)),P(e)},count:function(t){return I(t,(function(){return null}),null)},toArray:function(t){var e=[];return F(t,e,null,(function(t){return t})),e},only:function(t){if(!A(t))throw Error(y(143));return t}},e.Component=_,e.Fragment=s,e.Profiler=l,e.PureComponent=S,e.StrictMode=u,e.Suspense=p,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(y(267,t));var i=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=x.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)T.call(e,c)&&!L.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:o,type:t.type,key:a,ref:s,props:i,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},e.createElement=C,e.createFactory=function(t){var e=C.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:f,render:t}},e.isValidElement=A,e.lazy=function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return j().useCallback(t,e)},e.useContext=function(t,e){return j().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return j().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return j().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return j().useLayoutEffect(t,e)},e.useMemo=function(t,e){return j().useMemo(t,e)},e.useReducer=function(t,e,n){return j().useReducer(t,e,n)},e.useRef=function(t){return j().useRef(t)},e.useState=function(t){return j().useState(t)},e.version="16.13.1"},function(t,e,n){"use strict";var r=n(0),i=n(69),o=n(388);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(t,e,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var u=!1,l=null,c=!1,h=null,f={onError:function(t){u=!0,l=t}};function p(t,e,n,r,i,o,a,c,h){u=!1,l=null,s.apply(f,arguments)}var d=null,g=null,m=null;function y(t,e,n){var r=t.type||"unknown-event";t.currentTarget=m(n),function(t,e,n,r,i,o,s,f,d){if(p.apply(this,arguments),u){if(!u)throw Error(a(198));var g=l;u=!1,l=null,c||(c=!0,h=g)}}(r,e,void 0,t),t.currentTarget=null}var v=null,E={};function _(){if(v)for(var t in E){var e=E[t],n=v.indexOf(t);if(!(-1<n))throw Error(a(96,t));if(!S[n]){if(!e.extractEvents)throw Error(a(97,t));for(var r in S[n]=e,n=e.eventTypes){var i=void 0,o=n[r],s=e,u=r;if(w.hasOwnProperty(u))throw Error(a(99,u));w[u]=o;var l=o.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&b(l[i],s,u);i=!0}else o.registrationName?(b(o.registrationName,s,u),i=!0):i=!1;if(!i)throw Error(a(98,r,t))}}}}function b(t,e,n){if(x[t])throw Error(a(100,t));x[t]=e,T[t]=e.eventTypes[n].dependencies}var S=[],w={},x={},T={};function L(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!E.hasOwnProperty(e)||E[e]!==r){if(E[e])throw Error(a(102,e));E[e]=r,n=!0}}n&&_()}var C=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),A=null,M=null,R=null;function O(t){if(t=g(t)){if("function"!==typeof A)throw Error(a(280));var e=t.stateNode;e&&(e=d(e),A(t.stateNode,t.type,e))}}function P(t){M?R?R.push(t):R=[t]:M=t}function I(){if(M){var t=M,e=R;if(R=M=null,O(t),e)for(t=0;t<e.length;t++)O(e[t])}}function N(t,e){return t(e)}function D(t,e,n,r,i){return t(e,n,r,i)}function k(){}var F=N,V=!1,j=!1;function B(){null===M&&null===R||(k(),I())}function U(t,e,n){if(j)return t(e,n);j=!0;try{return F(t,e,n)}finally{j=!1,B()}}var G=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,K=Object.prototype.hasOwnProperty,W={},z={};function Y(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){H[t]=new Y(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];H[e]=new Y(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){H[t]=new Y(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){H[t]=new Y(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){H[t]=new Y(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){H[t]=new Y(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){H[t]=new Y(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){H[t]=new Y(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){H[t]=new Y(t,5,!1,t.toLowerCase(),null,!1)}));var q=/[\-:]([a-z])/g;function X(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(q,X);H[e]=new Y(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(q,X);H[e]=new Y(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(q,X);H[e]=new Y(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){H[t]=new Y(t,1,!1,t.toLowerCase(),null,!1)})),H.xlinkHref=new Y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){H[t]=new Y(t,1,!1,t.toLowerCase(),null,!0)}));var Z=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(t,e,n,r){var i=H.hasOwnProperty(e)?H[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!K.call(z,t)||!K.call(W,t)&&(G.test(t)?z[t]=!0:(W[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}Z.hasOwnProperty("ReactCurrentDispatcher")||(Z.ReactCurrentDispatcher={current:null}),Z.hasOwnProperty("ReactCurrentBatchConfig")||(Z.ReactCurrentBatchConfig={suspense:null});var Q=/^(.*)[\\\/]/,$="function"===typeof Symbol&&Symbol.for,tt=$?Symbol.for("react.element"):60103,et=$?Symbol.for("react.portal"):60106,nt=$?Symbol.for("react.fragment"):60107,rt=$?Symbol.for("react.strict_mode"):60108,it=$?Symbol.for("react.profiler"):60114,ot=$?Symbol.for("react.provider"):60109,at=$?Symbol.for("react.context"):60110,st=$?Symbol.for("react.concurrent_mode"):60111,ut=$?Symbol.for("react.forward_ref"):60112,lt=$?Symbol.for("react.suspense"):60113,ct=$?Symbol.for("react.suspense_list"):60120,ht=$?Symbol.for("react.memo"):60115,ft=$?Symbol.for("react.lazy"):60116,pt=$?Symbol.for("react.block"):60121,dt="function"===typeof Symbol&&Symbol.iterator;function gt(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=dt&&t[dt]||t["@@iterator"])?t:null}function mt(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case nt:return"Fragment";case et:return"Portal";case it:return"Profiler";case rt:return"StrictMode";case lt:return"Suspense";case ct:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case at:return"Context.Consumer";case ot:return"Context.Provider";case ut:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ht:return mt(t.type);case pt:return mt(t.render);case ft:if(t=1===t._status?t._result:null)return mt(t)}return null}function yt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=mt(t.type);n=null,r&&(n=mt(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(Q,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}function vt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Et(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function _t(t){t._valueTracker||(t._valueTracker=function(t){var e=Et(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function bt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Et(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function St(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function wt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=vt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function xt(t,e){null!=(e=e.checked)&&J(t,"checked",e,!1)}function Tt(t,e){xt(t,e);var n=vt(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Ct(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ct(t,e.type,vt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Lt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Ct(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function At(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function Mt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ot(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:vt(n)}}function Pt(t,e){var n=vt(e.value),r=vt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function It(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var Nt="http://www.w3.org/1999/xhtml",Dt="http://www.w3.org/2000/svg";function kt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ft(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?kt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Vt,jt=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==Dt||"innerHTML"in t)t.innerHTML=e;else{for((Vt=Vt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function Bt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function Ut(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gt={animationend:Ut("Animation","AnimationEnd"),animationiteration:Ut("Animation","AnimationIteration"),animationstart:Ut("Animation","AnimationStart"),transitionend:Ut("Transition","TransitionEnd")},Kt={},Wt={};function zt(t){if(Kt[t])return Kt[t];if(!Gt[t])return t;var e,n=Gt[t];for(e in n)if(n.hasOwnProperty(e)&&e in Wt)return Kt[t]=n[e];return t}C&&(Wt=document.createElement("div").style,"AnimationEvent"in window||(delete Gt.animationend.animation,delete Gt.animationiteration.animation,delete Gt.animationstart.animation),"TransitionEvent"in window||delete Gt.transitionend.transition);var Yt=zt("animationend"),Ht=zt("animationiteration"),qt=zt("animationstart"),Xt=zt("transitionend"),Zt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jt=new("function"===typeof WeakMap?WeakMap:Map);function Qt(t){var e=Jt.get(t);return void 0===e&&(e=new Map,Jt.set(t,e)),e}function $t(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function te(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function ee(t){if($t(t)!==t)throw Error(a(188))}function ne(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=$t(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ee(i),t;if(o===r)return ee(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function re(t,e){if(null==e)throw Error(a(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function ie(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var oe=null;function ae(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)y(t,e[r],n[r]);else e&&y(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function se(t){if(null!==t&&(oe=re(oe,t)),t=oe,oe=null,t){if(ie(t,ae),oe)throw Error(a(95));if(c)throw t=h,c=!1,h=null,t}}function ue(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function le(t){if(!C)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}var ce=[];function he(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>ce.length&&ce.push(t)}function fe(t,e,n,r){if(ce.length){var i=ce.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function pe(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=Cn(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=ue(t.nativeEvent);r=t.topLevelType;var o=t.nativeEvent,a=t.eventSystemFlags;0===n&&(a|=64);for(var s=null,u=0;u<S.length;u++){var l=S[u];l&&(l=l.extractEvents(r,e,o,i,a))&&(s=re(s,l))}se(s)}}function de(t,e,n){if(!n.has(t)){switch(t){case"scroll":qe(e,"scroll",!0);break;case"focus":case"blur":qe(e,"focus",!0),qe(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":le(t)&&qe(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Zt.indexOf(t)&&He(t,e)}n.set(t,null)}}var ge,me,ye,ve=!1,Ee=[],_e=null,be=null,Se=null,we=new Map,xe=new Map,Te=[],Le="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ce="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ae(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Me(t,e){switch(t){case"focus":case"blur":_e=null;break;case"dragenter":case"dragleave":be=null;break;case"mouseover":case"mouseout":Se=null;break;case"pointerover":case"pointerout":we.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xe.delete(e.pointerId)}}function Re(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=Ae(e,n,r,i,o),null!==e&&(null!==(e=An(e))&&me(e)),t):(t.eventSystemFlags|=r,t)}function Oe(t){var e=Cn(t.target);if(null!==e){var n=$t(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=te(n)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){ye(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Pe(t){if(null!==t.blockedOn)return!1;var e=Qe(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=An(e);return null!==n&&me(n),t.blockedOn=e,!1}return!0}function Ie(t,e,n){Pe(t)&&n.delete(e)}function Ne(){for(ve=!1;0<Ee.length;){var t=Ee[0];if(null!==t.blockedOn){null!==(t=An(t.blockedOn))&&ge(t);break}var e=Qe(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:Ee.shift()}null!==_e&&Pe(_e)&&(_e=null),null!==be&&Pe(be)&&(be=null),null!==Se&&Pe(Se)&&(Se=null),we.forEach(Ie),xe.forEach(Ie)}function De(t,e){t.blockedOn===e&&(t.blockedOn=null,ve||(ve=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ne)))}function ke(t){function e(e){return De(e,t)}if(0<Ee.length){De(Ee[0],t);for(var n=1;n<Ee.length;n++){var r=Ee[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==_e&&De(_e,t),null!==be&&De(be,t),null!==Se&&De(Se,t),we.forEach(e),xe.forEach(e),n=0;n<Te.length;n++)(r=Te[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Te.length&&null===(n=Te[0]).blockedOn;)Oe(n),null===n.blockedOn&&Te.shift()}var Fe={},Ve=new Map,je=new Map,Be=["abort","abort",Yt,"animationEnd",Ht,"animationIteration",qt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Xt,"transitionEnd","waiting","waiting"];function Ue(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:e},je.set(r,e),Ve.set(r,o),Fe[i]=o}}Ue("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ue("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ue(Be,2);for(var Ge="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ke=0;Ke<Ge.length;Ke++)je.set(Ge[Ke],0);var We=o.unstable_UserBlockingPriority,ze=o.unstable_runWithPriority,Ye=!0;function He(t,e){qe(e,t,!1)}function qe(t,e,n){var r=je.get(e);switch(void 0===r?2:r){case 0:r=Xe.bind(null,e,1,t);break;case 1:r=Ze.bind(null,e,1,t);break;default:r=Je.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Xe(t,e,n,r){V||k();var i=Je,o=V;V=!0;try{D(i,t,e,n,r)}finally{(V=o)||B()}}function Ze(t,e,n,r){ze(We,Je.bind(null,t,e,n,r))}function Je(t,e,n,r){if(Ye)if(0<Ee.length&&-1<Le.indexOf(t))t=Ae(null,t,e,n,r),Ee.push(t);else{var i=Qe(t,e,n,r);if(null===i)Me(t,r);else if(-1<Le.indexOf(t))t=Ae(i,t,e,n,r),Ee.push(t);else if(!function(t,e,n,r,i){switch(e){case"focus":return _e=Re(_e,t,e,n,r,i),!0;case"dragenter":return be=Re(be,t,e,n,r,i),!0;case"mouseover":return Se=Re(Se,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return we.set(o,Re(we.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,xe.set(o,Re(xe.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r)){Me(t,r),t=fe(t,r,null,e);try{U(pe,t)}finally{he(t)}}}}function Qe(t,e,n,r){if(null!==(n=Cn(n=ue(r)))){var i=$t(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=te(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=fe(t,r,n,e);try{U(pe,t)}finally{he(t)}return null}var $e={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function en(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||$e.hasOwnProperty(t)&&$e[t]?(""+e).trim():e+"px"}function nn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=en(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys($e).forEach((function(t){tn.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$e[e]=$e[t]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(t,e){if(e){if(rn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62,""))}}function an(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=Nt;function un(t,e){var n=Qt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=T[e];for(var r=0;r<e.length;r++)de(e[r],t,n)}function ln(){}function cn(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function hn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fn(t,e){var n,r=hn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=hn(r)}}function pn(){for(var t=window,e=cn();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=cn((t=e.contentWindow).document)}return e}function dn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var gn=null,mn=null;function yn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function vn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var En="function"===typeof setTimeout?setTimeout:void 0,_n="function"===typeof clearTimeout?clearTimeout:void 0;function bn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Sn(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var wn=Math.random().toString(36).slice(2),xn="__reactInternalInstance$"+wn,Tn="__reactEventHandlers$"+wn,Ln="__reactContainere$"+wn;function Cn(t){var e=t[xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ln]||n[xn]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Sn(t);null!==t;){if(n=t[xn])return n;t=Sn(t)}return e}n=(t=n).parentNode}return null}function An(t){return!(t=t[xn]||t[Ln])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Mn(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function Rn(t){return t[Tn]||null}function On(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Pn(t,e){var n=t.stateNode;if(!n)return null;var r=d(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}function In(t,e,n){(e=Pn(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Nn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=On(e);for(e=n.length;0<e--;)In(n[e],"captured",t);for(e=0;e<n.length;e++)In(n[e],"bubbled",t)}}function Dn(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=Pn(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function kn(t){t&&t.dispatchConfig.registrationName&&Dn(t._targetInst,null,t)}function Fn(t){ie(t,Nn)}var Vn=null,jn=null,Bn=null;function Un(){if(Bn)return Bn;var t,e,n=jn,r=n.length,i="value"in Vn?Vn.value:Vn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Bn=i.slice(t,1<e?1-e:void 0)}function Gn(){return!0}function Kn(){return!1}function Wn(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Gn:Kn,this.isPropagationStopped=Kn,this}function zn(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function Yn(t){if(!(t instanceof this))throw Error(a(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Hn(t){t.eventPool=[],t.getPooled=zn,t.release=Yn}i(Wn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){this.isPersistent=Gn},isPersistent:Kn,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Kn,this._dispatchInstances=this._dispatchListeners=null}}),Wn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Wn.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,Hn(n),n},Hn(Wn);var qn=Wn.extend({data:null}),Xn=Wn.extend({data:null}),Zn=[9,13,27,32],Jn=C&&"CompositionEvent"in window,Qn=null;C&&"documentMode"in document&&(Qn=document.documentMode);var $n=C&&"TextEvent"in window&&!Qn,tr=C&&(!Jn||Qn&&8<Qn&&11>=Qn),er=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(t,e){switch(t){case"keyup":return-1!==Zn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function or(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var ar=!1;var sr={eventTypes:nr,extractEvents:function(t,e,n,r){var i;if(Jn)t:{switch(t){case"compositionstart":var o=nr.compositionStart;break t;case"compositionend":o=nr.compositionEnd;break t;case"compositionupdate":o=nr.compositionUpdate;break t}o=void 0}else ar?ir(t,n)&&(o=nr.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=nr.compositionStart);return o?(tr&&"ko"!==n.locale&&(ar||o!==nr.compositionStart?o===nr.compositionEnd&&ar&&(i=Un()):(jn="value"in(Vn=r)?Vn.value:Vn.textContent,ar=!0)),o=qn.getPooled(o,e,n,r),i?o.data=i:null!==(i=or(n))&&(o.data=i),Fn(o),i=o):i=null,(t=$n?function(t,e){switch(t){case"compositionend":return or(e);case"keypress":return 32!==e.which?null:(rr=!0,er);case"textInput":return(t=e.data)===er&&rr?null:t;default:return null}}(t,n):function(t,e){if(ar)return"compositionend"===t||!Jn&&ir(t,e)?(t=Un(),Bn=jn=Vn=null,ar=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tr&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=Xn.getPooled(nr.beforeInput,e,n,r)).data=t,Fn(e)):e=null,null===i?e:null===e?i:[i,e]}},ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!ur[t.type]:"textarea"===e}var cr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function hr(t,e,n){return(t=Wn.getPooled(cr.change,t,e,n)).type="change",P(n),Fn(t),t}var fr=null,pr=null;function dr(t){se(t)}function gr(t){if(bt(Mn(t)))return t}function mr(t,e){if("change"===t)return e}var yr=!1;function vr(){fr&&(fr.detachEvent("onpropertychange",Er),pr=fr=null)}function Er(t){if("value"===t.propertyName&&gr(pr))if(t=hr(pr,t,ue(t)),V)se(t);else{V=!0;try{N(dr,t)}finally{V=!1,B()}}}function _r(t,e,n){"focus"===t?(vr(),pr=n,(fr=e).attachEvent("onpropertychange",Er)):"blur"===t&&vr()}function br(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return gr(pr)}function Sr(t,e){if("click"===t)return gr(e)}function wr(t,e){if("input"===t||"change"===t)return gr(e)}C&&(yr=le("input")&&(!document.documentMode||9<document.documentMode));var xr={eventTypes:cr,_isInputEventSupported:yr,extractEvents:function(t,e,n,r){var i=e?Mn(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=mr;else if(lr(i))if(yr)a=wr;else{a=br;var s=_r}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Sr);if(a&&(a=a(t,e)))return hr(a,n,r);s&&s(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&Ct(i,"number",i.value)}},Tr=Wn.extend({view:null,detail:null}),Lr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Lr[t])&&!!e[t]}function Ar(){return Cr}var Mr=0,Rr=0,Or=!1,Pr=!1,Ir=Tr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ar,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Mr;return Mr=t.screenX,Or?"mousemove"===t.type?t.screenX-e:0:(Or=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Rr;return Rr=t.screenY,Pr?"mousemove"===t.type?t.screenY-e:0:(Pr=!0,0)}}),Nr=Ir.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Dr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},kr={eventTypes:Dr,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,a="mouseout"===t||"pointerout"===t;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=e,null!==(e=(e=n.relatedTarget||n.toElement)?Cn(e):null)&&(e!==$t(e)||5!==e.tag&&6!==e.tag)&&(e=null)):a=null;if(a===e)return null;if("mouseout"===t||"mouseover"===t)var s=Ir,u=Dr.mouseLeave,l=Dr.mouseEnter,c="mouse";else"pointerout"!==t&&"pointerover"!==t||(s=Nr,u=Dr.pointerLeave,l=Dr.pointerEnter,c="pointer");if(t=null==a?o:Mn(a),o=null==e?o:Mn(e),(u=s.getPooled(u,a,n,r)).type=c+"leave",u.target=t,u.relatedTarget=o,(n=s.getPooled(l,e,n,r)).type=c+"enter",n.target=o,n.relatedTarget=t,c=e,(r=a)&&c)t:{for(l=c,a=0,t=s=r;t;t=On(t))a++;for(t=0,e=l;e;e=On(e))t++;for(;0<a-t;)s=On(s),a--;for(;0<t-a;)l=On(l),t--;for(;a--;){if(s===l||s===l.alternate)break t;s=On(s),l=On(l)}s=null}else s=null;for(l=s,s=[];r&&r!==l&&(null===(a=r.alternate)||a!==l);)s.push(r),r=On(r);for(r=[];c&&c!==l&&(null===(a=c.alternate)||a!==l);)r.push(c),c=On(c);for(c=0;c<s.length;c++)Dn(s[c],"bubbled",u);for(c=r.length;0<c--;)Dn(r[c],"captured",n);return 0===(64&i)?[u]:[u,n]}};var Fr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},Vr=Object.prototype.hasOwnProperty;function jr(t,e){if(Fr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Vr.call(e,n[r])||!Fr(t[n[r]],e[n[r]]))return!1;return!0}var Br=C&&"documentMode"in document&&11>=document.documentMode,Ur={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Gr=null,Kr=null,Wr=null,zr=!1;function Yr(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return zr||null==Gr||Gr!==cn(n)?null:("selectionStart"in(n=Gr)&&dn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Wr&&jr(Wr,n)?null:(Wr=n,(t=Wn.getPooled(Ur.select,Kr,t,e)).type="select",t.target=Gr,Fn(t),t))}var Hr={eventTypes:Ur,extractEvents:function(t,e,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){t:{i=Qt(i),o=T.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break t}i=!0}o=!i}if(o)return null;switch(i=e?Mn(e):window,t){case"focus":(lr(i)||"true"===i.contentEditable)&&(Gr=i,Kr=e,Wr=null);break;case"blur":Wr=Kr=Gr=null;break;case"mousedown":zr=!0;break;case"contextmenu":case"mouseup":case"dragend":return zr=!1,Yr(n,r);case"selectionchange":if(Br)break;case"keydown":case"keyup":return Yr(n,r)}return null}},qr=Wn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Xr=Wn.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Zr=Tr.extend({relatedTarget:null});function Jr(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var Qr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ti=Tr.extend({key:function(t){if(t.key){var e=Qr[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Jr(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?$r[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ar,charCode:function(t){return"keypress"===t.type?Jr(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Jr(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),ei=Ir.extend({dataTransfer:null}),ni=Tr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ar}),ri=Wn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Ir.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:Fe,extractEvents:function(t,e,n,r){var i=Ve.get(t);if(!i)return null;switch(t){case"keypress":if(0===Jr(n))return null;case"keydown":case"keyup":t=ti;break;case"blur":case"focus":t=Zr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Ir;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=ei;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=ni;break;case Yt:case Ht:case qt:t=qr;break;case Xt:t=ri;break;case"scroll":t=Tr;break;case"wheel":t=ii;break;case"copy":case"cut":case"paste":t=Xr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Nr;break;default:t=Wn}return Fn(e=t.getPooled(i,e,n,r)),e}};if(v)throw Error(a(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),_(),d=Rn,g=An,m=Mn,L({SimpleEventPlugin:oi,EnterLeaveEventPlugin:kr,ChangeEventPlugin:xr,SelectEventPlugin:Hr,BeforeInputEventPlugin:sr});var ai=[],si=-1;function ui(t){0>si||(t.current=ai[si],ai[si]=null,si--)}function li(t,e){si++,ai[si]=t.current,t.current=e}var ci={},hi={current:ci},fi={current:!1},pi=ci;function di(t,e){var n=t.type.contextTypes;if(!n)return ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function gi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function mi(){ui(fi),ui(hi)}function yi(t,e,n){if(hi.current!==ci)throw Error(a(168));li(hi,e),li(fi,n)}function vi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,mt(e)||"Unknown",o));return i({},n,{},r)}function Ei(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,pi=hi.current,li(hi,t),li(fi,fi.current),!0}function _i(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=vi(t,e,pi),r.__reactInternalMemoizedMergedChildContext=t,ui(fi),ui(hi),li(hi,t)):ui(fi),li(fi,n)}var bi=o.unstable_runWithPriority,Si=o.unstable_scheduleCallback,wi=o.unstable_cancelCallback,xi=o.unstable_requestPaint,Ti=o.unstable_now,Li=o.unstable_getCurrentPriorityLevel,Ci=o.unstable_ImmediatePriority,Ai=o.unstable_UserBlockingPriority,Mi=o.unstable_NormalPriority,Ri=o.unstable_LowPriority,Oi=o.unstable_IdlePriority,Pi={},Ii=o.unstable_shouldYield,Ni=void 0!==xi?xi:function(){},Di=null,ki=null,Fi=!1,Vi=Ti(),ji=1e4>Vi?Ti:function(){return Ti()-Vi};function Bi(){switch(Li()){case Ci:return 99;case Ai:return 98;case Mi:return 97;case Ri:return 96;case Oi:return 95;default:throw Error(a(332))}}function Ui(t){switch(t){case 99:return Ci;case 98:return Ai;case 97:return Mi;case 96:return Ri;case 95:return Oi;default:throw Error(a(332))}}function Gi(t,e){return t=Ui(t),bi(t,e)}function Ki(t,e,n){return t=Ui(t),Si(t,e,n)}function Wi(t){return null===Di?(Di=[t],ki=Si(Ci,Yi)):Di.push(t),Pi}function zi(){if(null!==ki){var t=ki;ki=null,wi(t)}Yi()}function Yi(){if(!Fi&&null!==Di){Fi=!0;var t=0;try{var e=Di;Gi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Di=null}catch(n){throw null!==Di&&(Di=Di.slice(t+1)),Si(Ci,zi),n}finally{Fi=!1}}}function Hi(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function qi(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Xi={current:null},Zi=null,Ji=null,Qi=null;function $i(){Qi=Ji=Zi=null}function to(t){var e=Xi.current;ui(Xi),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function no(t,e){Zi=t,Qi=Ji=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Ra=!0),t.firstContext=null)}function ro(t,e){if(Qi!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Qi=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Ji){if(null===Zi)throw Error(a(308));Ji=e,Zi.dependencies={expirationTime:0,firstContext:e,responders:null}}else Ji=Ji.next=e;return t._currentValue}var io=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ao(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function so(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function uo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function lo(t,e){var n=t.alternate;null!==n&&ao(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function co(t,e,n,r){var o=t.updateQueue;io=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var u=a.next;a.next=s.next,s.next=u}a=s,o.shared.pending=null,null!==(u=t.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=s))}if(null!==a){u=a.next;var l=o.baseState,c=0,h=null,f=null,p=null;if(null!==u)for(var d=u;;){if((s=d.expirationTime)<r){var g={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===p?(f=p=g,h=l):p=p.next=g,s>c&&(c=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),ou(s,d.suspenseConfig);t:{var m=t,y=d;switch(s=e,g=n,y.tag){case 1:if("function"===typeof(m=y.payload)){l=m.call(g,l,s);break t}l=m;break t;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null===(s="function"===typeof(m=y.payload)?m.call(g,l,s):m)||void 0===s)break t;l=i({},l,s);break t;case 2:io=!0}}null!==d.callback&&(t.effectTag|=32,null===(s=o.effects)?o.effects=[d]:s.push(d))}if(null===(d=d.next)||d===u){if(null===(s=o.shared.pending))break;d=a.next=s.next,s.next=u,o.baseQueue=a=s,o.shared.pending=null}}null===p?h=l:p.next=f,o.baseState=h,o.baseQueue=p,au(c),t.expirationTime=c,t.memoizedState=l}}function ho(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var fo=Z.ReactCurrentBatchConfig,po=(new r.Component).refs;function go(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var mo={isMounted:function(t){return!!(t=t._reactInternalFiber)&&$t(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Ys(),i=fo.suspense;(i=so(r=Hs(r,t,i),i)).payload=e,void 0!==n&&null!==n&&(i.callback=n),uo(t,i),qs(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Ys(),i=fo.suspense;(i=so(r=Hs(r,t,i),i)).tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),uo(t,i),qs(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Ys(),r=fo.suspense;(r=so(n=Hs(n,t,r),r)).tag=2,void 0!==e&&null!==e&&(r.callback=e),uo(t,r),qs(t,n)}};function yo(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!jr(n,r)||!jr(i,o))}function vo(t,e,n){var r=!1,i=ci,o=e.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=gi(e)?pi:hi.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?di(t,i):ci),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=mo,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Eo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&mo.enqueueReplaceState(e,e.state,null)}function _o(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=po,oo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=gi(e)?pi:hi.current,i.context=di(t,o)),co(t,n,i,r),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(go(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&mo.enqueueReplaceState(i,i.state,null),co(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.effectTag|=4)}var bo=Array.isArray;function So(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===po&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function wo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function xo(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Lu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=Mu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=So(t,e,n),r.return=t,r):((r=Cu(n.type,n.key,n.props,null,t.mode,r)).ref=So(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Ru(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Au(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Mu(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case tt:return(n=Cu(e.type,e.key,e.props,null,t.mode,n)).ref=So(t,null,e),n.return=t,n;case et:return(e=Ru(e,t.mode,n)).return=t,e}if(bo(e)||gt(e))return(e=Au(e,t.mode,n,null)).return=t,e;wo(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case tt:return n.key===i?n.type===nt?h(t,e,n.props.children,r,i):l(t,e,n,r):null;case et:return n.key===i?c(t,e,n,r):null}if(bo(n)||gt(n))return null!==i?null:h(t,e,n,r,null);wo(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case tt:return t=t.get(null===r.key?n:r.key)||null,r.type===nt?h(e,t,r.props.children,i,r.key):l(e,t,r,i);case et:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(bo(r)||gt(r))return h(e,t=t.get(n)||null,r,i,null);wo(e,r)}return null}function g(i,a,s,u){for(var l=null,c=null,h=a,g=a=0,m=null;null!==h&&g<s.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=p(i,h,s[g],u);if(null===y){null===h&&(h=m);break}t&&h&&null===y.alternate&&e(i,h),a=o(y,a,g),null===c?l=y:c.sibling=y,c=y,h=m}if(g===s.length)return n(i,h),l;if(null===h){for(;g<s.length;g++)null!==(h=f(i,s[g],u))&&(a=o(h,a,g),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);g<s.length;g++)null!==(m=d(h,i,g,s[g],u))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),a=o(m,a,g),null===c?l=m:c.sibling=m,c=m);return t&&h.forEach((function(t){return e(i,t)})),l}function m(i,s,u,l){var c=gt(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,g=s,m=s=0,y=null,v=u.next();null!==g&&!v.done;m++,v=u.next()){g.index>m?(y=g,g=null):y=g.sibling;var E=p(i,g,v.value,l);if(null===E){null===g&&(g=y);break}t&&g&&null===E.alternate&&e(i,g),s=o(E,s,m),null===h?c=E:h.sibling=E,h=E,g=y}if(v.done)return n(i,g),c;if(null===g){for(;!v.done;m++,v=u.next())null!==(v=f(i,v.value,l))&&(s=o(v,s,m),null===h?c=v:h.sibling=v,h=v);return c}for(g=r(i,g);!v.done;m++,v=u.next())null!==(v=d(g,i,m,v.value,l))&&(t&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=o(v,s,m),null===h?c=v:h.sibling=v,h=v);return t&&g.forEach((function(t){return e(i,t)})),c}return function(t,r,o,u){var l="object"===typeof o&&null!==o&&o.type===nt&&null===o.key;l&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case tt:t:{for(c=o.key,l=r;null!==l;){if(l.key===c){switch(l.tag){case 7:if(o.type===nt){n(t,l.sibling),(r=i(l,o.props.children)).return=t,t=r;break t}break;default:if(l.elementType===o.type){n(t,l.sibling),(r=i(l,o.props)).ref=So(t,l,o),r.return=t,t=r;break t}}n(t,l);break}e(t,l),l=l.sibling}o.type===nt?((r=Au(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Cu(o.type,o.key,o.props,null,t.mode,u)).ref=So(t,r,o),u.return=t,t=u)}return s(t);case et:t:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Ru(o,t.mode,u)).return=t,t=r}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=Mu(o,t.mode,u)).return=t,t=r),s(t);if(bo(o))return g(t,r,o,u);if(gt(o))return m(t,r,o,u);if(c&&wo(t,o),"undefined"===typeof o&&!l)switch(t.tag){case 1:case 0:throw t=t.type,Error(a(152,t.displayName||t.name||"Component"))}return n(t,r)}}var To=xo(!0),Lo=xo(!1),Co={},Ao={current:Co},Mo={current:Co},Ro={current:Co};function Oo(t){if(t===Co)throw Error(a(174));return t}function Po(t,e){switch(li(Ro,e),li(Mo,t),li(Ao,Co),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ft(null,"");break;default:e=Ft(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ui(Ao),li(Ao,e)}function Io(){ui(Ao),ui(Mo),ui(Ro)}function No(t){Oo(Ro.current);var e=Oo(Ao.current),n=Ft(e,t.type);e!==n&&(li(Mo,t),li(Ao,n))}function Do(t){Mo.current===t&&(ui(Ao),ui(Mo))}var ko={current:0};function Fo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Vo(t,e){return{responder:t,props:e}}var jo=Z.ReactCurrentDispatcher,Bo=Z.ReactCurrentBatchConfig,Uo=0,Go=null,Ko=null,Wo=null,zo=!1;function Yo(){throw Error(a(321))}function Ho(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fr(t[n],e[n]))return!1;return!0}function qo(t,e,n,r,i,o){if(Uo=o,Go=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,jo.current=null===t||null===t.memoizedState?ya:va,t=n(r,i),e.expirationTime===Uo){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Wo=Ko=null,e.updateQueue=null,jo.current=Ea,t=n(r,i)}while(e.expirationTime===Uo)}if(jo.current=ma,e=null!==Ko&&null!==Ko.next,Uo=0,Wo=Ko=Go=null,zo=!1,e)throw Error(a(300));return t}function Xo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wo?Go.memoizedState=Wo=t:Wo=Wo.next=t,Wo}function Zo(){if(null===Ko){var t=Go.alternate;t=null!==t?t.memoizedState:null}else t=Ko.next;var e=null===Wo?Go.memoizedState:Wo.next;if(null!==e)Wo=e,Ko=t;else{if(null===t)throw Error(a(310));t={memoizedState:(Ko=t).memoizedState,baseState:Ko.baseState,baseQueue:Ko.baseQueue,queue:Ko.queue,next:null},null===Wo?Go.memoizedState=Wo=t:Wo=Wo.next=t}return Wo}function Jo(t,e){return"function"===typeof e?e(t):e}function Qo(t){var e=Zo(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=Ko,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,l=i;do{var c=l.expirationTime;if(c<Uo){var h={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,c>Go.expirationTime&&(Go.expirationTime=c,au(c))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),ou(c,l.suspenseConfig),r=l.eagerReducer===t?l.eagerState:t(r,l.action);l=l.next}while(null!==l&&l!==i);null===u?o=r:u.next=s,Fr(r,e.memoizedState)||(Ra=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function $o(t){var e=Zo(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);Fr(o,e.memoizedState)||(Ra=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ta(t){var e=Xo();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:t}).dispatch=ga.bind(null,Go,t),[e.memoizedState,t]}function ea(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Go.updateQueue)?(e={lastEffect:null},Go.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function na(){return Zo().memoizedState}function ra(t,e,n,r){var i=Xo();Go.effectTag|=t,i.memoizedState=ea(1|e,n,void 0,void 0===r?null:r)}function ia(t,e,n,r){var i=Zo();r=void 0===r?null:r;var o=void 0;if(null!==Ko){var a=Ko.memoizedState;if(o=a.destroy,null!==r&&Ho(r,a.deps))return void ea(e,n,o,r)}Go.effectTag|=t,i.memoizedState=ea(1|e,n,o,r)}function oa(t,e){return ra(516,4,t,e)}function aa(t,e){return ia(516,4,t,e)}function sa(t,e){return ia(4,2,t,e)}function ua(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function la(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ia(4,2,ua.bind(null,e,t),n)}function ca(){}function ha(t,e){return Xo().memoizedState=[t,void 0===e?null:e],t}function fa(t,e){var n=Zo();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ho(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pa(t,e){var n=Zo();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ho(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function da(t,e,n){var r=Bi();Gi(98>r?98:r,(function(){t(!0)})),Gi(97<r?97:r,(function(){var r=Bo.suspense;Bo.suspense=void 0===e?null:e;try{t(!1),n()}finally{Bo.suspense=r}}))}function ga(t,e,n){var r=Ys(),i=fo.suspense;i={expirationTime:r=Hs(r,t,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===Go||null!==o&&o===Go)zo=!0,i.expirationTime=Uo,Go.expirationTime=Uo;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,Fr(s,a))return}catch(u){}qs(t,r)}}var ma={readContext:ro,useCallback:Yo,useContext:Yo,useEffect:Yo,useImperativeHandle:Yo,useLayoutEffect:Yo,useMemo:Yo,useReducer:Yo,useRef:Yo,useState:Yo,useDebugValue:Yo,useResponder:Yo,useDeferredValue:Yo,useTransition:Yo},ya={readContext:ro,useCallback:ha,useContext:ro,useEffect:oa,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ra(4,2,ua.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ra(4,2,t,e)},useMemo:function(t,e){var n=Xo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xo();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=ga.bind(null,Go,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Xo().memoizedState=t},useState:ta,useDebugValue:ca,useResponder:Vo,useDeferredValue:function(t,e){var n=ta(t),r=n[0],i=n[1];return oa((function(){var n=Bo.suspense;Bo.suspense=void 0===e?null:e;try{i(t)}finally{Bo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ta(!1),n=e[0];return e=e[1],[ha(da.bind(null,e,t),[e,t]),n]}},va={readContext:ro,useCallback:fa,useContext:ro,useEffect:aa,useImperativeHandle:la,useLayoutEffect:sa,useMemo:pa,useReducer:Qo,useRef:na,useState:function(){return Qo(Jo)},useDebugValue:ca,useResponder:Vo,useDeferredValue:function(t,e){var n=Qo(Jo),r=n[0],i=n[1];return aa((function(){var n=Bo.suspense;Bo.suspense=void 0===e?null:e;try{i(t)}finally{Bo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Qo(Jo),n=e[0];return e=e[1],[fa(da.bind(null,e,t),[e,t]),n]}},Ea={readContext:ro,useCallback:fa,useContext:ro,useEffect:aa,useImperativeHandle:la,useLayoutEffect:sa,useMemo:pa,useReducer:$o,useRef:na,useState:function(){return $o(Jo)},useDebugValue:ca,useResponder:Vo,useDeferredValue:function(t,e){var n=$o(Jo),r=n[0],i=n[1];return aa((function(){var n=Bo.suspense;Bo.suspense=void 0===e?null:e;try{i(t)}finally{Bo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=$o(Jo),n=e[0];return e=e[1],[fa(da.bind(null,e,t),[e,t]),n]}},_a=null,ba=null,Sa=!1;function wa(t,e){var n=xu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function xa(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Ta(t){if(Sa){var e=ba;if(e){var n=e;if(!xa(t,e)){if(!(e=bn(n.nextSibling))||!xa(t,e))return t.effectTag=-1025&t.effectTag|2,Sa=!1,void(_a=t);wa(_a,n)}_a=t,ba=bn(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,Sa=!1,_a=t}}function La(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;_a=t}function Ca(t){if(t!==_a)return!1;if(!Sa)return La(t),Sa=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!vn(e,t.memoizedProps))for(e=ba;e;)wa(t,e),e=bn(e.nextSibling);if(La(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ba=bn(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ba=null}}else ba=_a?bn(t.stateNode.nextSibling):null;return!0}function Aa(){ba=_a=null,Sa=!1}var Ma=Z.ReactCurrentOwner,Ra=!1;function Oa(t,e,n,r){e.child=null===t?Lo(e,null,n,r):To(e,t.child,n,r)}function Pa(t,e,n,r,i){n=n.render;var o=e.ref;return no(e,i),r=qo(t,e,n,r,o,i),null===t||Ra?(e.effectTag|=1,Oa(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),qa(t,e,i))}function Ia(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!==typeof a||Tu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Cu(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Na(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:jr)(i,r)&&t.ref===e.ref)?qa(t,e,o):(e.effectTag|=1,(t=Lu(a,r)).ref=e.ref,t.return=e,e.child=t)}function Na(t,e,n,r,i,o){return null!==t&&jr(t.memoizedProps,r)&&t.ref===e.ref&&(Ra=!1,i<o)?(e.expirationTime=t.expirationTime,qa(t,e,o)):ka(t,e,n,r,o)}function Da(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function ka(t,e,n,r,i){var o=gi(n)?pi:hi.current;return o=di(e,o),no(e,i),n=qo(t,e,n,r,o,i),null===t||Ra?(e.effectTag|=1,Oa(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),qa(t,e,i))}function Fa(t,e,n,r,i){if(gi(n)){var o=!0;Ei(e)}else o=!1;if(no(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),vo(e,n,r),_o(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=ro(l):l=di(e,l=gi(n)?pi:hi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&Eo(e,a,r,l),io=!1;var f=e.memoizedState;a.state=f,co(e,r,a,i),u=e.memoizedState,s!==r||f!==u||fi.current||io?("function"===typeof c&&(go(e,n,c,r),u=e.memoizedState),(s=io||yo(e,n,s,r,f,u,l))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.effectTag|=4)):("function"===typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,ao(t,e),s=e.memoizedProps,a.props=e.type===e.elementType?s:qi(e.type,s),u=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ro(l):l=di(e,l=gi(n)?pi:hi.current),(h="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&Eo(e,a,r,l),io=!1,u=e.memoizedState,a.state=u,co(e,r,a,i),f=e.memoizedState,s!==r||u!==f||fi.current||io?("function"===typeof c&&(go(e,n,c,r),f=e.memoizedState),(c=io||yo(e,n,s,r,u,f,l))?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(e.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return Va(t,e,n,r,o,i)}function Va(t,e,n,r,i,o){Da(t,e);var a=0!==(64&e.effectTag);if(!r&&!a)return i&&_i(e,n,!1),qa(t,e,o);r=e.stateNode,Ma.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=To(e,t.child,null,o),e.child=To(e,null,s,o)):Oa(t,e,s,o),e.memoizedState=r.state,i&&_i(e,n,!0),e.child}function ja(t){var e=t.stateNode;e.pendingContext?yi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&yi(0,e.context,!1),Po(t,e.containerInfo)}var Ba,Ua,Ga,Ka={dehydrated:null,retryTime:0};function Wa(t,e,n){var r,i=e.mode,o=e.pendingProps,a=ko.current,s=!1;if((r=0!==(64&e.effectTag))||(r=0!==(2&a)&&(null===t||null!==t.memoizedState)),r?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),li(ko,1&a),null===t){if(void 0!==o.fallback&&Ta(e),s){if(s=o.fallback,(o=Au(null,i,0,null)).return=e,0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Au(s,i,n,null)).return=e,o.sibling=n,e.memoizedState=Ka,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=Lo(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,s){if(o=o.fallback,(n=Lu(t,t.pendingProps)).return=e,0===(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Lu(i,o)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=Ka,e.child=n,i}return n=To(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=o.fallback,(o=Au(null,i,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Au(s,i,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=Ka,e.child=o,n}return e.memoizedState=null,e.child=To(e,t,o.children,n)}function za(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),eo(t.return,e)}function Ya(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Ha(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Oa(t,e,r.children,n),0!==(2&(r=ko.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!==(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&za(t,n);else if(19===t.tag)za(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(li(ko,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Fo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ya(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Fo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ya(e,!0,n,null,o,e.lastEffect);break;case"together":Ya(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function qa(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&au(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Lu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Lu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Xa(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Za(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return gi(e.type)&&mi(),null;case 3:return Io(),ui(fi),ui(hi),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!Ca(e)||(e.effectTag|=4),null;case 5:Do(e),n=Oo(Ro.current);var o=e.type;if(null!==t&&null!=e.stateNode)Ua(t,e,o,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=Oo(Ao.current),Ca(e)){r=e.stateNode,o=e.type;var s=e.memoizedProps;switch(r[xn]=e,r[Tn]=s,o){case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(t=0;t<Zt.length;t++)He(Zt[t],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"form":He("reset",r),He("submit",r);break;case"details":He("toggle",r);break;case"input":wt(r,s),He("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},He("invalid",r),un(n,"onChange");break;case"textarea":Ot(r,s),He("invalid",r),un(n,"onChange")}for(var u in on(o,s),t=null,s)if(s.hasOwnProperty(u)){var l=s[u];"children"===u?"string"===typeof l?r.textContent!==l&&(t=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(t=["children",""+l]):x.hasOwnProperty(u)&&null!=l&&un(n,u)}switch(o){case"input":_t(r),Lt(r,s,!0);break;case"textarea":_t(r),It(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=ln)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,t===sn&&(t=kt(o)),t===sn?"script"===o?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=u.createElement(o,{is:r.is}):(t=u.createElement(o),"select"===o&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,o),t[xn]=e,t[Tn]=r,Ba(t,e),e.stateNode=t,u=an(o,r),o){case"iframe":case"object":case"embed":He("load",t),l=r;break;case"video":case"audio":for(l=0;l<Zt.length;l++)He(Zt[l],t);l=r;break;case"source":He("error",t),l=r;break;case"img":case"image":case"link":He("error",t),He("load",t),l=r;break;case"form":He("reset",t),He("submit",t),l=r;break;case"details":He("toggle",t),l=r;break;case"input":wt(t,r),l=St(t,r),He("invalid",t),un(n,"onChange");break;case"option":l=At(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},l=i({},r,{value:void 0}),He("invalid",t),un(n,"onChange");break;case"textarea":Ot(t,r),l=Rt(t,r),He("invalid",t),un(n,"onChange");break;default:l=r}on(o,l);var c=l;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?nn(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&jt(t,h):"children"===s?"string"===typeof h?("textarea"!==o||""!==h)&&Bt(t,h):"number"===typeof h&&Bt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(x.hasOwnProperty(s)?null!=h&&un(n,s):null!=h&&J(t,s,h,u))}switch(o){case"input":_t(t),Lt(t,r,!1);break;case"textarea":_t(t),It(t);break;case"option":null!=r.value&&t.setAttribute("value",""+vt(r.value));break;case"select":t.multiple=!!r.multiple,null!=(n=r.value)?Mt(t,!!r.multiple,n,!1):null!=r.defaultValue&&Mt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof l.onClick&&(t.onclick=ln)}yn(o,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Ga(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));n=Oo(Ro.current),Oo(Ao.current),Ca(e)?(n=e.stateNode,r=e.memoizedProps,n[xn]=e,n.nodeValue!==r&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[xn]=e,e.stateNode=n)}return null;case 13:return ui(ko),r=e.memoizedState,0!==(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&Ca(e):(r=null!==(o=t.memoizedState),n||null===o||null!==(o=t.child.sibling)&&(null!==(s=e.firstEffect)?(e.firstEffect=o,o.nextEffect=s):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&ko.current)?Cs===_s&&(Cs=bs):(Cs!==_s&&Cs!==bs||(Cs=Ss),0!==Ps&&null!==xs&&(Iu(xs,Ls),Nu(xs,Ps)))),(n||r)&&(e.effectTag|=4),null);case 4:return Io(),null;case 10:return to(e),null;case 17:return gi(e.type)&&mi(),null;case 19:if(ui(ko),null===(r=e.memoizedState))return null;if(o=0!==(64&e.effectTag),null===(s=r.rendering)){if(o)Xa(r,!1);else if(Cs!==_s||null!==t&&0!==(64&t.effectTag))for(s=e.child;null!==s;){if(null!==(t=Fo(s))){for(e.effectTag|=64,Xa(r,!1),null!==(o=t.updateQueue)&&(e.updateQueue=o,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(t=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return li(ko,1&ko.current|2),e.child}s=s.sibling}}else{if(!o)if(null!==(t=Fo(s))){if(e.effectTag|=64,o=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),Xa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*ji()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,o=!0,Xa(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(s.sibling=e.child,e.child=s):(null!==(n=r.last)?n.sibling=s:e.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=ji()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=ji(),n.sibling=null,e=ko.current,li(ko,o?1&e|2:1&e),n):null}throw Error(a(156,e.tag))}function Ja(t){switch(t.tag){case 1:gi(t.type)&&mi();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Io(),ui(fi),ui(hi),0!==(64&(e=t.effectTag)))throw Error(a(285));return t.effectTag=-4097&e|64,t;case 5:return Do(t),null;case 13:return ui(ko),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return ui(ko),null;case 4:return Io(),null;case 10:return to(t),null;default:return null}}function Qa(t,e){return{value:t,source:e,stack:yt(e)}}Ba=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ua=function(t,e,n,r,o){var a=t.memoizedProps;if(a!==r){var s,u,l=e.stateNode;switch(Oo(Ao.current),t=null,n){case"input":a=St(l,a),r=St(l,r),t=[];break;case"option":a=At(l,a),r=At(l,r),t=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":a=Rt(l,a),r=Rt(l,r),t=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(l.onclick=ln)}for(s in on(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in l=a[s])l.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(x.hasOwnProperty(s)?t||(t=[]):(t=t||[]).push(s,null));for(s in r){var c=r[s];if(l=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&c!==l&&(null!=c||null!=l))if("style"===s)if(l){for(u in l)!l.hasOwnProperty(u)||c&&c.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in c)c.hasOwnProperty(u)&&l[u]!==c[u]&&(n||(n={}),n[u]=c[u])}else n||(t||(t=[]),t.push(s,n)),n=c;else"dangerouslySetInnerHTML"===s?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(t=t||[]).push(s,c)):"children"===s?l===c||"string"!==typeof c&&"number"!==typeof c||(t=t||[]).push(s,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(x.hasOwnProperty(s)?(null!=c&&un(o,s),t||l===c||(t=[])):(t=t||[]).push(s,c))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},Ga=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var $a="function"===typeof WeakSet?WeakSet:Set;function ts(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=yt(n)),null!==n&&mt(n.type),e=e.value,null!==t&&1===t.tag&&mt(t.type);try{console.error(e)}catch(i){setTimeout((function(){throw i}))}}function es(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){vu(t,n)}else e.current=null}function ns(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:qi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function rs(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function is(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function os(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void is(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:qi(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&ho(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}ho(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&yn(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&ke(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(t,e,n){switch("function"===typeof Su&&Su(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Gi(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(o){vu(i,o)}}t=t.next}while(t!==r)}))}break;case 1:es(e),"function"===typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(n){vu(t,n)}}(e,n);break;case 5:es(e);break;case 4:cs(t,e,n)}}function ss(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&ss(e)}function us(t){return 5===t.tag||3===t.tag||4===t.tag}function ls(t){t:{for(var e=t.return;null!==e;){if(us(e)){var n=e;break t}e=e.return}throw Error(a(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Bt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||us(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(8===r.nodeType?(n=r.parentNode).insertBefore(e,r):(n=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=ln));else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e):function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?r.insertBefore(e,n):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e)}function cs(t,e,n){for(var r,i,o=e,s=!1;;){if(!s){s=o.return;t:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}s=s.return}s=!0}if(5===o.tag||6===o.tag){t:for(var u=t,l=o,c=n,h=l;;)if(as(u,h,c),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===l)break t;for(;null===h.sibling;){if(null===h.return||h.return===l)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,l=o.stateNode,8===u.nodeType?u.parentNode.removeChild(l):u.removeChild(l)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(as(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function hs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void rs(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Tn]=r,"input"===t&&"radio"===r.type&&null!=r.name&&xt(n,r),an(t,i),e=an(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?nn(n,u):"dangerouslySetInnerHTML"===s?jt(n,u):"children"===s?Bt(n,u):J(n,s,u,e)}switch(t){case"input":Tt(n,r);break;case"textarea":Pt(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?Mt(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?Mt(n,!!r.multiple,r.defaultValue,!0):Mt(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,ke(e.containerInfo)));case 12:return;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,Ns=ji()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,i=void 0!==(i=t.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=en("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void fs(e);case 19:return void fs(e);case 17:return}throw Error(a(163))}function fs(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new $a),e.forEach((function(e){var r=_u.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function ds(t,e,n){(n=so(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ks||(ks=!0,Fs=r),ts(t,e)},n}function gs(t,e,n){(n=so(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return ts(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Vs?Vs=new Set([this]):Vs.add(this),ts(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var ms,ys=Math.ceil,vs=Z.ReactCurrentDispatcher,Es=Z.ReactCurrentOwner,_s=0,bs=3,Ss=4,ws=0,xs=null,Ts=null,Ls=0,Cs=_s,As=null,Ms=1073741823,Rs=1073741823,Os=null,Ps=0,Is=!1,Ns=0,Ds=null,ks=!1,Fs=null,Vs=null,js=!1,Bs=null,Us=90,Gs=null,Ks=0,Ws=null,zs=0;function Ys(){return 0!==(48&ws)?1073741821-(ji()/10|0):0!==zs?zs:zs=1073741821-(ji()/10|0)}function Hs(t,e,n){if(0===(2&(e=e.mode)))return 1073741823;var r=Bi();if(0===(4&e))return 99===r?1073741823:1073741822;if(0!==(16&ws))return Ls;if(null!==n)t=Hi(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=Hi(t,150,100);break;case 97:case 96:t=Hi(t,5e3,250);break;case 95:t=2;break;default:throw Error(a(326))}return null!==xs&&t===Ls&&--t,t}function qs(t,e){if(50<Ks)throw Ks=0,Ws=null,Error(a(185));if(null!==(t=Xs(t,e))){var n=Bi();1073741823===e?0!==(8&ws)&&0===(48&ws)?$s(t):(Js(t),0===ws&&zi()):Js(t),0===(4&ws)||98!==n&&99!==n||(null===Gs?Gs=new Map([[t,e]]):(void 0===(n=Gs.get(t))||n>e)&&Gs.set(t,e))}}function Xs(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(xs===i&&(au(e),Cs===Ss&&Iu(i,Ls)),Nu(i,e)),i}function Zs(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Pu(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function Js(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Wi($s.bind(null,t));else{var e=Zs(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=Ys();if(1073741823===e?r=99:1===e||2===e?r=95:r=0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Pi&&wi(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?Wi($s.bind(null,t)):Ki(r,Qs.bind(null,t),{timeout:10*(1073741821-e)-ji()}),t.callbackNode=e}}}function Qs(t,e){if(zs=0,e)return Du(t,e=Ys()),Js(t),null;var n=Zs(t);if(0!==n){if(e=t.callbackNode,0!==(48&ws))throw Error(a(327));if(gu(),t===xs&&n===Ls||nu(t,n),null!==Ts){var r=ws;ws|=16;for(var i=iu();;)try{uu();break}catch(u){ru(t,u)}if($i(),ws=r,vs.current=i,1===Cs)throw e=As,nu(t,n),Iu(t,n),Js(t),e;if(null===Ts)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=Cs,xs=null,r){case _s:case 1:throw Error(a(345));case 2:Du(t,2<n?2:n);break;case bs:if(Iu(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(i)),1073741823===Ms&&10<(i=Ns+500-ji())){if(Is){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,nu(t,n);break}}if(0!==(o=Zs(t))&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=En(fu.bind(null,t),i);break}fu(t);break;case Ss:if(Iu(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(i)),Is&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,nu(t,n);break}if(0!==(i=Zs(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==Rs?r=10*(1073741821-Rs)-ji():1073741823===Ms?r=0:(r=10*(1073741821-Ms)-5e3,0>(r=(i=ji())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ys(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=En(fu.bind(null,t),r);break}fu(t);break;case 5:if(1073741823!==Ms&&null!==Os){o=Ms;var s=Os;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=ji()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Iu(t,n),t.timeoutHandle=En(fu.bind(null,t),r);break}}fu(t);break;default:throw Error(a(329))}if(Js(t),t.callbackNode===e)return Qs.bind(null,t)}}return null}function $s(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,0!==(48&ws))throw Error(a(327));if(gu(),t===xs&&e===Ls||nu(t,e),null!==Ts){var n=ws;ws|=16;for(var r=iu();;)try{su();break}catch(i){ru(t,i)}if($i(),ws=n,vs.current=r,1===Cs)throw n=As,nu(t,e),Iu(t,e),Js(t),n;if(null!==Ts)throw Error(a(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,xs=null,fu(t),Js(t)}return null}function tu(t,e){var n=ws;ws|=1;try{return t(e)}finally{0===(ws=n)&&zi()}}function eu(t,e){var n=ws;ws&=-2,ws|=8;try{return t(e)}finally{0===(ws=n)&&zi()}}function nu(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,_n(n)),null!==Ts)for(n=Ts.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&mi();break;case 3:Io(),ui(fi),ui(hi);break;case 5:Do(r);break;case 4:Io();break;case 13:case 19:ui(ko);break;case 10:to(r)}n=n.return}xs=t,Ts=Lu(t.current,null),Ls=e,Cs=_s,As=null,Rs=Ms=1073741823,Os=null,Ps=0,Is=!1}function ru(t,e){for(;;){try{if($i(),jo.current=ma,zo)for(var n=Go.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Uo=0,Wo=Ko=Go=null,zo=!1,null===Ts||null===Ts.return)return Cs=1,As=e,Ts=null;t:{var i=t,o=Ts.return,a=Ts,s=e;if(e=Ls,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=s;if(0===(2&a.mode)){var l=a.alternate;l?(a.updateQueue=l.updateQueue,a.memoizedState=l.memoizedState,a.expirationTime=l.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var c=0!==(1&ko.current),h=o;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var d=h.memoizedProps;f=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!c)}}if(f){var g=h.updateQueue;if(null===g){var m=new Set;m.add(u),h.updateQueue=m}else g.add(u);if(0===(2&h.mode)){if(h.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=so(1073741823,null);y.tag=2,uo(a,y)}a.expirationTime=1073741823;break t}s=void 0,a=e;var v=i.pingCache;if(null===v?(v=i.pingCache=new ps,s=new Set,v.set(u,s)):void 0===(s=v.get(u))&&(s=new Set,v.set(u,s)),!s.has(a)){s.add(a);var E=Eu.bind(null,i,u,a);u.then(E,E)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);s=Error((mt(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+yt(a))}5!==Cs&&(Cs=2),s=Qa(s,a),h=o;do{switch(h.tag){case 3:u=s,h.effectTag|=4096,h.expirationTime=e,lo(h,ds(h,u,e));break t;case 1:u=s;var _=h.type,b=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof _.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Vs||!Vs.has(b)))){h.effectTag|=4096,h.expirationTime=e,lo(h,gs(h,u,e));break t}}h=h.return}while(null!==h)}Ts=cu(Ts)}catch(S){e=S;continue}break}}function iu(){var t=vs.current;return vs.current=ma,null===t?ma:t}function ou(t,e){t<Ms&&2<t&&(Ms=t),null!==e&&t<Rs&&2<t&&(Rs=t,Os=e)}function au(t){t>Ps&&(Ps=t)}function su(){for(;null!==Ts;)Ts=lu(Ts)}function uu(){for(;null!==Ts&&!Ii();)Ts=lu(Ts)}function lu(t){var e=ms(t.alternate,t,Ls);return t.memoizedProps=t.pendingProps,null===e&&(e=cu(t)),Es.current=null,e}function cu(t){Ts=t;do{var e=Ts.alternate;if(t=Ts.return,0===(2048&Ts.effectTag)){if(e=Za(e,Ts,Ls),1===Ls||1!==Ts.childExpirationTime){for(var n=0,r=Ts.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Ts.childExpirationTime=n}if(null!==e)return e;null!==t&&0===(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=Ts.firstEffect),null!==Ts.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=Ts.firstEffect),t.lastEffect=Ts.lastEffect),1<Ts.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=Ts:t.firstEffect=Ts,t.lastEffect=Ts))}else{if(null!==(e=Ja(Ts)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=Ts.sibling))return e;Ts=t}while(null!==Ts);return Cs===_s&&(Cs=5),null}function hu(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function fu(t){var e=Bi();return Gi(99,pu.bind(null,t,e)),null}function pu(t,e){do{gu()}while(null!==Bs);if(0!==(48&ws))throw Error(a(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=hu(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===xs&&(Ts=xs=null,Ls=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=ws;ws|=32,Es.current=null,gn=Ye;var s=pn();if(dn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{var l=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(l&&0!==l.rangeCount){u=l.anchorNode;var c=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{u.nodeType,h.nodeType}catch(L){u=null;break t}var f=0,p=-1,d=-1,g=0,m=0,y=s,v=null;e:for(;;){for(var E;y!==u||0!==c&&3!==y.nodeType||(p=f+c),y!==h||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(E=y.firstChild);)v=y,y=E;for(;;){if(y===s)break e;if(v===u&&++g===c&&(p=f),v===h&&++m===l&&(d=f),null!==(E=y.nextSibling))break;v=(y=v).parentNode}y=E}u=-1===p||-1===d?null:{start:p,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;mn={activeElementDetached:null,focusedElem:s,selectionRange:u},Ye=!1,Ds=i;do{try{du()}catch(L){if(null===Ds)throw Error(a(330));vu(Ds,L),Ds=Ds.nextEffect}}while(null!==Ds);Ds=i;do{try{for(s=t,u=e;null!==Ds;){var _=Ds.effectTag;if(16&_&&Bt(Ds.stateNode,""),128&_){var b=Ds.alternate;if(null!==b){var S=b.ref;null!==S&&("function"===typeof S?S(null):S.current=null)}}switch(1038&_){case 2:ls(Ds),Ds.effectTag&=-3;break;case 6:ls(Ds),Ds.effectTag&=-3,hs(Ds.alternate,Ds);break;case 1024:Ds.effectTag&=-1025;break;case 1028:Ds.effectTag&=-1025,hs(Ds.alternate,Ds);break;case 4:hs(Ds.alternate,Ds);break;case 8:cs(s,c=Ds,u),ss(c)}Ds=Ds.nextEffect}}catch(L){if(null===Ds)throw Error(a(330));vu(Ds,L),Ds=Ds.nextEffect}}while(null!==Ds);if(S=mn,b=pn(),_=S.focusedElem,u=S.selectionRange,b!==_&&_&&_.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(_.ownerDocument.documentElement,_)){null!==u&&dn(_)&&(b=u.start,void 0===(S=u.end)&&(S=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(S,_.value.length)):(S=(b=_.ownerDocument||document)&&b.defaultView||window).getSelection&&(S=S.getSelection(),c=_.textContent.length,s=Math.min(u.start,c),u=void 0===u.end?s:Math.min(u.end,c),!S.extend&&s>u&&(c=u,u=s,s=c),c=fn(_,s),h=fn(_,u),c&&h&&(1!==S.rangeCount||S.anchorNode!==c.node||S.anchorOffset!==c.offset||S.focusNode!==h.node||S.focusOffset!==h.offset)&&((b=b.createRange()).setStart(c.node,c.offset),S.removeAllRanges(),s>u?(S.addRange(b),S.extend(h.node,h.offset)):(b.setEnd(h.node,h.offset),S.addRange(b))))),b=[];for(S=_;S=S.parentNode;)1===S.nodeType&&b.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<b.length;_++)(S=b[_]).element.scrollLeft=S.left,S.element.scrollTop=S.top}Ye=!!gn,mn=gn=null,t.current=n,Ds=i;do{try{for(_=t;null!==Ds;){var w=Ds.effectTag;if(36&w&&os(_,Ds.alternate,Ds),128&w){b=void 0;var x=Ds.ref;if(null!==x){var T=Ds.stateNode;switch(Ds.tag){case 5:b=T;break;default:b=T}"function"===typeof x?x(b):x.current=b}}Ds=Ds.nextEffect}}catch(L){if(null===Ds)throw Error(a(330));vu(Ds,L),Ds=Ds.nextEffect}}while(null!==Ds);Ds=null,Ni(),ws=o}else t.current=n;if(js)js=!1,Bs=t,Us=e;else for(Ds=i;null!==Ds;)e=Ds.nextEffect,Ds.nextEffect=null,Ds=e;if(0===(e=t.firstPendingTime)&&(Vs=null),1073741823===e?t===Ws?Ks++:(Ks=0,Ws=t):Ks=0,"function"===typeof bu&&bu(n.stateNode,r),Js(t),ks)throw ks=!1,t=Fs,Fs=null,t;return 0!==(8&ws)||zi(),null}function du(){for(;null!==Ds;){var t=Ds.effectTag;0!==(256&t)&&ns(Ds.alternate,Ds),0===(512&t)||js||(js=!0,Ki(97,(function(){return gu(),null}))),Ds=Ds.nextEffect}}function gu(){if(90!==Us){var t=97<Us?97:Us;return Us=90,Gi(t,mu)}}function mu(){if(null===Bs)return!1;var t=Bs;if(Bs=null,0!==(48&ws))throw Error(a(331));var e=ws;for(ws|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:rs(5,n),is(5,n)}}catch(r){if(null===t)throw Error(a(330));vu(t,r)}n=t.nextEffect,t.nextEffect=null,t=n}return ws=e,zi(),!0}function yu(t,e,n){uo(t,e=ds(t,e=Qa(n,e),1073741823)),null!==(t=Xs(t,1073741823))&&Js(t)}function vu(t,e){if(3===t.tag)yu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){yu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vs||!Vs.has(r))){uo(n,t=gs(n,t=Qa(e,t),1073741823)),null!==(n=Xs(n,1073741823))&&Js(n);break}}n=n.return}}function Eu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),xs===t&&Ls===n?Cs===Ss||Cs===bs&&1073741823===Ms&&ji()-Ns<500?nu(t,Ls):Is=!0:Pu(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,Js(t)))}function _u(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(e=Hs(e=Ys(),t,null)),null!==(t=Xs(t,e))&&Js(t)}ms=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||fi.current)Ra=!0;else{if(r<n){switch(Ra=!1,e.tag){case 3:ja(e),Aa();break;case 5:if(No(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:gi(e.type)&&Ei(e);break;case 4:Po(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,li(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?Wa(t,e,n):(li(ko,1&ko.current),null!==(e=qa(t,e,n))?e.sibling:null);li(ko,1&ko.current);break;case 19:if(r=e.childExpirationTime>=n,0!==(64&t.effectTag)){if(r)return Ha(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),li(ko,ko.current),!r)return null}return qa(t,e,n)}Ra=!1}}else Ra=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=di(e,hi.current),no(e,n),i=qo(null,e,r,t,i,n),e.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,gi(r)){var o=!0;Ei(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(e);var s=r.getDerivedStateFromProps;"function"===typeof s&&go(e,r,s,t),i.updater=mo,e.stateNode=i,i._reactInternalFiber=e,_o(e,r,t,n),e=Va(null,e,r,!0,o,n)}else e.tag=0,Oa(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=function(t){if("function"===typeof t)return Tu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===ut)return 11;if(t===ht)return 14}return 2}(i),t=qi(i,t),o){case 0:e=ka(null,e,i,t,n);break t;case 1:e=Fa(null,e,i,t,n);break t;case 11:e=Pa(null,e,i,t,n);break t;case 14:e=Ia(null,e,i,qi(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,ka(t,e,r,i=e.elementType===r?i:qi(r,i),n);case 1:return r=e.type,i=e.pendingProps,Fa(t,e,r,i=e.elementType===r?i:qi(r,i),n);case 3:if(ja(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,ao(t,e),co(e,r,null,n),(r=e.memoizedState.element)===i)Aa(),e=qa(t,e,n);else{if((i=e.stateNode.hydrate)&&(ba=bn(e.stateNode.containerInfo.firstChild),_a=e,i=Sa=!0),i)for(n=Lo(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Oa(t,e,r,n),Aa();e=e.child}return e;case 5:return No(e),null===t&&Ta(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,vn(r,i)?s=null:null!==o&&vn(r,o)&&(e.effectTag|=16),Da(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Oa(t,e,s,n),e=e.child),e;case 6:return null===t&&Ta(e),null;case 13:return Wa(t,e,n);case 4:return Po(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=To(e,null,r,n):Oa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Pa(t,e,r,i=e.elementType===r?i:qi(r,i),n);case 7:return Oa(t,e,e.pendingProps,n),e.child;case 8:case 12:return Oa(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(li(Xi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=Fr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!fi.current){e=qa(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===u.tag&&((c=so(n,null)).tag=2,uo(u,c)),u.expirationTime<n&&(u.expirationTime=n),null!==(c=u.alternate)&&c.expirationTime<n&&(c.expirationTime=n),eo(u.return,n),l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Oa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,no(e,n),r=r(i=ro(i,o.unstable_observedBits)),e.effectTag|=1,Oa(t,e,r,n),e.child;case 14:return o=qi(i=e.type,e.pendingProps),Ia(t,e,i,o=qi(i.type,o),r,n);case 15:return Na(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,gi(r)?(t=!0,Ei(e)):t=!1,no(e,n),vo(e,r,i),_o(e,r,i,n),Va(null,e,r,!0,t,n);case 19:return Ha(t,e,n)}throw Error(a(156,e.tag))};var bu=null,Su=null;function wu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function xu(t,e,n,r){return new wu(t,e,n,r)}function Tu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Lu(t,e){var n=t.alternate;return null===n?((n=xu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cu(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)Tu(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case nt:return Au(n.children,i,o,e);case st:s=8,i|=7;break;case rt:s=8,i|=1;break;case it:return(t=xu(12,n,e,8|i)).elementType=it,t.type=it,t.expirationTime=o,t;case lt:return(t=xu(13,n,e,i)).type=lt,t.elementType=lt,t.expirationTime=o,t;case ct:return(t=xu(19,n,e,i)).elementType=ct,t.expirationTime=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case ot:s=10;break t;case at:s=9;break t;case ut:s=11;break t;case ht:s=14;break t;case ft:s=16,r=null;break t;case pt:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=xu(s,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Au(t,e,n,r){return(t=xu(7,t,r,e)).expirationTime=n,t}function Mu(t,e,n){return(t=xu(6,t,null,e)).expirationTime=n,t}function Ru(t,e,n){return(e=xu(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ou(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Pu(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function Iu(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Nu(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Du(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function ku(t,e,n,r){var i=e.current,o=Ys(),s=fo.suspense;o=Hs(o,i,s);t:if(n){e:{if($t(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(gi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var l=n.type;if(gi(l)){n=vi(n,l,u);break t}}n=u}else n=ci;return null===e.context?e.context=n:e.pendingContext=n,(e=so(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),uo(i,e),qs(i,o),o}function Fu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Vu(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function ju(t,e){Vu(t,e),(t=t.alternate)&&Vu(t,e)}function Bu(t,e,n){var r=new Ou(t,e,n=null!=n&&!0===n.hydrate),i=xu(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,oo(i),t[Ln]=r.current,n&&0!==e&&function(t,e){var n=Qt(e);Le.forEach((function(t){de(t,e,n)})),Ce.forEach((function(t){de(t,e,n)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function Uu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Gu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var t=Fu(a);s.call(t)}}ku(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Bu(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var t=Fu(a);u.call(t)}}eu((function(){ku(e,a,t,i)}))}return Fu(a)}function Ku(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Wu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Uu(e))throw Error(a(200));return Ku(t,e,null,n)}Bu.prototype.render=function(t){ku(t,this._internalRoot,null,null)},Bu.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;ku(null,t,null,(function(){e[Ln]=null}))},ge=function(t){if(13===t.tag){var e=Hi(Ys(),150,100);qs(t,e),ju(t,e)}},me=function(t){13===t.tag&&(qs(t,3),ju(t,3))},ye=function(t){if(13===t.tag){var e=Ys();qs(t,e=Hs(e,t,null)),ju(t,e)}},A=function(t,e,n){switch(e){case"input":if(Tt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Rn(r);if(!i)throw Error(a(90));bt(r),Tt(r,i)}}}break;case"textarea":Pt(t,n);break;case"select":null!=(e=n.value)&&Mt(t,!!n.multiple,e,!1)}},N=tu,D=function(t,e,n,r,i){var o=ws;ws|=4;try{return Gi(98,t.bind(null,e,n,r,i))}finally{0===(ws=o)&&zi()}},k=function(){0===(49&ws)&&(function(){if(null!==Gs){var t=Gs;Gs=null,t.forEach((function(t,e){Du(e,t),Js(e)})),zi()}}(),gu())},F=function(t,e){var n=ws;ws|=2;try{return t(e)}finally{0===(ws=n)&&zi()}};var zu={Events:[An,Mn,Rn,L,w,Fn,function(t){ie(t,kn)},P,I,Je,se,gu,{current:!1}]};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);bu=function(t){try{e.onCommitFiberRoot(n,t,void 0,64===(64&t.current.effectTag))}catch(r){}},Su=function(t){try{e.onCommitFiberUnmount(n,t)}catch(r){}}}catch(r){}})(i({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ne(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Cn,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zu,e.createPortal=Wu,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=ne(e))?null:t.stateNode},e.flushSync=function(t,e){if(0!==(48&ws))throw Error(a(187));var n=ws;ws|=1;try{return Gi(99,t.bind(null,e))}finally{ws=n,zi()}},e.hydrate=function(t,e,n){if(!Uu(e))throw Error(a(200));return Gu(null,t,e,!0,n)},e.render=function(t,e,n){if(!Uu(e))throw Error(a(200));return Gu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Uu(t))throw Error(a(40));return!!t._reactRootContainer&&(eu((function(){Gu(null,null,t,!1,(function(){t._reactRootContainer=null,t[Ln]=null}))})),!0)},e.unstable_batchedUpdates=tu,e.unstable_createPortal=function(t,e){return Wu(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Uu(n))throw Error(a(200));if(null==t||void 0===t._reactInternalFiber)throw Error(a(38));return Gu(t,e,n,!1,r)},e.version="16.13.1"},function(t,e,n){"use strict";t.exports=n(389)},function(t,e,n){"use strict";var r,i,o,a,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,l=null,c=function t(){if(null!==u)try{var n=e.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(t,0),r}},h=Date.now();e.unstable_now=function(){return Date.now()-h},r=function(t){null!==u?setTimeout(r,0,t):(u=t,setTimeout(c,0))},i=function(t,e){l=setTimeout(t,e)},o=function(){clearTimeout(l)},a=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var f=window.performance,p=window.Date,d=window.setTimeout,g=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)e.unstable_now=function(){return f.now()};else{var y=p.now();e.unstable_now=function(){return p.now()-y}}var v=!1,E=null,_=-1,b=5,S=0;a=function(){return e.unstable_now()>=S},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<t?Math.floor(1e3/t):5};var w=new MessageChannel,x=w.port2;w.port1.onmessage=function(){if(null!==E){var t=e.unstable_now();S=t+b;try{E(!0,t)?x.postMessage(null):(v=!1,E=null)}catch(n){throw x.postMessage(null),n}}else v=!1},r=function(t){E=t,v||(v=!0,x.postMessage(null))},i=function(t,n){_=d((function(){t(e.unstable_now())}),n)},o=function(){g(_),_=-1}}function T(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<A(i,e)))break t;t[r]=e,t[n]=i,n=r}}function L(t){return void 0===(t=t[0])?null:t}function C(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>A(a,n))void 0!==u&&0>A(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>A(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function A(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var M=[],R=[],O=1,P=null,I=3,N=!1,D=!1,k=!1;function F(t){for(var e=L(R);null!==e;){if(null===e.callback)C(R);else{if(!(e.startTime<=t))break;C(R),e.sortIndex=e.expirationTime,T(M,e)}e=L(R)}}function V(t){if(k=!1,F(t),!D)if(null!==L(M))D=!0,r(j);else{var e=L(R);null!==e&&i(V,e.startTime-t)}}function j(t,n){D=!1,k&&(k=!1,o()),N=!0;var r=I;try{for(F(n),P=L(M);null!==P&&(!(P.expirationTime>n)||t&&!a());){var s=P.callback;if(null!==s){P.callback=null,I=P.priorityLevel;var u=s(P.expirationTime<=n);n=e.unstable_now(),"function"===typeof u?P.callback=u:P===L(M)&&C(M),F(n)}else C(M);P=L(M)}if(null!==P)var l=!0;else{var c=L(R);null!==c&&i(V,c.startTime-n),l=!1}return l}finally{P=null,I=r,N=!1}}function B(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){D||N||(D=!0,r(j))},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return L(M)},e.unstable_next=function(t){switch(I){case 1:case 2:case 3:var e=3;break;default:e=I}var n=I;I=e;try{return t()}finally{I=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=U,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=I;I=t;try{return e()}finally{I=n}},e.unstable_scheduleCallback=function(t,n,a){var s=e.unstable_now();if("object"===typeof a&&null!==a){var u=a.delay;u="number"===typeof u&&0<u?s+u:s,a="number"===typeof a.timeout?a.timeout:B(t)}else a=B(t),u=s;return t={id:O++,callback:n,priorityLevel:t,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(t.sortIndex=u,T(R,t),null===L(M)&&t===L(R)&&(k?o():k=!0,i(V,u-s))):(t.sortIndex=a,T(M,t),D||N||(D=!0,r(j))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();F(t);var n=L(M);return n!==P&&null!==P&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<P.expirationTime||a()},e.unstable_wrapCallback=function(t){var e=I;return function(){var n=I;I=e;try{return t.apply(this,arguments)}finally{I=n}}}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(392);Object.defineProperty(e,"reduxBatch",{enumerable:!0,get:function(){return r.reduxBatch}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reduxBatch=function(t){var e=[],n=void 0;function r(){e===n&&(e=e.slice())}function i(t){if("function"!==typeof t)throw new Error("Invalid listener, expected a function");var n=!0;return r(),e.push(t),function(){n&&(r(),e.splice(e.indexOf(t),1),n=!1)}}function o(){for(var t=e,r=0;r<t.length;++r)n=t,t[r]()}return function(){var e=t.apply(void 0,arguments),n=!1,r=!1;function a(t){return Array.isArray(t)?t.map((function(t){return a(t)})):e.dispatch(t)}function s(t){var e=r;e||(n=!1,r=!0);var i=a(t),s=n&&!e;return e||(n=!1,r=!1),s&&o(),i}return e.subscribe((function(){r?n=!0:o()})),Object.assign({},e,{dispatch:s,subscribe:i})}}},function(t,e,n){"use strict";var r=n(394);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,E=r?Symbol.for("react.fundamental"):60117,_=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function S(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case h:case f:case a:case u:case s:case d:return t;default:switch(t=t&&t.$$typeof){case c:case p:case y:case m:case l:return t;default:return e}}case o:return e}}}function w(t){return S(t)===f}e.AsyncMode=h,e.ConcurrentMode=f,e.ContextConsumer=c,e.ContextProvider=l,e.Element=i,e.ForwardRef=p,e.Fragment=a,e.Lazy=y,e.Memo=m,e.Portal=o,e.Profiler=u,e.StrictMode=s,e.Suspense=d,e.isAsyncMode=function(t){return w(t)||S(t)===h},e.isConcurrentMode=w,e.isContextConsumer=function(t){return S(t)===c},e.isContextProvider=function(t){return S(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return S(t)===p},e.isFragment=function(t){return S(t)===a},e.isLazy=function(t){return S(t)===y},e.isMemo=function(t){return S(t)===m},e.isPortal=function(t){return S(t)===o},e.isProfiler=function(t){return S(t)===u},e.isStrictMode=function(t){return S(t)===s},e.isSuspense=function(t){return S(t)===d},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===a||t===f||t===u||t===s||t===d||t===g||"object"===typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===m||t.$$typeof===l||t.$$typeof===c||t.$$typeof===p||t.$$typeof===E||t.$$typeof===_||t.$$typeof===b||t.$$typeof===v)},e.typeOf=S},function(t,e,n){var r=n(99),i=n(119),o=n(9),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},function(t,e,n){var r=n(72),i=n(39);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e,n){var r=n(99),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(248),i=n(260),o=n(262);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(143),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(143);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(143);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(143);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(142);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(142),i=n(180),o=n(182);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(181),i=n(412),o=n(22),a=n(249),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:s).test(a(t))}},function(t,e,n){var r=n(413),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(61)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(416),i=n(142),o=n(180);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(417),i=n(418),o=n(419),a=n(420),s=n(421);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(144);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(144),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(144),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(144);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(145);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(145);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(145);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(145);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(141),i=n(250),o=n(430),a=n(432),s=n(123),u=n(9),l=n(121),c=n(148),h="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,p,d,g){var m=u(t),y=u(e),v=m?"[object Array]":s(t),E=y?"[object Array]":s(e),_=(v="[object Arguments]"==v?h:v)==h,b=(E="[object Arguments]"==E?h:E)==h,S=v==E;if(S&&l(t)){if(!l(e))return!1;m=!0,_=!1}if(S&&!_)return g||(g=new r),m||c(t)?i(t,e,n,p,d,g):o(t,e,v,n,p,d,g);if(!(1&n)){var w=_&&f.call(t,"__wrapped__"),x=b&&f.call(e,"__wrapped__");if(w||x){var T=w?t.value():t,L=x?e.value():e;return g||(g=new r),d(T,L,n,p,g)}}return!!S&&(g||(g=new r),a(t,e,n,p,d,g))}},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(99),i=n(252),o=n(120),a=n(250),s=n(431),u=n(184),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(t,e,n,r,l,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=s;case"[object Set]":var d=1&r;if(p||(p=u),t.size!=e.size&&!d)return!1;var g=f.get(t);if(g)return g==e;r|=2,f.set(t,e);var m=a(p(t),p(e),r,l,h,f);return f.delete(t),m;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e,n){var r=n(253),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var u=1&n,l=r(t),c=l.length;if(c!=r(e).length&&!u)return!1;for(var h=c;h--;){var f=l[h];if(!(u?f in e:i.call(e,f)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var d=!0;s.set(t,e),s.set(e,t);for(var g=u;++h<c;){var m=t[f=l[h]],y=e[f];if(o)var v=u?o(y,m,f,e,t,s):o(m,y,f,t,e,s);if(!(void 0===v?m===y||a(m,y,n,o,s):v)){d=!1;break}g||(g="constructor"==f)}if(d&&!g){var E=t.constructor,_=e.constructor;E==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof E&&E instanceof E&&"function"==typeof _&&_ instanceof _||(d=!1)}return s.delete(t),s.delete(e),d}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(72),i=n(187),o=n(39),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(258)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(82)(n(61),"DataView");t.exports=r},function(t,e,n){var r=n(82)(n(61),"Promise");t.exports=r},function(t,e,n){var r=n(82)(n(61),"WeakMap");t.exports=r},function(t,e,n){var r=n(183),i=n(26),o=n(263),a=n(189),s=n(261),u=n(262),l=n(103);t.exports=function(t,e){return a(t)&&s(e)?u(l(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,3)}}},function(t,e,n){var r=n(442),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(443);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(182);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(445);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(99),i=n(65),o=n(9),a=n(102),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(101),i=n(119),o=n(9),a=n(122),s=n(187),u=n(103);t.exports=function(t,e,n){for(var l=-1,c=(e=r(e,t)).length,h=!1;++l<c;){var f=u(e[l]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++l!=c?h:!!(c=null==t?0:t.length)&&s(c)&&a(f,c)&&(o(t)||i(t))}},function(t,e,n){var r=n(449),i=n(450),o=n(189),a=n(103);t.exports=function(t){return o(t)?r(a(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(150);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}},function(t,e,n){var r=n(66);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(455);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,u=n.length;++i<s;){var l=r(o[i],a[i]);if(l)return i>=u?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(102);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t===t,a=r(t),s=void 0!==e,u=null===e,l=e===e,c=r(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||i&&s&&l||!n&&l||!o)return 1;if(!i&&!a&&!c&&t<e||c&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(458),i=n(268),o=n(124),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var i=n(),o=16-(i-r);if(r=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e){t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},function(t,e){t.exports=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}},function(t,e,n){var r=n(37),i=n(66),o=n(83);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!i(e)){var u=r(n,3);e=o(e),n=function(t){return u(s[t],t,s)}}var l=t(e,n,a);return l>-1?s[u?e[l]:l]:void 0}}},function(t,e,n){var r=n(464);t.exports=function(t){return t?(t=r(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}},function(t,e,n){var r=n(22),i=n(102),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=s.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):a.test(t)?NaN:+t}},function(t,e){t.exports=function(t){return t!==t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e,n){var r=n(259),i=n(468),o=n(184),a=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=a},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(272),i=n(263);t.exports=function(t,e){return r(t,e,(function(e,n){return i(t,n)}))}},function(t,e,n){var r=n(22),i=n(149),o=n(471),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(65);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},function(t,e,n){var r=n(72),i=n(9),o=n(39);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},function(t,e,n){var r=n(106),i=n(83);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(106),i=n(126);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(106),i=n(185);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(106),i=n(275);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(198),i=n(480),o=n(481),a=n(482),s=n(280);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return o(t);case"[object Set]":return new u;case"[object Symbol]":return a(t)}}},function(t,e,n){var r=n(198);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(99),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,n){var r=n(22),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e,n){var r=n(485),i=n(100),o=n(188),a=o&&o.isMap,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(123),i=n(39);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(487),i=n(100),o=n(188),a=o&&o.isSet,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(123),i=n(39);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(150),i=n(178);t.exports=function(t,e){return e.length<2?t:r(t,i(e,0,-1))}},function(t,e,n){var r=n(283);t.exports=function(t){return r(t)?void 0:t}},function(t,e,n){var r=n(104);t.exports=function(t,e){var n;return r(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}},function(t,e,n){var r=n(104);t.exports=function(t,e){var n=!0;return r(t,(function(t,r,i){return n=!!e(t,r,i)})),n}},function(t,e,n){"use strict";n.r(e),n.d(e,"Headers",(function(){return d})),n.d(e,"Request",(function(){return b})),n.d(e,"Response",(function(){return x})),n.d(e,"DOMException",(function(){return L})),n.d(e,"fetch",(function(){return C}));var r="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof r&&r,i="URLSearchParams"in r,o="Symbol"in r&&"iterator"in Symbol,a="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in r,u="ArrayBuffer"in r;if(u)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&l.indexOf(Object.prototype.toString.call(t))>-1};function h(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!==typeof t&&(t=String(t)),t}function p(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return o&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function g(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function m(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function y(t){var e=new FileReader,n=m(e);return e.readAsArrayBuffer(t),n}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:a&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:i&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():u&&a&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=v(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var t=g(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=g(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(y)}),this.text=function(){var t=g(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=m(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=h(t),e=f(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},d.prototype.delete=function(t){delete this.map[h(t)]},d.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},d.prototype.set=function(t,e){this.map[h(t)]=f(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),p(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),p(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),p(t)},o&&(d.prototype[Symbol.iterator]=d.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t,e){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=function(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===e.cache||"no-cache"===e.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function S(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function w(t){var e=new d;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e}function x(t,e){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},E.call(b.prototype),E.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},x.error=function(){var t=new x(null,{status:0,statusText:""});return t.type="error",t};var T=[301,302,303,307,308];x.redirect=function(t,e){if(-1===T.indexOf(e))throw new RangeError("Invalid status code");return new x(null,{status:e,headers:{location:t}})};var L=r.DOMException;try{new L}catch(A){(L=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),L.prototype.constructor=L}function C(t,e){return new Promise((function(n,i){var o=new b(t,e);if(o.signal&&o.signal.aborted)return i(new L("Aborted","AbortError"));var s=new XMLHttpRequest;function l(){s.abort()}s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:w(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;setTimeout((function(){n(new x(e,t))}),0)},s.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){i(new L("Aborted","AbortError"))}),0)},s.open(o.method,function(t){try{return""===t&&r.location.href?r.location.href:t}catch(e){return t}}(o.url),!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&(a?s.responseType="blob":u&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!e||"object"!==typeof e.headers||e.headers instanceof d?o.headers.forEach((function(t,e){s.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){s.setRequestHeader(t,f(e.headers[t]))})),o.signal&&(o.signal.addEventListener("abort",l),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",l)}),s.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}C.polyfill=!0,r.fetch||(r.fetch=C,r.Headers=d,r.Request=b,r.Response=x)},function(t,e,n){"use strict";var r=n(69),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var d=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var m="function"===typeof Symbol&&Symbol.iterator;function y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function _(t,e,n){this.props=t,this.context=e,this.refs=E,this.updater=n||v}function b(){}function S(t,e,n){this.props=t,this.context=e,this.refs=E,this.updater=n||v}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(y(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=_.prototype;var w=S.prototype=new b;w.constructor=S,r(w,_.prototype),w.isPureReactComponent=!0;var x={current:null},T={current:null},L=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,n){var r,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)L.call(e,r)&&!C.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:T.current}}function M(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var R=/\/+/g,O=[];function P(t,e,n,r){if(O.length){var i=O.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function I(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>O.length&&O.push(t)}function N(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case a:u=!0}}if(u)return r(i,e,""===n?"."+D(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+D(s=e[l],l);u+=t(s,c,r,i)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=m&&e[m]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=t(s=s.value,c=n+D(s,l++),r,i);else if("object"===s)throw r=""+e,Error(y(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,n)}function D(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function k(t,e){t.func.call(t.context,e,t.count++)}function F(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?V(t,r,n,(function(t){return t})):null!=t&&(M(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(R,"$&/")+"/")+n)),r.push(t))}function V(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(R,"$&/")+"/"),N(t,F,e=P(e,o,r,i)),I(e)}function j(){var t=x.current;if(null===t)throw Error(y(321));return t}var B={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return V(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;N(t,k,e=P(null,null,e,n)),I(e)},count:function(t){return N(t,(function(){return null}),null)},toArray:function(t){var e=[];return V(t,e,null,(function(t){return t})),e},only:function(t){if(!M(t))throw Error(y(143));return t}},createRef:function(){return{current:null}},Component:_,PureComponent:S,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:f,render:t}},lazy:function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return j().useCallback(t,e)},useContext:function(t,e){return j().useContext(t,e)},useEffect:function(t,e){return j().useEffect(t,e)},useImperativeHandle:function(t,e,n){return j().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return j().useLayoutEffect(t,e)},useMemo:function(t,e){return j().useMemo(t,e)},useReducer:function(t,e,n){return j().useReducer(t,e,n)},useRef:function(t){return j().useRef(t)},useState:function(t){return j().useState(t)},Fragment:s,Profiler:l,StrictMode:u,Suspense:p,createElement:A,cloneElement:function(t,e,n){if(null===t||void 0===t)throw Error(y(267,t));var i=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=T.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)L.call(e,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:o,type:t.type,key:a,ref:s,props:i,_owner:u}},createFactory:function(t){var e=A.bind(null,t);return e.type=t,e},isValidElement:M,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:x,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:r}},U={default:B},G=U&&B||U;t.exports=G.default||G},function(t,e,n){"use strict";var r=n(69),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var d=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var m="function"===typeof Symbol&&Symbol.iterator;function y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function _(t,e,n){this.props=t,this.context=e,this.refs=E,this.updater=n||v}function b(){}function S(t,e,n){this.props=t,this.context=e,this.refs=E,this.updater=n||v}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(y(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=_.prototype;var w=S.prototype=new b;w.constructor=S,r(w,_.prototype),w.isPureReactComponent=!0;var x={current:null},T={current:null},L=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,n){var r,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)L.call(e,r)&&!C.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:T.current}}function M(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var R=/\/+/g,O=[];function P(t,e,n,r){if(O.length){var i=O.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function I(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>O.length&&O.push(t)}function N(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case a:u=!0}}if(u)return r(i,e,""===n?"."+D(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+D(s=e[l],l);u+=t(s,c,r,i)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=m&&e[m]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=t(s=s.value,c=n+D(s,l++),r,i);else if("object"===s)throw r=""+e,Error(y(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,n)}function D(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function k(t,e){t.func.call(t.context,e,t.count++)}function F(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?V(t,r,n,(function(t){return t})):null!=t&&(M(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(R,"$&/")+"/")+n)),r.push(t))}function V(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(R,"$&/")+"/"),N(t,F,e=P(e,o,r,i)),I(e)}function j(){var t=x.current;if(null===t)throw Error(y(321));return t}var B={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return V(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;N(t,k,e=P(null,null,e,n)),I(e)},count:function(t){return N(t,(function(){return null}),null)},toArray:function(t){var e=[];return V(t,e,null,(function(t){return t})),e},only:function(t){if(!M(t))throw Error(y(143));return t}},createRef:function(){return{current:null}},Component:_,PureComponent:S,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:f,render:t}},lazy:function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return j().useCallback(t,e)},useContext:function(t,e){return j().useContext(t,e)},useEffect:function(t,e){return j().useEffect(t,e)},useImperativeHandle:function(t,e,n){return j().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return j().useLayoutEffect(t,e)},useMemo:function(t,e){return j().useMemo(t,e)},useReducer:function(t,e,n){return j().useReducer(t,e,n)},useRef:function(t){return j().useRef(t)},useState:function(t){return j().useState(t)},Fragment:s,Profiler:l,StrictMode:u,Suspense:p,createElement:A,cloneElement:function(t,e,n){if(null===t||void 0===t)throw Error(y(267,t));var i=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=T.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)L.call(e,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:o,type:t.type,key:a,ref:s,props:i,_owner:u}},createFactory:function(t){var e=A.bind(null,t);return e.type=t,e},isValidElement:M,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:x,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:r}},U={default:B},G=U&&B||U;t.exports=G.default||G},function(t,e,n){"use strict";var r=n(69),i=n(48);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a="function"===typeof Symbol&&Symbol.for,s=a?Symbol.for("react.portal"):60106,u=a?Symbol.for("react.fragment"):60107,l=a?Symbol.for("react.strict_mode"):60108,c=a?Symbol.for("react.profiler"):60114,h=a?Symbol.for("react.provider"):60109,f=a?Symbol.for("react.context"):60110,p=a?Symbol.for("react.concurrent_mode"):60111,d=a?Symbol.for("react.forward_ref"):60112,g=a?Symbol.for("react.suspense"):60113,m=a?Symbol.for("react.suspense_list"):60120,y=a?Symbol.for("react.memo"):60115,v=a?Symbol.for("react.lazy"):60116,E=a?Symbol.for("react.fundamental"):60117,_=a?Symbol.for("react.scope"):60119,b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function S(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case u:return"Fragment";case s:return"Portal";case c:return"Profiler";case l:return"StrictMode";case g:return"Suspense";case m:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case f:return"Context.Consumer";case h:return"Context.Provider";case d:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case y:return S(t.type);case v:if(t=1===t._status?t._result:null)return S(t)}return null}b.hasOwnProperty("ReactCurrentDispatcher")||(b.ReactCurrentDispatcher={current:null}),b.hasOwnProperty("ReactCurrentBatchConfig")||(b.ReactCurrentBatchConfig={suspense:null});var w={};function x(t,e){for(var n=0|t._threadCount;n<=e;n++)t[n]=t._currentValue2,t._threadCount=n+1}for(var T=new Uint16Array(16),L=0;15>L;L++)T[L]=L+1;T[15]=0;var C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A=Object.prototype.hasOwnProperty,M={},R={};function O(t){return!!A.call(R,t)||!A.call(M,t)&&(C.test(t)?R[t]=!0:(M[t]=!0,!1))}function P(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){I[t]=new P(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];I[e]=new P(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){I[t]=new P(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){I[t]=new P(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){I[t]=new P(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){I[t]=new P(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){I[t]=new P(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){I[t]=new P(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){I[t]=new P(t,5,!1,t.toLowerCase(),null,!1)}));var N=/[\-:]([a-z])/g;function D(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(N,D);I[e]=new P(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(N,D);I[e]=new P(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(N,D);I[e]=new P(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){I[t]=new P(t,1,!1,t.toLowerCase(),null,!1)})),I.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){I[t]=new P(t,1,!1,t.toLowerCase(),null,!0)}));var k=/["'&<>]/;function F(t){if("boolean"===typeof t||"number"===typeof t)return""+t;t=""+t;var e=k.exec(t);if(e){var n,r="",i=0;for(n=e.index;n<t.length;n++){switch(t.charCodeAt(n)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==n&&(r+=t.substring(i,n)),i=n+1,r+=e}t=i!==n?r+t.substring(i,n):r}return t}function V(t,e){var n,r=I.hasOwnProperty(t)?I[t]:null;return(n="style"!==t)&&(n=null!==r?0===r.type:2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])),n||function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(t,e,r,!1)?"":null!==r?(t=r.attributeName,3===(n=r.type)||4===n&&!0===e?t+'=""':(r.sanitizeURL&&(e=""+e),t+'="'+F(e)+'"')):O(t)?t+'="'+F(e)+'"':""}var j="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},B=null,U=null,G=null,K=!1,W=!1,z=null,Y=0;function H(){if(null===B)throw Error(o(321));return B}function q(){if(0<Y)throw Error(o(312));return{memoizedState:null,queue:null,next:null}}function X(){return null===G?null===U?(K=!1,U=G=q()):(K=!0,G=U):null===G.next?(K=!1,G=G.next=q()):(K=!0,G=G.next),G}function Z(t,e,n,r){for(;W;)W=!1,Y+=1,G=null,n=t(e,r);return U=B=null,Y=0,G=z=null,n}function J(t,e){return"function"===typeof e?e(t):e}function Q(t,e,n){if(B=H(),G=X(),K){var r=G.queue;if(e=r.dispatch,null!==z&&void 0!==(n=z.get(r))){z.delete(r),r=G.memoizedState;do{r=t(r,n.action),n=n.next}while(null!==n);return G.memoizedState=r,[r,e]}return[G.memoizedState,e]}return t=t===J?"function"===typeof e?e():e:void 0!==n?n(e):e,G.memoizedState=t,t=(t=G.queue={last:null,dispatch:null}).dispatch=$.bind(null,B,t),[G.memoizedState,t]}function $(t,e,n){if(!(25>Y))throw Error(o(301));if(t===B)if(W=!0,t={action:n,next:null},null===z&&(z=new Map),void 0===(n=z.get(e)))z.set(e,t);else{for(e=n;null!==e.next;)e=e.next;e.next=t}}function tt(){}var et=0,nt={readContext:function(t){var e=et;return x(t,e),t[e]},useContext:function(t){H();var e=et;return x(t,e),t[e]},useMemo:function(t,e){if(B=H(),e=void 0===e?null:e,null!==(G=X())){var n=G.memoizedState;if(null!==n&&null!==e){t:{var r=n[1];if(null===r)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!j(e[i],r[i])){r=!1;break t}r=!0}}if(r)return n[0]}}return t=t(),G.memoizedState=[t,e],t},useReducer:Q,useRef:function(t){B=H();var e=(G=X()).memoizedState;return null===e?(t={current:t},G.memoizedState=t):e},useState:function(t){return Q(J,t)},useLayoutEffect:function(){},useCallback:function(t){return t},useImperativeHandle:tt,useEffect:tt,useDebugValue:tt,useResponder:function(t,e){return{props:e,responder:t}},useDeferredValue:function(t){return H(),t},useTransition:function(){return H(),[function(t){t()},!1]}},rt="http://www.w3.org/1999/xhtml";function it(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ot={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},at=r({menuitem:!0},ot),st={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ut=["Webkit","ms","Moz","O"];Object.keys(st).forEach((function(t){ut.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),st[e]=st[t]}))}));var lt=/([A-Z])/g,ct=/^ms-/,ht=i.Children.toArray,ft=b.ReactCurrentDispatcher,pt={listing:!0,pre:!0,textarea:!0},dt=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,gt={},mt={};var yt=Object.prototype.hasOwnProperty,vt={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Et(t,e){if(void 0===t)throw Error(o(152,S(e)||"Component"))}function _t(t,e,n){function a(i,a){var s=a.prototype&&a.prototype.isReactComponent,u=function(t,e,n,r){if(r&&("object"===typeof(r=t.contextType)&&null!==r))return x(r,n),r[n];if(t=t.contextTypes){for(var i in n={},t)n[i]=e[i];e=n}else e=w;return e}(a,e,n,s),l=[],c=!1,h={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===l)return null},enqueueReplaceState:function(t,e){c=!0,l=[e]},enqueueSetState:function(t,e){if(null===l)return null;l.push(e)}};if(s){if(s=new a(i.props,u,h),"function"===typeof a.getDerivedStateFromProps){var f=a.getDerivedStateFromProps.call(null,i.props,s.state);null!=f&&(s.state=r({},s.state,f))}}else if(B={},s=a(i.props,u,h),null==(s=Z(a,i.props,s,u))||null==s.render)return void Et(t=s,a);if(s.props=i.props,s.context=u,s.updater=h,void 0===(h=s.state)&&(s.state=h=null),"function"===typeof s.UNSAFE_componentWillMount||"function"===typeof s.componentWillMount)if("function"===typeof s.componentWillMount&&"function"!==typeof a.getDerivedStateFromProps&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&"function"!==typeof a.getDerivedStateFromProps&&s.UNSAFE_componentWillMount(),l.length){h=l;var p=c;if(l=null,c=!1,p&&1===h.length)s.state=h[0];else{f=p?h[0]:s.state;var d=!0;for(p=p?1:0;p<h.length;p++){var g=h[p];null!=(g="function"===typeof g?g.call(s,f,i.props,u):g)&&(d?(d=!1,f=r({},f,g)):r(f,g))}s.state=f}}else l=null;if(Et(t=s.render(),a),"function"===typeof s.getChildContext&&"object"===typeof(i=a.childContextTypes)){var m=s.getChildContext();for(var y in m)if(!(y in i))throw Error(o(108,S(a)||"Unknown",y))}m&&(e=r({},e,m))}for(;i.isValidElement(t);){var s=t,u=s.type;if("function"!==typeof u)break;a(s,u)}return{child:t,context:e}}var bt=function(){function t(t,e){i.isValidElement(t)?t.type!==u?t=[t]:(t=t.props.children,t=i.isValidElement(t)?[t]:ht(t)):t=ht(t),t={type:null,domNamespace:rt,children:t,childIndex:0,context:w,footer:""};var n=T[0];if(0===n){var r=T,a=2*(n=r.length);if(!(65536>=a))throw Error(o(304));var s=new Uint16Array(a);for(s.set(r),(T=s)[0]=n+1,r=n;r<a-1;r++)T[r]=r+1;T[a-1]=0}else T[0]=T[n];this.threadID=n,this.stack=[t],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=e,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}var e=t.prototype;return e.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var t=this.threadID;T[t]=T[0],T[0]=t}},e.pushProvider=function(t){var e=++this.contextIndex,n=t.type._context,r=this.threadID;x(n,r);var i=n[r];this.contextStack[e]=n,this.contextValueStack[e]=i,n[r]=t.props.value},e.popProvider=function(){var t=this.contextIndex,e=this.contextStack[t],n=this.contextValueStack[t];this.contextStack[t]=null,this.contextValueStack[t]=null,this.contextIndex--,e[this.threadID]=n},e.clearProviders=function(){for(var t=this.contextIndex;0<=t;t--)this.contextStack[t][this.threadID]=this.contextValueStack[t]},e.read=function(t){if(this.exhausted)return null;var e=et;et=this.threadID;var n=ft.current;ft.current=nt;try{for(var r=[""],i=!1;r[0].length<t;){if(0===this.stack.length){this.exhausted=!0;var a=this.threadID;T[a]=T[0],T[0]=a;break}var s=this.stack[this.stack.length-1];if(i||s.childIndex>=s.children.length){var u=s.footer;if(""!==u&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===s.type)this.currentSelectValue=null;else if(null!=s.type&&null!=s.type.type&&s.type.type.$$typeof===h)this.popProvider(s.type);else if(s.type===g){this.suspenseDepth--;var l=r.pop();if(i){i=!1;var c=s.fallbackFrame;if(!c)throw Error(o(303));this.stack.push(c),r[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}r[this.suspenseDepth]+=l}r[this.suspenseDepth]+=u}else{var f=s.children[s.childIndex++],p="";try{p+=this.render(f,s.context,s.domNamespace)}catch(d){if(null!=d&&"function"===typeof d.then)throw Error(o(294));throw d}r.length<=this.suspenseDepth&&r.push(""),r[this.suspenseDepth]+=p}}return r[0]}finally{ft.current=n,et=e}},e.render=function(t,e,n){if("string"===typeof t||"number"===typeof t)return""===(n=""+t)?"":this.makeStaticMarkup?F(n):this.previousWasTextNode?"\x3c!-- --\x3e"+F(n):(this.previousWasTextNode=!0,F(n));if(t=(e=_t(t,e,this.threadID)).child,e=e.context,null===t||!1===t)return"";if(!i.isValidElement(t)){if(null!=t&&null!=t.$$typeof){if((n=t.$$typeof)===s)throw Error(o(257));throw Error(o(258,n.toString()))}return t=ht(t),this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),""}var a=t.type;if("string"===typeof a)return this.renderDOM(t,e,n);switch(a){case l:case p:case c:case m:case u:return t=ht(t.props.children),this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),"";case g:throw Error(o(294))}if("object"===typeof a&&null!==a)switch(a.$$typeof){case d:B={};var b=a.render(t.props,t.ref);return b=Z(a.render,t.props,b,t.ref),b=ht(b),this.stack.push({type:null,domNamespace:n,children:b,childIndex:0,context:e,footer:""}),"";case y:return t=[i.createElement(a.type,r({ref:t.ref},t.props))],this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),"";case h:return n={type:t,domNamespace:n,children:a=ht(t.props.children),childIndex:0,context:e,footer:""},this.pushProvider(t),this.stack.push(n),"";case f:a=t.type,b=t.props;var S=this.threadID;return x(a,S),a=ht(b.children(a[S])),this.stack.push({type:t,domNamespace:n,children:a,childIndex:0,context:e,footer:""}),"";case E:throw Error(o(338));case v:switch(function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(a=t.type),a._status){case 1:return t=[i.createElement(a._result,r({ref:t.ref},t.props))],this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),"";case 2:throw a._result;default:throw Error(o(295))}case _:throw Error(o(343))}throw Error(o(130,null==a?a:typeof a,""))},e.renderDOM=function(t,e,n){var a=t.type.toLowerCase();if(n===rt&&it(a),!gt.hasOwnProperty(a)){if(!dt.test(a))throw Error(o(65,a));gt[a]=!0}var s=t.props;if("input"===a)s=r({type:void 0},s,{defaultChecked:void 0,defaultValue:void 0,value:null!=s.value?s.value:s.defaultValue,checked:null!=s.checked?s.checked:s.defaultChecked});else if("textarea"===a){var u=s.value;if(null==u){u=s.defaultValue;var l=s.children;if(null!=l){if(null!=u)throw Error(o(92));if(Array.isArray(l)){if(!(1>=l.length))throw Error(o(93));l=l[0]}u=""+l}null==u&&(u="")}s=r({},s,{value:void 0,children:""+u})}else if("select"===a)this.currentSelectValue=null!=s.value?s.value:s.defaultValue,s=r({},s,{value:void 0});else if("option"===a){l=this.currentSelectValue;var c=function(t){if(void 0===t||null===t)return t;var e="";return i.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(s.children);if(null!=l){var h=null!=s.value?s.value+"":c;if(u=!1,Array.isArray(l)){for(var f=0;f<l.length;f++)if(""+l[f]===h){u=!0;break}}else u=""+l===h;s=r({selected:void 0,children:void 0},s,{selected:u,children:c})}}if(u=s){if(at[a]&&(null!=u.children||null!=u.dangerouslySetInnerHTML))throw Error(o(137,a,""));if(null!=u.dangerouslySetInnerHTML){if(null!=u.children)throw Error(o(60));if("object"!==typeof u.dangerouslySetInnerHTML||!("__html"in u.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=u.style&&"object"!==typeof u.style)throw Error(o(62,""))}for(_ in u=s,l=this.makeStaticMarkup,c=1===this.stack.length,h="<"+t.type,u)if(yt.call(u,_)){var p=u[_];if(null!=p){if("style"===_){f=void 0;var d="",g="";for(f in p)if(p.hasOwnProperty(f)){var m=0===f.indexOf("--"),y=p[f];if(null!=y){if(m)var v=f;else if(v=f,mt.hasOwnProperty(v))v=mt[v];else{var E=v.replace(lt,"-$1").toLowerCase().replace(ct,"-ms-");v=mt[v]=E}d+=g+v+":",g=f,d+=m=null==y||"boolean"===typeof y||""===y?"":m||"number"!==typeof y||0===y||st.hasOwnProperty(g)&&st[g]?(""+y).trim():y+"px",g=";"}}p=d||null}f=null;t:if(m=a,y=u,-1===m.indexOf("-"))m="string"===typeof y.is;else switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":m=!1;break t;default:m=!0}m?vt.hasOwnProperty(_)||(f=O(f=_)&&null!=p?f+'="'+F(p)+'"':""):f=V(_,p),f&&(h+=" "+f)}}l||c&&(h+=' data-reactroot=""');var _=h;u="",ot.hasOwnProperty(a)?_+="/>":(_+=">",u="</"+t.type+">");t:{if(null!=(l=s.dangerouslySetInnerHTML)){if(null!=l.__html){l=l.__html;break t}}else if("string"===typeof(l=s.children)||"number"===typeof l){l=F(l);break t}l=null}return null!=l?(s=[],pt[a]&&"\n"===l.charAt(0)&&(_+="\n"),_+=l):s=ht(s.children),t=t.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?it(t):"http://www.w3.org/2000/svg"===n&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:a,children:s,childIndex:0,context:e,footer:u}),this.previousWasTextNode=!1,_},t}(),St={renderToString:function(t){t=new bt(t,!1);try{return t.read(1/0)}finally{t.destroy()}},renderToStaticMarkup:function(t){t=new bt(t,!0);try{return t.read(1/0)}finally{t.destroy()}},renderToNodeStream:function(){throw Error(o(207))},renderToStaticNodeStream:function(){throw Error(o(208))},version:"16.12.0"},wt={default:St},xt=wt&&St||wt;t.exports=xt.default||xt},function(t,e,n){var r=n(146),i=n(192),o=n(194),a=n(65),s=n(100),u=n(147),l=Math.min;t.exports=function(t,e,n){for(var c=n?o:i,h=t[0].length,f=t.length,p=f,d=Array(f),g=1/0,m=[];p--;){var y=t[p];p&&e&&(y=a(y,s(e))),g=l(y.length,g),d[p]=!n&&(e||h>=120&&y.length>=120)?new r(p&&y):void 0}y=t[0];var v=-1,E=d[0];t:for(;++v<h&&m.length<g;){var _=y[v],b=e?e(_):_;if(_=n||0!==_?_:0,!(E?u(E,b):c(m,b,n))){for(p=f;--p;){var S=d[p];if(!(S?u(S,b):c(t[p],b,n)))continue t}E&&E.push(b),m.push(_)}}return m}},function(t,e,n){var r=n(128);t.exports=function(t){return r(t)?t:[]}},function(t,e,n){var r=n(282),i=n(122),o=Array.prototype.splice;t.exports=function(t,e){for(var n=t?e.length:0,a=n-1;n--;){var s=e[n];if(n==a||s!==u){var u=s;i(s)?o.call(t,s,1):r(t,s)}}return t}},function(t,e,n){var r=n(502),i=n(503),o=n(199),a=n(504);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){var r=n(506),i=n(507),o=n(199),a=n(508);t.exports=function(t){return r(t)||i(t)||o(t)||a()}},function(t,e,n){var r=n(285);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())}))}},function(t,e,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),i=new RegExp("(%[a-f0-9]{2})+","gi");function o(t,e){try{return decodeURIComponent(t.join(""))}catch(i){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],o(n),o(r))}function a(t){try{return decodeURIComponent(t)}catch(i){for(var e=t.match(r),n=1;n<e.length;n++)e=(t=o(e,n).join("")).match(r);return t}}t.exports=function(t){if("string"!==typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var n={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},r=i.exec(t);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(e){var o=a(r[0]);o!==r[0]&&(n[r[0]]=o)}r=i.exec(t)}n["%C2"]="\ufffd";for(var s=Object.keys(n),u=0;u<s.length;u++){var l=s[u];t=t.replace(new RegExp(l,"g"),n[l])}return t}(t)}}},function(t,e,n){"use strict";t.exports=function(t,e){if("string"!==typeof t||"string"!==typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];var n=t.indexOf(e);return-1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]}},function(t,e,n){var r=n(141),i=n(288),o=n(190),a=n(513),s=n(22),u=n(126),l=n(289);t.exports=function t(e,n,c,h,f){e!==n&&o(n,(function(o,u){if(f||(f=new r),s(o))a(e,n,u,c,t,h,f);else{var p=h?h(l(e,u),o,u+"",e,n,f):void 0;void 0===p&&(p=o),i(e,u,p)}}),u)}},function(t,e,n){var r=n(288),i=n(278),o=n(280),a=n(279),s=n(281),u=n(119),l=n(9),c=n(128),h=n(121),f=n(181),p=n(22),d=n(283),g=n(148),m=n(289),y=n(514);t.exports=function(t,e,n,v,E,_,b){var S=m(t,n),w=m(e,n),x=b.get(w);if(x)r(t,n,x);else{var T=_?_(S,w,n+"",t,e,b):void 0,L=void 0===T;if(L){var C=l(w),A=!C&&h(w),M=!C&&!A&&g(w);T=w,C||A||M?l(S)?T=S:c(S)?T=a(S):A?(L=!1,T=i(w,!0)):M?(L=!1,T=o(w,!0)):T=[]:d(w)||u(w)?(T=S,u(S)?T=y(S):p(S)&&!f(S)||(T=s(w))):L=!1}L&&(b.set(w,T),E(T,w,v,_,b),b.delete(w)),r(t,n,T)}}},function(t,e,n){var r=n(106),i=n(126);t.exports=function(t){return r(t,i(t))}},function(t,e,n){var r=n(105),i=n(125);t.exports=function(t){return r((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e}))}},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var r=n(69),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var d=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var m="function"===typeof Symbol&&Symbol.iterator;function y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function _(t,e,n){this.props=t,this.context=e,this.refs=E,this.updater=n||v}function b(){}function S(t,e,n){this.props=t,this.context=e,this.refs=E,this.updater=n||v}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(y(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=_.prototype;var w=S.prototype=new b;w.constructor=S,r(w,_.prototype),w.isPureReactComponent=!0;var x={current:null},T={current:null},L=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,n){var r,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)L.call(e,r)&&!C.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:T.current}}function M(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var R=/\/+/g,O=[];function P(t,e,n,r){if(O.length){var i=O.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function I(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>O.length&&O.push(t)}function N(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case a:u=!0}}if(u)return r(i,e,""===n?"."+D(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+D(s=e[l],l);u+=t(s,c,r,i)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=m&&e[m]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=t(s=s.value,c=n+D(s,l++),r,i);else if("object"===s)throw r=""+e,Error(y(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,n)}function D(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function k(t,e){t.func.call(t.context,e,t.count++)}function F(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?V(t,r,n,(function(t){return t})):null!=t&&(M(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(R,"$&/")+"/")+n)),r.push(t))}function V(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(R,"$&/")+"/"),N(t,F,e=P(e,o,r,i)),I(e)}function j(){var t=x.current;if(null===t)throw Error(y(321));return t}var B={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return V(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;N(t,k,e=P(null,null,e,n)),I(e)},count:function(t){return N(t,(function(){return null}),null)},toArray:function(t){var e=[];return V(t,e,null,(function(t){return t})),e},only:function(t){if(!M(t))throw Error(y(143));return t}},createRef:function(){return{current:null}},Component:_,PureComponent:S,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:f,render:t}},lazy:function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return j().useCallback(t,e)},useContext:function(t,e){return j().useContext(t,e)},useEffect:function(t,e){return j().useEffect(t,e)},useImperativeHandle:function(t,e,n){return j().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return j().useLayoutEffect(t,e)},useMemo:function(t,e){return j().useMemo(t,e)},useReducer:function(t,e,n){return j().useReducer(t,e,n)},useRef:function(t){return j().useRef(t)},useState:function(t){return j().useState(t)},Fragment:s,Profiler:l,StrictMode:u,Suspense:p,createElement:A,cloneElement:function(t,e,n){if(null===t||void 0===t)throw Error(y(267,t));var i=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=T.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)L.call(e,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:o,type:t.type,key:a,ref:s,props:i,_owner:u}},createFactory:function(t){var e=A.bind(null,t);return e.type=t,e},isValidElement:M,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:x,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:r}},U={default:B},G=U&&B||U;t.exports=G.default||G},function(t,e,n){var r=n(520)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}},function(t,e,n){var r=n(522);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(524),i=n(538),o=n(541);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e,n){var r=n(525),i=n(526),o=n(530),a=n(531),s=n(533),u=n(534),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&i(t),h=!n&&!c&&a(t),f=!n&&!c&&!h&&u(t),p=n||c||h||f,d=p?r(t.length,String):[],g=d.length;for(var m in t)!e&&!l.call(t,m)||p&&("length"==m||h&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||d.push(m);return d}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(527),i=n(201),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){var r=n(200),i=n(201);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e,n){var r=n(290),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){(function(t){var r=n(291),i=n(532),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(this,n(56)(t))},function(t,e){t.exports=function(){return!1}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(535),i=n(536),o=n(537),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(200),i=n(293),o=n(201),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(292),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=s}).call(this,n(56)(t))},function(t,e,n){var r=n(294),i=n(539),o=n(540),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(542),i=n(293);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(200),i=n(294);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},function(t,e,n){var r=n(546);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){var r=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,i=n(552),o=Object.create?Object.create(null):{};function a(t,e,n,r,i){var o=e.indexOf("<",r),a=e.slice(r,-1===o?void 0:o);/^\s*$/.test(a)&&(a=" "),(!i&&o>-1&&n+t.length>=0||" "!==a)&&t.push({type:"text",content:a})}t.exports=function(t,e){e||(e={}),e.components||(e.components=o);var n,s=[],u=-1,l=[],c={},h=!1;return t.replace(r,(function(r,o){if(h){if(r!=="</"+n.name+">")return;h=!1}var f,p="/"!==r.charAt(1),d=0===r.indexOf("\x3c!--"),g=o+r.length,m=t.charAt(g);p&&!d&&(u++,"tag"===(n=i(r)).type&&e.components[n.name]&&(n.type="component",h=!0),n.voidElement||h||!m||"<"===m||a(n.children,t,u,g,e.ignoreWhitespace),c[n.tagName]=n,0===u&&s.push(n),(f=l[u-1])&&f.children.push(n),l[u]=n),(d||!p||n.voidElement)&&(d||u--,!h&&"<"!==m&&m&&a(f=-1===u?s:l[u].children,t,u,g,e.ignoreWhitespace))})),!s.length&&t.length&&a(s,t,0,0,e.ignoreWhitespace),s}},function(t,e,n){var r=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,i=n(553);t.exports=function(t){var e,n=0,o=!0,a={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return t.replace(r,(function(r){if("="===r)return o=!0,void n++;o?0===n?((i[r]||"/"===t.charAt(t.length-2))&&(a.voidElement=!0),a.name=r):(a.attrs[e]=r.replace(/^['"]|['"]$/g,""),e=void 0):(e&&(a.attrs[e]=e),e=r),n++,o=!1})),a}},function(t,e){t.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},function(t,e){function n(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(t){var e=[];for(var n in t)e.push(n+'="'+t[n]+'"');return e.length?" "+e.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(n,"")+"</"+e.name+">"}}t.exports=function(t){return t.reduce((function(t,e){return t+n("",e)}),"")}},function(t,e,n){var r=n(295),i=n(556),o=n(557);t.exports=function(t,e,n){return e===e?o(t,e,n):r(t,i,n)}},function(t,e){t.exports=function(t){return t!==t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e,n){var r=n(153),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(84),i=n(25),o=n(70);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},function(t,e,n){var r=n(562);t.exports=function(t){return t?(t=r(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}},function(t,e,n){var r=n(62),i=n(129),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=s.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):a.test(t)?NaN:+t}},function(t,e,n){var r=n(564),i=n(130);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){var r=n(154);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},function(t,e,n){var r=n(566),i=n(203),o=n(25),a=n(204),s=n(205),u=n(206),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&i(t),h=!n&&!c&&a(t),f=!n&&!c&&!h&&u(t),p=n||c||h||f,d=p?r(t.length,String):[],g=d.length;for(var m in t)!e&&!l.call(t,m)||p&&("length"==m||h&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||d.push(m);return d}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(84),i=n(70);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(84),i=n(202),o=n(70),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e,n){(function(t){var r=n(297),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=s}).call(this,n(56)(t))},function(t,e,n){var r=n(572)(Object.keys,Object);t.exports=r},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(574)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}},function(t,e,n){var r=n(107);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(t,e,n){var r=n(577),i=n(624),o=n(310);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(304),i=n(306);t.exports=function(t,e,n,o){var a=n.length,s=a,u=!o;if(null==t)return!s;for(t=Object(t);a--;){var l=n[a];if(u&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<s;){var c=(l=n[a])[0],h=t[c],f=l[1];if(u&&l[2]){if(void 0===h&&!(c in t))return!1}else{var p=new r;if(o)var d=o(h,f,c,t,e,p);if(!(void 0===d?i(f,h,3,o,p):d))return!1}}return!0}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(156),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(156);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(156);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(156);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(155);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(155),i=n(210),o=n(211);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(296),i=n(589),o=n(62),a=n(305),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:s).test(a(t))}},function(t,e,n){var r=n(590),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(67)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(593),i=n(155),o=n(210);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(594),i=n(595),o=n(596),a=n(597),s=n(598);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(157);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(157),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(157),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(157);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(158);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(158);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(158);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(158);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(304),i=n(307),o=n(610),a=n(614),s=n(308),u=n(25),l=n(204),c=n(206),h="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,p,d,g){var m=u(t),y=u(e),v=m?"[object Array]":s(t),E=y?"[object Array]":s(e),_=(v="[object Arguments]"==v?h:v)==h,b=(E="[object Arguments]"==E?h:E)==h,S=v==E;if(S&&l(t)){if(!l(e))return!1;m=!0,_=!1}if(S&&!_)return g||(g=new r),m||c(t)?i(t,e,n,p,d,g):o(t,e,v,n,p,d,g);if(!(1&n)){var w=_&&f.call(t,"__wrapped__"),x=b&&f.call(e,"__wrapped__");if(w||x){var T=w?t.value():t,L=x?e.value():e;return g||(g=new r),d(T,L,n,p,g)}}return!!S&&(g||(g=new r),a(t,e,n,p,d,g))}},function(t,e,n){var r=n(211),i=n(606),o=n(607);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(153),i=n(611),o=n(209),a=n(307),s=n(612),u=n(613),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(t,e,n,r,l,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=s;case"[object Set]":var d=1&r;if(p||(p=u),t.size!=e.size&&!d)return!1;var g=f.get(t);if(g)return g==e;r|=2,f.set(t,e);var m=a(p(t),p(e),r,l,h,f);return f.delete(t),m;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},function(t,e,n){var r=n(67).Uint8Array;t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var r=n(615),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var u=1&n,l=r(t),c=l.length;if(c!=r(e).length&&!u)return!1;for(var h=c;h--;){var f=l[h];if(!(u?f in e:i.call(e,f)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var d=!0;s.set(t,e),s.set(e,t);for(var g=u;++h<c;){var m=t[f=l[h]],y=e[f];if(o)var v=u?o(y,m,f,e,t,s):o(m,y,f,t,e,s);if(!(void 0===v?m===y||a(m,y,n,o,s):v)){d=!1;break}g||(g="constructor"==f)}if(d&&!g){var E=t.constructor,_=e.constructor;E==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof E&&E instanceof E&&"function"==typeof _&&_ instanceof _||(d=!1)}return s.delete(t),s.delete(e),d}},function(t,e,n){var r=n(616),i=n(618),o=n(130);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(617),i=n(25);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(207),i=n(619),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(86)(n(67),"DataView");t.exports=r},function(t,e,n){var r=n(86)(n(67),"Promise");t.exports=r},function(t,e,n){var r=n(86)(n(67),"Set");t.exports=r},function(t,e,n){var r=n(86)(n(67),"WeakMap");t.exports=r},function(t,e,n){var r=n(309),i=n(130);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},function(t,e,n){var r=n(306),i=n(35),o=n(631),a=n(213),s=n(309),u=n(310),l=n(131);t.exports=function(t,e){return a(t)&&s(e)?u(l(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,3)}}},function(t,e,n){var r=n(627),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(628);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(211);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(630);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(153),i=n(154),o=n(25),a=n(129),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e,n){var r=n(632),i=n(633);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(212),i=n(203),o=n(25),a=n(205),s=n(202),u=n(131);t.exports=function(t,e,n){for(var l=-1,c=(e=r(e,t)).length,h=!1;++l<c;){var f=u(e[l]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++l!=c?h:!!(c=null==t?0:t.length)&&s(c)&&a(f,c)&&(o(t)||i(t))}},function(t,e,n){var r=n(635),i=n(636),o=n(213),a=n(131);t.exports=function(t){return o(t)?r(a(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(311);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}},function(t,e,n){var r=n(85),i=n(107),o=n(130);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!i(e)){var u=r(n,3);e=o(e),n=function(t){return u(s[t],t,s)}}var l=t(e,n,a);return l>-1?s[u?e[l]:l]:void 0}}},function(t,e,n){var r=n(640),i=n(212),o=n(205),a=n(62),s=n(131);t.exports=function(t,e,n,u){if(!a(t))return t;for(var l=-1,c=(e=i(e,t)).length,h=c-1,f=t;null!=f&&++l<c;){var p=s(e[l]),d=n;if(l!=h){var g=f[p];void 0===(d=u?u(g,p,f):void 0)&&(d=a(g)?g:o(e[l+1])?[]:{})}r(f,p,d),f=f[p]}return t}},function(t,e,n){var r=n(312),i=n(209),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(86),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(214);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e,n){var r=n(154),i=n(85),o=n(313),a=n(645),s=n(299),u=n(646),l=n(214);t.exports=function(t,e,n){var c=-1;e=r(e.length?e:[l],s(i));var h=o(t,(function(t,n,i){return{criteria:r(e,(function(e){return e(t)})),index:++c,value:t}}));return a(h,(function(t,e){return u(t,e,n)}))}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(647);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,u=n.length;++i<s;){var l=r(o[i],a[i]);if(l)return i>=u?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(129);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t===t,a=r(t),s=void 0!==e,u=null===e,l=e===e,c=r(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||i&&s&&l||!n&&l||!o)return 1;if(!i&&!a&&!c&&t<e||c&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}},function(t,e,n){(function(e){(function(){var n,r,i,o,a,s;"undefined"!==typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!==typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-a)/1e6},r=e.hrtime,o=(n=function(){var t;return 1e9*(t=r())[0]+t[1]})(),s=1e9*e.uptime(),a=o-s):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,n(127))},function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}e.default=t}(n(1));var r=s(n(650)),i=s(n(653)),o=s(n(0)),a=s(n(314));n(316);function s(t){return t&&t.__esModule?t:{default:t}}function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var l=function(t,e){return t&&e&&e.split(" ").forEach((function(e){return(0,r.default)(t,e)}))},c=function(t,e){return t&&e&&e.split(" ").forEach((function(e){return(0,i.default)(t,e)}))},h=function(t){var e,n;function r(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).onEnter=function(t,n){var r=e.getClassNames(n?"appear":"enter").className;e.removeClasses(t,"exit"),l(t,r),e.props.onEnter&&e.props.onEnter(t,n)},e.onEntering=function(t,n){var r=e.getClassNames(n?"appear":"enter").activeClassName;e.reflowAndAddClass(t,r),e.props.onEntering&&e.props.onEntering(t,n)},e.onEntered=function(t,n){var r=e.getClassNames("appear").doneClassName,i=e.getClassNames("enter").doneClassName,o=n?r+" "+i:i;e.removeClasses(t,n?"appear":"enter"),l(t,o),e.props.onEntered&&e.props.onEntered(t,n)},e.onExit=function(t){var n=e.getClassNames("exit").className;e.removeClasses(t,"appear"),e.removeClasses(t,"enter"),l(t,n),e.props.onExit&&e.props.onExit(t)},e.onExiting=function(t){var n=e.getClassNames("exit").activeClassName;e.reflowAndAddClass(t,n),e.props.onExiting&&e.props.onExiting(t)},e.onExited=function(t){var n=e.getClassNames("exit").doneClassName;e.removeClasses(t,"exit"),l(t,n),e.props.onExited&&e.props.onExited(t)},e.getClassNames=function(t){var n=e.props.classNames,r="string"===typeof n,i=r?(r&&n?n+"-":"")+t:n[t];return{className:i,activeClassName:r?i+"-active":n[t+"Active"],doneClassName:r?i+"-done":n[t+"Done"]}},e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.removeClasses=function(t,e){var n=this.getClassNames(e),r=n.className,i=n.activeClassName,o=n.doneClassName;r&&c(t,r),i&&c(t,i),o&&c(t,o)},i.reflowAndAddClass=function(t,e){e&&(t&&t.scrollTop,l(t,e))},i.render=function(){var t=u({},this.props);return delete t.classNames,o.default.createElement(a.default,u({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(o.default.Component);h.defaultProps={classNames:""},h.propTypes={};var f=h;e.default=f,t.exports=e.default},function(t,e,n){"use strict";var r=n(651);e.__esModule=!0,e.default=function(t,e){t.classList?t.classList.add(e):(0,i.default)(t,e)||("string"===typeof t.className?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))};var i=r(n(652));t.exports=e.default},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){return t.classList?!!e&&t.classList.contains(e):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")},t.exports=e.default},function(t,e,n){"use strict";function r(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}t.exports=function(t,e){t.classList?t.classList.remove(e):"string"===typeof t.className?t.className=r(t.className,e):t.setAttribute("class",r(t.className&&t.className.baseVal||"",e))}},function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;a(n(1));var r=a(n(0)),i=n(57),o=a(n(317));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){var e,n;function a(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).handleEnter=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onEnter",0,n)},e.handleEntering=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onEntering",0,n)},e.handleEntered=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onEntered",0,n)},e.handleExit=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onExit",1,n)},e.handleExiting=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onExiting",1,n)},e.handleExited=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onExited",1,n)},e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s=a.prototype;return s.handleLifecycle=function(t,e,n){var o,a=this.props.children,s=r.default.Children.toArray(a)[e];s.props[t]&&(o=s.props)[t].apply(o,n),this.props[t]&&this.props[t]((0,i.findDOMNode)(this))},s.render=function(){var t=this.props,e=t.children,n=t.in,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,["children","in"]),a=r.default.Children.toArray(e),s=a[0],u=a[1];return delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,r.default.createElement(o.default,i,n?r.default.cloneElement(s,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):r.default.cloneElement(u,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},a}(r.default.Component);s.propTypes={};var u=s;e.default=u,t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0,e.getChildMapping=i,e.mergeChildMappings=o,e.getInitialChildMapping=function(t,e){return i(t.children,(function(n){return(0,r.cloneElement)(n,{onExited:e.bind(null,n),in:!0,appear:a(n,"appear",t),enter:a(n,"enter",t),exit:a(n,"exit",t)})}))},e.getNextChildMapping=function(t,e,n){var s=i(t.children),u=o(e,s);return Object.keys(u).forEach((function(i){var o=u[i];if((0,r.isValidElement)(o)){var l=i in e,c=i in s,h=e[i],f=(0,r.isValidElement)(h)&&!h.props.in;!c||l&&!f?c||!l||f?c&&l&&(0,r.isValidElement)(h)&&(u[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:h.props.in,exit:a(o,"exit",t),enter:a(o,"enter",t)})):u[i]=(0,r.cloneElement)(o,{in:!1}):u[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:a(o,"exit",t),enter:a(o,"enter",t)})}})),u};var r=n(0);function i(t,e){var n=Object.create(null);return t&&r.Children.map(t,(function(t){return t})).forEach((function(t){n[t.key]=function(t){return e&&(0,r.isValidElement)(t)?e(t):t}(t)})),n}function o(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),o=[];for(var a in t)a in e?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var u in e){if(i[u])for(r=0;r<i[u].length;r++){var l=i[u][r];s[i[u][r]]=n(l)}s[u]=n(u)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}function a(t,e,n){return null!=n[e]?n[e]:t.props[e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.defaultProps=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=g(n(59)),o=n(215),a=g(n(657)),s=n(658),u=n(660),l=n(668),c=n(216),h=n(669),f=n(670),p=n(671),d=n(672);function g(t){return t&&t.__esModule?t:{default:t}}function m(t){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function v(){return(v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function E(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){T(t,e,n[e])}))}return t}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var L={backspaceRemovesValue:!0,blurInputOnSelect:(0,c.isTouchCapable)(),captureMenuScroll:!(0,c.isTouchCapable)(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:(0,s.createFilter)(),formatGroupLabel:h.formatGroupLabel,getOptionLabel:h.getOptionLabel,getOptionValue:h.getOptionValue,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:h.isOptionDisabled,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!(0,c.isMobileDevice)(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var e=t.count;return"".concat(e," result").concat(1!==e?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0};e.defaultProps=L;var C=1,A=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==m(e)&&"function"!==typeof e?x(t):e}(this,S(e).call(this,t)),T(x(x(n)),"state",{ariaLiveSelection:"",ariaLiveContext:"",focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,menuOptions:{render:[],focusable:[]},selectValue:[]}),T(x(x(n)),"blockOptionHover",!1),T(x(x(n)),"isComposing",!1),T(x(x(n)),"clearFocusValueOnUpdate",!1),T(x(x(n)),"commonProps",void 0),T(x(x(n)),"components",void 0),T(x(x(n)),"hasGroups",!1),T(x(x(n)),"initialTouchX",0),T(x(x(n)),"initialTouchY",0),T(x(x(n)),"inputIsHiddenAfterUpdate",void 0),T(x(x(n)),"instancePrefix",""),T(x(x(n)),"openAfterFocus",!1),T(x(x(n)),"scrollToFocusedOptionOnUpdate",!1),T(x(x(n)),"userIsDragging",void 0),T(x(x(n)),"controlRef",null),T(x(x(n)),"getControlRef",(function(t){n.controlRef=t})),T(x(x(n)),"focusedOptionRef",null),T(x(x(n)),"getFocusedOptionRef",(function(t){n.focusedOptionRef=t})),T(x(x(n)),"menuListRef",null),T(x(x(n)),"getMenuListRef",(function(t){n.menuListRef=t})),T(x(x(n)),"inputRef",null),T(x(x(n)),"getInputRef",(function(t){n.inputRef=t})),T(x(x(n)),"cacheComponents",(function(t){n.components=(0,f.defaultComponents)({components:t})})),T(x(x(n)),"focus",n.focusInput),T(x(x(n)),"blur",n.blurInput),T(x(x(n)),"onChange",(function(t,e){var r=n.props;(0,r.onChange)(t,_({},e,{name:r.name}))})),T(x(x(n)),"setValue",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"set-value",r=arguments.length>2?arguments[2]:void 0,i=n.props,o=i.closeMenuOnSelect,a=i.isMulti;n.onInputChange("",{action:"set-value"}),o&&(n.inputIsHiddenAfterUpdate=!a,n.onMenuClose()),n.clearFocusValueOnUpdate=!0,n.onChange(t,{action:e,option:r})})),T(x(x(n)),"selectOption",(function(t){var e=n.props,r=e.blurInputOnSelect,i=e.isMulti,o=n.state.selectValue;if(i)if(n.isOptionSelected(t,o)){var a=n.getOptionValue(t);n.setValue(o.filter((function(t){return n.getOptionValue(t)!==a})),"deselect-option",t),n.announceAriaLiveSelection({event:"deselect-option",context:{value:n.getOptionLabel(t)}})}else n.isOptionDisabled(t,o)?n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(t),isDisabled:!0}}):(n.setValue([].concat(E(o),[t]),"select-option",t),n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(t)}}));else n.isOptionDisabled(t,o)?n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(t),isDisabled:!0}}):(n.setValue(t,"select-option"),n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(t)}}));r&&n.blurInput()})),T(x(x(n)),"removeValue",(function(t){var e=n.state.selectValue,r=n.getOptionValue(t);n.onChange(e.filter((function(t){return n.getOptionValue(t)!==r})),{action:"remove-value",removedValue:t}),n.announceAriaLiveSelection({event:"remove-value",context:{value:t?n.getOptionLabel(t):""}}),n.focusInput()})),T(x(x(n)),"clearValue",(function(){var t=n.props.isMulti;n.onChange(t?[]:null,{action:"clear"})})),T(x(x(n)),"popValue",(function(){var t=n.state.selectValue,e=t[t.length-1];n.announceAriaLiveSelection({event:"pop-value",context:{value:e?n.getOptionLabel(e):""}}),n.onChange(t.slice(0,t.length-1),{action:"pop-value",removedValue:e})})),T(x(x(n)),"getOptionLabel",(function(t){return n.props.getOptionLabel(t)})),T(x(x(n)),"getOptionValue",(function(t){return n.props.getOptionValue(t)})),T(x(x(n)),"getStyles",(function(t,e){var r=p.defaultStyles[t](e);r.boxSizing="border-box";var i=n.props.styles[t];return i?i(r,e):r})),T(x(x(n)),"getElementId",(function(t){return"".concat(n.instancePrefix,"-").concat(t)})),T(x(x(n)),"getActiveDescendentId",(function(){var t=n.props.menuIsOpen,e=n.state,r=e.menuOptions,i=e.focusedOption;if(i&&t){var o=r.focusable.indexOf(i),a=r.render[o];return a&&a.key}})),T(x(x(n)),"announceAriaLiveSelection",(function(t){var e=t.event,r=t.context;n.setState({ariaLiveSelection:(0,l.valueEventAriaMessage)(e,r)})})),T(x(x(n)),"announceAriaLiveContext",(function(t){var e=t.event,r=t.context;n.setState({ariaLiveContext:(0,l.instructionsAriaMessage)(e,_({},r,{label:n.props["aria-label"]}))})})),T(x(x(n)),"onMenuMouseDown",(function(t){0===t.button&&(t.stopPropagation(),t.preventDefault(),n.focusInput())})),T(x(x(n)),"onMenuMouseMove",(function(t){n.blockOptionHover=!1})),T(x(x(n)),"onControlMouseDown",(function(t){var e=n.props.openMenuOnClick;n.state.isFocused?n.props.menuIsOpen?"INPUT"!==t.target.tagName&&n.onMenuClose():e&&n.openMenu("first"):(e&&(n.openAfterFocus=!0),n.focusInput()),"INPUT"!==t.target.tagName&&t.preventDefault()})),T(x(x(n)),"onDropdownIndicatorMouseDown",(function(t){if((!t||"mousedown"!==t.type||0===t.button)&&!n.props.isDisabled){var e=n.props,r=e.isMulti,i=e.menuIsOpen;n.focusInput(),i?(n.inputIsHiddenAfterUpdate=!r,n.onMenuClose()):n.openMenu("first"),t.preventDefault(),t.stopPropagation()}})),T(x(x(n)),"onClearIndicatorMouseDown",(function(t){t&&"mousedown"===t.type&&0!==t.button||(n.clearValue(),t.stopPropagation(),n.openAfterFocus=!1,setTimeout((function(){return n.focusInput()})))})),T(x(x(n)),"onScroll",(function(t){"boolean"===typeof n.props.closeMenuOnScroll?t.target instanceof HTMLElement&&(0,c.isDocumentElement)(t.target)&&n.props.onMenuClose():"function"===typeof n.props.closeMenuOnScroll&&n.props.closeMenuOnScroll(t)&&n.props.onMenuClose()})),T(x(x(n)),"onCompositionStart",(function(){n.isComposing=!0})),T(x(x(n)),"onCompositionEnd",(function(){n.isComposing=!1})),T(x(x(n)),"onTouchStart",(function(t){var e=t.touches.item(0);e&&(n.initialTouchX=e.clientX,n.initialTouchY=e.clientY,n.userIsDragging=!1)})),T(x(x(n)),"onTouchMove",(function(t){var e=t.touches.item(0);if(e){var r=Math.abs(e.clientX-n.initialTouchX),i=Math.abs(e.clientY-n.initialTouchY);n.userIsDragging=r>5||i>5}})),T(x(x(n)),"onTouchEnd",(function(t){n.userIsDragging||(n.controlRef&&!n.controlRef.contains(t.target)&&n.menuListRef&&!n.menuListRef.contains(t.target)&&n.blurInput(),n.initialTouchX=0,n.initialTouchY=0)})),T(x(x(n)),"onControlTouchEnd",(function(t){n.userIsDragging||n.onControlMouseDown(t)})),T(x(x(n)),"onClearIndicatorTouchEnd",(function(t){n.userIsDragging||n.onClearIndicatorMouseDown(t)})),T(x(x(n)),"onDropdownIndicatorTouchEnd",(function(t){n.userIsDragging||n.onDropdownIndicatorMouseDown(t)})),T(x(x(n)),"handleInputChange",(function(t){var e=t.currentTarget.value;n.inputIsHiddenAfterUpdate=!1,n.onInputChange(e,{action:"input-change"}),n.onMenuOpen()})),T(x(x(n)),"onInputFocus",(function(t){var e=n.props,r=e.isSearchable,i=e.isMulti;n.props.onFocus&&n.props.onFocus(t),n.inputIsHiddenAfterUpdate=!1,n.announceAriaLiveContext({event:"input",context:{isSearchable:r,isMulti:i}}),n.setState({isFocused:!0}),(n.openAfterFocus||n.props.openMenuOnFocus)&&n.openMenu("first"),n.openAfterFocus=!1})),T(x(x(n)),"onInputBlur",(function(t){n.menuListRef&&n.menuListRef.contains(document.activeElement)?n.inputRef.focus():(n.props.onBlur&&n.props.onBlur(t),n.onInputChange("",{action:"input-blur"}),n.onMenuClose(),n.setState({focusedValue:null,isFocused:!1}))})),T(x(x(n)),"onOptionHover",(function(t){n.blockOptionHover||n.state.focusedOption===t||n.setState({focusedOption:t})})),T(x(x(n)),"shouldHideSelectedOptions",(function(){var t=n.props,e=t.hideSelectedOptions,r=t.isMulti;return void 0===e?r:e})),T(x(x(n)),"onKeyDown",(function(t){var e=n.props,r=e.isMulti,i=e.backspaceRemovesValue,o=e.escapeClearsValue,a=e.inputValue,s=e.isClearable,u=e.isDisabled,l=e.menuIsOpen,c=e.onKeyDown,h=e.tabSelectsValue,f=e.openMenuOnFocus,p=n.state,d=p.focusedOption,g=p.focusedValue,m=p.selectValue;if(!u&&("function"!==typeof c||(c(t),!t.defaultPrevented))){switch(n.blockOptionHover=!0,t.key){case"ArrowLeft":if(!r||a)return;n.focusValue("previous");break;case"ArrowRight":if(!r||a)return;n.focusValue("next");break;case"Delete":case"Backspace":if(a)return;if(g)n.removeValue(g);else{if(!i)return;r?n.popValue():s&&n.clearValue()}break;case"Tab":if(n.isComposing)return;if(t.shiftKey||!l||!h||!d||f&&n.isOptionSelected(d,m))return;n.selectOption(d);break;case"Enter":if(229===t.keyCode)break;if(l){if(!d)return;if(n.isComposing)return;n.selectOption(d);break}return;case"Escape":l?(n.inputIsHiddenAfterUpdate=!1,n.onInputChange("",{action:"menu-close"}),n.onMenuClose()):s&&o&&n.clearValue();break;case" ":if(a)return;if(!l){n.openMenu("first");break}if(!d)return;n.selectOption(d);break;case"ArrowUp":l?n.focusOption("up"):n.openMenu("last");break;case"ArrowDown":l?n.focusOption("down"):n.openMenu("first");break;case"PageUp":if(!l)return;n.focusOption("pageup");break;case"PageDown":if(!l)return;n.focusOption("pagedown");break;case"Home":if(!l)return;n.focusOption("first");break;case"End":if(!l)return;n.focusOption("last");break;default:return}t.preventDefault()}}));var r=t.value;n.cacheComponents=(0,i.default)(n.cacheComponents,a.default).bind(x(x(n))),n.cacheComponents(t.components),n.instancePrefix="react-select-"+(n.props.instanceId||++C);var o=(0,c.cleanValue)(r),s=n.buildMenuOptions(t,o);return n.state.menuOptions=s,n.state.selectValue=o,n}var n,s,g;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,t),n=e,(s=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentWillReceiveProps",value:function(t){var e=this.props,n=e.options,r=e.value,i=e.inputValue;if(this.cacheComponents(t.components),t.value!==r||t.options!==n||t.inputValue!==i){var o=(0,c.cleanValue)(t.value),a=this.buildMenuOptions(t,o),s=this.getNextFocusedValue(o),u=this.getNextFocusedOption(a.focusable);this.setState({menuOptions:a,selectValue:o,focusedOption:u,focusedValue:s})}null!=this.inputIsHiddenAfterUpdate&&(this.setState({inputIsHidden:this.inputIsHiddenAfterUpdate}),delete this.inputIsHiddenAfterUpdate)}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.isDisabled,r=e.menuIsOpen,i=this.state.isFocused;(i&&!n&&t.isDisabled||i&&r&&!t.menuIsOpen)&&this.focusInput(),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(0,c.scrollIntoView)(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){var t=this.props,e=t.isSearchable,n=t.isMulti;this.announceAriaLiveContext({event:"input",context:{isSearchable:e,isMulti:n}}),this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(t,e){this.props.onInputChange(t,e)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(t){var e=this.state,n=e.menuOptions,r=e.selectValue,i=e.isFocused,o=this.props.isMulti,a="first"===t?0:n.focusable.length-1;if(!o){var s=n.focusable.indexOf(r[0]);s>-1&&(a=s)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.inputIsHiddenAfterUpdate=!1,this.onMenuOpen(),this.setState({focusedValue:null,focusedOption:n.focusable[a]}),this.announceAriaLiveContext({event:"menu"})}},{key:"focusValue",value:function(t){var e=this.props,n=e.isMulti,r=e.isSearchable,i=this.state,o=i.selectValue,a=i.focusedValue;if(n){this.setState({focusedOption:null});var s=o.indexOf(a);a||(s=-1,this.announceAriaLiveContext({event:"value"}));var u=o.length-1,l=-1;if(o.length){switch(t){case"previous":l=0===s?0:-1===s?u:s-1;break;case"next":s>-1&&s<u&&(l=s+1)}-1===l&&this.announceAriaLiveContext({event:"input",context:{isSearchable:r,isMulti:n}}),this.setState({inputIsHidden:-1!==l,focusedValue:o[l]})}}}},{key:"focusOption",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",e=this.props.pageSize,n=this.state,r=n.focusedOption,i=n.menuOptions,o=i.focusable;if(o.length){var a=0,s=o.indexOf(r);r||(s=-1,this.announceAriaLiveContext({event:"menu"})),"up"===t?a=s>0?s-1:o.length-1:"down"===t?a=(s+1)%o.length:"pageup"===t?(a=s-e)<0&&(a=0):"pagedown"===t?(a=s+e)>o.length-1&&(a=o.length-1):"last"===t&&(a=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[a],focusedValue:null}),this.announceAriaLiveContext({event:"menu",context:{isDisabled:(0,h.isOptionDisabled)(o[a])}})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(d.defaultTheme):_({},d.defaultTheme,this.props.theme):d.defaultTheme}},{key:"getCommonProps",value:function(){var t=this.clearValue,e=this.getStyles,n=this.setValue,r=this.selectOption,i=this.props,o=i.classNamePrefix,a=i.isMulti,s=i.isRtl,u=i.options,l=this.state.selectValue,h=this.hasValue();return{cx:c.classNames.bind(null,o),clearValue:t,getStyles:e,getValue:function(){return l},hasValue:h,isMulti:a,isRtl:s,options:u,selectOption:r,setValue:n,selectProps:i,theme:this.getTheme()}}},{key:"getNextFocusedValue",value:function(t){if(this.clearFocusValueOnUpdate)return this.clearFocusValueOnUpdate=!1,null;var e=this.state,n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}},{key:"getNextFocusedOption",value:function(t){var e=this.state.focusedOption;return e&&t.indexOf(e)>-1?e:t[0]}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.state.menuOptions.render.length}},{key:"countOptions",value:function(){return this.state.menuOptions.focusable.length}},{key:"isClearable",value:function(){var t=this.props,e=t.isClearable,n=t.isMulti;return void 0===e?n:e}},{key:"isOptionDisabled",value:function(t,e){return"function"===typeof this.props.isOptionDisabled&&this.props.isOptionDisabled(t,e)}},{key:"isOptionSelected",value:function(t,e){var n=this;if(e.indexOf(t)>-1)return!0;if("function"===typeof this.props.isOptionSelected)return this.props.isOptionSelected(t,e);var r=this.getOptionValue(t);return e.some((function(t){return n.getOptionValue(t)===r}))}},{key:"filterOption",value:function(t,e){return!this.props.filterOption||this.props.filterOption(t,e)}},{key:"formatOptionLabel",value:function(t,e){if("function"===typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(t,{context:e,inputValue:n,selectValue:r})}return this.getOptionLabel(t)}},{key:"formatGroupLabel",value:function(t){return this.props.formatGroupLabel(t)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"buildMenuOptions",value:function(t,e){var n=this,r=t.inputValue,i=void 0===r?"":r,o=t.options,a=function(t,r){var o=n.isOptionDisabled(t,e),a=n.isOptionSelected(t,e),s=n.getOptionLabel(t),u=n.getOptionValue(t);if(!(n.shouldHideSelectedOptions()&&a||!n.filterOption({label:s,value:u,data:t},i))){var l=o?void 0:function(){return n.onOptionHover(t)},c=o?void 0:function(){return n.selectOption(t)},h="".concat(n.getElementId("option"),"-").concat(r);return{innerProps:{id:h,onClick:c,onMouseMove:l,onMouseOver:l,tabIndex:-1},data:t,isDisabled:o,isSelected:a,key:h,label:s,type:"option",value:u}}};return o.reduce((function(t,e,r){if(e.options){n.hasGroups||(n.hasGroups=!0);var i=e.options.map((function(e,n){var i=a(e,"".concat(r,"-").concat(n));return i&&t.focusable.push(e),i})).filter(Boolean);if(i.length){var o="".concat(n.getElementId("group"),"-").concat(r);t.render.push({type:"group",key:o,data:e,options:i})}}else{var s=a(e,"".concat(r));s&&(t.render.push(s),t.focusable.push(e))}return t}),{render:[],focusable:[]})}},{key:"constructAriaLiveMessage",value:function(){var t=this.state,e=t.ariaLiveContext,n=t.selectValue,r=t.focusedValue,i=t.focusedOption,o=this.props,a=o.options,s=o.menuIsOpen,u=o.inputValue,c=o.screenReaderStatus,h=r?(0,l.valueFocusAriaMessage)({focusedValue:r,getOptionLabel:this.getOptionLabel,selectValue:n}):"",f=i&&s?(0,l.optionFocusAriaMessage)({focusedOption:i,getOptionLabel:this.getOptionLabel,options:a}):"",p=(0,l.resultsAriaMessage)({inputValue:u,screenReaderMessage:c({count:this.countOptions()})});return"".concat(h," ").concat(f," ").concat(p," ").concat(e)}},{key:"renderInput",value:function(){var t=this.props,e=t.isDisabled,n=t.isSearchable,i=t.inputId,o=t.inputValue,a=t.tabIndex,s=this.components.Input,l=this.state.inputIsHidden,h=i||this.getElementId("input");if(!n)return r.default.createElement(u.DummyInput,{id:h,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:c.noop,onFocus:this.onInputFocus,readOnly:!0,disabled:e,tabIndex:a,value:""});var f={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]},p=this.commonProps,d=p.cx,g=p.theme,m=p.selectProps;return r.default.createElement(s,v({autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",cx:d,getStyles:this.getStyles,id:h,innerRef:this.getInputRef,isDisabled:e,isHidden:l,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,selectProps:m,spellCheck:"false",tabIndex:a,theme:g,type:"text",value:o},f))}},{key:"renderPlaceholderOrValue",value:function(){var t=this,e=this.components,n=e.MultiValue,i=e.MultiValueContainer,o=e.MultiValueLabel,a=e.MultiValueRemove,s=e.SingleValue,u=e.Placeholder,l=this.commonProps,c=this.props,h=c.controlShouldRenderValue,f=c.isDisabled,p=c.isMulti,d=c.inputValue,g=c.placeholder,m=this.state,y=m.selectValue,E=m.focusedValue,_=m.isFocused;if(!this.hasValue()||!h)return d?null:r.default.createElement(u,v({},l,{key:"placeholder",isDisabled:f,isFocused:_}),g);if(p)return y.map((function(e){var s=e===E;return r.default.createElement(n,v({},l,{components:{Container:i,Label:o,Remove:a},isFocused:s,isDisabled:f,key:t.getOptionValue(e),removeProps:{onClick:function(){return t.removeValue(e)},onTouchEnd:function(){return t.removeValue(e)},onMouseDown:function(t){t.preventDefault(),t.stopPropagation()}},data:e}),t.formatOptionLabel(e,"value"))}));if(d)return null;var b=y[0];return r.default.createElement(s,v({},l,{data:b,isDisabled:f}),this.formatOptionLabel(b,"value"))}},{key:"renderClearIndicator",value:function(){var t=this.components.ClearIndicator,e=this.commonProps,n=this.props,i=n.isDisabled,o=n.isLoading,a=this.state.isFocused;if(!this.isClearable()||!t||i||!this.hasValue()||o)return null;var s={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return r.default.createElement(t,v({},e,{innerProps:s,isFocused:a}))}},{key:"renderLoadingIndicator",value:function(){var t=this.components.LoadingIndicator,e=this.commonProps,n=this.props,i=n.isDisabled,o=n.isLoading,a=this.state.isFocused;return t&&o?r.default.createElement(t,v({},e,{innerProps:{"aria-hidden":"true"},isDisabled:i,isFocused:a})):null}},{key:"renderIndicatorSeparator",value:function(){var t=this.components,e=t.DropdownIndicator,n=t.IndicatorSeparator;if(!e||!n)return null;var i=this.commonProps,o=this.props.isDisabled,a=this.state.isFocused;return r.default.createElement(n,v({},i,{isDisabled:o,isFocused:a}))}},{key:"renderDropdownIndicator",value:function(){var t=this.components.DropdownIndicator;if(!t)return null;var e=this.commonProps,n=this.props.isDisabled,i=this.state.isFocused,o={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return r.default.createElement(t,v({},e,{innerProps:o,isDisabled:n,isFocused:i}))}},{key:"renderMenu",value:function(){var t=this,e=this.components,n=e.Group,i=e.GroupHeading,a=e.Menu,s=e.MenuList,l=e.MenuPortal,c=e.LoadingMessage,h=e.NoOptionsMessage,f=e.Option,p=this.commonProps,d=this.state,g=d.focusedOption,m=d.menuOptions,E=this.props,_=E.captureMenuScroll,b=E.inputValue,S=E.isLoading,w=E.loadingMessage,x=E.minMenuHeight,T=E.maxMenuHeight,L=E.menuIsOpen,C=E.menuPlacement,A=E.menuPosition,M=E.menuPortalTarget,R=E.menuShouldBlockScroll,O=E.menuShouldScrollIntoView,P=E.noOptionsMessage,I=E.onMenuScrollToTop,N=E.onMenuScrollToBottom;if(!L)return null;var D,k=function(e){var n=g===e.data;return e.innerRef=n?t.getFocusedOptionRef:void 0,r.default.createElement(f,v({},p,e,{isFocused:n}),t.formatOptionLabel(e.data,"menu"))};if(this.hasOptions())D=m.render.map((function(e){if("group"===e.type){e.type;var o=y(e,["type"]),a="".concat(e.key,"-heading");return r.default.createElement(n,v({},p,o,{Heading:i,headingProps:{id:a},label:t.formatGroupLabel(e.data)}),e.options.map((function(t){return k(t)})))}if("option"===e.type)return k(e)}));else if(S){var F=w({inputValue:b});if(null===F)return null;D=r.default.createElement(c,p,F)}else{var V=P({inputValue:b});if(null===V)return null;D=r.default.createElement(h,p,V)}var j={minMenuHeight:x,maxMenuHeight:T,menuPlacement:C,menuPosition:A,menuShouldScrollIntoView:O},B=r.default.createElement(o.MenuPlacer,v({},p,j),(function(e){var n=e.ref,i=e.placerProps,o=i.placement,l=i.maxHeight;return r.default.createElement(a,v({},p,j,{innerRef:n,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove},isLoading:S,placement:o}),r.default.createElement(u.ScrollCaptor,{isEnabled:_,onTopArrive:I,onBottomArrive:N},r.default.createElement(u.ScrollBlock,{isEnabled:R},r.default.createElement(s,v({},p,{innerRef:t.getMenuListRef,isLoading:S,maxHeight:l}),D))))}));return M||"fixed"===A?r.default.createElement(l,v({},p,{appendTo:M,controlElement:this.controlRef,menuPlacement:C,menuPosition:A}),B):B}},{key:"renderFormField",value:function(){var t=this,e=this.props,n=e.delimiter,i=e.isDisabled,o=e.isMulti,a=e.name,s=this.state.selectValue;if(a&&!i){if(o){if(n){var u=s.map((function(e){return t.getOptionValue(e)})).join(n);return r.default.createElement("input",{name:a,type:"hidden",value:u})}var l=s.length>0?s.map((function(e,n){return r.default.createElement("input",{key:"i-".concat(n),name:a,type:"hidden",value:t.getOptionValue(e)})})):r.default.createElement("input",{name:a,type:"hidden"});return r.default.createElement("div",null,l)}var c=s[0]?this.getOptionValue(s[0]):"";return r.default.createElement("input",{name:a,type:"hidden",value:c})}}},{key:"renderLiveRegion",value:function(){return this.state.isFocused?r.default.createElement(u.A11yText,{"aria-live":"assertive"},r.default.createElement("p",{id:"aria-selection-event"},"\xa0",this.state.ariaLiveSelection),r.default.createElement("p",{id:"aria-context"},"\xa0",this.constructAriaLiveMessage())):null}},{key:"render",value:function(){var t=this.components,e=t.Control,n=t.IndicatorsContainer,i=t.SelectContainer,o=t.ValueContainer,a=this.props,s=a.className,u=a.id,l=a.isDisabled,c=a.menuIsOpen,h=this.state.isFocused,f=this.commonProps=this.getCommonProps();return r.default.createElement(i,v({},f,{className:s,innerProps:{id:u,onKeyDown:this.onKeyDown},isDisabled:l,isFocused:h}),this.renderLiveRegion(),r.default.createElement(e,v({},f,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:l,isFocused:h,menuIsOpen:c}),r.default.createElement(o,v({},f,{isDisabled:l}),this.renderPlaceholderOrValue(),this.renderInput()),r.default.createElement(n,v({},f,{isDisabled:l}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}])&&b(n.prototype,s),g&&b(n,g),e}(r.Component);e.default=A,T(A,"defaultProps",L)},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){try{return function t(e,n){if(e===n)return!0;if(e&&n&&"object"==r(e)&&"object"==r(n)){var s,u,l,c=i(e),h=i(n);if(c&&h){if((u=e.length)!=n.length)return!1;for(s=u;0!==s--;)if(!t(e[s],n[s]))return!1;return!0}if(c!=h)return!1;var f=e instanceof Date,p=n instanceof Date;if(f!=p)return!1;if(f&&p)return e.getTime()==n.getTime();var d=e instanceof RegExp,g=n instanceof RegExp;if(d!=g)return!1;if(d&&g)return e.toString()==n.toString();var m=o(e);if((u=m.length)!==o(n).length)return!1;for(s=u;0!==s--;)if(!a.call(n,m[s]))return!1;for(s=u;0!==s--;)if(("_owner"!==(l=m[s])||!e.$$typeof)&&!t(e[l],n[l]))return!1;return!0}return e!==e&&n!==n}(t,e)}catch(n){if(n.message&&n.message.match(/stack|recursion/i))return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}};var i=Array.isArray,o=Object.keys,a=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createFilter=void 0;var r=n(659);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=function(t){return t.replace(/^\s+|\s+$/g,"")},a=function(t){return"".concat(t.label," ").concat(t.value)};e.createFilter=function(t){return function(e,n){var s=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){i(t,e,n[e])}))}return t}({ignoreCase:!0,ignoreAccents:!0,stringify:a,trim:!0,matchFrom:"any"},t),u=s.ignoreCase,l=s.ignoreAccents,c=s.stringify,h=s.trim,f=s.matchFrom,p=h?o(n):n,d=h?o(c(e)):c(e);return u&&(p=p.toLowerCase(),d=d.toLowerCase()),l&&(p=(0,r.stripDiacritics)(p),d=(0,r.stripDiacritics)(d)),"start"===f?d.substr(0,p.length)===p:d.indexOf(p)>-1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stripDiacritics=void 0;var r=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];e.stripDiacritics=function(t){for(var e=0;e<r.length;e++)t=t.replace(r[e].letters,r[e].base);return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"A11yText",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"DummyInput",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"NodeResolver",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"ScrollBlock",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"ScrollCaptor",{enumerable:!0,get:function(){return s.default}});var r=u(n(661)),i=u(n(662)),o=u(n(217)),a=u(n(663)),s=u(n(667));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(0))&&r.__esModule?r:{default:r},o=n(13);function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var s=function(t){return i.default.createElement("span",a({className:(0,o.css)({label:"a11yText",zIndex:9999,border:0,clip:"rect(1px, 1px, 1px, 1px)",height:1,width:1,position:"absolute",overflow:"hidden",padding:0,whiteSpace:"nowrap",backgroundColor:"red",color:"blue"})},t))};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=n(13);function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function s(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){function e(){return u(this,e),c(this,h(e).apply(this,arguments))}var n,o,p;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,t),n=e,(o=[{key:"render",value:function(){var t=this.props,e=(t.in,t.out,t.onExited,t.appear,t.enter,t.exit,t.innerRef),n=(t.emotion,s(t,["in","out","onExited","appear","enter","exit","innerRef","emotion"]));return r.default.createElement("input",a({ref:e},n,{className:(0,i.css)({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"})}))}}])&&l(n.prototype,o),p&&l(n,p),e}(r.Component);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=n(13),o=s(n(217)),a=s(n(664));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==u(e)&&"function"!==typeof e?d(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){function e(){var t,n;l(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return g(d(d(n=h(this,(t=f(e)).call.apply(t,[this].concat(i))))),"state",{touchScrollTarget:null}),g(d(d(n)),"getScrollTarget",(function(t){t!==n.state.touchScrollTarget&&n.setState({touchScrollTarget:t})})),g(d(d(n)),"blurSelectInput",(function(){document.activeElement&&document.activeElement.blur()})),n}var n,s,u;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,t),n=e,(s=[{key:"render",value:function(){var t=this.props,e=t.children,n=t.isEnabled,s=this.state.touchScrollTarget;return n?r.default.createElement("div",null,r.default.createElement("div",{onClick:this.blurSelectInput,className:(0,i.css)({position:"fixed",left:0,bottom:0,right:0,top:0})}),r.default.createElement(o.default,{innerRef:this.getScrollTarget},e),s?r.default.createElement(a.default,{touchScrollTarget:s}):null):e}}])&&c(n.prototype,s),u&&c(n,u),e}(r.PureComponent);e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(0),i=n(665),o=n(666);function a(t){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?f(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=!("undefined"===typeof window||!window.document||!window.document.createElement),g=0,m=function(t){function e(){var t,n;s(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return p(f(f(n=l(this,(t=c(e)).call.apply(t,[this].concat(i))))),"originalStyles",{}),p(f(f(n)),"listenerOptions",{capture:!1,passive:!1}),n}var n,r,a;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){var t=this;if(d){var e=this.props,n=e.accountForScrollbars,r=e.touchScrollTarget,a=document.body,s=a&&a.style;if(n&&i.STYLE_KEYS.forEach((function(e){var n=s&&s[e];t.originalStyles[e]=n})),n&&g<1){var u=parseInt(this.originalStyles.paddingRight,10)||0,l=document.body?document.body.clientWidth:0,c=window.innerWidth-l+u||0;Object.keys(i.LOCK_STYLES).forEach((function(t){var e=i.LOCK_STYLES[t];s&&(s[t]=e)})),s&&(s.paddingRight="".concat(c,"px"))}a&&(0,o.isTouchDevice)()&&(a.addEventListener("touchmove",o.preventTouchMove,this.listenerOptions),r&&(r.addEventListener("touchstart",o.preventInertiaScroll,this.listenerOptions),r.addEventListener("touchmove",o.allowTouchMove,this.listenerOptions))),g+=1}}},{key:"componentWillUnmount",value:function(){var t=this;if(d){var e=this.props,n=e.accountForScrollbars,r=e.touchScrollTarget,a=document.body,s=a&&a.style;g=Math.max(g-1,0),n&&g<1&&i.STYLE_KEYS.forEach((function(e){var n=t.originalStyles[e];s&&(s[e]=n)})),a&&(0,o.isTouchDevice)()&&(a.removeEventListener("touchmove",o.preventTouchMove,this.listenerOptions),r&&(r.removeEventListener("touchstart",o.preventInertiaScroll,this.listenerOptions),r.removeEventListener("touchmove",o.allowTouchMove,this.listenerOptions)))}}},{key:"render",value:function(){return null}}])&&u(n.prototype,r),a&&u(n,a),e}(r.Component);e.default=m,p(m,"defaultProps",{accountForScrollbars:!0})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LOCK_STYLES=e.STYLE_KEYS=void 0;e.STYLE_KEYS=["boxSizing","height","overflow","paddingRight","position"];e.LOCK_STYLES={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.preventTouchMove=function(t){t.preventDefault()},e.allowTouchMove=function(t){t.stopPropagation()},e.preventInertiaScroll=function(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;0===t?this.scrollTop=1:n===e&&(this.scrollTop=t-1)},e.isTouchDevice=function(){return"ontouchstart"in window||navigator.maxTouchPoints}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),o=(r=n(217))&&r.__esModule?r:{default:r};function a(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function h(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?g(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){function e(){var t,n;u(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return m(g(g(n=h(this,(t=f(e)).call.apply(t,[this].concat(i))))),"isBottom",!1),m(g(g(n)),"isTop",!1),m(g(g(n)),"scrollTarget",void 0),m(g(g(n)),"touchStart",void 0),m(g(g(n)),"cancelScroll",(function(t){t.preventDefault(),t.stopPropagation()})),m(g(g(n)),"handleEventDelta",(function(t,e){var r=n.props,i=r.onBottomArrive,o=r.onBottomLeave,a=r.onTopArrive,s=r.onTopLeave,u=n.scrollTarget,l=u.scrollTop,c=u.scrollHeight,h=u.clientHeight,f=n.scrollTarget,p=e>0,d=c-h-l,g=!1;d>e&&n.isBottom&&(o&&o(t),n.isBottom=!1),p&&n.isTop&&(s&&s(t),n.isTop=!1),p&&e>d?(i&&!n.isBottom&&i(t),f.scrollTop=c,g=!0,n.isBottom=!0):!p&&-e>l&&(a&&!n.isTop&&a(t),f.scrollTop=0,g=!0,n.isTop=!0),g&&n.cancelScroll(t)})),m(g(g(n)),"onWheel",(function(t){n.handleEventDelta(t,t.deltaY)})),m(g(g(n)),"onTouchStart",(function(t){n.touchStart=t.changedTouches[0].clientY})),m(g(g(n)),"onTouchMove",(function(t){var e=n.touchStart-t.changedTouches[0].clientY;n.handleEventDelta(t,e)})),m(g(g(n)),"getScrollTarget",(function(t){n.scrollTarget=t})),n}return p(e,t),c(e,[{key:"componentDidMount",value:function(){this.startListening(this.scrollTarget)}},{key:"componentWillUnmount",value:function(){this.stopListening(this.scrollTarget)}},{key:"startListening",value:function(t){t&&(t.scrollHeight<=t.clientHeight||("function"===typeof t.addEventListener&&t.addEventListener("wheel",this.onWheel,!1),"function"===typeof t.addEventListener&&t.addEventListener("touchstart",this.onTouchStart,!1),"function"===typeof t.addEventListener&&t.addEventListener("touchmove",this.onTouchMove,!1)))}},{key:"stopListening",value:function(t){t.scrollHeight<=t.clientHeight||("function"===typeof t.removeEventListener&&t.removeEventListener("wheel",this.onWheel,!1),"function"===typeof t.removeEventListener&&t.removeEventListener("touchstart",this.onTouchStart,!1),"function"===typeof t.removeEventListener&&t.removeEventListener("touchmove",this.onTouchMove,!1))}},{key:"render",value:function(){return i.default.createElement(o.default,{innerRef:this.getScrollTarget},this.props.children)}}]),e}(i.Component),v=function(t){function e(){return u(this,e),h(this,f(e).apply(this,arguments))}return p(e,t),c(e,[{key:"render",value:function(){var t=this.props,e=t.isEnabled,n=a(t,["isEnabled"]);return e?i.default.createElement(y,n):this.props.children}}]),e}(i.Component);e.default=v,m(v,"defaultProps",{isEnabled:!0})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resultsAriaMessage=e.optionFocusAriaMessage=e.valueFocusAriaMessage=e.valueEventAriaMessage=e.instructionsAriaMessage=void 0;e.instructionsAriaMessage=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.isSearchable,r=e.isMulti,i=e.label,o=e.isDisabled;switch(t){case"menu":return"Use Up and Down to choose options".concat(o?"":", press Enter to select the currently focused option",", press Escape to exit the menu, press Tab to select the option and exit the menu.");case"input":return"".concat(i||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value"}};e.valueEventAriaMessage=function(t,e){var n=e.value,r=e.isDisabled;if(n)switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"select-option":return"option ".concat(n,r?" is disabled. Select another option.":", selected.")}};e.valueFocusAriaMessage=function(t){var e=t.focusedValue,n=t.getOptionLabel,r=t.selectValue;return"value ".concat(n(e)," focused, ").concat(r.indexOf(e)+1," of ").concat(r.length,".")};e.optionFocusAriaMessage=function(t){var e=t.focusedOption,n=t.getOptionLabel,r=t.options;return"option ".concat(n(e)," focused").concat(e.isDisabled?" disabled":"",", ").concat(r.indexOf(e)+1," of ").concat(r.length,".")};e.resultsAriaMessage=function(t){var e=t.inputValue,n=t.screenReaderMessage;return"".concat(n).concat(e?" for search term "+e:"",".")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isOptionDisabled=e.getOptionValue=e.getOptionLabel=e.formatGroupLabel=void 0;e.formatGroupLabel=function(t){return t.label};e.getOptionLabel=function(t){return t.label};e.getOptionValue=function(t){return t.value};e.isOptionDisabled=function(t){return!!t.isDisabled}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultComponents=e.components=void 0;var r=n(318),i=n(218),o=d(n(319)),a=p(n(320)),s=d(n(321)),u=p(n(215)),l=p(n(322)),c=d(n(323)),h=d(n(324)),f=d(n(325));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m={ClearIndicator:i.ClearIndicator,Control:o.default,DropdownIndicator:i.DropdownIndicator,DownChevron:i.DownChevron,CrossIcon:i.CrossIcon,Group:a.default,GroupHeading:a.GroupHeading,IndicatorsContainer:r.IndicatorsContainer,IndicatorSeparator:i.IndicatorSeparator,Input:s.default,LoadingIndicator:i.LoadingIndicator,Menu:u.default,MenuList:u.MenuList,MenuPortal:u.MenuPortal,LoadingMessage:u.LoadingMessage,NoOptionsMessage:u.NoOptionsMessage,MultiValue:l.default,MultiValueContainer:l.MultiValueContainer,MultiValueLabel:l.MultiValueLabel,MultiValueRemove:l.MultiValueRemove,Option:c.default,Placeholder:h.default,SelectContainer:r.SelectContainer,SingleValue:f.default,ValueContainer:r.ValueContainer};e.components=m;e.defaultComponents=function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){g(t,e,n[e])}))}return t}({},m,t.components)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeStyles=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p({},t);return Object.keys(e).forEach((function(r){t[r]?n[r]=function(n,i){return e[r](t[r](n,i),i)}:n[r]=e[r]})),n},e.defaultStyles=void 0;var r=n(318),i=n(319),o=n(320),a=n(218),s=n(321),u=n(324),l=n(323),c=n(215),h=n(325),f=n(322);function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){d(t,e,n[e])}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g={clearIndicator:a.clearIndicatorCSS,container:r.containerCSS,control:i.css,dropdownIndicator:a.dropdownIndicatorCSS,group:o.groupCSS,groupHeading:o.groupHeadingCSS,indicatorsContainer:r.indicatorsContainerCSS,indicatorSeparator:a.indicatorSeparatorCSS,input:s.inputCSS,loadingIndicator:a.loadingIndicatorCSS,loadingMessage:c.loadingMessageCSS,menu:c.menuCSS,menuList:c.menuListCSS,menuPortal:c.menuPortalCSS,multiValue:f.multiValueCSS,multiValueLabel:f.multiValueLabelCSS,multiValueRemove:f.multiValueRemoveCSS,noOptionsMessage:c.noOptionsMessageCSS,option:l.optionCSS,placeholder:u.placeholderCSS,singleValue:h.css,valueContainer:r.valueContainerCSS};e.defaultStyles=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTheme=e.spacing=e.colors=void 0;var r={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"};e.colors=r;var i={baseUnit:4,controlHeight:38,menuGutter:8};e.spacing=i;var o={borderRadius:4,colors:r,spacing:i};e.defaultTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.defaultProps=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0));function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function a(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?f(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null};e.defaultProps=d;var g=function(t){var e,n;return n=e=function(e){function n(){var t,e;s(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return p(f(f(e=l(this,(t=c(n)).call.apply(t,[this].concat(i))))),"select",void 0),p(f(f(e)),"state",{inputValue:void 0!==e.props.inputValue?e.props.inputValue:e.props.defaultInputValue,menuIsOpen:void 0!==e.props.menuIsOpen?e.props.menuIsOpen:e.props.defaultMenuIsOpen,value:void 0!==e.props.value?e.props.value:e.props.defaultValue}),p(f(f(e)),"onChange",(function(t,n){e.callProp("onChange",t,n),e.setState({value:t})})),p(f(f(e)),"onInputChange",(function(t,n){var r=e.callProp("onInputChange",t,n);e.setState({inputValue:void 0!==r?r:t})})),p(f(f(e)),"onMenuOpen",(function(){e.callProp("onMenuOpen"),e.setState({menuIsOpen:!0})})),p(f(f(e)),"onMenuClose",(function(){e.callProp("onMenuClose"),e.setState({menuIsOpen:!1})})),e}var i,d,g;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(n,e),i=n,(d=[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(t){return void 0!==this.props[t]?this.props[t]:this.state[t]}},{key:"callProp",value:function(t){if("function"===typeof this.props[t]){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=this.props)[t].apply(e,r)}}},{key:"render",value:function(){var e=this,n=this.props,i=(n.defaultInputValue,n.defaultMenuIsOpen,n.defaultValue,a(n,["defaultInputValue","defaultMenuIsOpen","defaultValue"]));return r.default.createElement(t,o({},i,{ref:function(t){e.select=t},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}])&&u(i.prototype,d),g&&u(i,g),n}(r.Component),p(e,"defaultProps",d),n};e.default=g},function(t,e){t.exports=function(t,e){return t>e}},function(t,e){t.exports=function(t,e){return t<e}},function(t,e,n){},function(t,e,n){var r=n(159),i=n(219),o=function(){"use strict";function t(e,n,i,o){r(this,t),this.x=e,this.y=n,this.r=i,this.rPow2=this.r*this.r,o&&(this.data=o)}return i(t,[{key:"_euclideanDistancePow2",value:function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)}},{key:"contains",value:function(t){return this._euclideanDistancePow2(t,this)<=this.rPow2}},{key:"intersects",value:function(t){var e=function(t,e){return t>=e?t:e},n=function(t,e){return t<=e?t:e},r=this.x-e(t.x,n(this.x,t.x+t.w)),i=this.y-e(t.y,n(this.y,t.y+t.h));return r*r+i*i<=this.rPow2}}]),t}();t.exports=o},function(t,e,n){var r=n(159);t.exports=function t(e,n,i){"use strict";r(this,t),this.x=e,this.y=n,i&&(this.data=i)}},function(t,e,n){var r=n(286),i=n(159),o=n(219),a=n(327),s=function(){"use strict";function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];i(this,t),this._container=e,this._config=this._parseConfig(n),this._isDivided=!1,this._points=[];var a,s=r(o);try{for(s.s();!(a=s.n()).done;){var u=a.value;this._insert(u)}}catch(l){s.e(l)}finally{s.f()}}return o(t,[{key:"_parseConfig",value:function(t){return Object.assign({},{capacity:4,removeEmptyNodes:!1},t)}},{key:"getTree",value:function(){return this._isDivided?{ne:this._ne.getTree(),nw:this._nw.getTree(),se:this._se.getTree(),sw:this._sw.getTree()}:this._getNodePointAmount()}},{key:"getAllPoints",value:function(){var t=[];return this._getAllPoints(t),t}},{key:"_getAllPoints",value:function(t){this._isDivided?(this._ne._getAllPoints(t),this._nw._getAllPoints(t),this._se._getAllPoints(t),this._sw._getAllPoints(t)):Array.prototype.push.apply(t,this._points.slice())}},{key:"_getNodePointAmount",value:function(){return this._points.length}},{key:"_divide",value:function(){this._isDivided=!0;var e=this._container.x,n=this._container.y,r=this._container.w/2,i=this._container.h/2;this._ne=new t(new a(e+r,n,r,i),this._config,this._points.slice()),this._nw=new t(new a(e,n,r,i),this._config,this._points.slice()),this._se=new t(new a(e+r,n+i,r,i),this._config,this._points.slice()),this._sw=new t(new a(e,n+i,r,i),this._config,this._points.slice()),this._points.length=0,this._points=[]}},{key:"remove",value:function(t){if(t.constructor===Array){var e,n=r(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this._remove(i)}}catch(o){n.e(o)}finally{n.f()}}else this._remove(t)}},{key:"_remove",value:function(t){if(this._container.contains(t))if(this._isDivided)this._ne._remove(t),this._nw._remove(t),this._se._remove(t),this._sw._remove(t),this._config.removeEmptyNodes&&(0!==this._ne._getNodePointAmount()||this._ne._isDivided||0!==this._nw._getNodePointAmount()||this._nw._isDivided||0!==this._se._getNodePointAmount()||this._se._isDivided||0!==this._sw._getNodePointAmount()||this._sw._isDivided||(this._isDivided=!1,delete this._ne,delete this._nw,delete this._se,delete this._sw));else for(var e=this._points.length-1;e>=0;e--)t.x===this._points[e].x&&t.y===this._points[e].y&&this._points.splice(e,1)}},{key:"insert",value:function(t){if(t.constructor===Array){var e,n=r(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this._insert(i)}}catch(o){n.e(o)}finally{n.f()}}else this._insert(t)}},{key:"_insert",value:function(t){if(!this._container.contains(t))return!1;if(!this._isDivided){if(this._getNodePointAmount()<this._config.capacity)return this._points.push(t),!0;this._divide()}return!!this._ne._insert(t)||(!!this._nw._insert(t)||(!!this._se._insert(t)||this._sw._insert(t)))}},{key:"query",value:function(t){var e=[];return this._query(t,e),e}},{key:"_query",value:function(t,e){if(!t.intersects(this._container))return e;if(this._isDivided)this._ne._query(t,e),this._nw._query(t,e),this._se._query(t,e),this._sw._query(t,e);else{var n=this._points.filter((function(e){return t.contains(e)}));Array.prototype.push.apply(e,n)}return e}},{key:"clear",value:function(){this._points=[],this._isDivided=!1,delete this._ne,delete this._nw,delete this._se,delete this._sw}}]),t}();t.exports=s},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e,n){var r=n(682),i=n(328),o=n(684),a=n(782).default,s=o.featureEach,u=(o.coordEach,i.polygon,i.featureCollection);function l(t){var e=r(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})),r.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.remove.call(this,t,e)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){var e=r.prototype.search.call(this,this.toBBox(t));return u(e)},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=r.prototype.all.call(this);return u(t)},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=l,t.exports.default=l},function(t,e,n){"use strict";t.exports=i,t.exports.default=i;var r=n(683);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=m(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],u(i,t.leaf?r(o):o);return i}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,i,o){for(var a,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(a=e+Math.ceil((n-e)/i/2)*i,r(t,a,e,n,o),s.push(e,a,a,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!g(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],g(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):d(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!g(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],g(t,a=e.leaf?n(o):o)){if(e.leaf||d(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,a,s=this.data,u=this.toBBox(t),l=[],c=[];s||l.length;){if(s||(s=l.pop(),r=l[l.length-1],n=c.pop(),a=!0),s.leaf&&-1!==(i=o(t,s.children,e)))return s.children.splice(i,1),l.push(s),this._condense(l),this;a||s.leaf||!d(s,u)?r?(n++,s=r.children[n],a=!1):s=null:(l.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return a(i=m(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=m([])).leaf=!1,i.height=r;var u,l,c,h,f=Math.ceil(o/s),p=f*Math.ceil(Math.sqrt(s));for(y(t,e,n,p,this.compareMinX),u=e;u<=n;u+=p)for(y(t,u,c=Math.min(u+p-1,n),f,this.compareMinY),l=u;l<=c;l+=f)h=Math.min(l+f-1,c),i.children.push(this._build(t,l,h,r-1));return a(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,l,c,f,p,d;r.push(e),!e.leaf&&r.length-1!==n;){for(c=f=1/0,i=0,o=e.children.length;i<o;i++)u=h(a=e.children[i]),p=t,d=a,(l=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-u)<f?(f=l,c=u<c?u:c,s=a):l===f&&u<c&&(c=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),u(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=m(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,u,l,c,f;for(l=c=1/0,r=e;r<=n-e;r++)a=p(i=s(t,0,r,this.toBBox),o=s(t,r,n,this.toBBox)),u=h(i)+h(o),a<l?(l=a,f=r,c=u<c?u:c):a===l&&u<c&&(c=u,f=r);return f},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,l=s(t,0,e,a),c=s(t,n-e,n,a),h=f(l)+f(c);for(i=e;i<n-e;i++)o=t.children[i],u(l,t.leaf?a(o):o),h+=f(l);for(i=n-e-1;i>=e;i--)o=t.children[i],u(c,t.leaf?a(o):o),h+=f(c);return h},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)u(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,n){t.exports=function(){"use strict";function t(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function e(t,e){return t<e?-1:t>e?1:0}return function(n,r,i,o,a){!function e(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1),f=Math.max(i,Math.floor(r-u*c/s+h)),p=Math.min(o,Math.floor(r+(s-u)*c/s+h));e(n,r,f,p,a)}var d=n[r],g=i,m=o;for(t(n,i,r),a(n[o],d)>0&&t(n,i,o);g<m;){for(t(n,g,m),g++,m--;a(n[g],d)<0;)g++;for(;a(n[m],d)>0;)m--}0===a(n[i],d)?t(n,i,m):(m++,t(n,m,o)),m<=r&&(i=m+1),r<=m&&(o=m-1)}}(n,r,i||0,o||n.length-1,a||e)}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(328);function i(t,e,n){if(null!==t)for(var r,o,a,s,u,l,c,h,f=0,p=0,d=t.type,g="FeatureCollection"===d,m="Feature"===d,y=g?t.features.length:1,v=0;v<y;v++){u=(h=!!(c=g?t.features[v].geometry:m?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var E=0;E<u;E++){var _=0,b=0;if(null!==(s=h?c.geometries[E]:c)){l=s.coordinates;var S=s.type;switch(f=!n||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":if(!1===e(l,p,v,_,b))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,v,_,b))return!1;p++,"MultiPoint"===S&&_++}"LineString"===S&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(o=0;o<l[r].length-f;o++){if(!1===e(l[r][o],p,v,_,b))return!1;p++}"MultiLineString"===S&&_++,"Polygon"===S&&b++}"Polygon"===S&&_++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,o=0;o<l[r].length;o++){for(a=0;a<l[r][o].length-f;a++){if(!1===e(l[r][o][a],p,v,_,b))return!1;p++}b++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function s(t,e){var n,r,i,o,a,s,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,l=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function u(t,e){s(t,(function(t,n,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c={type:s,coordinates:t.coordinates[l]};if(!1===e(r.feature(c,i),n,l))return!1}}))}function l(t,e){u(t,(function(t,n,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,l=0,c=0,h=0;return!1!==i(t,(function(i,s,f,p,d){if(void 0===u||n>l||p>c||d>h)return u=i,l=n,c=p,h=d,void(a=0);var g=r.lineString([u,i],t.properties);if(!1===e(g,n,o,d,a))return!1;a++,u=i}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");u(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(r.lineString(a[s],t.properties),n,i,s))return!1}}}))}e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)}),r),o},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.featureEach=a,e.featureReduce=function(t,e,n){var r=n;return a(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.geomEach=s,e.geomReduce=function(t,e,n){var r=n;return s(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r},e.flattenEach=u,e.flattenReduce=function(t,e,n){var r=n;return u(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.segmentEach=l,e.segmentReduce=function(t,e,n){var r=n,i=!1;return l(t,(function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0})),r},e.lineEach=c,e.lineReduce=function(t,e,n){var r=n;return c(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),r.lineString([l[s],l[s+1]],u,e);case"Polygon":return a<0&&(a=l.length+a),s<0&&(s=l[a].length+s-1),r.lineString([l[a][s],l[a][s+1]],u,e);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s-1),r.lineString([l[o][s],l[o][s+1]],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),s<0&&(s=l[o][a].length-s-1),r.lineString([l[o][a][s],l[o][a][s+1]],u,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return r.point(l,u,e);case"MultiPoint":return o<0&&(o=l.length+o),r.point(l[o],u,e);case"LineString":return s<0&&(s=l.length+s),r.point(l[s],u,e);case"Polygon":return a<0&&(a=l.length+a),s<0&&(s=l[a].length+s),r.point(l[a][s],u,e);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),r.point(l[o][s],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),s<0&&(s=l[o][a].length-s),r.point(l[o][a][s],u,e)}throw new Error("geojson is invalid")}},,function(t,e,n){"use strict";var r=n(69),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var d=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var m="function"===typeof Symbol&&Symbol.iterator;function y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function _(t,e,n){this.props=t,this.context=e,this.refs=E,this.updater=n||v}function b(){}function S(t,e,n){this.props=t,this.context=e,this.refs=E,this.updater=n||v}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(y(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=_.prototype;var w=S.prototype=new b;w.constructor=S,r(w,_.prototype),w.isPureReactComponent=!0;var x={current:null},T={current:null},L=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,n){var r,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)L.call(e,r)&&!C.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:T.current}}function M(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var R=/\/+/g,O=[];function P(t,e,n,r){if(O.length){var i=O.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function I(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>O.length&&O.push(t)}function N(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case a:u=!0}}if(u)return r(i,e,""===n?"."+D(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+D(s=e[l],l);u+=t(s,c,r,i)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=m&&e[m]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=t(s=s.value,c=n+D(s,l++),r,i);else if("object"===s)throw r=""+e,Error(y(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,n)}function D(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function k(t,e){t.func.call(t.context,e,t.count++)}function F(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?V(t,r,n,(function(t){return t})):null!=t&&(M(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(R,"$&/")+"/")+n)),r.push(t))}function V(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(R,"$&/")+"/"),N(t,F,e=P(e,o,r,i)),I(e)}function j(){var t=x.current;if(null===t)throw Error(y(321));return t}var B={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return V(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;N(t,k,e=P(null,null,e,n)),I(e)},count:function(t){return N(t,(function(){return null}),null)},toArray:function(t){var e=[];return V(t,e,null,(function(t){return t})),e},only:function(t){if(!M(t))throw Error(y(143));return t}},createRef:function(){return{current:null}},Component:_,PureComponent:S,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:f,render:t}},lazy:function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return j().useCallback(t,e)},useContext:function(t,e){return j().useContext(t,e)},useEffect:function(t,e){return j().useEffect(t,e)},useImperativeHandle:function(t,e,n){return j().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return j().useLayoutEffect(t,e)},useMemo:function(t,e){return j().useMemo(t,e)},useReducer:function(t,e,n){return j().useReducer(t,e,n)},useRef:function(t){return j().useRef(t)},useState:function(t){return j().useState(t)},Fragment:s,Profiler:l,StrictMode:u,Suspense:p,createElement:A,cloneElement:function(t,e,n){if(null===t||void 0===t)throw Error(y(267,t));var i=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=T.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)L.call(e,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:o,type:t.type,key:a,ref:s,props:i,_owner:u}},createFactory:function(t){var e=A.bind(null,t);return e.type=t,e},isValidElement:M,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:x,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:r}},U={default:B},G=U&&B||U;t.exports=G.default||G},function(t,e,n){var r=n(108),i=n(166),o=n(165);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!i(e)){var u=r(n,3);e=o(e),n=function(t){return u(s[t],t,s)}}var l=t(e,n,a);return l>-1?s[u?e[l]:l]:void 0}}},function(t,e,n){var r=n(689),i=n(749),o=n(341);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(329),i=n(333);t.exports=function(t,e,n,o){var a=n.length,s=a,u=!o;if(null==t)return!s;for(t=Object(t);a--;){var l=n[a];if(u&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<s;){var c=(l=n[a])[0],h=t[c],f=l[1];if(u&&l[2]){if(void 0===h&&!(c in t))return!1}else{var p=new r;if(o)var d=o(h,f,c,t,e,p);if(!(void 0===d?i(f,h,3,o,p):d))return!1}}return!0}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(161),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(161);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(161);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(161);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(160);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(160),i=n(221),o=n(222);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(330),i=n(703),o=n(74),a=n(332),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:s).test(a(t))}},function(t,e,n){var r=n(162),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(704),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(68)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(707),i=n(160),o=n(221);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(708),i=n(709),o=n(710),a=n(711),s=n(712);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(163);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(163),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(163),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(163);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(164);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(164);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(164);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(164);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(329),i=n(334),o=n(724),a=n(728),s=n(744),u=n(38),l=n(337),c=n(338),h="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,p,d,g){var m=u(t),y=u(e),v=m?"[object Array]":s(t),E=y?"[object Array]":s(e),_=(v="[object Arguments]"==v?h:v)==h,b=(E="[object Arguments]"==E?h:E)==h,S=v==E;if(S&&l(t)){if(!l(e))return!1;m=!0,_=!1}if(S&&!_)return g||(g=new r),m||c(t)?i(t,e,n,p,d,g):o(t,e,v,n,p,d,g);if(!(1&n)){var w=_&&f.call(t,"__wrapped__"),x=b&&f.call(e,"__wrapped__");if(w||x){var T=w?t.value():t,L=x?e.value():e;return g||(g=new r),d(T,L,n,p,g)}}return!!S&&(g||(g=new r),a(t,e,n,p,d,g))}},function(t,e,n){var r=n(222),i=n(720),o=n(721);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(162),i=n(725),o=n(220),a=n(334),s=n(726),u=n(727),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(t,e,n,r,l,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=s;case"[object Set]":var d=1&r;if(p||(p=u),t.size!=e.size&&!d)return!1;var g=f.get(t);if(g)return g==e;r|=2,f.set(t,e);var m=a(p(t),p(e),r,l,h,f);return f.delete(t),m;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},function(t,e,n){var r=n(68).Uint8Array;t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var r=n(729),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var u=1&n,l=r(t),c=l.length;if(c!=r(e).length&&!u)return!1;for(var h=c;h--;){var f=l[h];if(!(u?f in e:i.call(e,f)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var d=!0;s.set(t,e),s.set(e,t);for(var g=u;++h<c;){var m=t[f=l[h]],y=e[f];if(o)var v=u?o(y,m,f,e,t,s):o(m,y,f,t,e,s);if(!(void 0===v?m===y||a(m,y,n,o,s):v)){d=!1;break}g||(g="constructor"==f)}if(d&&!g){var E=t.constructor,_=e.constructor;E==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof E&&E instanceof E&&"function"==typeof _&&_ instanceof _||(d=!1)}return s.delete(t),s.delete(e),d}},function(t,e,n){var r=n(730),i=n(732),o=n(165);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(731),i=n(38);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(335),i=n(733),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(735),i=n(336),o=n(38),a=n(337),s=n(223),u=n(338),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&i(t),h=!n&&!c&&a(t),f=!n&&!c&&!h&&u(t),p=n||c||h||f,d=p?r(t.length,String):[],g=d.length;for(var m in t)!e&&!l.call(t,m)||p&&("length"==m||h&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||d.push(m);return d}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(109),i=n(73);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(109),i=n(224),o=n(73),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e,n){(function(t){var r=n(331),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=s}).call(this,n(56)(t))},function(t,e,n){var r=n(741),i=n(742),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(743)(Object.keys,Object);t.exports=r},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(745),i=n(221),o=n(746),a=n(747),s=n(748),u=n(109),l=n(332),c=l(r),h=l(i),f=l(o),p=l(a),d=l(s),g=u;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||o&&"[object Promise]"!=g(o.resolve())||a&&"[object Set]"!=g(new a)||s&&"[object WeakMap]"!=g(new s))&&(g=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case c:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=g},function(t,e,n){var r=n(87)(n(68),"DataView");t.exports=r},function(t,e,n){var r=n(87)(n(68),"Promise");t.exports=r},function(t,e,n){var r=n(87)(n(68),"Set");t.exports=r},function(t,e,n){var r=n(87)(n(68),"WeakMap");t.exports=r},function(t,e,n){var r=n(340),i=n(165);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},function(t,e,n){var r=n(333),i=n(95),o=n(756),a=n(226),s=n(340),u=n(341),l=n(133);t.exports=function(t,e){return a(t)&&s(e)?u(l(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,3)}}},function(t,e,n){var r=n(752),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(753);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(222);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(755);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(162),i=n(227),o=n(38),a=n(132),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e,n){var r=n(757),i=n(758);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(225),i=n(336),o=n(38),a=n(223),s=n(224),u=n(133);t.exports=function(t,e,n){for(var l=-1,c=(e=r(e,t)).length,h=!1;++l<c;){var f=u(e[l]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++l!=c?h:!!(c=null==t?0:t.length)&&s(c)&&a(f,c)&&(o(t)||i(t))}},function(t,e,n){var r=n(760),i=n(761),o=n(226),a=n(133);t.exports=function(t){return o(t)?r(a(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(342);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e,n){var r=n(764);t.exports=function(t){var e=r(t),n=e%1;return e===e?n?e-n:e:0}},function(t,e,n){var r=n(765);t.exports=function(t){return t?(t=r(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}},function(t,e,n){var r=n(74),i=n(132),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=s.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):a.test(t)?NaN:+t}},function(t,e,n){var r=n(767),i=n(229),o=n(771),a=n(38);t.exports=function(t,e){return(a(t)?r:i)(t,o(e))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(769)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}},function(t,e,n){var r=n(166);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(t,e,n){var r=n(228);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e,n){var r=n(229);t.exports=function(t,e){var n=[];return r(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}},function(t,e,n){var r=n(774),i=n(225),o=n(223),a=n(74),s=n(133);t.exports=function(t,e,n,u){if(!a(t))return t;for(var l=-1,c=(e=i(e,t)).length,h=c-1,f=t;null!=f&&++l<c;){var p=s(e[l]),d=n;if(l!=h){var g=f[p];void 0===(d=u?u(g,p,f):void 0)&&(d=a(g)?g:o(e[l+1])?[]:{})}r(f,p,d),f=f[p]}return t}},function(t,e,n){var r=n(344),i=n(220),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(87),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},function(t,e,n){var r=n(227),i=n(108),o=n(345),a=n(777),s=n(339),u=n(778),l=n(228);t.exports=function(t,e,n){var c=-1;e=r(e.length?e:[l],s(i));var h=o(t,(function(t,n,i){return{criteria:r(e,(function(e){return e(t)})),index:++c,value:t}}));return a(h,(function(t,e){return u(t,e,n)}))}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(779);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,u=n.length;++i<s;){var l=r(o[i],a[i]);if(l)return i>=u?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(132);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t===t,a=r(t),s=void 0!==e,u=null===e,l=e===e,c=r(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||i&&s&&l||!n&&l||!o)return 1;if(!i&&!a&&!c&&t<e||c&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}},function(t,e,n){"use strict";n.r(e);var r=484813681109536e-20,i=Math.PI/2,o=.017453292519943295,a=57.29577951308232,s=Math.PI/4,u=2*Math.PI,l=3.14159265359,c={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},h={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},f=/[\s_\-\/\(\)]/g;function p(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(f,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(f,"")===i)return t[n]}var d=function(t){var e,n,r,i={},a=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),s={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*o},lat_1:function(t){i.lat1=t*o},lat_2:function(t){i.lat2=t*o},lat_ts:function(t){i.lat_ts=t*o},lon_0:function(t){i.long0=t*o},lon_1:function(t){i.long1=t*o},lon_2:function(t){i.long2=t*o},alpha:function(t){i.alpha=parseFloat(t)*o},lonc:function(t){i.longc=t*o},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=p(h,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*o},pm:function(t){var e=p(c,t);i.from_greenwich=(e||parseFloat(t))*o},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(i.axis=t)}};for(e in a)n=a[e],e in s?"function"===typeof(r=s[e])?r(n):i[r]=n:i[e]=n;return"string"===typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},g=function(t){return new b(t).output()},m=/\s/,y=/[A-Za-z]/,v=/[A-Za-z84]/,E=/[,\]]/,_=/[\d\.E\-\+]/;function b(t){if("string"!==typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function S(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return w(e,t),t}),r);e&&(t[e]=i)}function w(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void w(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&w(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&w(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void S(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return w(t,e[n]);return S(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}b.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;m.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},b.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(E.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},b.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},b.prototype.number=function(t){if(!_.test(t)){if(E.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},b.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},b.prototype.keyword=function(t){if(v.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!E.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},b.prototype.neutral=function(t){if(y.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(_.test(t))return this.word=t,void(this.state=3);if(!E.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},b.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function x(t){return.017453292519943295*t}var T=function(t){var e=g(t),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return w(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=t.AXIS[n][0].toLowerCase();-1!==i.indexOf("north")?e+="n":-1!==i.indexOf("south")?e+="s":-1!==i.indexOf("east")?e+="e":-1!==i.indexOf("west")&&(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",x],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",x],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",x],["lat0","latitude_of_origin",x],["lat0","standard_parallel_1",x],["lat1","standard_parallel_1",x],["lat2","standard_parallel_2",x],["azimuth","Azimuth"],["alpha","azimuth",x],["srsCode","name"]].forEach((function(e){return function(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=x(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i};function L(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"===typeof n?"+"===n.charAt(0)?L[t]=d(arguments[1]):L[t]=T(arguments[1]):L[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?L.apply(e,t):L(t)}));if("string"===typeof t){if(t in L)return L[t]}else"EPSG"in t?L["EPSG:"+t.EPSG]=t:"ESRI"in t?L["ESRI:"+t.ESRI]=t:"IAU2000"in t?L["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(L);var C=L;var A=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var M=["3857","900913","3785","102113"];var R=function(t){if(!function(t){return"string"===typeof t}(t))return t;if(function(t){return t in C}(t))return C[t];if(function(t){return A.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=T(t);if(function(t){var e=p(t,"authority");if(e){var n=p(e,"epsg");return n&&M.indexOf(n)>-1}}(e))return C["EPSG:3857"];var n=function(t){var e=p(t,"extension");if(e)return p(e,"proj4")}(e);return n?d(n):e}return function(t){return"+"===t[0]}(t)?d(t):void 0},O=function(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t},P=function(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)},I=function(t){return t<0?-1:1},N=function(t){return Math.abs(t)<=l?t:t-I(t)*u},D=function(t,e,n){var r=t*n,o=.5*t;return r=Math.pow((1-r)/(1+r),o),Math.tan(.5*(i-e))/r},k=function(t,e){for(var n,r,o=.5*t,a=i-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(a),a+=r=i-2*Math.atan(e*Math.pow((1-n)/(1+n),o))-a,Math.abs(r)<=1e-10)return a;return-9999};function F(t){return t}var V=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=P(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,o=t.y;if(o*a>90&&o*a<-90&&r*a>180&&r*a<-180)return null;if(Math.abs(Math.abs(o)-i)<=1e-10)return null;if(this.sphere)e=this.x0+this.a*this.k0*N(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(s+.5*o));else{var u=Math.sin(o),l=D(this.e,o,u);e=this.x0+this.a*this.k0*N(r-this.long0),n=this.y0-this.a*this.k0*Math.log(l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,o=t.y-this.y0;if(this.sphere)n=i-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var a=Math.exp(-o/(this.a*this.k0));if(-9999===(n=k(this.e,a)))return null}return e=N(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:F,inverse:F,names:["longlat","identity"]}],j={},B=[];function U(t,e){var n=B.length;return t.names?(B[n]=t,t.names.forEach((function(t){j[t.toLowerCase()]=n})),this):(console.log(e),!0)}var G={start:function(){V.forEach(U)},add:U,get:function(t){if(!t)return!1;var e=t.toLowerCase();return"undefined"!==typeof j[e]&&B[j[e]]?B[j[e]]:void 0}},K={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},W=K.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};K.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var z={};z.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},z.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},z.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},z.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},z.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},z.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},z.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},z.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},z.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},z.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},z.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},z.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},z.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},z.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},z.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},z.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},z.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var Y=function(t,e,n,i,o,a){var s={};return s.datum_type=void 0===t||"none"===t?5:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=1),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=2,s.datum_params[3]*=r,s.datum_params[4]*=r,s.datum_params[5]*=r,s.datum_params[6]=s.datum_params[6]/1e6+1))),s.a=n,s.b=i,s.es=o,s.ep2=a,s};function H(t,e){if(!(this instanceof H))return new H(t);e=e||function(t){if(t)throw t};var n=R(t);if("object"===typeof n){var r=H.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=p(z,n.datumCode);i&&(n.datum_params=i.towgs84?i.towgs84.split(","):null,n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var o=function(t,e,n,r,i){if(!t){var o=p(K,r);o||(o=W),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<1e-10)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),a=function(t,e,n,r){var i=t*t,o=e*e,a=(i-o)/i,s=0;return r?(i=(t*=1-a*(.16666666666666666+a*(.04722222222222222+.022156084656084655*a)))*t,a=0):s=Math.sqrt(a),{es:a,e:s,ep2:(i-o)/o}}(o.a,o.b,o.rf,n.R_A),s=n.datum||Y(n.datumCode,n.datum_params,o.a,o.b,a.es,a.ep2);O(this,n),O(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=s,this.init(),e(null,this)}else e(t)}else e(t)}H.projections=G,H.projections.start();var q=H;function X(t,e,n){var r,o,a,s,u=t.x,l=t.y,c=t.z?t.z:0;if(l<-i&&l>-1.001*i)l=-i;else if(l>i&&l<1.001*i)l=i;else{if(l<-i)return{x:-1/0,y:-1/0,z:t.z};if(l>i)return{x:1/0,y:1/0,z:t.z}}return u>Math.PI&&(u-=2*Math.PI),o=Math.sin(l),s=Math.cos(l),a=o*o,{x:((r=n/Math.sqrt(1-e*a))+c)*s*Math.cos(u),y:(r+c)*s*Math.sin(u),z:(r*(1-e)+c)*o}}function Z(t,e,n,r){var o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_=t.x,b=t.y,S=t.z?t.z:0;if(o=Math.sqrt(_*_+b*b),a=Math.sqrt(_*_+b*b+S*S),o/n<1e-12){if(v=0,a/n<1e-12)return i,E=-r,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(b,_);s=S/a,f=(u=o/a)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*u*u)),p=s*l,y=0;do{y++,c=e*(h=n/Math.sqrt(1-e*p*p))/(h+(E=o*f+S*p-h*(1-e*p*p))),m=(g=s*(l=1/Math.sqrt(1-c*(2-c)*u*u)))*f-(d=u*(1-c)*l)*p,f=d,p=g}while(m*m>1e-24&&y<30);return{x:v,y:Math.atan(g/Math.abs(d)),z:E}}function J(t){return 1===t||2===t}var Q=function(t,e,n){return function(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}(t,e)||5===t.datum_type||5===e.datum_type?n:t.es!==e.es||t.a!==e.a||J(t.datum_type)||J(e.datum_type)?(n=X(n,t.es,t.a),J(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6];return{x:l*(t.x-u*t.y+s*t.z)+r,y:l*(u*t.x+t.y-a*t.z)+i,z:l*(-s*t.x+a*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),J(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=(t.x-r)/l,h=(t.y-i)/l,f=(t.z-o)/l;return{x:c+u*h-s*f,y:-u*c+h+a*f,z:s*c-a*h+f}}}(n,e.datum_type,e.datum_params)),Z(n,e.es,e.a,e.b)):n},$=function(t,e,n){var r,i,o,a=n.x,s=n.y,u=n.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=s,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=u,i="z"),t.axis[o]){case"e":case"w":case"n":case"s":l[i]=r;break;case"u":void 0!==n[i]&&(l.z=r);break;case"d":void 0!==n[i]&&(l.z=-r);break;default:return null}return l},tt=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e};function et(t){if("function"===typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!==typeof t||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function nt(t,e,n){var r;if(Array.isArray(n)&&(n=tt(n)),function(t){et(t.x),et(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=nt(t,r=new q("WGS84"),n),t=r),"enu"!==t.axis&&(n=$(t,!1,n)),"longlat"===t.projName)n={x:n.x*o,y:n.y*o,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;return t.from_greenwich&&(n.x+=t.from_greenwich),n=Q(t.datum,e.datum,n),e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*a,y:n.y*a,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),"enu"!==e.axis?$(e,!0,n):n}var rt=q("WGS84");function it(t,e,n){var r,i,o;return Array.isArray(n)?(r=nt(t,e,n)||{x:NaN,y:NaN},n.length>2?"undefined"!==typeof t.name&&"geocent"===t.name||"undefined"!==typeof e.name&&"geocent"===e.name?"number"===typeof r.z?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(i=nt(t,e,n),2===(o=Object.keys(n)).length||o.forEach((function(r){if("undefined"!==typeof t.name&&"geocent"===t.name||"undefined"!==typeof e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;i[r]=n[r]})),i)}function ot(t){return t instanceof q?t:t.oProj?t.oProj:q(t)}var at=function(t,e,n){t=ot(t);var r,i=!1;return"undefined"===typeof e?(e=t,t=rt,i=!0):("undefined"!==typeof e.x||Array.isArray(e))&&(n=e,e=t,t=rt,i=!0),e=ot(e),n?it(t,e,n):(r={forward:function(n){return it(t,e,n)},inverse:function(n){return it(e,t,n)}},i&&(r.oProj=e),r)},st=73,ut=79,lt={forward:ct,inverse:function(t){var e=dt(yt(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:ht};function ct(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function(t,e,n){var r=mt(n),i=Math.floor(t/1e5),o=Math.floor(e/1e5)%20;return function(t,e,n){var r=n-1,i="AJSAJS".charCodeAt(r),o="AFAFAF".charCodeAt(r),a=i+t-1,s=o+e,u=!1;a>90&&(a=a-90+65-1,u=!0);(a===st||i<st&&a>st||(a>st||i<st)&&u)&&a++;(a===ut||i<ut&&a>ut||(a>ut||i<ut)&&u)&&++a===st&&a++;a>90&&(a=a-90+65-1);s>86?(s=s-86+65-1,u=!0):u=!1;(s===st||o<st&&s>st||(s>st||o<st)&&u)&&s++;(s===ut||o<ut&&s>ut||(s>ut||o<ut)&&u)&&++s===st&&s++;s>86&&(s=s-86+65-1);return String.fromCharCode(a)+String.fromCharCode(s)}(i,o,r)}(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}(function(t){var e,n,r,i,o,a,s,u=t.lat,l=t.lon,c=6378137,h=ft(u),f=ft(l);s=Math.floor((l+180)/6)+1,180===l&&(s=60);u>=56&&u<64&&l>=3&&l<12&&(s=32);u>=72&&u<84&&(l>=0&&l<9?s=31:l>=9&&l<21?s=33:l>=21&&l<33?s=35:l>=33&&l<42&&(s=37));a=ft(6*(s-1)-180+3),.006739496752268451,e=c/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),n=Math.tan(h)*Math.tan(h),r=.006739496752268451*Math.cos(h)*Math.cos(h),i=Math.cos(h)*(f-a),o=c*(.9983242984503243*h-.002514607064228144*Math.sin(2*h)+2639046602129982e-21*Math.sin(4*h)-3.418046101696858e-9*Math.sin(6*h));var p=.9996*e*(i+(1-n+r)*i*i*i/6+(5-18*n+n*n+72*r-.39089081163157013)*i*i*i*i*i/120)+5e5,d=.9996*(o+e*Math.tan(h)*(i*i/2+(5-n+9*r+4*r*r)*i*i*i*i/24+(61-58*n+n*n+600*r-2.2240339282485886)*i*i*i*i*i*i/720));u<0&&(d+=1e7);return{northing:Math.round(d),easting:Math.round(p),zoneNumber:s,zoneLetter:gt(u)}}({lat:t[1],lon:t[0]}),e)}function ht(t){var e=dt(yt(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function ft(t){return t*(Math.PI/180)}function pt(t){return t/Math.PI*180}function dt(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,l,c,h,f,p=6378137,d=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),g=n-5e5,m=e;r<"N"&&(m-=1e7),c=6*(i-1)-180+3,f=(h=m/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*h)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*h)+151*d*d*d/96*Math.sin(6*h),o=p/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),s=.006739496752268451*Math.cos(f)*Math.cos(f),u=.99330562*p/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),l=g/(.9996*o);var y=f-o*Math.tan(f)/u*(l*l/2-(5+3*a+10*s-4*s*s-.06065547077041606)*l*l*l*l/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*l*l*l*l*l*l/720);y=pt(y);var v,E=(l-(1+2*a+s)*l*l*l/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*l*l*l*l*l/120)/Math.cos(f);if(E=c+pt(E),t.accuracy){var _=dt({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:_.lat,right:_.lon,bottom:y,left:E}}else v={lat:y,lon:E};return v}function gt(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function mt(t){var e=t%6;return 0===e&&(e=6),e}function yt(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);for(var u=mt(a),l=function(t,e){var n="AJSAJS".charCodeAt(e-1),r=1e5,i=!1;for(;n!==t.charCodeAt(0);){if(++n===st&&n++,n===ut&&n++,n>90){if(i)throw"Bad character: "+t;n=65,i=!0}r+=1e5}return r}(r.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n="AFAFAF".charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===st&&n++,n===ut&&n++,n>86){if(i)throw"Bad character: "+t;n=65,i=!0}r+=1e5}return r}(r.charAt(1),u);c<vt(s);)c+=2e6;var h=n-o;if(h%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,g=h/2,m=0,y=0;return g>0&&(f=1e5/Math.pow(10,g),p=t.substring(o,o+g),m=parseFloat(p)*f,d=t.substring(o+g),y=parseFloat(d)*f),{easting:m+l,northing:y+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function vt(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Et(t,e,n){if(!(this instanceof Et))return new Et(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"===typeof t&&"undefined"===typeof e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Et.fromMGRS=function(t){return new Et(ht(t))},Et.prototype.toMGRS=function(t){return ct([this.x,this.y],t)};var _t=Et,bt=.01068115234375,St=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*bt))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*bt)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e},wt=function(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))},xt=function(t,e,n){for(var r=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(wt(i,a,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<1e-10)return i}return i};var Tt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=St(this.es),this.ml0=wt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=N(i-this.long0),s=Math.sin(o),u=Math.cos(o);if(this.es){var l=u*a,c=Math.pow(l,2),h=this.ep2*Math.pow(u,2),f=Math.pow(h,2),p=Math.abs(u)>1e-10?Math.tan(o):0,d=Math.pow(p,2),g=Math.pow(d,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var m=wt(o,s,u,this.en);n=this.a*(this.k0*l*(1+c/6*(1-d+h+c/20*(5-18*d+g+14*h-58*d*h+c/42*(61+179*g-g*d-479*d)))))+this.x0,r=this.a*(this.k0*(m-this.ml0+s*a*l/2*(1+c/12*(5-d+9*h+4*f+c/30*(61+g-58*d+270*h-330*d*h+c/56*(1385+543*g-g*d-3111*d))))))+this.y0}else{var y=u*Math.sin(a);if(Math.abs(Math.abs(y)-1)<1e-10)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,r=u*Math.cos(a)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(r))>=1){if(y-1>1e-10)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,o,a=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+s/this.k0,n=xt(e,this.es,this.en),Math.abs(n)<i){var u=Math.sin(n),l=Math.cos(n),c=Math.abs(l)>1e-10?Math.tan(n):0,h=this.ep2*Math.pow(l,2),f=Math.pow(h,2),p=Math.pow(c,2),d=Math.pow(p,2);e=1-this.es*Math.pow(u,2);var g=a*Math.sqrt(e)/this.k0,m=Math.pow(g,2);r=n-(e*=c)*m/(1-this.es)*.5*(1-m/12*(5+3*p-9*h*p+h-4*f-m/30*(61+90*p-252*h*p+45*d+46*h-m/56*(1385+3633*p+4095*d+1574*d*p)))),o=N(this.long0+g*(1-m/6*(1+2*p+h-m/20*(5+28*p+24*d+8*h*p+6*h-m/42*(61+662*p+1320*d+720*d*p))))/l)}else r=i*I(s),o=0;else{var y=Math.exp(a/this.k0),v=.5*(y-1/y),E=this.lat0+s/this.k0,_=Math.cos(E);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(v,2))),r=Math.asin(e),s<0&&(r=-r),o=0===v&&0===_?0:N(Math.atan2(v,_)+this.long0)}return t.x=o,t.y=r,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},Lt=function(t){var e=Math.exp(t);return e=(e-1/e)/2},Ct=function(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},At=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(Ct(1,e)+1))),t<0?-e:e},Mt=function(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)},Rt=function(t,e,n){for(var r,i,o=Math.sin(e),a=Math.cos(e),s=Lt(n),u=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(n),l=2*a*u,c=-2*o*s,h=t.length-1,f=t[h],p=0,d=0,g=0;--h>=0;)r=d,i=p,f=l*(d=f)-r-c*(p=g)+t[h],g=c*d-i+l*p;return[(l=o*u)*f-(c=a*s)*g,l*g+c*f]};var Ot={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=Mt(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=N(t.x-this.long0),n=t.y;n=Mt(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(o*i,Ct(r,i*a)),e=At(Math.tan(e));var s,u,l=Rt(this.gtu,2*n,2*e);return n+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=Rt(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(Lt(r));var a=Math.sin(i),s=Math.cos(i),u=Math.sin(r),l=Math.cos(r);i=Math.atan2(a*l,Ct(u,l*s)),r=Math.atan2(u,l*s),e=N(r+this.long0),n=Mt(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]};var Pt={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(N(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*o,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Ot.init.apply(this),this.forward=Ot.forward,this.inverse=Ot.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},It=function(t,e){return Math.pow((1-t)/(1+t),e)};var Nt={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+s)/(Math.pow(Math.tan(.5*this.lat0+s),this.C)*It(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+s),this.C)*It(this.e*Math.sin(n),this.ratexp))-i,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+s)/this.K,1/this.C),o=20;o>0&&(n=2*Math.atan(r*It(this.e*Math.sin(t.y),-.5*this.e))-i,!(Math.abs(n-t.y)<1e-14));--o)t.y=n;return o?(t.x=e,t.y=n,t):null},names:["gauss"]};var Dt={init:function(){Nt.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=N(t.x-this.long0),Nt.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,Nt.inverse.apply(this,[t]),t.x=N(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var kt={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+I(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*P(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/D(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=P(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-i,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,o,a,s,u=t.x,l=t.y,c=Math.sin(l),h=Math.cos(l),f=N(u-this.long0);return Math.abs(Math.abs(u-this.long0)-Math.PI)<=1e-10&&Math.abs(l+this.lat0)<=1e-10?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*c+this.coslat0*h*Math.cos(f)),t.x=this.a*e*h*Math.sin(f)+this.x0,t.y=this.a*e*(this.coslat0*c-this.sinlat0*h*Math.cos(f))+this.y0,t):(n=2*Math.atan(this.ssfn_(l,c,this.e))-i,o=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=1e-10?(a=D(this.e,l*this.con,this.con*c),s=2*this.a*this.k0*a/this.cons,t.x=this.x0+s*Math.sin(u-this.long0),t.y=this.y0-this.con*s*Math.cos(u-this.long0),t):(Math.abs(this.sinlat0)<1e-10?(e=2*this.a*this.k0/(1+o*Math.cos(f)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*o*Math.cos(f))),t.y=e*(this.cosX0*r-this.sinX0*o*Math.cos(f))+this.y0),t.x=e*o*Math.sin(f)+this.x0,t))},inverse:function(t){var e,n,r,o,a;t.x-=this.x0,t.y-=this.y0;var s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var u=2*Math.atan(s/(2*this.a*this.k0));return e=this.long0,n=this.lat0,s<=1e-10?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(u)*this.sinlat0+t.y*Math.sin(u)*this.coslat0/s),e=Math.abs(this.coslat0)<1e-10?this.lat0>0?N(this.long0+Math.atan2(t.x,-1*t.y)):N(this.long0+Math.atan2(t.x,t.y)):N(this.long0+Math.atan2(t.x*Math.sin(u),s*this.coslat0*Math.cos(u)-t.y*this.sinlat0*Math.sin(u))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=1e-10){if(s<=1e-10)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=s*this.cons/(2*this.a*this.k0),n=this.con*k(this.e,r),e=this.con*N(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=1e-10?a=this.X0:(a=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/s),e=N(this.long0+Math.atan2(t.x*Math.sin(o),s*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),n=-1*k(this.e,Math.tan(.5*(i+a)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(i+t))*Math.pow((1-e)/(1+e),.5*n)}};var Ft={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,l=o,c=-1e3,h=0;Math.abs(l-c)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]};var Vt={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,i,o=D(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(a*a<1&&(a=1),isNaN(this.longc)){var s=D(this.e,this.lat1,Math.sin(this.lat1)),u=D(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var l=Math.pow(s,this.bl),c=Math.pow(u,this.bl);i=.5*((r=this.el/l)-1/r);var h=(this.el*this.el-c*l)/(this.el*this.el+c*l),f=(c-l)/(c+l),p=N(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*p)/f)/this.bl,this.long0=N(this.long0);var d=N(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*d)/i),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else r=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=r*Math.pow(o,this.bl),i=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(t){var e,n,r,o=t.x,a=t.y,u=N(o-this.long0);if(Math.abs(Math.abs(a)-i)<=1e-10)r=a>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(s+r*this.gamma0*.5)),e=-1*r*i*this.al/this.bl;else{var l=D(this.e,a,Math.sin(a)),c=this.el/Math.pow(l,this.bl),h=.5*(c-1/c),f=.5*(c+1/c),p=Math.sin(this.bl*u),d=(h*Math.sin(this.gamma0)-p*Math.cos(this.gamma0))/f;n=Math.abs(Math.abs(d)-1)<=1e-10?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-d)/(1+d))/this.bl,e=Math.abs(Math.cos(this.bl*u))<=1e-10?this.al*this.bl*u:this.al*Math.atan2(h*Math.cos(this.gamma0)+p*Math.sin(this.gamma0),Math.cos(this.bl*u))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),o=.5*(r-1/r),a=.5*(r+1/r),s=Math.sin(this.bl*e/this.al),u=(s*Math.cos(this.gamma0)+o*Math.sin(this.gamma0))/a,l=Math.pow(this.el/Math.sqrt((1+u)/(1-u)),1/this.bl);return Math.abs(u-1)<1e-10?(t.x=this.long0,t.y=i):Math.abs(u+1)<1e-10?(t.x=this.long0,t.y=-1*i):(t.y=k(this.e,l),t.x=N(this.long0-Math.atan2(o*Math.cos(this.gamma0)-s*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var jt={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=P(this.e,e,n),i=D(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=P(this.e,o,a),u=D(this.e,this.lat2,o),l=D(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(r/s)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=1e-10&&(n=I(n)*(i-2e-10));var r,o,a=Math.abs(Math.abs(n)-i);if(a>1e-10)r=D(this.e,n,Math.sin(n)),o=this.a*this.f0*Math.pow(r,this.ns);else{if((a=n*this.ns)<=0)return null;o=0}var s=this.ns*N(e-this.long0);return t.x=this.k0*(o*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(s))+this.y0,t},inverse:function(t){var e,n,r,o,a,s=(t.x-this.x0)/this.k0,u=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+u*u),n=1):(e=-Math.sqrt(s*s+u*u),n=-1);var l=0;if(0!==e&&(l=Math.atan2(n*s,n*u)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(o=k(this.e,r)))return null}else o=-i;return a=N(l/this.ns+this.long0),t.x=a,t.y=o,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var Bt={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y,c=N(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]},Ut=function(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},Gt=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},Kt=function(t){return.375*t*(1+.25*t*(1+.46875*t))},Wt=function(t){return.05859375*t*t*(1+.75*t)},zt=function(t){return t*t*t*(35/3072)},Yt=function(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)},Ht=function(t){return Math.abs(t)<i?t:t-I(t)*Math.PI},qt=function(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN};var Xt={init:function(){this.sphere||(this.e0=Gt(this.es),this.e1=Kt(this.es),this.e2=Wt(this.es),this.e3=zt(this.es),this.ml0=this.a*Ut(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=N(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=Yt(this.a,this.e,o),u=Math.tan(i)*Math.tan(i),l=r*Math.cos(i),c=l*l,h=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*h)*c/120)),n=this.a*Ut(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-u+6*h)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,o=t.y/this.a;if(this.sphere){var a=o+this.lat0;e=Math.asin(Math.sin(a)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(a))}else{var s=this.ml0/this.a+o,u=qt(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(u)-i)<=1e-10)return t.x=this.long0,t.y=i,o<0&&(t.y*=-1),t;var l=Yt(this.a,this.e,Math.sin(u)),c=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(u),2),f=r*this.a/l,p=f*f;e=u-l*Math.tan(u)/c*f*f*(.5-(1+3*h)*f*f/24),n=f*(1-p*(h/3+(1+3*h)*h*p/15))/Math.cos(u)}return t.x=N(n+this.long0),t.y=Ht(e),t},names:["Cassini","Cassini_Soldner","cass"]},Zt=function(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e};var Jt={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-i)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Zt(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=.3333333333333333*t,e=t*t,n[0]+=.17222222222222222*e,n[1]=.06388888888888888*e,e*=t,n[0]+=.10257936507936508*e,n[1]+=.0664021164021164*e,n[2]=.016415012942191543*e,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Zt(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,o,a,u,l,c,h,f,p=t.x,d=t.y;if(p=N(p-this.long0),this.sphere){if(a=Math.sin(d),f=Math.cos(d),r=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+f*r:1+this.sinph0*a+this.cosph0*f*r)<=1e-10)return null;e=(n=Math.sqrt(2/n))*f*Math.sin(p),n*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*f*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(d+this.lat0)<1e-10)return null;n=s-.5*d,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(p),n*=r}}else{switch(l=0,c=0,h=0,r=Math.cos(p),o=Math.sin(p),a=Math.sin(d),u=Zt(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(l=u/this.qp,c=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:h=1+this.sinb1*l+this.cosb1*c*r;break;case this.EQUIT:h=1+c*r;break;case this.N_POLE:h=i+d,u=this.qp-u;break;case this.S_POLE:h=d-i,u=this.qp+u}if(Math.abs(h)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),n=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*l-this.sinb1*c*r):(h=Math.sqrt(2/(1+c*r)))*l*this.ymf,e=this.xmf*h*c*o;break;case this.N_POLE:case this.S_POLE:u>=0?(e=(h=Math.sqrt(u))*o,n=r*(this.mode===this.S_POLE?h:-h)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,o,a,s,u,l=t.x/this.a,c=t.y/this.a;if(this.sphere){var h,f=0,p=0;if((n=.5*(h=Math.sqrt(l*l+c*c)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(p=Math.sin(n),f=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(h)<=1e-10?0:Math.asin(c*p/h),l*=p,c=f*h;break;case this.OBLIQ:n=Math.abs(h)<=1e-10?this.lat0:Math.asin(f*this.sinph0+c*p*this.cosph0/h),l*=p*this.cosph0,c=(f-Math.sin(n)*this.sinph0)*h;break;case this.N_POLE:c=-c,n=i-n;break;case this.S_POLE:n-=i}e=0!==c||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,c):0}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,c*=this.dd,(s=Math.sqrt(l*l+c*c))<1e-10)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*s/this.rq),r=Math.cos(o),l*=o=Math.sin(o),this.mode===this.OBLIQ?(u=r*this.sinb1+c*o*this.cosb1/s,a=this.qp*u,c=s*this.cosb1*r-c*this.sinb1*o):(u=c*o/s,a=this.qp*u,c=s*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(c=-c),!(a=l*l+c*c))return t.x=this.long0,t.y=this.lat0,t;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}e=Math.atan2(l,c),n=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}(Math.asin(u),this.apa)}return t.x=N(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Qt=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)};var $t={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=P(this.e3,this.sin_po,this.cos_po),this.qs1=Zt(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=P(this.e3,this.sin_po,this.cos_po),this.qs2=Zt(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Zt(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Zt(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*N(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=N(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,a=Qt(.5*e);if(t<1e-10)return a;for(var s=t*t,u=1;u<=25;u++)if(a+=o=.5*(i=1-(r=t*(n=Math.sin(a)))*r)*i/Math.cos(a)*(e/(1-s)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return a;return null}};var te={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y;return r=N(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),1,(o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=1e-10?(a=this.x0+1*this.a*n*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),a=Qt(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=N(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]};var ee={init:function(){this.sphere||(this.k0=P(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=N(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=Zt(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=N(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*i:i;for(var r,o,a,s,u=Math.asin(.5*e),l=0;l<30;l++)if(o=Math.sin(u),a=Math.cos(u),s=t*o,u+=r=Math.pow(1-s*s,2)/(2*a)*(e/(1-t*t)-o/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(r)<=1e-10)return u;return NaN}(this.e,2*t.y*this.k0/this.a),e=N(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var ne={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=N(e-this.long0),i=Ht(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=N(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Ht(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var re={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Gt(this.es),this.e1=Kt(this.es),this.e2=Wt(this.es),this.e3=zt(this.es),this.ml0=this.a*Ut(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,a=N(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=1e-10?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(Ht(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=1e-10)e=this.a*a,n=-1*this.ml0;else{var s=Yt(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(r),n=this.a*Ut(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,a,s,u,l;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=1e-10)e=N(r/this.a+this.long0),n=0;else{var c;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,u=a,o=20;o;--o)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=1e-10){n=u;break}e=N(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=1e-10)n=0,e=N(this.long0+r/this.a);else{var h,f,p,d,g;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,u=a,o=20;o;--o)if(g=this.e*Math.sin(u),h=Math.sqrt(1-g*g)*Math.tan(u),f=this.a*Ut(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(h*(d=f/this.a)+1)-d-.5*h*(d*d+s))/(this.es*Math.sin(2*u)*(d*d+s-2*a*d)/(4*h)+(a-d)*(h*p-2/Math.sin(2*u))-p),Math.abs(l)<=1e-10){n=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=N(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var ie={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,i=t.y-this.lat0,o=n-this.long0,a=i/r*1e-5,s=o,u=1,l=0;for(e=1;e<=10;e++)u*=a,l+=this.A[e]*u;var c,h=l,f=s,p=1,d=0,g=0,m=0;for(e=1;e<=6;e++)c=d*h+p*f,p=p*h-d*f,d=c,g=g+this.B_re[e]*p-this.B_im[e]*d,m=m+this.B_im[e]*p+this.B_re[e]*d;return t.x=m*this.a+this.x0,t.y=g*this.a+this.y0,t},inverse:function(t){var e,n,i=t.x,o=t.y,a=i-this.x0,s=(o-this.y0)/this.a,u=a/this.a,l=1,c=0,h=0,f=0;for(e=1;e<=6;e++)n=c*s+l*u,l=l*s-c*u,c=n,h=h+this.C_re[e]*l-this.C_im[e]*c,f=f+this.C_im[e]*l+this.C_re[e]*c;for(var p=0;p<this.iterations;p++){var d,g=h,m=f,y=s,v=u;for(e=2;e<=6;e++)d=m*h+g*f,g=g*h-m*f,m=d,y+=(e-1)*(this.B_re[e]*g-this.B_im[e]*m),v+=(e-1)*(this.B_im[e]*g+this.B_re[e]*m);g=1,m=0;var E=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)d=m*h+g*f,g=g*h-m*f,m=d,E+=e*(this.B_re[e]*g-this.B_im[e]*m),_+=e*(this.B_im[e]*g+this.B_re[e]*m);var b=E*E+_*_;h=(y*E+v*_)/b,f=(v*E-y*_)/b}var S=h,w=f,x=1,T=0;for(e=1;e<=9;e++)x*=S,T+=this.D[e]*x;var L=this.lat0+T*r*1e5,C=this.long0+w;return t.x=C,t.y=L,t},names:["New_Zealand_Map_Grid","nzmg"]};var oe={init:function(){},forward:function(t){var e=t.x,n=t.y,r=N(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=N(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};var ae={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=St(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=N(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<1e-10)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var u=Math.sin(i),l=Math.cos(i);n=this.a*wt(i,u,l,this.en),e=this.a*r*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r,o;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=Qt((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Qt(Math.sin(e)/this.n)),r=N(r+this.long0),e=Ht(e)):(e=xt(t.y/this.a,this.es,this.en),(o=Math.abs(e))<i?(o=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(e)),r=N(n)):o-1e-10<i&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]};var se={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=N(e-this.long0),i=n,o=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<1e-10)break}i/=2,Math.PI/2-Math.abs(n)<1e-10&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=N(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]};var ue={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Gt(this.es),this.e1=Kt(this.es),this.e2=Wt(this.es),this.e3=zt(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=P(this.e,this.sinphi,this.cosphi),this.ml1=Ut(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=P(this.e,this.sinphi,this.cosphi),this.ml2=Ut(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ut(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=Ut(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*N(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=N(this.long0+o/this.ns),r=Ht(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=qt(a,this.e0,this.e1,this.e2,this.e3),i=N(this.long0+o/this.ns),t.x=i,t.y=r,t},names:["Equidistant_Conic","eqdc"]};var le={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,o=t.y,a=N(r-this.long0);Math.abs(o)<=1e-10&&(e=this.x0+this.R*a,n=this.y0);var s=Qt(2*Math.abs(o/Math.PI));(Math.abs(a)<=1e-10||Math.abs(Math.abs(o)-i)<=1e-10)&&(e=this.x0,n=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var u=.5*Math.abs(Math.PI/a-a/Math.PI),l=u*u,c=Math.sin(s),h=Math.cos(s),f=h/(c+h-1),p=f*f,d=f*(2/c-1),g=d*d,m=Math.PI*this.R*(u*(f-g)+Math.sqrt(l*(f-g)*(f-g)-(g+l)*(p-g)))/(g+l);a<0&&(m=-m),e=this.x0+m;var y=l+f;return m=Math.PI*this.R*(d*y-u*Math.sqrt((g+l)*(l+1)-y*y))/(g+l),n=o>=0?this.y0+m:this.y0-m,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,o,a,s,u,l,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(u=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,n=t.y>=0?(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(r)<1e-10?this.long0:N(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var ce={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_,b,S,w,x=t.x,T=t.y,L=Math.sin(t.y),C=Math.cos(t.y),A=N(x-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(t.x=this.x0+this.a*(i-T)*Math.sin(A),t.y=this.y0-this.a*(i-T)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=1e-10?(t.x=this.x0+this.a*(i+T)*Math.sin(A),t.y=this.y0+this.a*(i+T)*Math.cos(A),t):(E=this.sin_p12*L+this.cos_p12*C*Math.cos(A),v=(y=Math.acos(E))?y/Math.sin(y):1,t.x=this.x0+this.a*v*C*Math.sin(A),t.y=this.y0+this.a*v*(this.cos_p12*L-this.sin_p12*C*Math.cos(A)),t):(e=Gt(this.es),n=Kt(this.es),r=Wt(this.es),o=zt(this.es),Math.abs(this.sin_p12-1)<=1e-10?(a=this.a*Ut(e,n,r,o,i),s=this.a*Ut(e,n,r,o,T),t.x=this.x0+(a-s)*Math.sin(A),t.y=this.y0-(a-s)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=1e-10?(a=this.a*Ut(e,n,r,o,i),s=this.a*Ut(e,n,r,o,T),t.x=this.x0+(a+s)*Math.sin(A),t.y=this.y0+(a+s)*Math.cos(A),t):(u=L/C,l=Yt(this.a,this.e,this.sin_p12),c=Yt(this.a,this.e,L),h=Math.atan((1-this.es)*u+this.es*l*this.sin_p12/(c*C)),_=0===(f=Math.atan2(Math.sin(A),this.cos_p12*Math.tan(h)-this.sin_p12*Math.cos(A)))?Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.abs(Math.abs(f)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.asin(Math.sin(A)*Math.cos(h)/Math.sin(f)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),y=l*_*(1-(b=_*_)*(m=(d=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*d)*(1-m)/6+(S=b*_)/8*(g=p*d)*(1-2*m)+(w=S*_)/120*(m*(4-7*m)-3*p*p*(1-7*m))-w*_/48*g),t.x=this.x0+y*Math.sin(f),t.y=this.y0+y*Math.cos(f),t))},inverse:function(t){var e,n,r,o,a,s,u,l,c,h,f,p,d,g,m,y,v,E,_,b,S,w,x;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*i*this.a)return;return n=e/this.a,r=Math.sin(n),o=Math.cos(n),a=this.long0,Math.abs(e)<=1e-10?s=this.lat0:(s=Qt(o*this.sin_p12+t.y*r*this.cos_p12/e),u=Math.abs(this.lat0)-i,a=Math.abs(u)<=1e-10?this.lat0>=0?N(this.long0+Math.atan2(t.x,-t.y)):N(this.long0-Math.atan2(-t.x,t.y)):N(this.long0+Math.atan2(t.x*r,e*this.cos_p12*o-t.y*this.sin_p12*r))),t.x=a,t.y=s,t}return l=Gt(this.es),c=Kt(this.es),h=Wt(this.es),f=zt(this.es),Math.abs(this.sin_p12-1)<=1e-10?(p=this.a*Ut(l,c,h,f,i),e=Math.sqrt(t.x*t.x+t.y*t.y),s=qt((p-e)/this.a,l,c,h,f),a=N(this.long0+Math.atan2(t.x,-1*t.y)),t.x=a,t.y=s,t):Math.abs(this.sin_p12+1)<=1e-10?(p=this.a*Ut(l,c,h,f,i),e=Math.sqrt(t.x*t.x+t.y*t.y),s=qt((e-p)/this.a,l,c,h,f),a=N(this.long0+Math.atan2(t.x,t.y)),t.x=a,t.y=s,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.x,t.y),d=Yt(this.a,this.e,this.sin_p12),y=Math.cos(m),E=-(v=this.e*this.cos_p12*y)*v/(1-this.es),_=3*this.es*(1-E)*this.sin_p12*this.cos_p12*y/(1-this.es),w=1-E*(S=(b=e/d)-E*(1+E)*Math.pow(b,3)/6-_*(1+3*E)*Math.pow(b,4)/24)*S/2-b*S*S*S/6,g=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*y),a=N(this.long0+Math.asin(Math.sin(m)*Math.sin(S)/Math.cos(g))),x=Math.sin(g),s=Math.atan2((x-this.es*w*this.sin_p12)*Math.tan(g),x*(1-this.es)),t.x=a,t.y=s,t)},names:["Azimuthal_Equidistant","aeqd"]};var he={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y;return r=N(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),1,((o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=1e-10)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,o,a,s,u;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=Qt(e/this.a),r=Math.sin(n),o=Math.cos(n),s=this.long0,Math.abs(e)<=1e-10?(u=this.lat0,t.x=s,t.y=u,t):(u=Qt(o*this.sin_p14+t.y*r*this.cos_p14/e),a=Math.abs(this.lat0)-i,Math.abs(a)<=1e-10?(s=this.lat0>=0?N(this.long0+Math.atan2(t.x,-t.y)):N(this.long0-Math.atan2(-t.x,t.y)),t.x=s,t.y=u,t):(s=N(this.long0+Math.atan2(t.x*r,e*this.cos_p14*o-t.y*this.sin_p14*r)),t.x=s,t.y=u,t))},names:["ortho"]},fe=1,pe=2,de=3,ge=4,me=5,ye=6,ve=1,Ee=2,_e=3,be=4;function Se(t,e,n,r){var o;return t<1e-10?(r.value=ve,o=0):(o=Math.atan2(e,n),Math.abs(o)<=s?r.value=ve:o>s&&o<=i+s?(r.value=Ee,o-=i):o>i+s||o<=-(i+s)?(r.value=_e,o=o>=0?o-l:o+l):(r.value=be,o+=i)),o}function we(t,e){var n=t+e;return n<-l?n+=u:n>+l&&(n-=u),n}var xe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=i-s/2?this.face=me:this.lat0<=-(i-s/2)?this.face=ye:Math.abs(this.long0)<=s?this.face=fe:Math.abs(this.long0)<=i+s?this.face=this.long0>0?pe:ge:this.face=de,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,o,a,u,c={x:0,y:0},h={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===me)o=i-e,n>=s&&n<=i+s?(h.value=ve,r=n-i):n>i+s||n<=-(i+s)?(h.value=Ee,r=n>0?n-l:n+l):n>-(i+s)&&n<=-s?(h.value=_e,r=n+i):(h.value=be,r=n);else if(this.face===ye)o=i+e,n>=s&&n<=i+s?(h.value=ve,r=-n+i):n<s&&n>=-s?(h.value=Ee,r=-n):n<-s&&n>=-(i+s)?(h.value=_e,r=-n-i):(h.value=be,r=n>0?-n+l:-n-l);else{var f,p,d,g,m,y;this.face===pe?n=we(n,+i):this.face===de?n=we(n,+l):this.face===ge&&(n=we(n,-i)),g=Math.sin(e),m=Math.cos(e),y=Math.sin(n),f=m*Math.cos(n),p=m*y,d=g,this.face===fe?r=Se(o=Math.acos(f),d,p,h):this.face===pe?r=Se(o=Math.acos(p),d,-f,h):this.face===de?r=Se(o=Math.acos(-f),d,-p,h):this.face===ge?r=Se(o=Math.acos(-p),d,f,h):(o=r=0,h.value=ve)}return u=Math.atan(12/l*(r+Math.acos(Math.sin(r)*Math.cos(s))-i)),a=Math.sqrt((1-Math.cos(o))/(Math.cos(u)*Math.cos(u))/(1-Math.cos(Math.atan(1/Math.cos(r))))),h.value===Ee?u+=i:h.value===_e?u+=l:h.value===be&&(u+=1.5*l),c.x=a*Math.cos(u),c.y=a*Math.sin(u),c.x=c.x*this.a+this.x0,c.y=c.y*this.a+this.y0,t.x=c.x,t.y=c.y,t},inverse:function(t){var e,n,r,o,a,s,u,c,h,f,p,d,g={lam:0,phi:0},m={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?m.value=ve:t.y>=0&&t.y>=Math.abs(t.x)?(m.value=Ee,e-=i):t.x<0&&-t.x>=Math.abs(t.y)?(m.value=_e,e=e<0?e+l:e-l):(m.value=be,e+=i),h=l/12*Math.tan(e),a=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),s=Math.atan(a),(u=1-(r=Math.cos(e))*r*(o=Math.tan(n))*o*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?u=-1:u>1&&(u=1),this.face===me)c=Math.acos(u),g.phi=i-c,m.value===ve?g.lam=s+i:m.value===Ee?g.lam=s<0?s+l:s-l:m.value===_e?g.lam=s-i:g.lam=s;else if(this.face===ye)c=Math.acos(u),g.phi=c-i,m.value===ve?g.lam=-s+i:m.value===Ee?g.lam=-s:m.value===_e?g.lam=-s-i:g.lam=s<0?-s-l:-s+l;else{var y,v,E;h=(y=u)*y,v=(h+=(E=h>=1?0:Math.sqrt(1-h)*Math.sin(s))*E)>=1?0:Math.sqrt(1-h),m.value===Ee?(h=v,v=-E,E=h):m.value===_e?(v=-v,E=-E):m.value===be&&(h=v,v=E,E=-h),this.face===pe?(h=y,y=-v,v=h):this.face===de?(y=-y,v=-v):this.face===ge&&(h=y,y=v,v=-h),g.phi=Math.acos(-E)-i,g.lam=Math.atan2(v,y),this.face===pe?g.lam=we(g.lam,-i):this.face===de?g.lam=we(g.lam,-l):this.face===ge&&(g.lam=we(g.lam,+i))}return 0!==this.es&&(f=g.phi<0?1:0,p=Math.tan(g.phi),d=this.b/Math.sqrt(p*p+this.one_minus_f_squared),g.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),f&&(g.phi=-g.phi)),g.lam+=this.long0,t.x=g.lam,t.y=g.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Te=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Le=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ce=a/5,Ae=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var Me={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=N(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*Ce);r<0?r=0:r>=18&&(r=17);var i={x:Ae(Te[r],n=a*(n-.08726646259971647*r))*e,y:Ae(Le[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(e.y>=1)e.x/=Te[18][0],e.y=t.y<0?-i:i;else{var n=Math.floor(18*e.y);for(n<0?n=0:n>=18&&(n=17);;)if(Le[n][0]>e.y)--n;else{if(!(Le[n+1][0]<=e.y))break;++n}var r=Le[n],a=5*(e.y-r[0])/(Le[n+1][0]-r[0]);a=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}((function(t){return(Ae(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)}),a,1e-10,100),e.x/=Ae(Te[n],a),e.y=(5*n+a)*o,t.y<0&&(e.y=-e.y)}return e.x=N(e.x+this.long0),e},names:["Robinson","robin"]};var Re,Oe={init:function(){this.name="geocent"},forward:function(t){return X(t,this.es,this.a)},inverse:function(t){return Z(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};at.defaultDatum="WGS84",at.Proj=q,at.WGS84=new at.Proj("WGS84"),at.Point=_t,at.toPoint=tt,at.defs=C,at.transform=nt,at.mgrs=lt,at.version="__VERSION__",(Re=at).Proj.projections.add(Tt),Re.Proj.projections.add(Ot),Re.Proj.projections.add(Pt),Re.Proj.projections.add(Dt),Re.Proj.projections.add(kt),Re.Proj.projections.add(Ft),Re.Proj.projections.add(Vt),Re.Proj.projections.add(jt),Re.Proj.projections.add(Bt),Re.Proj.projections.add(Xt),Re.Proj.projections.add(Jt),Re.Proj.projections.add($t),Re.Proj.projections.add(te),Re.Proj.projections.add(ee),Re.Proj.projections.add(ne),Re.Proj.projections.add(re),Re.Proj.projections.add(ie),Re.Proj.projections.add(oe),Re.Proj.projections.add(ae),Re.Proj.projections.add(se),Re.Proj.projections.add(ue),Re.Proj.projections.add(le),Re.Proj.projections.add(ce),Re.Proj.projections.add(he),Re.Proj.projections.add(xe),Re.Proj.projections.add(Me),Re.Proj.projections.add(Oe);e.default=at},,function(t,e,n){"use strict";n.r(e);function r(t,e,n){if(null!==t)for(var i,o,a,s,u,l,c,h,f=0,p=0,d=t.type,g="FeatureCollection"===d,m="Feature"===d,y=g?t.features.length:1,v=0;v<y;v++){u=(h=!!(c=g?t.features[v].geometry:m?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var E=0;E<u;E++){var _=0,b=0;if(null!==(s=h?c.geometries[E]:c)){l=s.coordinates;var S=s.type;switch(f=!n||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":e(l,p,v,_,b),p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++)e(l[i],p,v,_,b),p++,"MultiPoint"===S&&_++;"LineString"===S&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-f;o++)e(l[i][o],p,v,_,b),p++;"MultiLineString"===S&&_++,"Polygon"===S&&b++}"Polygon"===S&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for("MultiPolygon"===S&&(b=0),o=0;o<l[i].length;o++){for(a=0;a<l[i][o].length-f;a++)e(l[i][o][a],p,v,_,b),p++;b++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)r(s.geometries[i],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}e.default=function(t){var e=[1/0,1/0,-1/0,-1/0];return r(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}}]]);
//# sourceMappingURL=2.6042b60e.chunk.js.map